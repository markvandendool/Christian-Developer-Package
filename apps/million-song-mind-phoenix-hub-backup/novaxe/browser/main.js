var xB=Object.create;var ju=Object.defineProperty,CB=Object.defineProperties,wB=Object.getOwnPropertyDescriptor,MB=Object.getOwnPropertyDescriptors,SB=Object.getOwnPropertyNames,Pf=Object.getOwnPropertySymbols,PB=Object.getPrototypeOf,Iy=Object.prototype.hasOwnProperty,o3=Object.prototype.propertyIsEnumerable;var r3=(t,n,e)=>n in t?ju(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,Et=(t,n)=>{for(var e in n||={})Iy.call(n,e)&&r3(t,e,n[e]);if(Pf)for(var e of Pf(n))o3.call(n,e)&&r3(t,e,n[e]);return t},_n=(t,n)=>CB(t,MB(n));var Gu=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(n,e)=>(typeof require<"u"?require:n)[e]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Oy=(t,n)=>{var e={};for(var i in t)Iy.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(t!=null&&Pf)for(var i of Pf(t))n.indexOf(i)<0&&o3.call(t,i)&&(e[i]=t[i]);return e};var kB=(t,n)=>()=>(t&&(n=t(t=0)),n);var et=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),EB=(t,n)=>{for(var e in n)ju(t,e,{get:n[e],enumerable:!0})},s3=(t,n,e,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of SB(n))!Iy.call(t,r)&&r!==e&&ju(t,r,{get:()=>n[r],enumerable:!(i=wB(n,r))||i.enumerable});return t};var hr=(t,n,e)=>(e=t!=null?xB(PB(t)):{},s3(n||!t||!t.__esModule?ju(e,"default",{value:t,enumerable:!0}):e,t)),TB=t=>s3(ju({},"__esModule",{value:!0}),t);var zl=(t,n,e)=>new Promise((i,r)=>{var s=d=>{try{l(e.next(d))}catch(u){r(u)}},a=d=>{try{l(e.throw(d))}catch(u){r(u)}},l=d=>d.done?i(d.value):Promise.resolve(d.value).then(s,a);l((e=e.apply(t,n)).next())});var g5=et((dxe,m5)=>{var qW="6.1.3";m5.exports=qW});var $g=et((hxe,_5)=>{var HW=function(t,n){var e=this;if(n||(n={}),e.qpm=n.qpm?parseInt(n.qpm,10):null,!e.qpm){var i=t.metaText?t.metaText.tempo:null;e.qpm=t.getBpm(i)}e.extraMeasuresAtBeginning=n.extraMeasuresAtBeginning?parseInt(n.extraMeasuresAtBeginning,10):0,e.beatCallback=n.beatCallback,e.eventCallback=n.eventCallback,e.lineEndCallback=n.lineEndCallback,e.lineEndAnticipation=n.lineEndAnticipation?parseInt(n.lineEndAnticipation,10):0,e.beatSubdivisions=n.beatSubdivisions?parseInt(n.beatSubdivisions,10):1,e.joggerTimer=null,e.replaceTarget=function(s){e.noteTimings=s.setTiming(e.qpm,e.extraMeasuresAtBeginning),s.noteTimings.length===0&&s.setTiming(0,0),e.lineEndCallback&&(e.lineEndTimings=YW(s.noteTimings,e.lineEndAnticipation)),e.startTime=null,e.currentBeat=0,e.currentEvent=0,e.currentLine=0,e.currentTime=0,e.isPaused=!1,e.isRunning=!1,e.pausedPercent=null,e.justUnpaused=!1,e.newSeekPercent=0,e.lastTimestamp=0,e.noteTimings.length!==0&&(e.millisecondsPerBeat=1e3/(e.qpm/60)/e.beatSubdivisions,e.lastMoment=e.noteTimings[e.noteTimings.length-1].milliseconds,e.totalBeats=Math.round(e.lastMoment/e.millisecondsPerBeat))},e.replaceTarget(t),e.doTiming=function(s){if(e.lastTimestamp!==s&&(e.lastTimestamp=s,e.startTime||(e.startTime=s),!e.isPaused&&e.isRunning)){for(e.currentTime=s-e.startTime,e.currentTime+=16;e.noteTimings.length>e.currentEvent&&e.noteTimings[e.currentEvent].milliseconds<e.currentTime;){if(e.eventCallback&&e.noteTimings[e.currentEvent].type==="event"){var a=e.startTime;e.eventCallback(e.noteTimings[e.currentEvent]),a!==e.startTime&&(e.currentTime=s-e.startTime)}e.currentEvent++}if(e.lineEndCallback&&e.lineEndTimings.length>e.currentLine&&e.lineEndTimings[e.currentLine].milliseconds<e.currentTime&&e.currentEvent<e.noteTimings.length){var l=e.noteTimings[e.currentEvent].milliseconds===e.currentTime?e.noteTimings[e.currentEvent]:e.noteTimings[e.currentEvent-1];e.lineEndCallback(e.lineEndTimings[e.currentLine],l,{line:e.currentLine,endTimings:e.lineEndTimings,currentTime:e.currentTime}),e.currentLine++}if(e.currentTime<e.lastMoment){if(requestAnimationFrame(e.doTiming),e.currentBeat*e.millisecondsPerBeat<e.currentTime){var d=e.doBeatCallback(s);d!==null&&(e.currentTime=d)}}else if(e.currentBeat<=e.totalBeats&&e.beatCallback){var u=e.doBeatCallback(s);u!==null&&(e.currentTime=u),requestAnimationFrame(e.doTiming)}if(e.currentTime>=e.lastMoment)if(e.eventCallback){var h=e.eventCallback(null);e.shouldStop(h).then(function(_){_&&e.stop()})}else e.stop()}},e.shouldStop=function(s){return new Promise(function(a){if(!s)return a(!0);if(s==="continue")return a(!1);s.then&&s.then(function(l){a(l!=="continue")})})},e.doBeatCallback=function(s){if(e.beatCallback){for(var a=e.currentEvent;a<e.noteTimings.length&&e.noteTimings[a].left===null;)a++;var l,d;if(a<e.noteTimings.length){for(l=e.noteTimings[a].milliseconds,a=e.currentEvent-1;a>=0&&e.noteTimings[a].left===null;)a--;d=e.noteTimings[a]}var u={},h={};if(d){u.top=d.top,u.height=d.height;var _=Math.max(0,s-e.startTime-d.milliseconds),b=l-d.milliseconds,w=d.endX-d.left,S=_*w/b;u.left=d.left+S,h={timestamp:s,startTime:e.startTime,ev:d,endMs:l,offMs:_,offPs:S,gapMs:b,gapPx:w}}else h={timestamp:s,startTime:e.startTime};var L=e.startTime;if(e.beatCallback(e.currentBeat/e.beatSubdivisions,e.totalBeats/e.beatSubdivisions,e.lastMoment,u,h),L!==e.startTime)return s-e.startTime;e.currentBeat++}return null};var r=60;e.animationJogger=function(){e.isRunning&&(e.doTiming(performance.now()),e.joggerTimer=setTimeout(e.animationJogger,r))},e.start=function(s,a){if(e.isRunning=!0,e.isPaused&&(e.isPaused=!1,s===void 0&&(e.justUnpaused=!0)),s)e.setProgress(s,a);else if(s===0)e.reset();else if(e.pausedPercent!==null){var l=performance.now();e.currentTime=e.lastMoment*e.pausedPercent,e.startTime=l-e.currentTime,e.pausedPercent=null,e.reportNext=!0}requestAnimationFrame(e.doTiming),e.joggerTimer=setTimeout(e.animationJogger,r)},e.pause=function(){e.isPaused=!0;var s=performance.now();e.pausedPercent=(s-e.startTime)/e.lastMoment,e.isRunning=!1,e.joggerTimer&&(clearTimeout(e.joggerTimer),e.joggerTimer=null)},e.currentMillisecond=function(){return e.currentTime},e.reset=function(){e.currentBeat=0,e.currentEvent=0,e.currentLine=0,e.startTime=null,e.pausedPercent=null},e.stop=function(){e.pause(),e.reset()},e.setProgress=function(s,a){var l;switch(a){case"seconds":e.currentTime=s*1e3,e.currentTime<0&&(e.currentTime=0),e.currentTime>e.lastMoment&&(e.currentTime=e.lastMoment),l=e.currentTime/e.lastMoment;break;case"beats":e.currentTime=s*e.millisecondsPerBeat*e.beatSubdivisions,e.currentTime<0&&(e.currentTime=0),e.currentTime>e.lastMoment&&(e.currentTime=e.lastMoment),l=e.currentTime/e.lastMoment;break;default:l=s,l<0&&(l=0),l>1&&(l=1),e.currentTime=e.lastMoment*l;break}e.isRunning||(e.pausedPercent=l);var d=performance.now();e.startTime=d-e.currentTime;var u=e.currentEvent;for(e.currentEvent=0;e.noteTimings.length>e.currentEvent&&e.noteTimings[e.currentEvent].milliseconds<e.currentTime;)e.currentEvent++;if(e.lineEndCallback)for(e.currentLine=0;e.lineEndTimings.length>e.currentLine&&e.lineEndTimings[e.currentLine].milliseconds+e.lineEndAnticipation<e.currentTime;)e.currentLine++;var h=e.currentBeat;e.currentBeat=Math.floor(e.currentTime/e.millisecondsPerBeat),e.beatCallback&&h!==e.currentBeat&&e.doBeatCallback(e.startTime+e.currentTime),e.eventCallback&&e.currentEvent>=0&&e.noteTimings[e.currentEvent].type==="event"&&e.eventCallback(e.noteTimings[e.currentEvent]),e.lineEndCallback&&e.lineEndCallback(e.lineEndTimings[e.currentLine],e.noteTimings[e.currentEvent],{line:e.currentLine,endTimings:e.lineEndTimings}),e.joggerTimer=setTimeout(e.animationJogger,r)}};function YW(t,n){for(var e=[],i=null,r=0;r<t.length;r++){var s=t[r];s.type!=="end"&&s.top!==i&&(e.push({measureNumber:s.measureNumber,milliseconds:s.milliseconds-n,top:s.top,bottom:s.top+s.height}),i=s.top)}return e}_5.exports=HW});var v5=et((uxe,y5)=>{var XW=$g(),Kg={};(function(){"use strict";var t,n;Kg.startAnimation=function(e,i,r){t&&(t.stop(),t=void 0),r.showCursor&&(n=e.querySelector(".abcjs-cursor"),n||(n=document.createElement("DIV"),n.className="abcjs-cursor cursor",n.style.position="absolute",e.appendChild(n),e.style.position="relative"));function s(b){for(var w=0;w<b.length;w++){var S=b[w];S.classList.contains("abcjs-bar")||(S.style.display="none")}}var a;function l(b){if(a){var w=e.querySelectorAll(a);s(w)}a=b}function d(b){var w=e.querySelectorAll(b);s(w)}function u(b){r.hideCurrentMeasure?d(b):r.hideFinishedMeasures&&l(b)}function h(b){return".abcjs-l"+b.line+".abcjs-m"+b.measureNumber}function _(b){if(b){if(b.measureStart){var w=h(b);w&&u(w)}n&&(n.style.left=b.left+"px",n.style.top=b.top+"px",n.style.width=b.width+"px",n.style.height=b.height+"px")}else t.stop(),t=void 0}t=new XW(i,{qpm:r.bpm,eventCallback:_}),t.start()},Kg.pauseAnimation=function(e){t&&(e?t.pause():t.start())},Kg.stopAnimation=function(){t&&(t.stop(),t=void 0)}})();y5.exports=Kg});var oo=et((pxe,b5)=>{var Co={};Co.clone=function(t){var n={};for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n};Co.cloneArray=function(t){for(var n=[],e=0;e<t.length;e++)n.push(Co.clone(t[e]));return n};Co.cloneHashOfHash=function(t){var n={};for(var e in t)t.hasOwnProperty(e)&&(n[e]=Co.clone(t[e]));return n};Co.cloneHashOfArrayOfHash=function(t){var n={};for(var e in t)t.hasOwnProperty(e)&&(n[e]=Co.cloneArray(t[e]));return n};Co.gsub=function(t,n,e){return t.split(n).join(e)};Co.strip=function(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")};Co.startsWith=function(t,n){return t.indexOf(n)===0};Co.endsWith=function(t,n){var e=t.length-n.length;return e>=0&&t.lastIndexOf(n)===e};Co.each=function(t,n,e){for(var i=0,r=t.length;i<r;i++)n.apply(e,[t[i],i])};Co.last=function(t){return t.length===0?null:t[t.length-1]};Co.compact=function(t){for(var n=[],e=0;e<t.length;e++)t[e]&&n.push(t[e]);return n};Co.detect=function(t,n){for(var e=0;e<t.length;e++)if(n(t[e]))return!0;return!1};try{(function(t){t.forEach(function(n){n.hasOwnProperty("remove")||Object.defineProperty(n,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode!==null&&this.parentNode.removeChild(this)}})})})([Element.prototype,CharacterData.prototype,DocumentType.prototype])}catch{}b5.exports=Co});var Zg=et((fxe,x5)=>{var Cx=oo(),dd={};(function(){"use strict";var t,n,e,i,r;dd.initialize=function(Y,G,le,X,Ue){t=Y,n=G,e=le,i=X,r=Ue,s()};function s(){e.annotationfont={face:"Helvetica",size:12,weight:"normal",style:"normal",decoration:"none"},e.gchordfont={face:"Helvetica",size:12,weight:"normal",style:"normal",decoration:"none"},e.historyfont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},e.infofont={face:'"Times New Roman"',size:14,weight:"normal",style:"italic",decoration:"none"},e.measurefont={face:'"Times New Roman"',size:14,weight:"normal",style:"italic",decoration:"none"},e.partsfont={face:'"Times New Roman"',size:15,weight:"normal",style:"normal",decoration:"none"},e.repeatfont={face:'"Times New Roman"',size:13,weight:"normal",style:"normal",decoration:"none"},e.textfont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},e.tripletfont={face:"Times",size:11,weight:"normal",style:"italic",decoration:"none"},e.vocalfont={face:'"Times New Roman"',size:13,weight:"bold",style:"normal",decoration:"none"},e.wordsfont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},i.formatting.composerfont={face:'"Times New Roman"',size:14,weight:"normal",style:"italic",decoration:"none"},i.formatting.subtitlefont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},i.formatting.tempofont={face:'"Times New Roman"',size:15,weight:"bold",style:"normal",decoration:"none"},i.formatting.titlefont={face:'"Times New Roman"',size:20,weight:"normal",style:"normal",decoration:"none"},i.formatting.footerfont={face:'"Times New Roman"',size:12,weight:"normal",style:"normal",decoration:"none"},i.formatting.headerfont={face:'"Times New Roman"',size:12,weight:"normal",style:"normal",decoration:"none"},i.formatting.voicefont={face:'"Times New Roman"',size:13,weight:"bold",style:"normal",decoration:"none"},i.formatting.tablabelfont={face:'"Trebuchet MS"',size:16,weight:"normal",style:"normal",decoration:"none"},i.formatting.tabnumberfont={face:'"Arial"',size:11,weight:"normal",style:"normal",decoration:"none"},i.formatting.tabgracefont={face:'"Arial"',size:8,weight:"normal",style:"normal",decoration:"none"},i.formatting.annotationfont=e.annotationfont,i.formatting.gchordfont=e.gchordfont,i.formatting.historyfont=e.historyfont,i.formatting.infofont=e.infofont,i.formatting.measurefont=e.measurefont,i.formatting.partsfont=e.partsfont,i.formatting.repeatfont=e.repeatfont,i.formatting.textfont=e.textfont,i.formatting.tripletfont=e.tripletfont,i.formatting.vocalfont=e.vocalfont,i.formatting.wordsfont=e.wordsfont}var a={gchordfont:!0,measurefont:!0,partsfont:!0,annotationfont:!0,composerfont:!0,historyfont:!0,infofont:!0,subtitlefont:!0,textfont:!0,titlefont:!0,voicefont:!0},l=function(Y){switch(Y){case"Arial-Italic":return{face:"Arial",weight:"normal",style:"italic",decoration:"none"};case"Arial-Bold":return{face:"Arial",weight:"bold",style:"normal",decoration:"none"};case"Bookman-Demi":return{face:"Bookman,serif",weight:"bold",style:"normal",decoration:"none"};case"Bookman-DemiItalic":return{face:"Bookman,serif",weight:"bold",style:"italic",decoration:"none"};case"Bookman-Light":return{face:"Bookman,serif",weight:"normal",style:"normal",decoration:"none"};case"Bookman-LightItalic":return{face:"Bookman,serif",weight:"normal",style:"italic",decoration:"none"};case"Courier":return{face:'"Courier New"',weight:"normal",style:"normal",decoration:"none"};case"Courier-Oblique":return{face:'"Courier New"',weight:"normal",style:"italic",decoration:"none"};case"Courier-Bold":return{face:'"Courier New"',weight:"bold",style:"normal",decoration:"none"};case"Courier-BoldOblique":return{face:'"Courier New"',weight:"bold",style:"italic",decoration:"none"};case"AvantGarde-Book":return{face:"AvantGarde,Arial",weight:"normal",style:"normal",decoration:"none"};case"AvantGarde-BookOblique":return{face:"AvantGarde,Arial",weight:"normal",style:"italic",decoration:"none"};case"AvantGarde-Demi":case"Avant-Garde-Demi":return{face:"AvantGarde,Arial",weight:"bold",style:"normal",decoration:"none"};case"AvantGarde-DemiOblique":return{face:"AvantGarde,Arial",weight:"bold",style:"italic",decoration:"none"};case"Helvetica-Oblique":return{face:"Helvetica",weight:"normal",style:"italic",decoration:"none"};case"Helvetica-Bold":return{face:"Helvetica",weight:"bold",style:"normal",decoration:"none"};case"Helvetica-BoldOblique":return{face:"Helvetica",weight:"bold",style:"italic",decoration:"none"};case"Helvetica-Narrow":return{face:'"Helvetica Narrow",Helvetica',weight:"normal",style:"normal",decoration:"none"};case"Helvetica-Narrow-Oblique":return{face:'"Helvetica Narrow",Helvetica',weight:"normal",style:"italic",decoration:"none"};case"Helvetica-Narrow-Bold":return{face:'"Helvetica Narrow",Helvetica',weight:"bold",style:"normal",decoration:"none"};case"Helvetica-Narrow-BoldOblique":return{face:'"Helvetica Narrow",Helvetica',weight:"bold",style:"italic",decoration:"none"};case"Palatino-Roman":return{face:"Palatino",weight:"normal",style:"normal",decoration:"none"};case"Palatino-Italic":return{face:"Palatino",weight:"normal",style:"italic",decoration:"none"};case"Palatino-Bold":return{face:"Palatino",weight:"bold",style:"normal",decoration:"none"};case"Palatino-BoldItalic":return{face:"Palatino",weight:"bold",style:"italic",decoration:"none"};case"NewCenturySchlbk-Roman":return{face:'"New Century",serif',weight:"normal",style:"normal",decoration:"none"};case"NewCenturySchlbk-Italic":return{face:'"New Century",serif',weight:"normal",style:"italic",decoration:"none"};case"NewCenturySchlbk-Bold":return{face:'"New Century",serif',weight:"bold",style:"normal",decoration:"none"};case"NewCenturySchlbk-BoldItalic":return{face:'"New Century",serif',weight:"bold",style:"italic",decoration:"none"};case"Times":case"Times-Roman":case"Times-Narrow":case"Times-Courier":case"Times-New-Roman":return{face:'"Times New Roman"',weight:"normal",style:"normal",decoration:"none"};case"Times-Italic":case"Times-Italics":return{face:'"Times New Roman"',weight:"normal",style:"italic",decoration:"none"};case"Times-Bold":return{face:'"Times New Roman"',weight:"bold",style:"normal",decoration:"none"};case"Times-BoldItalic":return{face:'"Times New Roman"',weight:"bold",style:"italic",decoration:"none"};case"ZapfChancery-MediumItalic":return{face:'"Zapf Chancery",cursive,serif',weight:"normal",style:"normal",decoration:"none"};default:return null}},d=function(Y,G,le,X,Ue){function Ze(){var Mn=parseInt(Y[0].token);return Y.shift(),G?Y.length===0?{face:G.face,weight:G.weight,style:G.style,decoration:G.decoration,size:Mn}:Y.length===1&&Y[0].token==="box"&&a[Ue]?{face:G.face,weight:G.weight,style:G.style,decoration:G.decoration,size:Mn,box:!0}:(n("Extra parameters in font definition.",le,X),{face:G.face,weight:G.weight,style:G.style,decoration:G.decoration,size:Mn}):(n("Can't set just the size of the font since there is no default value.",le,X),{face:'"Times New Roman"',weight:"normal",style:"normal",decoration:"none",size:Mn})}if(Y[0].token==="*"){if(Y.shift(),Y[0].type==="number")return Ze();n("Expected font size number after *.",le,X)}if(Y[0].type==="number")return Ze();for(var De=[],xe,ke="normal",Ve="normal",it="none",Je=!1,st="face",ot=!1;Y.length;){var pn=Y.shift(),tn=pn.token.toLowerCase();switch(st){case"face":ot||tn!=="utf"&&pn.type!=="number"&&tn!=="bold"&&tn!=="italic"&&tn!=="underline"&&tn!=="box"?De.length>0&&pn.token==="-"?(ot=!0,De[De.length-1]=De[De.length-1]+pn.token):ot?(ot=!1,De[De.length-1]=De[De.length-1]+pn.token):De.push(pn.token):pn.type==="number"?(xe?n("Font size specified twice in font definition.",le,X):xe=pn.token,st="modifier"):tn==="bold"?ke="bold":tn==="italic"?Ve="italic":tn==="underline"?it="underline":tn==="box"?(a[Ue]?Je=!0:n(`This font style doesn't support "box"`,le,X),st="finished"):tn==="utf"?(pn=Y.shift(),st="size"):n("Unknown parameter "+pn.token+" in font definition.",le,X);break;case"size":pn.type==="number"?xe?n("Font size specified twice in font definition.",le,X):xe=pn.token:n("Expected font size in font definition.",le,X),st="modifier";break;case"modifier":tn==="bold"?ke="bold":tn==="italic"?Ve="italic":tn==="underline"?it="underline":tn==="box"?(a[Ue]?Je=!0:n(`This font style doesn't support "box"`,le,X),st="finished"):n("Unknown parameter "+pn.token+" in font definition.",le,X);break;case"finished":n('Extra characters found after "box" in font definition.',le,X);break}}xe===void 0?G?xe=G.size:(n("Must specify the size of the font since there is no default value.",le,X),xe=12):xe=parseFloat(xe),De=De.join(" "),De===""&&(G?De=G.face:(n("Must specify the name of the font since there is no default value.",le,X),De="sans-serif"));var Tt=l(De),mt={};return Tt?(mt.face=Tt.face,mt.weight=Tt.weight,mt.style=Tt.style,mt.decoration=Tt.decoration,mt.size=xe,Je&&(mt.box=!0),mt):(mt.face=De,mt.weight=ke,mt.style=Ve,mt.decoration=it,mt.size=xe,Je&&(mt.box=!0),mt)},u=function(Y,G,le){return G.length===0?'Directive "'+Y+'" requires a font as a parameter.':(e[Y]=d(G,e[Y],le,0,Y),e.is_in_header&&(i.formatting[Y]=e[Y]),null)},h=function(Y,G,le){return G.length===0?'Directive "'+Y+'" requires a font as a parameter.':(i.formatting[Y]=d(G,i.formatting[Y],le,0,Y),null)},_=function(Y,G){var le="";Cx.each(G,function(Ue){le+=Ue.token});var X=parseFloat(le);if(isNaN(X)||X===0)return'Directive "'+Y+'" requires a number as a parameter.';i.formatting.scale=X},b=["acoustic-bass-drum","bass-drum-1","side-stick","acoustic-snare","hand-clap","electric-snare","low-floor-tom","closed-hi-hat","high-floor-tom","pedal-hi-hat","low-tom","open-hi-hat","low-mid-tom","hi-mid-tom","crash-cymbal-1","high-tom","ride-cymbal-1","chinese-cymbal","ride-bell","tambourine","splash-cymbal","cowbell","crash-cymbal-2","vibraslap","ride-cymbal-2","hi-bongo","low-bongo","mute-hi-conga","open-hi-conga","low-conga","high-timbale","low-timbale","high-agogo","low-agogo","cabasa","maracas","short-whistle","long-whistle","short-guiro","long-guiro","claves","hi-wood-block","low-wood-block","mute-cuica","open-cuica","mute-triangle","open-triangle"],w=function(Y){var G=Y.split(/\s+/);if(G.length!==2&&G.length!==3)return{error:'Expected parameters "abc-note", "drum-sound", and optionally "note-head"'};var le=G[0],X=parseInt(G[1],10);if((isNaN(X)||X<35||X>81)&&G[1]&&(X=b.indexOf(G[1].toLowerCase())+35),isNaN(X)||X<35||X>81)return{error:'Expected drum name, received "'+G[1]+'"'};var Ue={sound:X};return G.length===3&&(Ue.noteHead=G[2]),{key:le,value:Ue}},S=function(Y,G){var le=t.getMeasurement(G);return le.used===0||G.length!==0?{error:'Directive "'+Y+'" requires a measurement as a parameter.'}:le.value},L=function(Y,G){var le=t.getMeasurement(G);return le.used===0||G.length!==0?'Directive "'+Y+'" requires a measurement as a parameter.':(i.formatting[Y]=le.value,null)},R=function(Y,G,le,X,Ue){if(le.length!==1||le[0].type!=="number")return'Directive "'+G+'" requires a number as a parameter.';var Ze=le[0].intt;return X!==void 0&&Ze<X?'Directive "'+G+'" requires a number greater than or equal to '+X+" as a parameter.":Ue!==void 0&&Ze>Ue?'Directive "'+G+'" requires a number less than or equal to '+Ue+" as a parameter.":(e[Y]=Ze,null)},z=function(Y,G,le){if(le.length===1&&(le[0].token==="true"||le[0].token==="false"))return e[Y]=le[0].token==="true",null;var X=R(Y,G,le,0,1);return X!==null?X:(e[Y]=e[Y]===1,null)},ne=function(Y,G,le,X){if(le.length!==1)return'Directive "'+G+'" requires one of [ '+X.join(", ")+" ] as a parameter.";for(var Ue=le[0].token,Ze=!1,De=0;!Ze&&De<X.length;De++)X[De]===Ue&&(Ze=!0);return Ze?(e[Y]=Ue,null):'Directive "'+G+'" requires one of [ '+X.join(", ")+" ] as a parameter."},Q=["nobarlines","barlines","beataccents","nobeataccents","droneon","droneoff","drumon","drumoff","fermatafixed","fermataproportional","gchordon","gchordoff","controlcombo","temperamentnormal","noportamento"],q=["gchord","ptstress","beatstring"],T=["bassvol","chordvol","c","channel","beatmod","deltaloudness","drumbars","gracedivider","makechordchannels","randomchordattack","chordattack","stressmodel","transpose","rtranspose","vol","volinc"],se=["program"],_e=["ratio","snt","bendvelocity","pitchbend","control","temperamentlinear"],Me=["beat"],me=["drone"],K=["portamento"],ue=["expand","grace","trim"],be=["drum","chordname"],Z=function(Y,G,le){var X=Y.shift().token,Ue=[];if(Q.indexOf(X)>=0)Y.length!==0&&n("Unexpected parameter in MIDI "+X,le,0);else if(q.indexOf(X)>=0)Y.length!==1?n("Expected one parameter in MIDI "+X,le,0):Ue.push(Y[0].token);else if(T.indexOf(X)>=0)Y.length!==1?n("Expected one parameter in MIDI "+X,le,0):Y[0].type!=="number"?n("Expected one integer parameter in MIDI "+X,le,0):Ue.push(Y[0].intt);else if(se.indexOf(X)>=0)Y.length!==1&&Y.length!==2?n("Expected one or two parameters in MIDI "+X,le,0):Y[0].type!=="number"||Y.length===2&&Y[1].type!=="number"?n("Expected integer parameter in MIDI "+X,le,0):(Ue.push(Y[0].intt),Y.length===2&&Ue.push(Y[1].intt));else if(_e.indexOf(X)>=0)Y.length!==2?n("Expected two parameters in MIDI "+X,le,0):Y[0].type!=="number"||Y[1].type!=="number"?n("Expected two integer parameters in MIDI "+X,le,0):(Ue.push(Y[0].intt),Ue.push(Y[1].intt));else if(K.indexOf(X)>=0)Y.length!==2?n("Expected two parameters in MIDI "+X,le,0):Y[0].type!=="alpha"||Y[1].type!=="number"?n("Expected one string and one integer parameters in MIDI "+X,le,0):(Ue.push(Y[0].token),Ue.push(Y[1].intt));else if(X==="drummap")Y.length===2&&Y[0].type==="alpha"&&Y[1].type==="number"?(G.formatting||(G.formatting={}),G.formatting.midi||(G.formatting.midi={}),G.formatting.midi.drummap||(G.formatting.midi.drummap={}),G.formatting.midi.drummap[Y[0].token]=Y[1].intt,Ue=G.formatting.midi.drummap):Y.length===3&&Y[0].type==="punct"&&Y[1].type==="alpha"&&Y[2].type==="number"?(G.formatting||(G.formatting={}),G.formatting.midi||(G.formatting.midi={}),G.formatting.midi.drummap||(G.formatting.midi.drummap={}),G.formatting.midi.drummap[Y[0].token+Y[1].token]=Y[2].intt,Ue=G.formatting.midi.drummap):n("Expected one note name and one integer parameter in MIDI "+X,le,0);else if(ue.indexOf(X)>=0)Y.length!==3||Y[0].type!=="number"||Y[1].token!=="/"||Y[2].type!=="number"?n("Expected fraction parameter in MIDI "+X,le,0):(Ue.push(Y[0].intt),Ue.push(Y[2].intt));else if(Me.indexOf(X)>=0)Y.length!==4?n("Expected four parameters in MIDI "+X,le,0):Y[0].type!=="number"||Y[1].type!=="number"||Y[2].type!=="number"||Y[3].type!=="number"?n("Expected four integer parameters in MIDI "+X,le,0):(Ue.push(Y[0].intt),Ue.push(Y[1].intt),Ue.push(Y[2].intt),Ue.push(Y[3].intt));else if(me.indexOf(X)>=0)Y.length!==5?n("Expected five parameters in MIDI "+X,le,0):Y[0].type!=="number"||Y[1].type!=="number"||Y[2].type!=="number"||Y[3].type!=="number"||Y[4].type!=="number"?n("Expected five integer parameters in MIDI "+X,le,0):(Ue.push(Y[0].intt),Ue.push(Y[1].intt),Ue.push(Y[2].intt),Ue.push(Y[3].intt),Ue.push(Y[4].intt));else if(se.indexOf(X)>=0)Y.length!==1||Y.length!==4?n("Expected one or two parameters in MIDI "+X,le,0):Y[0].type!=="number"?n("Expected integer parameter in MIDI "+X,le,0):Y.length===4?(Y[1].token!=="octave"&&n("Expected octave parameter in MIDI "+X,le,0),Y[2].token!=="="&&n("Expected octave parameter in MIDI "+X,le,0),Y[3].type!=="number"&&n("Expected integer parameter for octave in MIDI "+X,le,0)):(Ue.push(Y[0].intt),Y.length===4&&Ue.push(Y[3].intt));else if(be.indexOf(X)>=0)if(Y.length<2)n("Expected string parameter and at least one integer parameter in MIDI "+X,le,0);else if(Y[0].type!=="alpha")n("Expected string parameter and at least one integer parameter in MIDI "+X,le,0);else{var Ze=Y.shift();for(Ue.push(Ze.token);Y.length>0;)Ze=Y.shift(),Ze.type!=="number"&&n("Expected integer parameter in MIDI "+X,le,0),Ue.push(Ze.intt)}r.hasBeginMusic()?r.appendElement("midi",-1,-1,{cmd:X,params:Ue}):(G.formatting.midi===void 0&&(G.formatting.midi={}),G.formatting.midi[X]=Ue)};dd.parseFontChangeLine=function(Y){var G=Y.split("$");if(G.length>1&&e.setfont){for(var le=[{text:G[0]}],X=1;X<G.length;X++)G[X].charAt(0)==="0"?le.push({text:G[X].substring(1)}):G[X].charAt(0)==="1"&&e.setfont[1]?le.push({font:e.setfont[1],text:G[X].substring(1)}):G[X].charAt(0)==="2"&&e.setfont[2]?le.push({font:e.setfont[2],text:G[X].substring(1)}):G[X].charAt(0)==="3"&&e.setfont[3]?le.push({font:e.setfont[3],text:G[X].substring(1)}):G[X].charAt(0)==="4"&&e.setfont[4]?le.push({font:e.setfont[4],text:G[X].substring(1)}):le[le.length-1].text+="$"+G[X];if(le.length>1)return le}return Y};var oe=["auto","above","below","hidden"];dd.addDirective=function(Y){var G=t.tokenize(Y,0,Y.length);if(G.length===0||G[0].type!=="alpha")return null;var le=Y.substring(Y.indexOf(G[0].token)+G[0].token.length);le=t.stripComment(le);var X=G.shift().token.toLowerCase(),Ue="",Ze;switch(X){case"bagpipes":i.formatting.bagpipes=!0;break;case"flatbeams":i.formatting.flatbeams=!0;break;case"jazzchords":i.formatting.jazzchords=!0;break;case"landscape":e.landscape=!0;break;case"papersize":e.papersize=le;break;case"graceslurs":if(G.length!==1)return"Directive graceslurs requires one parameter: 0 or 1";if(G[0].token==="0"||G[0].token==="false")i.formatting.graceSlurs=!1;else if(G[0].token==="1"||G[0].token==="true")i.formatting.graceSlurs=!0;else return"Directive graceslurs requires one parameter: 0 or 1 (received "+G[0].token+")";break;case"stretchlast":var De=Ee(G);if(De.value!==void 0&&(i.formatting.stretchlast=De.value),De.error)return De.error;break;case"titlecaps":e.titlecaps=!0;break;case"titleleft":i.formatting.titleleft=!0;break;case"measurebox":i.formatting.measurebox=!0;break;case"vocal":return ne("vocalPosition",X,G,oe);case"dynamic":return ne("dynamicPosition",X,G,oe);case"gchord":return ne("chordPosition",X,G,oe);case"ornament":return ne("ornamentPosition",X,G,oe);case"volume":return ne("volumePosition",X,G,oe);case"botmargin":case"botspace":case"composerspace":case"indent":case"leftmargin":case"linesep":case"musicspace":case"partsspace":case"pageheight":case"pagewidth":case"rightmargin":case"staffsep":case"staffwidth":case"subtitlespace":case"sysstaffsep":case"systemsep":case"textspace":case"titlespace":case"topmargin":case"topspace":case"vocalspace":case"wordsspace":return L(X,G);case"voicescale":if(G.length!==1||G[0].type!=="number")return"voicescale requires one float as a parameter";var xe=G.shift();return e.currentVoice&&(e.currentVoice.scale=xe.floatt,r.changeVoiceScale(e.currentVoice.scale)),null;case"vskip":var ke=Math.round(S(X,G));return ke.error?ke.error:(r.addSpacing(ke),null);case"scale":_(X,G);break;case"sep":if(G.length===0)r.addSeparator(14,14,85,{startChar:e.iChar,endChar:e.iChar+5});else{var Ve=t.getMeasurement(G);if(Ve.used===0)return'Directive "'+X+'" requires 3 numbers: space above, space below, length of line';var it=Ve.value;if(Ve=t.getMeasurement(G),Ve.used===0)return'Directive "'+X+'" requires 3 numbers: space above, space below, length of line';var Je=Ve.value;if(Ve=t.getMeasurement(G),Ve.used===0||G.length!==0)return'Directive "'+X+'" requires 3 numbers: space above, space below, length of line';var st=Ve.value;r.addSeparator(it,Je,st,{startChar:e.iChar,endChar:e.iChar+le.length})}break;case"barsperstaff":if(Ue=R("barsperstaff",X,G),Ue!==null)return Ue;break;case"staffnonote":if(G.length!==1)return"Directive staffnonote requires one parameter: 0 or 1";if(G[0].token==="0")e.staffnonote=!0;else if(G[0].token==="1")e.staffnonote=!1;else return"Directive staffnonote requires one parameter: 0 or 1 (received "+G[0].token+")";break;case"printtempo":if(Ue=z("printTempo",X,G),Ue!==null)return Ue;break;case"partsbox":if(Ue=z("partsBox",X,G),Ue!==null)return Ue;e.partsfont.box=e.partsBox;break;case"freegchord":if(Ue=z("freegchord",X,G),Ue!==null)return Ue;break;case"measurenb":case"barnumbers":if(Ue=R("barNumbers",X,G),Ue!==null)return Ue;break;case"setbarnb":if(G.length!==1||G[0].type!=="number")return"Directive setbarnb requires a number as a parameter.";e.currBarNumber=r.setBarNumberImmediate(G[0].intt);break;case"begintext":var ot="";for(Ze=t.nextLine();Ze&&Ze.indexOf("%%endtext")!==0;)Cx.startsWith(Ze,"%%")?ot+=Ze.substring(2)+`
`:ot+=Ze+`
`,Ze=t.nextLine();r.addText(ot,{startChar:e.iChar,endChar:e.iChar+ot.length+7});break;case"continueall":e.continueall=!0;break;case"beginps":for(Ze=t.nextLine();Ze&&Ze.indexOf("%%endps")!==0;)t.nextLine();n("Postscript ignored",Y,0);break;case"deco":le.length>0&&e.ignoredDecorations.push(le.substring(0,le.indexOf(" "))),n("Decoration redefinition ignored",Y,0);break;case"text":var pn=t.translateString(le);r.addText(dd.parseFontChangeLine(pn),{startChar:e.iChar,endChar:e.iChar+le.length+7});break;case"center":var tn=t.translateString(le);r.addCentered(dd.parseFontChangeLine(tn));break;case"font":break;case"setfont":var Tt=t.tokenize(le,0,le.length);if(Tt.length>=4&&Tt[0].token==="-"&&Tt[1].type==="number"){var mt=parseInt(Tt[1].token);mt>=1&&mt<=4&&(e.setfont||(e.setfont=[]),Tt.shift(),Tt.shift(),e.setfont[mt]=d(Tt,e.setfont[mt],Y,0,"setfont"))}break;case"gchordfont":case"partsfont":case"tripletfont":case"vocalfont":case"textfont":case"annotationfont":case"historyfont":case"infofont":case"measurefont":case"repeatfont":case"wordsfont":return u(X,G,Y);case"composerfont":case"subtitlefont":case"tempofont":case"titlefont":case"voicefont":case"footerfont":case"headerfont":return h(X,G,Y);case"barlabelfont":case"barnumberfont":case"barnumfont":return u("measurefont",G,Y);case"staves":case"score":e.score_is_present=!0;for(var Mn=function(bt,Rt,Nt,St,kn){(Rt||e.staves.length===0)&&e.staves.push({index:e.staves.length,numVoices:0});var rn=Cx.last(e.staves);Nt!==void 0&&rn.bracket===void 0&&(rn.bracket=Nt),St!==void 0&&rn.brace===void 0&&(rn.brace=St),kn&&(rn.connectBarLines="end"),e.voices[bt]===void 0&&(e.voices[bt]={staffNum:rn.index,index:rn.numVoices},rn.numVoices++)},vt=!1,Nn=!1,ui=!1,Mr=!1,Br=!1,Fi=!1,qt=!1,Qn,Sr=function(){if(qt=!0,Qn){var bt="start";Qn.staffNum>0&&(e.staves[Qn.staffNum-1].connectBarLines==="start"||e.staves[Qn.staffNum-1].connectBarLines==="continue")&&(bt="continue"),e.staves[Qn.staffNum].connectBarLines=bt}};G.length;){var vi=G.shift();switch(vi.token){case"(":vt?n("Can't nest parenthesis in %%score",Y,vi.start):(vt=!0,Mr=!0);break;case")":!vt||Mr?n("Unexpected close parenthesis in %%score",Y,vi.start):vt=!1;break;case"[":Nn?n("Can't nest brackets in %%score",Y,vi.start):(Nn=!0,Br=!0);break;case"]":!Nn||Br?n("Unexpected close bracket in %%score",Y,vi.start):(Nn=!1,e.staves[Qn.staffNum].bracket="end");break;case"{":ui?n("Can't nest braces in %%score",Y,vi.start):(ui=!0,Fi=!0);break;case"}":!ui||Fi?n("Unexpected close brace in %%score",Y,vi.start):(ui=!1,e.staves[Qn.staffNum].brace="end");break;case"|":Sr();break;default:for(var Pr="";(vi.type==="alpha"||vi.type==="number")&&(Pr+=vi.token,vi.continueId);)vi=G.shift();var Wi=!vt||Mr,li=Br?"start":Nn?"continue":void 0,Hi=Fi?"start":ui?"continue":void 0;Mn(Pr,Wi,li,Hi,qt),Mr=!1,Br=!1,Fi=!1,qt=!1,Qn=e.voices[Pr],X==="staves"&&Sr();break}}break;case"newpage":var is=t.getInt(le);r.addNewPage(is.digits===0?-1:is.value);break;case"abc":var Eo=le.split(" ");switch(Eo[0]){case"-copyright":case"-creator":case"-edited-by":case"-version":case"-charset":var Jr=Eo.shift();r.addMetaText(X+Jr,Eo.join(" "),{startChar:e.iChar,endChar:e.iChar+le.length+5});break;default:return"Unknown directive: "+X+Eo[0]}break;case"header":case"footer":var Pi=t.getMeat(le,0,le.length);Pi=le.substring(Pi.start,Pi.end),Pi.charAt(0)==='"'&&Pi.charAt(Pi.length-1)==='"'&&(Pi=Pi.substring(1,Pi.length-1));var ee=Pi.split("	"),te={};ee.length===1?te={left:"",center:ee[0],right:""}:ee.length===2?te={left:ee[0],center:ee[1],right:""}:te={left:ee[0],center:ee[1],right:ee[2]},ee.length>3&&n("Too many tabs in "+X+": "+ee.length+" found.",le,0),r.addMetaTextObj(X,te,{startChar:e.iChar,endChar:e.iChar+Y.length});break;case"midi":var Te=t.tokenize(le,0,le.length,!0);Te.length>0&&Te[0].token==="="&&Te.shift(),Te.length===0?n("Expected midi command",le,0):Z(Te,i,le);break;case"percmap":var Qe=w(le);Qe.error?n(Qe.error,Y,8):(i.formatting.percmap||(i.formatting.percmap={}),i.formatting.percmap[Qe.key]=Qe.value);break;case"map":case"playtempo":case"auquality":case"continuous":case"nobarcheck":i.formatting[X]=le;break;default:return"Unknown directive: "+X}return null},dd.globalFormatting=function(Y){for(var G in Y)if(Y.hasOwnProperty(G)){var le=""+Y[G],X=t.tokenize(le,0,le.length),Ue;switch(G){case"titlefont":case"gchordfont":case"composerfont":case"footerfont":case"headerfont":case"historyfont":case"infofont":case"measurefont":case"partsfont":case"repeatfont":case"subtitlefont":case"tempofont":case"textfont":case"voicefont":case"tripletfont":case"vocalfont":case"wordsfont":case"annotationfont":case"tablabelfont":case"tabnumberfont":case"tabgracefont":u(G,X,le);break;case"scale":_(G,X);break;case"partsbox":Ue=z("partsBox",G,X),Ue!==null&&n(Ue),e.partsfont.box=e.partsBox;break;case"freegchord":Ue=z("freegchord",G,X),Ue!==null&&n(Ue);break;case"fontboxpadding":(X.length!==1||X[0].type!=="number")&&n('Directive "'+G+'" requires a number as a parameter.'),i.formatting.fontboxpadding=X[0].floatt;break;case"stretchlast":var Ze=Ee(X);if(Ze.value!==void 0&&(i.formatting.stretchlast=Ze.value),Ze.error)return Ze.error;break;default:n("Formatting directive unrecognized: ",G,0)}}};function Ee(Y){if(Y.length===0)return{value:1};if(Y.length===1)if(Y[0].type==="number"){if(Y[0].floatt>=0||Y[0].floatt<=1)return{value:Y[0].floatt}}else{if(Y[0].token==="false")return{value:0};if(Y[0].token==="true")return{value:1}}return{error:"Directive stretchlast requires zero or one parameter: false, true, or number between 0 and 1 (received "+Y[0].token+")"}}})();x5.exports=dd});var M5=et((mxe,w5)=>{var wx={},C5=["C,,,","D,,,","E,,,","F,,,","G,,,","A,,,","B,,,","C,,","D,,","E,,","F,,","G,,","A,,","B,,","C,","D,","E,","F,","G,","A,","B,","C","D","E","F","G","A","B","c","d","e","f","g","a","b","c'","d'","e'","f'","g'","a'","b'","c''","d''","e''","f''","g''","a''","b''","c'''","d'''","e'''","f'''","g'''","a'''","b'''"];wx.pitchIndex=function(t){return C5.indexOf(t)};wx.noteName=function(t){return C5[t]};w5.exports=wx});var Mx=et((gxe,S5)=>{var e_=["C","C\u266F","D","D\u266F","E","F","F\u266F","G","G\u266F","A","A\u266F","B"],t_=["C","D\u266D","D","E\u266D","E","F","G\u266D","G","A\u266D","A","B\u266D","B"],n_=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],i_=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];function JW(t,n,e,i){if(!n||n%12===0)return t;for(;n<0;)n+=12;n>11&&(n=n%12);var r=t.match(/^([A-G][b#♭♯]?)([^\/]+)?\/?([A-G][b#♭♯]?)?(.+)?/);if(!r)return t;var s=r[1],a=r[2],l=r[3],d=r[4],u=e_.indexOf(s);if(u<0&&(u=t_.indexOf(s)),u<0&&(u=n_.indexOf(s)),u<0&&(u=i_.indexOf(s)),u<0)return t;if(u+=n,u=u%12,e?i?t=i_[u]:t=t_[u]:i?t=n_[u]:t=e_[u],a&&(t+=a),l){var u=e_.indexOf(l);u<0&&(u=t_.indexOf(l)),u<0&&(u=n_.indexOf(l)),u<0&&(u=i_.indexOf(l)),t+="/",u>=0?(u+=n,u=u%12,e?i?t+=i_[u]:t+=t_[u]:i?t+=n_[u]:t+=e_[u]):t+=l}return d&&(t+=d),t}S5.exports=JW});var Sx=et((_xe,P5)=>{var hd={C:{modes:["CMaj","Amin","Am","GMix","DDor","EPhr","FLyd","BLoc"],stepsFromC:0},Db:{modes:["DbMaj","Bbmin","Bbm","AbMix","EbDor","FPhr","GbLyd","CLoc"],stepsFromC:1},D:{modes:["DMaj","Bmin","Bm","AMix","EDor","F#Phr","GLyd","C#Loc"],stepsFromC:2},Eb:{modes:["EbMaj","Cmin","Cm","BbMix","FDor","GPhr","AbLyd","DLoc"],stepsFromC:3},E:{modes:["EMaj","C#min","C#m","BMix","F#Dor","G#Phr","ALyd","D#Loc"],stepsFromC:4},F:{modes:["FMaj","Dmin","Dm","CMix","GDor","APhr","BbLyd","ELoc"],stepsFromC:5},Gb:{modes:["GbMaj","Ebmin","Ebm","DbMix","AbDor","BbPhr","CbLyd","FLoc"],stepsFromC:6},G:{modes:["GMaj","Emin","Em","DMix","ADor","BPhr","CLyd","F#Loc"],stepsFromC:7},Ab:{modes:["AbMaj","Fmin","Fm","EbMix","BbDor","CPhr","DbLyd","GLoc"],stepsFromC:8},A:{modes:["AMaj","F#min","F#m","EMix","BDor","C#Phr","DLyd","G#Loc"],stepsFromC:9},Bb:{modes:["BbMaj","Gmin","Gm","FMix","CDor","DPhr","EbLyd","ALoc"],stepsFromC:10},B:{modes:["BMaj","G#min","G#m","F#Mix","C#Dor","D#Phr","ELyd","A#Loc"],stepsFromC:11},"C#":{modes:["C#Maj","A#min","A#m","G#Mix","D#Dor","E#Phr","F#Lyd","B#Loc"],stepsFromC:1},"F#":{modes:["F#Maj","D#min","D#m","C#Mix","G#Dor","A#Phr","BLyd","E#Loc"],stepsFromC:6},Cb:{modes:["CbMaj","Abmin","Abm","GbMix","DbDor","EbPhr","FbLyd","BbLoc"],stepsFromC:11}},op=null;function QW(){op={};for(var t=Object.keys(hd),n=0;n<t.length;n++){var e=hd[t[n]];op[t[n].toLowerCase()]=t[n];for(var i=0;i<e.modes.length;i++){var r=e.modes[i].toLowerCase();op[r]=t[n]}}}function $W(t){op||QW();var n=t.toLowerCase().match(/([a-g][b#]?)(maj|min|mix|dor|phr|lyd|loc|m)?/);if(!n||!n[2])return t;n=n[1]+n[2];var e=op[n];return e||t}function KW(t,n){var e=hd[t];if(!e||n==="")return t;var i=n.toLowerCase().match(/^(maj|min|mix|dor|phr|lyd|loc|m)/);if(!i)return t;for(var r=i[1],s=0;s<e.modes.length;s++){var a=e.modes[s],l=a.toLowerCase().indexOf(r);if(l!==-1&&l===a.length-r.length)return a.substring(0,a.length-r.length)}return t}function ZW(t,n){var e=hd[t];if(!e)return t;for(;n<0;)n+=12;for(var i=(e.stepsFromC+n)%12,r=0;r<Object.keys(hd).length;r++){var s=Object.keys(hd)[r];if(hd[s].stepsFromC===i)return s}return t}P5.exports={relativeMajor:$W,relativeMode:KW,transposeKey:ZW}});var Ex=et((yxe,T5)=>{var{relativeMajor:ez}=Sx(),ud={acc:"sharp",note:"f"},jh={acc:"sharp",note:"c"},sp={acc:"sharp",note:"g"},r_={acc:"sharp",note:"d"},Px={acc:"sharp",note:"A"},k5={acc:"sharp",note:"e"},tz={acc:"sharp",note:"B"},Is={acc:"flat",note:"B"},Ra={acc:"flat",note:"e"},ac={acc:"flat",note:"A"},lp={acc:"flat",note:"d"},kx={acc:"flat",note:"G"},E5={acc:"flat",note:"c"},nz={acc:"flat",note:"F"},iz={"C#":[ud,jh,sp,r_,Px,k5,tz],"F#":[ud,jh,sp,r_,Px,k5],B:[ud,jh,sp,r_,Px],E:[ud,jh,sp,r_],A:[ud,jh,sp],D:[ud,jh],G:[ud],C:[],F:[Is],Bb:[Is,Ra],Eb:[Is,Ra,ac],Cm:[Is,Ra,ac],Ab:[Is,Ra,ac,lp],Db:[Is,Ra,ac,lp,kx],Gb:[Is,Ra,ac,lp,kx,E5],Cb:[Is,Ra,ac,lp,kx,E5,nz],"A#":[Is,Ra],"B#":[],"D#":[Is,Ra,ac],"E#":[Is],"G#":[Is,Ra,ac,lp],none:[]};function rz(t){var n=iz[ez(t)];return n?JSON.parse(JSON.stringify(n)):null}T5.exports=rz});var Dx=et((vxe,I5)=>{var A5=M5(),oz=Mx(),Tx=Ex(),o_={},sz={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},az=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],lz=["C","C#","D","D#","E","F","F#","G","G#","A","Bb","B"];o_.keySignature=function(t,n,e,i,r){if(t.clef.type==="perc"||t.clef.type==="none")return{accidentals:Tx(n),root:e,acc:i};r||(r=0),t.localTransposeVerticalMovement=0,t.localTransposePreferFlats=!1;var s=Tx(n);if(!s)return t.key;if(t.localTranspose=(t.globalTranspose?t.globalTranspose:0)+r,!t.localTranspose)return{accidentals:s,root:e,acc:i};if(t.globalTransposeOrigKeySig=s,t.localTranspose%12===0)return t.localTransposeVerticalMovement=t.localTranspose/12*7,{accidentals:s,root:e,acc:i};var a=n[0];n[1]==="b"||n[1]==="#"?(a+=n[1],n=n.substr(2)):n=n.substr(1);for(var l=sz[a]+t.localTranspose;l<0;)l+=12;l>11&&(l=l%12);var d=n[0]==="m"?lz[l]:az[l],u=d+n,h=Tx(u);h.length>0&&h[0].acc==="flat"&&(t.localTransposePreferFlats=!0);var _=u.charCodeAt(0)-a.charCodeAt(0);return t.localTranspose>0?(_<0||_===0&&(a[1]==="#"||u[1]==="b"))&&(_+=7):t.localTranspose<0&&(_>0||_===0&&(a[1]==="b"||u[1]==="#"))&&(_-=7),t.localTranspose>0?t.localTransposeVerticalMovement=_+Math.floor(t.localTranspose/12)*7:t.localTransposeVerticalMovement=_+Math.ceil(t.localTranspose/12)*7,{accidentals:h,root:d[0],acc:d.length>1?d[1]:""}};o_.chordName=function(t,n){return oz(n,t.localTranspose,t.localTransposePreferFlats,t.freegchord)};var D5=["c","d","e","f","g","a","b"];function cz(t,n,e,i,r){for(var s=D5[(t+49)%7],a=0,l=0;l<i.length;l++)i[l].note.toLowerCase()===s&&(a=Ax[i[l].acc]);for(var d=Ax[e],u=d-a,h=D5[(n+49)%7],_=0,b=0;b<r.accidentals.length;b++)r.accidentals[b].note.toLowerCase()===h&&(_=Ax[r.accidentals[b].acc]);var w=u+_;return w<-2&&(n--,w+=h==="c"||h==="f"?1:2),w>2&&(n++,w-=h==="b"||h==="e"?1:2),[n,w]}var Ax={dblflat:-2,flat:-1,natural:0,sharp:1,dblsharp:2},dz={"-2":"dblflat","-1":"flat",0:"natural",1:"sharp",2:"dblsharp"},hz={"-2":"__","-1":"_",0:"=",1:"^",2:"^^"};o_.note=function(t,n){if(!(!t.localTranspose||t.clef.type==="perc")){var e=n.pitch;if(t.localTransposeVerticalMovement&&(n.pitch=n.pitch+t.localTransposeVerticalMovement,n.name)){var i=n.accidental?n.name.substring(1):n.name,r=n.accidental?n.name[0]:"",s=A5.pitchIndex(i);n.name=r+A5.noteName(s+t.localTransposeVerticalMovement)}if(n.accidental){var a=cz(e,n.pitch,n.accidental,t.globalTransposeOrigKeySig,t.targetKey);n.pitch=a[0],n.accidental=dz[a[1]],n.name&&(n.name=hz[a[1]]+n.name.replace(/[_^=]/g,""))}}};I5.exports=o_});var s_=et((bxe,F5)=>{var ca=oo(),O5=Zg(),uz=Dx(),Qo={};(function(){var t,n,e,i,r;Qo.initialize=function(_,b,w,S,L){t=_,n=b,e=w,i=S,r=L},Qo.standardKey=function(_,b,w,S){return uz.keySignature(e,_,b,w,S)};var s={treble:{clef:"treble",pitch:4,mid:0},"treble+8":{clef:"treble+8",pitch:4,mid:0},"treble-8":{clef:"treble-8",pitch:4,mid:0},"treble^8":{clef:"treble+8",pitch:4,mid:0},treble_8:{clef:"treble-8",pitch:4,mid:0},treble1:{clef:"treble",pitch:2,mid:2},treble2:{clef:"treble",pitch:4,mid:0},treble3:{clef:"treble",pitch:6,mid:-2},treble4:{clef:"treble",pitch:8,mid:-4},treble5:{clef:"treble",pitch:10,mid:-6},perc:{clef:"perc",pitch:6,mid:0},none:{clef:"none",mid:0},bass:{clef:"bass",pitch:8,mid:-12},"bass+8":{clef:"bass+8",pitch:8,mid:-12},"bass-8":{clef:"bass-8",pitch:8,mid:-12},"bass^8":{clef:"bass+8",pitch:8,mid:-12},bass_8:{clef:"bass-8",pitch:8,mid:-12},"bass+16":{clef:"bass",pitch:8,mid:-12},"bass-16":{clef:"bass",pitch:8,mid:-12},"bass^16":{clef:"bass",pitch:8,mid:-12},bass_16:{clef:"bass",pitch:8,mid:-12},bass1:{clef:"bass",pitch:2,mid:-6},bass2:{clef:"bass",pitch:4,mid:-8},bass3:{clef:"bass",pitch:6,mid:-10},bass4:{clef:"bass",pitch:8,mid:-12},bass5:{clef:"bass",pitch:10,mid:-14},tenor:{clef:"alto",pitch:8,mid:-8},tenor1:{clef:"alto",pitch:2,mid:-2},tenor2:{clef:"alto",pitch:4,mid:-4},tenor3:{clef:"alto",pitch:6,mid:-6},tenor4:{clef:"alto",pitch:8,mid:-8},tenor5:{clef:"alto",pitch:10,mid:-10},alto:{clef:"alto",pitch:6,mid:-6},alto1:{clef:"alto",pitch:2,mid:-2},alto2:{clef:"alto",pitch:4,mid:-4},alto3:{clef:"alto",pitch:6,mid:-6},alto4:{clef:"alto",pitch:8,mid:-8},alto5:{clef:"alto",pitch:10,mid:-10},"alto+8":{clef:"alto+8",pitch:6,mid:-6},"alto-8":{clef:"alto-8",pitch:6,mid:-6},"alto^8":{clef:"alto+8",pitch:6,mid:-6},alto_8:{clef:"alto-8",pitch:6,mid:-6}},a=function(_,b){var w=s[_],S=w?w.mid:0;return S+b};Qo.fixClef=function(_){var b=s[_.type];b&&(_.clefPos=b.pitch,_.type=b.clef)},Qo.deepCopyKey=function(_){var b={accidentals:[],root:_.root,acc:_.acc,mode:_.mode};return ca.each(_.accidentals,function(w){b.accidentals.push(ca.clone(w))}),b};var l={A:5,B:6,C:0,D:1,E:2,F:3,G:4,a:12,b:13,c:7,d:8,e:9,f:10,g:11};Qo.addPosToKey=function(_,b){var w=_.verticalPos;ca.each(b.accidentals,function(S){var L=l[S.note];L=L-w,S.verticalPos=L}),b.impliedNaturals&&ca.each(b.impliedNaturals,function(S){var L=l[S.note];L=L-w,S.verticalPos=L}),w<-10?(ca.each(b.accidentals,function(S){S.verticalPos-=7,(S.verticalPos>=11||S.verticalPos===10&&S.acc==="flat")&&(S.verticalPos-=7),S.note==="A"&&S.acc==="sharp"&&(S.verticalPos-=7),(S.note==="G"||S.note==="F")&&S.acc==="flat"&&(S.verticalPos-=7)}),b.impliedNaturals&&ca.each(b.impliedNaturals,function(S){S.verticalPos-=7,(S.verticalPos>=11||S.verticalPos===10&&S.acc==="flat")&&(S.verticalPos-=7),S.note==="A"&&S.acc==="sharp"&&(S.verticalPos-=7),(S.note==="G"||S.note==="F")&&S.acc==="flat"&&(S.verticalPos-=7)})):w<-4?(ca.each(b.accidentals,function(S){S.verticalPos-=7,w===-8&&(S.note==="f"||S.note==="g")&&S.acc==="sharp"&&(S.verticalPos-=7)}),b.impliedNaturals&&ca.each(b.impliedNaturals,function(S){S.verticalPos-=7,w===-8&&(S.note==="f"||S.note==="g")&&S.acc==="sharp"&&(S.verticalPos-=7)})):w>=7&&(ca.each(b.accidentals,function(S){S.verticalPos+=7}),b.impliedNaturals&&ca.each(b.impliedNaturals,function(S){S.verticalPos+=7}))},Qo.fixKey=function(_,b){var w=ca.clone(b);return Qo.addPosToKey(_,w),w};var d=function(_){var b=0,w=_.charAt(b++);(w==="^"||w==="_")&&(w=_.charAt(b++));var S=l[w];for(S===void 0&&(S=6);b<_.length;b++)if(_.charAt(b)===",")S-=7;else if(_.charAt(b)==="'")S+=7;else break;return{mid:S-6,str:_.substring(b)}},u=function(_){for(var b=0;b<_.length;b++)_[b].note==="b"?_[b].note="B":_[b].note==="a"?_[b].note="A":_[b].note==="F"?_[b].note="f":_[b].note==="E"?_[b].note="e":_[b].note==="D"?_[b].note="d":_[b].note==="C"?_[b].note="c":_[b].note==="G"&&_[b].acc==="sharp"?_[b].note="g":_[b].note==="g"&&_[b].acc==="flat"&&(_[b].note="G")};Qo.parseKey=function(_,b){_.length===0&&(_="none");var w=t.tokenize(_,0,_.length),S={};if(w.length===0)return n("Must pass in key signature.",_,0),S;switch(w[0].token){case"HP":O5.addDirective("bagpipes"),e.key={root:"HP",accidentals:[],acc:"",mode:""},S.foundKey=!0,w.shift();break;case"Hp":O5.addDirective("bagpipes"),e.key={root:"Hp",accidentals:[{acc:"natural",note:"g"},{acc:"sharp",note:"f"},{acc:"sharp",note:"c"}],acc:"",mode:""},S.foundKey=!0,w.shift();break;case"none":e.key={root:"none",accidentals:[],acc:"",mode:""},S.foundKey=!0,w.shift();break;default:var L=t.getKeyPitch(w[0].token);if(L.len>0){S.foundKey=!0;var R="",z="";w[0].token.length>1?w[0].token=w[0].token.substring(1):w.shift();var ne=L.token;if(w.length>0){var Q=t.getSharpFlat(w[0].token);if(Q.len>0&&(w[0].token.length>1?w[0].token=w[0].token.substring(1):w.shift(),ne+=Q.token,R=Q.token),w.length>0){var q=t.getMode(w[0].token);q.len>0&&(w.shift(),ne+=q.token,z=q.token)}if(Qo.standardKey(ne,L.token,R,0)===void 0)return n("Unsupported key signature: "+ne,_,0),S}var T=Qo.deepCopyKey(e.key),se=!b&&e.globalTranspose?-e.globalTranspose:0,_e;if(b&&(_e=e.globalTransposeOrigKeySig),e.key=Qo.deepCopyKey(Qo.standardKey(ne,L.token,R,se)),b&&(e.globalTransposeOrigKeySig=_e),e.key.mode=z,T){for(var Me,me=0;me<e.key.accidentals.length;me++)for(Me=0;Me<T.accidentals.length;Me++)T.accidentals[Me].note&&e.key.accidentals[me].note.toLowerCase()===T.accidentals[Me].note.toLowerCase()&&(T.accidentals[Me].note=null);for(Me=0;Me<T.accidentals.length;Me++)T.accidentals[Me].note&&(e.key.impliedNaturals||(e.key.impliedNaturals=[]),e.key.impliedNaturals.push({acc:"natural",note:T.accidentals[Me].note}))}}break}if(w.length===0||(w[0].token==="exp"&&w.shift(),w.length===0)||(w[0].token==="oct"&&w.shift(),w.length===0))return S;var K=t.getKeyAccidentals2(w);if(K.warn&&n(K.warn,_,0),K.accs){S.foundKey||(S.foundKey=!0,e.key={root:"none",acc:"",mode:"",accidentals:[]}),u(K.accs);for(var ue=0;ue<K.accs.length;ue++){for(var be=!1,Z=0;Z<e.key.accidentals.length&&!be;Z++)e.key.accidentals[Z].note===K.accs[ue].note&&(be=!0,e.key.accidentals[Z].acc!==K.accs[ue].acc&&(e.key.accidentals[Z].acc=K.accs[ue].acc,e.key.explicitAccidentals||(e.key.explicitAccidentals=[]),e.key.explicitAccidentals.push(K.accs[ue])));if(!be&&(e.key.explicitAccidentals||(e.key.explicitAccidentals=[]),e.key.explicitAccidentals.push(K.accs[ue]),e.key.accidentals.push(K.accs[ue]),e.key.impliedNaturals))for(var oe=0;oe<e.key.impliedNaturals.length;oe++)e.key.impliedNaturals[oe].note===K.accs[ue].note&&e.key.impliedNaturals.splice(oe,1)}}for(var Ee;w.length>0;)switch(w[0].token){case"m":case"middle":if(w.shift(),w.length===0)return n("Expected = after middle",_,0),S;if(Ee=w.shift(),Ee.token!=="="){n("Expected = after middle",_,Ee.start);break}if(w.length===0)return n("Expected parameter after middle=",_,0),S;var Y=t.getPitchFromTokens(w);Y.warn&&n(Y.warn,_,0),Y.position&&(e.clef.verticalPos=Y.position-6);break;case"transpose":if(w.shift(),w.length===0)return n("Expected = after transpose",_,0),S;if(Ee=w.shift(),Ee.token!=="="){n("Expected = after transpose",_,Ee.start);break}if(w.length===0)return n("Expected parameter after transpose=",_,0),S;if(w[0].type!=="number"){n("Expected number after transpose",_,w[0].start);break}e.clef.transpose=w[0].intt,w.shift();break;case"stafflines":if(w.shift(),w.length===0)return n("Expected = after stafflines",_,0),S;if(Ee=w.shift(),Ee.token!=="="){n("Expected = after stafflines",_,Ee.start);break}if(w.length===0)return n("Expected parameter after stafflines=",_,0),S;if(w[0].type!=="number"){n("Expected number after stafflines",_,w[0].start);break}e.clef.stafflines=w[0].intt,w.shift();break;case"staffscale":if(w.shift(),w.length===0)return n("Expected = after staffscale",_,0),S;if(Ee=w.shift(),Ee.token!=="="){n("Expected = after staffscale",_,Ee.start);break}if(w.length===0)return n("Expected parameter after staffscale=",_,0),S;if(w[0].type!=="number"){n("Expected number after staffscale",_,w[0].start);break}e.clef.staffscale=w[0].floatt,w.shift();break;case"style":if(w.shift(),w.length===0)return n("Expected = after style",_,0),S;if(Ee=w.shift(),Ee.token!=="="){n("Expected = after style",_,Ee.start);break}if(w.length===0)return n("Expected parameter after style=",_,0),S;switch(w[0].token){case"normal":case"harmonic":case"rhythm":case"x":case"triangle":e.style=w[0].token,w.shift();break;default:n("error parsing style element: "+w[0].token,_,w[0].start);break}break;case"clef":if(w.shift(),w.length===0)return n("Expected = after clef",_,0),S;if(Ee=w.shift(),Ee.token!=="="){n("Expected = after clef",_,Ee.start);break}if(w.length===0)return n("Expected parameter after clef=",_,0),S;case"treble":case"bass":case"alto":case"tenor":case"perc":case"none":var G=w.shift();switch(G.token){case"treble":case"tenor":case"alto":case"bass":case"perc":case"none":break;case"C":G.token="alto";break;case"F":G.token="bass";break;case"G":G.token="treble";break;case"c":G.token="alto";break;case"f":G.token="bass";break;case"g":G.token="treble";break;default:n("Expected clef name. Found "+G.token,_,G.start);break}w.length>0&&w[0].type==="number"&&(G.token+=w[0].token,w.shift()),w.length>1&&(w[0].token==="-"||w[0].token==="+"||w[0].token==="^"||w[0].token==="_")&&w[1].token==="8"&&(G.token+=w[0].token+w[1].token,w.shift(),w.shift()),e.clef={type:G.token,verticalPos:a(G.token,0)},e.currentVoice&&e.currentVoice.transpose!==void 0&&(e.clef.transpose=e.currentVoice.transpose),S.foundClef=!0;break;default:n("Unknown parameter: "+w[0].token,_,w[0].start),w.shift()}return S};var h=function(_){e.currentVoice=e.voices[_],r.setCurrentVoice(e.currentVoice.staffNum,e.currentVoice.index)};Qo.parseVoice=function(_,b,w){var S=t.getMeat(_,b,w),L=S.start,R=S.end,z=t.getToken(_,L,R);if(z.length===0){n("Expected a voice id",_,L);return}var ne=!1;e.voices[z]===void 0&&(e.voices[z]={},ne=!0,e.score_is_present&&n("Can't have an unknown V: id when the %score directive is present",_,L)),L+=z.length,L+=t.eatWhiteSpace(_,L);for(var Q={startStaff:ne},q=function(Y){var G=t.getVoiceToken(_,L,R);G.warn!==void 0?n("Expected value for "+Y+" in voice: "+G.warn,_,L):G.err!==void 0?n("Expected value for "+Y+" in voice: "+G.err,_,L):G.token.length===0&&_.charAt(L)!=='"'?n("Expected value for "+Y+" in voice",_,L):Q[Y]=G.token,L+=G.len},T=function(Y,G,le){var X=t.getVoiceToken(_,L,R);X.warn!==void 0?n("Expected value for "+G+" in voice: "+X.warn,_,L):X.err!==void 0?n("Expected value for "+G+" in voice: "+X.err,_,L):X.token.length===0&&_.charAt(L)!=='"'?n("Expected value for "+G+" in voice",_,L):(le==="number"&&(X.token=parseFloat(X.token)),e.voices[Y][G]=X.token),L+=X.len},se=function(Y,G){var le=t.getVoiceToken(_,L,R);if(le.warn!==void 0)n("Expected value for "+Y+" in voice: "+le.warn,_,L);else if(le.err!==void 0)n("Expected value for "+Y+" in voice: "+le.err,_,L);else if(le.token.length===0&&_.charAt(L)!=='"')n("Expected value for "+Y+" in voice",_,L);else return G==="number"&&(le.token=parseFloat(le.token)),le.token;L+=le.len},_e=function(Y,G){var le={_B:2,_E:9,_b:-10,_e:-3},X=t.getVoiceToken(_,L,R);if(X.warn!==void 0)n("Expected one of (_B, _E, _b, _e) for "+G+" in voice: "+X.warn,_,L);else if(X.token.length===0&&_.charAt(L)!=='"')n("Expected one of (_B, _E, _b, _e) for "+G+" in voice",_,L);else{var Ue=le[X.token];Ue?e.voices[Y][G]=Ue:n("Expected one of (_B, _E, _b, _e) for "+G+" in voice",_,L)}L+=X.len};L<R;){var Me=t.getVoiceToken(_,L,R);if(L+=Me.len,Me.warn)n("Error parsing voice: "+Me.warn,_,L);else{var me=null;switch(Me.token){case"clef":case"cl":q("clef");var K=0;Q.clef!==void 0&&(Q.clef=Q.clef.replace(/[',]/g,""),Q.clef.indexOf("+16")!==-1&&(K+=14,Q.clef=Q.clef.replace("+16","")),Q.verticalPos=a(Q.clef,K));break;case"treble":case"bass":case"tenor":case"alto":case"perc":case"none":case"treble'":case"bass'":case"tenor'":case"alto'":case"none'":case"treble''":case"bass''":case"tenor''":case"alto''":case"none''":case"treble,":case"bass,":case"tenor,":case"alto,":case"none,":case"treble,,":case"bass,,":case"tenor,,":case"alto,,":case"none,,":var ue=0;Q.clef=Me.token.replace(/[',]/g,""),Q.verticalPos=a(Q.clef,ue),e.voices[z].clef=Me.token;break;case"staves":case"stave":case"stv":q("staves");break;case"brace":case"brc":q("brace");break;case"bracket":case"brk":q("bracket");break;case"name":case"nm":q("name");break;case"subname":case"sname":case"snm":q("subname");break;case"merge":Q.startStaff=!1;break;case"stem":case"stems":me=t.getVoiceToken(_,L,R),me.warn!==void 0?n("Expected value for stems in voice: "+me.warn,_,L):me.err!==void 0?n("Expected value for stems in voice: "+me.err,_,L):me.token==="up"||me.token==="down"?e.voices[z].stem=me.token:n("Expected up or down for voice stem",_,L),L+=me.len;break;case"up":case"down":e.voices[z].stem=Me.token;break;case"middle":case"m":q("verticalPos"),Q.verticalPos=d(Q.verticalPos).mid;break;case"gchords":case"gch":e.voices[z].suppressChords=!0,me=t.getVoiceToken(_,L,R),me.token==="0"&&(L=L+me.len);break;case"space":case"spc":q("spacing");break;case"scale":T(z,"scale","number");break;case"score":_e(z,"scoreTranspose");break;case"transpose":T(z,"transpose","number");break;case"stafflines":T(z,"stafflines","number");break;case"staffscale":T(z,"staffscale","number");break;case"octave":T(z,"octave","number");break;case"volume":T(z,"volume","number");break;case"cue":var be=se("cue","string");be==="on"?e.voices[z].scale=.6:e.voices[z].scale=1;break;case"style":me=t.getVoiceToken(_,L,R),me.warn!==void 0?n("Expected value for style in voice: "+me.warn,_,L):me.err!==void 0?n("Expected value for style in voice: "+me.err,_,L):me.token==="normal"||me.token==="harmonic"||me.token==="rhythm"||me.token==="x"||me.token==="triangle"?e.voices[z].style=me.token:n("Expected one of [normal, harmonic, rhythm, x, triangle] for voice style",_,L),L+=me.len;break}}L+=t.eatWhiteSpace(_,L)}if((Q.startStaff||e.staves.length===0)&&(e.staves.push({index:e.staves.length,meter:e.origMeter}),e.score_is_present||(e.staves[e.staves.length-1].numVoices=0)),e.voices[z].staffNum===void 0){e.voices[z].staffNum=e.staves.length-1;var Z=0;for(var oe in e.voices)e.voices.hasOwnProperty(oe)&&e.voices[oe].staffNum===e.voices[z].staffNum&&Z++;e.voices[z].index=Z-1}var Ee=e.staves[e.voices[z].staffNum];e.score_is_present||Ee.numVoices++,Q.clef&&(Ee.clef={type:Q.clef,verticalPos:Q.verticalPos}),Q.spacing&&(Ee.spacing_below_offset=Q.spacing),Q.verticalPos&&(Ee.verticalPos=Q.verticalPos),Q.name&&(Ee.name?Ee.name.push(Q.name):Ee.name=[Q.name]),Q.subname&&(Ee.subname?Ee.subname.push(Q.subname):Ee.subname=[Q.subname]),h(z)}})();F5.exports=Qo});var L5=et((xxe,B5)=>{var cp=oo(),a_=Zg(),ja=s_(),pz=function(t,n,e,i,r){this.reset=function(l,d,u,h){ja.initialize(l,d,u,h,r),a_.initialize(l,d,u,h,r)},this.reset(t,n,e,i),this.setTitle=function(l){if(e.hasMainTitle)r.addSubtitle(t.translateString(t.stripComment(l)),{startChar:e.iChar,endChar:e.iChar+l.length+2});else{var d=t.translateString(t.theReverser(t.stripComment(l)));e.titlecaps&&(d=d.toUpperCase()),r.addMetaText("title",d,{startChar:e.iChar,endChar:e.iChar+l.length+2}),e.hasMainTitle=!0}},this.setMeter=function(l){if(l=t.stripComment(l),l==="C")return e.havent_set_length===!0&&(e.default_length=.125,e.havent_set_length=!1),{type:"common_time"};if(l==="C|")return e.havent_set_length===!0&&(e.default_length=.125,e.havent_set_length=!1),{type:"cut_time"};if(l==="o")return e.havent_set_length===!0&&(e.default_length=.125,e.havent_set_length=!1),{type:"tempus_perfectum"};if(l==="c")return e.havent_set_length===!0&&(e.default_length=.125,e.havent_set_length=!1),{type:"tempus_imperfectum"};if(l==="o.")return e.havent_set_length===!0&&(e.default_length=.125,e.havent_set_length=!1),{type:"tempus_perfectum_prolatio"};if(l==="c.")return e.havent_set_length===!0&&(e.default_length=.125,e.havent_set_length=!1),{type:"tempus_imperfectum_prolatio"};if(l.length===0||l.toLowerCase()==="none")return e.havent_set_length===!0&&(e.default_length=.125,e.havent_set_length=!1),null;var d=t.tokenize(l,0,l.length);try{var u=function(){var L={value:0,num:""},R=d.shift();for(R.token==="("&&(R=d.shift());;){if(R.type!=="number")throw"Expected top number of meter";if(L.value+=parseInt(R.token),L.num+=R.token,d.length===0||d[0].token==="/")return L;if(R=d.shift(),R.token===")"){if(d.length===0||d[0].token==="/")return L;throw"Unexpected paren in meter"}if(R.token!=="."&&R.token!=="+"||(L.num+=R.token,d.length===0))throw"Expected top number of meter";R=d.shift()}return L},h=function(){var L=u();if(d.length===0)return L;var R=d.shift();if(R.token!=="/")throw"Expected slash in meter";if(R=d.shift(),R.type!=="number")throw"Expected bottom number of meter";return L.den=R.token,L.value=L.value/parseInt(L.den),L};if(d.length===0)throw"Expected meter definition in M: line";for(var _={type:"specified",value:[]},b=0;;){var w=h();b+=w.value;var S={num:w.num};if(w.den!==void 0&&(S.den=w.den),_.value.push(S),d.length===0)break}return e.havent_set_length===!0&&(e.default_length=b<.75?.0625:.125,e.havent_set_length=!1),_}catch(L){n(L,l,0)}return null},this.calcTempo=function(l){var d=.25;e.meter&&e.meter.type==="specified"?d=1/parseInt(e.meter.value[0].den):e.origMeter&&e.origMeter.type==="specified"&&(d=1/parseInt(e.origMeter.value[0].den));for(var u=0;u<l.duration;u++)l.duration[u]=d*l.duration[u];return l},this.resolveTempo=function(){e.tempo&&(this.calcTempo(e.tempo),i.metaText.tempo=e.tempo,delete e.tempo)},this.addUserDefinition=function(l,d,u){var h=l.indexOf("=",d);if(h===-1){n("Need an = in a macro definition",l,d);return}var _=cp.strip(l.substring(d,h)),b=cp.strip(l.substring(h+1));if(_.length!==1){n("Macro definitions can only be one character",l,d);return}var w="HIJKLMNOPQRSTUVWXYhijklmnopqrstuvw~";if(w.indexOf(_)===-1){n("Macro definitions must be H-Y, h-w, or tilde",l,d);return}if(b.length===0){n("Missing macro definition",l,d);return}e.macros===void 0&&(e.macros={}),e.macros[_]=b},this.setDefaultLength=function(l,d,u){var h=cp.gsub(l.substring(d,u)," ",""),_=h.split("/");if(_.length===2){var b=parseInt(_[0]),w=parseInt(_[1]);w>0&&(e.default_length=b/w,e.havent_set_length=!1)}else _.length===1&&_[0]==="1"&&(e.default_length=1,e.havent_set_length=!1)};var s={larghissimo:20,adagissimo:24,sostenuto:28,grave:32,largo:40,lento:50,larghetto:60,adagio:68,adagietto:74,andante:80,andantino:88,"marcia moderato":84,"andante moderato":100,moderato:112,allegretto:116,"allegro moderato":120,allegro:126,animato:132,agitato:140,veloce:148,"mosso vivo":156,vivace:164,vivacissimo:172,allegrissimo:176,presto:184,prestissimo:210};this.setTempo=function(l,d,u,h){try{var _=t.tokenize(l,d,u);if(_.length===0)throw"Missing parameter in Q: field";var b={startChar:h+d-2,endChar:h+u},w=!0,S=_.shift();if(S.type==="quote"&&(b.preString=S.token,S=_.shift(),_.length===0))return s[b.preString.toLowerCase()]&&(b.bpm=s[b.preString.toLowerCase()],b.suppressBpm=!0),{type:"immediate",tempo:b};if(S.type==="alpha"&&S.token==="C"){if(_.length===0)throw"Missing tempo after C in Q: field";if(S=_.shift(),S.type==="punct"&&S.token==="="){if(_.length===0)throw"Missing tempo after = in Q: field";if(S=_.shift(),S.type!=="number")throw"Expected number after = in Q: field";b.duration=[1],b.bpm=parseInt(S.token)}else if(S.type==="number"){if(b.duration=[parseInt(S.token)],_.length===0)throw"Missing = after duration in Q: field";if(S=_.shift(),S.type!=="punct"||S.token!=="=")throw"Expected = after duration in Q: field";if(_.length===0)throw"Missing tempo after = in Q: field";if(S=_.shift(),S.type!=="number")throw"Expected number after = in Q: field";b.bpm=parseInt(S.token)}else throw"Expected number or equal after C in Q: field"}else if(S.type==="number"){var L=parseInt(S.token);if(_.length===0||_[0].type==="quote")b.duration=[1],b.bpm=L;else{if(w=!1,S=_.shift(),S.type!=="punct"&&S.token!=="/"||(S=_.shift(),S.type!=="number"))throw"Expected fraction in Q: field";var R=parseInt(S.token);for(b.duration=[L/R];_.length>0&&_[0].token!=="="&&_[0].type!=="quote";){if(S=_.shift(),S.type!=="number"||(L=parseInt(S.token),S=_.shift(),S.type!=="punct"&&S.token!=="/")||(S=_.shift(),S.type!=="number"))throw"Expected fraction in Q: field";R=parseInt(S.token),b.duration.push(L/R)}if(S=_.shift(),S.type!=="punct"&&S.token!=="=")throw"Expected = in Q: field";if(S=_.shift(),S.type!=="number")throw"Expected tempo in Q: field";b.bpm=parseInt(S.token)}}else throw"Unknown value in Q: field";if(_.length!==0&&(S=_.shift(),S.type==="quote"&&(b.postString=S.token,S=_.shift()),_.length!==0))throw"Unexpected string at end of Q: field";return e.printTempo===!1&&(b.suppress=!0),{type:w?"delaySet":"immediate",tempo:b}}catch(z){return n(z,l,d),{type:"none"}}},this.letter_to_inline_header=function(l,d,u){var h=t.eatWhiteSpace(l,d);if(d+=h,l.length>=d+5&&l.charAt(d)==="["&&l.charAt(d+2)===":"){var _=l.indexOf("]",d),b=e.iChar+d,w=e.iChar+_+1;switch(l.substring(d,d+3)){case"[I:":var S=a_.addDirective(l.substring(d+3,_));return S&&n(S,l,d),[_-d+1+h];case"[M:":var L=this.setMeter(l.substring(d+3,_));return r.hasBeginMusic()&&L?r.appendStartingElement("meter",b,w,L):e.meter=L,[_-d+1+h];case"[K:":var R=ja.parseKey(l.substring(d+3,_),!0);return R.foundClef&&r.hasBeginMusic()&&r.appendStartingElement("clef",b,w,e.clef),R.foundKey&&r.hasBeginMusic()&&r.appendStartingElement("key",b,w,ja.fixKey(e.clef,e.key)),[_-d+1+h];case"[P:":return u||i.lines.length<=i.lineNum?e.partForNextLine={title:l.substring(d+3,_),startChar:b,endChar:w}:r.appendElement("part",b,w,{title:l.substring(d+3,_)}),[_-d+1+h];case"[L:":return this.setDefaultLength(l,d+3,_),[_-d+1+h];case"[Q:":if(_>0){var z=this.setTempo(l,d+3,_,e.iChar);return z.type==="delaySet"?r.hasBeginMusic()?r.appendElement("tempo",b,w,this.calcTempo(z.tempo)):e.tempoForNextLine=["tempo",b,w,this.calcTempo(z.tempo)]:z.type==="immediate"&&(!u&&r.hasBeginMusic()?r.appendElement("tempo",b,w,z.tempo):e.tempoForNextLine=["tempo",b,w,z.tempo]),[_-d+1+h,l.charAt(d+1),l.substring(d+3,_)]}break;case"[V:":if(_>0)return ja.parseVoice(l,d+3,_),[_-d+1+h,l.charAt(d+1),l.substring(d+3,_)];break;default:}}return[0]},this.letter_to_body_header=function(l,d){if(l.length>=d+3)switch(l.substring(d,d+2)){case"I:":var u=a_.addDirective(l.substring(d+2));return u&&n(u,l,d),[l.length];case"M:":var h=this.setMeter(l.substring(d+2));return r.hasBeginMusic()&&h&&r.appendStartingElement("meter",e.iChar+d,e.iChar+l.length,h),[l.length];case"K:":var _=ja.parseKey(l.substring(d+2),r.hasBeginMusic());return _.foundClef&&r.hasBeginMusic()&&r.appendStartingElement("clef",e.iChar+d,e.iChar+l.length,e.clef),_.foundKey&&r.hasBeginMusic()&&r.appendStartingElement("key",e.iChar+d,e.iChar+l.length,ja.fixKey(e.clef,e.key)),[l.length];case"P:":return r.hasBeginMusic()&&r.appendElement("part",e.iChar+d,e.iChar+l.length,{title:l.substring(d+2)}),[l.length];case"L:":return this.setDefaultLength(l,d+2,l.length),[l.length];case"Q:":var b=l.indexOf("",d+2);b===-1&&(b=l.length);var w=this.setTempo(l,d+2,b,e.iChar);return w.type==="delaySet"?r.appendElement("tempo",e.iChar+d,e.iChar+l.length,this.calcTempo(w.tempo)):w.type==="immediate"&&r.appendElement("tempo",e.iChar+d,e.iChar+l.length,w.tempo),[b,l.charAt(d),cp.strip(l.substring(d+2))];case"V:":return ja.parseVoice(l,d+2,l.length),[l.length,l.charAt(d),cp.strip(l.substring(d+2))];default:}return[0]};var a={A:"author",B:"book",C:"composer",D:"discography",F:"url",G:"group",I:"instruction",N:"notes",O:"origin",R:"rhythm",S:"source",W:"unalignedWords",Z:"transcription"};this.parseHeader=function(l){var d=a[l.charAt(0)];if(d!==void 0)return d==="unalignedWords"?r.addMetaTextArray(d,a_.parseFontChangeLine(t.translateString(t.stripComment(l.substring(2)))),{startChar:e.iChar,endChar:e.iChar+l.length}):r.addMetaText(d,t.translateString(t.stripComment(l.substring(2))),{startChar:e.iChar,endChar:e.iChar+l.length}),{};var u=e.iChar,h=u+l.length;switch(l.charAt(0)){case"H":for(r.addMetaText("history",t.translateString(t.stripComment(l.substring(2))),{startChar:e.iChar,endChar:e.iChar+l.length}),l=t.peekLine();l&&l.charAt(1)!==":";)t.nextLine(),r.addMetaText("history",t.translateString(t.stripComment(l)),{startChar:e.iChar,endChar:e.iChar+l.length}),l=t.peekLine();break;case"K":this.resolveTempo();var _=ja.parseKey(l.substring(2),!1);!e.is_in_header&&r.hasBeginMusic()&&(_.foundClef&&r.appendStartingElement("clef",u,h,e.clef),_.foundKey&&r.appendStartingElement("key",u,h,ja.fixKey(e.clef,e.key))),e.is_in_header=!1;break;case"L":this.setDefaultLength(l,2,l.length);break;case"M":e.origMeter=e.meter=this.setMeter(l.substring(2));break;case"P":e.is_in_header?r.addMetaText("partOrder",t.translateString(t.stripComment(l.substring(2))),{startChar:e.iChar,endChar:e.iChar+l.length}):e.partForNextLine={title:t.translateString(t.stripComment(l.substring(2))),startChar:u,endChar:h};break;case"Q":var b=this.setTempo(l,2,l.length,e.iChar);b.type==="delaySet"?e.tempo=b.tempo:b.type==="immediate"&&(i.metaText.tempo?e.tempoForNextLine=["tempo",u,h,b.tempo]:i.metaText.tempo=b.tempo);break;case"T":this.setTitle(l.substring(2));break;case"U":this.addUserDefinition(l,2,l.length);break;case"V":if(ja.parseVoice(l,2,l.length),!e.is_in_header)return{newline:!0};break;case"s":return{symbols:!0};case"w":return{words:!0};case"X":break;case"E":case"m":n("Ignored header",l,0);break;default:return{regular:!0}}return{}}};B5.exports=pz});var X5=et((Cxe,Y5)=>{var $o=oo(),N5=s_(),q5=Dx(),gr,Rr,nt,da,Ga,hp,Ox=function(t,n,e,i,r,s){gr=t,Rr=n,nt=e,da=i,Ga=r,hp=s,this.lineContinuation=!1},fz="ABCDEFGabcdefgxyzZ[]|^_{",V5=function(t,n,e){if(t.inTie[n]===void 0)return!1;var i=t.currentVoice?t.currentVoice.index:0;return!!(t.inTie[n][i]&&(e.pitches!==void 0||e.rest.type!=="spacer"))},Bt={};Ox.prototype.parseMusic=function(t){hp.resolveTempo(),nt.is_in_header=!1;for(var n=0,e=nt.iChar;gr.isWhiteSpace(t.charAt(n))&&n<t.length;)n++;if(!(n===t.length||t.charAt(n)==="%")){var i=nt.start_new_line;nt.continueall===void 0?nt.start_new_line=!0:nt.start_new_line=!1;var r=0,s=hp.letter_to_body_header(t,n);s[0]>0&&(n+=s[0],s[1]==="V"&&this.startNewLine());for(var a=0;n<t.length;){var l=n;if(t.charAt(n)==="%")break;var d=hp.letter_to_inline_header(t,n,i);if(d[0]>0)n+=d[0],d[1]==="V"&&(i=!0);else{(!Ga.hasBeginMusic()||i&&!this.lineContinuation)&&(this.startNewLine(),i=!1);for(var u;;)if(u=gr.eatWhiteSpace(t,n),u>0&&(n+=u),n>0&&t.charAt(n-1)===""&&(u=hp.letter_to_body_header(t,n),u[0]>0&&(u[1]==="V"&&this.startNewLine(),n=u[0],nt.start_new_line=!1)),u=bz(t,n),u[0]>0&&(n+=u[0]),u=mz(t,n),u[0]>0){Bt.chord||(Bt.chord=[]);var h=gr.translateString(u[1]);h=h.replace(/;/g,`
`);for(var _=!1,b=0;b<Bt.chord.length;b++)Bt.chord[b].position===u[2]&&(_=!0,Bt.chord[b].name+=`
`+h);_===!1&&(u[2]===null&&u[3]?Bt.chord.push({name:h,rel_position:u[3]}):Bt.chord.push({name:h,position:u[2]})),n+=u[0];var w=gr.skipWhiteSpace(t.substring(n));w>0&&(Bt.force_end_beam_last=!0),n+=w}else if(fz.indexOf(t.charAt(n))===-1?u=z5(t,n):u=[0],u[0]>0)u[1]===null?n+1<t.length&&this.startNewLine():u[1].length>0&&(u[1].indexOf("style=")===0?Bt.style=u[1].substr(6):(Bt.decoration===void 0&&(Bt.decoration=[]),u[1]==="beambr1"?Bt.beambr=1:u[1]==="beambr2"?Bt.beambr=2:Bt.decoration.push(u[1]))),n+=u[0];else if(u=gz(t,n),u[0]>0)Bt.gracenotes=u[1],n+=u[0];else break;if(u=xz(t,n),u[0]>0){a=0,Bt.gracenotes!==void 0&&(Bt.rest={type:"spacer"},Bt.duration=.125,nt.addFormattingOptions(Bt,da.formatting,"note"),Ga.appendElement("note",e+n,e+n+u[0],Bt),nt.measureNotEmpty=!0,Bt={});var S={type:u[1]};if(S.type.length===0)Rr("Unknown bar type",t,n);else{if(nt.inEnding&&S.type!=="bar_thin"&&(S.endEnding=!0,nt.inEnding=!1),u[2]&&(S.startEnding=u[2],nt.inEnding&&(S.endEnding=!0),nt.inEnding=!0,u[1]==="bar_right_repeat"?nt.restoreStartEndingHoldOvers():nt.duplicateStartEndingHoldOvers()),Bt.decoration!==void 0&&(S.decoration=Bt.decoration),Bt.chord!==void 0&&(S.chord=Bt.chord),S.startEnding&&nt.barFirstEndingNum===void 0?nt.barFirstEndingNum=nt.currBarNumber:S.startEnding&&S.endEnding&&nt.barFirstEndingNum?nt.currBarNumber=nt.barFirstEndingNum:S.endEnding&&(nt.barFirstEndingNum=void 0),S.type!=="bar_invisible"&&nt.measureNotEmpty){var L=nt.currentVoice===void 0||nt.currentVoice.staffNum===0&&nt.currentVoice.index===0;L&&(nt.currBarNumber++,nt.barNumbers&&nt.currBarNumber%nt.barNumbers===0&&(S.barNumber=nt.currBarNumber))}nt.addFormattingOptions(Bt,da.formatting,"bar"),Ga.appendElement("bar",e+l,e+n+u[0],S),nt.measureNotEmpty=!1,Bt={}}n+=u[0]}else if(t[n]==="&")u=_z(t,n),u[0]>0&&(Ga.appendElement("overlay",e,e+1,{}),n+=1,a++);else{if(u=wz(t,n),u.consumed>0&&(u.startSlur!==void 0&&(Bt.startSlur=u.startSlur),u.dottedSlur&&(Bt.dottedSlur=!0),u.triplet!==void 0&&(r>0?Rr("Can't nest triplets",t,n):(Bt.startTriplet=u.triplet,Bt.tripletMultiplier=u.tripletQ/u.triplet,Bt.tripletR=u.num_notes,r=u.num_notes===void 0?u.triplet:u.num_notes)),n+=u.consumed),t.charAt(n)==="["){var R=n;n++;for(var z=null,ne=!1,Q=!1;!Q;){var q=z5(t,n);q[0]>0&&(n+=q[0]);var T=Ix(t,n,{},!1);if(T!==null&&T.pitch!==void 0)q[0]>0&&q[1].indexOf("style=")!==0&&(Bt.decoration===void 0&&(Bt.decoration=[]),Bt.decoration.push(q[1])),T.end_beam&&(Bt.end_beam=!0,delete T.end_beam),Bt.pitches===void 0?(Bt.duration=T.duration,Bt.pitches=[T]):Bt.pitches.push(T),delete T.duration,q[0]>0&&q[1].indexOf("style=")===0&&(Bt.pitches[Bt.pitches.length-1].style=q[1].substr(6)),nt.inTieChord[Bt.pitches.length]&&(T.endTie=!0,nt.inTieChord[Bt.pitches.length]=void 0),T.startTie&&(nt.inTieChord[Bt.pitches.length]=!0),n=T.endChar,delete T.endChar;else if(t.charAt(n)===" ")Rr("Spaces are not allowed in chords",t,n),n++;else{if(n<t.length&&t.charAt(n)==="]"){n++,nt.next_note_duration!==0&&(Bt.duration=Bt.duration*nt.next_note_duration,nt.next_note_duration=0),V5(nt,a,Bt)&&($o.each(Bt.pitches,function(be){be.endTie=!0}),dp(nt,a,!1)),r>0&&!(Bt.rest&&Bt.rest.type==="spacer")&&(r--,r===0&&(Bt.endTriplet=!0));for(var se=!1;n<t.length&&!se;){switch(t.charAt(n)){case" ":case"	":up(Bt);break;case")":Bt.endSlur===void 0?Bt.endSlur=1:Bt.endSlur++;break;case"-":$o.each(Bt.pitches,function(be){be.startTie={}}),dp(nt,a,!0);break;case">":case"<":var _e=H5(t,n);n+=_e[0]-1,nt.next_note_duration=_e[2],z?z=z*_e[1]:z=_e[1];break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"/":var Me=gr.getFraction(t,n);z=Me.value,n=Me.index,t.charAt(n)===" "&&(ne=!0),t.charAt(n)==="-"||t.charAt(n)===")"||t.charAt(n)===" "||t.charAt(n)==="<"||t.charAt(n)===">"?n--:se=!0;break;default:se=!0;break}se||n++}}else Rr("Expected ']' to end the chords",t,n);Bt.pitches!==void 0&&(z!==null&&(Bt.duration=Bt.duration*z,ne&&up(Bt)),nt.addFormattingOptions(Bt,da.formatting,"note"),Ga.appendElement("note",e+l,e+n,Bt),nt.measureNotEmpty=!0,Bt={}),Q=!0}}}else{var me={},K=Ix(t,n,me,!0);if(me.endTie!==void 0&&dp(nt,a,!0),K!==null){K.pitch!==void 0?(Bt.pitches=[{}],K.accidental!==void 0&&(Bt.pitches[0].accidental=K.accidental),Bt.pitches[0].pitch=K.pitch,Bt.pitches[0].name=K.name,(K.midipitch||K.midipitch===0)&&(Bt.pitches[0].midipitch=K.midipitch),K.endSlur!==void 0&&(Bt.pitches[0].endSlur=K.endSlur),K.endTie!==void 0&&(Bt.pitches[0].endTie=K.endTie),K.startSlur!==void 0&&(Bt.pitches[0].startSlur=K.startSlur),Bt.startSlur!==void 0&&(Bt.pitches[0].startSlur=Bt.startSlur),Bt.dottedSlur!==void 0&&(Bt.pitches[0].dottedSlur=!0),K.startTie!==void 0&&(Bt.pitches[0].startTie=K.startTie),Bt.startTie!==void 0&&(Bt.pitches[0].startTie=Bt.startTie)):(Bt.rest=K.rest,K.endSlur!==void 0&&(Bt.endSlur=K.endSlur),K.endTie!==void 0&&(Bt.rest.endTie=K.endTie),K.startSlur!==void 0&&(Bt.startSlur=K.startSlur),K.startTie!==void 0&&(Bt.rest.startTie=K.startTie),Bt.startTie!==void 0&&(Bt.rest.startTie=Bt.startTie)),K.chord!==void 0&&(Bt.chord=K.chord),K.duration!==void 0&&(Bt.duration=K.duration),K.decoration!==void 0&&(Bt.decoration=K.decoration),K.graceNotes!==void 0&&(Bt.graceNotes=K.graceNotes),delete Bt.startSlur,delete Bt.dottedSlur,V5(nt,a,Bt)&&(Bt.pitches!==void 0?Bt.pitches[0].endTie=!0:Bt.rest.type!=="spacer"&&(Bt.rest.endTie=!0),dp(nt,a,!1)),(K.startTie||Bt.startTie)&&dp(nt,a,!0),n=K.endChar,r>0&&!(K.rest&&K.rest.type==="spacer")&&(r--,r===0&&(Bt.endTriplet=!0)),K.end_beam&&up(Bt),Bt.rest&&Bt.rest.type==="rest"&&Bt.duration===1&&R5(nt)<=1&&(Bt.rest.type="whole",Bt.duration=R5(nt));var ue=[.5,.75,.875,.9375,.96875,.984375,.25,.375,.4375,.46875,.484375,.4921875,.125,.1875,.21875,.234375,.2421875,.24609375,.0625,.09375,.109375,.1171875,.12109375,.123046875,.03125,.046875,.0546875,.05859375,.060546875,.0615234375,.015625,.0234375,.02734375,.029296875,.0302734375,.03076171875];Bt.duration<1&&ue.indexOf(Bt.duration)===-1&&Bt.duration!==0&&(!Bt.rest||Bt.rest.type!=="spacer")&&Rr("Duration not representable: "+t.substring(l,n),t,n),nt.addFormattingOptions(Bt,da.formatting,"note"),Ga.appendElement("note",e+l,e+n,Bt),nt.measureNotEmpty=!0,Bt={}}}n===l&&(t.charAt(n)!==" "&&t.charAt(n)!=="`"&&Rr("Unknown character ignored",t,n),n++)}}}this.lineContinuation=t.indexOf("")>=0||s[0]>0,this.lineContinuation||(Bt={})}};var dp=function(t,n,e){var i=t.currentVoice?t.currentVoice.index:0;t.inTie[n]===void 0&&(t.inTie[n]=[]),t.inTie[n][i]=e},mz=function(t,n){if(t.charAt(n)==='"'){var e=gr.getBrackettedSubstring(t,n,5);if(e[2]||Rr("Missing the closing quote while parsing the chord symbol",t,n),e[0]>0&&e[1].length>0&&e[1].charAt(0)==="^")e[1]=e[1].substring(1),e[2]="above";else if(e[0]>0&&e[1].length>0&&e[1].charAt(0)==="_")e[1]=e[1].substring(1),e[2]="below";else if(e[0]>0&&e[1].length>0&&e[1].charAt(0)==="<")e[1]=e[1].substring(1),e[2]="left";else if(e[0]>0&&e[1].length>0&&e[1].charAt(0)===">")e[1]=e[1].substring(1),e[2]="right";else if(e[0]>0&&e[1].length>0&&e[1].charAt(0)==="@"){e[1]=e[1].substring(1);var i=gr.getFloat(e[1]);i.digits===0&&Rr("Missing first position in absolutely positioned annotation.",t,n),e[1]=e[1].substring(i.digits),e[1][0]!==","&&Rr("Missing comma absolutely positioned annotation.",t,n),e[1]=e[1].substring(1);var r=gr.getFloat(e[1]);r.digits===0&&Rr("Missing second position in absolutely positioned annotation.",t,n),e[1]=e[1].substring(r.digits);var s=gr.skipWhiteSpace(e[1]);e[1]=e[1].substring(s),e[2]=null,e[3]={x:i.value,y:r.value}}else nt.freegchord!==!0&&(e[1]=e[1].replace(/([ABCDEFG0-9])b/g,"$1\u266D"),e[1]=e[1].replace(/([ABCDEFG0-9])#/g,"$1\u266F"),e[1]=e[1].replace(/^([ABCDEFG])([♯♭]?)o([^A-Za-z])/g,"$1$2\xB0$3"),e[1]=e[1].replace(/^([ABCDEFG])([♯♭]?)o$/g,"$1$2\xB0"),e[1]=e[1].replace(/^([ABCDEFG])([♯♭]?)0([^A-Za-z])/g,"$1$2\xF8$3"),e[1]=e[1].replace(/^([ABCDEFG])([♯♭]?)\^([^A-Za-z])/g,"$1$2\u2206$3")),e[2]="default",e[1]=q5.chordName(nt,e[1]);return e}return[0,""]},gz=function(t,n){if(t.charAt(n)==="{"){var e=gr.getBrackettedSubstring(t,n,1,"}");e[2]||Rr("Missing the closing '}' while parsing grace note",t,n),t[n+e[0]]===")"&&(e[0]++,e[1]+=")");for(var i=[],r=0,s=!1;r<e[1].length;){var a=!1;e[1].charAt(r)==="/"&&(a=!0,r++);var l=Ix(e[1],r,{},!1);l!==null?(l.duration=l.duration/(nt.default_length*8),a&&(l.acciaccatura=!0),i.push(l),s&&(l.endTie=!0,s=!1),l.startTie&&(s=!0),r=l.endChar,delete l.endChar,l.end_beam&&(l.endBeam=!0,delete l.end_beam)):(e[1].charAt(r)===" "?i.length>0&&(i[i.length-1].endBeam=!0):Rr("Unknown character '"+e[1].charAt(r)+"' while parsing grace note",t,n),r++)}if(i.length)return[e[0],i]}return[0]};function _z(t,n){if(t.charAt(n)==="&"){for(var e=n;t.charAt(n)&&t.charAt(n)!==":"&&t.charAt(n)!=="|";)n++;return[n-e,t.substring(e+1,n)]}return[0]}function R5(t){var n=t.origMeter;return!n||n.type!=="specified"||!n.value||n.value.length===0?1:parseInt(n.value[0].num,10)/parseInt(n.value[0].den,10)}var j5=["trill","lowermordent","uppermordent","mordent","pralltriller","accent","fermata","invertedfermata","tenuto","0","1","2","3","4","5","+","wedge","open","thumb","snap","turn","roll","breath","shortphrase","mediumphrase","longphrase","segno","coda","D.S.","D.C.","fine","beambr1","beambr2","slide","marcato","upbow","downbow","/","//","///","////","trem1","trem2","trem3","trem4","turnx","invertedturn","invertedturnx","trill(","trill)","arpeggio","xstem","mark","umarcato","style=normal","style=harmonic","style=rhythm","style=x","style=triangle"],G5=["p","pp","f","ff","mf","mp","ppp","pppp","fff","ffff","sfz"],W5=["crescendo(","crescendo)","diminuendo(","diminuendo)","glissando(","glissando)"],yz=[["<","accent"],[">","accent"],["tr","trill"],["plus","+"],["emphasis","accent"],["^","umarcato"],["marcato","umarcato"]],vz=[["<(","crescendo("],["<)","crescendo)"],[">(","diminuendo("],[">)","diminuendo)"]],z5=function(t,n){var e=nt.macros[t.charAt(n)];if(e!==void 0)return(e.charAt(0)==="!"||e.charAt(0)==="+")&&(e=e.substring(1)),(e.charAt(e.length-1)==="!"||e.charAt(e.length-1)==="+")&&(e=e.substring(0,e.length-1)),$o.detect(j5,function(r){return e===r})?[1,e]:$o.detect(G5,function(r){return e===r})?(nt.volumePosition==="hidden"&&(e=""),[1,e]):$o.detect(W5,function(r){return nt.dynamicPosition==="hidden"&&(e=""),e===r})?[1,e]:($o.detect(nt.ignoredDecorations,function(r){return e===r})||Rr("Unknown macro: "+e,t,n),[1,""]);switch(t.charAt(n)){case".":if(t[n+1]==="("||t[n+1]==="-")break;return[1,"staccato"];case"u":return[1,"upbow"];case"v":return[1,"downbow"];case"~":return[1,"irishroll"];case"!":case"+":var i=gr.getBrackettedSubstring(t,n,5);return i[1].length>1&&(i[1].charAt(0)==="^"||i[1].charAt(0)==="_")&&(i[1]=i[1].substring(1)),$o.detect(j5,function(r){return i[1]===r})?i:$o.detect(G5,function(r){return i[1]===r})?(nt.volumePosition==="hidden"&&(i[1]=""),i):$o.detect(W5,function(r){return i[1]===r})?(nt.dynamicPosition==="hidden"&&(i[1]=""),i):$o.detect(yz,function(r){return i[1]===r[0]?(i[1]=r[1],!0):!1})?i:$o.detect(vz,function(r){return i[1]===r[0]?(i[1]=r[1],!0):!1})?(nt.dynamicPosition==="hidden"&&(i[1]=""),i):t.charAt(n)==="!"&&(i[0]===1||t.charAt(n+i[0]-1)!=="!")?[1,null]:(Rr("Unknown decoration: "+i[1],t,n),i[1]="",i);case"H":return[1,"fermata"];case"J":return[1,"slide"];case"L":return[1,"accent"];case"M":return[1,"mordent"];case"O":return[1,"coda"];case"P":return[1,"pralltriller"];case"R":return[1,"roll"];case"S":return[1,"segno"];case"T":return[1,"trill"]}return[0,0]},bz=function(t,n){for(var e=n;gr.isWhiteSpace(t.charAt(n));)n++;return[n-e]},xz=function(t,n){var e=gr.getBarLine(t,n);if(e.len===0)return[0,""];if(e.warn)return Rr(e.warn,t,n),[e.len,""];for(var i=0;i<t.length&&t.charAt(n+e.len+i)===" ";i++);var r=e.len;if(t.charAt(n+e.len+i)==="["&&(e.len+=i+1),t.charAt(n+e.len)==='"'&&t.charAt(n+e.len-1)==="["){var s=gr.getBrackettedSubstring(t,n+e.len,5);return[e.len+s[0],e.token,s[1]]}var a=gr.getTokenOf(t.substring(n+e.len),"1234567890-,");return a.len===0||a.token[0]==="-"?[r,e.token]:[e.len+a.len,e.token,a.token]},Cz={2:3,3:2,4:3,5:2,6:2,7:2,8:3,9:2},wz=function(t,n){var e={},i=n;for(t[n]==="."&&t[n+1]==="("&&(e.dottedSlur=!0,n++);t.charAt(n)==="("||gr.isWhiteSpace(t.charAt(n));)t.charAt(n)==="("&&(n+1<t.length&&t.charAt(n+1)>="2"&&t.charAt(n+1)<="9"?(e.triplet!==void 0?Rr("Can't nest triplets",t,n):(e.triplet=t.charAt(n+1)-"0",e.tripletQ=Cz[e.triplet],e.num_notes=e.triplet,n+2<t.length&&t.charAt(n+2)===":"&&(n+3<t.length&&t.charAt(n+3)===":"?n+4<t.length&&t.charAt(n+4)>="1"&&t.charAt(n+4)<="9"?(e.num_notes=t.charAt(n+4)-"0",n+=3):Rr("expected number after the two colons after the triplet to mark the duration",t,n):n+3<t.length&&t.charAt(n+3)>="1"&&t.charAt(n+3)<="9"?(e.tripletQ=t.charAt(n+3)-"0",n+4<t.length&&t.charAt(n+4)===":"?n+5<t.length&&t.charAt(n+5)>="1"&&t.charAt(n+5)<="9"&&(e.num_notes=t.charAt(n+5)-"0",n+=4):n+=2):Rr("expected number after the triplet to mark the duration",t,n))),n++):e.startSlur===void 0?e.startSlur=1:e.startSlur++),n++;return e.consumed=n-i,e};Ox.prototype.startNewLine=function(){var t={startChar:-1,endChar:-1};nt.partForNextLine.title&&(t.part=nt.partForNextLine),t.clef=nt.currentVoice&&nt.staves[nt.currentVoice.staffNum].clef!==void 0?$o.clone(nt.staves[nt.currentVoice.staffNum].clef):$o.clone(nt.clef);var n=nt.currentVoice?nt.currentVoice.scoreTranspose:0;if(t.key=N5.standardKey(nt.key.root+nt.key.acc+nt.key.mode,nt.key.root,nt.key.acc,n),t.key.mode=nt.key.mode,nt.key.impliedNaturals&&(t.key.impliedNaturals=nt.key.impliedNaturals),nt.key.explicitAccidentals)for(var e=0;e<nt.key.explicitAccidentals.length;e++){for(var i=!1,r=0;r<t.key.accidentals.length;r++)t.key.accidentals[r].note===nt.key.explicitAccidentals[e].note&&(t.key.accidentals[r].acc=nt.key.explicitAccidentals[e].acc,i=!0);i||t.key.accidentals.push(nt.key.explicitAccidentals[e])}if(nt.targetKey=t.key,t.key.explicitAccidentals&&delete t.key.explicitAccidentals,N5.addPosToKey(t.clef,t.key),nt.meter!==null?(nt.currentVoice?($o.each(nt.staves,function(l){l.meter=nt.meter}),t.meter=nt.staves[nt.currentVoice.staffNum].meter,nt.staves[nt.currentVoice.staffNum].meter=null):t.meter=nt.meter,nt.meter=null):nt.currentVoice&&nt.staves[nt.currentVoice.staffNum].meter&&(t.meter=nt.staves[nt.currentVoice.staffNum].meter,nt.staves[nt.currentVoice.staffNum].meter=null),nt.currentVoice&&nt.currentVoice.name&&(t.name=nt.currentVoice.name),nt.vocalfont&&(t.vocalfont=nt.vocalfont),nt.tripletfont&&(t.tripletfont=nt.tripletfont),nt.gchordfont&&(t.gchordfont=nt.gchordfont),nt.style&&(t.style=nt.style),nt.currentVoice){var s=nt.staves[nt.currentVoice.staffNum];s.brace&&(t.brace=s.brace),s.bracket&&(t.bracket=s.bracket),s.connectBarLines&&(t.connectBarLines=s.connectBarLines),s.name&&(t.name=s.name[nt.currentVoice.index]),s.subname&&(t.subname=s.subname[nt.currentVoice.index]),nt.currentVoice.stem&&(t.stem=nt.currentVoice.stem),nt.currentVoice.stafflines&&(t.stafflines=nt.currentVoice.stafflines),nt.currentVoice.staffscale&&(t.staffscale=nt.currentVoice.staffscale),nt.currentVoice.scale&&(t.scale=nt.currentVoice.scale),nt.currentVoice.style&&(t.style=nt.currentVoice.style),nt.currentVoice.transpose&&(t.clef.transpose=nt.currentVoice.transpose)}var a=nt.currentVoice===void 0||nt.currentVoice.staffNum===0&&nt.currentVoice.index===0;nt.barNumbers===0&&a&&nt.currBarNumber!==1&&(t.barNumber=nt.currBarNumber),Ga.startNewLine(t),nt.key.impliedNaturals&&delete nt.key.impliedNaturals,nt.partForNextLine={},nt.tempoForNextLine.length===4&&Ga.appendElement(nt.tempoForNextLine[0],nt.tempoForNextLine[1],nt.tempoForNextLine[2],nt.tempoForNextLine[3]),nt.tempoForNextLine=[]};var up=function(t){return t.duration!==void 0&&t.duration<.25&&(t.end_beam=!0),t},Mz={A:5,B:6,C:0,D:1,E:2,F:3,G:4,a:12,b:13,c:7,d:8,e:9,f:10,g:11},Sz={x:"invisible",X:"invisible-multimeasure",y:"spacer",z:"rest",Z:"multimeasure"},U5={dblflat:"__",flat:"_",natural:"=",sharp:"^",dblsharp:"^^",quarterflat:"_/",quartersharp:"^/"},Ix=function(t,n,e,i){var r=function(b){return b==="octave"||b==="duration"||b==="Zduration"||b==="broken_rhythm"||b==="end_slur"},s;t[n]==="."&&t[n+1]==="-"&&(s=!0,n++);for(var a="startSlur",l=!1;;){switch(t.charAt(n)){case"(":if(a==="startSlur")e.startSlur===void 0?e.startSlur=1:e.startSlur++;else return r(a)?(e.endChar=n,e):null;break;case")":if(r(a))e.endSlur===void 0?e.endSlur=1:e.endSlur++;else return null;break;case"^":if(a==="startSlur")e.accidental="sharp",a="sharp2";else if(a==="sharp2")e.accidental="dblsharp",a="pitch";else return r(a)?(e.endChar=n,e):null;break;case"_":if(a==="startSlur")e.accidental="flat",a="flat2";else if(a==="flat2")e.accidental="dblflat",a="pitch";else return r(a)?(e.endChar=n,e):null;break;case"=":if(a==="startSlur")e.accidental="natural",a="pitch";else return r(a)?(e.endChar=n,e):null;break;case"A":case"B":case"C":case"D":case"E":case"F":case"G":case"a":case"b":case"c":case"d":case"e":case"f":case"g":if(a==="startSlur"||a==="sharp2"||a==="flat2"||a==="pitch"){if(e.pitch=Mz[t.charAt(n)],e.name=t.charAt(n),e.accidental&&(e.name=U5[e.accidental]+e.name),q5.note(nt,e),a="octave",i&&nt.next_note_duration!==0?(e.duration=nt.default_length*nt.next_note_duration,nt.next_note_duration=0,l=!0):e.duration=nt.default_length,nt.clef&&nt.clef.type==="perc"||nt.currentVoice&&nt.currentVoice.clef==="perc"){var d=t.charAt(n);e.accidental&&(d=U5[e.accidental]+d),da.formatting&&da.formatting.midi&&da.formatting.midi.drummap&&(e.midipitch=da.formatting.midi.drummap[d])}}else return r(a)?(e.endChar=n,e):null;break;case",":if(a==="octave")e.pitch-=7,e.name+=",";else return r(a)?(e.endChar=n,e):null;break;case"'":if(a==="octave")e.pitch+=7,e.name+="'";else return r(a)?(e.endChar=n,e):null;break;case"x":case"X":case"y":case"z":case"Z":if(a==="startSlur")e.rest={type:Sz[t.charAt(n)]},delete e.accidental,delete e.startSlur,delete e.startTie,delete e.endSlur,delete e.endTie,delete e.end_beam,delete e.grace_notes,e.rest.type.indexOf("multimeasure")>=0?(e.duration=da.getBarLength(),e.rest.text=1,a="Zduration"):(i&&nt.next_note_duration!==0?(e.duration=nt.default_length*nt.next_note_duration,nt.next_note_duration=0,l=!0):e.duration=nt.default_length,a="duration");else return r(a)?(e.endChar=n,e):null;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":case"/":if(a==="octave"||a==="duration"){var u=gr.getFraction(t,n);for(e.duration=e.duration*u.value,e.endChar=u.index;u.index<t.length&&(gr.isWhiteSpace(t.charAt(u.index))||t.charAt(u.index)==="-");)t.charAt(u.index)==="-"?e.startTie={}:e=up(e),u.index++;n=u.index-1,a="broken_rhythm"}else if(a==="sharp2")e.accidental="quartersharp",a="pitch";else if(a==="flat2")e.accidental="quarterflat",a="pitch";else if(a==="Zduration"){var h=gr.getNumber(t,n);return e.duration=h.num*da.getBarLength(),e.rest.text=h.num,e.endChar=h.index,e}else return null;break;case"-":if(a==="startSlur")Ga.addTieToLastNote(s),e.endTie=!0;else if(a==="octave"||a==="duration"||a==="end_slur")if(e.startTie={},!l&&i)a="broken_rhythm";else return gr.isWhiteSpace(t.charAt(n+1))&&up(e),e.endChar=n+1,e;else return a==="broken_rhythm"?(e.endChar=n,e):null;break;case" ":case"	":if(r(a)){e.end_beam=!0,s=!1;do t.charAt(n)==="."&&t.charAt(n+1)==="-"&&(s=!0,n++),t.charAt(n)==="-"&&(e.startTie={},s&&(e.startTie.style="dotted")),n++;while(n<t.length&&(gr.isWhiteSpace(t.charAt(n))||t.charAt(n)==="-")||t.charAt(n)==="."&&t.charAt(n+1)==="-");if(e.endChar=n,!l&&i&&(t.charAt(n)==="<"||t.charAt(n)===">"))n--,a="broken_rhythm";else return e}else return null;break;case">":case"<":if(r(a))if(i){var _=H5(t,n);n+=_[0]-1,nt.next_note_duration=_[2],e.duration=_[1]*e.duration,a="end_slur"}else return e.endChar=n,e;else return null;break;default:return r(a)?(e.endChar=n,e):null}if(n++,n===t.length)return r(a)?(e.endChar=n,e):null}return null},H5=function(t,n){switch(t.charAt(n)){case">":return n<t.length-2&&t.charAt(n+1)===">"&&t.charAt(n+2)===">"?[3,1.875,.125]:n<t.length-1&&t.charAt(n+1)===">"?[2,1.75,.25]:[1,1.5,.5];case"<":return n<t.length-2&&t.charAt(n+1)==="<"&&t.charAt(n+2)==="<"?[3,.125,1.875]:n<t.length-1&&t.charAt(n+1)==="<"?[2,.25,1.75]:[1,.5,1.5]}return null};Y5.exports=Ox});var Q5=et((wxe,J5)=>{var jr=oo(),Fx=function(t,n){this.lineIndex=0,this.lines=t,this.multilineVars=n,this.skipWhiteSpace=function(u){for(var h=0;h<u.length;h++)if(!this.isWhiteSpace(u.charAt(h)))return h;return u.length};var e=function(u,h){return h>=u.length};this.eatWhiteSpace=function(u,h){for(var _=h;_<u.length;_++)if(!this.isWhiteSpace(u.charAt(_)))return _-h;return _-h},this.getKeyPitch=function(u){var h=this.skipWhiteSpace(u);if(e(u,h))return{len:0};switch(u.charAt(h)){case"A":return{len:h+1,token:"A"};case"B":return{len:h+1,token:"B"};case"C":return{len:h+1,token:"C"};case"D":return{len:h+1,token:"D"};case"E":return{len:h+1,token:"E"};case"F":return{len:h+1,token:"F"};case"G":return{len:h+1,token:"G"}}return{len:0}},this.getSharpFlat=function(u){if(u==="bass")return{len:0};switch(u.charAt(0)){case"#":return{len:1,token:"#"};case"b":return{len:1,token:"b"}}return{len:0}},this.getMode=function(u){var h=function(w,S){for(;S<w.length&&(w.charAt(S)>="a"&&w.charAt(S)<="z"||w.charAt(S)>="A"&&w.charAt(S)<="Z");)S++;return S},_=this.skipWhiteSpace(u);if(e(u,_))return{len:0};var b=u.substring(_,_+3).toLowerCase();switch((b.length>1&&b.charAt(1)===" "||b.charAt(1)==="^"||b.charAt(1)==="_"||b.charAt(1)==="=")&&(b=b.charAt(0)),b){case"mix":return{len:h(u,_),token:"Mix"};case"dor":return{len:h(u,_),token:"Dor"};case"phr":return{len:h(u,_),token:"Phr"};case"lyd":return{len:h(u,_),token:"Lyd"};case"loc":return{len:h(u,_),token:"Loc"};case"aeo":return{len:h(u,_),token:"m"};case"maj":return{len:h(u,_),token:""};case"ion":return{len:h(u,_),token:""};case"min":return{len:h(u,_),token:"m"};case"m":return{len:h(u,_),token:"m"}}return{len:0}},this.getClef=function(u,h){var _=u,b=this.skipWhiteSpace(u);if(e(u,b))return{len:0};var w=!1,S=u.substring(b);if(jr.startsWith(S,"clef=")&&(w=!0,S=S.substring(5),b+=5),S.length===0&&w)return{len:b+5,warn:"No clef specified: "+_};var L=this.skipWhiteSpace(S);if(e(S,L))return{len:0};L>0&&(b+=L,S=S.substring(L));var R=null;if(jr.startsWith(S,"treble"))R="treble";else if(jr.startsWith(S,"bass3"))R="bass3";else if(jr.startsWith(S,"bass"))R="bass";else if(jr.startsWith(S,"tenor"))R="tenor";else if(jr.startsWith(S,"alto2"))R="alto2";else if(jr.startsWith(S,"alto1"))R="alto1";else if(jr.startsWith(S,"alto"))R="alto";else if(!h&&w&&jr.startsWith(S,"none"))R="none";else if(jr.startsWith(S,"perc"))R="perc";else if(!h&&w&&jr.startsWith(S,"C"))R="tenor";else if(!h&&w&&jr.startsWith(S,"F"))R="bass";else if(!h&&w&&jr.startsWith(S,"G"))R="treble";else return{len:b+5,warn:"Unknown clef specified: "+_};return S=S.substring(R.length),L=this.isMatch(S,"+8"),L>0?R+="+8":(L=this.isMatch(S,"-8"),L>0&&(R+="-8")),{len:b+R.length,token:R,explicit:w}},this.getBarLine=function(u,h){switch(u.charAt(h)){case"]":switch(++h,u.charAt(h)){case"|":return{len:2,token:"bar_thick_thin"};case"[":return++h,u.charAt(h)>="1"&&u.charAt(h)<="9"||u.charAt(h)==='"'?{len:2,token:"bar_invisible"}:{len:1,warn:"Unknown bar symbol"};default:return{len:1,token:"bar_invisible"}}break;case":":switch(++h,u.charAt(h)){case":":return{len:2,token:"bar_dbl_repeat"};case"|":switch(++h,u.charAt(h)){case"]":switch(++h,u.charAt(h)){case"|":return++h,u.charAt(h)===":"?{len:5,token:"bar_dbl_repeat"}:{len:3,token:"bar_right_repeat"};default:return{len:3,token:"bar_right_repeat"}}break;case"|":return++h,u.charAt(h)===":"?{len:4,token:"bar_dbl_repeat"}:{len:3,token:"bar_right_repeat"};default:return{len:2,token:"bar_right_repeat"}}break;default:return{len:1,warn:"Unknown bar symbol"}}break;case"[":if(++h,u.charAt(h)==="|")switch(++h,u.charAt(h)){case":":return{len:3,token:"bar_left_repeat"};case"]":return{len:3,token:"bar_invisible"};default:return{len:2,token:"bar_thick_thin"}}else return u.charAt(h)>="1"&&u.charAt(h)<="9"||u.charAt(h)==='"'?{len:1,token:"bar_invisible"}:{len:0};break;case"|":switch(++h,u.charAt(h)){case"]":return{len:2,token:"bar_thin_thick"};case"|":return++h,u.charAt(h)===":"?{len:3,token:"bar_left_repeat"}:{len:2,token:"bar_thin_thin"};case":":for(var _=0;u.charAt(h+_)===":";)_++;return{len:1+_,token:"bar_left_repeat"};default:return{len:1,token:"bar_thin"}}break}return{len:0}},this.getTokenOf=function(u,h){for(var _=0;_<u.length;_++)if(h.indexOf(u.charAt(_))<0)return{len:_,token:u.substring(0,_)};return{len:_,token:u}},this.getToken=function(u,h,_){for(var b=h;b<_&&!this.isWhiteSpace(u.charAt(b));)b++;return u.substring(h,b)},this.isMatch=function(u,h){var _=this.skipWhiteSpace(u);return e(u,_)?0:jr.startsWith(u.substring(_),h)?_+h.length:0},this.getPitchFromTokens=function(u){var h={},_={A:5,B:6,C:0,D:1,E:2,F:3,G:4,a:12,b:13,c:7,d:8,e:9,f:10,g:11};if(h.position=_[u[0].token],h.position===void 0)return{warn:"Pitch expected. Found: "+u[0].token};for(u.shift();u.length;)switch(u[0].token){case",":h.position-=7,u.shift();break;case"'":h.position+=7,u.shift();break;default:return h}return h},this.getKeyAccidentals2=function(u){for(var h;u.length>0;){var _;if(u[0].token==="^"){if(_="sharp",u.shift(),u.length===0)return{accs:h,warn:"Expected note name after "+_};switch(u[0].token){case"^":_="dblsharp",u.shift();break;case"/":_="quartersharp",u.shift();break}}else if(u[0].token==="=")_="natural",u.shift();else if(u[0].token==="_"){if(_="flat",u.shift(),u.length===0)return{accs:h,warn:"Expected note name after "+_};switch(u[0].token){case"_":_="dblflat",u.shift();break;case"/":_="quarterflat",u.shift();break}}else return{accs:h};if(u.length===0)return{accs:h,warn:"Expected note name after "+_};switch(u[0].token.charAt(0)){case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"A":case"B":case"C":case"D":case"E":case"F":case"G":h===void 0&&(h=[]),h.push({acc:_,note:u[0].token.charAt(0)}),u[0].token.length===1?u.shift():u[0].token=u[0].token.substring(1);break;default:return{accs:h,warn:"Expected note name after "+_+" Found: "+u[0].token}}}return{accs:h}},this.getKeyAccidental=function(u){var h={"^":"sharp","^^":"dblsharp","=":"natural",_:"flat",__:"dblflat","_/":"quarterflat","^/":"quartersharp"},_=this.skipWhiteSpace(u);if(e(u,_))return{len:0};var b=null;switch(u.charAt(_)){case"^":case"_":case"=":b=u.charAt(_);break;default:return{len:0}}if(_++,e(u,_))return{len:1,warn:"Expected note name after accidental"};switch(u.charAt(_)){case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"A":case"B":case"C":case"D":case"E":case"F":case"G":return{len:_+1,token:{acc:h[b],note:u.charAt(_)}};case"^":case"_":case"/":if(b+=u.charAt(_),_++,e(u,_))return{len:2,warn:"Expected note name after accidental"};switch(u.charAt(_)){case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"A":case"B":case"C":case"D":case"E":case"F":case"G":return{len:_+1,token:{acc:h[b],note:u.charAt(_)}};default:return{len:2,warn:"Expected note name after accidental"}}break;default:return{len:1,warn:"Expected note name after accidental"}}},this.isWhiteSpace=function(u){return u===" "||u==="	"||u===""},this.getMeat=function(u,h,_){var b=u.indexOf("%",h);for(b>=0&&b<_&&(_=b);h<_&&(u.charAt(h)===" "||u.charAt(h)==="	"||u.charAt(h)==="");)h++;for(;h<_&&(u.charAt(_-1)===" "||u.charAt(_-1)==="	"||u.charAt(_-1)==="");)_--;return{start:h,end:_}};var i=function(u){return u>="A"&&u<="Z"||u>="a"&&u<="z"},r=function(u){return u>="0"&&u<="9"};this.tokenize=function(u,h,_,b){var w=this.getMeat(u,h,_);h=w.start,_=w.end;for(var S=[],L;h<_;){if(u.charAt(h)==='"'){for(L=h+1;L<_&&u.charAt(L)!=='"';)L++;S.push({type:"quote",token:u.substring(h+1,L),start:h+1,end:L}),L++}else if(i(u.charAt(h))){if(L=h+1,b)for(;L<_&&!this.isWhiteSpace(u.charAt(L));)L++;else for(;L<_&&i(u.charAt(L));)L++;S.push({type:"alpha",token:u.substring(h,L),continueId:r(u.charAt(L)),start:h,end:L}),h=L+1}else if(u.charAt(h)==="."&&r(u.charAt(L+1))){L=h+1;for(var R=null,z=null;L<_&&r(u.charAt(L));)L++;z=parseFloat(u.substring(h,L)),S.push({type:"number",token:u.substring(h,L),intt:R,floatt:z,continueId:i(u.charAt(L)),start:h,end:L}),h=L+1}else if(r(u.charAt(h))||u.charAt(h)==="-"&&r(u.charAt(L+1))){L=h+1;for(var ne=null,Q=null;L<_&&r(u.charAt(L));)L++;if(u.charAt(L)==="."&&r(u.charAt(L+1)))for(L++;L<_&&r(u.charAt(L));)L++;else ne=parseInt(u.substring(h,L));Q=parseFloat(u.substring(h,L)),S.push({type:"number",token:u.substring(h,L),intt:ne,floatt:Q,continueId:i(u.charAt(L)),start:h,end:L}),h=L+1}else u.charAt(h)===" "||u.charAt(h)==="	"||S.push({type:"punct",token:u.charAt(h),start:h,end:h+1}),L=h+1;h=L}return S},this.getVoiceToken=function(u,h,_){for(var b=h;b<_&&this.isWhiteSpace(u.charAt(b))||u.charAt(b)==="=";)b++;if(u.charAt(b)==='"'){var w=u.indexOf('"',b+1);return w===-1||w>=_?{len:1,err:"Missing close quote"}:{len:w-h+1,token:this.translateString(u.substring(b+1,w))}}else{for(var S=b;S<_&&!this.isWhiteSpace(u.charAt(S))&&u.charAt(S)!=="=";)S++;return{len:S-h+1,token:u.substring(b,S)}}};var s={"`a":"\xE0","'a":"\xE1","^a":"\xE2","~a":"\xE3",'"a':"\xE4",oa:"\xE5",aa:"\xE5","=a":"\u0101",ua:"\u0103",";a":"\u0105","`e":"\xE8","'e":"\xE9","^e":"\xEA",'"e':"\xEB","=e":"\u0113",ue:"\u0115",";e":"\u0119",".e":"\u0117","`i":"\xEC","'i":"\xED","^i":"\xEE",'"i':"\xEF","=i":"\u012B",ui:"\u012D",";i":"\u012F","`o":"\xF2","'o":"\xF3","^o":"\xF4","~o":"\xF5",'"o':"\xF6","=o":"\u014D",uo:"\u014F","/o":"\xF8","`u":"\xF9","'u":"\xFA","^u":"\xFB","~u":"\u0169",'"u':"\xFC",ou:"\u016F","=u":"\u016B",uu:"\u016D",";u":"\u0173","`A":"\xC0","'A":"\xC1","^A":"\xC2","~A":"\xC3",'"A':"\xC4",oA:"\xC5",AA:"\xC5","=A":"\u0100",uA:"\u0102",";A":"\u0104","`E":"\xC8","'E":"\xC9","^E":"\xCA",'"E':"\xCB","=E":"\u0112",uE:"\u0114",";E":"\u0118",".E":"\u0116","`I":"\xCC","'I":"\xCD","^I":"\xCE","~I":"\u0128",'"I':"\xCF","=I":"\u012A",uI:"\u012C",";I":"\u012E",".I":"\u0130","`O":"\xD2","'O":"\xD3","^O":"\xD4","~O":"\xD5",'"O':"\xD6","=O":"\u014C",uO:"\u014E","/O":"\xD8","`U":"\xD9","'U":"\xDA","^U":"\xDB","~U":"\u0168",'"U':"\xDC",oU:"\u016E","=U":"\u016A",uU:"\u016C",";U":"\u0172",ae:"\xE6",AE:"\xC6",oe:"\u0153",OE:"\u0152",ss:"\xDF","'c":"\u0107","^c":"\u0109",uc:"\u010D",cc:"\xE7",".c":"\u010B",cC:"\xC7","'C":"\u0106","^C":"\u0108",uC:"\u010C",".C":"\u010A","~N":"\xD1","~n":"\xF1","=s":"\u0161",vs:"\u0161",DH:"\xD0",dh:"\xF0",HO:"\u0150",Ho:"\u0151",HU:"\u0170",Hu:"\u0171","'Y":"\xDD","'y":"\xFD","^Y":"\u0176","^y":"\u0177",'"Y':"\u0178",'"y':"\xFF",vS:"\u0160",vZ:"\u017D",vz:"\u017E"},a={"#":"\u266F",b:"\u266D","=":"\u266E"},l={201:"\u266F",202:"\u266D",203:"\u266E",241:"\xA1",242:"\xA2",252:"a",262:"2",272:"o",302:"\xC2",312:"\xCA",322:"\xD2",332:"\xDA",342:"\xE2",352:"\xEA",362:"\xF2",372:"\xFA",243:"\xA3",253:"\xAB",263:"3",273:"\xBB",303:"\xC3",313:"\xCB",323:"\xD3",333:"\xDB",343:"\xE3",353:"\xEB",363:"\xF3",373:"\xFB",244:"\xA4",254:"\xAC",264:"  \u0301",274:"1\u20444",304:"\xC4",314:"\xCC",324:"\xD4",334:"\xDC",344:"\xE4",354:"\xEC",364:"\xF4",374:"\xFC",245:"\xA5",255:"-",265:"\u03BC",275:"1\u20442",305:"\xC5",315:"\xCD",325:"\xD5",335:"\xDD",345:"\xE5",355:"\xED",365:"\xF5",375:"\xFD",246:"\xA6",256:"\xAE",266:"\xB6",276:"3\u20444",306:"\xC6",316:"\xCE",326:"\xD6",336:"\xDE",346:"\xE6",356:"\xEE",366:"\xF6",376:"\xFE",247:"\xA7",257:" \u0304",267:"\xB7",277:"\xBF",307:"\xC7",317:"\xCF",327:"\xD7",337:"\xDF",347:"\xE7",357:"\xEF",367:"\xF7",377:"\xFF",250:" \u0308",260:"\xB0",270:" \u0327",300:"\xC0",310:"\xC8",320:"\xD0",330:"\xD8",340:"\xE0",350:"\xE8",360:"\xF0",370:"\xF8",251:"\xA9",261:"\xB1",271:"1",301:"\xC1",311:"\xC9",321:"\xD1",331:"\xD9",341:"\xE1",351:"\xE9",361:"\xF1",371:"\xF9"};this.translateString=function(u){var h=u.split("\\");if(h.length===1)return u;var _=null;return jr.each(h,function(b){if(_===null)_=b;else{var w=s[b.substring(0,2)];w!==void 0?_+=w+b.substring(2):(w=l[b.substring(0,3)],w!==void 0?_+=w+b.substring(3):(w=a[b.substring(0,1)],w!==void 0?_+=w+b.substring(1):_+="\\"+b))}}),_},this.getNumber=function(u,h){for(var _=0;h<u.length;)switch(u.charAt(h)){case"0":_=_*10,h++;break;case"1":_=_*10+1,h++;break;case"2":_=_*10+2,h++;break;case"3":_=_*10+3,h++;break;case"4":_=_*10+4,h++;break;case"5":_=_*10+5,h++;break;case"6":_=_*10+6,h++;break;case"7":_=_*10+7,h++;break;case"8":_=_*10+8,h++;break;case"9":_=_*10+9,h++;break;default:return{num:_,index:h}}return{num:_,index:h}},this.getFraction=function(u,h){var _=1,b=1;if(u.charAt(h)!=="/"){var w=this.getNumber(u,h);_=w.num,h=w.index}if(u.charAt(h)==="/")if(h++,u.charAt(h)==="/"){for(var S=.5;u.charAt(h++)==="/";)S=S/2;return{value:_*S,index:h-1}}else{var L=h,R=this.getNumber(u,h);R.num===0&&L===h&&(R.num=2),R.num!==0&&(b=R.num),h=R.index}return{value:_/b,index:h}},this.theReverser=function(u){return jr.endsWith(u,", The")?"The "+u.substring(0,u.length-5):jr.endsWith(u,", A")?"A "+u.substring(0,u.length-3):u},this.stripComment=function(u){var h=u.indexOf("%");return h>=0?jr.strip(u.substring(0,h)):jr.strip(u)},this.getInt=function(u){var h=parseInt(u);if(isNaN(h))return{digits:0};var _=""+h,b=u.indexOf(_);return{value:h,digits:b+_.length}},this.getFloat=function(u){var h=parseFloat(u);if(isNaN(h))return{digits:0};var _=""+h,b=u.indexOf(_);return{value:h,digits:b+_.length}},this.getMeasurement=function(u){if(u.length===0)return{used:0};var h=1,_="";if(u[0].token==="-")u.shift(),_="-",h++;else if(u[0].type!=="number")return{used:0};if(_+=u.shift().token,u.length===0)return{used:1,value:parseInt(_)};var b=u.shift();if(b.token==="."){if(h++,u.length===0)return{used:h,value:parseInt(_)};if(u[0].type==="number"&&(b=u.shift(),_=_+"."+b.token,h++,u.length===0))return{used:h,value:parseFloat(_)};b=u.shift()}switch(b.token){case"pt":return{used:h+1,value:parseFloat(_)};case"px":return{used:h+1,value:parseFloat(_)};case"cm":return{used:h+1,value:parseFloat(_)/2.54*72};case"in":return{used:h+1,value:parseFloat(_)*72};default:return u.unshift(b),{used:h,value:parseFloat(_)}}};var d=function(u){return u=u.replace(/\\n/g,`
`),u=u.replace(/\\"/g,'"'),u};this.getBrackettedSubstring=function(u,h,_,b){for(var w=b||u.charAt(h),S=h+1,L=!1;S<u.length&&(L||u[S]!==w);)L=u[S]==="\\",++S;return u.charAt(S)===w?[S-h+1,d(u.substring(h+1,S)),!0]:(S=h+_,S>u.length-1&&(S=u.length-1),[S-h+1,d(u.substring(h+1,S)),!1])}};Fx.prototype.peekLine=function(){return this.lines[this.lineIndex]};Fx.prototype.nextLine=function(){if(this.lineIndex>0&&(this.multilineVars.iChar+=this.lines[this.lineIndex-1].length+1),this.lineIndex<this.lines.length){var t=this.lines[this.lineIndex];return this.lineIndex++,t}return null};J5.exports=Fx});var Bx=et((Mxe,$5)=>{function Pz(t,n,e){if(!(!n||t.lines.length===0)){var i=t.deline({lineBreaks:!1}),r=Ez(i,n);t.lines=kz(i,r,e),t.lineBreaks=r}}function kz(t,n,e){for(var i=[],r=[],s=[],a=1,l=0;l<n.length;l++){var d=n[l];if(t[d.ogLine].staff){var u=t[d.ogLine].staff[d.staff];if(i[d.line]||(i[d.line]={staff:[]}),!i[d.line].staff[d.staff]){i[d.line].staff[d.staff]={voices:[]},e!==void 0&&d.staff===0&&d.line>0&&(i[d.line].staff[d.staff].barNumber=a);for(var h=Object.keys(u),_=0;_<h.length;_++){var b=h[_]==="voices";h[_]==="meter"&&d.line!==0&&(b=!0),b||(i[d.line].staff[d.staff][h[_]]=u[h[_]])}r[d.staff]&&(i[d.line].staff[d.staff].key=r[d.staff])}i[d.line].staff[d.staff].voices[d.voice]||(i[d.line].staff[d.staff].voices[d.voice]=[]),i[d.line].staff[d.staff].voices[d.voice]=t[d.ogLine].staff[d.staff].voices[d.voice].slice(d.start,d.end+1),s[d.staff*10+d.voice]&&i[d.line].staff[d.staff].voices[d.voice].unshift({el_type:"stem",direction:s[d.staff*10+d.voice].direction});for(var w=i[d.line].staff[d.staff].voices[d.voice],S=w.length-1;S>=0;S--)if(w[S].el_type==="key"){r[d.staff]={root:w[S].root,acc:w[S].acc,mode:w[S].mode,accidentals:w[S].accidentals.filter(function(R){return R.acc!=="natural"})};break}for(S=w.length-1;S>=0;S--)if(w[S].el_type==="stem"){s[d.staff*10+d.voice]={direction:w[S].direction};break}if(e!==void 0&&d.staff===0&&d.voice===0)for(S=0;S<w.length;S++)w[S].el_type==="bar"&&(a++,S===w.length-1?delete w[S].barNumber:w[S].barNumber=a)}else i[d.line]=t[d.ogLine]}for(var L=0;L<i.length;L++)i[L].staff&&(i[L].staff=i[L].staff.filter(function(R){return R!=null}));return i}function Ez(t,n){for(var e=[],i=0,r=0,s=0,a=0;a<t.length;a++){var l=t[a];if(l.staff){var d=r,u=n[i];i++;for(var h=0;h<l.staff.length;h++)for(var _=l.staff[h],b=0;b<_.voices.length;b++){s=d;for(var w=0,S=0,L=_.voices[b],R=0,z=0;z<L.length;z++){var ne=L[z];ne.el_type==="bar"&&(u[S]===w&&(e.push({ogLine:a,line:s,staff:h,voice:b,start:R,end:z}),R=z+1,s++,r=Math.max(r,s),S++),w++)}e.push({ogLine:a,line:s,staff:h,voice:b,start:R,end:L.length}),s++,r=Math.max(r,s)}}else e.push({ogLine:a,line:s}),s++,r=Math.max(r,s)}return e}function Tz(t,n){for(var e=[],i=[],r=0,s=0;s<t.length;s++){var a=t[s],l=r+a;if(l<n)r=l;else{var d=n-r,u=l-n;d<u&&r>0?(e.push(s-1),i.push(Math.round(r-a)),r=a):s<t.length-1&&(e.push(s),i.push(Math.round(r)),r=0)}}return i.push(Math.round(r)),{lineBreaks:e,totals:i}}function l_(t){for(var n=[],e=0;e<t.length;e++)n.push(t[e]);return n}function Az(t,n,e,i,r,s,a,l,d,u,h){for(var _=u;_<t.length;_++){var b=t[_];e+=b,i+=b;var w=Math.abs(e-n[l]),S=Math.abs(w-s)<n[0]/10;if(S)if(w<s){var L=l_(r),R=l_(d);R.push(_-1),L.push(i-b),h.push({accumulator:e,lineAccumulator:b,lineWidths:L,lastVariance:Math.abs(e-n[l+1]),highestVariance:Math.max(a,s),currLine:l+1,lineBreaks:R,startIndex:_+1})}else w>s&&_<t.length-1&&(L=l_(r),R=l_(d),h.push({accumulator:e,lineAccumulator:i,lineWidths:L,lastVariance:w,highestVariance:Math.max(a,w),currLine:l,lineBreaks:R,startIndex:_+1}));w>s?(d.push(_-1),l++,a=Math.max(a,s),s=Math.abs(e-n[l]),r.push(i-b),i=b):s=w}r.push(i)}function Dz(t,n,e,i){for(var r=Math.ceil(t.total/n),s=Math.floor(t.total/r),a=[],l=0;l<r;l++)a.push(s*(l+1));var d=[];d.push({accumulator:0,lineAccumulator:0,lineWidths:[],lastVariance:999999,highestVariance:0,currLine:0,lineBreaks:[],startIndex:0});for(var u=0;u<d.length;)Az(t.measureWidths,a,d[u].accumulator,d[u].lineAccumulator,d[u].lineWidths,d[u].lastVariance,d[u].highestVariance,d[u].currLine,d[u].lineBreaks,d[u].startIndex,d),u++;for(l=0;l<d.length;l++){var h=d[l];h.variances=[],h.aveVariance=0;for(var _=0;_<h.lineWidths.length;_++){var b=h.lineWidths[_];h.variances.push(b-a[0]),h.aveVariance+=Math.abs(b-a[0])}h.aveVariance=h.aveVariance/h.lineWidths.length,i.attempts.push({type:"optimizeLineWidths",lineBreaks:h.lineBreaks,variances:h.variances,aveVariance:h.aveVariance,widths:t.measureWidths})}var w=9999999,S=-1;for(l=0;l<d.length;l++)h=d[l],h.aveVariance<w&&(w=h.aveVariance,S=l);return{failed:!1,lineBreaks:d[S].lineBreaks,variance:d[S].highestVariance}}function Iz(t,n,e){for(var i=[],r=[],s=0,a=!1,l=0;l<t.length;l++)s+=t[l],s>n&&(a=!0),l%e===e-1&&(l!==t.length-1&&i.push(l),r.push(Math.round(s)),s=0);return{failed:a,totals:r,lineBreaks:i}}function Oz(t,n,e){var i={lineBreaks:t,staffwidth:n};for(var r in e)e.hasOwnProperty(r)&&r!=="wrap"&&r!=="staffwidth"&&(i[r]=e[r]);return{revisedParams:i}}function Fz(t,n,e){if(n.length===0||e.staffwidth<n[0].left)return{reParse:!1,explanation:"Staff width is narrower than the margin",revisedParams:e};var i=e.scale?Math.max(e.scale,.1):1,r=e.wrap.minSpacing?Math.max(parseFloat(e.wrap.minSpacing),1):1,s=e.wrap.minSpacingLimit?Math.max(parseFloat(e.wrap.minSpacingLimit),1):r-.1,a=e.wrap.maxSpacing?Math.max(parseFloat(e.wrap.maxSpacing),1):void 0;e.wrap.lastLineLimit&&!a&&(a=Math.max(parseFloat(e.wrap.lastLineLimit),1));for(var l=e.wrap.preferredMeasuresPerLine?Math.max(parseInt(e.wrap.preferredMeasuresPerLine,10),0):void 0,d=[],u=[],h=0;h<n.length;h++){var _=n[h],b=e.staffwidth-_.left,w=b/r/i,S=b/a/i,L=b/s/i,R={widths:_,lineBreakPoint:w,minLineSize:S,attempts:[],staffWidth:e.staffwidth,minWidth:Math.round(L)},z=null;if(l){var ne=Iz(_.measureWidths,w,l);R.attempts.push({type:"Fixed Measures Per Line",preferredMeasuresPerLine:l,lineBreaks:ne.lineBreaks,failed:ne.failed,totals:ne.totals}),ne.failed||(z=ne.lineBreaks)}if(!z){var Q=Tz(_.measureWidths,w);R.attempts.push({type:"Free Form",lineBreaks:Q.lineBreaks,totals:Q.totals}),z=Q.lineBreaks,z.length>0&&_.measureWidths.length<25&&(Q=Dz(_,w,z,R),R.attempts.push({type:"Optimize",failed:Q.failed,reason:Q.reason,lineBreaks:Q.lineBreaks,totals:Q.totals}),Q.failed||(z=Q.lineBreaks))}d.push(z),u.push(R)}var q=e.staffwidth,T=Oz(d,q,e);return T.explanation=u,T.reParse=!0,T}$5.exports={wrapLines:Pz,calcLineWraps:Fz}});var No=et((Sxe,K5)=>{var wl={};wl.FONTEM=360;wl.FONTSIZE=30;wl.STEP=wl.FONTSIZE*93/720;wl.SPACE=10;wl.TOPNOTE=15;wl.STAVEHEIGHT=100;wl.INDENT=50;K5.exports=wl});var Lx=et((Pxe,eT)=>{var Z5,pp=oo();(function(){"use strict";var t,n=128;Z5=function(w,S){S=S||{};var L,R=S.program||0,z=S.midiTranspose||0;w.visualTranspose&&(z-=w.visualTranspose);var ne=S.channel||0,Q=!1,q=S.drum||"",T=S.drumBars||1,se=S.drumIntro||0,_e=q!=="",Me=[],me=!1,K=50;R=parseInt(R,10),z=parseInt(z,10),ne=parseInt(ne,10),ne===10&&(R=n),q=q.split(" "),T=parseInt(T,10),se=parseInt(se,10);var ue=w.formatting.bagpipes;ue&&(R=71);var be=[];if(w.formatting.midi){var Z=w.formatting.midi;Z.program&&Z.program.length>0&&(R=Z.program[0],Z.program.length>1&&(R=Z.program[1],ne=Z.program[0]),Q=!0),Z.transpose&&(z=Z.transpose[0]),Z.channel&&(ne=Z.channel[0],Q=!0),Z.drum&&(q=Z.drum),Z.drumbars&&(T=Z.drumbars[0]),Z.drumon&&(_e=!0),ne===10&&(R=n),Z.beat&&be.push({el_type:"beat",beats:Z.beat}),Z.nobeataccents&&be.push({el_type:"beataccents",value:!1})}S.qpm?L=parseInt(S.qpm,10):w.metaText.tempo?L=l(w.metaText.tempo,w.getBeatLength()):S.defaultQpm?L=S.defaultQpm:L=180;var oe=[];ue&&oe.push({el_type:"bagpipes"}),oe.push({el_type:"instrument",program:R}),ne&&oe.push({el_type:"channel",channel:ne}),z&&oe.push({el_type:"transpose",transpose:z}),oe.push({el_type:"tempo",qpm:L});for(var Ee=0;Ee<be.length;Ee++)oe.push(be[Ee]);var Y=[],G=[],le=[],X=[0],Ue={};Ue[0]={el_type:"tempo",qpm:L,timing:0};for(var Ze,De=[],xe=[],ke=!1,Ve=w.lines,it=0;it<Ve.length;it++){var Je=Ve[it];if(Je.staff){let Qe=function(bt){var Rt={pppp:[15,10,5,1],ppp:[30,20,10,1],pp:[45,35,20,1],p:[60,50,35,1],mp:[75,65,50,1],mf:[90,80,65,1],f:[105,95,80,1],ff:[120,110,95,1],fff:[127,125,110,1],ffff:[127,125,110,1]},Nt;if(bt.decoration)if(bt.decoration.indexOf("pppp")>=0?Nt="pppp":bt.decoration.indexOf("ppp")>=0?Nt="ppp":bt.decoration.indexOf("pp")>=0?Nt="pp":bt.decoration.indexOf("p")>=0?Nt="p":bt.decoration.indexOf("mp")>=0?Nt="mp":bt.decoration.indexOf("mf")>=0?Nt="mf":bt.decoration.indexOf("f")>=0?Nt="f":bt.decoration.indexOf("ff")>=0?Nt="ff":bt.decoration.indexOf("fff")>=0?Nt="fff":bt.decoration.indexOf("ffff")>=0&&(Nt="ffff"),Nt&&(Ze=Rt[Nt].slice(0),Y[ot].push({el_type:"beat",beats:Ze.slice(0)}),G[Tt]=!1,le[Tt]=!1),bt.decoration.indexOf("crescendo(")>=0){var St=e(mt,Fi,"crescendo)"),kn=Math.min(127,Ze[0]+K),rn=i(mt,Fi+St+1,Object.keys(Rt));rn&&(kn=Rt[rn][0]),St>0?G[Tt]=Math.floor((kn-Ze[0])/St):G[Tt]=!1,le[Tt]=!1}else if(bt.decoration.indexOf("crescendo)")>=0)G[Tt]=!1;else if(bt.decoration.indexOf("diminuendo(")>=0){var rr=e(mt,Fi,"diminuendo)"),Ye=Math.max(15,Ze[0]-K),rt=i(mt,Fi+rr+1,Object.keys(Rt));rt&&(Ye=Rt[rt][0]),G[Tt]=!1,rr>0?le[Tt]=Math.floor((Ye-Ze[0])/rr):le[Tt]=!1}else bt.decoration.indexOf("diminuendo)")>=0&&(le[Tt]=!1)};for(var st=Je.staff,ot=0,pn=0;pn<st.length;pn++){var tn=st[pn];if(!(tn.clef&&tn.clef.type==="TAB"))for(var Tt=0;Tt<tn.voices.length;Tt++){var mt=tn.voices[Tt];if(!Y[ot]){Y[ot]=[].concat(JSON.parse(JSON.stringify(oe)));var Mn=a(Je.staff,ot);Mn&&Y[ot].unshift({el_type:"name",trackName:Mn})}if(z&&tn.clef.type==="perc"&&Y[ot].push({el_type:"transpose",transpose:0}),tn.clef&&tn.clef.type==="perc"&&!Q)for(var vt=0;vt<Y[ot].length;vt++)Y[ot][vt].el_type==="instrument"&&(Y[ot][vt].program=n);else tn.key&&h(Y[ot],tn.key);tn.meter&&_(Y[ot],tn.meter),!ke&&_e&&(Y[ot].push({el_type:"drum",params:{pattern:q,bars:T,on:_e,intro:se}}),ke=!0),tn.clef&&tn.clef.type!=="perc"&&tn.clef.transpose&&(tn.clef.el_type="clef",Y[ot].push({el_type:"transpose",transpose:tn.clef.transpose})),tn.clef&&tn.clef.type&&(tn.clef.type.indexOf("-8")>=0?Y[ot].push({el_type:"transpose",transpose:-12}):tn.clef.type.indexOf("+8")>=0&&Y[ot].push({el_type:"transpose",transpose:12})),w.formatting.midi&&w.formatting.midi.drumoff&&(Y[ot].push({el_type:"bar"}),Y[ot].push({el_type:"drum",params:{pattern:"",on:!1}}));var Nn=0,ui=0,Mr=0,Br=0;Ze=[105,95,85,1];for(var Fi=0;Fi<mt.length;Fi++){var qt=mt[Fi];switch(qt.el_type){case"note":if(G[Tt]&&(Ze[0]+=G[Tt],Ze[1]+=G[Tt],Ze[2]+=G[Tt],Y[ot].push({el_type:"beat",beats:Ze.slice(0)})),le[Tt]&&(Ze[0]+=le[Tt],Ze[1]+=le[Tt],Ze[2]+=le[Tt],Y[ot].push({el_type:"beat",beats:Ze.slice(0)})),Qe(qt),!qt.rest||qt.rest.type!=="spacer"){var Qn={elem:qt,el_type:"note",timing:X[ot]};if(qt.style?Qn.style=qt.style:Me[ot]&&(Qn.style=Me[ot]),Qn.duration=qt.duration===0?.25:qt.duration,qt.startTriplet){if(ui=qt.tripletMultiplier,Mr=qt.startTriplet*ui*qt.duration,qt.startTriplet!==qt.tripletR&&Fi+qt.tripletR<=mt.length){for(var Sr=0,vi=Fi;vi<Fi+qt.tripletR;vi++)Sr+=mt[vi].duration;Mr=ui*Sr}Qn.duration=Qn.duration*ui,Qn.duration=Math.round(Qn.duration*1e6)/1e6,Br=Qn.duration}else ui&&(qt.endTriplet?(ui=0,Qn.duration=Math.round((Mr-Br)*1e6)/1e6):(Qn.duration=Qn.duration*ui,Qn.duration=Math.round(Qn.duration*1e6)/1e6,Br+=Qn.duration));qt.rest&&(Qn.rest=qt.rest),qt.decoration&&(Qn.decoration=qt.decoration.slice(0)),qt.pitches&&(Qn.pitches=pp.cloneArray(qt.pitches)),qt.gracenotes&&(Qn.gracenotes=pp.cloneArray(qt.gracenotes)),qt.chord&&(Qn.chord=pp.cloneArray(qt.chord)),Y[ot].push(Qn),qt.style==="rhythm"&&(me=!0,s(Y)),Nn++,X[ot]+=Qn.duration}break;case"key":case"keySignature":h(Y[ot],qt);break;case"meter":_(Y[ot],qt);break;case"clef":qt.transpose&&Y[ot].push({el_type:"transpose",transpose:qt.transpose}),qt.type&&(qt.type.indexOf("-8")>=0?Y[ot].push({el_type:"transpose",transpose:-12}):qt.type.indexOf("+8")>=0&&Y[ot].push({el_type:"transpose",transpose:12}));break;case"tempo":L=l(qt,w.getBeatLength()),Y[ot].push({el_type:"tempo",qpm:L,timing:X[ot]}),Ue[""+X[ot]]={el_type:"tempo",qpm:L,timing:X[ot]};break;case"bar":Nn>0&&Y[ot].push({el_type:"bar"}),Qe(qt),Nn=0;var Pr=qt.type==="bar_right_repeat"||qt.type==="bar_dbl_repeat",Wi=qt.startEnding==="1",li=qt.type==="bar_left_repeat"||qt.type==="bar_dbl_repeat"||qt.type==="bar_right_repeat";if(Pr){var Hi=De[ot];Hi||(Hi=0);var is=xe[ot];is||(is=Y[ot].length);for(var Eo=Hi;Eo<is;Eo++){var Jr=pp.clone(Y[ot][Eo]);Jr.pitches&&(Jr.pitches=pp.cloneArray(Jr.pitches)),Y[ot].push(Jr)}xe[ot]=void 0,De[ot]=void 0}Wi&&(xe[ot]=Y[ot].length),li&&(De[ot]=Y[ot].length),me=!1;break;case"style":Me[ot]=qt.head;break;case"timeSignature":Y[ot].push(d(qt));break;case"part":break;case"stem":case"scale":case"break":case"font":break;case"midi":var Pi=!1;switch(qt.cmd){case"drumon":_e=!0,Pi=!0;break;case"drumoff":_e=!1,Pi=!0;break;case"drum":q=qt.params,Pi=!0;break;case"drumbars":T=qt.params[0],Pi=!0;break;case"drummap":break;case"channel":qt.params[0]===10&&Y[ot].push({el_type:"instrument",program:n});break;case"program":b(Y[ot],{el_type:"instrument",program:qt.params[0]}),Q=!0;break;case"transpose":Y[ot].push({el_type:"transpose",transpose:qt.params[0]});break;case"gchordoff":Y[ot].push({el_type:"gchord",tacet:!0});break;case"gchordon":Y[ot].push({el_type:"gchord",tacet:!1});break;case"beat":Y[ot].push({el_type:"beat",beats:qt.params});break;case"nobeataccents":Y[ot].push({el_type:"beataccents",value:!1});break;case"beataccents":Y[ot].push({el_type:"beataccents",value:!0});break;case"vol":Y[ot].push({el_type:"vol",volume:qt.params[0]});break;case"volinc":Y[ot].push({el_type:"volinc",volume:qt.params[0]});break;default:console.log("MIDI seq: midi cmd not handled: ",qt.cmd,qt)}Pi&&(Y[0].push({el_type:"drum",params:{pattern:q,bars:T,intro:se,on:_e}}),ke=!0);break;default:console.log("MIDI: element type "+qt.el_type+" not handled.")}}ot++,X[ot]||(X[ot]=0)}}}}if(r(Y,Ue),se)for(var ee=w.getPickupLength(),te=0;te<Y.length;te++){for(var Te=0;Y[te][Te].el_type!=="note"&&Y[te].length>Te;)Te++;if(Y[te].length>Te)for(var vi=0;vi<se;vi++)ee===0||vi<se-1?Y[te].splice(Te,0,{el_type:"note",rest:{type:"rest"},duration:t},{el_type:"bar"}):Y[te].splice(Te,0,{el_type:"note",rest:{type:"rest"},duration:t-ee})}return Y.length>0&&Y[0].length>0&&(Y[0][0].pickupLength=w.getPickupLength()),Y};function e(w,S,L){for(var R=0,z=S+1;z<w.length;z++)if(w[z].el_type==="note"&&R++,w[z].decoration&&w[z].decoration.indexOf(L)>=0)return R;return R}function i(w,S,L){for(var R=Math.min(w.length,S+3),z=S;z<R;z++)if(w[z].el_type==="note"&&w[z].decoration){for(var ne=0;ne<w[z].decoration.length;ne++)if(L.indexOf(w[z].decoration[ne])>=0)return w[z].decoration[ne]}return null}function r(w,S){if(!(!S||S.length===0))for(var L=Object.keys(S),R=0;R<w.length;R++)for(var z=w[R],ne=S[0]?S[0].qpm:0,Q=0;Q<z.length;Q++){var q=z[Q];q.el_type==="tempo"&&(ne=q.qpm),L.indexOf(""+q.timing)>=0&&ne!==S[""+q.timing].qpm&&(ne=S[""+q.timing].qpm,q.el_type==="tempo"?(q.qpm=S[""+q.timing].qpm,Q++):(w[R].splice(Q,0,{el_type:"tempo",qpm:S[""+q.timing].qpm,timing:q.timing}),Q+=2))}}function s(w){for(var S=0;S<w.length;S++)for(var L=w[S],R=L.length-1;R>=0&&L[R].el_type!=="bar";)L[R].noChordVoice=!0,R--}function a(w,S){if(!(!w||w.length<=S||!w[S].title))return w[S].title.join(" ")}function l(w,S){var L=.25;w.duration&&(L=w.duration[0]);var R=60;return w.bpm&&(R=w.bpm),L*R/S}function d(w){var S;switch(w.type){case"common_time":S={el_type:"meter",num:4,den:4};break;case"cut_time":S={el_type:"meter",num:2,den:2};break;case"specified":S={el_type:"meter",num:w.value[0].num,den:w.value[0].den};break;default:S={el_type:"meter"}}return t=S.num/S.den,S}function u(w){for(var S=[],L=0;L<w.length;L++)w[L].acc!=="natural"&&S.push(w[L]);return S}function h(w,S){var L;S.root==="HP"?L={el_type:"key",accidentals:[{acc:"natural",note:"g"},{acc:"sharp",note:"f"},{acc:"sharp",note:"c"}]}:L={el_type:"key",accidentals:u(S.accidentals)},b(w,L)}function _(w,S){var L=d(S);b(w,L)}function b(w,S){for(var L=w.length-1;L>=0;L--)if(w[L].el_type===S.el_type){JSON.stringify(w[L])!==JSON.stringify(S)&&w.push(S);return}w.push(S)}})();eT.exports=Z5});var Nx=et((kxe,tT)=>{var Bz={f0:"_C",n0:"=C",s0:"^C",x0:"C",f1:"_D",n1:"=D",s1:"^D",x1:"D",f2:"_E",n2:"=E",s2:"^E",x2:"E",f3:"_F",n3:"=F",s3:"^F",x3:"F",f4:"_G",n4:"=G",s4:"^G",x4:"G",f5:"_A",n5:"=A",s5:"^A",x5:"A",f6:"_B",n6:"=B",s6:"^B",x6:"B",f7:"_c",n7:"=c",s7:"^c",x7:"c",f8:"_d",n8:"=d",s8:"^d",x8:"d",f9:"_e",n9:"=e",s9:"^e",x9:"e",f10:"_f",n10:"=f",s10:"^f",x10:"f",f11:"_g",n11:"=g",s11:"^g",x11:"g",f12:"_a",n12:"=a",s12:"^a",x12:"a",f13:"_b",n13:"=b",s13:"^b",x13:"b"};function Lz(t){var n=(t.accidental?t.accidental[0]:"x")+t.verticalPos;return Bz[n]}tT.exports=Lz});var oT=et((Exe,rT)=>{var iT,Nz=oo(),nT=Nx();(function(){"use strict";var t,n,e,i,r,s,a,l=1,d,u,h,_,b,w,S={num:4,den:4},L,R,z,ne,Q=0,q=128,T=64,se=48,_e,Me,me,K,ue=!1,be=!1,Z=!0,oe=105,Ee=95,Y=85,G=.25,le,X,Ue=0,Ze,De,xe={},ke=0,Ve,it=0,Je=-.001,st=.4;iT=function(Ye,rt,dt){rt||(rt={}),t=[],n=[0,0,0,0,0,0,0],i=!1,r=[],s=rt.qpm,a=void 0,l=1,d=void 0,u=void 0,h=void 0,b=void 0,w=0,Ve=dt,S={num:4,den:4},L=[],R=!1,ne=Ye.length,z=!1,_e=[],T=64,se=48,Me=void 0,me=void 0,ue=!!rt.chordsOff,be=!1,Z=!0,oe=105,Ee=95,Y=85,G=.25,le=void 0,X=void 0,Ue=0,Ze=[],De=!1,xe={},Ye.length>0&&Ye[0].length>0&&(ke=Ye[0][0].pickupLength),mt(Ye,rt);for(var Dt=0;Dt<Ye.length;Dt++){e=0,_=-1;var Pt=Ye[Dt];h=[{cmd:"program",channel:Dt,instrument:d}],b=void 0,K=0;var Qt=!1;(rt.voicesOff===!0||rt.voicesOff&&rt.voicesOff.length&&rt.voicesOff.indexOf(Dt)>=0)&&(Qt=!0);for(var pt=0;pt<Pt.length;pt++){var It=Pt[pt];switch(It.el_type){case"name":b={cmd:"text",type:"name",text:It.trackName};break;case"note":var c=Qn(It,Qt);c&&(R=Dt);break;case"key":n=Wi(It);break;case"meter":a||(a=It),S=It,G=Mn(S);break;case"tempo":s?l=It.qpm?s/It.qpm:1:s=It.qpm;break;case"transpose":e=It.transpose;break;case"bar":L.length>0&&(R===!1||Dt===R)&&(St(K,tn(It.time)),_e=[]),t=[],Dt===0&&rn(Ye.length+1),be=!1,me=Me,K=tn(It.time);break;case"bagpipes":i=!0;break;case"instrument":if(d===void 0&&(d=It.program),u=It.program,h.length>0&&h[h.length-1].cmd==="program")h[h.length-1].instrument=It.program;else{var x;for(x=h.length-1;x>=0&&h[x].cmd!=="program";x--);(x<0||h[x].instrument!==It.program)&&h.push({cmd:"program",channel:0,instrument:It.program})}break;case"channel":ot(It.channel);break;case"drum":xe=kn(It.params);break;case"gchord":rt.chordsOff||(ue=It.tacet);break;case"beat":oe=It.beats[0],Ee=It.beats[1],Y=It.beats[2];break;case"vol":le=It.volume;break;case"volinc":X=It.volume;break;case"beataccents":Z=It.value;break;default:console.log("MIDI creation. Unknown el_type: "+It.el_type+`
`);break}}h[0].instrument===void 0&&(h[0].instrument=d||0),b&&h.unshift(b),r.push(h),pn()||(z=!0),Ze.length>0&&(De=!0)}return rt.detuneOctave&&rr(r,parseInt(rt.detuneOctave,10)),pn()||r.push(L),Ze.length>0&&r.push(Ze),{tempo:s,instrument:d,tracks:r,totalDuration:w}};function ot(Ye){for(var rt=h.length-1;rt>=0;rt--)if(h[rt].cmd==="program"){h[rt].channel=Ye;return}}function pn(){for(var Ye=!0,rt=0;rt<L.length&&Ye;rt++)L[rt].cmd==="note"&&(Ye=!1);return Ye}function tn(Ye){return Ye/1e6}function Tt(Ye){return Math.round(Ye*l*1e6)/1e6}function mt(Ye,rt){for(var dt=0;dt<Ye.length;dt++){for(var Dt=Ye[dt],Pt={},Qt=rt.qpm,pt=0,It=1,c=0;c<Dt.length;c++){var x=Dt[c];if(x.el_type==="tempo"){Qt?It=x.qpm?Qt/x.qpm:1:Qt=x.qpm;continue}x.time=pt;var g=x.duration?x.duration:0;if(pt+=Math.round(g*It*1e6),x.pitches){for(var f=0;f<x.pitches.length;f++){var v=x.pitches[f];if(v){if(v.duration=x.duration,v.startTie)Pt[v.pitch]===void 0?Pt[v.pitch]={el:c,pitch:f}:(Dt[Pt[v.pitch].el].pitches[Pt[v.pitch].pitch].duration+=v.duration,x.pitches[f]=null);else if(v.endTie){var k=Pt[v.pitch];if(k){var A=v.duration;delete Dt[k.el].pitches[k.pitch].startTie,Dt[k.el].pitches[k.pitch].duration+=A,x.pitches[f]=null,delete Pt[v.pitch]}else delete v.endTie}}}delete x.duration}}for(var O in Pt)if(Pt.hasOwnProperty(O)){var N=Pt[O];delete Dt[N.el].pitches[N.pitch].startTie}}}function Mn(Ye){switch(parseInt(Ye.den,10)){case 2:return .5;case 4:return .25;case 8:return Ye.num%3===0?.375:.125;case 16:return .125}return .25}var vt=["break","(break)","no chord","n.c.","tacet"];function Nn(Ye){if(ue)return"break";if(z||!Ye.chord||Ye.chord.length===0)return null;for(var rt=0;rt<Ye.chord.length;rt++){var dt=Ye.chord[rt];if(dt.position==="default")return dt.name;if(vt.indexOf(dt.name.toLowerCase())>=0)return"break"}return null}function ui(Ye,rt,dt){var Dt=dt-Ye;return Dt/rt}function Mr(Ye,rt){if(rt)return 0;var dt;if(le)dt=le,le=void 0;else if(!Z)dt=Ee;else if(ke>Ye)dt=Y;else{var Dt=S.num/S.den,Pt=ui(K,Mn(S),Ye);Pt===0?dt=oe:parseInt(Pt,10)===Pt?dt=Ee:dt=Y}return X&&(dt+=X,X=void 0),dt<0&&(dt=0),dt>127&&(dt=127),rt?0:dt}function Br(Ye){var rt=!1,dt=Nn(Ye);if(dt){var Dt=te(dt);if(Dt){L.length===0&&(rt=!0,L.push({cmd:"program",channel:ne,instrument:Q})),Me=Dt;var Pt=ui(K,Mn(S),tn(Ye.time));_e.push({chord:Me,beat:Pt,start:tn(Ye.time)})}}return rt}function Fi(Ye,rt){var dt={};if(Ye.decoration)for(var Dt=0;Dt<Ye.decoration.length;Dt++)Ye.decoration[Dt]==="staccato"?dt.thisBreakBetweenNotes="staccato":Ye.decoration[Dt]==="tenuto"?dt.thisBreakBetweenNotes="tenuto":Ye.decoration[Dt]==="accent"?dt.velocity=Math.min(127,rt*1.5):Ye.decoration[Dt]==="trill"?dt.noteModification="trill":Ye.decoration[Dt]==="lowermordent"?dt.noteModification="lowermordent":Ye.decoration[Dt]==="uppermordent"||Ye.decoration[Dt]==="mordent"?dt.noteModification="mordent":Ye.decoration[Dt]==="turn"?dt.noteModification="turn":Ye.decoration[Dt]==="roll"&&(dt.noteModification="roll");return dt}function qt(Ye,rt){var dt,Dt,Pt=rt.start,Qt,pt=rt.duration,It=Tt(1/32);switch(Ye){case"trill":for(var c=1;pt>0;)h.push({cmd:"note",pitch:rt.pitch+c,volume:rt.volume,start:Pt,duration:It,gap:0,instrument:u,style:"decoration"}),c=c===1?0:1,pt-=It,Pt+=It;break;case"mordent":h.push({cmd:"note",pitch:rt.pitch,volume:rt.volume,start:Pt,duration:It,gap:0,instrument:u,style:"decoration"}),pt-=It,Pt+=It,h.push({cmd:"note",pitch:rt.pitch+1,volume:rt.volume,start:Pt,duration:It,gap:0,instrument:u,style:"decoration"}),pt-=It,Pt+=It,h.push({cmd:"note",pitch:rt.pitch,volume:rt.volume,start:Pt,duration:pt,gap:0,instrument:u});break;case"lowermordent":h.push({cmd:"note",pitch:rt.pitch,volume:rt.volume,start:Pt,duration:It,gap:0,instrument:u,style:"decoration"}),pt-=It,Pt+=It,h.push({cmd:"note",pitch:rt.pitch-1,volume:rt.volume,start:Pt,duration:It,gap:0,instrument:u,style:"decoration"}),pt-=It,Pt+=It,h.push({cmd:"note",pitch:rt.pitch,volume:rt.volume,start:Pt,duration:pt,gap:0,instrument:u});break;case"turn":It=rt.duration/5,h.push({cmd:"note",pitch:rt.pitch,volume:rt.volume,start:Pt,duration:It,gap:0,instrument:u,style:"decoration"}),h.push({cmd:"note",pitch:rt.pitch+1,volume:rt.volume,start:Pt+It,duration:It,gap:0,instrument:u,style:"decoration"}),h.push({cmd:"note",pitch:rt.pitch,volume:rt.volume,start:Pt+It*2,duration:It,gap:0,instrument:u,style:"decoration"}),h.push({cmd:"note",pitch:rt.pitch+1,volume:rt.volume,start:Pt+It*3,duration:It,gap:0,instrument:u,style:"decoration"}),h.push({cmd:"note",pitch:rt.pitch,volume:rt.volume,start:Pt+It*4,duration:It,gap:0,instrument:u});break;case"roll":for(;pt>0;)h.push({cmd:"note",pitch:rt.pitch,volume:rt.volume,start:Pt,duration:It,gap:0,instrument:u,style:"decoration"}),pt-=It*2,Pt+=It*2;break}}function Qn(Ye,rt){var dt=h.length,Dt=Mr(tn(Ye.time),rt),Pt=Br(Ye),Qt;if(Ye.gracenotes&&Ye.pitches&&Ye.pitches.length>0&&Ye.pitches[0]&&(Qt=li(Ye.gracenotes,Ye.pitches[0].duration),Ye.elem&&(Ye.elem.midiGraceNotePitches=Hi(Qt,tn(Ye.time),Dt*2/3,u))),Ye.elem){var pt=tn(Ye.time),It=pt/G/s*60*1e3;if(Ye.elem.currentTrackMilliseconds===void 0)Ye.elem.currentTrackMilliseconds=It,Ye.elem.currentTrackWholeNotes=pt;else if(Ye.elem.currentTrackMilliseconds.length===void 0)Ye.elem.currentTrackMilliseconds!==It&&(Ye.elem.currentTrackMilliseconds=[Ye.elem.currentTrackMilliseconds,It],Ye.elem.currentTrackWholeNotes=[Ye.elem.currentTrackWholeNotes,pt]);else{for(var c=!1,x=0;x<Ye.elem.currentTrackMilliseconds.length;x++)Ye.elem.currentTrackMilliseconds[x]===It&&(c=!0);c||(Ye.elem.currentTrackMilliseconds.push(It),Ye.elem.currentTrackWholeNotes.push(pt))}}if(Ye.pitches){var g="",f=Fi(Ye,Dt);f.thisBreakBetweenNotes&&(g=f.thisBreakBetweenNotes),f.velocity&&(Dt=f.velocity);var v=Ye.pitches;if(Ye.style==="rhythm"&&(be=!0,Me&&Me.chick)){v=[];for(var k=0;k<Me.chick.length;k++){var A=Nz.clone(Ye.pitches[0]);A.actualPitch=Me.chick[k],v.push(A)}}Ye.elem&&(Ye.elem.midiPitches=[]);for(var O=0;O<v.length;O++){var N=v[O];if(N){N.startSlur&&(Ue+=N.startSlur.length),N.endSlur&&(Ue-=N.endSlur.length);var D=N.actualPitch?N.actualPitch:Pr(N);if(u===q&&Ve){var V=nT(N);V&&Ve[V]&&(D=Ve[V].sound)}var F={cmd:"note",pitch:D,volume:Dt,start:tn(Ye.time),duration:Tt(N.duration),instrument:u,startChar:Ye.elem.startChar,endChar:Ye.elem.endChar};if(F=Eo(F),Ye.gracenotes&&(F.duration=F.duration/2,F.start=F.start+F.duration),Ye.elem&&Ye.elem.midiPitches.push(F),f.noteModification)qt(f.noteModification,F);else{switch(Ue>0?F.endType="tenuto":g&&(F.endType=g),F.endType){case"tenuto":F.gap=Je;break;case"staccato":var I=F.duration*st;F.gap=s/60*I;break;default:F.gap=it;break}h.push(F)}}}_=h.length-1}var C=Sr(Ye);return w=Math.max(w,tn(Ye.time)+Tt(C)),Pt}function Sr(Ye){return Ye.pitches&&Ye.pitches.length>0&&Ye.pitches[0]?Ye.pitches[0].duration:Ye.elem?Ye.elem.duration:Ye.duration}var vi=[0,2,4,5,7,9,11];function Pr(Ye){if(Ye.midipitch!==void 0)return Ye.midipitch;var rt=Ye.pitch;if(Ye.accidental)switch(Ye.accidental){case"sharp":t[rt]=1;break;case"flat":t[rt]=-1;break;case"natural":t[rt]=0;break;case"dblsharp":t[rt]=2;break;case"dblflat":t[rt]=-2;break;case"quartersharp":t[rt]=.25;break;case"quarterflat":t[rt]=-.25;break}var dt=Jr(rt)*12+vi[Pi(rt)]+60;return t[rt]!==void 0?dt+=t[rt]:dt+=n[Pi(rt)],dt+=e,dt}function Wi(Ye){var rt=[0,0,0,0,0,0,0];if(!Ye.accidentals)return rt;for(var dt=0;dt<Ye.accidentals.length;dt++){var Dt=Ye.accidentals[dt],Pt;switch(Dt.acc){case"flat":Pt=-1;break;case"quarterflat":Pt=-.25;break;case"sharp":Pt=1;break;case"quartersharp":Pt=.25;break;default:Pt=0;break}var Qt=Dt.note.toLowerCase(),pt=Pi(Qt.charCodeAt(0)-99);rt[pt]+=Pt}return rt}function li(Ye,rt){for(var dt=0,Dt=[],Pt,Qt=0;Qt<Ye.length;Qt++)Pt=Ye[Qt],dt+=Pt.duration;var pt=rt/2/dt;for(Qt=0;Qt<Ye.length;Qt++){Pt=Ye[Qt];var It=Pr(Pt);if(u===q&&Ve){var c=nT(Pt);c&&Ve[c]&&(It=Ve[c].sound)}var x={pitch:It,duration:Pt.duration*pt};x=Eo(x),Dt.push(x)}return Dt}function Hi(Ye,rt,dt,Dt){var Pt=[];dt=Math.round(dt);for(var Qt=0;Qt<Ye.length;Qt++){var pt=Ye[Qt];h.push({cmd:"note",pitch:pt.pitch,volume:dt,start:rt,duration:pt.duration,gap:0,instrument:Dt,style:"grace"}),Pt.push({pitch:pt.pitch,durationInMeasures:pt.duration,volume:dt,instrument:Dt}),rt+=pt.duration}return Pt}var is=.02930223664349;function Eo(Ye){var rt=""+Ye.pitch;return rt.indexOf(".75")>=0?(Ye.pitch=Math.round(Ye.pitch),Ye.cents=-50):rt.indexOf(".25")>=0&&(Ye.pitch=Math.round(Ye.pitch),Ye.cents=50),Ye}function Jr(Ye){return Math.floor(Ye/7)}function Pi(Ye){return Ye=Ye%7,Ye<0&&(Ye+=7),Ye}var ee={A:33,B:35,C:36,D:38,E:40,F:41,G:43};function te(Ye){if(Ye.length!==0){if(Ye==="break")return{chick:[]};var rt=Ye.substring(0,1);if(rt==="("){if(Ye=Ye.substring(1,Ye.length-2),Ye.length===0)return;rt=Ye.substring(0,1)}var dt=ee[rt];if(dt){for(var Dt=e;Dt<-8;)Dt+=12;for(;Dt>8;)Dt-=12;dt+=Dt;var Pt=dt-5,Qt;Ye.length===1&&(Qt=Qe(dt,""));var pt=Ye.substring(1),It=pt.substring(0,1);It==="b"||It==="\u266D"?(dt--,Pt--,pt=pt.substring(1)):(It==="#"||It==="\u266F")&&(dt++,Pt++,pt=pt.substring(1));var c=pt.split("/");if(Qt=Qe(dt,c[0]),Qt.length>=3){var x=Qt[2]-Qt[0];Pt=Pt+x-7}if(c.length===2){var g=ee[c[1].substring(0,1)];if(g){var f=c[1].substring(1),v={"#":1,"\u266F":1,b:-1,"\u266D":-1}[f]||0;dt=ee[c[1].substring(0,1)]+v+Dt,Pt=dt}}return{boom:dt,boom2:Pt,chick:Qt}}}}var Te={dim:[0,3,6],"\xB0":[0,3,6],"\u02DA":[0,3,6],dim7:[0,3,6,9],"\xB07":[0,3,6,9],"\u02DA7":[0,3,6,9],\u00F87:[0,3,6,10],"m7(b5)":[0,3,6,10],m7b5:[0,3,6,10],"m7\u266D5":[0,3,6,10],"-7(b5)":[0,3,6,10],"-7b5":[0,3,6,10],"7b5":[0,4,6,10],"7(b5)":[0,4,6,10],"7\u266D5":[0,4,6,10],"7(b9,b5)":[0,4,6,10,13],"7b9,b5":[0,4,6,10,13],"7(#9,b5)":[0,4,6,10,15],"7#9b5":[0,4,6,10,15],"maj7(b5)":[0,4,6,11],maj7b5:[0,4,6,11],"13(b5)":[0,4,6,10,14,21],"13b5":[0,4,6,10,14,21],m:[0,3,7],"-":[0,3,7],m6:[0,3,7,9],"-6":[0,3,7,9],m7:[0,3,7,10],"-7":[0,3,7,10],"-(b6)":[0,3,7,8],"-b6":[0,3,7,8],"-6/9":[0,3,7,9,14],"-7(b9)":[0,3,7,10,13],"-7b9":[0,3,7,10,13],"-maj7":[0,3,7,11],"-9+7":[0,3,7,11,13],"-11":[0,3,7,11,14,17],m11:[0,3,7,11,14,17],"-maj9":[0,3,7,11,14],"-\u22069":[0,3,7,11,14],mM9:[0,3,7,11,14],M:[0,4,7],6:[0,4,7,9],"6/9":[0,4,7,9,14],"6add9":[0,4,7,9,14],69:[0,4,7,9,14],7:[0,4,7,10],9:[0,4,7,10,14],11:[0,7,10,14,17],13:[0,4,7,10,14,21],"7b9":[0,4,7,10,13],"7\u266D9":[0,4,7,10,13],"7(b9)":[0,4,7,10,13],"7(#9)":[0,4,7,10,15],"7#9":[0,4,7,10,15],"(13)":[0,4,7,10,14,21],"7(9,13)":[0,4,7,10,14,21],"7(#9,b13)":[0,4,7,10,15,20],"7(#11)":[0,4,7,10,14,18],"7#11":[0,4,7,10,14,18],"7(b13)":[0,4,7,10,20],"7b13":[0,4,7,10,20],"9(#11)":[0,4,7,10,14,18],"9#11":[0,4,7,10,14,18],"13(#11)":[0,4,7,10,18,21],"13#11":[0,4,7,10,18,21],maj7:[0,4,7,11],"\u22067":[0,4,7,11],\u03947:[0,4,7,11],maj9:[0,4,7,11,14],"maj7(9)":[0,4,7,11,14],"maj7(11)":[0,4,7,11,17],"maj7(#11)":[0,4,7,11,18],"maj7(13)":[0,4,7,14,21],"maj7(9,13)":[0,4,7,11,14,21],"7sus4":[0,5,7,10],m7sus4:[0,3,7,10,17],sus4:[0,5,7],sus2:[0,2,7],"7sus2":[0,2,7,10],"9sus4":[0,5,7,10,14],"13sus4":[0,5,7,10,14,21],aug7:[0,4,8,10],"+7":[0,4,8,10],"+":[0,4,8],"7#5":[0,4,8,10],"7\u266F5":[0,4,8,10],"7+5":[0,4,8,10],"9#5":[0,4,8,10,14],"9\u266F5":[0,4,8,10,14],"9+5":[0,4,8,10,14],"-7(#5)":[0,3,8,10],"-7#5":[0,3,8,10],"7(#5)":[0,4,8,10],"7(b9,#5)":[0,4,8,10,13],"7b9#5":[0,4,8,10,13],"maj7(#5)":[0,4,8,11],"maj7#5":[0,4,8,11],"maj7(#5,#11)":[0,4,8,11,18],"maj7#5#11":[0,4,8,11,18],"9(#5)":[0,4,8,10,14],"13(#5)":[0,4,8,10,14,21],"13#5":[0,4,8,10,14,21]};function Qe(Ye,rt){var dt=Te[rt];dt||(rt.slice(0,2).toLowerCase()==="ma"||rt.charAt(0)==="M"?dt=Te.M:rt.charAt(0)==="m"||rt.charAt(0)==="-"?dt=Te.m:dt=Te.M),Ye+=12;for(var Dt=[],Pt=0;Pt<dt.length;Pt++)Dt.push(Ye+dt[Pt]);return Dt}function bt(Ye,rt,dt,Dt,Pt){Ye!==void 0&&L.push({cmd:"note",pitch:Ye,volume:dt,start:K+Dt*Tt(rt),duration:Tt(Pt),gap:0,instrument:Q})}function Rt(Ye,rt,dt,Dt,Pt){for(var Qt=0;Qt<Ye.length;Qt++)L.push({cmd:"note",pitch:Ye[Qt],volume:dt,start:K+Dt*Tt(rt),duration:Tt(Pt),gap:0,instrument:Q})}var Nt={"2/2":["boom","chick"],"2/4":["boom","chick"],"3/4":["boom","chick","chick"],"4/4":["boom","chick","boom2","chick"],"5/4":["boom","chick","chick","boom2","chick"],"6/8":["boom","","chick","boom2","","chick"],"9/8":["boom","","chick","boom2","","chick","boom2","","chick"],"12/8":["boom","","chick","boom2","","chick","boom","","chick","boom2","","chick"]};function St(Ye,rt){var dt=S.num,Dt=S.den,Pt=1/Dt,Qt=Pt/2,pt=Nt[dt+"/"+Dt],It=parseInt(dt,10)/parseInt(Dt,10),c=It-(rt-Ye)/l;if(Math.abs(c)<1e-5&&(c=!1),!pt||c){pt=[];for(var x=(rt-Ye)/l/Pt,g=0;g<x;g++)pt.push("chick")}if(_e.length===0&&_e.push({beat:0,chord:Me}),_e[0].beat!==0&&Me&&me&&_e.unshift({beat:0,chord:me}),_e.length===1){for(var f=_e[0].beat;f<pt.length;f++)if(!be)switch(pt[f]){case"boom":bt(_e[0].chord.boom,Pt,T,f,Qt);break;case"boom2":bt(_e[0].chord.boom2,Pt,T,f,Qt);break;case"chick":Rt(_e[0].chord.chick,Pt,se,f,Qt);break}return}for(var v=Pt===.125?3:1,k={},A=0;A<_e.length;A++){var O=_e[A],N=Math.round(O.beat*v);k[""+N]=O}for(var D=0;D<pt.length;D++){var V;k[""+D]&&(V=k[""+D]);var F;if(!be&&V)switch(pt[D]){case"boom":k[""+(D+1)]?Rt(V.chord.chick,Pt,se,D,Qt):(bt(V.chord.boom,Pt,T,D,Qt),F=V.chord.boom);break;case"boom2":k[""+(D+1)]?Rt(V.chord.chick,Pt,se,D,Qt):F===V.chord.boom?(bt(V.chord.boom2,Pt,T,D,Qt),F=void 0):(bt(V.chord.boom,Pt,T,D,Qt),F=V.chord.boom);break;case"chick":Rt(V.chord.chick,Pt,se,D,Qt);break;case"":k[""+D]&&Rt(V.chord.chick,Pt,se,D,Qt);break}}}function kn(Ye){if(Ye.pattern.length===0||Ye.on===!1)return{on:!1};for(var rt=Ye.pattern[0],dt=[],Dt="",Pt=0,Qt=0;Qt<rt.length;Qt++)if(rt[Qt]==="d"&&Pt++,rt[Qt]==="d"||rt[Qt]==="z")Dt.length!==0?(dt.push(Dt),Dt=rt[Qt]):Dt=Dt+rt[Qt];else{if(Dt.length===0)return{on:!1};Dt=Dt+rt[Qt]}if(Dt.length!==0&&dt.push(Dt),Ye.pattern.length!==Pt*2+1)return{on:!1};for(var pt={on:!0,bars:Ye.bars,pattern:[]},It=Mn(S),c=0,x=0;x<dt.length;x++){Dt=dt[x];for(var g=1,f=!1,v=0,k=1;k<Dt.length;k++)switch(Dt[k]){case"/":v!==0&&(g*=v),v=0,f=!0;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":v=v*10+Dt[k];break;default:return{on:!1}}f?(v===0&&(v=2),g/=v):v&&(g*=v),Dt[0]==="d"?(pt.pattern.push({len:g*It,pitch:Ye.pattern[1+c],velocity:Ye.pattern[1+c+Pt]}),c++):pt.pattern.push({len:g*It,pitch:null})}for(var A=0,O=S.num/S.den,N=0;N<pt.pattern.length;N++)A+=pt.pattern[N].len;var D=Ye.bars?Ye.bars:1,V=A/D/O;for(N=0;N<pt.pattern.length;N++)pt.pattern[N].len=pt.pattern[N].len/V;return pt}function rn(Ye){if(!(Ze.length===0&&!xe.on)){var rt=S.num/S.den;if(Ze.length===0){if(w<rt)return;Ze.push({cmd:"program",channel:Ye,instrument:q})}if(xe.on)for(var dt=K,Dt=0;Dt<xe.pattern.length;Dt++){var Pt=Tt(xe.pattern[Dt].len);xe.pattern[Dt].pitch&&Ze.push({cmd:"note",pitch:xe.pattern[Dt].pitch,volume:xe.pattern[Dt].velocity,start:dt,duration:Pt,gap:0,instrument:q}),dt+=Pt}}}function rr(Ye,rt){for(var dt={},Dt=0;Dt<Ye.length;Dt++)for(var Pt=0;Pt<Ye[Dt].length;Pt++){var Qt=Ye[Dt][Pt];Qt.cmd==="note"&&(dt[Qt.start]===void 0&&(dt[Qt.start]=[]),dt[Qt.start].push({track:Dt,event:Pt,pitch:Qt.pitch}))}var pt=Object.keys(dt);for(Dt=0;Dt<pt.length;Dt++){var It=dt[pt[Dt]];if(It.length>1){It=It.sort(function(v,k){return v.pitch-k.pitch});var c=It[It.length-1],x=c.pitch%12,g=!1;for(Pt=0;!g&&Pt<It.length-1;Pt++)It[Pt].pitch%12===x&&(g=!0);if(g){var f=Ye[c.track][c.event];f.cents||(f.cents=0),f.cents+=rt}}}}})();rT.exports=iT});var lT=et((Txe,aT)=>{function Vz(t,n){n||(n={});for(var e=!!n.lineBreaks,i=[],r=!1,s=[],a=[],l=[],d=[],u=[],h=[],_=[],b=0;b<t.length;b++){var w=t[b];if(w.staff){if(r&&!w.vskip)for(var S=i[i.length-1],L=0;L<S.staff.length;L++){var R=w.staff[L],z=S.staff[L];if(R&&(pd(R.meter,s[L])||(Rz(R.meter,R.voices),s[L]=R.meter,delete R.meter),pd(R.key,a[L])||(jz(R.key,R.voices),a[L]=R.key,delete R.key),R.title&&(z.abbrevTitle=R.title),pd(R.clef,l[L])||(Gz(R.clef,R.voices),l[L]=R.clef,delete R.clef),pd(R.vocalfont,d[L])||(c_(R.vocalfont,R.voices,"vocalfont"),d[L]=R.vocalfont,delete R.vocalfont),pd(R.gchordfont,u[L])||(c_(R.gchordfont,R.voices,"gchordfont"),u[L]=R.gchordfont,delete R.gchordfont),pd(R.tripletfont,h[L])||(c_(R.tripletfont,R.voices,"tripletfont"),h[L]=R.tripletfont,delete R.tripletfont),pd(R.annotationfont,_[L])||(c_(R.annotationfont,R.voices,"annotationfont"),_[L]=R.annotationfont,delete R.annotationfont)),R)for(var ne=0;ne<z.voices.length;ne++){var Q=z.voices[ne],q=R.voices[ne];e&&Q.push({el_type:"break"}),q&&(z.voices[ne]=Q.concat(q))}}else{for(var T=0;T<w.staff.length;T++)a[T]=w.staff[T].key,s[T]=w.staff[T].meter,l[T]=w.staff[T].clef;i.push(Wz(w))}r=!0}else r=!1,i.push(w)}return i}function sT(t,n){return t==="abselem"?"abselem":n}function Rz(t,n){t.el_type="meter",t.startChar=-1,t.endChar=-1;for(var e=0;e<n.length;e++)n[e].unshift(t)}function jz(t,n){t.el_type="key",t.startChar=-1,t.endChar=-1;for(var e=0;e<n.length;e++)n[e].unshift(t)}function Gz(t,n){t.el_type="clef",t.startChar=-1,t.endChar=-1;for(var e=0;e<n.length;e++)n[e].unshift(t)}function c_(t,n,e){t.el_type="font",t.type=e,t.startChar=-1,t.endChar=-1;for(var i=0;i<n.length;i++)n[i].unshift(t)}function pd(t,n){if(!t)return!0;var e=JSON.stringify(t,sT),i=JSON.stringify(n,sT);return e===i}function Wz(t){for(var n={},e=Object.keys(t),i=0;i<e.length;i++)if(e[i]!=="staff")n[e[i]]=t[e[i]];else{n.staff=[];for(var r=0;r<t.staff.length;r++){for(var s={},a=Object.keys(t.staff[r]),l=0;l<a.length;l++)if(a[l]!=="voices")s[a[l]]=t.staff[r][a[l]];else{s.voices=[];for(var d=0;d<t.staff[r].voices.length;d++)s.voices.push([].concat(t.staff[r].voices[d]))}n.staff.push(s)}}return n}aT.exports=Vz});var Vx=et((Axe,hT)=>{var cT=oo(),dT=No(),zz=Lx(),Uz=oT(),qz=lT(),Hz=function(){this.reset=function(){this.version="1.1.0",this.media="screen",this.metaText={},this.metaTextInfo={},this.formatting={},this.lines=[],this.staffNum=0,this.voiceNum=0,this.lineNum=0,this.runningFonts={},delete this.visualTranspose},this.reset();function t(a,l,d,u){for(var h=0;h<u.length;h++)a[d][u[h]]=l[d][u[h]]}this.copyTopInfo=function(a){var l=["tempo","title","header","rhythm","origin","composer","author","partOrder"];t(this,a,"metaText",l),t(this,a,"metaTextInfo",l)},this.copyBottomInfo=function(a){var l=["unalignedWords","book","source","discography","notes","transcription","history","abc-copyright","abc-creator","abc-edited-by","footer"];t(this,a,"metaText",l),t(this,a,"metaTextInfo",l)},this.getBeatLength=function(){var a=this.getMeterFraction(),l=1;return(a.num===6||a.num===9||a.num===12||a.num===3&&a.den===8)&&(l=3),l/a.den};function n(a,l){for(var d=0,u=0;u<a.length;u++)if(a[u].staff)for(var h=0;h<a[u].staff.length;h++)for(var _=0;_<a[u].staff[h].voices.length;_++)for(var b=a[u].staff[h].voices[_],w=1,S=0;S<b.length;S++){var L=b[S].rest&&b[S].rest.type==="spacer";if(b[S].startTriplet&&(w=b[S].tripletMultiplier),b[S].duration&&!L&&b[S].el_type!=="tempo"&&(d+=b[S].duration*w),b[S].endTriplet&&(w=1),d>=l&&(d-=l),b[S].el_type==="bar")return d}return d}this.getPickupLength=function(){var a=this.getBarLength(),l=n(this.lines,a);return l<1e-8||a-l<1e-8?0:l},this.getBarLength=function(){var a=this.getMeterFraction();return a.num/a.den},this.getTotalTime=function(){return this.totalTime},this.getTotalBeats=function(){return this.totalBeats},this.millisecondsPerMeasure=function(a){var l;if(a)l=a;else{var d=this.metaText?this.metaText.tempo:null;l=this.getBpm(d)}l<=0&&(l=1);var u=this.getBeatsPerMeasure(),h=u/l;return h*6e4},this.getBeatsPerMeasure=function(){var a=this.getBeatLength(),l=this.getBarLength();return l/a},this.getMeter=function(){for(var a=0;a<this.lines.length;a++){var l=this.lines[a];if(l.staff)for(var d=0;d<l.staff.length;d++){var u=l.staff[d].meter;if(u)return u}}return{type:"common_time"}},this.getMeterFraction=function(){var a=this.getMeter(),l=4,d=4;return a&&(a.type==="specified"?(l=parseInt(a.value[0].num,10),d=parseInt(a.value[0].den,10)):a.type==="cut_time"?(l=2,d=2):a.type==="common_time"&&(l=4,d=4)),this.meter={num:l,den:d},this.meter},this.getKeySignature=function(){for(var a=0;a<this.lines.length;a++){var l=this.lines[a];if(l.staff){for(var d=0;d<l.staff.length;d++)if(l.staff[d].key)return l.staff[d].key}}return{}},this.getElementFromChar=function(a){for(var l=0;l<this.lines.length;l++){var d=this.lines[l];if(d.staff)for(var u=0;u<d.staff.length;u++)for(var h=d.staff[u],_=0;_<h.voices.length;_++)for(var b=h.voices[_],w=0;w<b.length;w++){var S=b[w];if(S.startChar&&S.endChar&&S.startChar<=a&&S.endChar>a)return S}}return null};function e(a){for(var l,d,u,h,_=a.length-1;_>=0;_--){var b=a[_];b.type==="bar"?(b.top=u,b.nextTop=l,l=u,b.bottom=h,b.nextBottom=d,d=h):b.type==="event"&&(u=b.top,h=b.top+b.height)}}function i(a){var l=[];for(var d in a)a.hasOwnProperty(d)&&l.push(a[d]);return l=l.sort(function(u,h){var _=u.milliseconds-h.milliseconds;return _!==0?_:u.type==="bar"?-1:1}),l}this.addElementToEvents=function(a,l,d,u,h,_,b,w,S,L){if(l.hint)return{isTiedState:void 0,duration:0};var R=l.durationClass?l.durationClass:l.duration;if(l.abcelem.rest&&l.abcelem.rest.type==="spacer"&&(R=0),R>0){for(var z=[],ne=0;ne<l.elemset.length;ne++)l.elemset[ne]!==null&&z.push(l.elemset[ne]);var Q=l.startTie;if(S!==void 0)a["event"+S].elements.push(z),L&&(a["event"+d]||(a["event"+d]={type:"event",milliseconds:d,line:_,measureNumber:b,top:u,height:h,left:null,width:0,elements:[],startChar:null,endChar:null,startCharArray:[],endCharArray:[]}),a["event"+d].measureStart=!0,L=!1),Q||(S=void 0);else{if(!a["event"+d])a["event"+d]={type:"event",milliseconds:d,line:_,measureNumber:b,top:u,height:h,left:l.x,width:l.w,elements:[z],startChar:l.abcelem.startChar,endChar:l.abcelem.endChar,startCharArray:[l.abcelem.startChar],endCharArray:[l.abcelem.endChar],midiPitches:l.abcelem.midiPitches?cT.cloneArray(l.abcelem.midiPitches):[]},l.abcelem.midiGraceNotePitches&&(a["event"+d].midiGraceNotePitches=cT.cloneArray(l.abcelem.midiGraceNotePitches));else{if(a["event"+d].left?a["event"+d].left=Math.min(a["event"+d].left,l.x):a["event"+d].left=l.x,a["event"+d].elements.push(z),a["event"+d].startCharArray.push(l.abcelem.startChar),a["event"+d].endCharArray.push(l.abcelem.endChar),a["event"+d].startChar===null&&(a["event"+d].startChar=l.abcelem.startChar),a["event"+d].endChar===null&&(a["event"+d].endChar=l.abcelem.endChar),l.abcelem.midiPitches&&l.abcelem.midiPitches.length){a["event"+d].midiPitches||(a["event"+d].midiPitches=[]);for(var ne=0;ne<l.abcelem.midiPitches.length;ne++)a["event"+d].midiPitches.push(l.abcelem.midiPitches[ne])}if(l.abcelem.midiGraceNotePitches&&l.abcelem.midiGraceNotePitches.length){a["event"+d].midiGraceNotePitches||(a["event"+d].midiGraceNotePitches=[]);for(var q=0;q<l.abcelem.midiGraceNotePitches.length;q++)a["event"+d].midiGraceNotePitches.push(l.abcelem.midiGraceNotePitches[q])}}L&&(a["event"+d].measureStart=!0,L=!1),Q&&(S=d)}}return{isTiedState:S,duration:R/w,nextIsBar:L||l.type==="bar"}},this.makeVoicesArray=function(){for(var a=[],l=[],d={},u=0;u<this.engraver.staffgroups.length;u++){var h=this.engraver.staffgroups[u];if(h&&h.staffs&&h.staffs.length>0){var _=h.staffs[0],b=_.absoluteY,w=b-_.top*dT.STEP,S=h.staffs[h.staffs.length-1];b=S.absoluteY;for(var L=b-S.bottom*dT.STEP,R=L-w,z=h.voices,ne=0;ne<z.length;ne++){var Q=!1;a[ne]||(a[ne]=[]),l[ne]===void 0&&(l[ne]=0);for(var q=z[ne].children,T=0;T<q.length;T++)q[T].type==="tempo"&&(d[l[ne]]=this.getBpm(q[T].abcelem)),a[ne].push({top:w,height:R,line:h.line,measureNumber:l[ne],elem:q[T]}),q[T].type==="bar"&&Q&&l[ne]++,(q[T].type==="note"||q[T].type==="rest")&&(Q=!0)}}}return this.tempoLocations=d,a},this.setupEvents=function(a,l,d,u){u||(u=1);for(var h=[],_={},b=a,w,S=!0,L=this.makeVoicesArray(),R=0,z=0;z<L.length;z++){var ne=b,Q=Math.round(ne*1e3),q=0,T=-1,se=L[z],_e=d;l=this.getBeatLength()*_e/60;for(var Me=-1,me=0;me<se.length;me++){var K=se[me].measureNumber;Me!==K&&this.tempoLocations[K]&&(_e=this.tempoLocations[K],l=u*this.getBeatLength()*_e/60,Me=K);var ue=se[me].elem,be=this.addElementToEvents(_,ue,Q,se[me].top,se[me].height,se[me].line,se[me].measureNumber,l,w,S);w=be.isTiedState,S=be.nextIsBar,ne+=be.duration;var Z;if(ue.duration>0&&_["event"+Q]&&(Z="event"+Q),Q=Math.round(ne*1e3),ue.type==="bar"){var oe=ue.abcelem.type,Ee=oe==="bar_right_repeat"||oe==="bar_dbl_repeat",Y=ue.abcelem.startEnding==="1",G=oe==="bar_left_repeat"||oe==="bar_dbl_repeat"||oe==="bar_right_repeat";if(Ee){me>0&&(_[Z].endX=ue.x),T===-1&&(T=me);var le=0;Me=-1;for(var X=q;X<T;X++){K=se[X].measureNumber,Me!==K&&this.tempoLocations[K]&&(_e=this.tempoLocations[K],l=u*this.getBeatLength()*_e/60,Me=K);var Ue=se[X].elem;be=this.addElementToEvents(_,Ue,Q,se[X].top,se[X].height,se[X].line,se[X].measureNumber,l,w,S),w=be.isTiedState,S=be.nextIsBar,ne+=be.duration,le=Q,Q=Math.round(ne*1e3)}_["event"+le]&&(_["event"+le].endX=se[T].elem.x),S=!0,T=-1}Y&&(T=me),G&&(q=me)}}R=Math.max(R,Q)}return h=i(_),e(h),s(this.lines,h),h.push({type:"end",milliseconds:R}),this.addUsefulCallbackInfo(h,_e*u),h},this.addUsefulCallbackInfo=function(a,l){for(var d=this.millisecondsPerMeasure(l),u=0;u<a.length;u++){var h=a[u];h.millisecondsPerMeasure=d}};function r(a,l){for(;l<a.length&&a[l].left===null;)l++;return a[l]}function s(a,l){if(!(l.length<1)){for(var d=0;d<l.length-1;d++){var u=l[d],h=r(l,d+1);if(u.left!==null){var _=h&&u.top===h.top?h.left:a[u.line].staffGroup.w;u.endX!==void 0?_>u.left&&(u.endX=Math.min(u.endX,_)):u.endX=_}}var b=l[l.length-1];b.endX=a[b.line].staffGroup.w}}this.getBpm=function(a){var l;if(a){l=a.bpm;var d=this.getBeatLength(),u=a.duration&&a.duration.length>0?a.duration[0]:d;l=l*u/d}if(!l){l=180;var h=this.getMeterFraction();h&&h.num!==3&&h.num%3===0&&(l=120)}return l},this.setTiming=function(a,l){if(l=l||0,!this.engraver||!this.engraver.staffgroups){console.log("setTiming cannot be called before the tune is drawn."),this.noteTimings=[];return}var d=this.metaText?this.metaText.tempo:null,u=this.getBpm(d),h=1;a?d&&(h=a/u):a=u;var _=this.getBeatLength(),b=a/60,w=this.getBarLength(),S=w/_*l/b;S&&(S-=this.getPickupLength()/_/b);var L=_*b;return this.noteTimings=this.setupEvents(S,L,a,h),this.noteTimings.length>0?(this.totalTime=this.noteTimings[this.noteTimings.length-1].milliseconds/1e3,this.totalBeats=this.totalTime*b):(this.totalTime=void 0,this.totalBeats=void 0),this.noteTimings},this.setUpAudio=function(a){a||(a={});var l=zz(this,a);return Uz(l,a,this.formatting.percmap)},this.deline=function(a){return qz(this.lines,a)}};hT.exports=Hz});var pT=et((Dxe,uT)=>{var Yz=s_(),Dr=oo(),Xz=function(t){var n=this;this.setVisualTranspose=function(r){r&&(t.visualTranspose=r)},this.resolveOverlays=function(){for(var r=!1,s=[],a=0;a<t.lines.length;a++){var l=t.lines[a];if(l.staff)for(var d=0;d<l.staff.length;d++){for(var u=l.staff[d],h=[],_=0;_<u.voices.length;_++){var b=u.voices[_];h.push({hasOverlay:!1,voice:[],snip:[]}),s[a]=0;for(var w=0,S=!1,L=0,R=-1,z=0;z<b.length;z++){var ne=b[z];if(ne.el_type==="overlay"&&!S){r=!0,S=!0,R=z,h[_].hasOverlay=!0,L===0&&(L=s[a]);for(var Q=0;Q<a;Q++)s[Q]&&t.lines[Q].staff&&u.voices.length>=t.lines[Q].staff[0].voices.length&&t.lines[Q].staff[0].voices.push([{el_type:"note",duration:s[Q],rest:{type:"invisible"},startChar:ne.startChar,endChar:ne.endChar}])}else ne.el_type==="bar"?(S?(S=!1,h[_].snip.push({start:R,len:z-R}),h[_].voice.push(ne)):(w>0&&h[_].voice.push({el_type:"note",duration:w,rest:{type:"invisible"},startChar:ne.startChar,endChar:ne.endChar}),h[_].voice.push(ne)),w=0):ne.el_type==="note"?S?h[_].voice.push(ne):(w+=ne.duration,s[a]+=ne.duration):(ne.el_type==="scale"||ne.el_type==="stem"||ne.el_type==="overlay"||ne.el_type==="style"||ne.el_type==="transpose")&&h[_].voice.push(ne)}h[_].hasOverlay&&h[_].snip.length===0&&h[_].snip.push({start:R,len:b.length-R})}for(_=0;_<h.length;_++){var q=h[_];if(q.hasOverlay){q.voice.splice(0,0,{el_type:"stem",direction:"down"}),u.voices.push(q.voice);for(var T=q.snip.length-1;T>=0;T--){var se=q.snip[T];u.voices[_].splice(se.start,se.len),u.voices[_].splice(se.start+1,0,{el_type:"stem",direction:"auto"});var _e=e(u.voices[_],se.start);u.voices[_].splice(_e,0,{el_type:"stem",direction:"up"})}for(T=0;T<u.voices[u.voices.length-1].length;T++){u.voices[u.voices.length-1][T]=Dr.clone(u.voices[u.voices.length-1][T]);var Me=u.voices[u.voices.length-1][T];Me.el_type==="bar"&&Me.startEnding&&delete Me.startEnding,Me.el_type==="bar"&&Me.endEnding&&delete Me.endEnding}}}}}return r};function e(r,s){for(var a=s-1;a>0&&r[a].el_type!=="bar";a--);return a}function i(r){for(var s=!0,a=0;a<r.length;a++){var l=r[a];if(l.staff){for(var d=0;d<l.staff.length;d++){var u=l.staff[d];if(u.title){for(var h=!1,_=0;_<u.title.length;_++)u.title[_]?(u.title[_]=s?u.title[_].name:u.title[_].subname,u.title[_]?h=!0:u.title[_]=""):u.title[_]="";h||delete u.title}}s=!1}}}this.cleanUp=function(r,s,a){this.closeLine(),delete t.runningFonts,t.metaText.tempo&&t.metaText.tempo.bpm&&!t.metaText.tempo.duration&&(t.metaText.tempo.duration=[t.getBeatLength()]);var l=!1,d,u,h;for(d=0;d<t.lines.length;d++)if(t.lines[d].staff!==void 0){var _=!1;for(u=0;u<t.lines[d].staff.length;u++)if(t.lines[d].staff[u]===void 0)l=!0,t.lines[d].staff[u]=null;else for(h=0;h<t.lines[d].staff[u].voices.length;h++)t.lines[d].staff[u].voices[h]===void 0?t.lines[d].staff[u].voices[h]=[]:this.containsNotes(t.lines[d].staff[u].voices[h])&&(_=!0);_||(t.lines[d]=null,l=!0)}if(l&&(t.lines=Dr.compact(t.lines),Dr.each(t.lines,function(T){T.staff&&(T.staff=Dr.compact(T.staff))})),r)for(;L(t.lines,r););if(s){for(l=!1,d=0;d<t.lines.length;d++)if(t.lines[d].staff!==void 0)for(u=0;u<t.lines[d].staff.length;u++){var b=!1;for(h=0;h<t.lines[d].staff[u].voices.length;h++)this.containsNotesStrict(t.lines[d].staff[u].voices[h])&&(b=!0);b||(l=!0,t.lines[d].staff[u]=null)}l&&Dr.each(t.lines,function(T){T.staff&&(T.staff=Dr.compact(T.staff))})}for(i(t.lines),d=0;d<t.lines.length;d++)if(t.lines[d].staff)for(u=0;u<t.lines[d].staff.length;u++)delete t.lines[d].staff[u].workingClef;for(;this.resolveOverlays(););function w(T,se,_e){a[se]||(a[se]=[]),a[se][_e]||(a[se][_e]=[]);for(var Me,me=function(Ze,De,xe){if(a[se][_e][xe]===void 0){for(Me=0;Me<a[se][_e].length;Me++)if(a[se][_e][Me]!==void 0){xe=Me;break}if(a[se][_e][xe]===void 0){var ke=xe*100+1;Dr.each(Ze.endSlur,function(Je){ke===Je&&--ke}),a[se][_e][xe]=[ke]}}for(var Ve,it=0;it<De;it++)Ve=a[se][_e][xe].pop(),Ze.endSlur.push(Ve);return a[se][_e][xe].length===0&&delete a[se][_e][xe],Ve},K=function(Ze,De,xe,ke){Ze.startSlur=[],a[se][_e][xe]===void 0&&(a[se][_e][xe]=[]);for(var Ve=xe*100+1,it=0;it<De;it++)ke&&(Dr.each(ke,function(Je){Ve===Je&&++Ve}),Dr.each(ke,function(Je){Ve===Je&&++Ve}),Dr.each(ke,function(Je){Ve===Je&&++Ve})),Dr.each(a[se][_e][xe],function(Je){Ve===Je&&++Ve}),Dr.each(a[se][_e][xe],function(Je){Ve===Je&&++Ve}),a[se][_e][xe].push(Ve),Ze.startSlur.push({label:Ve}),Ze.dottedSlur&&(Ze.startSlur[Ze.startSlur.length-1].style="dotted",delete Ze.dottedSlur),Ve++},ue=0;ue<T.length;ue++){var be=T[ue];if(be.el_type==="note"){if(be.gracenotes)for(var Z=0;Z<be.gracenotes.length;Z++){if(be.gracenotes[Z].endSlur){var oe=be.gracenotes[Z].endSlur;be.gracenotes[Z].endSlur=[];for(var Ee=0;Ee<oe;Ee++)me(be.gracenotes[Z],1,20)}be.gracenotes[Z].startSlur&&(Me=be.gracenotes[Z].startSlur,K(be.gracenotes[Z],Me,20))}if(be.endSlur&&(Me=be.endSlur,be.endSlur=[],me(be,Me,0)),be.startSlur&&(Me=be.startSlur,K(be,Me,0)),be.pitches){for(var Y=[],G=0;G<be.pitches.length;G++)if(be.pitches[G].endSlur){var le=be.pitches[G].endSlur;be.pitches[G].endSlur=[];for(var X=0;X<le;X++){var Ue=me(be.pitches[G],1,G+1);Y.push(Ue)}}for(G=0;G<be.pitches.length;G++)be.pitches[G].startSlur&&(Me=be.pitches[G].startSlur,K(be.pitches[G],Me,G+1,Y));be.gracenotes&&be.pitches[0].endSlur&&be.pitches[0].endSlur[0]===100&&be.pitches[0].startSlur&&(be.gracenotes[0].endSlur?be.gracenotes[0].endSlur.push(be.pitches[0].startSlur[0].label):be.gracenotes[0].endSlur=[be.pitches[0].startSlur[0].label],be.pitches[0].endSlur.length===1?delete be.pitches[0].endSlur:be.pitches[0].endSlur[0]===100?be.pitches[0].endSlur.shift():be.pitches[0].endSlur[be.pitches[0].endSlur.length-1]===100&&be.pitches[0].endSlur.pop(),a[se][_e][1].length===1?delete a[se][_e][1]:a[se][_e][1].pop())}}}}function S(T){Yz.fixClef(T)}function L(T,se){for(d=0;d<T.length;d++)if(T[d].staff!==void 0)for(u=0;u<T[d].staff.length;u++){var _e=[];for(h=0;h<T[d].staff[u].voices.length;h++)for(var Me=T[d].staff[u].voices[h],me=0,K=0;K<Me.length;K++)if(Me[K].el_type==="bar"){if(me++,me>=se&&K<Me.length-1){var ue=R(T,d);if(!ue){var be=JSON.parse(JSON.stringify(T[d]));T.push(Dr.clone(be)),ue=T[T.length-1];for(var Z=0;Z<ue.staff.length;Z++)for(var oe=0;oe<ue.staff[Z].voices.length;oe++)ue.staff[Z].voices[oe]=[]}var Ee=K+1,Y=T[d].staff[u].voices[h].slice(Ee);return T[d].staff[u].voices[h]=T[d].staff[u].voices[h].slice(0,Ee),ue.staff[u].voices[h]=_e.concat(Y.concat(ue.staff[u].voices[h])),!0}}else Me[K].duration||_e.push(Me[K])}return!1}function R(T,se){for(se++;T.length>se;){if(T[se].staff)return T[se];se++}return null}for(t.lineNum=0;t.lineNum<t.lines.length;t.lineNum++){var z=t.lines[t.lineNum].staff;if(z)for(t.staffNum=0;t.staffNum<z.length;t.staffNum++)for(z[t.staffNum].clef&&S(z[t.staffNum].clef),t.voiceNum=0;t.voiceNum<z[t.staffNum].voices.length;t.voiceNum++){var ne=z[t.staffNum].voices[t.voiceNum];w(ne,t.staffNum,t.voiceNum);for(var Q=0;Q<ne.length;Q++)ne[Q].el_type==="clef"&&S(ne[Q]);if(ne.length>0&&ne[ne.length-1].barNumber){var q=R(t.lines,t.lineNum);q&&(q.staff[0].barNumber=ne[ne.length-1].barNumber),delete ne[ne.length-1].barNumber}}}return delete t.staffNum,delete t.voiceNum,delete t.lineNum,delete t.potentialStartBeam,delete t.potentialEndBeam,delete t.vskipPending,a},t.reset(),this.getLastNote=function(){if(t.lines[t.lineNum]&&t.lines[t.lineNum].staff&&t.lines[t.lineNum].staff[t.staffNum]&&t.lines[t.lineNum].staff[t.staffNum].voices[t.voiceNum])for(var r=t.lines[t.lineNum].staff[t.staffNum].voices[t.voiceNum].length-1;r>=0;r--){var s=t.lines[t.lineNum].staff[t.staffNum].voices[t.voiceNum][r];if(s.el_type==="note")return s}return null},this.addTieToLastNote=function(r){var s=this.getLastNote();return s&&s.pitches&&s.pitches.length>0?(s.pitches[0].startTie={},r&&(s.pitches[0].startTie.style="dotted"),!0):!1},this.getDuration=function(r){return r.duration?r.duration:0},this.closeLine=function(){t.potentialStartBeam&&t.potentialEndBeam&&(t.potentialStartBeam.startBeam=!0,t.potentialEndBeam.endBeam=!0),delete t.potentialStartBeam,delete t.potentialEndBeam},this.appendElement=function(r,s,a,l){var d=t,u=function(w){var S=d.lines[d.lineNum].staff[d.staffNum];if(S){if(w.pitches!==void 0){var L=S.workingClef.verticalPos;Dr.each(w.pitches,function(z){z.verticalPos=z.pitch-L})}if(w.gracenotes!==void 0){var R=S.workingClef.verticalPos;Dr.each(w.gracenotes,function(z){z.verticalPos=z.pitch-R})}S.voices[d.voiceNum].push(w)}};l.el_type=r,s!==null&&(l.startChar=s),a!==null&&(l.endChar=a);var h=function(){d.potentialStartBeam.startBeam=!0,l.endBeam=!0,delete d.potentialStartBeam,delete d.potentialEndBeam},_=function(){d.potentialStartBeam!==void 0&&d.potentialEndBeam!==void 0&&(d.potentialStartBeam.startBeam=!0,d.potentialEndBeam.endBeam=!0),delete d.potentialStartBeam,delete d.potentialEndBeam};if(r==="note"){var b=n.getDuration(l);b>=.25||l.force_end_beam_last&&d.potentialStartBeam!==void 0?_():l.end_beam&&d.potentialStartBeam!==void 0?l.rest===void 0?h():_():l.rest===void 0&&(d.potentialStartBeam===void 0?l.end_beam||(d.potentialStartBeam=l,delete d.potentialEndBeam):d.potentialEndBeam=l)}else _();delete l.end_beam,delete l.force_end_beam_last,u(l)},this.appendStartingElement=function(r,s,a,l){this.closeLine();var d;r==="key"&&(d=l.impliedNaturals,delete l.impliedNaturals,delete l.explicitAccidentals);var u=Dr.clone(l);if(t.lines[t.lineNum]&&t.lines[t.lineNum].staff){t.lines[t.lineNum].staff.length<=t.staffNum&&(t.lines[t.lineNum].staff[t.staffNum]={},t.lines[t.lineNum].staff[t.staffNum].clef=Dr.clone(t.lines[t.lineNum].staff[0].clef),t.lines[t.lineNum].staff[t.staffNum].key=Dr.clone(t.lines[t.lineNum].staff[0].key),t.lines[t.lineNum].staff[0].meter&&(t.lines[t.lineNum].staff[t.staffNum].meter=Dr.clone(t.lines[t.lineNum].staff[0].meter)),t.lines[t.lineNum].staff[t.staffNum].workingClef=Dr.clone(t.lines[t.lineNum].staff[0].workingClef),t.lines[t.lineNum].staff[t.staffNum].voices=[[]]),r==="clef"&&(t.lines[t.lineNum].staff[t.staffNum].workingClef=u);for(var h=t.lines[t.lineNum].staff[t.staffNum].voices[t.voiceNum],_=0;_<h.length;_++){if(h[_].el_type==="note"||h[_].el_type==="bar"){u.el_type=r,u.startChar=s,u.endChar=a,d&&(u.accidentals=d.concat(u.accidentals)),h.push(u);return}if(h[_].el_type===r){u.el_type=r,u.startChar=s,u.endChar=a,d&&(u.accidentals=d.concat(u.accidentals)),h[_]=u;return}}t.lines[t.lineNum].staff[t.staffNum][r]=l}},this.pushLine=function(r){t.vskipPending&&(r.vskip=t.vskipPending,delete t.vskipPending),t.lines.push(r)},this.addSubtitle=function(r,s){this.pushLine({subtitle:{text:r,startChar:s.startChar,endChar:s.endChar}})},this.addSpacing=function(r){t.vskipPending=r},this.addNewPage=function(r){this.pushLine({newpage:r})},this.addSeparator=function(r,s,a,l){this.pushLine({separator:{spaceAbove:Math.round(r),spaceBelow:Math.round(s),lineLength:Math.round(a),startChar:l.startChar,endChar:l.endChar}})},this.addText=function(r,s){this.pushLine({text:{text:r,startChar:s.startChar,endChar:s.endChar}})},this.addCentered=function(r){this.pushLine({text:[{text:r,center:!0}]})},this.containsNotes=function(r){for(var s=0;s<r.length;s++)if(r[s].el_type==="note"||r[s].el_type==="bar")return!0;return!1},this.containsNotesStrict=function(r){for(var s=0;s<r.length;s++)if(r[s].el_type==="note"&&(r[s].rest===void 0||r[s].chord!==void 0))return!0;return!1},this.changeVoiceScale=function(r){n.appendElement("scale",null,null,{size:r})},this.startNewLine=function(r){var s=t;this.closeLine();var a=function(u){var h=s.lines[s.lineNum].staff[s.staffNum];if(h.voices[s.voiceNum]=[],h.title||(h.title=[]),h.title[s.voiceNum]={name:u.name,subname:u.subname},u.style&&n.appendElement("style",null,null,{head:u.style}),u.stem)n.appendElement("stem",null,null,{direction:u.stem});else if(s.voiceNum>0){if(h.voices[0]!==void 0){for(var _=!1,b=0;b<h.voices[0].length;b++)h.voices[0].el_type==="stem"&&(_=!0);if(!_){var w={el_type:"stem",direction:"up"};h.voices[0].splice(0,0,w)}}n.appendElement("stem",null,null,{direction:"down"})}u.scale&&n.appendElement("scale",null,null,{size:u.scale})},l=function(u){u.key&&u.key.impliedNaturals&&(u.key.accidentals=u.key.accidentals.concat(u.key.impliedNaturals),delete u.key.impliedNaturals),s.lines[s.lineNum].staff[s.staffNum]={voices:[],clef:u.clef,key:u.key,workingClef:u.clef},u.stafflines!==void 0&&(s.lines[s.lineNum].staff[s.staffNum].clef.stafflines=u.stafflines,s.lines[s.lineNum].staff[s.staffNum].workingClef.stafflines=u.stafflines),u.staffscale&&(s.lines[s.lineNum].staff[s.staffNum].staffscale=u.staffscale),u.annotationfont&&n.setLineFont("annotationfont",u.annotationfont),u.gchordfont&&n.setLineFont("gchordfont",u.gchordfont),u.tripletfont&&n.setLineFont("tripletfont",u.tripletfont),u.vocalfont&&n.setLineFont("vocalfont",u.vocalfont),u.bracket&&(s.lines[s.lineNum].staff[s.staffNum].bracket=u.bracket),u.brace&&(s.lines[s.lineNum].staff[s.staffNum].brace=u.brace),u.connectBarLines&&(s.lines[s.lineNum].staff[s.staffNum].connectBarLines=u.connectBarLines),u.barNumber&&(s.lines[s.lineNum].staff[s.staffNum].barNumber=u.barNumber),a(u),u.part&&n.appendElement("part",u.part.startChar,u.part.endChar,{title:u.part.title}),u.meter!==void 0&&(s.lines[s.lineNum].staff[s.staffNum].meter=u.meter),s.vskipPending&&(s.lines[s.lineNum].vskip=s.vskipPending,delete s.vskipPending)},d=function(u){s.lines[s.lineNum]={staff:[]},l(u)};t.lines[t.lineNum]===void 0?d(r):t.lines[t.lineNum].staff===void 0?(t.lineNum++,this.startNewLine(r)):t.lines[t.lineNum].staff[t.staffNum]===void 0?l(r):t.lines[t.lineNum].staff[t.staffNum].voices[t.voiceNum]===void 0?a(r):this.containsNotes(t.lines[t.lineNum].staff[t.staffNum].voices[t.voiceNum])?(t.lineNum++,this.startNewLine(r)):r.part&&n.appendElement("part",r.part.startChar,r.part.endChar,{title:r.part.title})},this.setRunningFont=function(r,s){t.runningFonts[r]=s},this.setLineFont=function(r,s){if(t.runningFonts[r]){for(var a=!1,l=Object.keys(s),d=0;d<l.length;d++)t.runningFonts[r][l[d]]!==s[l[d]]&&(a=!0);a&&(t.lines[t.lineNum].staff[t.staffNum][r]=s)}t.runningFonts[r]=s},this.setBarNumberImmediate=function(r){var s=this.getCurrentVoice();if(s&&s.length>0){var a=s[s.length-1];if(a.el_type==="bar")a.barNumber!==void 0&&(a.barNumber=r);else return r-1}return r},this.hasBeginMusic=function(){for(var r=0;r<t.lines.length;r++)if(t.lines[r].staff)return!0;return!1},this.isFirstLine=function(r){for(var s=r-1;s>=0;s--)if(t.lines[s].staff!==void 0)return!1;return!0},this.getCurrentVoice=function(){var r=t.lines[t.lineNum];if(!r)return null;var s=r.staff[t.staffNum];return s&&s.voices[t.voiceNum]!==void 0?s.voices[t.voiceNum]:null},this.setCurrentVoice=function(r,s){t.staffNum=r,t.voiceNum=s;for(var a=0;a<t.lines.length;a++)if(t.lines[a].staff&&(t.lines[a].staff[r]===void 0||t.lines[a].staff[r].voices[s]===void 0||!this.containsNotes(t.lines[a].staff[r].voices[s]))){t.lineNum=a;return}t.lineNum=a},this.addMetaText=function(r,s,a){t.metaText[r]===void 0?(t.metaText[r]=s,t.metaTextInfo[r]=a):(t.metaText[r]+=`
`+s,t.metaTextInfo[r].endChar=a.endChar)},this.addMetaTextArray=function(r,s,a){t.metaText[r]===void 0?(t.metaText[r]=[s],t.metaTextInfo[r]=a):(t.metaText[r].push(s),t.metaTextInfo[r].endChar=a.endChar)},this.addMetaTextObj=function(r,s,a){t.metaText[r]=s,t.metaTextInfo[r]=a}};uT.exports=Xz});var Rx=et((Ixe,mT)=>{var so=oo(),fT=Zg(),Jz=L5(),Qz=X5(),$z=Q5(),Kz=Bx(),Zz=Vx(),eU=pT(),tU=function(){"use strict";var t=new Zz,n=new eU(t),e,i="",r="";this.getTune=function(){var q={formatting:t.formatting,lines:t.lines,media:t.media,metaText:t.metaText,metaTextInfo:t.metaTextInfo,version:t.version,addElementToEvents:t.addElementToEvents,addUsefulCallbackInfo:t.addUsefulCallbackInfo,getTotalTime:t.getTotalTime,getTotalBeats:t.getTotalBeats,getBarLength:t.getBarLength,getBeatLength:t.getBeatLength,getBeatsPerMeasure:t.getBeatsPerMeasure,getBpm:t.getBpm,getMeter:t.getMeter,getMeterFraction:t.getMeterFraction,getPickupLength:t.getPickupLength,getKeySignature:t.getKeySignature,getElementFromChar:t.getElementFromChar,makeVoicesArray:t.makeVoicesArray,millisecondsPerMeasure:t.millisecondsPerMeasure,setupEvents:t.setupEvents,setTiming:t.setTiming,setUpAudio:t.setUpAudio,deline:t.deline};return t.lineBreaks&&(q.lineBreaks=t.lineBreaks),t.visualTranspose&&(q.visualTranspose=t.visualTranspose),q};function s(q,T,se){q.positioning||(q.positioning={}),q.positioning[T]=se}function a(q,T,se){q.fonts||(q.fonts={}),q.fonts[T]=se}var l={reset:function(){for(var q in this)this.hasOwnProperty(q)&&typeof this[q]!="function"&&delete this[q];this.iChar=0,this.key={accidentals:[],root:"none",acc:"",mode:""},this.meter=null,this.origMeter=null,this.hasMainTitle=!1,this.default_length=.125,this.clef={type:"treble",verticalPos:0},this.next_note_duration=0,this.start_new_line=!0,this.is_in_header=!0,this.partForNextLine={},this.tempoForNextLine=[],this.havent_set_length=!0,this.voices={},this.staves=[],this.macros={},this.currBarNumber=1,this.barCounter={},this.ignoredDecorations=[],this.score_is_present=!1,this.inEnding=!1,this.inTie=[],this.inTieChord={},this.vocalPosition="auto",this.dynamicPosition="auto",this.chordPosition="auto",this.ornamentPosition="auto",this.volumePosition="auto",this.openSlurs=[],this.freegchord=!1,this.endingHoldOver={}},differentFont:function(q,T){return this[q].decoration!==T[q].decoration||this[q].face!==T[q].face||this[q].size!==T[q].size||this[q].style!==T[q].style||this[q].weight!==T[q].weight},addFormattingOptions:function(q,T,se){se==="note"?(this.vocalPosition!=="auto"&&s(q,"vocalPosition",this.vocalPosition),this.dynamicPosition!=="auto"&&s(q,"dynamicPosition",this.dynamicPosition),this.chordPosition!=="auto"&&s(q,"chordPosition",this.chordPosition),this.ornamentPosition!=="auto"&&s(q,"ornamentPosition",this.ornamentPosition),this.volumePosition!=="auto"&&s(q,"volumePosition",this.volumePosition),this.differentFont("annotationfont",T)&&a(q,"annotationfont",this.annotationfont),this.differentFont("gchordfont",T)&&a(q,"gchordfont",this.gchordfont),this.differentFont("vocalfont",T)&&a(q,"vocalfont",this.vocalfont),this.differentFont("tripletfont",T)&&a(q,"tripletfont",this.tripletfont)):se==="bar"&&(this.dynamicPosition!=="auto"&&s(q,"dynamicPosition",this.dynamicPosition),this.chordPosition!=="auto"&&s(q,"chordPosition",this.chordPosition),this.ornamentPosition!=="auto"&&s(q,"ornamentPosition",this.ornamentPosition),this.volumePosition!=="auto"&&s(q,"volumePosition",this.volumePosition),this.differentFont("measurefont",T)&&a(q,"measurefont",this.measurefont),this.differentFont("repeatfont",T)&&a(q,"repeatfont",this.repeatfont))},duplicateStartEndingHoldOvers:function(){this.endingHoldOver={inTie:[],inTieChord:{}};for(var q=0;q<this.inTie.length;q++)if(this.endingHoldOver.inTie.push([]),this.inTie[q])for(var T=0;T<this.inTie[q].length;T++)this.endingHoldOver.inTie[q].push(this.inTie[q][T]);for(var se in this.inTieChord)this.inTieChord.hasOwnProperty(se)&&(this.endingHoldOver.inTieChord[se]=this.inTieChord[se])},restoreStartEndingHoldOvers:function(){if(this.endingHoldOver.inTie){this.inTie=[],this.inTieChord={};for(var q=0;q<this.endingHoldOver.inTie.length;q++){this.inTie.push([]);for(var T=0;T<this.endingHoldOver.inTie[q].length;T++)this.inTie[q].push(this.endingHoldOver.inTie[q][T])}for(var se in this.endingHoldOver.inTieChord)this.endingHoldOver.inTieChord.hasOwnProperty(se)&&(this.inTieChord[se]=this.endingHoldOver.inTieChord[se])}}},d=function(q){l.warnings||(l.warnings=[]),l.warnings.push(q)},u=function(q){l.warningObjects||(l.warningObjects=[]),l.warningObjects.push(q)},h=function(q){var T=so.gsub(q,""," ");return T=so.gsub(T,"&","&amp;"),T=so.gsub(T,"<","&lt;"),so.gsub(T,">","&gt;")},_=function(q,T,se){T||(T=" ");var _e=T.charAt(se);_e===" "&&(_e="SPACE");var Me=h(T.substring(se-64,se))+'<span style="text-decoration:underline;font-size:1.3em;font-weight:bold;">'+_e+"</span>"+h(T.substring(se+1).substring(0,64));d("Music Line:"+e.lineIndex+":"+(se+1)+": "+q+":  "+Me),u({message:q,line:T,startChar:l.iChar+se,column:se})},b,w;this.getWarnings=function(){return l.warnings},this.getWarningObjects=function(){return l.warningObjects};var S=function(q,T){if(T.indexOf("")>=0){i+=T;return}if(T=i+T,i="",!q){_("Can't add words before the first line of music",q,0);return}T=so.strip(T),T.charAt(T.length-1)!=="-"&&(T=T+" ");for(var se=[],_e=0,Me=!1,me=function(Z){var oe=so.strip(T.substring(_e,Z));if(oe=oe.replace(/\\([-_*|~])/g,"$1"),_e=Z+1,oe.length>0){Me&&(oe=so.gsub(oe,"~"," "));var Ee=T.charAt(Z);return Ee!=="_"&&Ee!=="-"&&(Ee=" "),se.push({syllable:e.translateString(oe),divider:Ee}),Me=!1,!0}return!1},K=!1,ue=0;ue<T.length;ue++){switch(T[ue]){case" ":case"":me(ue);break;case"-":!K&&!me(ue)&&se.length>0&&(so.last(se).divider="-",se.push({skip:!0,to:"next"}));break;case"_":K||(me(ue),se.push({skip:!0,to:"slur"}));break;case"*":K||(me(ue),se.push({skip:!0,to:"next"}));break;case"|":K||(me(ue),se.push({skip:!0,to:"bar"}));break;case"~":K||(Me=!0);break}K=T[ue]==="\\"}var be=!1;so.each(q,function(Z){if(se.length!==0){if(se[0].skip){switch(se[0].to){case"next":Z.el_type==="note"&&Z.pitches!==null&&!be&&se.shift();break;case"slur":Z.el_type==="note"&&Z.pitches!==null&&se.shift();break;case"bar":Z.el_type==="bar"&&se.shift();break}Z.el_type!=="bar"&&(Z.lyric===void 0?Z.lyric=[{syllable:"",divider:" "}]:Z.lyric.push({syllable:"",divider:" "}))}else if(Z.el_type==="note"&&Z.rest===void 0&&!be){var oe=se.shift();oe.syllable&&(oe.syllable=oe.syllable.replace(/ +/g,"\xA0")),Z.lyric===void 0?Z.lyric=[oe]:Z.lyric.push(oe)}}})},L=function(q,T){if(T.indexOf("")>=0){r+=T;return}if(T=r+T,r="",!q){_("Can't add symbols before the first line of music",q,0);return}T=so.strip(T),T.charAt(T.length-1)!=="-"&&(T=T+" ");for(var se=[],_e=0,Me=!1,me=function(be){var Z=so.strip(T.substring(_e,be));if(_e=be+1,Z.length>0){Me&&(Z=so.gsub(Z,"~"," "));var oe=T.charAt(be);return oe!=="_"&&oe!=="-"&&(oe=" "),se.push({syllable:e.translateString(Z),divider:oe}),Me=!1,!0}return!1},K=0;K<T.length;K++)switch(T.charAt(K)){case" ":case"":me(K);break;case"-":!me(K)&&se.length>0&&(so.last(se).divider="-",se.push({skip:!0,to:"next"}));break;case"_":me(K),se.push({skip:!0,to:"slur"});break;case"*":me(K),se.push({skip:!0,to:"next"});break;case"|":me(K),se.push({skip:!0,to:"bar"});break;case"~":Me=!0;break}var ue=!1;so.each(q,function(be){if(se.length!==0){if(se[0].skip)switch(se[0].to){case"next":be.el_type==="note"&&be.pitches!==null&&!ue&&se.shift();break;case"slur":be.el_type==="note"&&be.pitches!==null&&se.shift();break;case"bar":be.el_type==="bar"&&se.shift();break}else if(be.el_type==="note"&&be.rest===void 0&&!ue){var Z=se.shift();be.lyric===void 0?be.lyric=[Z]:be.lyric.push(Z)}}})},R=function(q){if(so.startsWith(q,"%%")){var T=fT.addDirective(q.substring(2));T&&_(T,q,2);return}var se=q.indexOf("%");if(se>=0&&(q=q.substring(0,se)),q=q.replace(/\s+$/,""),q.length!==0){if(i){S(n.getCurrentVoice(),q.substring(2));return}if(r){L(n.getCurrentVoice(),q.substring(2));return}if(q.length<2||q.charAt(1)!==":"||w.lineContinuation){w.parseMusic(q);return}var _e=b.parseHeader(q);_e.regular&&w.parseMusic(q),_e.newline&&w.startNewLine(),_e.words&&S(n.getCurrentVoice(),q.substring(2)),_e.symbols&&L(n.getCurrentVoice(),q.substring(2))}};function z(q,T){q.push({el_type:"hint"});for(var se=0;se<T.length;se++){var _e=T[se],Me=so.clone(_e);if(q.push(Me),_e.el_type==="bar")return}}function ne(q,T){for(var se=0;se<q.length;se++){var _e=q[se],Me=T[se];if(Me)for(var me=0;me<Me.voices.length;me++){var K=Me.voices[me],ue=_e.voices[me];ue&&z(ue,K)}}}function Q(){for(var q=0;q<t.lines.length;q++){var T=t.lines[q].staff;if(T){for(var se=q+1;se<t.lines.length&&t.lines[se].staff===void 0;)se++;if(se<t.lines.length){var _e=t.lines[se].staff;ne(T,_e)}}}}this.parse=function(q,T,se){T||(T={}),se||(se=0),t.reset(),q=q.replace(/\r\n?/g,`
`)+`
`;var _e=q.split(`
\\`);if(_e.length>1){for(var Me=1;Me<_e.length;Me++)for(;_e[Me].length>0&&_e[Me][0]!==`
`;)_e[Me]=_e[Me].substr(1),_e[Me-1]+=" ";q=_e.join("  ")}q=q.replace(/\\([ \t]*)(%.*)*\n/g,function(Ee,Y,G){var le=G?Array(G.length+1).join(" "):"";return Y+""+le+`
`});var me=q.split(`
`);so.last(me).length===0&&me.pop(),e=new $z(me,l),b=new Jz(e,_,l,t,n),w=new Qz(e,_,l,t,n,b),T.print&&(t.media="print"),l.reset(),l.iChar=se,T.visualTranspose?(l.globalTranspose=parseInt(T.visualTranspose),l.globalTranspose===0?l.globalTranspose=void 0:n.setVisualTranspose(T.visualTranspose)):l.globalTranspose=void 0,T.lineBreaks&&(l.lineBreaks=T.lineBreaks),b.reset(e,_,l,t);try{T.format&&fT.globalFormatting(T.format);for(var K=e.nextLine();K;){if(T.header_only&&l.is_in_header===!1||T.stop_on_warning&&l.warnings)throw"normal_abort";var ue=l.is_in_header;R(K),ue&&!l.is_in_header&&(n.setRunningFont("annotationfont",l.annotationfont),n.setRunningFont("gchordfont",l.gchordfont),n.setRunningFont("tripletfont",l.tripletfont),n.setRunningFont("vocalfont",l.vocalfont)),K=e.nextLine()}i&&S(n.getCurrentVoice(),""),r&&L(n.getCurrentVoice(),""),l.openSlurs=n.cleanUp(l.barsperstaff,l.staffnonote,l.openSlurs)}catch(Ee){if(Ee!=="normal_abort")throw Ee}var be=11*72,Z=8.5*72;switch(l.papersize){case"legal":be=14*72,Z=8.5*72;break;case"A4":be=11.7*72,Z=8.3*72;break}if(l.landscape){var oe=be;be=Z,Z=oe}t.formatting.pagewidth||(t.formatting.pagewidth=Z),t.formatting.pageheight||(t.formatting.pageheight=be),T.hint_measures&&Q(),Kz.wrapLines(t,l.lineBreaks,l.barNumbers)}};mT.exports=tU});var _T=et((Oxe,gT)=>{var lc=oo(),nU=function(t){"use strict";var n="",e=t.match(/(\s*)/);t=lc.strip(t);for(var i=t.split(`
X:`),r=1;r<i.length;r++)i[r]="X:"+i[r];var s=e?e[0].length:0,a=[];if(lc.each(i,function(h){a.push({abc:h,startPos:s}),s+=h.length+1}),a.length>1&&!lc.startsWith(a[0].abc,"X:")){var l=a.shift(),d=l.abc.split(`
`);lc.each(d,function(h){lc.startsWith(h,"%%")&&(n+=h+`
`)})}var u=n;return lc.each(a,function(h){var _=h.abc.indexOf(`

`);_>0&&(h.abc=h.abc.substring(0,_)),h.pure=h.abc,h.abc=n+h.abc,h.title="";var b=h.pure.split("T:");b.length>1&&(b=b[1].split(`
`),h.title=lc.strip(b[0]));var w=h.pure.substring(2,h.pure.indexOf(`
`));h.id=lc.strip(w)}),{header:u,tunes:a}};gT.exports=nU});var Gx=et((Fxe,yT)=>{function jx(t,n){this.numLines=t,this.lineSpace=n,this.verticalSize=this.numLines*this.lineSpace;var e=3;this.bar={pitch:e,pitch2:n*t,height:5}}jx.prototype.bypass=function(t){var n=t.staffGroup.voices;return!!(n.length>0&&n[0].isPercussion)};jx.prototype.setRelative=function(t,n,e){switch(t.type){case"bar":n.pitch=this.bar.pitch,n.pitch2=this.bar.pitch2,n.height=this.height;break;case"symbol":var i=this.bar.pitch2/2;if(t.name=="dots.dot")return e?(n.pitch=i,!1):(n.pitch=i+this.lineSpace,!0);break}return e};yT.exports=jx});var Wx=et((Bxe,bT)=>{function vT(t,n,e){this.tune=t,this.params=e,this.tuneNumber=n,this.inError=!1}vT.prototype.setError=function(t){var n=this.tune;t&&(this.error=t,this.inError=!0,n.warnings?n.warnings.push(t):n.warnings=[t])};bT.exports=vT});var zx=et((Lxe,xT)=>{var cc=function(n,e){this.children=[],this.beams=[],this.otherchildren=[],this.w=0,this.duplicate=!1,this.voicenumber=n,this.voicetotal=e,this.bottom=7,this.top=7,this.specialY={tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}};cc.prototype.addChild=function(t){if(t.type==="bar"){for(var n=!0,e=0;n&&e<this.children.length;e++)this.children[e].type.indexOf("staff-extra")<0&&this.children[e].type!=="tempo"&&(n=!1);n||(this.beams.push("bar"),this.otherchildren.push("bar"))}this.children[this.children.length]=t,this.setRange(t)};cc.prototype.setLimit=function(t,n){var e=n.specialY;e||(e=n),e[t]&&(this.specialY[t]?this.specialY[t]=Math.max(this.specialY[t],e[t]):this.specialY[t]=e[t])};cc.prototype.adjustRange=function(t){t.bottom!==void 0&&(this.bottom=Math.min(this.bottom,t.bottom)),t.top!==void 0&&(this.top=Math.max(this.top,t.top))};cc.prototype.setRange=function(t){this.adjustRange(t),this.setLimit("tempoHeightAbove",t),this.setLimit("partHeightAbove",t),this.setLimit("volumeHeightAbove",t),this.setLimit("dynamicHeightAbove",t),this.setLimit("endingHeightAbove",t),this.setLimit("chordHeightAbove",t),this.setLimit("lyricHeightAbove",t),this.setLimit("lyricHeightBelow",t),this.setLimit("chordHeightBelow",t),this.setLimit("volumeHeightBelow",t),this.setLimit("dynamicHeightBelow",t)};cc.prototype.addOther=function(t){this.otherchildren.push(t),this.setRange(t)};cc.prototype.addBeam=function(t){this.beams.push(t)};cc.prototype.setWidth=function(t){this.w=t};xT.exports=cc});var fp=et((Nxe,CT)=>{var iU=function(t,n,e,i){if(t)for(var r=0;r<t.length;r++){var s=t[r],a=s.getAttribute("highlight");a||(a="fill"),s.setAttribute(a,i);var l=s.getAttribute("class");l||(l=""),l=l.replace(e,""),l=l.replace(n,""),n.length>0&&(l.length>0&&l.charAt(l.length-1)!==" "&&(l+=" "),l+=n),s.setAttribute("class",l)}};CT.exports=iU});var Ux=et((Vxe,wT)=>{var rU=fp(),oU=function(t,n){t===void 0&&(t="abcjs-note_selected"),n===void 0&&(n="#ff0000"),rU(this.elemset,t,"",n)};wT.exports=oU});var qx=et((Rxe,MT)=>{var sU=fp(),aU=function(t,n){t===void 0&&(t="abcjs-note_selected"),n===void 0&&(n="#000000"),sU(this.elemset,"",t,n)};MT.exports=aU});var fd=et((Gxe,ST)=>{var jxe=fp(),lU=Ux(),cU=qx(),ao=function(n,e,i,r,s,a){a||(a={}),this.tuneNumber=s,this.abcelem=n,this.duration=e,this.durationClass=a.durationClassOveride?a.durationClassOveride:this.duration,this.minspacing=i||0,this.x=0,this.children=[],this.heads=[],this.extra=[],this.extraw=0,this.w=0,this.right=[],this.invisible=!1,this.bottom=void 0,this.top=void 0,this.type=r,this.fixed={w:0,t:void 0,b:void 0},this.specialY={tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}};ao.prototype.getFixedCoords=function(){return{x:this.x,w:this.fixed.w,t:this.fixed.t,b:this.fixed.b}};ao.prototype.addExtra=function(t){this.fixed.w=Math.max(this.fixed.w,t.dx+t.w),this.fixed.t===void 0?this.fixed.t=t.top:this.fixed.t=Math.max(this.fixed.t,t.top),this.fixed.b===void 0?this.fixed.b=t.bottom:this.fixed.b=Math.min(this.fixed.b,t.bottom),t.dx<this.extraw&&(this.extraw=t.dx),this.extra[this.extra.length]=t,this._addChild(t)};ao.prototype.addHead=function(t){t.dx<this.extraw&&(this.extraw=t.dx),this.heads[this.heads.length]=t,this.addRight(t)};ao.prototype.addRight=function(t){this.fixed.w=Math.max(this.fixed.w,t.dx+t.w),t.top!==void 0&&(this.fixed.t===void 0?this.fixed.t=t.top:this.fixed.t=Math.max(this.fixed.t,t.top)),t.bottom!==void 0&&(this.fixed.b===void 0?this.fixed.b=t.bottom:this.fixed.b=Math.min(this.fixed.b,t.bottom)),t.dx+t.w>this.w&&(this.w=t.dx+t.w),this.right[this.right.length]=t,this._addChild(t)};ao.prototype.addFixed=function(t){this._addChild(t)};ao.prototype.addFixedX=function(t){this._addChild(t)};ao.prototype.addCentered=function(t){var n=t.w/2;-n<this.extraw&&(this.extraw=-n),this.extra[this.extra.length]=t,t.dx+n>this.w&&(this.w=t.dx+n),this.right[this.right.length]=t,this._addChild(t)};ao.prototype.setLimit=function(t,n){n[t]&&(this.specialY[t]?this.specialY[t]=Math.max(this.specialY[t],n[t]):this.specialY[t]=n[t])};ao.prototype._addChild=function(t){t.parent=this,this.children[this.children.length]=t,this.pushTop(t.top),this.pushBottom(t.bottom),this.setLimit("tempoHeightAbove",t),this.setLimit("partHeightAbove",t),this.setLimit("volumeHeightAbove",t),this.setLimit("dynamicHeightAbove",t),this.setLimit("endingHeightAbove",t),this.setLimit("chordHeightAbove",t),this.setLimit("lyricHeightAbove",t),this.setLimit("lyricHeightBelow",t),this.setLimit("chordHeightBelow",t),this.setLimit("volumeHeightBelow",t),this.setLimit("dynamicHeightBelow",t)};ao.prototype.pushTop=function(t){t!==void 0&&(this.top===void 0?this.top=t:this.top=Math.max(t,this.top))};ao.prototype.pushBottom=function(t){t!==void 0&&(this.bottom===void 0?this.bottom=t:this.bottom=Math.min(t,this.bottom))};ao.prototype.setX=function(t){this.x=t;for(var n=0;n<this.children.length;n++)this.children[n].setX(t)};ao.prototype.center=function(t,n){var e=(n.x-t.x)/2+t.x;this.x=e-this.w/2;for(var i=0;i<this.children.length;i++)this.children[i].setX(this.x)};ao.prototype.setHint=function(){this.hint=!0};ao.prototype.highlight=function(t,n){lU.bind(this)(t,n)};ao.prototype.unhighlight=function(t,n){cU.bind(this)(t,n)};ST.exports=ao});var ha=et((Wxe,PT)=>{var Gh=function(n,e,i,r,s){switch(s=s||{},this.x=0,this.c=n,this.dx=e,this.w=i,this.pitch=r,this.scalex=s.scalex||1,this.scaley=s.scaley||1,this.type=s.type||"symbol",this.pitch2=s.pitch2,this.linewidth=s.linewidth,this.klass=s.klass,this.top=r,this.pitch2!==void 0&&this.pitch2>this.top&&(this.top=this.pitch2),this.bottom=r,this.pitch2!==void 0&&this.pitch2<this.bottom&&(this.bottom=this.pitch2),s.thickness&&(this.top+=s.thickness/2,this.bottom-=s.thickness/2),s.stemHeight&&(s.stemHeight>0?this.top+=s.stemHeight:this.bottom+=s.stemHeight),s.dim&&(this.dim=s.dim),s.position&&(this.position=s.position),this.height=s.height?s.height:4,s.top&&(this.top=s.top),s.bottom&&(this.bottom=s.bottom),s.name?this.name=s.name:this.c?this.name=this.c:this.name=this.type,s.realWidth?this.realWidth=s.realWidth:this.realWidth=this.w,this.centerVertically=!1,this.type){case"debug":this.chordHeightAbove=this.height;break;case"lyric":s.position&&s.position==="below"?this.lyricHeightBelow=this.height:this.lyricHeightAbove=this.height;break;case"chord":s.position&&s.position==="below"?this.chordHeightBelow=this.height:this.chordHeightAbove=this.height;break;case"text":this.pitch===void 0?s.position&&s.position==="below"?this.chordHeightBelow=this.height:this.chordHeightAbove=this.height:this.centerVertically=!0;break;case"part":this.partHeightAbove=this.height;break}};Gh.prototype.getChordDim=function(){if(this.type==="debug"||!this.chordHeightAbove&&!this.chordHeightBelow)return null;var t=0,n=this.type==="chord"?this.realWidth/2:0,e=this.x-n-t,i=e+this.realWidth+t;return{left:e,right:i}};Gh.prototype.invertLane=function(t){this.lane===void 0&&(this.lane=0),this.lane=t-this.lane-1};Gh.prototype.putChordInLane=function(t){this.lane=t,this.chordHeightAbove?this.chordHeightAbove=this.height*1.25*this.lane:this.chordHeightBelow=this.height*1.25*this.lane};Gh.prototype.getLane=function(){return this.lane===void 0?0:this.lane};Gh.prototype.setX=function(t){this.x=t+this.dx};PT.exports=Gh});var d_=et((zxe,kT)=>{var md=["A","B","C","D","E","F","G"];function Wa(t){var n=!1,e=t,i=!1,r=!1,s=null,a=null,l=!1,d=0;t.startsWith("_")?(n=!0,d=-1,t[1]=="/"?(n=!1,a="v",d=0):t[1]=="_"&&(l=!0,d-=1)):t.startsWith("^")?(i=!0,d=1,t[1]=="/"?(i=!1,a="^",d=0):t[1]=="^"&&(l=!0,d+=1)):t.startsWith("=")&&(s=!0,d=0),r=n||i||a!=null,(r||s)&&(a!=null||l?e=t.slice(2):e=t.slice(1));var u=(t.match(/,/g)||[]).length,h=(t.match(/'/g)||[]).length;this.name=e,this.acc=d,this.isSharp=i,this.isKeySharp=!1,this.isDouble=l,this.isAltered=r,this.isFlat=n,this.isKeyFlat=!1,this.natural=s,this.quarter=a,this.isLower=this.name==this.name.toLowerCase(),this.name=this.name[0].toUpperCase(),this.hasComma=u,this.isQuoted=h}function Hx(t){var n=t.name,e=new Wa(n);return e.hasComma=t.hasComma,e.isLower=t.isLower,e.isQuoted=t.isQuoted,e.isSharp=t.isSharp,e.isKeySharp=t.isKeySharp,e.isFlat=t.isFlat,e.isKeyFlat=t.isKeyFlat,e}Wa.prototype.sameNoteAs=function(t){return this.name==t.name&&this.hasComma==t.hasComma&&this.isLower==t.isLower&&this.isQuoted==t.isQuoted&&this.isSharp==t.isSharp&&this.isFlat==t.isFlat};Wa.prototype.isLowerThan=function(t){var n=["C","D","E","F","G","A","B"];if(this.hasComma>t.hasComma)return!0;if(t.hasComma>this.hasComma||this.isQuoted>t.isQuoted)return!1;if(t.isQuoted>this.isQuoted)return!0;if(this.isLower){if(!t.isLower)return!1}else if(t.isLower)return!0;var e=t.name[0].toUpperCase(),i=this.name[0].toUpperCase();return n.indexOf(i)<n.indexOf(e)};Wa.prototype.checkKeyAccidentals=function(t){if(t)for(var n=this.name,e=0;e<t.length;e++){var i=t[e];n==i.note.toUpperCase()&&(i.acc=="flat"&&(this.acc=-1,this.isKeyFlat=!0),i.acc=="sharp"&&(this.acc=1,this.isKeySharp=!0))}};Wa.prototype.getAccidentalEquiv=function(){var t=Hx(this);return t.isSharp||t.isKeySharp?(t=t.nextNote(),t.isFlat=!0,t.isSharp=!1,t.isKeySharp=!1):(t.isFlat||t.isKeyFlat)&&(t=t.prevNote(),t.isSharp=!0,t.isFlat=!1,t.isKeyFlat=!1),t};Wa.prototype.nextNote=function(){var t=Hx(this);if(!this.isSharp&&!this.isKeySharp){if(this.name!="E"&&this.name!="B")return t.isSharp=!0,t}else t.isSharp=!1,t.isKeySharp=!1;var n=md.indexOf(this.name);return n==md.length-1?n=0:n++,t.name=md[n],t.name=="C"&&(t.hasComma>0?t.hasComma--:t.isLower?t.isQuoted=!0:t.isLower=!0),t};Wa.prototype.prevNote=function(){var t=Hx(this);if(this.isSharp)return t.isSharp=!1,t;var n=md.indexOf(this.name);return n==0?n=md.length-1:n--,t.name=md[n],t.name=="B"&&(t.isLower?t.hasComma=1:t.hasComma>0?t.hasComma++:t.isQuoted>0?t.isQuoted-=1:t.isLower=!0),this.isFlat?(t.isFlat=!1,t):(this.name!="E"&&this.name!="B"&&(t.isSharp=!0),t)};Wa.prototype.emitNoAccidentals=function(){var t=this.name;this.isLower&&(t=t.toLowerCase());for(var n=0;n<this.isQuoted;n++)t+="'";for(var e=0;e<this.hasComma;e++)t+=",";return t};Wa.prototype.emit=function(){var t=this.name;(this.isSharp||this.isKeySharp)&&(t="^"+t,this.isDouble&&(t="^"+t)),(this.isFlat||this.isKeyFlat)&&(t="_"+t,this.isDouble&&(t="_"+t)),this.quarter&&(this.quarter=="^"?t="^/"+t:t="_/"+t),this.natural&&(t="="+t);for(var n=1;n<=this.hasComma;n++)t+=",";if(this.isLower){t=t.toLowerCase();for(var e=1;e<=this.isQuoted;e++)t+="'"}return t};kT.exports={TabNote:Wa,notes:md}});var IT=et((Uxe,DT)=>{var AT=d_();function ET(t,n){var e=n.getAccidentalEquiv();return t.note.toUpperCase()==e.name.toUpperCase()?(e.isSharp=!1,e.isFlat=!1,e):n}function dU(t,n){if(t.acc=="sharp"){if(n.isFlat)return ET(t,n);n.isSharp&&(t.note.toUpperCase()==n.name.toUpperCase()?(n.isSharp=!1,n.isKeySharp=!0):t.note.toUpperCase()==n.name.toUpperCase()&&(n.natural=!0))}else if(t.acc=="flat"){if(n.isSharp)return ET(t,n);n.isFlat?t.note.toUpperCase()==n.name.toUpperCase()&&(n.isFlat=!1,n.isKeyFlat=!0):t.note.toUpperCase()==n.name.toUpperCase()&&(n.natural=!0)}return n}function hU(t,n,e,i){if(t.lastEnd)for(;e>t.lastEnd;)t.updatedSrc.push(t.abcSrc[t.lastEnd]),t.lastEnd++;for(var r=n.split(""),s=0;s<r.length;s++)t.updatedSrc.push(r[s]);for(var a=e+s;i>=a;)t.updatedSrc.push(r[a]),a++;t.lastEnd=i}function TT(t,n){for(var e=t.transposedKey,i=0;i<e.length;i++)n=dU(e[i],n);return n}Yx.prototype.transposeNote=function(t){var n=t,e=new AT.TabNote(n.name);if(this.transposeBy>0)for(var i=0;i<this.transposeBy;i++)e=TT(this,e.nextNote());else if(this.transposeBy<0)for(var r=this.transposeBy;r<0;r++)e=TT(this,e.prevNote());return n.name=e.emit(),n};Yx.prototype.upgradeSource=function(t,n,e){var i=new AT.TabNote(t.name),r=i.emit();hU(this,r,n,e-1)};function Yx(t,n){this.transposeBy=n,this.transposedKey=t,this.lastEnd=this.kEnd+1}DT.exports=Yx});var jT=et((qxe,RT)=>{var BT=fd(),Qx=ha(),uU=IT();function pU(t){return t!=null&&t.constructor===Object}function Xx(t,n){for(var e in n)n.hasOwnProperty(e)&&(Array.isArray(n[e])||pU(n[e])||(t[e]=n[e]))}function LT(t){var n=new BT("",0,0,"",0);return Xx(n,t),n.top=0,n.bottom=-1,t.abcelem&&(n.abcelem={},Xx(n.abcelem,t.abcelem),n.abcelem.el_type==="note"&&(n.abcelem.el_type="tabNumber")),n}function fU(t,n){var e=LT(t);if(n)for(var i=t.children,r=!0,s=0;s<i.length;s++){var a=i[s],l=new Qx("",0,0,0,"");Xx(l,a),r=n.tablature.setRelative(a,l,r),e.children.push(l)}return e}function mU(t,n,e){var i="tab.tiny",r=7.5;t.isTabBig&&(i="tab.big",r=10);var s={el_type:"tab",icon:i,Ypos:r},a=new BT(s,0,0,"symbol",0);a.x=n;var l=new Qx(i,0,0,7.5,"tab");return l.x=e,a.children.push(l),a.abcelem.el_type=="tab"&&(l.pitch=r),a}function gU(t){if(t.extra)for(var n=0;n<t.extra.length;n++){var e=t.extra[n];if(e.type=="lyric")return{bottom:e.bottom,height:e.height}}return null}function NT(){this.accidentals=null}function _U(t){for(var n=0,e=0;e<t.length;e++)t[e].tabNameInfos||n++;return n}function Jx(t,n,e,i,r){var s=i.num;i.note.quarter!=null&&(s=s.toString(),s+=i.note.quarter);var a=t.semantics.stringToPitch(i.str);e.notes.push({num:s,str:i.str,pitch:i.note.emit()});var l={type:"tabNumber"},d=new Qx(s,0,0,a+.3,l);return d.x=n,d.isGrace=r,d.isAltered=i.note.isAltered,d}function VT(t,n){var e=0;if(t.extra){for(var i=0;i<t.extra.length;i++)if(t.extra[i].c.indexOf("noteheads")>=0){if(e===n)return t.extra[i].x+t.extra[i].w/2;e++}}return-1}function yU(t){if(t.abcelem){var n=t.abcelem;if(n.rest)return n.gracenotes}return null}function OT(t,n,e,i){if(t.transpose){for(var r=0;r<e.length;r++)e[r]=n.transposeNote(e[r]);if(i)for(var s=0;s<i.length;s++)i[s]=n.transposeNote(i[s])}}function FT(t,n,e){var i=t.semantics.notesToNumber(n,e);if(i.error)return t._super.setError(i.error),i;if(i.graces&&i.notes){var r=i.notes.length-1;i.notes[r].graces=i.graces}return i}function vU(t,n,e,i,r){for(var s=0;s<i.length;s++){var a={el_type:"note",startChar:e.abcelem.startChar,endChar:e.abcelem.endChar,notes:[],grace:!0},l=VT(e,s),d=i[s],u=Jx(t,l,a,d,!0);n.children.push(u),r.push(a)}}NT.prototype.build=function(t,n,e,i,r,s){var a=_U(n),l=n[r+i],d=n[a+r+i],u=null,h=null,_=null;l.children[0].abcelem.el_type!="clef"&&s!="none"&&l.children.splice(0,0,s);for(var b=0;b<l.children.length;b++){var w=l.children[b],S=w.x,L=S;switch(w.isClef&&d.children.push(mU(t,S,L)),w.type){case"staff-extra key-signature":this.accidentals=w.abcelem.accidentals,t.semantics.strings.accidentals=this.accidentals,t.transpose&&(u=new uU(w.abcelem.accidentals,t.transpose));break;case"bar":var R=!1;b===l.children.length-1&&(R=!0);var z=fU(w,t);if(z.abcelem.barNumber){delete z.abcelem.barNumber;for(var ne=0;ne<z.children.length;ne++)if(z.children[ne].type==="barNumber"){z.children.splice(ne,1);break}}z.abcelem.lastBar=R,d.children.push(z),e.push({el_type:w.abcelem.el_type,type:w.abcelem.type,endChar:w.abcelem.endChar,startChar:w.abcelem.startChar,abselem:z});break;case"rest":var Q=yU(w);if(Q){if(OT(t,u,null,Q),h=FT(t,null,Q),h.error)return;ue={el_type:"note",startChar:w.abcelem.startChar,endChar:w.abcelem.endChar,notes:[],grace:!0},vU(t,q,w,h.graces,e)}break;case"note":var q=LT(w);q.x=w.heads[0].x+w.heads[0].w/2,q.lyricDim=gU(w);var T=w.abcelem.pitches,se=w.abcelem.gracenotes;if(q.type="tabNumber",OT(t,u,T,se),h=FT(t,T,se),h.error)return;if(h.graces){var _e=h.notes.length-1;h.notes[_e].graces=h.graces}_={el_type:"note",startChar:w.abcelem.startChar,endChar:w.abcelem.endChar,notes:[]};for(var Me=0;Me<h.notes.length;Me++){var me=h.notes[Me];if(me.graces)for(var K=0;K<me.graces.length;K++){var ue={el_type:"note",startChar:w.abcelem.startChar,endChar:w.abcelem.endChar,notes:[],grace:!0},be=VT(w,K),Z=me.graces[K],oe=Jx(t,be,ue,Z,!0);q.children.push(oe),e.push(ue)}var Ee=Jx(t,q.x+w.heads[Me].dx,_,me,!1);q.children.push(Ee)}_.abselem=q,e.push(_),d.children.push(q);break}}};RT.exports=NT});var $x=et((Hxe,zT)=>{var bU=zx(),xU=jT(),GT=No();function CU(){return{tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}}function wU(t){for(var n=0,e=0;e<t.children.length;e++){var i=t.children[e];i.specialY&&i.specialY.lyricHeightBelow>n&&(n=i.specialY.lyricHeightBelow)}return n}function MU(t,n){var e=t.plugin.semantics.strings,i=t.renderer.controller,r=i.getTextSize,s=e.tabInfos(t.plugin),a=r.calc(s,"tablabelfont","text instrumentname");return n.tabNameInfos={textSize:a,name:s},a.height}function WT(t,n,e,i){this.renderer=n,this.plugin=t,this.line=e,this.absolutes=new xU,this.staffIndex=i,this.tabStaff={clef:{type:"TAB"}},this.tabSize=t.linePitch*t.nbLines}function SU(t,n){return n[t].isTabStaff?t===n.length-1?!0:!n[t+1].isTabStaff:!1}function PU(t){for(var n=0,e=0;e<t.length;e++)t[e].isTabStaff||n++;return n}function kU(t,n){for(var e=n;e>=0;e--)if(!t[e].isTabStaff)return e;return-1}function EU(t){for(var n=0;n<t.length;n++)if(t[n].isTabStaff){var e=kU(t,n);t[n].hasStaff=t[e],t[e].hasTab||(t[e].hasTab=[]),t[e].hasTab.push(t[n])}}function TU(t,n){return PU(t)===1&&n.voices.length>1}function AU(t,n){for(var e=t.staffIndex,i=0,r=0,s=!0,a=0;s;){if(!n[i])return-1;if(n[i].isTabStaff||(a=n[i].voices.length),n[i].isTabStaff){if(r++,SU(i,n)&&r<a)return i+1}else if(r=0,i>=e&&(i+1==n.length||!n[i+1].isTabStaff))return i+1;if(i++,i>n.length)return-1}}function DU(t,n){for(var e=n;e>=0;e--)if(!t[e].isTabStaff)return t[e];return null}function IU(t,n){var e=t[n],i=e.children[0].abcelem;return i.el_type==="clef"?null:n==0?"none":t[n-1].children[0]}WT.prototype.doLayout=function(){var t=this.line.staff;if(t){var n=t[0];if(n&&n.clef&&n.clef.stafflines==0){this.plugin._super.setError("No tablatures when stafflines=0");return}t.splice(t.length,0,this.tabStaff)}var e=this.line.staffGroup,i=e.voices,r=i[0],s=wU(r),a=3,l=this.staffIndex,d=e.staffs[l],u=this.tabSize+a-d.bottom-s;d.isTabStaff&&(u=d.top);var h={bottom:-1,isTabStaff:!0,specialY:CU(),lines:this.plugin.nbLines,linePitch:this.plugin.linePitch,dy:.15,top:u},_=AU(this,e.staffs);if(_!==-1){h.parentIndex=_-1,e.staffs.splice(_,0,h),e.height+=this.tabSize+a;var b=DU(e.staffs,_),w=1;TU(e.staffs,b)&&(w=b.voices.length),this.tabStaff.voices=[];for(var S=0;S<w;S++){var L=new bU(0,0),R=MU(this,L)/GT.STEP;e.staffs[this.staffIndex].top+=R,e.height+=R*GT.STEP,L.staff=h,i.splice(i.length,0,L);var z=IU(i,S+this.staffIndex);this.tabStaff.voices[S]=[],this.absolutes.build(this.plugin,i,this.tabStaff.voices[S],S,this.staffIndex,z)}EU(e.staffs)}};zT.exports=WT});var YT=et((Yxe,HT)=>{var Kx=d_(),UT=Kx.notes;function qT(t,n){this.fromN=new Kx.TabNote(t),this.toN=new Kx.TabNote(n)}qT.prototype.build=function(){var t=this.fromN,n=this.toN;if(n.isLowerThan(t)){var e=t.emit(),i=n.emit();return{error:"Invalid string Instrument tuning : "+i+" string lower than "+e+" string"}}var r=[],s=UT.indexOf(t.name),a=UT.indexOf(n.name);if(s==-1||a==-1)return r;for(var l=!1;!l;)r.push(t.emit()),t=t.nextNote(),t.sameNoteAs(n)&&(l=!0);return r};HT.exports=qT});var tC=et((Xxe,JT)=>{var mp=d_(),OU=YT();function FU(t){var n=null,e=t.tuning;if(t.capo>0){n=[];for(var i=0;i<e.length;i++){for(var r=new mp.TabNote(e[i]),s=0;s<t.capo;s++)r=r.nextNote();n[i]=r.emit()}}return n}function BU(t){var n=[],e=t.tuning;t.capo>0&&(e=t.capoTuning);for(var i=e.length-1,r=0;r<e.length;r++){var s=t.highestNote;r!=e.length-1&&(s=e[r+1]);var a=new OU(e[r],s),l=a.build();if(l.error)return l;n[i--]=l}return n}function LU(t){var n=[];n[0]=[];for(var e=t.strings,i=1;i<e.length;i++)n[i]=e[i-1];return n}function NU(t,n){for(var e=0;e<n.length-1;e++){var i=n[e],r=n[e+1];if(i.str==r.str){if(i.str==t.strings.length-1){i.num="?",r.num="?";return}r.num<i.num?(r.str++,r=Zx(t,r.note,r.str,t.secondPos,t.strings[r.str].length)):(i.str++,i=Zx(t,i.note,i.str,t.secondPos,t.strings[i.str].length)),n[e]=i,n[e+1]=r}}return null}function VU(t,n){for(var e=[],i=0;i<n.length;i++){var r=new mp.TabNote(n[i].name),s=eC(t,r);e.push(s)}return NU(t,e),e}function Zx(t,n,e,i,r){var s=t.strings;n.checkKeyAccidentals(t.accidentals),i&&(s=i);var a=n.emitNoAccidentals(),l=s[e].indexOf(a),d=n.acc;if(l!=-1){if(i&&(l+=r),(n.isFlat||n.acc==-1)&&l==0){var u=n.getAccidentalEquiv();e++,l=s[e].indexOf(u.emit()),d=0}return{num:l+d,str:e,note:n}}return null}function eC(t,n){var e=null,i=0,r=t.strings[t.strings.length-1],s=new mp.TabNote(r[0]);if(n.isLowerThan(s))return{num:"?",str:t.strings.length-1,note:n,error:n.emit()+": unexpected note for instrument"};for(;i<t.strings.length;){if(e=Zx(t,n,i),e)return e;i++}return null}gp.prototype.stringToPitch=function(t){var n=5.3,e=this.strings.length-1;return n+(e-t)*this.linePitch};function XT(t,n){var e={num:"?",str:0,note:n};t.push(e),t.error=n.emit()+": unexpected note for instrument"}gp.prototype.notesToNumber=function(t,n){var e,i,r=null,s=null;if(t&&(s=[],t.length>1?(s=VU(this,t),s.error&&(r=s.error)):(e=new mp.TabNote(t[0].name),i=eC(this,e),i?s.push(i):(XT(s,e),r=s.error))),r)return s;var a=null;if(n){a=[];for(var l=0;l<n.length;l++)e=new mp.TabNote(n[l].name),i=eC(this,e),i?a.push(i):(XT(a,e),r=s.error)}return{notes:s,graces:a,error:r}};gp.prototype.toString=function(){return this.tuning.join("").replaceAll(",","").toUpperCase()};gp.prototype.tabInfos=function(t){var n=t._super,e=n.params.label;if(e){var i=e.indexOf("%T"),r="";return i!=-1&&(r=this.toString(),t.capo>0&&(r+=" capo:"+t.capo),e=e.replace("%T",r)),e}return""};function gp(t){var n=t.tuning,e=t.capo,i=t._super.params.highestNote;if(this.linePitch=t.linePitch,this.highestNote="a'",i&&(this.highestNote=i),this.capo=0,e&&(this.capo=e),this.tuning=n,this.capo>0&&(this.capoTuning=FU(this)),this.strings=BU(this),this.strings.error){t._super.setError(this.strings.error),t.inError=!0;return}this.secondPos=LU(this)}JT.exports=gp});var $T=et((Jxe,QT)=>{var RU=tC();function nC(t){this.tuning=t._super.params.tuning,this.tuning||(this.tuning=["G,","D","A","e"]),t.tuning=this.tuning,this.strings=new RU(t)}nC.prototype.notesToNumber=function(t,n){var e=this.strings;return e.notesToNumber(t,n)};nC.prototype.stringToPitch=function(t){var n=this.strings;return n.stringToPitch(t)};QT.exports=nC});var ZT=et((Qxe,KT)=>{function jU(t){}KT.exports=jU});var tA=et(($xe,eA)=>{var GU=Gx(),WU=Wx(),zU=$x(),UU=$T(),qU=ZT();iC.prototype.init=function(t,n,e){var i=new WU(t,n,e);this.abcTune=t,this._super=i,this.linePitch=3,this.nbLines=4,this.isTabBig=!1,this.capo=e.capo,this.transpose=e.visualTranspose,this.tablature=new GU(this.nbLines,this.linePitch);var r=new UU(this);this.semantics=r};iC.prototype.render=function(t,n,e){if(!this._super.inError&&!this.tablature.bypass(n)){qU(this.abcTune);var i=new zU(this,t,n,e);i.doLayout()}};function iC(){}var HU=function(){return{name:"ViolinTab",tablature:iC}};eA.exports=HU});var iA=et((Kxe,nA)=>{var YU=tC();function rC(t){this.tuning=t._super.params.tuning,this.tuning||(this.tuning=["E,","A,","D","G","B","e"]),t.tuning=this.tuning,this.strings=new YU(t)}rC.prototype.notesToNumber=function(t,n){var e=this.strings;return e.notesToNumber(t,n)};rC.prototype.stringToPitch=function(t){var n=this.strings;return n.stringToPitch(t)};nA.exports=rC});var oA=et((Zxe,rA)=>{function XU(t){}rA.exports=XU});var aA=et((eCe,sA)=>{var JU=Gx(),QU=Wx(),$U=$x(),KU=iA(),ZU=oA();oC.prototype.init=function(t,n,e){var i=new QU(t,n,e);this._super=i,this.abcTune=t,this.linePitch=3,this.nbLines=6,this.isTabBig=!0,this.capo=e.capo,this.transpose=e.visualTranspose,this.tablature=new JU(this.nbLines,this.linePitch);var r=new KU(this);this.semantics=r};oC.prototype.render=function(t,n,e){if(!this._super.inError&&!this.tablature.bypass(n)){ZU(this.abcTune);var i=new $U(this,t,n,e);i.doLayout()}};function oC(){}var eq=function(){return{name:"GuitarTab",tablature:oC}};sA.exports=eq});var sC=et((tCe,lA)=>{var tq=tA(),nq=aA(),iq={violin:"ViolinTab",guitar:"GuitarTab"},rq={inited:!1,plugins:{},register:function(t){var n=t.name,e=t.tablature;this.plugins[n]=e},setError:function(t,n){t.warnings?t.warning.push(n):t.warnings=[n]},preparePlugins:function(t,n,e){var i=null,r=0;if(e.tablature){var s=e.tablature;i=[];for(var a=0;a<s.length;a++){var l=s[a],d=l.instrument;if(d==null)return this.setError(t,"tablature 'instrument' is missing"),i;var u=iq[d],h=null;if(u&&(h=this.plugins[u]),h){e.visualTranspose!=0&&(l.visualTranspose=e.visualTranspose),l.abcSrc=e.tablature.abcSrc;var _={classz:h,tuneNumber:n,params:l,instance:null};i.push(_),r++}else return this.setError(t,"Undefined tablature plugin: "+d),i}}return i},layoutTablatures:function(t,n){for(var e=n.tablatures,i=0;i<n.lines.length;i++){var r=n.lines[i],s=r.staff;if(s){for(var a=0;a<s.length;a++)if(e[a]){var l=e[a];l.instance==null&&(l.instance=new l.classz,l.instance.init(n,l.tuneNumber,l.params,a)),l.instance.render(t,r,a)}}}},init:function(){this.inited||(this.register(new tq),this.register(new nq),this.inited=!0)}};lA.exports=rq});var h_=et((nCe,dA)=>{var oq=Rx(),sq=_T(),cA=sC(),Ml={};(function(){"use strict";Ml.numberOfTunes=function(i){var r=i.split(`
X:`),s=r.length;return s===0&&(s=1),s};var t=Ml.TuneBook=function(i){var r=sq(i);this.header=r.header,this.tunes=r.tunes};t.prototype.getTuneById=function(i){for(var r=0;r<this.tunes.length;r++)if(this.tunes[r].id===""+i)return this.tunes[r];return null},t.prototype.getTuneByTitle=function(i){for(var r=0;r<this.tunes.length;r++)if(this.tunes[r].title===i)return this.tunes[r];return null},Ml.parseOnly=function(i,r){for(var s=Ml.numberOfTunes(i),a=[],l=0;l<s;l++)a.push(1);function d(){}return Ml.renderEngine(d,a,i,r)},Ml.renderEngine=function(i,r,s,a){var l=[],d=function(z){return z&&!z.propertyIsEnumerable("length")&&typeof z=="object"&&typeof z.length=="number"};if(!(r===void 0||s===void 0)){d(r)||(r=[r]),a===void 0&&(a={});for(var u=a.startingTune?parseInt(a.startingTune,10):0,h=new t(s),_=new oq,b=0;b<r.length;b++){var w=r[b];if(w==="*"||typeof w=="string"&&(w=document.getElementById(w)),w)if(u>=0&&u<h.tunes.length){_.parse(h.tunes[u].abc,a,h.tunes[u].startPos-h.header.length);var S=_.getTune();a.tablature&&(cA.init(),S.tablatures=cA.preparePlugins(S,u,a));var L=_.getWarnings();L&&(S.warnings=L);var R=i(w,S,b,h.tunes[u].abc);l.push(R||S)}else w.innerHTML&&(w.innerHTML="");u++}return l}};function n(i){for(var r=[],s=0;s<i.lines.length;s++){var a=i.lines[s];if(a.staff)for(var l=0;l<a.staff.length;l++){var d=a.staff[l];if(!r[l])r[l]=d;else for(var u=0;u<d.voices.length;u++)r[l].voices[u]&&(r[l].voices[u]=r[l].voices[u].concat(d.voices[u]))}}return r}function e(i,r){for(var s=[],a=null,l=null,d=null,u=!1,h=0;h<i.voices.length;h++){var _=i.voices[h];s.push([]);for(var b=0;b<_.length;b++){var w=_[b];if(d===null&&w.startChar>=0&&(d=w.startChar,w.chord===void 0?l=a:l=null),w.chord&&(a=w),w.el_type==="bar"){if(u){var S=r.abc.substring(d,w.endChar),L={abc:S};a=l&&l.chord&&l.chord.length>0?l.chord[0].name:null,a&&(L.lastChord=a),w.startEnding&&(L.startEnding=w.startEnding),w.endEnding&&(L.endEnding=w.endEnding),s[h].push(L),d=null,u=!1}}else w.el_type==="note"&&(u=!0)}}return s}Ml.extractMeasures=function(i){for(var r=[],s=new t(i),a=0;a<s.tunes.length;a++){for(var l=s.tunes[a],d=l.abc.split("K:"),u=d[1].split(`
`),h=d[0]+"K:"+u[0]+`
`,_=null,b=null,w=null,S=[],L=!1,R=Ml.parseOnly(l.abc)[0],z=R.getPickupLength()>0,ne=0;ne<R.lines.length;ne++){var Q=R.lines[ne];if(Q.staff)for(var q=0;q<1;q++)for(var T=Q.staff[q],se=0;se<1;se++)for(var _e=T.voices[se],Me=0;Me<_e.length;Me++){var me=_e[Me];if(w===null&&me.startChar>=0&&(w=me.startChar,me.chord===void 0?b=_:b=null),me.chord&&(_=me),me.el_type==="bar"){if(L){var K=l.abc.substring(w,me.endChar),ue={abc:K};_=b&&b.chord&&b.chord.length>0?b.chord[0].name:null,_&&(ue.lastChord=_),me.startEnding&&(ue.startEnding=me.startEnding),me.endEnding&&(ue.endEnding=me.endEnding),S.push(ue),w=null,L=!1}}else me.el_type==="note"&&(L=!0)}}r.push({header:h,measures:S,hasPickup:z})}return r}})();dA.exports=Ml});var _A=et((iCe,gA)=>{var hA=Ex(),{relativeMajor:uA,transposeKey:aC,relativeMode:pA}=Sx(),fA=Mx(),mA;(function(){"use strict";mA=function(Q,q,T){if(q==="TEST")return{keyAccidentals:hA,relativeMajor:uA,transposeKey:aC,relativeMode:pA,transposeChordName:fA};T=parseInt(T,10);var se=[],_e;for(_e=0;_e<q.length;_e++)se=se.concat(t(Q,q[_e],T));se=se.sort(function(K,ue){return ue.start-K.start});var Me=Q.split("");for(_e=0;_e<se.length;_e++){var me=se[_e];Me.splice(me.start,me.end-me.start,me.note)}return Me.join("")};function t(Q,q,T){var se=[],_e=q.getKeySignature();if(_e.root==="Hp"||_e.root==="HP")return se;se=se.concat(n(Q,T));for(var Me=0;Me<q.lines.length;Me++){var me=q.lines[Me].staff;if(me)for(var K=0;K<me.length;K++){var ue=me[K];ue.clef.type!=="perc"&&(se=se.concat(e(Q,ue.voices,ue.key,T)))}}return se}function n(Q,q){for(var T=[],se=Q.split("K:"),_e=se[0].length,Me=1;Me<se.length;Me++){var me=se[Me],K=me.match(/^( *)([A-G])([#b]?)(\w*)/);if(K){var ue=_e+2+K[1].length,be=K[2]+K[3]+K[4],Z=d({root:K[2],acc:K[3],mode:K[4]},q),oe=Z.root+Z.acc+Z.mode;T.push({start:ue,end:ue+be.length,note:oe})}_e+=me.length+2}return T}function e(Q,q,T,se){for(var _e=[],Me=d(T,se),me=0;me<q.length;me++)_e=_e.concat(s(Q,q[me],T.root,i(T),Me,se));return _e}function i(Q){for(var q={},T=0;T<Q.accidentals.length;T++){var se=Q.accidentals[T];se.acc==="flat"?q[se.note.toUpperCase()]="_":se.acc==="sharp"&&(q[se.note.toUpperCase()]="^")}return q}function r(Q,q,T){var se=a.indexOf(Q.root)-a.indexOf(q);return q==="none"&&(se=a.indexOf(Q.root)),se===0?T>2?se+=7:T===-12&&(se-=7):T>0&&se<0?se+=7:T<0&&se>0&&(se-=7),T>12?se+=7:T<-12&&(se-=7),se}function s(Q,q,T,se,_e,Me){for(var me=[],K=r(_e,T,Me),ue={},be={},Z=0;Z<q.length;Z++){var oe=q[Z];if(oe.chord)for(var Ee=0;Ee<oe.chord.length;Ee++){var Y=oe.chord[Ee];if(Y.position==="default"){var G=_e.accidentals.length&&_e.accidentals[0].acc==="flat",le=fA(Y.name,Me,G,!0);le=le.replace(/♭/g,"b").replace(/♯/g,"#"),le!==Y.name&&me.push(z(Q,oe.startChar,oe.endChar,le))}}if(oe.el_type==="note"&&oe.pitches){for(var X=0;X<oe.pitches.length;X++){var Ue=S(oe.pitches[X].name,T,se,ue);Ue.acc&&(ue[Ue.name.toUpperCase()]=Ue.acc);var Ze=u(Ue,_e,K,be);Ze.acc&&(be[Ze.upper]=Ze.acc),me.push(L(Q,oe.startChar,oe.endChar,Ze.acc+Ze.name,X))}if(oe.gracenotes)for(var De=0;De<oe.gracenotes.length;De++){var xe=S(oe.gracenotes[De].name,T,se,ue);xe.acc&&(ue[xe.name.toUpperCase()]=xe.acc);var ke=u(xe,_e,K,ue);ke.acc&&(be[ke.upper]=ke.acc),me.push(R(Q,oe.startChar,oe.endChar,ke.acc+ke.name,De))}}else oe.el_type==="bar"?(ue={},be={}):oe.el_type==="keySignature"&&(T=oe.root,se=i(oe),_e=d(oe,Me),K=r(_e,T,Me))}return me}var a="CDEFGAB",l=[",,,,",",,,",",,",",","","'","''","'''","''''"];function d(Q,q){if(Q.root==="none")return{root:aC("C",q),mode:"",acc:"",accidentals:[]};var T=uA(Q.root+Q.acc+Q.mode),se=aC(T,q),_e=pA(se,Q.mode),Me=hA(se);return{root:_e[0],mode:Q.mode,acc:_e.length>1?_e[1]:"",accidentals:Me}}function u(Q,q,T,se){for(var _e=Q.pitch,Me=a.indexOf(Q.name),me=a.indexOf(q.root),K=(me+_e)%7,ue=Me+T,be=Q.oct;ue>6;)be++,ue-=7;for(;ue<0;)be--,ue+=7;for(var Z=a[K],oe="",Ee=Q.adj,Y="=",G=0;G<q.accidentals.length;G++)if(q.accidentals[G].note.toLowerCase()===Z.toLowerCase()){Ee=Ee+(q.accidentals[G].acc==="flat"?-1:1),Y=q.accidentals[G].acc==="flat"?"_":"^";break}switch(Ee){case-2:oe="__";break;case-1:oe="_";break;case 0:oe="=";break;case 1:oe="^";break;case 2:oe="^^";break;case-3:var le={};return le.pitch=Q.pitch-1,le.oct=Q.oct,le.name=a[a.indexOf(Q.name)-1],le.name||(le.name="B",le.oct--),le.name==="B"||le.name==="E"?le.adj=Q.adj+1:le.adj=Q.adj+2,u(le,q,T+1,se);case 3:var le={};return le.pitch=Q.pitch+1,le.oct=Q.oct,le.name=a[a.indexOf(Q.name)+1],le.name||(le.name="C",le.oct++),le.name==="C"||le.name==="F"?le.adj=Q.adj-1:le.adj=Q.adj-2,u(le,q,T+1,se)}switch((se[Z]===oe||!se[Z]&&oe===Y)&&!Q.courtesy&&(oe=""),be){case 0:Z=Z+",,,";break;case 1:Z=Z+",,";break;case 2:Z=Z+",";break;case 4:Z=Z.toLowerCase();break;case 5:Z=Z.toLowerCase()+"'";break;case 6:Z=Z.toLowerCase()+"''";break;case 7:Z=Z.toLowerCase()+"'''";break;case 8:Z=Z.toLowerCase()+"''''";break}return be>4&&(Z=Z.toLowerCase()),{acc:oe,name:Z,upper:Z.toUpperCase()}}var h=/([_^=]*)([A-Ga-g])([,']*)/,_=/([_^=]*[A-Ga-g][,']*)(\d*\/*\d*)([\>\<\-\)\.\s\\]*)/,b=/([_^=]*[A-Ga-g][,']*)?(\d*\/*\d*)?([\>\<\-\)]*)?/,w=/(\s*)$/;function S(Q,q,T,se){var _e=q==="none"?0:a.indexOf(q),Me=Q.match(h),me=Me[2].toUpperCase(),K=a.indexOf(me)-_e;K<0&&(K+=7);var ue=l.indexOf(Me[3]);me===Me[2]&&ue--;var be=se[me]||T[me]||"=";return{acc:Me[1],name:me,pitch:K,oct:ue,adj:ne(Me[1],T[me],se[me]),courtesy:Me[1]===be}}function L(Q,q,T,se,_e){var Me=Q.substring(q,T),me=Me.match(new RegExp(_.source+w.source),"");if(me){var K=me[1].length,ue=me[2].length+me[3].length+me[4].length,be=T-q-K-ue;q+=be,T-=ue}else{var Z=/([^\[]*)/,oe=/\[/,Ee=/\-?](\d*\/*\d*)?([\>\<\-\)]*)/;if(me=Me.match(new RegExp(Z.source+oe.source+b.source+b.source+b.source+b.source+b.source+b.source+b.source+b.source+Ee.source+w.source)),me){for(var Y=1+me[1].length,G=0;G<_e;G++)me[G*3+2]&&(Y+=me[G*3+2].length),me[G*3+3]&&(Y+=me[G*3+3].length),me[G*3+4]&&(Y+=me[G*3+4].length);q+=Y;var le=me[_e*3+2]?me[_e*3+2].length:0;T=q+le}}return{start:q,end:T,note:se}}function R(Q,q,T,se,_e){var Me=Q.substring(q,T),me=/\{/,K=/\}/,ue=/([^\{]*)/,be=/(\/*)/,Z=Me.match(new RegExp(ue.source+me.source+be.source+b.source+be.source+b.source+be.source+b.source+be.source+b.source+be.source+b.source+be.source+b.source+be.source+b.source+be.source+b.source+K.source));if(Z){for(var oe=1+Z[1].length,Ee=0;Ee<_e;Ee++)Z[Ee*3+2]&&(oe+=Z[Ee*3+2].length),Z[Ee*3+3]&&(oe+=Z[Ee*3+3].length),Z[Ee*3+4]&&(oe+=Z[Ee*3+4].length),Z[Ee*3+5]&&(oe+=Z[Ee*3+5].length);Z[_e*3+2]&&(oe+=Z[Ee*3+2].length),q+=oe;var Y=Z[_e*3+3]?Z[_e*3+3].length:0;Y+=Z[_e*3+4]?Z[_e*3+4].length:0,Y+=Z[_e*3+5]?Z[_e*3+5].length:0,T=q+Y}return{start:q,end:T,note:se}}function z(Q,q,T,se){var _e=Q.substring(q,T).match(/([^"]+)?(".+")+/);return _e[1]&&(q+=_e[1].length),T=q+_e[2].length,{start:q+1,end:T-1,note:se}}function ne(Q,q,T){if(!Q&&T&&(Q=T),!Q)return 0;switch(q){case void 0:switch(Q){case"__":return-2;case"_":return-1;case"=":return 0;case"^":return 1;case"^^":return 2;default:return 0}case"_":switch(Q){case"__":return-1;case"_":return 0;case"=":return 1;case"^":return 2;case"^^":return 3;default:return 0}case"^":switch(Q){case"__":return-3;case"_":return-2;case"=":return-1;case"^":return 0;case"^^":return 1;default:return 0}}return 0}})();gA.exports=mA});var bA=et((rCe,vA)=>{var gd=function(n,e,i,r){this.type="BeamElem",this.isflat=!!i,this.isgrace=!!(e&&e==="grace"),this.forceup=!!(this.isgrace||e&&e==="up"),this.forcedown=!!(e&&e==="down"),this.elems=[],this.total=0,this.average=6,this.allrests=!0,this.stemHeight=n,this.beams=[],r&&r.duration?(this.duration=r.duration,r.startTriplet&&(this.duration*=r.tripletMultiplier),this.duration=Math.round(this.duration*1e3)/1e3):this.duration=0};gd.prototype.setHint=function(){this.hint=!0};gd.prototype.runningDirection=function(t){var n=t.averagepitch;n!==void 0&&(this.total=Math.round(this.total+n),this.count||(this.count=0),this.count++)};gd.prototype.add=function(t){var n=t.abcelem.averagepitch;n!==void 0&&(t.abcelem.rest||(this.allrests=!1),t.beam=this,this.elems.push(t),this.total=Math.round(this.total+n),(this.min===void 0||t.abcelem.minpitch<this.min)&&(this.min=t.abcelem.minpitch),(this.max===void 0||t.abcelem.maxpitch>this.max)&&(this.max=t.abcelem.maxpitch))};gd.prototype.addBeam=function(t){this.beams.push(t)};gd.prototype.setStemDirection=function(){if(this.average=yA(this.total,this.count),this.forceup)this.stemsUp=!0;else if(this.forcedown)this.stemsUp=!1;else{var t=6;this.stemsUp=this.average<t}delete this.count,this.total=0};gd.prototype.calcDir=function(){if(this.average=yA(this.total,this.elems.length),this.forceup)this.stemsUp=!0;else if(this.forcedown)this.stemsUp=!1;else{var t=6;this.stemsUp=this.average<t}for(var n=this.stemsUp?"up":"down",e=0;e<this.elems.length;e++)for(var i=0;i<this.elems[e].heads.length;i++)this.elems[e].heads[i].stemDir=n};function yA(t,n){return n?t/n:0}vA.exports=gd});var CA=et((oCe,xA)=>{var _p=function(n,e){this.startVoice=n,this.type=e};_p.prototype.setBottomStaff=function(t){this.endVoice=t,this.startVoice.header&&!this.endVoice.header&&(this.header=this.startVoice.header,delete this.startVoice.header)};_p.prototype.continuing=function(t){this.lastContinuedVoice=t};_p.prototype.getWidth=function(){return 10};_p.prototype.isStartVoice=function(t){return!!(this.startVoice&&this.startVoice.staff&&this.startVoice.staff.voices.length>0&&this.startVoice.staff.voices[0]===t)};xA.exports=_p});var Sl=et((sCe,MA)=>{var aq=No(),gs={0:{d:[["M",4.83,-14.97],["c",.33,-.03,1.11,0,1.47,.06],["c",1.68,.36,2.97,1.59,3.78,3.6],["c",1.2,2.97,.81,6.96,-.9,9.27],["c",-.78,1.08,-1.71,1.71,-2.91,1.95],["c",-.45,.09,-1.32,.09,-1.77,0],["c",-.81,-.18,-1.47,-.51,-2.07,-1.02],["c",-2.34,-2.07,-3.15,-6.72,-1.74,-10.2],["c",.87,-2.16,2.28,-3.42,4.14,-3.66],["z"],["m",1.11,.87],["c",-.21,-.06,-.69,-.09,-.87,-.06],["c",-.54,.12,-.87,.42,-1.17,.99],["c",-.36,.66,-.51,1.56,-.6,3],["c",-.03,.75,-.03,4.59,0,5.31],["c",.09,1.5,.27,2.4,.6,3.06],["c",.24,.48,.57,.78,.96,.9],["c",.27,.09,.78,.09,1.05,0],["c",.39,-.12,.72,-.42,.96,-.9],["c",.33,-.66,.51,-1.56,.6,-3.06],["c",.03,-.72,.03,-4.56,0,-5.31],["c",-.09,-1.47,-.27,-2.37,-.6,-3.03],["c",-.24,-.48,-.54,-.78,-.93,-.9],["z"]],w:10.78,h:14.959},1:{d:[["M",3.3,-15.06],["c",.06,-.06,.21,-.03,.66,.15],["c",.81,.39,1.08,.39,1.83,.03],["c",.21,-.09,.39,-.15,.42,-.15],["c",.12,0,.21,.09,.27,.21],["c",.06,.12,.06,.33,.06,5.94],["c",0,3.93,0,5.85,.03,6.03],["c",.06,.36,.15,.69,.27,.96],["c",.36,.75,.93,1.17,1.68,1.26],["c",.3,.03,.39,.09,.39,.3],["c",0,.15,-.03,.18,-.09,.24],["c",-.06,.06,-.09,.06,-.48,.06],["c",-.42,0,-.69,-.03,-2.1,-.24],["c",-.9,-.15,-1.77,-.15,-2.67,0],["c",-1.41,.21,-1.68,.24,-2.1,.24],["c",-.39,0,-.42,0,-.48,-.06],["c",-.06,-.06,-.06,-.09,-.06,-.24],["c",0,-.21,.06,-.27,.36,-.3],["c",.75,-.09,1.32,-.51,1.68,-1.26],["c",.12,-.27,.21,-.6,.27,-.96],["c",.03,-.18,.03,-1.59,.03,-4.29],["c",0,-3.87,0,-4.05,-.06,-4.14],["c",-.09,-.15,-.18,-.24,-.39,-.24],["c",-.12,0,-.15,.03,-.21,.06],["c",-.03,.06,-.45,.99,-.96,2.13],["c",-.48,1.14,-.9,2.1,-.93,2.16],["c",-.06,.15,-.21,.24,-.33,.24],["c",-.24,0,-.42,-.18,-.42,-.39],["c",0,-.06,3.27,-7.62,3.33,-7.74],["z"]],w:8.94,h:15.058},2:{d:[["M",4.23,-14.97],["c",.57,-.06,1.68,0,2.34,.18],["c",.69,.18,1.5,.54,2.01,.9],["c",1.35,.96,1.95,2.25,1.77,3.81],["c",-.15,1.35,-.66,2.34,-1.68,3.15],["c",-.6,.48,-1.44,.93,-3.12,1.65],["c",-1.32,.57,-1.8,.81,-2.37,1.14],["c",-.57,.33,-.57,.33,-.24,.27],["c",.39,-.09,1.26,-.09,1.68,0],["c",.72,.15,1.41,.45,2.1,.9],["c",.99,.63,1.86,.87,2.55,.75],["c",.24,-.06,.42,-.15,.57,-.3],["c",.12,-.09,.3,-.42,.3,-.51],["c",0,-.09,.12,-.21,.24,-.24],["c",.18,-.03,.39,.12,.39,.3],["c",0,.12,-.15,.57,-.3,.87],["c",-.54,1.02,-1.56,1.74,-2.79,2.01],["c",-.42,.09,-1.23,.09,-1.62,.03],["c",-.81,-.18,-1.32,-.45,-2.01,-1.11],["c",-.45,-.45,-.63,-.57,-.96,-.69],["c",-.84,-.27,-1.89,.12,-2.25,.9],["c",-.12,.21,-.21,.54,-.21,.72],["c",0,.12,-.12,.21,-.27,.24],["c",-.15,0,-.27,-.03,-.33,-.15],["c",-.09,-.21,.09,-1.08,.33,-1.71],["c",.24,-.66,.66,-1.26,1.29,-1.89],["c",.45,-.45,.9,-.81,1.92,-1.56],["c",1.29,-.93,1.89,-1.44,2.34,-1.98],["c",.87,-1.05,1.26,-2.19,1.2,-3.63],["c",-.06,-1.29,-.39,-2.31,-.96,-2.91],["c",-.36,-.33,-.72,-.51,-1.17,-.54],["c",-.84,-.03,-1.53,.42,-1.59,1.05],["c",-.03,.33,.12,.6,.57,1.14],["c",.45,.54,.54,.87,.42,1.41],["c",-.15,.63,-.54,1.11,-1.08,1.38],["c",-.63,.33,-1.2,.33,-1.83,0],["c",-.24,-.12,-.33,-.18,-.54,-.39],["c",-.18,-.18,-.27,-.3,-.36,-.51],["c",-.24,-.45,-.27,-.84,-.21,-1.38],["c",.12,-.75,.45,-1.41,1.02,-1.98],["c",.72,-.72,1.74,-1.17,2.85,-1.32],["z"]],w:10.764,h:14.97},3:{d:[["M",3.78,-14.97],["c",.3,-.03,1.41,0,1.83,.06],["c",2.22,.3,3.51,1.32,3.72,2.91],["c",.03,.33,.03,1.26,-.03,1.65],["c",-.12,.84,-.48,1.47,-1.05,1.77],["c",-.27,.15,-.36,.24,-.45,.39],["c",-.09,.21,-.09,.36,0,.57],["c",.09,.15,.18,.24,.51,.39],["c",.75,.42,1.23,1.14,1.41,2.13],["c",.06,.42,.06,1.35,0,1.71],["c",-.18,.81,-.48,1.38,-1.02,1.95],["c",-.75,.72,-1.8,1.2,-3.18,1.38],["c",-.42,.06,-1.56,.06,-1.95,0],["c",-1.89,-.33,-3.18,-1.29,-3.51,-2.64],["c",-.03,-.12,-.03,-.33,-.03,-.6],["c",0,-.36,0,-.42,.06,-.63],["c",.12,-.3,.27,-.51,.51,-.75],["c",.24,-.24,.45,-.39,.75,-.51],["c",.21,-.06,.27,-.06,.6,-.06],["c",.33,0,.39,0,.6,.06],["c",.3,.12,.51,.27,.75,.51],["c",.36,.33,.57,.75,.6,1.2],["c",0,.21,0,.27,-.06,.42],["c",-.09,.18,-.12,.24,-.54,.54],["c",-.51,.36,-.63,.54,-.6,.87],["c",.06,.54,.54,.9,1.38,.99],["c",.36,.06,.72,.03,.96,-.06],["c",.81,-.27,1.29,-1.23,1.44,-2.79],["c",.03,-.45,.03,-1.95,-.03,-2.37],["c",-.09,-.75,-.33,-1.23,-.75,-1.44],["c",-.33,-.18,-.45,-.18,-1.98,-.18],["c",-1.35,0,-1.41,0,-1.5,-.06],["c",-.18,-.12,-.24,-.39,-.12,-.6],["c",.12,-.15,.15,-.15,1.68,-.15],["c",1.5,0,1.62,0,1.89,-.15],["c",.18,-.09,.42,-.36,.54,-.57],["c",.18,-.42,.27,-.9,.3,-1.95],["c",.03,-1.2,-.06,-1.8,-.36,-2.37],["c",-.24,-.48,-.63,-.81,-1.14,-.96],["c",-.3,-.06,-1.08,-.06,-1.38,.03],["c",-.6,.15,-.9,.42,-.96,.84],["c",-.03,.3,.06,.45,.63,.84],["c",.33,.24,.42,.39,.45,.63],["c",.03,.72,-.57,1.5,-1.32,1.65],["c",-1.05,.27,-2.1,-.57,-2.1,-1.65],["c",0,-.45,.15,-.96,.39,-1.38],["c",.12,-.21,.54,-.63,.81,-.81],["c",.57,-.42,1.38,-.69,2.25,-.81],["z"]],w:9.735,h:14.967},4:{d:[["M",8.64,-14.94],["c",.27,-.09,.42,-.12,.54,-.03],["c",.09,.06,.15,.21,.15,.3],["c",-.03,.06,-1.92,2.31,-4.23,5.04],["c",-2.31,2.73,-4.23,4.98,-4.26,5.01],["c",-.03,.06,.12,.06,2.55,.06],["l",2.61,0],["l",0,-2.37],["c",0,-2.19,.03,-2.37,.06,-2.46],["c",.03,-.06,.21,-.18,.57,-.42],["c",1.08,-.72,1.38,-1.08,1.86,-2.16],["c",.12,-.3,.24,-.54,.27,-.57],["c",.12,-.12,.39,-.06,.45,.12],["c",.06,.09,.06,.57,.06,3.96],["l",0,3.9],["l",1.08,0],["c",1.05,0,1.11,0,1.2,.06],["c",.24,.15,.24,.54,0,.69],["c",-.09,.06,-.15,.06,-1.2,.06],["l",-1.08,0],["l",0,.33],["c",0,.57,.09,1.11,.3,1.53],["c",.36,.75,.93,1.17,1.68,1.26],["c",.3,.03,.39,.09,.39,.3],["c",0,.15,-.03,.18,-.09,.24],["c",-.06,.06,-.09,.06,-.48,.06],["c",-.42,0,-.69,-.03,-2.1,-.24],["c",-.9,-.15,-1.77,-.15,-2.67,0],["c",-1.41,.21,-1.68,.24,-2.1,.24],["c",-.39,0,-.42,0,-.48,-.06],["c",-.06,-.06,-.06,-.09,-.06,-.24],["c",0,-.21,.06,-.27,.36,-.3],["c",.75,-.09,1.32,-.51,1.68,-1.26],["c",.21,-.42,.3,-.96,.3,-1.53],["l",0,-.33],["l",-2.7,0],["c",-2.91,0,-2.85,0,-3.09,-.15],["c",-.18,-.12,-.3,-.39,-.27,-.54],["c",.03,-.06,.18,-.24,.33,-.45],["c",.75,-.9,1.59,-2.07,2.13,-3.03],["c",.33,-.54,.84,-1.62,1.05,-2.16],["c",.57,-1.41,.84,-2.64,.9,-4.05],["c",.03,-.63,.06,-.72,.24,-.81],["l",.12,-.06],["l",.45,.12],["c",.66,.18,1.02,.24,1.47,.27],["c",.6,.03,1.23,-.09,2.01,-.33],["z"]],w:11.795,h:14.994},5:{d:[["M",1.02,-14.94],["c",.12,-.09,.03,-.09,1.08,.06],["c",2.49,.36,4.35,.36,6.96,-.06],["c",.57,-.09,.66,-.06,.81,.06],["c",.15,.18,.12,.24,-.15,.51],["c",-1.29,1.26,-3.24,2.04,-5.58,2.31],["c",-.6,.09,-1.2,.12,-1.71,.12],["c",-.39,0,-.45,0,-.57,.06],["c",-.09,.06,-.15,.12,-.21,.21],["l",-.06,.12],["l",0,1.65],["l",0,1.65],["l",.21,-.21],["c",.66,-.57,1.41,-.96,2.19,-1.14],["c",.33,-.06,1.41,-.06,1.95,0],["c",2.61,.36,4.02,1.74,4.26,4.14],["c",.03,.45,.03,1.08,-.03,1.44],["c",-.18,1.02,-.78,2.01,-1.59,2.7],["c",-.72,.57,-1.62,1.02,-2.49,1.2],["c",-1.38,.27,-3.03,.06,-4.2,-.54],["c",-1.08,-.54,-1.71,-1.32,-1.86,-2.28],["c",-.09,-.69,.09,-1.29,.57,-1.74],["c",.24,-.24,.45,-.39,.75,-.51],["c",.21,-.06,.27,-.06,.6,-.06],["c",.33,0,.39,0,.6,.06],["c",.3,.12,.51,.27,.75,.51],["c",.36,.33,.57,.75,.6,1.2],["c",0,.21,0,.27,-.06,.42],["c",-.09,.18,-.12,.24,-.54,.54],["c",-.18,.12,-.36,.3,-.42,.33],["c",-.36,.42,-.18,.99,.36,1.26],["c",.51,.27,1.47,.36,2.01,.27],["c",.93,-.21,1.47,-1.17,1.65,-2.91],["c",.06,-.45,.06,-1.89,0,-2.31],["c",-.15,-1.2,-.51,-2.1,-1.05,-2.55],["c",-.21,-.18,-.54,-.36,-.81,-.39],["c",-.3,-.06,-.84,-.03,-1.26,.06],["c",-.93,.18,-1.65,.6,-2.16,1.2],["c",-.15,.21,-.27,.3,-.39,.3],["c",-.15,0,-.3,-.09,-.36,-.18],["c",-.06,-.09,-.06,-.15,-.06,-3.66],["c",0,-3.39,0,-3.57,.06,-3.66],["c",.03,-.06,.09,-.15,.15,-.18],["z"]],w:10.212,h:14.997},6:{d:[["M",4.98,-14.97],["c",.36,-.03,1.2,0,1.59,.06],["c",.9,.15,1.68,.51,2.25,1.05],["c",.57,.51,.87,1.23,.84,1.98],["c",-.03,.51,-.21,.9,-.6,1.26],["c",-.24,.24,-.45,.39,-.75,.51],["c",-.21,.06,-.27,.06,-.6,.06],["c",-.33,0,-.39,0,-.6,-.06],["c",-.3,-.12,-.51,-.27,-.75,-.51],["c",-.39,-.36,-.57,-.78,-.57,-1.26],["c",0,-.27,0,-.3,.09,-.42],["c",.03,-.09,.18,-.21,.3,-.3],["c",.12,-.09,.3,-.21,.39,-.27],["c",.09,-.06,.21,-.18,.27,-.24],["c",.06,-.12,.09,-.15,.09,-.33],["c",0,-.18,-.03,-.24,-.09,-.36],["c",-.24,-.39,-.75,-.6,-1.38,-.57],["c",-.54,.03,-.9,.18,-1.23,.48],["c",-.81,.72,-1.08,2.16,-.96,5.37],["l",0,.63],["l",.3,-.12],["c",.78,-.27,1.29,-.33,2.1,-.27],["c",1.47,.12,2.49,.54,3.27,1.29],["c",.48,.51,.81,1.11,.96,1.89],["c",.06,.27,.06,.42,.06,.93],["c",0,.54,0,.69,-.06,.96],["c",-.15,.78,-.48,1.38,-.96,1.89],["c",-.54,.51,-1.17,.87,-1.98,1.08],["c",-1.14,.3,-2.4,.33,-3.24,.03],["c",-1.5,-.48,-2.64,-1.89,-3.27,-4.02],["c",-.36,-1.23,-.51,-2.82,-.42,-4.08],["c",.3,-3.66,2.28,-6.3,4.95,-6.66],["z"],["m",.66,7.41],["c",-.27,-.09,-.81,-.12,-1.08,-.06],["c",-.72,.18,-1.08,.69,-1.23,1.71],["c",-.06,.54,-.06,3,0,3.54],["c",.18,1.26,.72,1.77,1.8,1.74],["c",.39,-.03,.63,-.09,.9,-.27],["c",.66,-.42,.9,-1.32,.9,-3.24],["c",0,-2.22,-.36,-3.12,-1.29,-3.42],["z"]],w:9.956,h:14.982},7:{d:[["M",.21,-14.97],["c",.21,-.06,.45,0,.54,.15],["c",.06,.09,.06,.15,.06,.39],["c",0,.24,0,.33,.06,.42],["c",.06,.12,.21,.24,.27,.24],["c",.03,0,.12,-.12,.24,-.21],["c",.96,-1.2,2.58,-1.35,3.99,-.42],["c",.15,.12,.42,.3,.54,.45],["c",.48,.39,.81,.57,1.29,.6],["c",.69,.03,1.5,-.3,2.13,-.87],["c",.09,-.09,.27,-.3,.39,-.45],["c",.12,-.15,.24,-.27,.3,-.3],["c",.18,-.06,.39,.03,.51,.21],["c",.06,.18,.06,.24,-.27,.72],["c",-.18,.24,-.54,.78,-.78,1.17],["c",-2.37,3.54,-3.54,6.27,-3.87,9],["c",-.03,.33,-.03,.66,-.03,1.26],["c",0,.9,0,1.08,.15,1.89],["c",.06,.45,.06,.48,.03,.6],["c",-.06,.09,-.21,.21,-.3,.21],["c",-.03,0,-.27,-.06,-.54,-.15],["c",-.84,-.27,-1.11,-.3,-1.65,-.3],["c",-.57,0,-.84,.03,-1.56,.27],["c",-.6,.18,-.69,.21,-.81,.15],["c",-.12,-.06,-.21,-.18,-.21,-.3],["c",0,-.15,.6,-1.44,1.2,-2.61],["c",1.14,-2.22,2.73,-4.68,5.1,-8.01],["c",.21,-.27,.36,-.48,.33,-.48],["c",0,0,-.12,.06,-.27,.12],["c",-.54,.3,-.99,.39,-1.56,.39],["c",-.75,.03,-1.2,-.18,-1.83,-.75],["c",-.99,-.9,-1.83,-1.17,-2.31,-.72],["c",-.18,.15,-.36,.51,-.45,.84],["c",-.06,.24,-.06,.33,-.09,1.98],["c",0,1.62,-.03,1.74,-.06,1.8],["c",-.15,.24,-.54,.24,-.69,0],["c",-.06,-.09,-.06,-.15,-.06,-3.57],["c",0,-3.42,0,-3.48,.06,-3.57],["c",.03,-.06,.09,-.12,.15,-.15],["z"]],w:10.561,h:15.093},8:{d:[["M",4.98,-14.97],["c",.33,-.03,1.02,-.03,1.32,0],["c",1.32,.12,2.49,.6,3.21,1.32],["c",.39,.39,.66,.81,.78,1.29],["c",.09,.36,.09,1.08,0,1.44],["c",-.21,.84,-.66,1.59,-1.59,2.55],["l",-.3,.3],["l",.27,.18],["c",1.47,.93,2.31,2.31,2.25,3.75],["c",-.03,.75,-.24,1.35,-.63,1.95],["c",-.45,.66,-1.02,1.14,-1.83,1.53],["c",-1.8,.87,-4.2,.87,-6,.03],["c",-1.62,-.78,-2.52,-2.16,-2.46,-3.66],["c",.06,-.99,.54,-1.77,1.8,-2.97],["c",.54,-.51,.54,-.54,.48,-.57],["c",-.39,-.27,-.96,-.78,-1.2,-1.14],["c",-.75,-1.11,-.87,-2.4,-.3,-3.6],["c",.69,-1.35,2.25,-2.25,4.2,-2.4],["z"],["m",1.53,.69],["c",-.42,-.09,-1.11,-.12,-1.38,-.06],["c",-.3,.06,-.6,.18,-.81,.3],["c",-.21,.12,-.6,.51,-.72,.72],["c",-.51,.87,-.42,1.89,.21,2.52],["c",.21,.21,.36,.3,1.95,1.23],["c",.96,.54,1.74,.99,1.77,1.02],["c",.09,0,.63,-.6,.99,-1.11],["c",.21,-.36,.48,-.87,.57,-1.23],["c",.06,-.24,.06,-.36,.06,-.72],["c",0,-.45,-.03,-.66,-.15,-.99],["c",-.39,-.81,-1.29,-1.44,-2.49,-1.68],["z"],["m",-1.44,8.07],["l",-1.89,-1.08],["c",-.03,0,-.18,.15,-.39,.33],["c",-1.2,1.08,-1.65,1.95,-1.59,3],["c",.09,1.59,1.35,2.85,3.21,3.24],["c",.33,.06,.45,.06,.93,.06],["c",.63,0,.81,-.03,1.29,-.27],["c",.9,-.42,1.47,-1.41,1.41,-2.4],["c",-.06,-.66,-.39,-1.29,-.9,-1.65],["c",-.12,-.09,-1.05,-.63,-2.07,-1.23],["z"]],w:10.926,h:14.989},9:{d:[["M",4.23,-14.97],["c",.42,-.03,1.29,0,1.62,.06],["c",.51,.12,.93,.3,1.38,.57],["c",1.53,1.02,2.52,3.24,2.73,5.94],["c",.18,2.55,-.48,4.98,-1.83,6.57],["c",-1.05,1.26,-2.4,1.89,-3.93,1.83],["c",-1.23,-.06,-2.31,-.45,-3.03,-1.14],["c",-.57,-.51,-.87,-1.23,-.84,-1.98],["c",.03,-.51,.21,-.9,.6,-1.26],["c",.24,-.24,.45,-.39,.75,-.51],["c",.21,-.06,.27,-.06,.6,-.06],["c",.33,0,.39,0,.6,.06],["c",.3,.12,.51,.27,.75,.51],["c",.39,.36,.57,.78,.57,1.26],["c",0,.27,0,.3,-.09,.42],["c",-.03,.09,-.18,.21,-.3,.3],["c",-.12,.09,-.3,.21,-.39,.27],["c",-.09,.06,-.21,.18,-.27,.24],["c",-.06,.12,-.06,.15,-.06,.33],["c",0,.18,0,.24,.06,.36],["c",.24,.39,.75,.6,1.38,.57],["c",.54,-.03,.9,-.18,1.23,-.48],["c",.81,-.72,1.08,-2.16,.96,-5.37],["l",0,-.63],["l",-.3,.12],["c",-.78,.27,-1.29,.33,-2.1,.27],["c",-1.47,-.12,-2.49,-.54,-3.27,-1.29],["c",-.48,-.51,-.81,-1.11,-.96,-1.89],["c",-.06,-.27,-.06,-.42,-.06,-.96],["c",0,-.51,0,-.66,.06,-.93],["c",.15,-.78,.48,-1.38,.96,-1.89],["c",.15,-.12,.33,-.27,.42,-.36],["c",.69,-.51,1.62,-.81,2.76,-.93],["z"],["m",1.17,.66],["c",-.21,-.06,-.57,-.06,-.81,-.03],["c",-.78,.12,-1.26,.69,-1.41,1.74],["c",-.12,.63,-.15,1.95,-.09,2.79],["c",.12,1.71,.63,2.4,1.77,2.46],["c",1.08,.03,1.62,-.48,1.8,-1.74],["c",.06,-.54,.06,-3,0,-3.54],["c",-.15,-1.05,-.51,-1.53,-1.26,-1.68],["z"]],w:9.959,h:14.986},"rests.multimeasure":{d:[["M",0,-4],["l",0,16],["l",1,0],["l",0,-5],["l",40,0],["l",0,5],["l",1,0],["l",0,-16],["l",-1,0],["l",0,5],["l",-40,0],["l",0,-5],["z"]],w:42,h:18},"rests.whole":{d:[["M",.06,.03],["l",.09,-.06],["l",5.46,0],["l",5.49,0],["l",.09,.06],["l",.06,.09],["l",0,2.19],["l",0,2.19],["l",-.06,.09],["l",-.09,.06],["l",-5.49,0],["l",-5.46,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-2.19],["l",0,-2.19],["z"]],w:11.25,h:4.68},"rests.half":{d:[["M",.06,-4.62],["l",.09,-.06],["l",5.46,0],["l",5.49,0],["l",.09,.06],["l",.06,.09],["l",0,2.19],["l",0,2.19],["l",-.06,.09],["l",-.09,.06],["l",-5.49,0],["l",-5.46,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-2.19],["l",0,-2.19],["z"]],w:11.25,h:4.68},"rests.quarter":{d:[["M",1.89,-11.82],["c",.12,-.06,.24,-.06,.36,-.03],["c",.09,.06,4.74,5.58,4.86,5.82],["c",.21,.39,.15,.78,-.15,1.26],["c",-.24,.33,-.72,.81,-1.62,1.56],["c",-.45,.36,-.87,.75,-.96,.84],["c",-.93,.99,-1.14,2.49,-.6,3.63],["c",.18,.39,.27,.48,1.32,1.68],["c",1.92,2.25,1.83,2.16,1.83,2.34],["c",0,.18,-.18,.36,-.36,.39],["c",-.15,0,-.27,-.06,-.48,-.27],["c",-.75,-.75,-2.46,-1.29,-3.39,-1.08],["c",-.45,.09,-.69,.27,-.9,.69],["c",-.12,.3,-.21,.66,-.24,1.14],["c",-.03,.66,.09,1.35,.3,2.01],["c",.15,.42,.24,.66,.45,.96],["c",.18,.24,.18,.33,.03,.42],["c",-.12,.06,-.18,.03,-.45,-.3],["c",-1.08,-1.38,-2.07,-3.36,-2.4,-4.83],["c",-.27,-1.05,-.15,-1.77,.27,-2.07],["c",.21,-.12,.42,-.15,.87,-.15],["c",.87,.06,2.1,.39,3.3,.9],["l",.39,.18],["l",-1.65,-1.95],["c",-2.52,-2.97,-2.61,-3.09,-2.7,-3.27],["c",-.09,-.24,-.12,-.48,-.03,-.75],["c",.15,-.48,.57,-.96,1.83,-2.01],["c",.45,-.36,.84,-.72,.93,-.78],["c",.69,-.75,1.02,-1.8,.9,-2.79],["c",-.06,-.33,-.21,-.84,-.39,-1.11],["c",-.09,-.15,-.45,-.6,-.81,-1.05],["c",-.36,-.42,-.69,-.81,-.72,-.87],["c",-.09,-.18,0,-.42,.21,-.51],["z"]],w:7.888,h:21.435},"rests.8th":{d:[["M",1.68,-6.12],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.12,0,.18,0,.33,-.09],["c",.39,-.18,1.32,-1.29,1.68,-1.98],["c",.09,-.21,.24,-.3,.39,-.3],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.27,1.11,-1.86,6.42],["c",-1.02,3.48,-1.89,6.39,-1.92,6.42],["c",0,.03,-.12,.12,-.24,.15],["c",-.18,.09,-.21,.09,-.45,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.15,-.57,1.68,-4.92],["c",.96,-2.67,1.74,-4.89,1.71,-4.89],["l",-.51,.15],["c",-1.08,.36,-1.74,.48,-2.55,.48],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:7.534,h:13.883},"rests.16th":{d:[["M",3.33,-6.12],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.15,.39,.57,.57,.87,.42],["c",.39,-.18,1.2,-1.23,1.62,-2.07],["c",.06,-.15,.24,-.24,.36,-.24],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.45,1.86,-2.67,10.17],["c",-1.5,5.55,-2.73,10.14,-2.76,10.17],["c",-.03,.03,-.12,.12,-.24,.15],["c",-.18,.09,-.21,.09,-.45,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.12,-.57,1.44,-4.92],["c",.81,-2.67,1.47,-4.86,1.47,-4.89],["c",-.03,0,-.27,.06,-.54,.15],["c",-1.08,.36,-1.77,.48,-2.58,.48],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.09,.09,.27,.18,.45,.21],["c",.12,0,.18,0,.33,-.09],["c",.33,-.15,1.02,-.93,1.41,-1.59],["c",.12,-.21,.18,-.39,.39,-1.08],["c",.66,-2.1,1.17,-3.84,1.17,-3.87],["c",0,0,-.21,.06,-.42,.15],["c",-.51,.15,-1.2,.33,-1.68,.42],["c",-.33,.06,-.51,.06,-.96,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:9.724,h:21.383},"rests.32nd":{d:[["M",4.23,-13.62],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.12,0,.18,0,.27,-.06],["c",.33,-.21,.99,-1.11,1.44,-1.98],["c",.09,-.24,.21,-.33,.39,-.33],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.57,2.67,-3.21,13.89],["c",-1.8,7.62,-3.3,13.89,-3.3,13.92],["c",-.03,.06,-.12,.12,-.24,.18],["c",-.21,.09,-.24,.09,-.48,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.09,-.57,1.23,-4.92],["c",.69,-2.67,1.26,-4.86,1.29,-4.89],["c",0,-.03,-.12,-.03,-.48,.12],["c",-1.17,.39,-2.22,.57,-3,.54],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.12,.09,.3,.18,.48,.21],["c",.12,0,.18,0,.3,-.09],["c",.42,-.21,1.29,-1.29,1.56,-1.89],["c",.03,-.12,1.23,-4.59,1.23,-4.65],["c",0,-.03,-.18,.03,-.39,.12],["c",-.63,.18,-1.2,.36,-1.74,.45],["c",-.39,.06,-.54,.06,-1.02,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.18,.18,.51,.27,.72,.15],["c",.3,-.12,.69,-.57,1.08,-1.17],["c",.42,-.6,.39,-.51,1.05,-3.03],["c",.33,-1.26,.6,-2.31,.6,-2.34],["c",0,0,-.21,.03,-.45,.12],["c",-.57,.18,-1.14,.33,-1.62,.42],["c",-.33,.06,-.51,.06,-.96,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:11.373,h:28.883},"rests.64th":{d:[["M",5.13,-13.62],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.18,.21,.54,.3,.75,.18],["c",.24,-.12,.63,-.66,1.08,-1.56],["c",.33,-.66,.39,-.72,.6,-.72],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.69,3.66,-3.54,17.64],["c",-1.95,9.66,-3.57,17.61,-3.57,17.64],["c",-.03,.06,-.12,.12,-.24,.18],["c",-.21,.09,-.24,.09,-.48,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.06,-.57,1.05,-4.95],["c",.6,-2.7,1.08,-4.89,1.08,-4.92],["c",0,0,-.24,.06,-.51,.15],["c",-.66,.24,-1.2,.36,-1.77,.48],["c",-.42,.06,-.57,.06,-1.05,.06],["c",-.69,0,-.87,-.03,-1.35,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.09,.09,.27,.18,.45,.21],["c",.21,.03,.39,-.09,.72,-.42],["c",.45,-.45,1.02,-1.26,1.17,-1.65],["c",.03,-.09,.27,-1.14,.54,-2.34],["c",.27,-1.2,.48,-2.19,.51,-2.22],["c",0,-.03,-.09,-.03,-.48,.12],["c",-1.17,.39,-2.22,.57,-3,.54],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.15,.39,.57,.57,.9,.42],["c",.36,-.18,1.2,-1.26,1.47,-1.89],["c",.03,-.09,.3,-1.2,.57,-2.43],["l",.51,-2.28],["l",-.54,.18],["c",-1.11,.36,-1.8,.48,-2.61,.48],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.21,.21,.54,.3,.75,.18],["c",.36,-.18,.93,-.93,1.29,-1.68],["c",.12,-.24,.18,-.48,.63,-2.55],["l",.51,-2.31],["c",0,-.03,-.18,.03,-.39,.12],["c",-1.14,.36,-2.1,.54,-2.82,.51],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:12.453,h:36.383},"rests.128th":{d:[["M",6.03,-21.12],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.21,0,.33,-.06,.54,-.36],["c",.15,-.21,.54,-.93,.78,-1.47],["c",.15,-.33,.18,-.39,.3,-.48],["c",.18,-.09,.45,0,.51,.15],["c",.03,.09,-7.11,42.75,-7.17,42.84],["c",-.03,.03,-.15,.09,-.24,.15],["c",-.18,.06,-.24,.06,-.45,.06],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.03,-.57,.84,-4.98],["c",.51,-2.7,.93,-4.92,.9,-4.92],["c",0,0,-.15,.06,-.36,.12],["c",-.78,.27,-1.62,.48,-2.31,.57],["c",-.15,.03,-.54,.03,-.81,.03],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.63,.48],["c",.12,0,.18,0,.3,-.09],["c",.42,-.21,1.14,-1.11,1.5,-1.83],["c",.12,-.27,.12,-.27,.54,-2.52],["c",.24,-1.23,.42,-2.25,.39,-2.25],["c",0,0,-.24,.06,-.51,.18],["c",-1.26,.39,-2.25,.57,-3.06,.54],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.18,.21,.51,.3,.75,.18],["c",.36,-.15,1.05,-.99,1.41,-1.77],["l",.15,-.3],["l",.42,-2.25],["c",.21,-1.26,.42,-2.28,.39,-2.28],["l",-.51,.15],["c",-1.11,.39,-1.89,.51,-2.7,.51],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.18,.18,.48,.27,.72,.21],["c",.33,-.12,1.14,-1.26,1.41,-1.95],["c",0,-.09,.21,-1.11,.45,-2.34],["c",.21,-1.2,.39,-2.22,.39,-2.28],["c",.03,-.03,0,-.03,-.45,.12],["c",-.57,.18,-1.2,.33,-1.71,.42],["c",-.3,.06,-.51,.06,-.93,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.18,0,.36,-.09,.57,-.33],["c",.33,-.36,.78,-1.14,.93,-1.56],["c",.03,-.12,.24,-1.2,.45,-2.4],["c",.24,-1.2,.42,-2.22,.42,-2.28],["c",.03,-.03,0,-.03,-.39,.09],["c",-1.05,.36,-1.8,.48,-2.58,.48],["c",-.63,0,-.84,-.03,-1.29,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:12.992,h:43.883},"accidentals.sharp":{d:[["M",5.73,-11.19],["c",.21,-.12,.54,-.03,.66,.24],["c",.06,.12,.06,.21,.06,2.31],["c",0,1.23,0,2.22,.03,2.22],["c",0,0,.27,-.12,.6,-.24],["c",.69,-.27,.78,-.3,.96,-.15],["c",.21,.15,.21,.18,.21,1.38],["c",0,1.02,0,1.11,-.06,1.2],["c",-.03,.06,-.09,.12,-.12,.15],["c",-.06,.03,-.42,.21,-.84,.36],["l",-.75,.33],["l",-.03,2.43],["c",0,1.32,0,2.43,.03,2.43],["c",0,0,.27,-.12,.6,-.24],["c",.69,-.27,.78,-.3,.96,-.15],["c",.21,.15,.21,.18,.21,1.38],["c",0,1.02,0,1.11,-.06,1.2],["c",-.03,.06,-.09,.12,-.12,.15],["c",-.06,.03,-.42,.21,-.84,.36],["l",-.75,.33],["l",-.03,2.52],["c",0,2.28,-.03,2.55,-.06,2.64],["c",-.21,.36,-.72,.36,-.93,0],["c",-.03,-.09,-.06,-.33,-.06,-2.43],["l",0,-2.31],["l",-1.29,.51],["l",-1.26,.51],["l",0,2.43],["c",0,2.58,0,2.52,-.15,2.67],["c",-.06,.09,-.27,.18,-.36,.18],["c",-.12,0,-.33,-.09,-.39,-.18],["c",-.15,-.15,-.15,-.09,-.15,-2.43],["c",0,-1.23,0,-2.22,-.03,-2.22],["c",0,0,-.27,.12,-.6,.24],["c",-.69,.27,-.78,.3,-.96,.15],["c",-.21,-.15,-.21,-.18,-.21,-1.38],["c",0,-1.02,0,-1.11,.06,-1.2],["c",.03,-.06,.09,-.12,.12,-.15],["c",.06,-.03,.42,-.21,.84,-.36],["l",.78,-.33],["l",0,-2.43],["c",0,-1.32,0,-2.43,-.03,-2.43],["c",0,0,-.27,.12,-.6,.24],["c",-.69,.27,-.78,.3,-.96,.15],["c",-.21,-.15,-.21,-.18,-.21,-1.38],["c",0,-1.02,0,-1.11,.06,-1.2],["c",.03,-.06,.09,-.12,.12,-.15],["c",.06,-.03,.42,-.21,.84,-.36],["l",.78,-.33],["l",0,-2.52],["c",0,-2.28,.03,-2.55,.06,-2.64],["c",.21,-.36,.72,-.36,.93,0],["c",.03,.09,.06,.33,.06,2.43],["l",.03,2.31],["l",1.26,-.51],["l",1.26,-.51],["l",0,-2.43],["c",0,-2.28,0,-2.43,.06,-2.55],["c",.06,-.12,.12,-.18,.27,-.24],["z"],["m",-.33,10.65],["l",0,-2.43],["l",-1.29,.51],["l",-1.26,.51],["l",0,2.46],["l",0,2.43],["l",.09,-.03],["c",.06,-.03,.63,-.27,1.29,-.51],["l",1.17,-.48],["l",0,-2.46],["z"]],w:8.25,h:22.462},"accidentals.halfsharp":{d:[["M",2.43,-10.05],["c",.21,-.12,.54,-.03,.66,.24],["c",.06,.12,.06,.21,.06,2.01],["c",0,1.05,0,1.89,.03,1.89],["l",.72,-.48],["c",.69,-.48,.69,-.51,.87,-.51],["c",.15,0,.18,.03,.27,.09],["c",.21,.15,.21,.18,.21,1.41],["c",0,1.11,-.03,1.14,-.09,1.23],["c",-.03,.03,-.48,.39,-1.02,.75],["l",-.99,.66],["l",0,2.37],["c",0,1.32,0,2.37,.03,2.37],["l",.72,-.48],["c",.69,-.48,.69,-.51,.87,-.51],["c",.15,0,.18,.03,.27,.09],["c",.21,.15,.21,.18,.21,1.41],["c",0,1.11,-.03,1.14,-.09,1.23],["c",-.03,.03,-.48,.39,-1.02,.75],["l",-.99,.66],["l",0,2.25],["c",0,1.95,0,2.28,-.06,2.37],["c",-.06,.12,-.12,.21,-.24,.27],["c",-.27,.12,-.54,.03,-.69,-.24],["c",-.06,-.12,-.06,-.21,-.06,-2.01],["c",0,-1.05,0,-1.89,-.03,-1.89],["l",-.72,.48],["c",-.69,.48,-.69,.48,-.87,.48],["c",-.15,0,-.18,0,-.27,-.06],["c",-.21,-.15,-.21,-.18,-.21,-1.41],["c",0,-1.11,.03,-1.14,.09,-1.23],["c",.03,-.03,.48,-.39,1.02,-.75],["l",.99,-.66],["l",0,-2.37],["c",0,-1.32,0,-2.37,-.03,-2.37],["l",-.72,.48],["c",-.69,.48,-.69,.48,-.87,.48],["c",-.15,0,-.18,0,-.27,-.06],["c",-.21,-.15,-.21,-.18,-.21,-1.41],["c",0,-1.11,.03,-1.14,.09,-1.23],["c",.03,-.03,.48,-.39,1.02,-.75],["l",.99,-.66],["l",0,-2.25],["c",0,-2.13,0,-2.28,.06,-2.4],["c",.06,-.12,.12,-.18,.27,-.24],["z"]],w:5.25,h:20.174},"accidentals.nat":{d:[["M",.21,-11.4],["c",.24,-.06,.78,0,.99,.15],["c",.03,.03,.03,.48,0,2.61],["c",-.03,1.44,-.03,2.61,-.03,2.61],["c",0,.03,.75,-.09,1.68,-.24],["c",.96,-.18,1.71,-.27,1.74,-.27],["c",.15,.03,.27,.15,.36,.3],["l",.06,.12],["l",.09,8.67],["c",.09,6.96,.12,8.67,.09,8.67],["c",-.03,.03,-.12,.06,-.21,.09],["c",-.24,.09,-.72,.09,-.96,0],["c",-.09,-.03,-.18,-.06,-.21,-.09],["c",-.03,-.03,-.03,-.48,0,-2.61],["c",.03,-1.44,.03,-2.61,.03,-2.61],["c",0,-.03,-.75,.09,-1.68,.24],["c",-.96,.18,-1.71,.27,-1.74,.27],["c",-.15,-.03,-.27,-.15,-.36,-.3],["l",-.06,-.15],["l",-.09,-7.53],["c",-.06,-4.14,-.09,-8.04,-.12,-8.67],["l",0,-1.11],["l",.15,-.06],["c",.09,-.03,.21,-.06,.27,-.09],["z"],["m",3.75,8.4],["c",0,-.33,0,-.42,-.03,-.42],["c",-.12,0,-2.79,.45,-2.79,.48],["c",-.03,0,-.09,6.3,-.09,6.33],["c",.03,0,2.79,-.45,2.82,-.48],["c",0,0,.09,-4.53,.09,-5.91],["z"]],w:5.4,h:22.8},"accidentals.flat":{d:[["M",-.36,-14.07],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.36,-.03,5.25],["c",-.06,2.85,-.09,5.19,-.09,5.19],["c",0,.03,.12,-.03,.24,-.12],["c",.63,-.42,1.41,-.66,2.19,-.72],["c",.81,-.03,1.47,.21,2.04,.78],["c",.57,.54,.87,1.26,.93,2.04],["c",.03,.57,-.09,1.08,-.36,1.62],["c",-.42,.81,-1.02,1.38,-2.82,2.61],["c",-1.14,.78,-1.44,1.02,-1.8,1.44],["c",-.18,.18,-.39,.39,-.45,.42],["c",-.27,.18,-.57,.15,-.81,-.06],["c",-.06,-.09,-.12,-.18,-.15,-.27],["c",-.03,-.06,-.09,-3.27,-.18,-8.34],["c",-.09,-4.53,-.15,-8.58,-.18,-9.03],["l",0,-.78],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",3.18,11.01],["c",-.21,-.12,-.54,-.15,-.81,-.06],["c",-.54,.15,-.99,.63,-1.17,1.26],["c",-.06,.3,-.12,2.88,-.06,3.87],["c",.03,.42,.03,.81,.06,.9],["l",.03,.12],["l",.45,-.39],["c",.63,-.54,1.26,-1.17,1.56,-1.59],["c",.3,-.42,.6,-.99,.72,-1.41],["c",.18,-.69,.09,-1.47,-.18,-2.07],["c",-.15,-.3,-.33,-.51,-.6,-.63],["z"]],w:6.75,h:18.801},"accidentals.halfflat":{d:[["M",4.83,-14.07],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.6,-.12,9.06],["c",-.09,5.55,-.15,9.06,-.18,9.12],["c",-.03,.09,-.09,.18,-.15,.27],["c",-.24,.21,-.54,.24,-.81,.06],["c",-.06,-.03,-.27,-.24,-.45,-.42],["c",-.36,-.42,-.66,-.66,-1.8,-1.44],["c",-1.23,-.84,-1.83,-1.32,-2.25,-1.77],["c",-.66,-.78,-.96,-1.56,-.93,-2.46],["c",.09,-1.41,1.11,-2.58,2.4,-2.79],["c",.3,-.06,.84,-.03,1.23,.06],["c",.54,.12,1.08,.33,1.53,.63],["c",.12,.09,.24,.15,.24,.12],["c",0,0,-.12,-8.37,-.18,-9.75],["l",0,-.66],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",-1.65,10.95],["c",-.6,-.18,-1.08,.09,-1.38,.69],["c",-.27,.6,-.36,1.38,-.18,2.07],["c",.12,.42,.42,.99,.72,1.41],["c",.3,.42,.93,1.05,1.56,1.59],["l",.48,.39],["l",0,-.12],["c",.03,-.09,.03,-.48,.06,-.9],["c",.03,-.57,.03,-1.08,0,-2.22],["c",-.03,-1.62,-.03,-1.62,-.24,-2.07],["c",-.21,-.42,-.6,-.75,-1.02,-.84],["z"]],w:6.728,h:18.801},"accidentals.dblflat":{d:[["M",-.36,-14.07],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.36,-.03,5.25],["c",-.06,2.85,-.09,5.19,-.09,5.19],["c",0,.03,.12,-.03,.24,-.12],["c",.63,-.42,1.41,-.66,2.19,-.72],["c",.81,-.03,1.47,.21,2.04,.78],["c",.57,.54,.87,1.26,.93,2.04],["c",.03,.57,-.09,1.08,-.36,1.62],["c",-.42,.81,-1.02,1.38,-2.82,2.61],["c",-1.14,.78,-1.44,1.02,-1.8,1.44],["c",-.18,.18,-.39,.39,-.45,.42],["c",-.27,.18,-.57,.15,-.81,-.06],["c",-.06,-.09,-.12,-.18,-.15,-.27],["c",-.03,-.06,-.09,-3.27,-.18,-8.34],["c",-.09,-4.53,-.15,-8.58,-.18,-9.03],["l",0,-.78],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",3.18,11.01],["c",-.21,-.12,-.54,-.15,-.81,-.06],["c",-.54,.15,-.99,.63,-1.17,1.26],["c",-.06,.3,-.12,2.88,-.06,3.87],["c",.03,.42,.03,.81,.06,.9],["l",.03,.12],["l",.45,-.39],["c",.63,-.54,1.26,-1.17,1.56,-1.59],["c",.3,-.42,.6,-.99,.72,-1.41],["c",.18,-.69,.09,-1.47,-.18,-2.07],["c",-.15,-.3,-.33,-.51,-.6,-.63],["z"],["m",3,-11],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.36,-.03,5.25],["c",-.06,2.85,-.09,5.19,-.09,5.19],["c",0,.03,.12,-.03,.24,-.12],["c",.63,-.42,1.41,-.66,2.19,-.72],["c",.81,-.03,1.47,.21,2.04,.78],["c",.57,.54,.87,1.26,.93,2.04],["c",.03,.57,-.09,1.08,-.36,1.62],["c",-.42,.81,-1.02,1.38,-2.82,2.61],["c",-1.14,.78,-1.44,1.02,-1.8,1.44],["c",-.18,.18,-.39,.39,-.45,.42],["c",-.27,.18,-.57,.15,-.81,-.06],["c",-.06,-.09,-.12,-.18,-.15,-.27],["c",-.03,-.06,-.09,-3.27,-.18,-8.34],["c",-.09,-4.53,-.15,-8.58,-.18,-9.03],["l",0,-.78],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",3.18,11.01],["c",-.21,-.12,-.54,-.15,-.81,-.06],["c",-.54,.15,-.99,.63,-1.17,1.26],["c",-.06,.3,-.12,2.88,-.06,3.87],["c",.03,.42,.03,.81,.06,.9],["l",.03,.12],["l",.45,-.39],["c",.63,-.54,1.26,-1.17,1.56,-1.59],["c",.3,-.42,.6,-.99,.72,-1.41],["c",.18,-.69,.09,-1.47,-.18,-2.07],["c",-.15,-.3,-.33,-.51,-.6,-.63],["z"]],w:12.1,h:18.804},"accidentals.dblsharp":{d:[["M",-.18,-3.96],["c",.06,-.03,.12,-.06,.15,-.06],["c",.09,0,2.76,.27,2.79,.3],["c",.12,.03,.15,.12,.15,.51],["c",.06,.96,.24,1.59,.57,2.1],["c",.06,.09,.15,.21,.18,.24],["l",.09,.06],["l",.09,-.06],["c",.03,-.03,.12,-.15,.18,-.24],["c",.33,-.51,.51,-1.14,.57,-2.1],["c",0,-.39,.03,-.45,.12,-.51],["c",.03,0,.66,-.09,1.44,-.15],["c",1.47,-.15,1.5,-.15,1.56,-.03],["c",.03,.06,0,.42,-.09,1.44],["c",-.09,.72,-.15,1.35,-.15,1.38],["c",0,.03,-.03,.09,-.06,.12],["c",-.06,.06,-.12,.09,-.51,.09],["c",-1.08,.06,-1.8,.3,-2.28,.75],["l",-.12,.09],["l",.09,.09],["c",.12,.15,.39,.33,.63,.45],["c",.42,.18,.96,.27,1.68,.33],["c",.39,0,.45,.03,.51,.09],["c",.03,.03,.06,.09,.06,.12],["c",0,.03,.06,.66,.15,1.38],["c",.09,1.02,.12,1.38,.09,1.44],["c",-.06,.12,-.09,.12,-1.56,-.03],["c",-.78,-.06,-1.41,-.15,-1.44,-.15],["c",-.09,-.06,-.12,-.12,-.12,-.54],["c",-.06,-.93,-.24,-1.56,-.57,-2.07],["c",-.06,-.09,-.15,-.21,-.18,-.24],["l",-.09,-.06],["l",-.09,.06],["c",-.03,.03,-.12,.15,-.18,.24],["c",-.33,.51,-.51,1.14,-.57,2.07],["c",0,.42,-.03,.48,-.12,.54],["c",-.03,0,-.66,.09,-1.44,.15],["c",-1.47,.15,-1.5,.15,-1.56,.03],["c",-.03,-.06,0,-.42,.09,-1.44],["c",.09,-.72,.15,-1.35,.15,-1.38],["c",0,-.03,.03,-.09,.06,-.12],["c",.06,-.06,.12,-.09,.51,-.09],["c",.72,-.06,1.26,-.15,1.68,-.33],["c",.24,-.12,.51,-.3,.63,-.45],["l",.09,-.09],["l",-.12,-.09],["c",-.48,-.45,-1.2,-.69,-2.28,-.75],["c",-.39,0,-.45,-.03,-.51,-.09],["c",-.03,-.03,-.06,-.09,-.06,-.12],["c",0,-.03,-.06,-.63,-.12,-1.38],["c",-.09,-.72,-.15,-1.35,-.15,-1.38],["z"]],w:7.95,h:7.977},"dots.dot":{d:[["M",1.32,-1.68],["c",.09,-.03,.27,-.06,.39,-.06],["c",.96,0,1.74,.78,1.74,1.71],["c",0,.96,-.78,1.74,-1.71,1.74],["c",-.96,0,-1.74,-.78,-1.74,-1.71],["c",0,-.78,.54,-1.5,1.32,-1.68],["z"]],w:3.45,h:3.45},"noteheads.dbl":{d:[["M",-.69,-4.02],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["c",.06,.15,.06,.18,.06,1.41],["l",0,1.23],["l",.12,-.18],["c",.72,-1.26,2.64,-2.31,4.86,-2.64],["c",.81,-.15,1.11,-.15,2.13,-.15],["c",.99,0,1.29,0,2.1,.15],["c",.75,.12,1.38,.27,2.04,.54],["c",1.35,.51,2.34,1.26,2.82,2.1],["l",.12,.18],["l",0,-1.23],["c",0,-1.2,0,-1.26,.06,-1.38],["c",.09,-.18,.15,-.24,.33,-.33],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["l",.06,.15],["l",0,3.54],["l",0,3.54],["l",-.06,.15],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.18,.09,-.36,.09,-.54,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.06,-.12,-.06,-.18,-.06,-1.38],["l",0,-1.23],["l",-.12,.18],["c",-.48,.84,-1.47,1.59,-2.82,2.1],["c",-.84,.33,-1.71,.54,-2.85,.66],["c",-.45,.06,-2.16,.06,-2.61,0],["c",-1.14,-.12,-2.01,-.33,-2.85,-.66],["c",-1.35,-.51,-2.34,-1.26,-2.82,-2.1],["l",-.12,-.18],["l",0,1.23],["c",0,1.23,0,1.26,-.06,1.38],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.18,.09,-.36,.09,-.54,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["l",-.06,-.15],["l",0,-3.54],["c",0,-3.48,0,-3.54,.06,-3.66],["c",.09,-.18,.15,-.24,.33,-.33],["z"],["m",7.71,.63],["c",-.36,-.06,-.9,-.06,-1.14,0],["c",-.3,.03,-.66,.24,-.87,.42],["c",-.6,.54,-.9,1.62,-.75,2.82],["c",.12,.93,.51,1.68,1.11,2.31],["c",.75,.72,1.83,1.2,2.85,1.26],["c",1.05,.06,1.83,-.54,2.1,-1.65],["c",.21,-.9,.12,-1.95,-.24,-2.82],["c",-.36,-.81,-1.08,-1.53,-1.95,-1.95],["c",-.3,-.15,-.78,-.3,-1.11,-.39],["z"]],w:16.83,h:8.145},"noteheads.whole":{d:[["M",6.51,-4.05],["c",.51,-.03,2.01,0,2.52,.03],["c",1.41,.18,2.64,.51,3.72,1.08],["c",1.2,.63,1.95,1.41,2.19,2.31],["c",.09,.33,.09,.9,0,1.23],["c",-.24,.9,-.99,1.68,-2.19,2.31],["c",-1.08,.57,-2.28,.9,-3.75,1.08],["c",-.66,.06,-2.31,.06,-2.97,0],["c",-1.47,-.18,-2.67,-.51,-3.75,-1.08],["c",-1.2,-.63,-1.95,-1.41,-2.19,-2.31],["c",-.09,-.33,-.09,-.9,0,-1.23],["c",.24,-.9,.99,-1.68,2.19,-2.31],["c",1.2,-.63,2.61,-.99,4.23,-1.11],["z"],["m",.57,.66],["c",-.87,-.15,-1.53,0,-2.04,.51],["c",-.15,.15,-.24,.27,-.33,.48],["c",-.24,.51,-.36,1.08,-.33,1.77],["c",.03,.69,.18,1.26,.42,1.77],["c",.6,1.17,1.74,1.98,3.18,2.22],["c",1.11,.21,1.95,-.15,2.34,-.99],["c",.24,-.51,.36,-1.08,.33,-1.8],["c",-.06,-1.11,-.45,-2.04,-1.17,-2.76],["c",-.63,-.63,-1.47,-1.05,-2.4,-1.2],["z"]],w:14.985,h:8.097},"noteheads.half":{d:[["M",7.44,-4.05],["c",.06,-.03,.27,-.03,.48,-.03],["c",1.05,0,1.71,.24,2.1,.81],["c",.42,.6,.45,1.35,.18,2.4],["c",-.42,1.59,-1.14,2.73,-2.16,3.39],["c",-1.41,.93,-3.18,1.44,-5.4,1.53],["c",-1.17,.03,-1.89,-.21,-2.28,-.81],["c",-.42,-.6,-.45,-1.35,-.18,-2.4],["c",.42,-1.59,1.14,-2.73,2.16,-3.39],["c",.63,-.42,1.23,-.72,1.98,-.96],["c",.9,-.3,1.65,-.42,3.12,-.54],["z"],["m",1.29,.87],["c",-.27,-.09,-.63,-.12,-.9,-.03],["c",-.72,.24,-1.53,.69,-3.27,1.8],["c",-2.34,1.5,-3.3,2.25,-3.57,2.79],["c",-.36,.72,-.06,1.5,.66,1.77],["c",.24,.12,.69,.09,.99,0],["c",.84,-.3,1.92,-.93,4.14,-2.37],["c",1.62,-1.08,2.37,-1.71,2.61,-2.19],["c",.36,-.72,.06,-1.5,-.66,-1.77],["z"]],w:10.37,h:8.132},"noteheads.quarter":{d:[["M",6.09,-4.05],["c",.36,-.03,1.2,0,1.53,.06],["c",1.17,.24,1.89,.84,2.16,1.83],["c",.06,.18,.06,.3,.06,.66],["c",0,.45,0,.63,-.15,1.08],["c",-.66,2.04,-3.06,3.93,-5.52,4.38],["c",-.54,.09,-1.44,.09,-1.83,.03],["c",-1.23,-.27,-1.98,-.87,-2.25,-1.86],["c",-.06,-.18,-.06,-.3,-.06,-.66],["c",0,-.45,0,-.63,.15,-1.08],["c",.24,-.78,.75,-1.53,1.44,-2.22],["c",1.2,-1.2,2.85,-2.01,4.47,-2.22],["z"]],w:9.81,h:8.094},"noteheads.slash.nostem":{d:[["M",9.3,-7.77],["c",.06,-.06,.18,-.06,1.71,-.06],["l",1.65,0],["l",.09,.09],["c",.06,.06,.06,.09,.06,.15],["c",-.03,.12,-9.21,15.24,-9.3,15.33],["c",-.06,.06,-.18,.06,-1.71,.06],["l",-1.65,0],["l",-.09,-.09],["c",-.06,-.06,-.06,-.09,-.06,-.15],["c",.03,-.12,9.21,-15.24,9.3,-15.33],["z"]],w:12.81,h:15.63},"noteheads.indeterminate":{d:[["M",.78,-4.05],["c",.12,-.03,.24,-.03,.36,.03],["c",.03,.03,.93,.72,1.95,1.56],["l",1.86,1.5],["l",1.86,-1.5],["c",1.02,-.84,1.92,-1.53,1.95,-1.56],["c",.21,-.12,.33,-.09,.75,.24],["c",.3,.27,.36,.36,.36,.54],["c",0,.03,-.03,.12,-.06,.18],["c",-.03,.06,-.9,.75,-1.89,1.56],["l",-1.8,1.47],["c",0,.03,.81,.69,1.8,1.5],["c",.99,.81,1.86,1.5,1.89,1.56],["c",.03,.06,.06,.15,.06,.18],["c",0,.18,-.06,.27,-.36,.54],["c",-.42,.33,-.54,.36,-.75,.24],["c",-.03,-.03,-.93,-.72,-1.95,-1.56],["l",-1.86,-1.5],["l",-1.86,1.5],["c",-1.02,.84,-1.92,1.53,-1.95,1.56],["c",-.21,.12,-.33,.09,-.75,-.24],["c",-.3,-.27,-.36,-.36,-.36,-.54],["c",0,-.03,.03,-.12,.06,-.18],["c",.03,-.06,.9,-.75,1.89,-1.56],["l",1.8,-1.47],["c",0,-.03,-.81,-.69,-1.8,-1.5],["c",-.99,-.81,-1.86,-1.5,-1.89,-1.56],["c",-.06,-.12,-.09,-.21,-.03,-.36],["c",.03,-.09,.57,-.57,.72,-.63],["z"]],w:9.843,h:8.139},"scripts.ufermata":{d:[["M",-.75,-10.77],["c",.12,0,.45,-.03,.69,-.03],["c",2.91,-.03,5.55,1.53,7.41,4.35],["c",1.17,1.71,1.95,3.72,2.43,6.03],["c",.12,.51,.12,.57,.03,.69],["c",-.12,.21,-.48,.27,-.69,.12],["c",-.12,-.09,-.18,-.24,-.27,-.69],["c",-.78,-3.63,-3.42,-6.54,-6.78,-7.38],["c",-.78,-.21,-1.2,-.24,-2.07,-.24],["c",-.63,0,-.84,0,-1.2,.06],["c",-1.83,.27,-3.42,1.08,-4.8,2.37],["c",-1.41,1.35,-2.4,3.21,-2.85,5.19],["c",-.09,.45,-.15,.6,-.27,.69],["c",-.21,.15,-.57,.09,-.69,-.12],["c",-.09,-.12,-.09,-.18,.03,-.69],["c",.33,-1.62,.78,-3,1.47,-4.38],["c",1.77,-3.54,4.44,-5.67,7.56,-5.97],["z"],["m",.33,7.47],["c",1.38,-.3,2.58,.9,2.31,2.25],["c",-.15,.72,-.78,1.35,-1.47,1.5],["c",-1.38,.27,-2.58,-.93,-2.31,-2.31],["c",.15,-.69,.78,-1.29,1.47,-1.44],["z"]],w:19.748,h:11.289},"scripts.dfermata":{d:[["M",-9.63,-.42],["c",.15,-.09,.36,-.06,.51,.03],["c",.12,.09,.18,.24,.27,.66],["c",.78,3.66,3.42,6.57,6.78,7.41],["c",.78,.21,1.2,.24,2.07,.24],["c",.63,0,.84,0,1.2,-.06],["c",1.83,-.27,3.42,-1.08,4.8,-2.37],["c",1.41,-1.35,2.4,-3.21,2.85,-5.22],["c",.09,-.42,.15,-.57,.27,-.66],["c",.21,-.15,.57,-.09,.69,.12],["c",.09,.12,.09,.18,-.03,.69],["c",-.33,1.62,-.78,3,-1.47,4.38],["c",-1.92,3.84,-4.89,6,-8.31,6],["c",-3.42,0,-6.39,-2.16,-8.31,-6],["c",-.48,-.96,-.84,-1.92,-1.14,-2.97],["c",-.18,-.69,-.42,-1.74,-.42,-1.92],["c",0,-.12,.09,-.27,.24,-.33],["z"],["m",9.21,0],["c",1.2,-.27,2.34,.63,2.34,1.86],["c",0,.9,-.66,1.68,-1.5,1.89],["c",-1.38,.27,-2.58,-.93,-2.31,-2.31],["c",.15,-.69,.78,-1.29,1.47,-1.44],["z"]],w:19.744,h:11.274},"scripts.sforzato":{d:[["M",-6.45,-3.69],["c",.06,-.03,.15,-.06,.18,-.06],["c",.06,0,2.85,.72,6.24,1.59],["l",6.33,1.65],["c",.33,.06,.45,.21,.45,.51],["c",0,.3,-.12,.45,-.45,.51],["l",-6.33,1.65],["c",-3.39,.87,-6.18,1.59,-6.21,1.59],["c",-.21,0,-.48,-.24,-.51,-.45],["c",0,-.15,.06,-.36,.18,-.45],["c",.09,-.06,.87,-.27,3.84,-1.05],["c",2.04,-.54,3.84,-.99,4.02,-1.02],["c",.15,-.06,1.14,-.24,2.22,-.42],["c",1.05,-.18,1.92,-.36,1.92,-.36],["c",0,0,-.87,-.18,-1.92,-.36],["c",-1.08,-.18,-2.07,-.36,-2.22,-.42],["c",-.18,-.03,-1.98,-.48,-4.02,-1.02],["c",-2.97,-.78,-3.75,-.99,-3.84,-1.05],["c",-.12,-.09,-.18,-.3,-.18,-.45],["c",.03,-.15,.15,-.3,.3,-.39],["z"]],w:13.5,h:7.5},"scripts.staccato":{d:[["M",-.36,-1.47],["c",.93,-.21,1.86,.51,1.86,1.47],["c",0,.93,-.87,1.65,-1.8,1.47],["c",-.54,-.12,-1.02,-.57,-1.14,-1.08],["c",-.21,-.81,.27,-1.65,1.08,-1.86],["z"]],w:2.989,h:3.004},"scripts.tenuto":{d:[["M",-4.2,-.48],["l",.12,-.06],["l",4.08,0],["l",4.08,0],["l",.12,.06],["c",.39,.21,.39,.75,0,.96],["l",-.12,.06],["l",-4.08,0],["l",-4.08,0],["l",-.12,-.06],["c",-.39,-.21,-.39,-.75,0,-.96],["z"]],w:8.985,h:1.08},"scripts.umarcato":{d:[["M",-.15,-8.19],["c",.15,-.12,.36,-.03,.45,.15],["c",.21,.42,3.45,7.65,3.45,7.71],["c",0,.12,-.12,.27,-.21,.3],["c",-.03,.03,-.51,.03,-1.14,.03],["c",-1.05,0,-1.08,0,-1.17,-.06],["c",-.09,-.06,-.24,-.36,-1.17,-2.4],["c",-.57,-1.29,-1.05,-2.34,-1.08,-2.34],["c",0,-.03,-.51,1.02,-1.08,2.34],["c",-.93,2.07,-1.08,2.34,-1.14,2.4],["c",-.06,.03,-.15,.06,-.18,.06],["c",-.15,0,-.33,-.18,-.33,-.33],["c",0,-.06,3.24,-7.32,3.45,-7.71],["c",.03,-.06,.09,-.15,.15,-.15],["z"]],w:7.5,h:8.245},"scripts.dmarcato":{d:[["M",-3.57,.03],["c",.03,0,.57,-.03,1.17,-.03],["c",1.05,0,1.08,0,1.17,.06],["c",.09,.06,.24,.36,1.17,2.4],["c",.57,1.29,1.05,2.34,1.08,2.34],["c",0,.03,.51,-1.02,1.08,-2.34],["c",.93,-2.07,1.08,-2.34,1.14,-2.4],["c",.06,-.03,.15,-.06,.18,-.06],["c",.15,0,.33,.18,.33,.33],["c",0,.09,-3.45,7.74,-3.54,7.83],["c",-.12,.12,-.3,.12,-.42,0],["c",-.09,-.09,-3.54,-7.74,-3.54,-7.83],["c",0,-.09,.12,-.27,.18,-.3],["z"]],w:7.5,h:8.25},"scripts.stopped":{d:[["M",-.27,-4.08],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["l",.06,.15],["l",0,1.5],["l",0,1.47],["l",1.47,0],["l",1.5,0],["l",.15,.06],["c",.15,.09,.21,.15,.3,.33],["c",.09,.18,.09,.36,0,.54],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.12,.06,-.18,.06,-1.62,.06],["l",-1.47,0],["l",0,1.47],["l",0,1.47],["l",-.06,.15],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.18,.09,-.36,.09,-.54,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["l",-.06,-.15],["l",0,-1.47],["l",0,-1.47],["l",-1.47,0],["c",-1.44,0,-1.5,0,-1.62,-.06],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.09,-.18,-.09,-.36,0,-.54],["c",.09,-.18,.15,-.24,.33,-.33],["l",.15,-.06],["l",1.47,0],["l",1.47,0],["l",0,-1.47],["c",0,-1.44,0,-1.5,.06,-1.62],["c",.09,-.18,.15,-.24,.33,-.33],["z"]],w:8.295,h:8.295},"scripts.upbow":{d:[["M",-4.65,-15.54],["c",.12,-.09,.36,-.06,.48,.03],["c",.03,.03,.09,.09,.12,.15],["c",.03,.06,.66,2.13,1.41,4.62],["c",1.35,4.41,1.38,4.56,2.01,6.96],["l",.63,2.46],["l",.63,-2.46],["c",.63,-2.4,.66,-2.55,2.01,-6.96],["c",.75,-2.49,1.38,-4.56,1.41,-4.62],["c",.06,-.15,.18,-.21,.36,-.24],["c",.15,0,.3,.06,.39,.18],["c",.15,.21,.24,-.18,-2.1,7.56],["c",-1.2,3.96,-2.22,7.32,-2.25,7.41],["c",0,.12,-.06,.27,-.09,.3],["c",-.12,.21,-.6,.21,-.72,0],["c",-.03,-.03,-.09,-.18,-.09,-.3],["c",-.03,-.09,-1.05,-3.45,-2.25,-7.41],["c",-2.34,-7.74,-2.25,-7.35,-2.1,-7.56],["c",.03,-.03,.09,-.09,.15,-.12],["z"]],w:9.73,h:15.608},"scripts.downbow":{d:[["M",-5.55,-9.93],["l",.09,-.06],["l",5.46,0],["l",5.46,0],["l",.09,.06],["l",.06,.09],["l",0,4.77],["c",0,5.28,0,4.89,-.18,5.01],["c",-.18,.12,-.42,.06,-.54,-.12],["c",-.06,-.09,-.06,-.18,-.06,-2.97],["l",0,-2.85],["l",-4.83,0],["l",-4.83,0],["l",0,2.85],["c",0,2.79,0,2.88,-.06,2.97],["c",-.15,.24,-.51,.24,-.66,0],["c",-.06,-.09,-.06,-.21,-.06,-4.89],["l",0,-4.77],["z"]],w:11.22,h:9.992},"scripts.turn":{d:[["M",-4.77,-3.9],["c",.36,-.06,1.05,-.06,1.44,.03],["c",.78,.15,1.5,.51,2.34,1.14],["c",.6,.45,1.05,.87,2.22,2.01],["c",1.11,1.08,1.62,1.5,2.22,1.86],["c",.6,.36,1.32,.57,1.92,.57],["c",.9,0,1.71,-.57,1.89,-1.35],["c",.24,-.93,-.39,-1.89,-1.35,-2.1],["l",-.15,-.06],["l",-.09,.15],["c",-.03,.09,-.15,.24,-.24,.33],["c",-.72,.72,-2.04,.54,-2.49,-.36],["c",-.48,-.93,.03,-1.86,1.17,-2.19],["c",.3,-.09,1.02,-.09,1.35,0],["c",.99,.27,1.74,.87,2.25,1.83],["c",.69,1.41,.63,3,-.21,4.26],["c",-.21,.3,-.69,.81,-.99,1.02],["c",-.3,.21,-.84,.45,-1.17,.54],["c",-1.23,.36,-2.49,.15,-3.72,-.6],["c",-.75,-.48,-1.41,-1.02,-2.85,-2.46],["c",-1.11,-1.08,-1.62,-1.5,-2.22,-1.86],["c",-.6,-.36,-1.32,-.57,-1.92,-.57],["c",-.9,0,-1.71,.57,-1.89,1.35],["c",-.24,.93,.39,1.89,1.35,2.1],["l",.15,.06],["l",.09,-.15],["c",.03,-.09,.15,-.24,.24,-.33],["c",.72,-.72,2.04,-.54,2.49,.36],["c",.48,.93,-.03,1.86,-1.17,2.19],["c",-.3,.09,-1.02,.09,-1.35,0],["c",-.99,-.27,-1.74,-.87,-2.25,-1.83],["c",-.69,-1.41,-.63,-3,.21,-4.26],["c",.21,-.3,.69,-.81,.99,-1.02],["c",.48,-.33,1.11,-.57,1.74,-.66],["z"]],w:16.366,h:7.893},"scripts.trill":{d:[["M",-.51,-16.02],["c",.12,-.09,.21,-.18,.21,-.18],["l",-.81,4.02],["l",-.81,4.02],["c",.03,0,.51,-.27,1.08,-.6],["c",.6,-.3,1.14,-.63,1.26,-.66],["c",1.14,-.54,2.31,-.6,3.09,-.18],["c",.27,.15,.54,.36,.6,.51],["l",.06,.12],["l",.21,-.21],["c",.9,-.81,2.22,-.99,3.12,-.42],["c",.6,.42,.9,1.14,.78,2.07],["c",-.15,1.29,-1.05,2.31,-1.95,2.25],["c",-.48,-.03,-.78,-.3,-.96,-.81],["c",-.09,-.27,-.09,-.9,-.03,-1.2],["c",.21,-.75,.81,-1.23,1.59,-1.32],["l",.24,-.03],["l",-.09,-.12],["c",-.51,-.66,-1.62,-.63,-2.31,.03],["c",-.39,.42,-.3,.09,-1.23,4.77],["l",-.81,4.14],["c",-.03,0,-.12,-.03,-.21,-.09],["c",-.33,-.15,-.54,-.18,-.99,-.18],["c",-.42,0,-.66,.03,-1.05,.18],["c",-.12,.06,-.21,.09,-.21,.09],["c",0,-.03,.36,-1.86,.81,-4.11],["c",.9,-4.47,.87,-4.26,.69,-4.53],["c",-.21,-.36,-.66,-.51,-1.17,-.36],["c",-.15,.06,-2.22,1.14,-2.58,1.38],["c",-.12,.09,-.12,.09,-.21,.6],["l",-.09,.51],["l",.21,.24],["c",.63,.75,1.02,1.47,1.2,2.19],["c",.06,.27,.06,.36,.06,.81],["c",0,.42,0,.54,-.06,.78],["c",-.15,.54,-.33,.93,-.63,1.35],["c",-.18,.24,-.57,.63,-.81,.78],["c",-.24,.15,-.63,.36,-.84,.42],["c",-.27,.06,-.66,.06,-.87,.03],["c",-.81,-.18,-1.32,-1.05,-1.38,-2.46],["c",-.03,-.6,.03,-.99,.33,-2.46],["c",.21,-1.08,.24,-1.32,.21,-1.29],["c",-1.2,.48,-2.4,.75,-3.21,.72],["c",-.69,-.06,-1.17,-.3,-1.41,-.72],["c",-.39,-.75,-.12,-1.8,.66,-2.46],["c",.24,-.18,.69,-.42,1.02,-.51],["c",.69,-.18,1.53,-.15,2.31,.09],["c",.3,.09,.75,.3,.99,.45],["c",.12,.09,.15,.09,.15,.03],["c",.03,-.03,.33,-1.59,.72,-3.45],["c",.36,-1.86,.66,-3.42,.69,-3.45],["c",0,-.03,.03,-.03,.21,.03],["c",.21,.06,.27,.06,.48,.06],["c",.42,-.03,.78,-.18,1.26,-.48],["c",.15,-.12,.36,-.27,.48,-.39],["z"],["m",-5.73,7.68],["c",-.27,-.03,-.96,-.06,-1.2,-.03],["c",-.81,.12,-1.35,.57,-1.5,1.2],["c",-.18,.66,.12,1.14,.75,1.29],["c",.66,.12,1.92,-.12,3.18,-.66],["l",.33,-.15],["l",.09,-.39],["c",.06,-.21,.09,-.42,.09,-.45],["c",0,-.03,-.45,-.3,-.75,-.45],["c",-.27,-.15,-.66,-.27,-.99,-.36],["z"],["m",4.29,3.63],["c",-.24,-.39,-.51,-.75,-.51,-.69],["c",-.06,.12,-.39,1.92,-.45,2.28],["c",-.09,.54,-.12,1.14,-.06,1.38],["c",.06,.42,.21,.6,.51,.57],["c",.39,-.06,.75,-.48,.93,-1.14],["c",.09,-.33,.09,-1.05,0,-1.38],["c",-.09,-.39,-.24,-.69,-.42,-1.02],["z"]],w:17.963,h:16.49},"scripts.segno":{d:[["M",-3.72,-11.22],["c",.78,-.09,1.59,.03,2.31,.42],["c",1.2,.6,2.01,1.71,2.31,3.09],["c",.09,.42,.09,1.2,.03,1.5],["c",-.15,.45,-.39,.81,-.66,.93],["c",-.33,.18,-.84,.21,-1.23,.15],["c",-.81,-.18,-1.32,-.93,-1.26,-1.89],["c",.03,-.36,.09,-.57,.24,-.9],["c",.15,-.33,.45,-.6,.72,-.75],["c",.12,-.06,.18,-.09,.18,-.12],["c",0,-.03,-.03,-.15,-.09,-.24],["c",-.18,-.45,-.54,-.87,-.96,-1.08],["c",-1.11,-.57,-2.34,-.18,-2.88,.9],["c",-.24,.51,-.33,1.11,-.24,1.83],["c",.27,1.92,1.5,3.54,3.93,5.13],["c",.48,.33,1.26,.78,1.29,.78],["c",.03,0,1.35,-2.19,2.94,-4.89],["l",2.88,-4.89],["l",.84,0],["l",.87,0],["l",-.03,.06],["c",-.15,.21,-6.15,10.41,-6.15,10.44],["c",0,0,.21,.15,.48,.27],["c",2.61,1.47,4.35,3.03,5.13,4.65],["c",1.14,2.34,.51,5.07,-1.44,6.39],["c",-.66,.42,-1.32,.63,-2.13,.69],["c",-2.01,.09,-3.81,-1.41,-4.26,-3.54],["c",-.09,-.42,-.09,-1.2,-.03,-1.5],["c",.15,-.45,.39,-.81,.66,-.93],["c",.33,-.18,.84,-.21,1.23,-.15],["c",.81,.18,1.32,.93,1.26,1.89],["c",-.03,.36,-.09,.57,-.24,.9],["c",-.15,.33,-.45,.6,-.72,.75],["c",-.12,.06,-.18,.09,-.18,.12],["c",0,.03,.03,.15,.09,.24],["c",.18,.45,.54,.87,.96,1.08],["c",1.11,.57,2.34,.18,2.88,-.9],["c",.24,-.51,.33,-1.11,.24,-1.83],["c",-.27,-1.92,-1.5,-3.54,-3.93,-5.13],["c",-.48,-.33,-1.26,-.78,-1.29,-.78],["c",-.03,0,-1.35,2.19,-2.91,4.89],["l",-2.88,4.89],["l",-.87,0],["l",-.87,0],["l",.03,-.06],["c",.15,-.21,6.15,-10.41,6.15,-10.44],["c",0,0,-.21,-.15,-.48,-.3],["c",-2.61,-1.44,-4.35,-3,-5.13,-4.62],["c",-.9,-1.89,-.72,-4.02,.48,-5.52],["c",.69,-.84,1.68,-1.41,2.73,-1.53],["z"],["m",8.76,9.09],["c",.03,-.03,.15,-.03,.27,-.03],["c",.33,.03,.57,.18,.72,.48],["c",.09,.18,.09,.57,0,.75],["c",-.09,.18,-.21,.3,-.36,.39],["c",-.15,.06,-.21,.06,-.39,.06],["c",-.21,0,-.27,0,-.39,-.06],["c",-.3,-.15,-.48,-.45,-.48,-.75],["c",0,-.39,.24,-.72,.63,-.84],["z"],["m",-10.53,2.61],["c",.03,-.03,.15,-.03,.27,-.03],["c",.33,.03,.57,.18,.72,.48],["c",.09,.18,.09,.57,0,.75],["c",-.09,.18,-.21,.3,-.36,.39],["c",-.15,.06,-.21,.06,-.39,.06],["c",-.21,0,-.27,0,-.39,-.06],["c",-.3,-.15,-.48,-.45,-.48,-.75],["c",0,-.39,.24,-.72,.63,-.84],["z"]],w:15,h:22.504},"scripts.coda":{d:[["M",-.21,-10.47],["c",.18,-.12,.42,-.06,.54,.12],["c",.06,.09,.06,.18,.06,1.5],["l",0,1.38],["l",.18,0],["c",.39,.06,.96,.24,1.38,.48],["c",1.68,.93,2.82,3.24,3.03,6.12],["c",.03,.24,.03,.45,.03,.45],["c",0,.03,.6,.03,1.35,.03],["c",1.5,0,1.47,0,1.59,.18],["c",.09,.12,.09,.3,0,.42],["c",-.12,.18,-.09,.18,-1.59,.18],["c",-.75,0,-1.35,0,-1.35,.03],["c",0,0,0,.21,-.03,.42],["c",-.24,3.15,-1.53,5.58,-3.45,6.36],["c",-.27,.12,-.72,.24,-.96,.27],["l",-.18,0],["l",0,1.38],["c",0,1.32,0,1.41,-.06,1.5],["c",-.15,.24,-.51,.24,-.66,0],["c",-.06,-.09,-.06,-.18,-.06,-1.5],["l",0,-1.38],["l",-.18,0],["c",-.39,-.06,-.96,-.24,-1.38,-.48],["c",-1.68,-.93,-2.82,-3.24,-3.03,-6.15],["c",-.03,-.21,-.03,-.42,-.03,-.42],["c",0,-.03,-.6,-.03,-1.35,-.03],["c",-1.5,0,-1.47,0,-1.59,-.18],["c",-.09,-.12,-.09,-.3,0,-.42],["c",.12,-.18,.09,-.18,1.59,-.18],["c",.75,0,1.35,0,1.35,-.03],["c",0,0,0,-.21,.03,-.45],["c",.24,-3.12,1.53,-5.55,3.45,-6.33],["c",.27,-.12,.72,-.24,.96,-.27],["l",.18,0],["l",0,-1.38],["c",0,-1.53,0,-1.5,.18,-1.62],["z"],["m",-.18,6.93],["c",0,-2.97,0,-3.15,-.06,-3.15],["c",-.09,0,-.51,.15,-.66,.21],["c",-.87,.51,-1.38,1.62,-1.56,3.51],["c",-.06,.54,-.12,1.59,-.12,2.16],["l",0,.42],["l",1.2,0],["l",1.2,0],["l",0,-3.15],["z"],["m",1.17,-3.06],["c",-.09,-.03,-.21,-.06,-.27,-.09],["l",-.12,0],["l",0,3.15],["l",0,3.15],["l",1.2,0],["l",1.2,0],["l",0,-.81],["c",-.06,-2.4,-.33,-3.69,-.93,-4.59],["c",-.27,-.39,-.66,-.69,-1.08,-.81],["z"],["m",-1.17,10.14],["l",0,-3.15],["l",-1.2,0],["l",-1.2,0],["l",0,.81],["c",.03,.96,.06,1.47,.15,2.13],["c",.24,2.04,.96,3.12,2.13,3.36],["l",.12,0],["l",0,-3.15],["z"],["m",3.18,-2.34],["l",0,-.81],["l",-1.2,0],["l",-1.2,0],["l",0,3.15],["l",0,3.15],["l",.12,0],["c",1.17,-.24,1.89,-1.32,2.13,-3.36],["c",.09,-.66,.12,-1.17,.15,-2.13],["z"]],w:16.035,h:21.062},"scripts.comma":{d:[["M",1.14,-4.62],["c",.3,-.12,.69,-.03,.93,.15],["c",.12,.12,.36,.45,.51,.78],["c",.9,1.77,.54,4.05,-1.08,6.75],["c",-.36,.63,-.87,1.38,-.96,1.44],["c",-.18,.12,-.42,.06,-.54,-.12],["c",-.09,-.18,-.09,-.3,.12,-.6],["c",.96,-1.44,1.44,-2.97,1.38,-4.35],["c",-.06,-.93,-.3,-1.68,-.78,-2.46],["c",-.27,-.39,-.33,-.63,-.24,-.96],["c",.09,-.27,.36,-.54,.66,-.63],["z"]],w:3.042,h:9.237},"scripts.roll":{d:[["M",1.95,-6],["c",.21,-.09,.36,-.09,.57,0],["c",.39,.15,.63,.39,1.47,1.35],["c",.66,.75,.78,.87,1.08,1.05],["c",.75,.45,1.65,.42,2.4,-.06],["c",.12,-.09,.27,-.27,.54,-.6],["c",.42,-.54,.51,-.63,.69,-.63],["c",.09,0,.3,.12,.36,.21],["c",.09,.12,.12,.3,.03,.42],["c",-.06,.12,-3.15,3.9,-3.3,4.08],["c",-.06,.06,-.18,.12,-.27,.18],["c",-.27,.12,-.6,.06,-.99,-.27],["c",-.27,-.21,-.42,-.39,-1.08,-1.14],["c",-.63,-.72,-.81,-.9,-1.17,-1.08],["c",-.36,-.18,-.57,-.21,-.99,-.21],["c",-.39,0,-.63,.03,-.93,.18],["c",-.36,.15,-.51,.27,-.9,.81],["c",-.24,.27,-.45,.51,-.48,.54],["c",-.12,.09,-.27,.06,-.39,0],["c",-.24,-.15,-.33,-.39,-.21,-.6],["c",.09,-.12,3.18,-3.87,3.33,-4.02],["c",.06,-.06,.18,-.15,.24,-.21],["z"]],w:10.817,h:6.125},"scripts.prall":{d:[["M",-4.38,-3.69],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["c",.03,0,.57,-.84,1.23,-1.83],["c",1.14,-1.68,1.23,-1.83,1.35,-1.89],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["l",.48,-.69],["c",.51,-.78,.54,-.84,.69,-.9],["c",.42,-.18,.87,.15,.81,.6],["c",-.03,.12,-.3,.51,-1.5,2.37],["c",-1.38,2.07,-1.5,2.22,-1.62,2.28],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.89,-1.95],["l",-1.53,-1.83],["c",-.03,0,-.57,.84,-1.23,1.83],["c",-1.14,1.68,-1.23,1.83,-1.35,1.89],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.89,-1.95],["l",-1.53,-1.83],["l",-.48,.69],["c",-.51,.78,-.54,.84,-.69,.9],["c",-.42,.18,-.87,-.15,-.81,-.6],["c",.03,-.12,.3,-.51,1.5,-2.37],["c",1.38,-2.07,1.5,-2.22,1.62,-2.28],["z"]],w:15.011,h:7.5},"scripts.arpeggio":{d:[["M",1.5,0],["c",1.5,2,1.5,3,1.5,3],["s",0,1,-2,1.5],["s",-.5,3,1,5.5],["l",1.5,0],["s",-1.75,-2,-1.9,-3.25],["s",2.15,-.6,2.95,-1.6],["s",.45,-1,.5,-1.25],["s",0,-1,-2,-3.9],["l",-1.5,0],["z"]],w:5,h:10},"scripts.mordent":{d:[["M",-.21,-4.95],["c",.27,-.15,.63,0,.75,.27],["c",.06,.12,.06,.24,.06,1.44],["l",0,1.29],["l",.57,-.84],["c",.51,-.75,.57,-.84,.69,-.9],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["l",.48,-.69],["c",.51,-.78,.54,-.84,.69,-.9],["c",.42,-.18,.87,.15,.81,.6],["c",-.03,.12,-.3,.51,-1.5,2.37],["c",-1.38,2.07,-1.5,2.22,-1.62,2.28],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.83,-1.89],["c",-.81,-.99,-1.5,-1.8,-1.53,-1.86],["c",-.06,-.03,-.06,-.03,-.12,.03],["c",-.06,.06,-.06,.15,-.06,2.28],["c",0,1.95,0,2.25,-.06,2.34],["c",-.18,.45,-.81,.48,-1.05,.03],["c",-.03,-.06,-.06,-.24,-.06,-1.41],["l",0,-1.35],["l",-.57,.84],["c",-.54,.78,-.6,.87,-.72,.93],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.89,-1.95],["l",-1.53,-1.83],["l",-.48,.69],["c",-.51,.78,-.54,.84,-.69,.9],["c",-.42,.18,-.87,-.15,-.81,-.6],["c",.03,-.12,.3,-.51,1.5,-2.37],["c",1.38,-2.07,1.5,-2.22,1.62,-2.28],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["c",.03,0,.06,-.06,.09,-.09],["c",.06,-.12,.06,-.15,.06,-2.28],["c",0,-1.92,0,-2.22,.06,-2.31],["c",.06,-.15,.15,-.24,.3,-.3],["z"]],w:15.011,h:10.012},"flags.u8th":{d:[["M",-.42,3.75],["l",0,-3.75],["l",.21,0],["l",.21,0],["l",0,.18],["c",0,.3,.06,.84,.12,1.23],["c",.24,1.53,.9,3.12,2.13,5.16],["l",.99,1.59],["c",.87,1.44,1.38,2.34,1.77,3.09],["c",.81,1.68,1.2,3.06,1.26,4.53],["c",.03,1.53,-.21,3.27,-.75,5.01],["c",-.21,.69,-.51,1.5,-.6,1.59],["c",-.09,.12,-.27,.21,-.42,.21],["c",-.15,0,-.42,-.12,-.51,-.21],["c",-.15,-.18,-.18,-.42,-.09,-.66],["c",.15,-.33,.45,-1.2,.57,-1.62],["c",.42,-1.38,.6,-2.58,.6,-3.9],["c",0,-.66,0,-.81,-.06,-1.11],["c",-.39,-2.07,-1.8,-4.26,-4.59,-7.14],["l",-.42,-.45],["l",-.21,0],["l",-.21,0],["l",0,-3.75],["z"]],w:6.692,h:22.59},"flags.u16th":{d:[["M",-.42,7.5],["l",0,-7.5],["l",.21,0],["l",.21,0],["l",0,.39],["c",.06,1.08,.39,2.19,.99,3.39],["c",.45,.9,.87,1.59,1.95,3.12],["c",1.29,1.86,1.77,2.64,2.22,3.57],["c",.45,.93,.72,1.8,.87,2.64],["c",.06,.51,.06,1.5,0,1.92],["c",-.12,.6,-.3,1.2,-.54,1.71],["l",-.09,.24],["l",.18,.45],["c",.51,1.2,.72,2.22,.69,3.42],["c",-.06,1.53,-.39,3.03,-.99,4.53],["c",-.3,.75,-.36,.81,-.57,.9],["c",-.15,.09,-.33,.06,-.48,0],["c",-.18,-.09,-.27,-.18,-.33,-.33],["c",-.09,-.18,-.06,-.3,.12,-.75],["c",.66,-1.41,1.02,-2.88,1.08,-4.32],["c",0,-.6,-.03,-1.05,-.18,-1.59],["c",-.3,-1.2,-.99,-2.4,-2.25,-3.87],["c",-.42,-.48,-1.53,-1.62,-2.19,-2.22],["l",-.45,-.42],["l",-.03,1.11],["l",0,1.11],["l",-.21,0],["l",-.21,0],["l",0,-7.5],["z"],["m",1.65,.09],["c",-.3,-.3,-.69,-.72,-.9,-.87],["l",-.33,-.33],["l",0,.15],["c",0,.3,.06,.81,.15,1.26],["c",.27,1.29,.87,2.61,2.04,4.29],["c",.15,.24,.6,.87,.96,1.38],["l",1.08,1.53],["l",.42,.63],["c",.03,0,.12,-.36,.21,-.72],["c",.06,-.33,.06,-1.2,0,-1.62],["c",-.33,-1.71,-1.44,-3.48,-3.63,-5.7],["z"]],w:6.693,h:26.337},"flags.u32nd":{d:[["M",-.42,11.25],["l",0,-11.25],["l",.21,0],["l",.21,0],["l",0,.36],["c",.09,1.68,.69,3.27,2.07,5.46],["l",.87,1.35],["c",1.02,1.62,1.47,2.37,1.86,3.18],["c",.48,1.02,.78,1.92,.93,2.88],["c",.06,.48,.06,1.5,0,1.89],["c",-.09,.42,-.21,.87,-.36,1.26],["l",-.12,.3],["l",.15,.39],["c",.69,1.56,.84,2.88,.54,4.38],["c",-.09,.45,-.27,1.08,-.45,1.47],["l",-.12,.24],["l",.18,.36],["c",.33,.72,.57,1.56,.69,2.34],["c",.12,1.02,-.06,2.52,-.42,3.84],["c",-.27,.93,-.75,2.13,-.93,2.31],["c",-.18,.15,-.45,.18,-.66,.09],["c",-.18,-.09,-.27,-.18,-.33,-.33],["c",-.09,-.18,-.06,-.3,.06,-.6],["c",.21,-.36,.42,-.9,.57,-1.38],["c",.51,-1.41,.69,-3.06,.48,-4.08],["c",-.15,-.81,-.57,-1.68,-1.2,-2.55],["c",-.72,-.99,-1.83,-2.13,-3.3,-3.33],["l",-.48,-.42],["l",-.03,1.53],["l",0,1.56],["l",-.21,0],["l",-.21,0],["l",0,-11.25],["z"],["m",1.26,-3.96],["c",-.27,-.3,-.54,-.6,-.66,-.72],["l",-.18,-.21],["l",0,.42],["c",.06,.87,.24,1.74,.66,2.67],["c",.36,.87,.96,1.86,1.92,3.18],["c",.21,.33,.63,.87,.87,1.23],["c",.27,.39,.6,.84,.75,1.08],["l",.27,.39],["l",.03,-.12],["c",.12,-.45,.15,-1.05,.09,-1.59],["c",-.27,-1.86,-1.38,-3.78,-3.75,-6.33],["z"],["m",-.27,6.09],["c",-.27,-.21,-.48,-.42,-.51,-.45],["c",-.06,-.03,-.06,-.03,-.06,.21],["c",0,.9,.3,2.04,.81,3.09],["c",.48,1.02,.96,1.77,2.37,3.63],["c",.6,.78,1.05,1.44,1.29,1.77],["c",.06,.12,.15,.21,.15,.18],["c",.03,-.03,.18,-.57,.24,-.87],["c",.06,-.45,.06,-1.32,-.03,-1.74],["c",-.09,-.48,-.24,-.9,-.51,-1.44],["c",-.66,-1.35,-1.83,-2.7,-3.75,-4.38],["z"]],w:6.697,h:32.145},"flags.u64th":{d:[["M",-.42,15],["l",0,-15],["l",.21,0],["l",.21,0],["l",0,.36],["c",.06,1.2,.39,2.37,1.02,3.66],["c",.39,.81,.84,1.56,1.8,3.09],["c",.81,1.26,1.05,1.68,1.35,2.22],["c",.87,1.5,1.35,2.79,1.56,4.08],["c",.06,.54,.06,1.56,-.03,2.04],["c",-.09,.48,-.21,.99,-.36,1.35],["l",-.12,.27],["l",.12,.27],["c",.09,.15,.21,.45,.27,.66],["c",.69,1.89,.63,3.66,-.18,5.46],["l",-.18,.39],["l",.15,.33],["c",.3,.66,.51,1.44,.63,2.1],["c",.06,.48,.06,1.35,0,1.71],["c",-.15,.57,-.42,1.2,-.78,1.68],["l",-.21,.27],["l",.18,.33],["c",.57,1.05,.93,2.13,1.02,3.18],["c",.06,.72,0,1.83,-.21,2.79],["c",-.18,1.02,-.63,2.34,-1.02,3.09],["c",-.15,.33,-.48,.45,-.78,.3],["c",-.18,-.09,-.27,-.18,-.33,-.33],["c",-.09,-.18,-.06,-.3,.03,-.54],["c",.75,-1.5,1.23,-3.45,1.17,-4.89],["c",-.06,-1.02,-.42,-2.01,-1.17,-3.15],["c",-.48,-.72,-1.02,-1.35,-1.89,-2.22],["c",-.57,-.57,-1.56,-1.5,-1.92,-1.77],["l",-.12,-.09],["l",0,1.68],["l",0,1.68],["l",-.21,0],["l",-.21,0],["l",0,-15],["z"],["m",.93,-8.07],["c",-.27,-.3,-.48,-.54,-.51,-.54],["c",0,0,0,.69,.03,1.02],["c",.15,1.47,.75,2.94,2.04,4.83],["l",1.08,1.53],["c",.39,.57,.84,1.2,.99,1.44],["c",.15,.24,.3,.45,.3,.45],["c",0,0,.03,-.09,.06,-.21],["c",.36,-1.59,-.15,-3.33,-1.47,-5.4],["c",-.63,-.93,-1.35,-1.83,-2.52,-3.12],["z"],["m",.06,6.72],["c",-.24,-.21,-.48,-.42,-.51,-.45],["l",-.06,-.06],["l",0,.33],["c",0,1.2,.3,2.34,.93,3.6],["c",.45,.9,.96,1.68,2.25,3.51],["c",.39,.54,.84,1.17,1.02,1.44],["c",.21,.33,.33,.51,.33,.48],["c",.06,-.09,.21,-.63,.3,-.99],["c",.06,-.33,.06,-.45,.06,-.96],["c",0,-.6,-.03,-.84,-.18,-1.35],["c",-.3,-1.08,-1.02,-2.28,-2.13,-3.57],["c",-.39,-.45,-1.44,-1.47,-2.01,-1.98],["z"],["m",0,6.72],["c",-.24,-.21,-.48,-.39,-.51,-.42],["l",-.06,-.06],["l",0,.33],["c",0,1.41,.45,2.82,1.38,4.35],["c",.42,.72,.72,1.14,1.86,2.73],["c",.36,.45,.75,.99,.87,1.2],["c",.15,.21,.3,.36,.3,.36],["c",.06,0,.3,-.48,.39,-.75],["c",.09,-.36,.12,-.63,.12,-1.05],["c",-.06,-1.05,-.45,-2.04,-1.2,-3.18],["c",-.57,-.87,-1.11,-1.53,-2.07,-2.49],["c",-.36,-.33,-.84,-.78,-1.08,-1.02],["z"]],w:6.682,h:39.694},"flags.d8th":{d:[["M",5.67,-21.63],["c",.24,-.12,.54,-.06,.69,.15],["c",.06,.06,.21,.36,.39,.66],["c",.84,1.77,1.26,3.36,1.32,5.1],["c",.03,1.29,-.21,2.37,-.81,3.63],["c",-.6,1.23,-1.26,2.13,-3.21,4.38],["c",-1.35,1.53,-1.86,2.19,-2.4,2.97],["c",-.63,.93,-1.11,1.92,-1.38,2.79],["c",-.15,.54,-.27,1.35,-.27,1.8],["l",0,.15],["l",-.21,0],["l",-.21,0],["l",0,-3.75],["l",0,-3.75],["l",.21,0],["l",.21,0],["l",.48,-.3],["c",1.83,-1.11,3.12,-2.1,4.17,-3.12],["c",.78,-.81,1.32,-1.53,1.71,-2.31],["c",.45,-.93,.6,-1.74,.51,-2.88],["c",-.12,-1.56,-.63,-3.18,-1.47,-4.68],["c",-.12,-.21,-.15,-.33,-.06,-.51],["c",.06,-.15,.15,-.24,.33,-.33],["z"]],w:8.492,h:21.691},"flags.ugrace":{d:[["M",6.03,6.93],["c",.15,-.09,.33,-.06,.51,0],["c",.15,.09,.21,.15,.3,.33],["c",.09,.18,.06,.39,-.03,.54],["c",-.06,.15,-10.89,8.88,-11.07,8.97],["c",-.15,.09,-.33,.06,-.48,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.09,-.18,-.06,-.39,.03,-.54],["c",.06,-.15,10.89,-8.88,11.07,-8.97],["z"]],w:12.019,h:9.954},"flags.dgrace":{d:[["M",-6.06,-15.93],["c",.18,-.09,.33,-.12,.48,-.06],["c",.18,.09,14.01,8.04,14.1,8.1],["c",.12,.12,.18,.33,.18,.51],["c",-.03,.21,-.15,.39,-.36,.48],["c",-.18,.09,-.33,.12,-.48,.06],["c",-.18,-.09,-14.01,-8.04,-14.1,-8.1],["c",-.12,-.12,-.18,-.33,-.18,-.51],["c",.03,-.21,.15,-.39,.36,-.48],["z"]],w:15.12,h:9.212},"flags.d16th":{d:[["M",6.84,-22.53],["c",.27,-.12,.57,-.06,.72,.15],["c",.15,.15,.33,.87,.45,1.56],["c",.06,.33,.06,1.35,0,1.65],["c",-.06,.33,-.15,.78,-.27,1.11],["c",-.12,.33,-.45,.96,-.66,1.32],["l",-.18,.27],["l",.09,.18],["c",.48,1.02,.72,2.25,.69,3.3],["c",-.06,1.23,-.42,2.28,-1.26,3.45],["c",-.57,.87,-.99,1.32,-3,3.39],["c",-1.56,1.56,-2.22,2.4,-2.76,3.45],["c",-.42,.84,-.66,1.8,-.66,2.55],["l",0,.15],["l",-.21,0],["l",-.21,0],["l",0,-7.5],["l",0,-7.5],["l",.21,0],["l",.21,0],["l",0,1.14],["l",0,1.11],["l",.27,-.15],["c",1.11,-.57,1.77,-.99,2.52,-1.47],["c",2.37,-1.56,3.69,-3.15,4.05,-4.83],["c",.03,-.18,.03,-.39,.03,-.78],["c",0,-.6,-.03,-.93,-.24,-1.5],["c",-.06,-.18,-.12,-.39,-.15,-.45],["c",-.03,-.24,.12,-.48,.36,-.6],["z"],["m",-.63,7.5],["c",-.06,-.18,-.15,-.36,-.15,-.36],["c",-.03,0,-.03,.03,-.06,.06],["c",-.06,.12,-.96,1.02,-1.95,1.98],["c",-.63,.57,-1.26,1.17,-1.44,1.35],["c",-1.53,1.62,-2.28,2.85,-2.55,4.32],["c",-.03,.18,-.03,.54,-.06,.99],["l",0,.69],["l",.18,-.09],["c",.93,-.54,2.1,-1.29,2.82,-1.83],["c",.69,-.51,1.02,-.81,1.53,-1.29],["c",1.86,-1.89,2.37,-3.66,1.68,-5.82],["z"]],w:8.475,h:22.591},"flags.d32nd":{d:[["M",6.84,-29.13],["c",.27,-.12,.57,-.06,.72,.15],["c",.12,.12,.27,.63,.36,1.11],["c",.33,1.59,.06,3.06,-.81,4.47],["l",-.18,.27],["l",.09,.15],["c",.12,.24,.33,.69,.45,1.05],["c",.63,1.83,.45,3.57,-.57,5.22],["l",-.18,.3],["l",.15,.27],["c",.42,.87,.6,1.71,.57,2.61],["c",-.06,1.29,-.48,2.46,-1.35,3.78],["c",-.54,.81,-.93,1.29,-2.46,3],["c",-.51,.54,-1.05,1.17,-1.26,1.41],["c",-1.56,1.86,-2.25,3.36,-2.37,5.01],["l",0,.33],["l",-.21,0],["l",-.21,0],["l",0,-11.25],["l",0,-11.25],["l",.21,0],["l",.21,0],["l",0,1.35],["l",.03,1.35],["l",.78,-.39],["c",1.38,-.69,2.34,-1.26,3.24,-1.92],["c",1.38,-1.02,2.28,-2.13,2.64,-3.21],["c",.15,-.48,.18,-.72,.18,-1.29],["c",0,-.57,-.06,-.9,-.24,-1.47],["c",-.06,-.18,-.12,-.39,-.15,-.45],["c",-.03,-.24,.12,-.48,.36,-.6],["z"],["m",-.63,7.2],["c",-.09,-.18,-.12,-.21,-.12,-.15],["c",-.03,.09,-1.02,1.08,-2.04,2.04],["c",-1.17,1.08,-1.65,1.56,-2.07,2.04],["c",-.84,.96,-1.38,1.86,-1.68,2.76],["c",-.21,.57,-.27,.99,-.3,1.65],["l",0,.54],["l",.66,-.33],["c",3.57,-1.86,5.49,-3.69,5.94,-5.7],["c",.06,-.39,.06,-1.2,-.03,-1.65],["c",-.06,-.39,-.24,-.9,-.36,-1.2],["z"],["m",-.06,7.2],["c",-.06,-.15,-.12,-.33,-.15,-.45],["l",-.06,-.18],["l",-.18,.21],["l",-1.83,1.83],["c",-.87,.9,-1.77,1.8,-1.95,2.01],["c",-1.08,1.29,-1.62,2.31,-1.89,3.51],["c",-.06,.3,-.06,.51,-.09,.93],["l",0,.57],["l",.09,-.06],["c",.75,-.45,1.89,-1.26,2.52,-1.74],["c",.81,-.66,1.74,-1.53,2.22,-2.16],["c",1.26,-1.53,1.68,-3.06,1.32,-4.47],["z"]],w:8.385,h:29.191},"flags.d64th":{d:[["M",7.08,-32.88],["c",.3,-.12,.66,-.03,.78,.24],["c",.18,.33,.27,2.1,.15,2.64],["c",-.09,.39,-.21,.78,-.39,1.08],["l",-.15,.3],["l",.09,.27],["c",.03,.12,.09,.45,.12,.69],["c",.27,1.44,.18,2.55,-.3,3.6],["l",-.12,.33],["l",.06,.42],["c",.27,1.35,.33,2.82,.21,3.63],["c",-.12,.6,-.3,1.23,-.57,1.8],["l",-.15,.27],["l",.03,.42],["c",.06,1.02,.06,2.7,.03,3.06],["c",-.15,1.47,-.66,2.76,-1.74,4.41],["c",-.45,.69,-.75,1.11,-1.74,2.37],["c",-1.05,1.38,-1.5,1.98,-1.95,2.73],["c",-.93,1.5,-1.38,2.82,-1.44,4.2],["l",0,.42],["l",-.21,0],["l",-.21,0],["l",0,-15],["l",0,-15],["l",.21,0],["l",.21,0],["l",0,1.86],["l",0,1.89],["c",0,0,.21,-.03,.45,-.09],["c",2.22,-.39,4.08,-1.11,5.19,-2.01],["c",.63,-.54,1.02,-1.14,1.2,-1.8],["c",.06,-.3,.06,-1.14,-.03,-1.65],["c",-.03,-.18,-.06,-.39,-.09,-.48],["c",-.03,-.24,.12,-.48,.36,-.6],["z"],["m",-.45,6.15],["c",-.03,-.18,-.06,-.42,-.06,-.54],["l",-.03,-.18],["l",-.33,.3],["c",-.42,.36,-.87,.72,-1.68,1.29],["c",-1.98,1.38,-2.25,1.59,-2.85,2.16],["c",-.75,.69,-1.23,1.44,-1.47,2.19],["c",-.15,.45,-.18,.63,-.21,1.35],["l",0,.66],["l",.39,-.18],["c",1.83,-.9,3.45,-1.95,4.47,-2.91],["c",.93,-.9,1.53,-1.83,1.74,-2.82],["c",.06,-.33,.06,-.87,.03,-1.32],["z"],["m",-.27,4.86],["c",-.03,-.21,-.06,-.36,-.06,-.36],["c",0,-.03,-.12,.09,-.24,.24],["c",-.39,.48,-.99,1.08,-2.16,2.19],["c",-1.47,1.38,-1.92,1.83,-2.46,2.49],["c",-.66,.87,-1.08,1.74,-1.29,2.58],["c",-.09,.42,-.15,.87,-.15,1.44],["l",0,.54],["l",.48,-.33],["c",1.5,-1.02,2.58,-1.89,3.51,-2.82],["c",1.47,-1.47,2.25,-2.85,2.4,-4.26],["c",.03,-.39,.03,-1.17,-.03,-1.71],["z"],["m",-.66,7.68],["c",.03,-.15,.03,-.6,.03,-.99],["l",0,-.72],["l",-.27,.33],["l",-1.74,1.98],["c",-1.77,1.92,-2.43,2.76,-2.97,3.9],["c",-.51,1.02,-.72,1.77,-.75,2.91],["c",0,.63,0,.63,.06,.6],["c",.03,-.03,.3,-.27,.63,-.54],["c",.66,-.6,1.86,-1.8,2.31,-2.31],["c",1.65,-1.89,2.52,-3.54,2.7,-5.16],["z"]],w:8.485,h:32.932},"clefs.C":{d:[["M",.06,-14.94],["l",.09,-.06],["l",1.92,0],["l",1.92,0],["l",.09,.06],["l",.06,.09],["l",0,14.85],["l",0,14.82],["l",-.06,.09],["l",-.09,.06],["l",-1.92,0],["l",-1.92,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-14.82],["l",0,-14.85],["z"],["m",5.37,0],["c",.09,-.06,.09,-.06,.57,-.06],["c",.45,0,.45,0,.54,.06],["l",.06,.09],["l",0,7.14],["l",0,7.11],["l",.09,-.06],["c",.18,-.18,.72,-.84,.96,-1.2],["c",.3,-.45,.66,-1.17,.84,-1.65],["c",.36,-.9,.57,-1.83,.6,-2.79],["c",.03,-.48,.03,-.54,.09,-.63],["c",.12,-.18,.36,-.21,.54,-.12],["c",.18,.09,.21,.15,.24,.66],["c",.06,.87,.21,1.56,.57,2.22],["c",.51,1.02,1.26,1.68,2.22,1.92],["c",.21,.06,.33,.06,.78,.06],["c",.45,0,.57,0,.84,-.06],["c",.45,-.12,.81,-.33,1.08,-.6],["c",.57,-.57,.87,-1.41,.99,-2.88],["c",.06,-.54,.06,-3,0,-3.57],["c",-.21,-2.58,-.84,-3.87,-2.16,-4.5],["c",-.48,-.21,-1.17,-.36,-1.77,-.36],["c",-.69,0,-1.29,.27,-1.5,.72],["c",-.06,.15,-.06,.21,-.06,.42],["c",0,.24,0,.3,.06,.45],["c",.12,.24,.24,.39,.63,.66],["c",.42,.3,.57,.48,.69,.72],["c",.06,.15,.06,.21,.06,.48],["c",0,.39,-.03,.63,-.21,.96],["c",-.3,.6,-.87,1.08,-1.5,1.26],["c",-.27,.06,-.87,.06,-1.14,0],["c",-.78,-.24,-1.44,-.87,-1.65,-1.68],["c",-.12,-.42,-.09,-1.17,.09,-1.71],["c",.51,-1.65,1.98,-2.82,3.81,-3.09],["c",.84,-.09,2.46,.03,3.51,.27],["c",2.22,.57,3.69,1.8,4.44,3.75],["c",.36,.93,.57,2.13,.57,3.36],["c",0,1.44,-.48,2.73,-1.38,3.81],["c",-1.26,1.5,-3.27,2.43,-5.28,2.43],["c",-.48,0,-.51,0,-.75,-.09],["c",-.15,-.03,-.48,-.21,-.78,-.36],["c",-.69,-.36,-.87,-.42,-1.26,-.42],["c",-.27,0,-.3,0,-.51,.09],["c",-.57,.3,-.81,.9,-.81,2.1],["c",0,1.23,.24,1.83,.81,2.13],["c",.21,.09,.24,.09,.51,.09],["c",.39,0,.57,-.06,1.26,-.42],["c",.3,-.15,.63,-.33,.78,-.36],["c",.24,-.09,.27,-.09,.75,-.09],["c",2.01,0,4.02,.93,5.28,2.4],["c",.9,1.11,1.38,2.4,1.38,3.84],["c",0,1.5,-.3,2.88,-.84,3.96],["c",-.78,1.59,-2.19,2.64,-4.17,3.15],["c",-1.05,.24,-2.67,.36,-3.51,.27],["c",-1.83,-.27,-3.3,-1.44,-3.81,-3.09],["c",-.18,-.54,-.21,-1.29,-.09,-1.74],["c",.15,-.6,.63,-1.2,1.23,-1.47],["c",.36,-.18,.57,-.21,.99,-.21],["c",.42,0,.63,.03,1.02,.21],["c",.42,.21,.84,.63,1.05,1.05],["c",.18,.36,.21,.6,.21,.96],["c",0,.3,0,.36,-.06,.51],["c",-.12,.24,-.27,.42,-.69,.72],["c",-.57,.42,-.69,.63,-.69,1.08],["c",0,.24,0,.3,.06,.45],["c",.12,.21,.3,.39,.57,.54],["c",.42,.18,.87,.21,1.53,.15],["c",1.08,-.15,1.8,-.57,2.34,-1.32],["c",.54,-.75,.84,-1.83,.99,-3.51],["c",.06,-.57,.06,-3.03,0,-3.57],["c",-.12,-1.47,-.42,-2.31,-.99,-2.88],["c",-.27,-.27,-.63,-.48,-1.08,-.6],["c",-.27,-.06,-.39,-.06,-.84,-.06],["c",-.45,0,-.57,0,-.78,.06],["c",-1.14,.27,-2.01,1.17,-2.46,2.49],["c",-.21,.57,-.3,.99,-.33,1.65],["c",-.03,.51,-.06,.57,-.24,.66],["c",-.12,.06,-.27,.06,-.39,0],["c",-.21,-.09,-.21,-.15,-.24,-.75],["c",-.09,-1.92,-.78,-3.72,-2.01,-5.19],["c",-.18,-.21,-.36,-.42,-.39,-.45],["l",-.09,-.06],["l",0,7.11],["l",0,7.14],["l",-.06,.09],["c",-.09,.06,-.09,.06,-.54,.06],["c",-.48,0,-.48,0,-.57,-.06],["l",-.06,-.09],["l",0,-14.82],["l",0,-14.85],["z"]],w:20.31,h:29.97},"clefs.F":{d:[["M",6.3,-7.8],["c",.36,-.03,1.65,0,2.13,.03],["c",3.6,.42,6.03,2.1,6.93,4.86],["c",.27,.84,.36,1.5,.36,2.58],["c",0,.9,-.03,1.35,-.18,2.16],["c",-.78,3.78,-3.54,7.08,-8.37,9.96],["c",-1.74,1.05,-3.87,2.13,-6.18,3.12],["c",-.39,.18,-.75,.33,-.81,.36],["c",-.06,.03,-.15,.06,-.18,.06],["c",-.15,0,-.33,-.18,-.33,-.33],["c",0,-.15,.06,-.21,.51,-.48],["c",3,-1.77,5.13,-3.21,6.84,-4.74],["c",.51,-.45,1.59,-1.5,1.95,-1.95],["c",1.89,-2.19,2.88,-4.32,3.15,-6.78],["c",.06,-.42,.06,-1.77,0,-2.19],["c",-.24,-2.01,-.93,-3.63,-2.04,-4.71],["c",-.63,-.63,-1.29,-1.02,-2.07,-1.2],["c",-1.62,-.39,-3.36,.15,-4.56,1.44],["c",-.54,.6,-1.05,1.47,-1.32,2.22],["l",-.09,.21],["l",.24,-.12],["c",.39,-.21,.63,-.24,1.11,-.24],["c",.3,0,.45,0,.66,.06],["c",1.92,.48,2.85,2.55,1.95,4.38],["c",-.45,.99,-1.41,1.62,-2.46,1.71],["c",-1.47,.09,-2.91,-.87,-3.39,-2.25],["c",-.18,-.57,-.21,-1.32,-.03,-2.28],["c",.39,-2.25,1.83,-4.2,3.81,-5.19],["c",.69,-.36,1.59,-.6,2.37,-.69],["z"],["m",11.58,2.52],["c",.84,-.21,1.71,.3,1.89,1.14],["c",.3,1.17,-.72,2.19,-1.89,1.89],["c",-.99,-.21,-1.5,-1.32,-1.02,-2.25],["c",.18,-.39,.6,-.69,1.02,-.78],["z"],["m",0,7.5],["c",.84,-.21,1.71,.3,1.89,1.14],["c",.21,.87,-.3,1.71,-1.14,1.89],["c",-.87,.21,-1.71,-.3,-1.89,-1.14],["c",-.21,-.84,.3,-1.71,1.14,-1.89],["z"]],w:20.153,h:23.142},"clefs.G":{d:[["M",9.69,-37.41],["c",.09,-.09,.24,-.06,.36,0],["c",.12,.09,.57,.6,.96,1.11],["c",1.77,2.34,3.21,5.85,3.57,8.73],["c",.21,1.56,.03,3.27,-.45,4.86],["c",-.69,2.31,-1.92,4.47,-4.23,7.44],["c",-.3,.39,-.57,.72,-.6,.75],["c",-.03,.06,0,.15,.18,.78],["c",.54,1.68,1.38,4.44,1.68,5.49],["l",.09,.42],["l",.39,0],["c",1.47,.09,2.76,.51,3.96,1.29],["c",1.83,1.23,3.06,3.21,3.39,5.52],["c",.09,.45,.12,1.29,.06,1.74],["c",-.09,1.02,-.33,1.83,-.75,2.73],["c",-.84,1.71,-2.28,3.06,-4.02,3.72],["l",-.33,.12],["l",.03,1.26],["c",0,1.74,-.06,3.63,-.21,4.62],["c",-.45,3.06,-2.19,5.49,-4.47,6.21],["c",-.57,.18,-.9,.21,-1.59,.21],["c",-.69,0,-1.02,-.03,-1.65,-.21],["c",-1.14,-.27,-2.13,-.84,-2.94,-1.65],["c",-.99,-.99,-1.56,-2.16,-1.71,-3.54],["c",-.09,-.81,.06,-1.53,.45,-2.13],["c",.63,-.99,1.83,-1.56,3,-1.53],["c",1.5,.09,2.64,1.32,2.73,2.94],["c",.06,1.47,-.93,2.7,-2.37,2.97],["c",-.45,.06,-.84,.03,-1.29,-.09],["l",-.21,-.09],["l",.09,.12],["c",.39,.54,.78,.93,1.32,1.26],["c",1.35,.87,3.06,1.02,4.35,.36],["c",1.44,-.72,2.52,-2.28,2.97,-4.35],["c",.15,-.66,.24,-1.5,.3,-3.03],["c",.03,-.84,.03,-2.94,0,-3],["c",-.03,0,-.18,0,-.36,.03],["c",-.66,.12,-.99,.12,-1.83,.12],["c",-1.05,0,-1.71,-.06,-2.61,-.3],["c",-4.02,-.99,-7.11,-4.35,-7.8,-8.46],["c",-.12,-.66,-.12,-.99,-.12,-1.83],["c",0,-.84,0,-1.14,.15,-1.92],["c",.36,-2.28,1.41,-4.62,3.3,-7.29],["l",2.79,-3.6],["c",.54,-.66,.96,-1.2,.96,-1.23],["c",0,-.03,-.09,-.33,-.18,-.69],["c",-.96,-3.21,-1.41,-5.28,-1.59,-7.68],["c",-.12,-1.38,-.15,-3.09,-.06,-3.96],["c",.33,-2.67,1.38,-5.07,3.12,-7.08],["c",.36,-.42,.99,-1.05,1.17,-1.14],["z"],["m",2.01,4.71],["c",-.15,-.3,-.3,-.54,-.3,-.54],["c",-.03,0,-.18,.09,-.3,.21],["c",-2.4,1.74,-3.87,4.2,-4.26,7.11],["c",-.06,.54,-.06,1.41,-.03,1.89],["c",.09,1.29,.48,3.12,1.08,5.22],["c",.15,.42,.24,.78,.24,.81],["c",0,.03,.84,-1.11,1.23,-1.68],["c",1.89,-2.73,2.88,-5.07,3.15,-7.53],["c",.09,-.57,.12,-1.74,.06,-2.37],["c",-.09,-1.23,-.27,-1.92,-.87,-3.12],["z"],["m",-2.94,20.7],["c",-.21,-.72,-.39,-1.32,-.42,-1.32],["c",0,0,-1.2,1.47,-1.86,2.37],["c",-2.79,3.63,-4.02,6.3,-4.35,9.3],["c",-.03,.21,-.03,.69,-.03,1.08],["c",0,.69,0,.75,.06,1.11],["c",.12,.54,.27,.99,.51,1.47],["c",.69,1.38,1.83,2.55,3.42,3.42],["c",.96,.54,2.07,.9,3.21,1.08],["c",.78,.12,2.04,.12,2.94,-.03],["c",.51,-.06,.45,-.03,.42,-.3],["c",-.24,-3.33,-.72,-6.33,-1.62,-10.08],["c",-.09,-.39,-.18,-.75,-.18,-.78],["c",-.03,-.03,-.42,0,-.81,.09],["c",-.9,.18,-1.65,.57,-2.22,1.14],["c",-.72,.72,-1.08,1.65,-1.05,2.64],["c",.06,.96,.48,1.83,1.23,2.58],["c",.36,.36,.72,.63,1.17,.9],["c",.33,.18,.36,.21,.42,.33],["c",.18,.42,-.18,.9,-.6,.87],["c",-.18,-.03,-.84,-.36,-1.26,-.63],["c",-.78,-.51,-1.38,-1.11,-1.86,-1.83],["c",-1.77,-2.7,-.99,-6.42,1.71,-8.19],["c",.3,-.21,.81,-.48,1.17,-.63],["c",.3,-.09,1.02,-.3,1.14,-.3],["c",.06,0,.09,0,.09,-.03],["c",.03,-.03,-.51,-1.92,-1.23,-4.26],["z"],["m",3.78,7.41],["c",-.18,-.03,-.36,-.06,-.39,-.06],["c",-.03,0,0,.21,.18,1.02],["c",.75,3.18,1.26,6.3,1.5,9.09],["c",.06,.72,0,.69,.51,.42],["c",.78,-.36,1.44,-.96,1.98,-1.77],["c",1.08,-1.62,1.2,-3.69,.3,-5.55],["c",-.81,-1.62,-2.31,-2.79,-4.08,-3.15],["z"]],w:19.051,h:57.057},"clefs.perc":{d:[["M",5.07,-7.44],["l",.09,-.06],["l",1.53,0],["l",1.53,0],["l",.09,.06],["l",.06,.09],["l",0,7.35],["l",0,7.32],["l",-.06,.09],["l",-.09,.06],["l",-1.53,0],["l",-1.53,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-7.32],["l",0,-7.35],["z"],["m",6.63,0],["l",.09,-.06],["l",1.53,0],["l",1.53,0],["l",.09,.06],["l",.06,.09],["l",0,7.35],["l",0,7.32],["l",-.06,.09],["l",-.09,.06],["l",-1.53,0],["l",-1.53,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-7.32],["l",0,-7.35],["z"]],w:21,h:14.97},"tab.big":{d:[["M",20.16,-21.66],["c",.24,-.09,.66,.09,.78,.36],["c",.09,.21,.09,.24,-.18,.54],["c",-.78,.81,-1.86,1.44,-2.94,1.71],["c",-.87,.24,-1.71,.24,-2.55,.03],["l",-.06,-.03],["l",-.18,.99],["c",-.33,1.98,-.75,4.26,-.96,5.04],["c",-.42,1.65,-1.26,3.18,-2.28,4.14],["c",-.57,.57,-1.17,.9,-1.86,1.08],["c",-.18,.06,-.33,.06,-.66,.06],["c",-.54,0,-.78,-.03,-1.23,-.27],["c",-.39,-.18,-.66,-.39,-1.38,-.99],["c",-.3,-.24,-.66,-.51,-.75,-.57],["c",-.21,-.15,-.27,-.24,-.24,-.45],["c",.06,-.27,.36,-.6,.6,-.66],["c",.18,-.03,.33,.06,.9,.57],["c",.48,.42,.72,.57,.93,.69],["c",.66,.33,1.38,.21,1.95,-.36],["c",.63,-.6,1.05,-1.62,1.23,-3],["c",.03,-.18,.09,-.66,.09,-1.11],["c",.09,-1.56,.33,-3.81,.57,-5.49],["c",.06,-.33,.09,-.63,.09,-.63],["c",-.03,-.03,-.81,-.12,-1.02,-.12],["c",-.57,0,-1.32,.12,-1.8,.33],["c",-.87,.3,-1.35,.78,-1.5,1.41],["c",-.18,.63,.09,1.26,.66,1.65],["c",.12,.06,.15,.12,.18,.24],["c",.09,.27,.06,.57,-.09,.75],["c",-.03,.06,-.12,.09,-.27,.15],["c",-.72,.21,-1.44,.15,-2.1,-.18],["c",-.54,-.27,-.96,-.66,-1.2,-1.14],["c",-.39,-.75,-.33,-1.74,.15,-2.52],["c",.27,-.42,.84,-.93,1.41,-1.23],["c",1.17,-.57,2.88,-.9,4.8,-.9],["c",.69,0,.78,0,1.08,.06],["c",.45,.09,1.11,.3,2.07,.6],["c",1.47,.48,1.83,.57,2.55,.54],["c",1.02,-.06,2.04,-.45,2.94,-1.11],["c",.12,-.09,.24,-.18,.27,-.18],["z"],["m",-5.88,13.05],["c",.21,-.03,.81,0,1.08,.06],["c",.48,.12,.9,.42,.99,.69],["c",.03,.09,.03,.15,0,.27],["c",0,.09,-.03,.57,-.06,1.08],["c",-.09,2.19,-.24,5.76,-.39,8.28],["c",-.06,1.53,-.06,1.77,.03,2.01],["c",.09,.18,.15,.24,.3,.3],["c",.24,.12,.54,.06,1.23,-.27],["c",.57,-.27,.66,-.3,.75,-.24],["c",.09,.06,.18,.3,.18,.45],["c",0,.33,-.15,.51,-.45,.63],["c",-.12,.03,-.39,.15,-.6,.27],["c",-1.17,.6,-1.38,.69,-1.8,.72],["c",-.45,.03,-.78,-.09,-1.08,-.39],["c",-.39,-.42,-.66,-1.2,-1.02,-3.12],["c",-.24,-1.23,-.36,-2.07,-.54,-3.75],["l",0,-.18],["l",-.36,.45],["c",-.6,.75,-1.32,1.59,-1.95,2.25],["c",-.15,.18,-.27,.3,-.27,.33],["c",0,0,.06,.09,.15,.18],["c",.24,.33,.6,.57,1.05,.69],["c",.18,.06,.3,.06,.69,.06],["l",.48,.03],["l",.06,.12],["c",.15,.27,.03,.72,-.21,.9],["c",-.18,.12,-.93,.27,-1.41,.27],["c",-.84,0,-1.59,-.3,-1.98,-.84],["l",-.12,-.15],["l",-.45,.42],["c",-.99,.87,-1.53,1.32,-2.16,1.74],["c",-.78,.51,-1.5,.84,-2.1,.93],["c",-.69,.12,-1.2,.03,-1.95,-.42],["c",-.21,-.12,-.51,-.27,-.66,-.36],["c",-.24,-.12,-.3,-.18,-.33,-.24],["c",-.12,-.27,.15,-.78,.45,-.93],["c",.24,-.12,.33,-.09,.9,.18],["c",.6,.3,.84,.39,1.2,.36],["c",.87,-.09,1.77,-.69,3.24,-2.31],["c",2.67,-2.85,4.59,-5.94,5.7,-9.15],["c",.15,-.45,.24,-.63,.42,-.81],["c",.21,-.24,.6,-.45,.99,-.51],["z"],["m",-3.99,16.05],["c",.18,0,.69,-.03,1.17,0],["c",3.27,.03,5.37,.75,6,2.07],["c",.45,.99,.12,2.4,-.81,3.42],["c",-.24,.27,-.57,.57,-.84,.75],["c",-.09,.06,-.18,.09,-.18,.12],["c",0,0,.18,.03,.42,.09],["c",1.23,.3,2.01,.81,2.37,1.59],["c",.27,.54,.3,1.32,.09,2.1],["c",-.12,.36,-.45,1.05,-.69,1.35],["c",-.87,1.17,-2.1,1.92,-3.54,2.25],["c",-.36,.06,-.48,.06,-.96,.06],["c",-.45,0,-.66,0,-.84,-.03],["c",-.84,-.18,-1.47,-.51,-2.07,-1.11],["c",-.33,-.33,-.45,-.51,-.45,-.63],["c",0,-.06,.03,-.15,.06,-.24],["c",.18,-.33,.69,-.6,.93,-.48],["c",.03,.03,.15,.12,.27,.24],["c",.39,.42,.99,.57,1.62,.45],["c",1.05,-.21,1.98,-1.02,2.31,-2.01],["c",.48,-1.53,-.48,-2.55,-2.58,-2.67],["c",-.21,0,-.36,-.03,-.42,-.06],["c",-.15,-.09,-.21,-.51,-.06,-.78],["c",.12,-.27,.24,-.33,.6,-.36],["c",.57,-.06,1.11,-.42,1.5,-.99],["c",.48,-.72,.54,-1.59,.18,-2.31],["c",-.12,-.21,-.45,-.54,-.69,-.69],["c",-.33,-.21,-.93,-.45,-1.35,-.51],["l",-.12,-.03],["l",-.06,.48],["c",-.54,2.94,-1.14,6.24,-1.29,6.75],["c",-.33,1.35,-.93,2.61,-1.65,3.6],["c",-.3,.36,-.81,.9,-1.14,1.14],["c",-.3,.24,-.84,.48,-1.14,.57],["c",-.33,.09,-.96,.09,-1.26,.03],["c",-.45,-.12,-.87,-.39,-1.53,-.96],["c",-.24,-.15,-.51,-.39,-.63,-.48],["c",-.3,-.21,-.33,-.33,-.21,-.63],["c",.12,-.18,.27,-.36,.42,-.45],["c",.27,-.12,.36,-.09,.87,.33],["c",.78,.6,1.08,.75,1.65,.72],["c",.45,-.03,.81,-.21,1.17,-.54],["c",.87,-.9,1.38,-2.85,1.38,-5.37],["c",0,-.6,.03,-1.11,.12,-2.04],["c",.06,-.69,.24,-2.01,.33,-2.58],["c",.06,-.24,.06,-.42,.06,-.42],["c",0,0,-.12,.03,-.21,.09],["c",-1.44,.57,-2.16,1.65,-1.74,2.55],["c",.09,.15,.18,.24,.27,.33],["c",.24,.21,.3,.27,.33,.39],["c",.06,.24,0,.63,-.15,.78],["c",-.09,.12,-.54,.21,-.96,.24],["c",-1.02,.03,-2.01,-.48,-2.43,-1.32],["c",-.21,-.45,-.27,-.9,-.15,-1.44],["c",.06,-.27,.21,-.66,.39,-.93],["c",.87,-1.29,3,-2.22,5.64,-2.43],["z"]],w:19.643,h:43.325},"tab.tiny":{d:[["M",16.02,-17.25],["c",.12,-.09,.15,-.09,.27,-.09],["c",.21,.03,.51,.3,.51,.45],["c",0,.06,-.12,.18,-.3,.36],["c",-1.11,1.08,-2.55,1.59,-3.84,1.41],["c",-.15,-.03,-.33,-.06,-.39,-.09],["c",-.06,-.03,-.09,-.03,-.12,-.03],["c",0,0,-.06,.42,-.15,.93],["c",-.33,2.01,-.66,3.69,-.84,4.26],["c",-.42,1.41,-1.23,2.67,-2.16,3.33],["c",-.27,.18,-.75,.42,-.99,.48],["c",-.3,.09,-.72,.09,-1.02,.06],["c",-.45,-.09,-.84,-.33,-1.53,-.9],["c",-.21,-.18,-.51,-.39,-.63,-.48],["c",-.27,-.21,-.3,-.24,-.3,-.36],["c",0,-.12,.09,-.36,.18,-.45],["c",.09,-.09,.27,-.18,.36,-.18],["c",.12,0,.3,.12,.66,.45],["c",.57,.51,.87,.69,1.23,.72],["c",.93,.06,1.68,-.78,1.98,-2.37],["c",.09,-.39,.15,-.75,.18,-1.53],["c",.06,-.99,.24,-2.79,.42,-4.05],["c",.03,-.3,.06,-.57,.06,-.6],["c",0,-.06,-.03,-.09,-.15,-.12],["c",-.9,-.18,-2.13,.06,-2.76,.57],["c",-.36,.3,-.51,.6,-.51,1.02],["c",0,.45,.15,.75,.48,.99],["c",.06,.06,.15,.18,.18,.24],["c",.12,.24,.03,.63,-.15,.69],["c",-.24,.12,-.6,.15,-.9,.15],["c",-.36,-.03,-.57,-.09,-.87,-.24],["c",-.78,-.36,-1.23,-1.11,-1.2,-1.92],["c",.12,-1.53,1.74,-2.49,4.62,-2.7],["c",1.2,-.09,1.47,-.03,3.33,.57],["c",.9,.3,1.14,.36,1.56,.39],["c",.45,0,.93,-.06,1.38,-.21],["c",.51,-.18,.81,-.33,1.41,-.75],["z"],["m",-4.68,10.38],["c",.39,-.06,.84,0,1.2,.15],["c",.24,.12,.36,.21,.45,.36],["l",.09,.09],["l",-.06,1.41],["c",-.09,2.19,-.18,3.96,-.27,5.49],["c",-.03,.78,-.06,1.59,-.06,1.86],["c",0,.42,0,.48,.06,.57],["c",.06,.18,.18,.24,.36,.27],["c",.18,0,.39,-.06,.84,-.27],["c",.45,-.21,.54,-.24,.63,-.18],["c",.12,.12,.15,.54,.03,.69],["c",-.03,.03,-.15,.12,-.27,.18],["c",-.15,.03,-.3,.12,-.36,.15],["c",-.87,.45,-1.02,.51,-1.26,.57],["c",-.33,.09,-.6,.06,-.84,-.06],["c",-.42,-.18,-.63,-.6,-.87,-1.44],["c",-.3,-1.23,-.57,-2.97,-.66,-4.08],["c",0,-.18,-.03,-.3,-.03,-.33],["l",-.06,.06],["c",-.18,.27,-1.11,1.38,-1.68,2.01],["l",-.33,.33],["l",.06,.09],["c",.06,.15,.27,.33,.48,.42],["c",.27,.18,.51,.24,.96,.27],["l",.39,0],["l",.03,.12],["c",.12,.21,.03,.57,-.15,.69],["c",-.03,.03,-.21,.09,-.36,.15],["c",-.27,.06,-.39,.06,-.75,.06],["c",-.48,0,-.75,-.03,-1.08,-.21],["c",-.21,-.12,-.51,-.36,-.57,-.48],["l",-.03,-.09],["l",-.39,.36],["c",-1.47,1.35,-2.49,1.98,-3.42,2.13],["c",-.54,.09,-.96,-.03,-1.62,-.39],["c",-.21,-.15,-.45,-.27,-.54,-.3],["c",-.18,-.09,-.21,-.21,-.12,-.45],["c",.06,-.27,.33,-.48,.54,-.48],["c",.03,0,.27,.09,.48,.21],["c",.48,.24,.69,.27,.99,.27],["c",.6,-.06,1.17,-.42,2.1,-1.35],["c",2.22,-2.22,4.02,-4.98,4.95,-7.59],["c",.21,-.57,.3,-.78,.48,-.93],["c",.15,-.15,.42,-.27,.66,-.33],["z"],["m",-3.06,12.84],["c",.27,-.03,1.68,0,2.01,.03],["c",1.92,.18,3.15,.69,3.63,1.5],["c",.18,.33,.24,.51,.21,.93],["c",0,.45,-.06,.72,-.24,1.11],["c",-.24,.51,-.69,1.02,-1.17,1.35],["c",-.21,.15,-.21,.15,-.12,.18],["c",.72,.15,1.11,.3,1.5,.57],["c",.39,.24,.63,.57,.75,.96],["c",.09,.3,.09,.96,0,1.29],["c",-.15,.57,-.39,1.05,-.78,1.5],["c",-.66,.75,-1.62,1.32,-2.61,1.53],["c",-.27,.06,-.42,.06,-.84,.06],["c",-.48,0,-.57,0,-.81,-.06],["c",-.6,-.18,-1.05,-.42,-1.47,-.81],["c",-.36,-.39,-.42,-.51,-.3,-.75],["c",.12,-.21,.39,-.39,.6,-.39],["c",.09,0,.15,.03,.33,.18],["c",.12,.12,.27,.24,.36,.27],["c",.96,.48,2.46,-.33,2.82,-1.5],["c",.24,-.81,-.03,-1.44,-.69,-1.77],["c",-.39,-.21,-1.02,-.33,-1.53,-.33],["c",-.18,0,-.21,0,-.27,-.09],["c",-.06,-.09,-.06,-.3,-.03,-.48],["c",.06,-.18,.18,-.36,.33,-.36],["c",.39,-.06,.51,-.09,.72,-.18],["c",.69,-.36,1.11,-1.23,.99,-2.01],["c",-.09,-.51,-.42,-.9,-.93,-1.17],["c",-.24,-.12,-.6,-.27,-.87,-.3],["c",-.09,-.03,-.09,-.03,-.12,.12],["c",0,.09,-.21,1.11,-.42,2.25],["c",-.66,3.75,-.72,3.99,-1.26,5.07],["c",-.9,1.89,-2.25,2.85,-3.48,2.61],["c",-.39,-.09,-.69,-.27,-1.38,-.84],["c",-.63,-.51,-.63,-.48,-.63,-.6],["c",0,-.18,.18,-.48,.39,-.57],["c",.21,-.12,.3,-.09,.81,.33],["c",.15,.15,.39,.3,.54,.36],["c",.18,.12,.27,.12,.48,.15],["c",.99,.06,1.71,-.78,2.04,-2.46],["c",.12,-.66,.18,-1.14,.21,-2.22],["c",.03,-1.23,.12,-2.25,.36,-3.63],["c",.03,-.24,.06,-.45,.06,-.48],["c",-.06,-.03,-.66,.27,-.9,.42],["c",-.06,.06,-.21,.18,-.33,.3],["c",-.57,.57,-.6,1.35,-.06,1.74],["c",.18,.12,.24,.24,.21,.51],["c",-.03,.3,-.15,.42,-.57,.48],["c",-1.11,.24,-2.22,-.42,-2.43,-1.38],["c",-.09,-.45,.03,-1.02,.3,-1.47],["c",.18,-.24,.6,-.63,.9,-.84],["c",.9,-.6,2.28,-1.02,3.69,-1.11],["z"]],w:15.709,h:34.656},"timesig.common":{d:[["M",6.66,-7.83],["c",.72,-.06,1.41,-.03,1.98,.09],["c",1.2,.27,2.34,.96,3.09,1.92],["c",.63,.81,1.08,1.86,1.14,2.73],["c",.06,1.02,-.51,1.92,-1.44,2.22],["c",-.24,.09,-.3,.09,-.63,.09],["c",-.33,0,-.42,0,-.63,-.06],["c",-.66,-.24,-1.14,-.63,-1.41,-1.2],["c",-.15,-.3,-.21,-.51,-.24,-.9],["c",-.06,-1.08,.57,-2.04,1.56,-2.37],["c",.18,-.06,.27,-.06,.63,-.06],["l",.45,0],["c",.06,.03,.09,.03,.09,0],["c",0,0,-.09,-.12,-.24,-.27],["c",-1.02,-1.11,-2.55,-1.68,-4.08,-1.5],["c",-1.29,.15,-2.04,.69,-2.4,1.74],["c",-.36,.93,-.42,1.89,-.42,5.37],["c",0,2.97,.06,3.96,.24,4.77],["c",.24,1.08,.63,1.68,1.41,2.07],["c",.81,.39,2.16,.45,3.18,.09],["c",1.29,-.45,2.37,-1.53,3.03,-2.97],["c",.15,-.33,.33,-.87,.39,-1.17],["c",.09,-.24,.15,-.36,.3,-.39],["c",.21,-.03,.42,.15,.39,.36],["c",-.06,.39,-.42,1.38,-.69,1.89],["c",-.96,1.8,-2.49,2.94,-4.23,3.18],["c",-.99,.12,-2.58,-.06,-3.63,-.45],["c",-.96,-.36,-1.71,-.84,-2.4,-1.5],["c",-1.11,-1.11,-1.8,-2.61,-2.04,-4.56],["c",-.06,-.6,-.06,-2.01,0,-2.61],["c",.24,-1.95,.9,-3.45,2.01,-4.56],["c",.69,-.66,1.44,-1.11,2.37,-1.47],["c",.63,-.24,1.47,-.42,2.22,-.48],["z"]],w:13.038,h:15.689},"timesig.cut":{d:[["M",6.24,-10.44],["c",.09,-.06,.09,-.06,.48,-.06],["c",.36,0,.36,0,.45,.06],["l",.06,.09],["l",0,1.23],["l",0,1.26],["l",.27,0],["c",1.26,0,2.49,.45,3.48,1.29],["c",1.05,.87,1.8,2.28,1.89,3.48],["c",.06,1.02,-.51,1.92,-1.44,2.22],["c",-.24,.09,-.3,.09,-.63,.09],["c",-.33,0,-.42,0,-.63,-.06],["c",-.66,-.24,-1.14,-.63,-1.41,-1.2],["c",-.15,-.3,-.21,-.51,-.24,-.9],["c",-.06,-1.08,.57,-2.04,1.56,-2.37],["c",.18,-.06,.27,-.06,.63,-.06],["l",.45,0],["c",.06,.03,.09,.03,.09,0],["c",0,-.03,-.45,-.51,-.66,-.69],["c",-.87,-.69,-1.83,-1.05,-2.94,-1.11],["l",-.42,0],["l",0,7.17],["l",0,7.14],["l",.42,0],["c",.69,-.03,1.23,-.18,1.86,-.51],["c",1.05,-.51,1.89,-1.47,2.46,-2.7],["c",.15,-.33,.33,-.87,.39,-1.17],["c",.09,-.24,.15,-.36,.3,-.39],["c",.21,-.03,.42,.15,.39,.36],["c",-.03,.24,-.21,.78,-.39,1.2],["c",-.96,2.37,-2.94,3.9,-5.13,3.9],["l",-.3,0],["l",0,1.26],["l",0,1.23],["l",-.06,.09],["c",-.09,.06,-.09,.06,-.45,.06],["c",-.39,0,-.39,0,-.48,-.06],["l",-.06,-.09],["l",0,-1.29],["l",0,-1.29],["l",-.21,-.03],["c",-1.23,-.21,-2.31,-.63,-3.21,-1.29],["c",-.15,-.09,-.45,-.36,-.66,-.57],["c",-1.11,-1.11,-1.8,-2.61,-2.04,-4.56],["c",-.06,-.6,-.06,-2.01,0,-2.61],["c",.24,-1.95,.93,-3.45,2.04,-4.59],["c",.42,-.39,.78,-.66,1.26,-.93],["c",.75,-.45,1.65,-.75,2.61,-.9],["l",.21,-.03],["l",0,-1.29],["l",0,-1.29],["z"],["m",-.06,10.44],["c",0,-5.58,0,-6.99,-.03,-6.99],["c",-.15,0,-.63,.27,-.87,.45],["c",-.45,.36,-.75,.93,-.93,1.77],["c",-.18,.81,-.24,1.8,-.24,4.74],["c",0,2.97,.06,3.96,.24,4.77],["c",.24,1.08,.66,1.68,1.41,2.07],["c",.12,.06,.3,.12,.33,.15],["l",.09,0],["l",0,-6.96],["z"]],w:13.038,h:20.97},"timesig.imperfectum":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},"timesig.imperfectum2":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},"timesig.perfectum":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},"timesig.perfectum2":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},f:{d:[["M",9.93,-14.28],["c",1.53,-.18,2.88,.45,3.12,1.5],["c",.12,.51,0,1.32,-.27,1.86],["c",-.15,.3,-.42,.57,-.63,.69],["c",-.69,.36,-1.56,.03,-1.83,-.69],["c",-.09,-.24,-.09,-.69,0,-.87],["c",.06,-.12,.21,-.24,.45,-.42],["c",.42,-.24,.57,-.45,.6,-.72],["c",.03,-.33,-.09,-.39,-.63,-.42],["c",-.3,0,-.45,0,-.6,.03],["c",-.81,.21,-1.35,.93,-1.74,2.46],["c",-.06,.27,-.48,2.25,-.48,2.31],["c",0,.03,.39,.03,.9,.03],["c",.72,0,.9,0,.99,.06],["c",.42,.15,.45,.72,.03,.9],["c",-.12,.06,-.24,.06,-1.17,.06],["l",-1.05,0],["l",-.78,2.55],["c",-.45,1.41,-.87,2.79,-.96,3.06],["c",-.87,2.37,-2.37,4.74,-3.78,5.91],["c",-1.05,.9,-2.04,1.23,-3.09,1.08],["c",-1.11,-.18,-1.89,-.78,-2.04,-1.59],["c",-.12,-.66,.15,-1.71,.54,-2.19],["c",.69,-.75,1.86,-.54,2.22,.39],["c",.06,.15,.09,.27,.09,.48],["c",0,.24,-.03,.27,-.12,.42],["c",-.03,.09,-.15,.18,-.27,.27],["c",-.09,.06,-.27,.21,-.36,.27],["c",-.24,.18,-.36,.36,-.39,.6],["c",-.03,.33,.09,.39,.63,.42],["c",.42,0,.63,-.03,.9,-.15],["c",.6,-.3,.96,-.96,1.38,-2.64],["c",.09,-.42,.63,-2.55,1.17,-4.77],["l",1.02,-4.08],["c",0,-.03,-.36,-.03,-.81,-.03],["c",-.72,0,-.81,0,-.93,-.06],["c",-.42,-.18,-.39,-.75,.03,-.9],["c",.09,-.06,.27,-.06,1.05,-.06],["l",.96,0],["l",0,-.09],["c",.06,-.18,.3,-.72,.51,-1.17],["c",1.2,-2.46,3.3,-4.23,5.34,-4.5],["z"]],w:16.155,h:19.445},m:{d:[["M",2.79,-8.91],["c",.09,0,.3,-.03,.45,-.03],["c",.24,.03,.3,.03,.45,.12],["c",.36,.15,.63,.54,.75,1.02],["l",.03,.21],["l",.33,-.3],["c",.69,-.69,1.38,-1.02,2.07,-1.02],["c",.27,0,.33,0,.48,.06],["c",.21,.09,.48,.36,.63,.6],["c",.03,.09,.12,.27,.18,.42],["c",.03,.15,.09,.27,.12,.27],["c",0,0,.09,-.09,.18,-.21],["c",.33,-.39,.87,-.81,1.29,-.99],["c",.78,-.33,1.47,-.21,2.01,.33],["c",.3,.33,.48,.69,.6,1.14],["c",.09,.42,.06,.54,-.54,3.06],["c",-.33,1.29,-.57,2.4,-.57,2.43],["c",0,.12,.09,.21,.21,.21],["c",.24,0,.75,-.3,1.2,-.72],["c",.45,-.39,.6,-.45,.78,-.27],["c",.18,.18,.09,.36,-.45,.87],["c",-1.05,.96,-1.83,1.47,-2.58,1.71],["c",-.93,.33,-1.53,.21,-1.8,-.33],["c",-.06,-.15,-.06,-.21,-.06,-.45],["c",0,-.24,.03,-.48,.6,-2.82],["c",.42,-1.71,.6,-2.64,.63,-2.79],["c",.03,-.57,-.3,-.75,-.84,-.48],["c",-.24,.12,-.54,.39,-.66,.63],["c",-.03,.09,-.42,1.38,-.9,3],["c",-.9,3.15,-.84,3,-1.14,3.15],["l",-.15,.09],["l",-.78,0],["c",-.6,0,-.78,0,-.84,-.06],["c",-.09,-.03,-.18,-.18,-.18,-.27],["c",0,-.03,.36,-1.38,.84,-2.97],["c",.57,-2.04,.81,-2.97,.84,-3.12],["c",.03,-.54,-.3,-.72,-.84,-.45],["c",-.24,.12,-.57,.42,-.66,.63],["c",-.06,.09,-.51,1.44,-1.05,2.97],["c",-.51,1.56,-.99,2.85,-.99,2.91],["c",-.06,.12,-.21,.24,-.36,.3],["c",-.12,.06,-.21,.06,-.9,.06],["c",-.6,0,-.78,0,-.84,-.06],["c",-.09,-.03,-.18,-.18,-.18,-.27],["c",0,-.03,.45,-1.38,.99,-2.97],["c",1.05,-3.18,1.05,-3.18,.93,-3.45],["c",-.12,-.27,-.39,-.3,-.72,-.15],["c",-.54,.27,-1.14,1.17,-1.56,2.4],["c",-.06,.15,-.15,.3,-.18,.36],["c",-.21,.21,-.57,.27,-.72,.09],["c",-.09,-.09,-.06,-.21,.06,-.63],["c",.48,-1.26,1.26,-2.46,2.01,-3.21],["c",.57,-.54,1.2,-.87,1.83,-1.02],["z"]],w:14.687,h:9.126},p:{d:[["M",1.92,-8.7],["c",.27,-.09,.81,-.06,1.11,.03],["c",.54,.18,.93,.51,1.17,.99],["c",.09,.15,.15,.33,.18,.36],["l",0,.12],["l",.3,-.27],["c",.66,-.6,1.35,-1.02,2.13,-1.2],["c",.21,-.06,.33,-.06,.78,-.06],["c",.45,0,.51,0,.84,.09],["c",1.29,.33,2.07,1.32,2.25,2.79],["c",.09,.81,-.09,2.01,-.45,2.79],["c",-.54,1.26,-1.86,2.55,-3.18,3.03],["c",-.45,.18,-.81,.24,-1.29,.24],["c",-.69,-.03,-1.35,-.18,-1.86,-.45],["c",-.3,-.15,-.51,-.18,-.69,-.09],["c",-.09,.03,-.18,.09,-.18,.12],["c",-.09,.12,-1.05,2.94,-1.05,3.06],["c",0,.24,.18,.48,.51,.63],["c",.18,.06,.54,.15,.75,.15],["c",.21,0,.36,.06,.42,.18],["c",.12,.18,.06,.42,-.12,.54],["c",-.09,.03,-.15,.03,-.78,0],["c",-1.98,-.15,-3.81,-.15,-5.79,0],["c",-.63,.03,-.69,.03,-.78,0],["c",-.24,-.15,-.24,-.57,.03,-.66],["c",.06,-.03,.48,-.09,.99,-.12],["c",.87,-.06,1.11,-.09,1.35,-.21],["c",.18,-.06,.33,-.18,.39,-.3],["c",.06,-.12,3.24,-9.42,3.27,-9.6],["c",.06,-.33,.03,-.57,-.15,-.69],["c",-.09,-.06,-.12,-.06,-.3,-.06],["c",-.69,.06,-1.53,1.02,-2.28,2.61],["c",-.09,.21,-.21,.45,-.27,.51],["c",-.09,.12,-.33,.24,-.48,.24],["c",-.18,0,-.36,-.15,-.36,-.3],["c",0,-.24,.78,-1.83,1.26,-2.55],["c",.72,-1.11,1.47,-1.74,2.28,-1.92],["z"],["m",5.37,1.47],["c",-.27,-.12,-.75,-.03,-1.14,.21],["c",-.75,.48,-1.47,1.68,-1.89,3.15],["c",-.45,1.47,-.42,2.34,0,2.7],["c",.45,.39,1.26,.21,1.83,-.36],["c",.51,-.51,.99,-1.68,1.38,-3.27],["c",.3,-1.17,.33,-1.74,.15,-2.13],["c",-.09,-.15,-.15,-.21,-.33,-.3],["z"]],w:14.689,h:13.127},r:{d:[["M",6.33,-9.12],["c",.27,-.03,.93,0,1.2,.06],["c",.84,.21,1.23,.81,1.02,1.53],["c",-.24,.75,-.9,1.17,-1.56,.96],["c",-.33,-.09,-.51,-.3,-.66,-.75],["c",-.03,-.12,-.09,-.24,-.12,-.3],["c",-.09,-.15,-.3,-.24,-.48,-.24],["c",-.57,0,-1.38,.54,-1.65,1.08],["c",-.06,.15,-.33,1.17,-.9,3.27],["c",-.57,2.31,-.81,3.12,-.87,3.21],["c",-.03,.06,-.12,.15,-.18,.21],["l",-.12,.06],["l",-.81,.03],["c",-.69,0,-.81,0,-.9,-.03],["c",-.09,-.06,-.18,-.21,-.18,-.3],["c",0,-.06,.39,-1.62,.9,-3.51],["c",.84,-3.24,.87,-3.45,.87,-3.72],["c",0,-.21,0,-.27,-.03,-.36],["c",-.12,-.15,-.21,-.24,-.42,-.24],["c",-.24,0,-.45,.15,-.78,.42],["c",-.33,.36,-.45,.54,-.72,1.14],["c",-.03,.12,-.21,.24,-.36,.27],["c",-.12,0,-.15,0,-.24,-.06],["c",-.18,-.12,-.18,-.21,-.06,-.54],["c",.21,-.57,.42,-.93,.78,-1.32],["c",.54,-.51,1.2,-.81,1.95,-.87],["c",.81,-.03,1.53,.3,1.92,.87],["l",.12,.18],["l",.09,-.09],["c",.57,-.45,1.41,-.84,2.19,-.96],["z"]],w:9.41,h:9.132},s:{d:[["M",4.47,-8.73],["c",.09,0,.36,-.03,.57,-.03],["c",.75,.03,1.29,.24,1.71,.63],["c",.51,.54,.66,1.26,.36,1.83],["c",-.24,.42,-.63,.57,-1.11,.42],["c",-.33,-.09,-.6,-.36,-.6,-.57],["c",0,-.03,.06,-.21,.15,-.39],["c",.12,-.21,.15,-.33,.18,-.48],["c",0,-.24,-.06,-.48,-.15,-.6],["c",-.15,-.21,-.42,-.24,-.75,-.15],["c",-.27,.06,-.48,.18,-.69,.36],["c",-.39,.39,-.51,.96,-.33,1.38],["c",.09,.21,.42,.51,.78,.72],["c",1.11,.69,1.59,1.11,1.89,1.68],["c",.21,.39,.24,.78,.15,1.29],["c",-.18,1.2,-1.17,2.16,-2.52,2.52],["c",-1.02,.24,-1.95,.12,-2.7,-.42],["c",-.72,-.51,-.99,-1.47,-.6,-2.19],["c",.24,-.48,.72,-.63,1.17,-.42],["c",.33,.18,.54,.45,.57,.81],["c",0,.21,-.03,.3,-.33,.51],["c",-.33,.24,-.39,.42,-.27,.69],["c",.06,.15,.21,.27,.45,.33],["c",.3,.09,.87,.09,1.2,0],["c",.75,-.21,1.23,-.72,1.29,-1.35],["c",.03,-.42,-.15,-.81,-.54,-1.2],["c",-.24,-.24,-.48,-.42,-1.41,-1.02],["c",-.69,-.42,-1.05,-.93,-1.05,-1.47],["c",0,-.39,.12,-.87,.3,-1.23],["c",.27,-.57,.78,-1.05,1.38,-1.35],["c",.24,-.12,.63,-.27,.9,-.3],["z"]],w:6.632,h:8.758},z:{d:[["M",2.64,-7.95],["c",.36,-.09,.81,-.03,1.71,.27],["c",.78,.21,.96,.27,1.74,.3],["c",.87,.06,1.02,.03,1.38,-.21],["c",.21,-.15,.33,-.15,.48,-.06],["c",.15,.09,.21,.3,.15,.45],["c",-.03,.06,-1.26,1.26,-2.76,2.67],["l",-2.73,2.55],["l",.54,.03],["c",.54,.03,.72,.03,2.01,.15],["c",.36,.03,.9,.06,1.2,.09],["c",.66,0,.81,-.03,1.02,-.24],["c",.3,-.3,.39,-.72,.27,-1.23],["c",-.06,-.27,-.06,-.27,-.03,-.39],["c",.15,-.3,.54,-.27,.69,.03],["c",.15,.33,.27,1.02,.27,1.5],["c",0,1.47,-1.11,2.7,-2.52,2.79],["c",-.57,.03,-1.02,-.09,-2.01,-.51],["c",-1.02,-.42,-1.23,-.48,-2.13,-.54],["c",-.81,-.06,-.96,-.03,-1.26,.18],["c",-.12,.06,-.24,.12,-.27,.12],["c",-.27,0,-.45,-.3,-.36,-.51],["c",.03,-.06,1.32,-1.32,2.91,-2.79],["l",2.88,-2.73],["c",-.03,0,-.21,.03,-.42,.06],["c",-.21,.03,-.78,.09,-1.23,.12],["c",-1.11,.12,-1.23,.15,-1.95,.27],["c",-.72,.15,-1.17,.18,-1.29,.09],["c",-.27,-.18,-.21,-.75,.12,-1.26],["c",.39,-.6,.93,-1.02,1.59,-1.2],["z"]],w:8.573,h:8.743},"+":{d:[["M",3.48,-9.3],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["l",.06,.15],["l",0,1.29],["l",0,1.29],["l",1.29,0],["c",1.23,0,1.29,0,1.41,.06],["c",.06,.03,.15,.09,.18,.12],["c",.12,.09,.21,.33,.21,.48],["c",0,.15,-.09,.39,-.21,.48],["c",-.03,.03,-.12,.09,-.18,.12],["c",-.12,.06,-.18,.06,-1.41,.06],["l",-1.29,0],["l",0,1.29],["c",0,1.23,0,1.29,-.06,1.41],["c",-.09,.18,-.15,.24,-.3,.33],["c",-.21,.09,-.39,.09,-.57,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.06,-.12,-.06,-.18,-.06,-1.41],["l",0,-1.29],["l",-1.29,0],["c",-1.23,0,-1.29,0,-1.41,-.06],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.09,-.18,-.09,-.36,0,-.54],["c",.09,-.18,.15,-.24,.33,-.33],["l",.15,-.06],["l",1.26,0],["l",1.29,0],["l",0,-1.29],["c",0,-1.23,0,-1.29,.06,-1.41],["c",.09,-.18,.15,-.24,.33,-.33],["z"]],w:7.507,h:7.515},",":{d:[["M",1.32,-3.36],["c",.57,-.15,1.17,.03,1.59,.45],["c",.45,.45,.6,.96,.51,1.89],["c",-.09,1.23,-.42,2.46,-.99,3.93],["c",-.3,.72,-.72,1.62,-.78,1.68],["c",-.18,.21,-.51,.18,-.66,-.06],["c",-.03,-.06,-.06,-.15,-.06,-.18],["c",0,-.06,.12,-.33,.24,-.63],["c",.84,-1.8,1.02,-2.61,.69,-3.24],["c",-.12,-.24,-.27,-.36,-.75,-.6],["c",-.36,-.15,-.42,-.21,-.6,-.39],["c",-.69,-.69,-.69,-1.71,0,-2.4],["c",.21,-.21,.51,-.39,.81,-.45],["z"]],w:3.452,h:8.143},"-":{d:[["M",.18,-5.34],["c",.09,-.06,.15,-.06,2.31,-.06],["c",2.46,0,2.37,0,2.46,.21],["c",.12,.21,.03,.42,-.15,.54],["c",-.09,.06,-.15,.06,-2.28,.06],["c",-2.16,0,-2.22,0,-2.31,-.06],["c",-.27,-.15,-.27,-.54,-.03,-.69],["z"]],w:5.001,h:.81},".":{d:[["M",1.32,-3.36],["c",1.05,-.27,2.1,.57,2.1,1.65],["c",0,1.08,-1.05,1.92,-2.1,1.65],["c",-.9,-.21,-1.5,-1.14,-1.26,-2.04],["c",.12,-.63,.63,-1.11,1.26,-1.26],["z"]],w:3.413,h:3.402},"scripts.wedge":{d:[["M",-3.66,-7.44],["c",.06,-.09,0,-.09,.81,.03],["c",1.86,.3,3.84,.3,5.73,0],["c",.78,-.12,.72,-.12,.78,-.03],["c",.15,.15,.12,.24,-.24,.6],["c",-.93,.93,-1.98,2.76,-2.67,4.62],["c",-.3,.78,-.51,1.71,-.51,2.13],["c",0,.15,0,.18,-.06,.27],["c",-.12,.09,-.24,.09,-.36,0],["c",-.06,-.09,-.06,-.12,-.06,-.27],["c",0,-.42,-.21,-1.35,-.51,-2.13],["c",-.69,-1.86,-1.74,-3.69,-2.67,-4.62],["c",-.36,-.36,-.39,-.45,-.24,-.6],["z"]],w:7.49,h:7.752},"scripts.thumb":{d:[["M",-.54,-3.69],["c",.15,-.03,.36,-.06,.51,-.06],["c",1.44,0,2.58,1.11,2.94,2.85],["c",.09,.48,.09,1.32,0,1.8],["c",-.27,1.41,-1.08,2.43,-2.16,2.73],["l",-.18,.06],["l",0,.12],["c",.03,.06,.06,.45,.09,.87],["c",.03,.57,.03,.78,0,.84],["c",-.09,.27,-.39,.48,-.66,.48],["c",-.27,0,-.57,-.21,-.66,-.48],["c",-.03,-.06,-.03,-.27,0,-.84],["c",.03,-.42,.06,-.81,.09,-.87],["l",0,-.12],["l",-.18,-.06],["c",-1.08,-.3,-1.89,-1.32,-2.16,-2.73],["c",-.09,-.48,-.09,-1.32,0,-1.8],["c",.15,-.84,.51,-1.53,1.02,-2.04],["c",.39,-.39,.84,-.63,1.35,-.75],["z"],["m",1.05,.9],["c",-.15,-.09,-.21,-.09,-.45,-.12],["c",-.15,0,-.3,.03,-.39,.03],["c",-.57,.18,-.9,.72,-1.08,1.74],["c",-.06,.48,-.06,1.8,0,2.28],["c",.15,.9,.42,1.44,.9,1.65],["c",.18,.09,.21,.09,.51,.09],["c",.3,0,.33,0,.51,-.09],["c",.48,-.21,.75,-.75,.9,-1.65],["c",.03,-.27,.03,-.54,.03,-1.14],["c",0,-.6,0,-.87,-.03,-1.14],["c",-.15,-.9,-.45,-1.44,-.9,-1.65],["z"]],w:5.955,h:9.75},"scripts.open":{d:[["M",-.54,-3.69],["c",.15,-.03,.36,-.06,.51,-.06],["c",1.44,0,2.58,1.11,2.94,2.85],["c",.09,.48,.09,1.32,0,1.8],["c",-.33,1.74,-1.47,2.85,-2.91,2.85],["c",-1.44,0,-2.58,-1.11,-2.91,-2.85],["c",-.09,-.48,-.09,-1.32,0,-1.8],["c",.15,-.84,.51,-1.53,1.02,-2.04],["c",.39,-.39,.84,-.63,1.35,-.75],["z"],["m",1.11,.9],["c",-.21,-.09,-.27,-.09,-.51,-.12],["c",-.3,0,-.42,.03,-.66,.15],["c",-.24,.12,-.51,.39,-.66,.63],["c",-.54,.93,-.63,2.64,-.21,3.81],["c",.21,.54,.51,.9,.93,1.11],["c",.21,.09,.24,.09,.54,.09],["c",.3,0,.33,0,.54,-.09],["c",.42,-.21,.72,-.57,.93,-1.11],["c",.36,-.99,.36,-2.37,0,-3.36],["c",-.21,-.54,-.51,-.9,-.9,-1.11],["z"]],w:5.955,h:7.5},"scripts.longphrase":{d:[["M",1.47,-15.09],["c",.36,-.09,.66,-.18,.69,-.18],["c",.06,0,.06,.54,.06,11.25],["l",0,11.25],["l",-.63,.15],["c",-.66,.18,-1.44,.39,-1.5,.39],["c",-.03,0,-.03,-3.39,-.03,-11.25],["l",0,-11.25],["l",.36,-.09],["c",.21,-.06,.66,-.18,1.05,-.27],["z"]],w:2.16,h:23.04},"scripts.mediumphrase":{d:[["M",1.47,-7.59],["c",.36,-.09,.66,-.18,.69,-.18],["c",.06,0,.06,.39,.06,7.5],["l",0,7.5],["l",-.63,.15],["c",-.66,.18,-1.44,.39,-1.5,.39],["c",-.03,0,-.03,-2.28,-.03,-7.5],["l",0,-7.5],["l",.36,-.09],["c",.21,-.06,.66,-.18,1.05,-.27],["z"]],w:2.16,h:15.54},"scripts.shortphrase":{d:[["M",1.47,-7.59],["c",.36,-.09,.66,-.18,.69,-.18],["c",.06,0,.06,.21,.06,3.75],["l",0,3.75],["l",-.42,.09],["c",-.57,.18,-1.65,.45,-1.71,.45],["c",-.03,0,-.03,-.72,-.03,-3.75],["l",0,-3.75],["l",.36,-.09],["c",.21,-.06,.66,-.18,1.05,-.27],["z"]],w:2.16,h:8.04},"scripts.snap":{d:[["M",4.5,-3.39],["c",.36,-.03,.96,-.03,1.35,0],["c",1.56,.15,3.15,.9,4.2,2.01],["c",.24,.27,.33,.42,.33,.6],["c",0,.27,.03,.24,-2.46,2.22],["c",-1.29,1.02,-2.4,1.86,-2.49,1.92],["c",-.18,.09,-.3,.09,-.48,0],["c",-.09,-.06,-1.2,-.9,-2.49,-1.92],["c",-2.49,-1.98,-2.46,-1.95,-2.46,-2.22],["c",0,-.18,.09,-.33,.33,-.6],["c",1.05,-1.08,2.64,-1.86,4.17,-2.01],["z"],["m",1.29,1.17],["c",-1.47,-.15,-2.97,.3,-4.14,1.2],["l",-.18,.15],["l",.06,.09],["c",.15,.12,3.63,2.85,3.66,2.85],["c",.03,0,3.51,-2.73,3.66,-2.85],["l",.06,-.09],["l",-.18,-.15],["c",-.84,-.66,-1.89,-1.08,-2.94,-1.2],["z"]],w:10.38,h:6.84}};gs["noteheads.slash.whole"]={d:[["M",5,-5],["l",1,1],["l",-5,5],["l",-1,-1],["z"],["m",4,6],["l",-5,-5],["l",2,-2],["l",5,5],["z"],["m",0,-2],["l",1,1],["l",-5,5],["l",-1,-1],["z"],["m",-4,6],["l",-5,-5],["l",2,-2],["l",5,5],["z"]],w:10.81,h:15.63};gs["noteheads.slash.quarter"]={d:[["M",9,-6],["l",0,4],["l",-9,9],["l",0,-4],["z"]],w:9,h:9};gs["noteheads.harmonic.quarter"]={d:[["M",3.63,-4.02],["c",.09,-.06,.18,-.09,.24,-.03],["c",.03,.03,.87,.93,1.83,2.01],["c",1.5,1.65,1.8,1.98,1.8,2.04],["c",0,.06,-.3,.39,-1.8,2.04],["c",-.96,1.08,-1.8,1.98,-1.83,2.01],["c",-.06,.06,-.15,.03,-.24,-.03],["c",-.12,-.09,-3.54,-3.84,-3.6,-3.93],["c",-.03,-.03,-.03,-.09,-.03,-.15],["c",.03,-.06,3.45,-3.84,3.63,-3.96],["z"]],w:7.5,h:8.165};gs["noteheads.triangle.quarter"]={d:[["M",0,0],["l",9,0],["l",-4.5,-9],["z"]],w:9,h:9};var wA=function(t){for(var n=[],e=0,i=t.length;e<i;e++){n[e]=[];for(var r=0,s=t[e].length;r<s;r++)n[e][r]=t[e][r]}return n},lq=function(t,n,e){for(var i=0,r=t.length;i<r;i++){var s=t[i],a,l;for(a=1,l=s.length;a<l;a++)s[a]*=a%2?n:e}},cq={printSymbol:function(t,n,e,i,r){if(!gs[e])return null;var s=wA(gs[e].d);s[0][1]+=t,s[0][2]+=n;for(var a="",l=0;l<s.length;l++)a+=s[l].join(" ");return r.path=a,i.path(r)},getPathForSymbol:function(t,n,e,i,r){if(i=i||1,r=r||1,!gs[e])return null;var s=wA(gs[e].d);return(i!==1||r!==1)&&lq(s,i,r),s[0][1]+=t,s[0][2]+=n,s},getSymbolWidth:function(t){return gs[t]?gs[t].w:0},symbolHeightInPitches:function(t){var n=gs[t]?gs[t].h:0;return n/aq.STEP},getSymbolAlign:function(t){return t.substring(0,7)==="scripts"&&t!=="scripts.roll"?"center":"left"},getYCorr:function(t){switch(t){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":return-2;case"timesig.common":case"timesig.cut":return 0;case"flags.d32nd":return-1;case"flags.d64th":return-2;case"flags.u32nd":return 1;case"flags.u64th":return 3;case"rests.whole":return 1;case"rests.half":return-1;case"rests.8th":return-1;case"rests.quarter":return-1;case"rests.16th":return-1;case"rests.32nd":return-1;case"rests.64th":return-1;case"f":case"m":case"p":case"s":case"z":return-4;case"scripts.trill":case"scripts.upbow":case"scripts.downbow":return-2;case"scripts.ufermata":case"scripts.wedge":case"scripts.roll":case"scripts.shortphrase":case"scripts.longphrase":return-1;case"scripts.dfermata":return 1;default:return 0}},setSymbol:function(t,n){gs[t]=n}};MA.exports=cq});var PA=et((aCe,SA)=>{var dq=fd(),yp=Sl(),lC=ha(),hq=function(t,n){var e,i=0;t.el_type="clef";var r=new dq(t,0,10,"staff-extra clef",n);switch(r.isClef=!0,t.type){case"treble":e="clefs.G";break;case"tenor":e="clefs.C";break;case"alto":e="clefs.C";break;case"bass":e="clefs.F";break;case"treble+8":e="clefs.G",i=1;break;case"tenor+8":e="clefs.C",i=1;break;case"bass+8":e="clefs.F",i=1;break;case"alto+8":e="clefs.C",i=1;break;case"treble-8":e="clefs.G",i=-1;break;case"tenor-8":e="clefs.C",i=-1;break;case"bass-8":e="clefs.F",i=-1;break;case"alto-8":e="clefs.C",i=-1;break;case"none":return null;case"perc":e="clefs.perc";break;default:r.addFixed(new lC("clef="+t.type,0,0,void 0,{type:"debug"}))}var s=5;if(e){var a=yp.symbolHeightInPitches(e),l=uq(e);if(r.addRight(new lC(e,s,yp.getSymbolWidth(e),t.clefPos,{top:a+t.clefPos+l,bottom:t.clefPos+l})),i!==0){var d=.6666666666666666,u=(yp.getSymbolWidth(e)-yp.getSymbolWidth("8")*d)/2,h=i>0?r.top+3:r.bottom-1,_=i>0?r.top+3:r.bottom-3,b=_-2;t.type==="bass-8"&&(h=3,u=0),r.addRight(new lC("8",s+u,yp.getSymbolWidth("8")*d,h,{scalex:d,scaley:d,top:_,bottom:b}))}}return r};function uq(t){switch(t){case"clefs.G":return-5;case"clefs.C":return-4;case"clefs.F":return-4;case"clefs.perc":return-2;default:return 0}}SA.exports=hq});var EA=et((lCe,kA)=>{var pq=fd(),u_=Sl(),fq=ha(),mq=oo(),gq=function(t,n){if(t.el_type="keySignature",!t.accidentals||t.accidentals.length===0)return null;var e=new pq(t,0,10,"staff-extra key-signature",n);e.isKeySig=!0;var i=0;return mq.each(t.accidentals,function(r){var s,a=0;switch(r.acc){case"sharp":s="accidentals.sharp",a=-3;break;case"natural":s="accidentals.nat";break;case"flat":s="accidentals.flat",a=-1.2;break;case"quartersharp":s="accidentals.halfsharp",a=-2.5;break;case"quarterflat":s="accidentals.halfflat",a=-1.2;break;default:s="accidentals.flat"}e.addRight(new fq(s,i,u_.getSymbolWidth(s),r.verticalPos,{thickness:u_.symbolHeightInPitches(s),top:r.verticalPos+u_.symbolHeightInPitches(s)+a,bottom:r.verticalPos+a})),i+=u_.getSymbolWidth(s)+2},this),e};kA.exports=gq});var AA=et((cCe,TA)=>{var ua=Sl(),Wh=ha(),_q=function(t,n,e,i){i||(i={});var r=i.dir!==void 0?i.dir:null,s=i.headx!==void 0?i.headx:0,a=i.extrax!==void 0?i.extrax:0,l=i.flag!==void 0?i.flag:null,d=i.dot!==void 0?i.dot:0,u=i.dotshiftx!==void 0?i.dotshiftx:0,h=i.scale!==void 0?i.scale:1,_=i.accidentalSlot!==void 0?i.accidentalSlot:[],b=i.shouldExtendStem!==void 0?i.shouldExtendStem:!1,w=i.printAccidentals!==void 0?i.printAccidentals:!0,S=e.verticalPos,L,R=0,z=0,ne=0;if(n===void 0)t.addFixed(new Wh("pitch is undefined",0,0,0,{type:"debug"}));else if(n==="")L=new Wh(null,0,0,S);else{var Q=s;if(e.printer_shift){var q=e.printer_shift==="same"?1:0;Q=r==="down"?-ua.getSymbolWidth(n)*h+q:ua.getSymbolWidth(n)*h-q}var T={scalex:h,scaley:h,thickness:ua.symbolHeightInPitches(n)*h,name:e.name};if(L=new Wh(n,Q,ua.getSymbolWidth(n)*h,S,T),L.stemDir=r,l){var se=S+(r==="down"?-7:7)*h;b&&(r==="down"&&se>6&&(se=6),r==="up"&&se<6&&(se=6));var _e=r==="down"?s:s+L.w-.6;t.addRight(new Wh(l,_e,ua.getSymbolWidth(l)*h,se,{scalex:h,scaley:h}))}for(z=L.w+u-2+5*d;d>0;d--){var Me=1-Math.abs(S)%2;t.addRight(new Wh("dots.dot",L.w+u-2+5*d,ua.getSymbolWidth("dots.dot"),S+Me))}}if(L&&(L.highestVert=e.highestVert),w&&e.accidental){var me;switch(e.accidental){case"quartersharp":me="accidentals.halfsharp";break;case"dblsharp":me="accidentals.dblsharp";break;case"sharp":me="accidentals.sharp";break;case"quarterflat":me="accidentals.halfflat";break;case"flat":me="accidentals.flat";break;case"dblflat":me="accidentals.dblflat";break;case"natural":me="accidentals.nat"}for(var K=!1,ue=a,be=0;be<_.length;be++)if(S-_[be][0]>=6){_[be][0]=S,ue=_[be][1],K=!0;break}K===!1&&(ue-=ua.getSymbolWidth(me)*h+2,_.push([S,ue]),R=ua.getSymbolWidth(me)*h+2);var Z=ua.symbolHeightInPitches(me);t.addExtra(new Wh(me,ue,ua.getSymbolWidth(me),S,{scalex:h,scaley:h,top:S+Z/2,bottom:S-Z/2})),ne=ua.getSymbolWidth(me)/2}return{notehead:L,accidentalshiftx:R,dotshiftx:z,extraLeft:ne}};TA.exports=_q});var IA=et((dCe,DA)=>{var yq=fd(),br=Sl(),za=ha(),vq=function(t,n){t.el_type="timeSignature";var e=new yq(t,0,10,"staff-extra time-signature",n);if(t.type==="specified")for(var i=0,r=0;r<t.value.length;r++)if(r!==0&&(e.addRight(new za("+",i+1,br.getSymbolWidth("+"),6,{thickness:br.symbolHeightInPitches("+")})),i+=br.getSymbolWidth("+")+2),t.value[r].den){for(var s=0,a=0;a<t.value[r].num.length;a++)s+=br.getSymbolWidth(t.value[r].num.charAt(a));var l=0;for(a=0;a<t.value[r].num.length;a++)l+=br.getSymbolWidth(t.value[r].den.charAt(a));var d=Math.max(s,l);e.addRight(new za(t.value[r].num,i+(d-s)/2,s,8,{thickness:br.symbolHeightInPitches(t.value[r].num.charAt(0))})),e.addRight(new za(t.value[r].den,i+(d-l)/2,l,4,{thickness:br.symbolHeightInPitches(t.value[r].den.charAt(0))})),i+=d}else{for(var u=0,h=0;h<t.value[r].num.length;h++)u+=br.getSymbolWidth(t.value[r].num.charAt(h));e.addRight(new za(t.value[r].num,i,u,6,{thickness:br.symbolHeightInPitches(t.value[r].num.charAt(0))})),i+=u}else t.type==="common_time"?e.addRight(new za("timesig.common",0,br.getSymbolWidth("timesig.common"),6,{thickness:br.symbolHeightInPitches("timesig.common")})):t.type==="cut_time"?e.addRight(new za("timesig.cut",0,br.getSymbolWidth("timesig.cut"),6,{thickness:br.symbolHeightInPitches("timesig.cut")})):t.type==="tempus_imperfectum"?e.addRight(new za("timesig.imperfectum",0,br.getSymbolWidth("timesig.imperfectum"),6,{thickness:br.symbolHeightInPitches("timesig.imperfectum")})):t.type==="tempus_imperfectum_prolatio"?e.addRight(new za("timesig.imperfectum2",0,br.getSymbolWidth("timesig.imperfectum2"),6,{thickness:br.symbolHeightInPitches("timesig.imperfectum2")})):t.type==="tempus_perfectum"?e.addRight(new za("timesig.perfectum",0,br.getSymbolWidth("timesig.perfectum"),6,{thickness:br.symbolHeightInPitches("timesig.perfectum")})):t.type==="tempus_perfectum_prolatio"?e.addRight(new za("timesig.perfectum2",0,br.getSymbolWidth("timesig.perfectum2"),6,{thickness:br.symbolHeightInPitches("timesig.perfectum2")})):console.log("time signature:",t);return e};DA.exports=vq});var FA=et((hCe,OA)=>{var bq=function(n,e,i){this.type="DynamicDecoration",this.anchor=n,this.dec=e,i==="below"?this.volumeHeightBelow=6:this.volumeHeightAbove=6,this.pitch=void 0};OA.exports=bq});var LA=et((uCe,BA)=>{var xq=function(n,e,i,r){this.type="CrescendoElem",this.anchor1=n,this.anchor2=e,this.dir=i,r==="above"?this.dynamicHeightAbove=6:this.dynamicHeightBelow=6,this.pitch=void 0};BA.exports=xq});var VA=et((pCe,NA)=>{var Cq=function(n,e){this.type="GlissandoElem",this.anchor1=n,this.anchor2=e};NA.exports=Cq});var cC=et((fCe,RA)=>{var Os=function(n){this.type="TieElem",this.anchor1=n.anchor1,this.anchor2=n.anchor2,n.isGrace&&(this.isGrace=!0),n.fixedY&&(this.fixedY=!0),n.stemDir&&(this.stemDir=n.stemDir),n.voiceNumber!==void 0&&(this.voiceNumber=n.voiceNumber),n.style!==void 0&&(this.dotted=!0),this.internalNotes=[]};Os.prototype.addInternalNote=function(t){this.internalNotes.push(t)};Os.prototype.setEndAnchor=function(t){this.anchor2=t,this.anchor1?(this.top=Math.max(this.anchor1.pitch,this.anchor2.pitch)+4,this.bottom=Math.min(this.anchor1.pitch,this.anchor2.pitch)-4):(this.top=this.anchor2.pitch+4,this.bottom=this.anchor2.pitch-4)};Os.prototype.setStartX=function(t){this.startLimitX=t};Os.prototype.setEndX=function(t){this.endLimitX=t};Os.prototype.setHint=function(){this.hint=!0};Os.prototype.calcTieDirection=function(){if(this.isGrace)this.above=!1;else if(this.voiceNumber===0)this.above=!0;else if(this.voiceNumber>0)this.above=!1;else{var t;this.anchor1?t=this.anchor1.pitch:this.anchor2?t=this.anchor2.pitch:t=14,this.anchor1&&this.anchor1.stemDir==="down"&&this.anchor2&&this.anchor2.stemDir==="down"?this.above=!0:this.anchor1&&this.anchor1.stemDir==="up"&&this.anchor2&&this.anchor2.stemDir==="up"?this.above=!1:this.anchor1&&this.anchor2?this.above=t>=6:this.anchor1?this.above=this.anchor1.stemDir==="down":this.anchor2?this.above=this.anchor2.stemDir==="down":this.above=t>=6}};Os.prototype.calcSlurDirection=function(){if(this.isGrace)this.above=!1;else if(this.voiceNumber===0)this.above=!0;else if(this.voiceNumber>0)this.above=!1;else{var t=!1;this.anchor1&&this.anchor1.stemDir==="down"&&(t=!0),this.anchor2&&this.anchor2.stemDir==="down"&&(t=!0);for(var n=0;n<this.internalNotes.length;n++){var e=this.internalNotes[n];e.stemDir==="down"&&(t=!0)}this.above=t}};Os.prototype.calcX=function(t,n){this.anchor1?(this.startX=this.anchor1.x,this.anchor1.scalex<1&&(this.startX-=3)):this.startLimitX?this.startX=this.startLimitX.x+this.startLimitX.w:this.startX=t,!this.anchor1&&this.dotted&&(this.startX-=3),this.anchor2?this.endX=this.anchor2.x:this.endLimitX?this.endX=this.endLimitX.x:this.endX=n};Os.prototype.calcTieY=function(){this.anchor1?this.startY=this.anchor1.pitch:this.anchor2?this.startY=this.anchor2.pitch:this.startY=this.above?14:0,this.anchor2?this.endY=this.anchor2.pitch:this.anchor1?this.endY=this.anchor1.pitch:this.endY=this.above?14:0};Os.prototype.calcSlurY=function(){if(this.anchor1&&this.anchor2){this.above&&this.anchor1.stemDir==="up"&&!this.fixedY?(this.startY=(this.anchor1.highestVert+this.anchor1.pitch)/2,this.startX+=this.anchor1.w/2):this.startY=this.anchor1.pitch;var t=this.anchor2.parent.beam&&this.anchor2.parent.beam.stemsUp&&this.anchor2.parent.beam.elems[0]!==this.anchor2.parent,n=(this.anchor2.highestVert+this.anchor2.pitch)/2;this.above&&this.anchor2.stemDir==="up"&&!this.fixedY&&!t&&n<this.startY?(this.endY=n,this.endX+=Math.round(this.anchor2.w/2)):this.endY=this.above&&t?this.anchor2.highestVert:this.anchor2.pitch}else this.anchor1?this.startY=this.endY=this.anchor1.pitch:this.anchor2?this.startY=this.endY=this.anchor2.pitch:(this.startY=this.above?14:0,this.endY=this.above?14:0)};Os.prototype.avoidCollisionAbove=function(){if(this.above){for(var t=-50,n=0;n<this.internalNotes.length;n++)this.internalNotes[n].highestVert>t&&(t=this.internalNotes[n].highestVert);t>this.startY&&t>this.endY&&(this.startY=this.endY=t-1)}};RA.exports=Os});var WA=et((mCe,GA)=>{var wq=FA(),jA=LA(),Mq=VA(),pa=Sl(),_d=ha(),Sq=cC(),dC=function(){this.startDiminuendoX=void 0,this.startCrescendoX=void 0,this.minTop=12,this.minBottom=0},Pq=function(t,n,e,i,r,s,a,l){for(var d,u=0;u<n.length;u++){if(n[u]==="staccato"||n[u]==="tenuto"||n[u]==="accent"){var h="scripts."+n[u];if(n[u]==="accent"&&(h="scripts.sforzato"),d===void 0?d=a==="down"?e+2:l-2:d=a==="down"?d+2:d-2,n[u]==="accent")a==="up"?d--:d++;else switch(d){case 2:case 4:case 6:case 8:case 10:a==="up"?d--:d++;break}e>9&&d++;var _=i/2;pa.getSymbolAlign(h)!=="center"&&(_-=pa.getSymbolWidth(h)/2),r.addFixedX(new _d(h,_,pa.getSymbolWidth(h),d))}if(n[u]==="slide"&&r.heads[0]){var b=r.heads[0].pitch;b-=2;var w=new _d("",-s-15,0,b-1),S=new _d("",-s-5,0,b+1);r.addFixedX(w),r.addFixedX(S),t.addOther(new Sq({anchor1:w,anchor2:S,fixedY:!0}))}}return d===void 0&&(d=e),{above:d,below:r.bottom}},kq=function(t,n,e,i){for(var r=0;r<n.length;r++)switch(n[r]){case"p":case"mp":case"pp":case"ppp":case"pppp":case"f":case"ff":case"fff":case"ffff":case"sfz":case"mf":var s=new wq(e,n[r],i);t.addOther(s)}},Eq=function(t,n,e,i,r){function s(){if(i.heads.length===0)return 10;for(var u=i.heads[0].pitch,h=1;h<i.heads.length;h++)u=Math.max(u,i.heads[h].pitch);return u}function a(){if(i.heads.length===0)return 2;for(var u=i.heads[0].pitch,h=1;h<i.heads.length;h++)u=Math.min(u,i.heads[h].pitch);return u}function l(u,h){var _=r==="down"?a()+1:s()+9;r!=="down"&&h===1&&_--;var b=e/2;b+=r==="down"?-5:3;for(var w=0;w<h;w++)_-=1,i.addFixedX(new _d(u,b,pa.getSymbolWidth(u),_))}for(var d=0;d<t.length;d++)switch(t[d]){case"/":l("flags.ugrace",1);break;case"//":l("flags.ugrace",2);break;case"///":l("flags.ugrace",3);break;case"////":l("flags.ugrace",4);break}},Tq=function(t,n,e,i,r,s,a){function l(S,L){S==="above"?i.above+=L:i.below-=L}function d(S){var L;return S==="above"?(L=i.above,L<s&&(L=s)):(L=i.below,L>a&&(L=a)),L}function u(S,L){var R=d(L),z=2,ne=5;e.addFixedX(new _d(S,n/2,0,R+z,{type:"decoration",klass:"ornament",thickness:3})),l(L,ne)}function h(S,L){var R=n/2;pa.getSymbolAlign(S)!=="center"&&(R-=pa.getSymbolWidth(S)/2);var z=pa.symbolHeightInPitches(S)+1,ne=d(L);ne=L==="above"?ne+z/2:ne-z/2,e.addFixedX(new _d(S,R,pa.getSymbolWidth(S),ne,{klass:"ornament",thickness:pa.symbolHeightInPitches(S)})),l(L,z)}for(var _={"+":"scripts.stopped",open:"scripts.open",snap:"scripts.snap",wedge:"scripts.wedge",thumb:"scripts.thumb",shortphrase:"scripts.shortphrase",mediumphrase:"scripts.mediumphrase",longphrase:"scripts.longphrase",trill:"scripts.trill",roll:"scripts.roll",irishroll:"scripts.roll",marcato:"scripts.umarcato",dmarcato:"scripts.dmarcato",umarcato:"scripts.umarcato",turn:"scripts.turn",uppermordent:"scripts.prall",pralltriller:"scripts.prall",mordent:"scripts.mordent",lowermordent:"scripts.mordent",downbow:"scripts.downbow",upbow:"scripts.upbow",fermata:"scripts.ufermata",invertedfermata:"scripts.dfermata",breath:",",coda:"scripts.coda",segno:"scripts.segno"},b=!1,w=0;w<t.length;w++)switch(t[w]){case"0":case"1":case"2":case"3":case"4":case"5":case"D.C.":case"D.S.":u(t[w],r),b=!0;break;case"fine":u("FINE",r),b=!0;break;case"+":case"open":case"snap":case"wedge":case"thumb":case"shortphrase":case"mediumphrase":case"longphrase":case"trill":case"roll":case"irishroll":case"marcato":case"dmarcato":case"turn":case"uppermordent":case"pralltriller":case"mordent":case"lowermordent":case"downbow":case"upbow":case"fermata":case"breath":case"umarcato":case"coda":case"segno":h(_[t[w]],r),b=!0;break;case"invertedfermata":h(_[t[w]],"below"),b=!0;break;case"mark":e.klass="mark";break}return b};function Aq(t,n,e){for(var i=0;i<t.length;i++)switch(t[i]){case"arpeggio":for(var r=n.abcelem.minpitch-1;r<=n.abcelem.maxpitch;r+=2)n.addExtra(new _d("scripts.arpeggio",-pa.getSymbolWidth("scripts.arpeggio")*2-e,0,r+2,{klass:"ornament",thickness:pa.symbolHeightInPitches("scripts.arpeggio")}));break}}dC.prototype.dynamicDecoration=function(t,n,e,i){for(var r,s,a,l=0;l<n.length;l++)switch(n[l]){case"diminuendo(":this.startDiminuendoX=e,r=void 0;break;case"diminuendo)":r={start:this.startDiminuendoX,stop:e},this.startDiminuendoX=void 0;break;case"crescendo(":this.startCrescendoX=e,s=void 0;break;case"crescendo)":s={start:this.startCrescendoX,stop:e},this.startCrescendoX=void 0;break;case"glissando(":this.startGlissandoX=e,a=void 0;break;case"glissando)":a={start:this.startGlissandoX,stop:e},this.startGlissandoX=void 0;break}r&&t.addOther(new jA(r.start,r.stop,">",i)),s&&t.addOther(new jA(s.start,s.stop,"<",i)),a&&t.addOther(new Mq(a.start,a.stop))};dC.prototype.createDecoration=function(t,n,e,i,r,s,a,l,d,u){d||(d={ornamentPosition:"above",volumePosition:u?"above":"below",dynamicPosition:u?"above":"below"}),kq(t,n,r,d.volumePosition),this.dynamicDecoration(t,n,r,d.dynamicPosition),Eq(n,e,i,r,a);var h=Pq(t,n,e,i,r,s,a,l);h.above=Math.max(h.above,this.minTop);var _=Tq(n,i,r,h,d.ornamentPosition,this.minTop,this.minBottom);Aq(n,r,s)};GA.exports=dC});var UA=et((gCe,zA)=>{var Dq=function(n,e,i){this.type="EndingElem",this.text=n,this.anchor1=e,this.anchor2=i,this.endingHeightAbove=5,this.pitch=void 0};zA.exports=Dq});var HA=et((_Ce,qA)=>{var Iq=function(t){for(var n=0,e=0;e<t.voices.length;e++){var i=t.voices[e].staff;t.voices[e].duplicate||(n+=i.top,n+=-i.bottom)}return n};qA.exports=Iq});var XA=et((yCe,YA)=>{var Oq=HA(),zh=function(t){this.getTextSize=t,this.voices=[],this.staffs=[],this.brace=void 0,this.bracket=void 0};zh.prototype.setLimit=function(t,n){n.specialY[t]&&(n.staff.specialY[t]?n.staff.specialY[t]=Math.max(n.staff.specialY[t],n.specialY[t]):n.staff.specialY[t]=n.specialY[t])};zh.prototype.addVoice=function(t,n,e){var i=this.voices.length;this.voices[i]=t,this.staffs[n]?this.staffs[n].voices.push(i):this.staffs[this.staffs.length]={top:10,bottom:2,lines:e,voices:[i],specialY:{tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}},t.staff=this.staffs[n]};zh.prototype.setHeight=function(){this.height=Oq(this)};zh.prototype.setWidth=function(t){this.w=t;for(var n=0;n<this.voices.length;n++)this.voices[n].setWidth(t)};zh.prototype.setStaffLimits=function(t){t.staff.top=Math.max(t.staff.top,t.top),t.staff.bottom=Math.min(t.staff.bottom,t.bottom),this.setLimit("tempoHeightAbove",t),this.setLimit("partHeightAbove",t),this.setLimit("volumeHeightAbove",t),this.setLimit("dynamicHeightAbove",t),this.setLimit("endingHeightAbove",t),this.setLimit("chordHeightAbove",t),this.setLimit("lyricHeightAbove",t),this.setLimit("lyricHeightBelow",t),this.setLimit("chordHeightBelow",t),this.setLimit("volumeHeightBelow",t),this.setLimit("dynamicHeightBelow",t)};YA.exports=zh});var QA=et((vCe,JA)=>{var Fq=fd(),Bq=ha(),hC=function(n,e,i){this.type="TempoElement",this.tempo=n,this.tempo.type="tempo",this.tuneNumber=e,this.totalHeightInPitches=6,this.tempoHeightAbove=this.totalHeightInPitches,this.pitch=void 0,this.tempo.duration&&!this.tempo.suppressBpm&&(this.note=this.createNote(i,n,e))};hC.prototype.setX=function(t){this.x=t};hC.prototype.createNote=function(t,n,e){var i=.75,r=n.duration[0],s=new Fq(n,r,1,"tempo",e),a,l,d;r<=1/32?(d="noteheads.quarter",l="flags.u32nd",a=0):r<=1/16?(d="noteheads.quarter",l="flags.u16th",a=0):r<=3/32?(d="noteheads.quarter",l="flags.u16nd",a=1):r<=1/8?(d="noteheads.quarter",l="flags.u8th",a=0):r<=3/16?(d="noteheads.quarter",l="flags.u8th",a=1):r<=1/4?(d="noteheads.quarter",a=0):r<=3/8?(d="noteheads.quarter",a=1):r<=1/2?(d="noteheads.half",a=0):r<=3/4?(d="noteheads.half",a=1):r<=1?(d="noteheads.whole",a=0):r<=1.5?(d="noteheads.whole",a=1):r<=2?(d="noteheads.dbl",a=0):(d="noteheads.dbl",a=1);var u=t(s,d,{verticalPos:0},{dir:"up",flag:l,dot:a,scale:i}),h=u.notehead;s.addHead(h);var _;if(d!=="noteheads.whole"&&d!=="noteheads.dbl"){var b=.3333333333333333*i,w=5*i,S=h.dx+h.w,L=-.6;_=new Bq(null,S,0,b,{type:"stem",pitch2:w,linewidth:L}),s.addRight(_)}return s};JA.exports=hC});var KA=et((bCe,$A)=>{var p_=function(n,e,i){this.type="TripletElem",this.anchor1=e,this.number=n,this.durationClass=("d"+Math.round(e.parent.durationClass*1e3)/1e3).replace(/\./,"-"),this.middleElems=[],this.flatBeams=i.flatBeams};p_.prototype.isClosed=function(){return!!this.anchor2};p_.prototype.middleNote=function(t){this.middleElems.push(t)};p_.prototype.setCloseAnchor=function(t){this.anchor2=t,(!this.anchor1.parent.beam||this.anchor1.stemDir==="up")&&(this.endingHeightAbove=4)};$A.exports=p_});var e4=et((xCe,ZA)=>{function Lq(t){for(var n=t.split(`
`),e=0;e<n.length;e++){var i=n[e],r=i.match(/^([ABCDEFG][♯♭]?)?([^\/]+)?(\/[ABCDEFG][#b♯♭]?)?/);r&&(n[e]=(r[1]?r[1]:"")+""+(r[2]?r[2]:"")+""+(r[3]?r[3]:""))}return n.join(`
`)}ZA.exports=Lq});var n4=et((CCe,t4)=>{var Uh=ha(),uC=No(),Nq=e4(),Vq=function(t,n,e,i,r,s,a){for(var l=0;l<e.chord.length;l++)for(var d=e.chord[l].position,u=e.chord[l].rel_position,h=e.chord[l].name.split(`
`),_=h.length-1;_>=0;_--){var b=h[_],w=0,S,L,R;d==="left"||d==="right"||d==="below"||d==="above"||u?(L="annotationfont",R="annotation"):(L="gchordfont",R="chord",a&&(b=Nq(b)));var z=t.attr(L,R),ne=t.calc(b,L,R),Q=ne.width,q=ne.height/uC.STEP;switch(d){case"left":i+=Q+7,w=-i,S=e.averagepitch,n.addExtra(new Uh(b,w,Q+4,S,{type:"text",height:q,dim:z,position:"left"}));break;case"right":r+=4,w=r,S=e.averagepitch,n.addRight(new Uh(b,w,Q+4,S,{type:"text",height:q,dim:z,position:"right"}));break;case"below":n.addRight(new Uh(b,0,0,void 0,{type:"text",position:"below",height:q,dim:z,realWidth:Q}));break;case"above":n.addRight(new Uh(b,0,0,void 0,{type:"text",position:"above",height:q,dim:z,realWidth:Q}));break;default:if(u){var T=u.y+3*uC.STEP;n.addRight(new Uh(b,w+u.x,0,e.minpitch+T/uC.STEP,{position:"relative",type:"text",height:q,dim:z}))}else{var se="above";e.positioning&&e.positioning.chordPosition&&(se=e.positioning.chordPosition),se!=="hidden"&&n.addCentered(new Uh(b,s/2,Q,void 0,{type:"chord",position:se,height:q,dim:z,realWidth:Q}))}}}return{roomTaken:i,roomTakenRight:r}};t4.exports=Vq});var f4=et((wCe,p4)=>{var qh=fd(),o4=bA(),i4=CA(),s4=PA(),a4=EA(),bp=AA(),l4=IA(),Rq=WA(),c4=UA(),vp=Sl(),xr=ha(),xp=No(),jq=XA(),d4=QA(),Hh=cC(),Gq=KA(),Wq=zx(),h4=n4(),zq=Nx(),Pl=oo(),pC=function(t){var n=0;return t.duration&&(n=t.duration),n},ma=!1,fa={rest:{0:"rests.whole",1:"rests.half",2:"rests.quarter",3:"rests.8th",4:"rests.16th",5:"rests.32nd",6:"rests.64th",7:"rests.128th",multi:"rests.multimeasure"},note:{"-1":"noteheads.dbl",0:"noteheads.whole",1:"noteheads.half",2:"noteheads.quarter",3:"noteheads.quarter",4:"noteheads.quarter",5:"noteheads.quarter",6:"noteheads.quarter",7:"noteheads.quarter",nostem:"noteheads.quarter"},rhythm:{"-1":"noteheads.slash.whole",0:"noteheads.slash.whole",1:"noteheads.slash.whole",2:"noteheads.slash.quarter",3:"noteheads.slash.quarter",4:"noteheads.slash.quarter",5:"noteheads.slash.quarter",6:"noteheads.slash.quarter",7:"noteheads.slash.quarter",nostem:"noteheads.slash.nostem"},x:{"-1":"noteheads.indeterminate",0:"noteheads.indeterminate",1:"noteheads.indeterminate",2:"noteheads.indeterminate",3:"noteheads.indeterminate",4:"noteheads.indeterminate",5:"noteheads.indeterminate",6:"noteheads.indeterminate",7:"noteheads.indeterminate",nostem:"noteheads.indeterminate"},harmonic:{"-1":"noteheads.harmonic.quarter",0:"noteheads.harmonic.quarter",1:"noteheads.harmonic.quarter",2:"noteheads.harmonic.quarter",3:"noteheads.harmonic.quarter",4:"noteheads.harmonic.quarter",5:"noteheads.harmonic.quarter",6:"noteheads.harmonic.quarter",7:"noteheads.harmonic.quarter",nostem:"noteheads.harmonic.quarter"},triangle:{"-1":"noteheads.triangle.quarter",0:"noteheads.triangle.quarter",1:"noteheads.triangle.quarter",2:"noteheads.triangle.quarter",3:"noteheads.triangle.quarter",4:"noteheads.triangle.quarter",5:"noteheads.triangle.quarter",6:"noteheads.triangle.quarter",7:"noteheads.triangle.quarter",nostem:"noteheads.triangle.quarter"},uflags:{3:"flags.u8th",4:"flags.u16th",5:"flags.u32nd",6:"flags.u64th"},dflags:{3:"flags.d8th",4:"flags.d16th",5:"flags.d32nd",6:"flags.d64th"}},Cr=function(t,n,e){this.decoration=new Rq,this.getTextSize=t,this.tuneNumber=n,this.isBagpipes=e.bagpipes,this.flatBeams=e.flatbeams,this.graceSlurs=e.graceSlurs,this.percmap=e.percmap,this.initialClef=e.initialClef,this.jazzchords=!!e.jazzchords,this.reset()};Cr.prototype.reset=function(){this.slurs={},this.ties=[],this.voiceScale=1,this.slursbyvoice={},this.tiesbyvoice={},this.endingsbyvoice={},this.scaleByVoice={},this.tripletmultiplier=1,this.abcline=void 0,this.accidentalSlot=void 0,this.accidentalshiftx=void 0,this.dotshiftx=void 0,this.hasVocals=!1,this.minY=void 0,this.partstartelem=void 0,this.startlimitelem=void 0,this.stemdir=void 0};Cr.prototype.setStemHeight=function(t){this.stemHeight=Math.round(t*10/xp.STEP)/10};Cr.prototype.getCurrentVoiceId=function(t,n){return"s"+t+"v"+n};Cr.prototype.pushCrossLineElems=function(t,n){this.slursbyvoice[this.getCurrentVoiceId(t,n)]=this.slurs,this.tiesbyvoice[this.getCurrentVoiceId(t,n)]=this.ties,this.endingsbyvoice[this.getCurrentVoiceId(t,n)]=this.partstartelem,this.scaleByVoice[this.getCurrentVoiceId(t,n)]=this.voiceScale};Cr.prototype.popCrossLineElems=function(t,n){this.slurs=this.slursbyvoice[this.getCurrentVoiceId(t,n)]||{},this.ties=this.tiesbyvoice[this.getCurrentVoiceId(t,n)]||[],this.partstartelem=this.endingsbyvoice[this.getCurrentVoiceId(t,n)],this.voiceScale=this.scaleByVoice[this.getCurrentVoiceId(t,n)],this.voiceScale===void 0&&(this.voiceScale=1)};Cr.prototype.containsLyrics=function(t){for(var n=0;n<t.length;n++)for(var e=0;e<t[n].voices.length;e++)for(var i=0;i<t[n].voices[e].length;i++){var r=t[n].voices[e][i];if(r.lyric){(!r.positioning||r.positioning.vocalPosition==="below")&&(this.hasVocals=!0);return}}};Cr.prototype.createABCLine=function(t,n,e){this.minY=2,this.containsLyrics(t);var i=new jq(this.getTextSize);this.tempoSet=!1;for(var r=0;r<t.length;r++)ma&&this.restoreState(),ma=!1,this.createABCStaff(i,t[r],n,r,e);return i};Cr.prototype.createABCStaff=function(t,n,e,i,r){t.getTextSize.updateFonts(n);for(var s=0;s<n.voices.length;s++){var a=new Wq(s,n.voices.length);s===0?(a.barfrom=n.connectBarLines==="start"||n.connectBarLines==="continue",a.barto=n.connectBarLines==="continue"||n.connectBarLines==="end"):a.duplicate=!0,n.title&&n.title[s]&&(a.header=n.title[s].replace(/\\n/g,`
`),a.headerPosition=6+t.getTextSize.baselineToCenter(a.header,"voicefont","staff-extra voice-name",s,n.voices.length)/xp.STEP),n.clef&&n.clef.type==="perc"&&(a.isPercussion=!0);var l=(!this.initialClef||r===0)&&s4(n.clef,this.tuneNumber);l&&(s===0&&n.barNumber&&this.addMeasureNumber(n.barNumber,l),a.addChild(l),this.startlimitelem=l);var d=a4(n.key,this.tuneNumber);if(d&&(a.addChild(d),this.startlimitelem=d),n.meter){n.meter.type==="specified"?this.measureLength=n.meter.value[0].num/n.meter.value[0].den:this.measureLength=1;var u=l4(n.meter,this.tuneNumber);a.addChild(u),this.startlimitelem=u}a.duplicate&&(a.children=[]);var h=n.clef.stafflines||n.clef.stafflines===0?n.clef.stafflines:5;t.addVoice(a,i,h);var _=h===1;this.createABCVoice(n.voices[s],e,i,s,_,a),t.setStaffLimits(a),s===0&&(n.brace==="start"||!t.brace&&n.brace?(t.brace||(t.brace=[]),t.brace.push(new i4(a,"brace"))):n.brace==="end"&&t.brace?t.brace[t.brace.length-1].setBottomStaff(a):n.brace==="continue"&&t.brace&&t.brace[t.brace.length-1].continuing(a),n.bracket==="start"||!t.bracket&&n.bracket?(t.bracket||(t.bracket=[]),t.bracket.push(new i4(a,"bracket"))):n.bracket==="end"&&t.bracket?t.bracket[t.bracket.length-1].setBottomStaff(a):n.bracket==="continue"&&t.bracket&&t.bracket[t.bracket.length-1].continuing(a))}};function Uq(t,n){var e=t[n];if(e.el_type!=="note"||!e.startBeam||e.endBeam)return{count:1,elem:e};for(var i=[];n<t.length&&t[n].el_type==="note"&&(i.push(t[n]),!t[n].endBeam);)n++;return{count:i.length,elem:i}}Cr.prototype.createABCVoice=function(t,n,e,i,r,s){this.popCrossLineElems(e,i),this.stemdir=this.isBagpipes?"down":null,this.abcline=t,this.partstartelem&&(this.partstartelem=new c4("",null,null),s.addOther(this.partstartelem));var a=s.voicetotal<2?-1:s.voicenumber;for(var l in this.slurs)this.slurs.hasOwnProperty(l)&&(this.slurs[l]=new Hh({force:this.slurs[l].force,voiceNumber:a,stemDir:this.slurs[l].stemDir,style:this.slurs[l].dotted}),ma&&this.slurs[l].setHint(),s.addOther(this.slurs[l]));for(var d=0;d<this.ties.length;d++)this.ties[d]=new Hh({force:this.ties[d].force,stemDir:this.ties[d].stemDir,voiceNumber:a,style:this.ties[d].dotted}),ma&&this.ties[d].setHint(),s.addOther(this.ties[d]);for(var u=0;u<this.abcline.length;u++)qq(this.abcline[u]),this.minY=Math.min(this.abcline[u].minpitch,this.minY);for(var h=e===0,_=0;_<this.abcline.length;){var b=Uq(this.abcline,_),w=this.createABCElement(h,r,s,b.elem);if(w)for(d=0;d<w.length;d++){if(!this.tempoSet&&n&&!n.suppress){this.tempoSet=!0;var S=new qh(n,0,0,"tempo",this.tuneNumber,{});S.addFixedX(new d4(n,this.tuneNumber,bp)),s.addChild(S)}s.addChild(w[d])}_+=b.count}this.pushCrossLineElems(e,i)};Cr.prototype.saveState=function(){this.tiesSave=Pl.cloneArray(this.ties),this.slursSave=Pl.cloneHashOfHash(this.slurs),this.slursbyvoiceSave=Pl.cloneHashOfHash(this.slursbyvoice),this.tiesbyvoiceSave=Pl.cloneHashOfArrayOfHash(this.tiesbyvoice)};Cr.prototype.restoreState=function(){this.ties=Pl.cloneArray(this.tiesSave),this.slurs=Pl.cloneHashOfHash(this.slursSave),this.slursbyvoice=Pl.cloneHashOfHash(this.slursbyvoiceSave),this.tiesbyvoice=Pl.cloneHashOfArrayOfHash(this.tiesbyvoiceSave)};Cr.prototype.createABCElement=function(t,n,e,i){var r=[];switch(i.el_type){case void 0:r=this.createBeam(n,e,i);break;case"note":r[0]=this.createNote(i,!1,n,e),this.triplet&&this.triplet.isClosed()&&(e.addOther(this.triplet),this.triplet=null,this.tripletmultiplier=1);break;case"bar":r[0]=this.createBarLine(e,i,t),e.duplicate&&r.length>0&&(r[0].invisible=!0);break;case"meter":r[0]=l4(i,this.tuneNumber),this.startlimitelem=r[0],e.duplicate&&r.length>0&&(r[0].invisible=!0);break;case"clef":if(r[0]=s4(i,this.tuneNumber),!r[0])return null;e.duplicate&&r.length>0&&(r[0].invisible=!0);break;case"key":var s=a4(i,this.tuneNumber);s&&(r[0]=s,this.startlimitelem=r[0]),e.duplicate&&r.length>0&&(r[0].invisible=!0);break;case"stem":this.stemdir=i.direction==="auto"?void 0:i.direction;break;case"part":var a=new qh(i,0,0,"part",this.tuneNumber),l=this.getTextSize.calc(i.title,"partsfont","part");a.addFixedX(new xr(i.title,0,0,void 0,{type:"part",height:l.height/xp.STEP})),r[0]=a;break;case"tempo":var d=new qh(i,0,0,"tempo",this.tuneNumber);d.addFixedX(new d4(i,this.tuneNumber,bp)),r[0]=d;break;case"style":i.head==="normal"?delete this.style:this.style=i.head;break;case"hint":ma=!0,this.saveState();break;case"midi":break;case"scale":this.voiceScale=i.size;break;default:var u=new qh(i,0,0,"unsupported",this.tuneNumber);u.addFixed(new xr("element type "+i.el_type,0,0,void 0,{type:"debug"})),r[0]=u}return r};function qq(t){if(t.pitches){Hq(t);for(var n=0,e=0;e<t.pitches.length;e++)n+=t.pitches[e].verticalPos;t.averagepitch=n/t.pitches.length,t.minpitch=t.pitches[0].verticalPos,t.maxpitch=t.pitches[t.pitches.length-1].verticalPos}}Cr.prototype.createBeam=function(t,n,e){var i=[],r=new o4(this.stemHeight*this.voiceScale,this.stemdir,this.flatBeams,e[0]);ma&&r.setHint();for(var s=0;s<e.length;s++)r.runningDirection(e[s]);r.setStemDirection();var a=this.stemdir;for(this.stemdir=r.stemsUp?"up":"down",s=0;s<e.length;s++){var l=e[s],d=this.createNote(l,!0,t,n);i.push(d),r.add(d),this.triplet&&this.triplet.isClosed()&&(n.addOther(this.triplet),this.triplet=null,this.tripletmultiplier=1)}return r.calcDir(),n.addBeam(r),this.stemdir=a,i};var Hq=function(t){var n;do{n=!0;for(var e=0;e<t.pitches.length-1;e++)if(t.pitches[e].pitch>t.pitches[e+1].pitch){n=!1;var i=t.pitches[e];t.pitches[e]=t.pitches[e+1],t.pitches[e+1]=i}}while(!n)},u4=function(t,n,e,i,r,s,a,l,d){for(var u=e;u>11;u--)u%2===0&&!i&&t.addFixed(new xr(null,l,(r+4)*d,u,{type:"ledger"}));for(u=n;u<1;u++)u%2===0&&!i&&t.addFixed(new xr(null,l,(r+4)*d,u,{type:"ledger"}));for(u=0;u<s.length;u++){var h=r;a==="down"&&(h=-h),t.addFixed(new xr(null,h+l,(r+4)*d,s[u],{type:"ledger"}))}};Cr.prototype.addGraceNotes=function(t,n,e,i,r,s,a){var l=.6,d=3.5/5;r=Math.round(r*d);var u=null,h;t.gracenotes.length>1&&(u=new o4(r,"grace",s),ma&&u.setHint(),u.mainNote=e);var _,b=[];for(_=t.gracenotes.length-1;_>=0;_--)a+=10,b[_]=a,t.gracenotes[_].accidental&&(a+=7);for(_=0;_<t.gracenotes.length;_++){var w=t.gracenotes[_].verticalPos;h=u?null:fa.uflags[s?5:3];var S=[],L=bp(e,"noteheads.quarter",t.gracenotes[_],{dir:"up",headx:-b[_],extrax:-b[_],flag:h,scale:l*this.voiceScale,accidentalSlot:S});L.notehead.highestVert=L.notehead.pitch+r;var R=L.notehead;if(this.addSlursAndTies(e,t.gracenotes[_],R,n,"up",!0),e.addExtra(R),t.gracenotes[_].acciaccatura){var z=t.gracenotes[_].verticalPos+7*l,ne=u?5:6;e.addRight(new xr("flags.ugrace",-b[_]+ne,0,z,{scalex:l,scaley:l}))}if(u){var Q=t.gracenotes[_].duration/2;s&&(Q/=2);var q={heads:[R],abcelem:{averagepitch:w,minpitch:w,maxpitch:w,duration:Q}};u.add(q)}else{var T=w+.3333333333333333*l,se=w+7*l,_e=R.dx+R.w,Me=-.6;e.addExtra(new xr(null,_e,0,T,{type:"stem",pitch2:se,linewidth:Me}))}u4(e,w,w,!1,vp.getSymbolWidth("noteheads.quarter"),[],!0,R.dx-1,.6);var me=t.rest&&(t.rest.type==="spacer"||t.rest.type==="invisible");_===0&&!s&&this.graceSlurs&&!me&&n.addOther(new Hh({anchor1:R,anchor2:i,isGrace:!0}))}return u&&(u.calcDir(),n.addBeam(u)),a};function Yq(t,n,e,i,r,s,a,l,d){var u,h=7,_,b,w;switch(r&&(s==="down"&&(h=3),s==="up"&&(h=11)),a&&(e<.5||e<1?h=7:h=5),n.rest.type){case"whole":u=fa.rest[0],n.averagepitch=h,n.minpitch=h,n.maxpitch=h,i=0;break;case"rest":n.style==="rhythm"?u=fa.rhythm[-l]:u=fa.rest[-l],n.averagepitch=h,n.minpitch=h,n.maxpitch=h;break;case"invisible":case"invisible-multimeasure":case"spacer":u="",n.averagepitch=h,n.minpitch=h,n.maxpitch=h;break;case"multimeasure":u=fa.rest.multi,n.averagepitch=h,n.minpitch=h,n.maxpitch=h,i=0;var S=vp.getSymbolWidth(u);t.addHead(new xr(u,S,S*2,7));var L=new xr(""+n.rest.text,S,S,16,{type:"multimeasure-text"});t.addExtra(L)}if(n.rest.type.indexOf("multimeasure")<0&&n.rest.type!=="invisible"){var R=bp(t,u,{verticalPos:h},{dot:i,scale:d});_=R.notehead,_&&(t.addHead(_),b=R.accidentalshiftx,w=R.dotshiftx)}return{noteHead:_,roomTaken:b,roomTakenRight:w}}function r4(t,n){for(var e=0;e<t.length;e++)if(JSON.stringify(t[e])===JSON.stringify(n))return;t.push(n)}Cr.prototype.addNoteToAbcElement=function(t,n,e,i,r,s,a,l,d){var u=0,h,_=0,b=0,w,S,L=[],R=[],z=0,ne=n.averagepitch>=6?"down":"up";i&&(ne=i),r=n.style?n.style:r,(!r||r==="normal")&&(r="note");var Q;s?Q=fa[r].nostem:Q=fa[r][-a],Q||console.log("noteSymbol:",r,a,s);var q;for(q=ne==="down"?n.pitches.length-2:1;ne==="down"?q>=0:q<n.pitches.length;q=ne==="down"?q-1:q+1){var T=n.pitches[ne==="down"?q+1:q-1],se=n.pitches[q],_e=ne==="down"?T.pitch-se.pitch:se.pitch-T.pitch;_e<=1&&!T.printer_shift&&(se.printer_shift=_e?"different":"same",(se.verticalPos>11||se.verticalPos<1)&&L.push(se.verticalPos-se.verticalPos%2),ne==="down"?_=vp.getSymbolWidth(Q)+2:u=vp.getSymbolWidth(Q)+2)}var Me=n.pitches.length;for(q=0;q<n.pitches.length;q++){if(!l){var me;ne==="down"&&q!==0||ne==="up"&&q!==Me-1?me=null:me=fa[ne==="down"?"dflags":"uflags"][-a]}var K;if(n.pitches[q].style)K=fa[n.pitches[q].style][-a];else if(d.isPercussion&&this.percmap){K=Q;var ue=this.percmap[zq(n.pitches[q])];ue&&ue.noteHead&&fa[ue.noteHead]&&(K=fa[ue.noteHead][-a])}else K=Q;n.pitches[q].highestVert=n.pitches[q].verticalPos;var be=(i==="up"||ne==="up")&&q===0,Z=(i==="down"||ne==="down")&&q===Me-1;if(be||Z){if((n.startSlur||Me===1)&&(n.pitches[q].highestVert=n.pitches[Me-1].verticalPos,pC(n)<1&&(i==="up"||ne==="up")&&(n.pitches[q].highestVert+=6)),n.startSlur)for(n.pitches[q].startSlur||(n.pitches[q].startSlur=[]),S=0;S<n.startSlur.length;S++)r4(n.pitches[q].startSlur,n.startSlur[S]);if(n.endSlur)for(n.pitches[q].highestVert=n.pitches[Me-1].verticalPos,pC(n)<1&&(i==="up"||ne==="up")&&(n.pitches[q].highestVert+=6),n.pitches[q].endSlur||(n.pitches[q].endSlur=[]),S=0;S<n.endSlur.length;S++)r4(n.pitches[q].endSlur,n.endSlur[S])}var oe=!l&&a<=-1,Ee=bp(t,K,n.pitches[q],{dir:ne,extrax:-_,flag:me,dot:e,dotshiftx:u,scale:this.voiceScale,accidentalSlot:R,shouldExtendStem:!i,printAccidentals:!d.isPercussion});z=Math.max(vp.getSymbolWidth(K),z),t.extraw-=Ee.extraLeft,h=Ee.notehead,h&&(this.addSlursAndTies(t,n.pitches[q],h,d,oe?ne:null,!1),n.gracenotes&&n.gracenotes.length>0&&(h.bottom=h.bottom-1),t.addHead(h)),_+=Ee.accidentalshiftx,b=Math.max(b,Ee.dotshiftx)}if(oe){var Y=Math.round(70*this.voiceScale)/10,G=ne==="down"?n.minpitch-Y:n.minpitch+1/3;G>6&&!i&&(G=6);var le=ne==="down"?n.maxpitch-1/3:n.maxpitch+Y;le<6&&!i&&(le=6);var X=ne==="down"||t.heads.length===0?0:t.heads[0].w,Ue=ne==="down"?1:-1;h&&h.c==="noteheads.slash.quarter"&&(ne==="down"?le-=1:G+=1),t.addRight(new xr(null,X,0,G,{type:"stem",pitch2:le,linewidth:Ue,bottom:G-1})),w=Math.min(G,le)}return{noteHead:h,roomTaken:_,roomTakenRight:b,min:w,additionalLedgers:L,dir:ne,symbolWidth:z}};Cr.prototype.addLyric=function(t,n){var e="";Pl.each(n.lyric,function(s){var a=s.divider===" "?"":s.divider;e+=s.syllable+a+`
`});var i=this.getTextSize.calc(e,"vocalfont","lyric"),r=n.positioning?n.positioning.vocalPosition:"below";t.addCentered(new xr(e,0,i.width,void 0,{type:"lyric",position:r,height:i.height/xp.STEP,dim:this.getTextSize.attr("vocalfont","lyric")}))};Cr.prototype.createNote=function(t,n,e,i){var r=null,s=0,a=0,l=0,d=[],u,h=pC(t),_=!1;h===0&&(_=!0,h=.25,n=!0);for(var b=Math.floor(Math.log(h)/Math.log(2)),w=0,S=Math.pow(2,b),L=S/2;S<h;w++,S+=L,L/=2);t.startTriplet&&(this.tripletmultiplier=t.tripletMultiplier);var R=h*this.tripletmultiplier;t.rest&&t.rest.type==="multimeasure"&&(R=1),t.rest&&t.rest.type==="invisible-multimeasure"&&(R=this.measureLength*t.rest.text);var z=t.rest?"rest":"note",ne=new qh(t,R,1,z,this.tuneNumber,{durationClassOveride:t.duration*this.tripletmultiplier});if(ma&&ne.setHint(),t.rest){this.measureLength===h&&t.rest.type!=="invisible"&&t.rest.type!=="spacer"&&t.rest.type.indexOf("multimeasure")<0&&(t.rest.type="whole");var Q=Yq(ne,t,h,w,i.voicetotal>1,this.stemdir,e,b,this.voiceScale);r=Q.noteHead,s=Q.roomTaken,a=Q.roomTakenRight}else{var q=this.addNoteToAbcElement(ne,t,w,this.stemdir,this.style,_,b,n,i);q.min!==void 0&&(this.minY=Math.min(q.min,this.minY)),r=q.noteHead,s=q.roomTaken,a=q.roomTakenRight,d=q.additionalLedgers,u=q.dir,l=q.symbolWidth}if(t.lyric!==void 0&&this.addLyric(ne,t),t.gracenotes!==void 0&&(s+=this.addGraceNotes(t,i,ne,r,this.stemHeight*this.voiceScale,this.isBagpipes,s)),t.decoration&&this.decoration.createDecoration(i,t.decoration,ne.top,r?r.w:0,ne,s,u,ne.bottom,t.positioning,this.hasVocals),t.barNumber&&ne.addFixed(new xr(t.barNumber,-10,0,0,{type:"barNumber"})),u4(ne,t.minpitch,t.maxpitch,t.rest,l,d,u,-2,1),t.chord!==void 0){var T=h4(this.getTextSize,ne,t,s,a,l,this.jazzchords);s=T.roomTaken,a=T.roomTakenRight}return t.startTriplet&&(this.triplet=new Gq(t.startTriplet,r,{flatBeams:this.flatBeams})),t.endTriplet&&this.triplet&&this.triplet.setCloseAnchor(r),this.triplet&&!t.startTriplet&&!t.endTriplet&&!(t.rest&&t.rest.type==="spacer")&&this.triplet.middleNote(r),ne};Cr.prototype.addSlursAndTies=function(t,n,e,i,r,s){if(n.endTie&&this.ties.length>0){for(var a=!1,l=0;l<this.ties.length;l++)if(this.ties[l].anchor1&&this.ties[l].anchor1.pitch===e.pitch){this.ties[l].setEndAnchor(e),i.setRange(this.ties[l]),this.ties.splice(l,1),a=!0;break}a||(this.ties[0].setEndAnchor(e),i.setRange(this.ties[0]),this.ties.splice(0,1))}var d=i.voicetotal<2?-1:i.voicenumber;if(n.startTie){var u=new Hh({anchor1:e,force:this.stemdir==="down"||this.stemdir==="up",stemDir:this.stemdir,isGrace:s,voiceNumber:d,style:n.startTie.style});ma&&u.setHint(),this.ties[this.ties.length]=u,i.addOther(u),t.startTie=!0}var h,_;if(n.endSlur)for(var b=0;b<n.endSlur.length;b++)_=n.endSlur[b],this.slurs[_]?(h=this.slurs[_],h.setEndAnchor(e),i.setRange(h),delete this.slurs[_]):(h=new Hh({anchor2:e,stemDir:this.stemdir,voiceNumber:d}),ma&&h.setHint(),i.addOther(h)),this.startlimitelem&&h.setStartX(this.startlimitelem);else if(!s)for(var w in this.slurs)this.slurs.hasOwnProperty(w)&&this.slurs[w].addInternalNote(e);if(n.startSlur)for(b=0;b<n.startSlur.length;b++)_=n.startSlur[b].label,h=new Hh({anchor1:e,stemDir:this.stemdir,voiceNumber:d,style:n.startSlur[b].style}),ma&&h.setHint(),this.slurs[_]=h,i.addOther(h)};Cr.prototype.addMeasureNumber=function(t,n){var e=this.getTextSize.calc(t,"measurefont","bar-number"),i=e.width>18&&n.abcelem.type==="treble"?-7:0;n.addFixed(new xr(t,i,e.width,11+e.height/xp.STEP,{type:"barNumber",dim:this.getTextSize.attr("measurefont","bar-number")}))};Cr.prototype.createBarLine=function(t,n,e){var i=new qh(n,0,10,"bar",this.tuneNumber),r=null,s=0;n.barNumber&&this.addMeasureNumber(n.barNumber,i);var a=n.type==="bar_right_repeat"||n.type==="bar_dbl_repeat",l=n.type!=="bar_left_repeat"&&n.type!=="bar_thick_thin"&&n.type!=="bar_invisible",d=n.type==="bar_right_repeat"||n.type==="bar_dbl_repeat"||n.type==="bar_left_repeat"||n.type==="bar_thin_thick"||n.type==="bar_thick_thin",u=n.type==="bar_left_repeat"||n.type==="bar_thick_thin"||n.type==="bar_thin_thin"||n.type==="bar_dbl_repeat",h=n.type==="bar_left_repeat"||n.type==="bar_dbl_repeat";if(a||h){for(var _ in this.slurs)this.slurs.hasOwnProperty(_)&&this.slurs[_].setEndX(i);this.startlimitelem=i}if(a&&(i.addRight(new xr("dots.dot",s,1,7)),i.addRight(new xr("dots.dot",s,1,5)),s+=6),l&&(r=new xr(null,s,1,2,{type:"bar",pitch2:10,linewidth:.6}),i.addRight(r)),n.type==="bar_invisible"&&(r=new xr(null,s,1,2,{type:"none",pitch2:10,linewidth:.6}),i.addRight(r)),n.decoration&&this.decoration.createDecoration(t,n.decoration,12,d?3:1,i,0,"down",2,n.positioning,this.hasVocals),d&&(s+=4,r=new xr(null,s,4,2,{type:"bar",pitch2:10,linewidth:4}),i.addRight(r),s+=5),this.partstartelem&&n.endEnding&&(this.partstartelem.anchor2=r,this.partstartelem=null),u&&(s+=3,r=new xr(null,s,1,2,{type:"bar",pitch2:10,linewidth:.6}),i.addRight(r)),h&&(s+=3,i.addRight(new xr("dots.dot",s,1,7)),i.addRight(new xr("dots.dot",s,1,5))),n.startEnding&&e){var b=this.getTextSize.calc(n.startEnding,"repeatfont","").width;i.minspacing+=b+10,this.partstartelem=new c4(n.startEnding,r,null),t.addOther(this.partstartelem)}if(i.extraw-=5,n.chord!==void 0)var w=h4(this.getTextSize,i,n,0,0,0,!1);return i};p4.exports=Cr});var y4=et((MCe,_4)=>{var ga="http://www.w3.org/2000/svg";function tr(t){this.svg=mC(),this.currentGroup=[],t.appendChild(this.svg)}tr.prototype.clear=function(){if(this.svg){var t=this.svg.parentNode;this.svg=mC(),this.currentGroup=[],t&&(t.innerHTML="",t.appendChild(this.svg))}};tr.prototype.setTitle=function(t){var n=document.createElement("title"),e=document.createTextNode(t);n.appendChild(e),this.svg.insertBefore(n,this.svg.firstChild)};tr.prototype.setResponsiveWidth=function(t,n){if(this.svg.setAttribute("viewBox","0 0 "+t+" "+n),this.svg.setAttribute("preserveAspectRatio","xMinYMin meet"),this.svg.removeAttribute("height"),this.svg.removeAttribute("width"),this.svg.style.display="inline-block",this.svg.style.position="absolute",this.svg.style.top="0",this.svg.style.left="0",this.svg.parentNode){var e=this.svg.parentNode.getAttribute("class");e?e.indexOf("abcjs-container")<0&&this.svg.parentNode.setAttribute("class",e+" abcjs-container"):this.svg.parentNode.setAttribute("class","abcjs-container"),this.svg.parentNode.style.display="inline-block",this.svg.parentNode.style.position="relative",this.svg.parentNode.style.width="100%";var i=n/t*100;this.svg.parentNode.style["padding-bottom"]=i+"%",this.svg.parentNode.style["vertical-align"]="middle",this.svg.parentNode.style.overflow="hidden"}};tr.prototype.setSize=function(t,n){this.svg.setAttribute("width",t),this.svg.setAttribute("height",n)};tr.prototype.setAttribute=function(t,n){this.svg.setAttribute(t,n)};tr.prototype.setScale=function(t){t!==1?(this.svg.style.transform="scale("+t+","+t+")",this.svg.style["-ms-transform"]="scale("+t+","+t+")",this.svg.style["-webkit-transform"]="scale("+t+","+t+")",this.svg.style["transform-origin"]="0 0",this.svg.style["-ms-transform-origin-x"]="0",this.svg.style["-ms-transform-origin-y"]="0",this.svg.style["-webkit-transform-origin-x"]="0",this.svg.style["-webkit-transform-origin-y"]="0"):(this.svg.style.transform="",this.svg.style["-ms-transform"]="",this.svg.style["-webkit-transform"]="")};tr.prototype.insertStyles=function(t){var n=document.createElementNS(ga,"style");n.textContent=t,this.svg.insertBefore(n,this.svg.firstChild)};tr.prototype.setParentStyles=function(t){for(var n in t)t.hasOwnProperty(n)&&this.svg.parentNode&&(this.svg.parentNode.style[n]=t[n]);if(this.dummySvg){var e=document.querySelector("body");e.removeChild(this.dummySvg),this.dummySvg=null}};function m4(t,n,e){var i=e-t;return"M "+t+" "+n+" l "+i+" 0 l 0 1  l "+-i+" 0  z "}function g4(t,n,e){var i=e-n;return"M "+t+" "+n+" l 0 "+i+" l 1 0  l 0 "+-i+"  z "}tr.prototype.rect=function(t){var n=[],e=t.x,i=t.y,r=t.x+t.width,s=t.y+t.height;return n.push(m4(e,i,r)),n.push(m4(e,s,r)),n.push(g4(r,i,s)),n.push(g4(e,s,i)),this.path({path:n.join(" "),stroke:"none","data-name":t["data-name"]})};tr.prototype.dottedLine=function(t){var n=document.createElementNS(ga,"line");n.setAttribute("x1",t.x1),n.setAttribute("x2",t.x2),n.setAttribute("y1",t.y1),n.setAttribute("y2",t.y2),n.setAttribute("stroke",t.stroke),n.setAttribute("stroke-dasharray","5,5"),this.svg.insertBefore(n,this.svg.firstChild)};tr.prototype.rectBeneath=function(t){var n=document.createElementNS(ga,"rect");n.setAttribute("x",t.x),n.setAttribute("width",t.width),n.setAttribute("y",t.y),n.setAttribute("height",t.height),t.stroke&&n.setAttribute("stroke",t.stroke),t["stroke-opacity"]&&n.setAttribute("stroke-opacity",t["stroke-opacity"]),t.fill&&n.setAttribute("fill",t.fill),t["fill-opacity"]&&n.setAttribute("fill-opacity",t["fill-opacity"]),this.svg.insertBefore(n,this.svg.firstChild)};tr.prototype.text=function(t,n,e){var i=document.createElementNS(ga,"text");i.setAttribute("stroke","none");for(var r in n)n.hasOwnProperty(r)&&i.setAttribute(r,n[r]);for(var s=(""+t).split(`
`),a=0;a<s.length;a++){var l=document.createElementNS(ga,"tspan");if(l.setAttribute("x",n.x?n.x:0),a!==0&&l.setAttribute("dy","1.2em"),s[a].indexOf("")!==-1){var d=s[a].split("");if(l.textContent=d[0],d[1]){var u=document.createElementNS(ga,"tspan");u.setAttribute("dy","-0.3em"),u.setAttribute("style","font-size:0.7em"),u.textContent=d[1],l.appendChild(u)}if(d[2]){var h=d[1]?"0.4em":"0.1em",_=document.createElementNS(ga,"tspan");_.setAttribute("dy",h),_.setAttribute("style","font-size:0.7em"),_.textContent=d[2],l.appendChild(_)}}else l.textContent=s[a];i.appendChild(l)}return e?e.appendChild(i):this.append(i),i};tr.prototype.guessWidth=function(t,n){var e=this.createDummySvg(),i=this.text(t,n,e),r;try{r=i.getBBox(),isNaN(r.height)||!r.height?r={width:n["font-size"]/2,height:n["font-size"]+2}:r={width:r.width,height:r.height}}catch{r={width:n["font-size"]/2,height:n["font-size"]+2}}return e.removeChild(i),r};tr.prototype.createDummySvg=function(){if(!this.dummySvg){this.dummySvg=mC();var t=["display: block !important;","height: 1px;","width: 1px;","position: absolute;"];this.dummySvg.setAttribute("style",t.join(""));var n=document.querySelector("body");n.appendChild(this.dummySvg)}return this.dummySvg};var fC={};tr.prototype.getTextSize=function(t,n,e){if(typeof t=="number"&&(t=""+t),!t||t.match(/^\s+$/))return{width:0,height:0};var i;if(t.length<20&&(i=t+JSON.stringify(n),fC[i]))return fC[i];var r=!e;e||(e=this.text(t,n));var s;try{s=e.getBBox(),isNaN(s.height)||!s.height?s=this.guessWidth(t,n):s={width:s.width,height:s.height}}catch{s=this.guessWidth(t,n)}return r&&(this.currentGroup.length>0?this.currentGroup[0].removeChild(e):this.svg.removeChild(e)),i&&(fC[i]=s),s};tr.prototype.openGroup=function(t){t=t||{};var n=document.createElementNS(ga,"g");return t.klass&&n.setAttribute("class",t.klass),t.fill&&n.setAttribute("fill",t.fill),t.stroke&&n.setAttribute("stroke",t.stroke),t["data-name"]&&n.setAttribute("data-name",t["data-name"]),t.prepend?this.prepend(n):this.append(n),this.currentGroup.unshift(n),n};tr.prototype.closeGroup=function(){var t=this.currentGroup.shift();return t&&t.children.length===0?(t.parentElement.removeChild(t),null):t};tr.prototype.path=function(t){var n=document.createElementNS(ga,"path");for(var e in t)t.hasOwnProperty(e)&&(e==="path"?n.setAttributeNS(null,"d",t.path):e==="klass"?n.setAttributeNS(null,"class",t[e]):t[e]!==void 0&&n.setAttributeNS(null,e,t[e]));return this.append(n),n};tr.prototype.pathToBack=function(t){var n=document.createElementNS(ga,"path");for(var e in t)t.hasOwnProperty(e)&&(e==="path"?n.setAttributeNS(null,"d",t.path):e==="klass"?n.setAttributeNS(null,"class",t[e]):n.setAttributeNS(null,e,t[e]));return this.prepend(n),n};tr.prototype.append=function(t){this.currentGroup.length>0?this.currentGroup[0].appendChild(t):this.svg.appendChild(t)};tr.prototype.prepend=function(t){this.currentGroup.length>0?this.currentGroup[0].appendChild(t):this.svg.insertBefore(t,this.svg.firstChild)};tr.prototype.setAttributeOnElement=function(t,n){for(var e in n)n.hasOwnProperty(e)&&t.setAttributeNS(null,e,n[e])};tr.prototype.moveElementToChild=function(t,n){t.appendChild(n)};function mC(){var t=document.createElementNS(ga,"svg");return t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),t.setAttribute("role","img"),t.setAttribute("fill","currentColor"),t.setAttribute("stroke","currentColor"),t}_4.exports=tr});var x4=et((SCe,b4)=>{var v4=No(),Xq=y4(),_a=function(t){this.paper=new Xq(t),this.controller=null,this.space=3*v4.SPACE,this.padding={},this.reset()};_a.prototype.reset=function(){this.paper.clear(),this.y=0,this.abctune=null,this.path=null,this.isPrint=!1,this.initVerticalSpace()};_a.prototype.newTune=function(t){this.abctune=t,this.setVerticalSpace(t.formatting),this.isPrint=t.media==="print",this.setPadding(t)};_a.prototype.setPaddingOverride=function(t){this.paddingOverride={top:t.paddingtop,bottom:t.paddingbottom,right:t.paddingright,left:t.paddingleft}};_a.prototype.setPadding=function(t){function n(e,i,r,s,a){t.formatting[r]!==void 0?e.padding[i]=t.formatting[r]:e.paddingOverride[i]!==void 0?e.padding[i]=e.paddingOverride[i]:e.isPrint?e.padding[i]=s:e.padding[i]=a}n(this,"top","topmargin",38,15),n(this,"bottom","botmargin",38,15),n(this,"left","leftmargin",68,15),n(this,"right","rightmargin",68,15)};_a.prototype.adjustNonScaledItems=function(t){this.padding.top/=t,this.padding.bottom/=t,this.padding.left/=t,this.padding.right/=t,this.abctune.formatting.headerfont.size/=t,this.abctune.formatting.footerfont.size/=t};_a.prototype.initVerticalSpace=function(){this.spacing={composer:7.56,graceBefore:8.67,graceInside:10.67,graceAfter:16,info:0,lineSkipFactor:1.1,music:7.56,paragraphSkipFactor:.4,parts:11.33,slurHeight:1,staffSeparation:61.33,stemHeight:26.67+10,subtitle:3.78,systemStaffSeparation:48,text:18.9,title:7.56,top:30.24,vocal:0,words:0}};_a.prototype.setVerticalSpace=function(t){t.staffsep!==void 0&&(this.spacing.staffSeparation=t.staffsep*4/3),t.composerspace!==void 0&&(this.spacing.composer=t.composerspace*4/3),t.partsspace!==void 0&&(this.spacing.parts=t.partsspace*4/3),t.textspace!==void 0&&(this.spacing.text=t.textspace*4/3),t.musicspace!==void 0&&(this.spacing.music=t.musicspace*4/3),t.titlespace!==void 0&&(this.spacing.title=t.titlespace*4/3),t.sysstaffsep!==void 0&&(this.spacing.systemStaffSeparation=t.sysstaffsep*4/3),t.subtitlespace!==void 0&&(this.spacing.subtitle=t.subtitlespace*4/3),t.topspace!==void 0&&(this.spacing.top=t.topspace*4/3),t.vocalspace!==void 0&&(this.spacing.vocal=t.vocalspace*4/3),t.wordsspace!==void 0&&(this.spacing.words=t.wordsspace*4/3)};_a.prototype.calcY=function(t){return this.y-t*v4.STEP};_a.prototype.moveY=function(t,n){n===void 0&&(n=1),this.y+=t*n};_a.prototype.absolutemoveY=function(t){this.y=t};b4.exports=_a});var w4=et((PCe,C4)=>{function Jq(t,n,e,i,r,s){var a=t.text;this.rows=[];var l;n&&this.rows.push({move:n});var d=e.calc("textfont","defined-text");if(a==="")this.rows.push({move:d.attr["font-size"]*2});else if(typeof a=="string")this.rows.push({move:d.attr["font-size"]/2}),this.rows.push({left:i,text:a,font:"textfont",klass:"defined-text",anchor:"start",startChar:t.startChar,endChar:t.endChar,absElemType:"freeText",name:"free-text"}),l=s.calc(a,"textfont","defined-text"),this.rows.push({move:l.height});else if(a){for(var u=0,h=i,_="textfont",b=0;b<a.length;b++)a[b].font?_=a[b].font:_="textfont",this.rows.push({left:h,text:a[b].text,font:_,klass:"defined-text",anchor:"start",startChar:t.startChar,endChar:t.endChar,absElemType:"freeText",name:"free-text"}),l=s.calc(a[b].text,e.calc(_,"defined-text").font,"defined-text"),h+=l.width+l.height/2,u=Math.max(u,l.height);this.rows.push({move:u})}else if(t.length===1){var w=r/2;this.rows.push({left:w,text:t[0].text,font:"textfont",klass:"defined-text",anchor:"middle",startChar:t.startChar,endChar:t.endChar,absElemType:"freeText",name:"free-text"}),l=s.calc(t[0].text,"textfont","defined-text"),this.rows.push({move:l.height})}}C4.exports=Jq});var S4=et((kCe,M4)=>{function Qq(t,n,e){this.rows=[],t&&this.rows.push({move:t}),this.rows.push({separator:n,absElemType:"separator"}),e&&this.rows.push({move:e})}M4.exports=Qq});var k4=et((ECe,P4)=>{function $q(t,n,e,i,r,s){this.rows=[],t&&this.rows.push({move:t});var a=n.titleleft?"start":"middle",l=n.titleleft?r:i;this.rows.push({left:l,text:e.text,font:"subtitlefont",klass:"text subtitle",anchor:a,startChar:e.startChar,endChar:e.endChar,absElemType:"subtitle",name:"subtitle"});var d=s.calc(e.text,"subtitlefont","text subtitle");this.rows.push({move:d.height})}P4.exports=$q});var gC=et((TCe,E4)=>{function Kq(t,n,e){if(n.text){n.marginLeft||(n.marginLeft=0),n.klass||(n.klass=""),n.anchor||(n.anchor="start"),n.info||(n.info={startChar:-2,endChar:-2}),n.marginTop&&t.push({move:n.marginTop});var i={left:n.marginLeft,text:n.text,font:n.font,anchor:n.anchor,startChar:n.info.startChar,endChar:n.info.endChar};n.absElemType&&(i.absElemType=n.absElemType),n.inGroup||(i.klass=n.klass),n.name&&(i.name=n.name),t.push(i);var r=e.calc("A",n.font,n.klass),s=n.text.split(`
`).length;if(n.text[n.text.length-1]===`
`&&s--,!n.noMove){var a=r.height*1.1*s;t.push({move:Math.round(a)}),n.marginBottom&&t.push({move:n.marginBottom})}}}E4.exports=Kq});var A4=et((ACe,T4)=>{var kl=gC();function Zq(t,n,e,i,r,s,a,l,d){if(this.rows=[],t.header&&s){var u=d.calc("X","headerfont","abcjs-header abcjs-meta-top").height;kl(this.rows,{marginLeft:a,text:t.header.left,font:"headerfont",klass:"header meta-top",marginTop:-u,info:n.header,name:"header"},d),kl(this.rows,{marginLeft:a+r/2,text:t.header.center,font:"headerfont",klass:"header meta-top",marginTop:-u,anchor:"middle",info:n.header,name:"header"},d),kl(this.rows,{marginLeft:a+r,text:t.header.right,font:"headerfont",klass:"header meta-top",marginTop:-u,anchor:"end",info:n.header,name:"header"},d)}s&&this.rows.push({move:l.top});var h=e.titleleft?"start":"middle",_=e.titleleft?a:a+r/2;if(t.title&&kl(this.rows,{marginLeft:_,text:t.title,font:"titlefont",klass:"title meta-top",marginTop:l.title,anchor:h,absElemType:"title",info:n.title,name:"title"},d),i.length)for(var b=0;b<i.length&&i[b].subtitle;)kl(this.rows,{marginLeft:_,text:i[b].subtitle.text,font:"subtitlefont",klass:"text meta-top subtitle",marginTop:l.subtitle,anchor:h,absElemType:"subtitle",info:i[b].subtitle,name:"subtitle"},d),b++;if(t.rhythm||t.origin||t.composer){if(this.rows.push({move:l.composer}),t.rhythm&&t.rhythm.length>0){var w=!!(t.composer||t.origin);kl(this.rows,{marginLeft:a,text:t.rhythm,font:"infofont",klass:"meta-top rhythm",absElemType:"rhythm",noMove:w,info:n.rhythm,name:"rhythm"},d)}var S="";t.composer&&(S+=t.composer),t.origin&&(S+=" ("+t.origin+")"),S.length>0&&kl(this.rows,{marginLeft:a+r,text:S,font:"composerfont",klass:"meta-top composer",anchor:"end",absElemType:"composer",info:n.composer,name:"composer"},d)}t.author&&t.author.length>0&&kl(this.rows,{marginLeft:a+r,text:t.author,font:"composerfont",klass:"meta-top author",anchor:"end",absElemType:"author",info:n.author,name:"author"},d),t.partOrder&&t.partOrder.length>0&&kl(this.rows,{marginLeft:a,text:t.partOrder,font:"partsfont",klass:"meta-top part-order",absElemType:"partOrder",info:n.partOrder,name:"part-order"},d)}T4.exports=Zq});var I4=et((DCe,D4)=>{var Cp=gC();function f_(t,n,e,i,r,s){this.rows=[],t.unalignedWords&&t.unalignedWords.length>0&&this.unalignedWords(t.unalignedWords,i,r,s),this.extraText(t,i,r,s),t.footer&&e&&this.footer(t.footer,n,i,s)}f_.prototype.unalignedWords=function(t,n,e,i){var r=50,s="meta-bottom unaligned-words",a="wordsfont";this.rows.push({startGroup:"unalignedWords",klass:"abcjs-meta-bottom abcjs-unaligned-words",name:"words"});var l=i.calc("i",a,s);this.rows.push({move:e.words});for(var d=0;d<t.length;d++)if(t[d]==="")this.rows.push({move:l.height});else if(typeof t[d]=="string")Cp(this.rows,{marginLeft:n+r,text:t[d],font:a,klass:s,inGroup:!0,name:"words"},i);else{for(var u=0,h=0,_=0;_<t[d].length;_++){var b=t[d][_],w=b.font?b.font:a;this.rows.push({left:n+r+h,text:b.text,font:w,anchor:"start"});var S=i.calc(b.text,a,s);u=Math.max(u,S.height),h+=S.width,b.text[b.text.length-1]===" "&&(h+=l.width)}this.rows.push({move:u})}this.rows.push({move:l.height*2}),this.rows.push({endGroup:"unalignedWords",absElemType:"unalignedWords",startChar:-1,endChar:-1,name:"unalignedWords"})};f_.prototype.extraText=function(t,n,e,i){var r="";t.book&&(r+="Book: "+t.book+`
`),t.source&&(r+="Source: "+t.source+`
`),t.discography&&(r+="Discography: "+t.discography+`
`),t.notes&&(r+="Notes: "+t.notes+`
`),t.transcription&&(r+="Transcription: "+t.transcription+`
`),t.history&&(r+="History: "+t.history+`
`),t["abc-copyright"]&&(r+="Copyright: "+t["abc-copyright"]+`
`),t["abc-creator"]&&(r+="Creator: "+t["abc-creator"]+`
`),t["abc-edited-by"]&&(r+="Edited By: "+t["abc-edited-by"]+`
`),r.length>0&&Cp(this.rows,{marginLeft:n,text:r,font:"historyfont",klass:"meta-bottom extra-text",marginTop:e.info,absElemType:"extraText",name:"description"},i)};f_.prototype.footer=function(t,n,e,i){var r="header meta-bottom",s="footerfont";this.rows.push({startGroup:"footer",klass:r}),Cp(this.rows,{marginLeft:e,text:t.left,font:s,klass:r,name:"footer"},i),Cp(this.rows,{marginLeft:e+n/2,text:t.center,font:s,klass:r,anchor:"middle",name:"footer"},i),Cp(this.rows,{marginLeft:e+n,text:t.right,font:s,klass:r,anchor:"end",name:"footer"},i)};D4.exports=f_});var G4=et((ICe,j4)=>{var m_=No();function eH(t,n){if(t.rangeHighlight=dH,t.dragging)for(var e=0;e<t.selectables.length;e++){var i=t.selectables[e];i.svgEl.getAttribute("selectable")==="true"&&(i.svgEl.setAttribute("tabindex",0),i.svgEl.setAttribute("data-index",e),i.svgEl.addEventListener("keydown",iH.bind(t)),i.svgEl.addEventListener("keyup",rH.bind(t)),i.svgEl.addEventListener("focus",nH.bind(t)))}for(var r=0;r<n.length;r++)n[r].addEventListener("touchstart",O4.bind(t)),n[r].addEventListener("touchmove",F4.bind(t)),n[r].addEventListener("touchend",wp.bind(t)),n[r].addEventListener("mousedown",O4.bind(t)),n[r].addEventListener("mousemove",F4.bind(t)),n[r].addEventListener("mouseup",wp.bind(t))}function tH(t){var n=1,e=1,i=t.target.closest("svg"),r=0;i.viewBox.baseVal&&(i.viewBox.baseVal.width!==0&&(n=i.viewBox.baseVal.width/i.clientWidth),i.viewBox.baseVal.height!==0&&(e=i.viewBox.baseVal.height/i.clientHeight),r=i.viewBox.baseVal.y);var s=t.target.tagName==="svg",a,l;return s?(a=t.offsetX,l=t.offsetY):(a=t.layerX,l=t.layerY),a=a*n,l=l*e,[a,l+r]}function nH(t){this.dragMechanism==="keyboard"&&this.dragYStep!==0&&this.dragTarget&&L4.bind(this)(this.dragTarget,this.dragYStep,this.selectables.length,this.dragIndex,t),this.dragYStep=0}function iH(t){switch(t.keyCode){case 38:case 40:t.preventDefault()}}function rH(t){var n=!1,e=t.target.dataset.index;switch(t.keyCode){case 13:case 32:n=!0,this.dragTarget=this.selectables[e],this.dragIndex=e,this.dragMechanism="keyboard",wp.bind(this)(t);break;case 38:n=!0,this.dragTarget=this.selectables[e],this.dragIndex=e,this.dragTarget.isDraggable&&(this.dragging&&this.dragTarget.isDraggable&&this.dragTarget.absEl.highlight(void 0,this.dragColor),this.dragYStep--,this.dragTarget.svgEl.setAttribute("transform","translate(0,"+this.dragYStep*m_.STEP+")"));break;case 40:n=!0,this.dragTarget=this.selectables[e],this.dragIndex=e,this.dragMechanism="keyboard",this.dragTarget.isDraggable&&(this.dragging&&this.dragTarget.isDraggable&&this.dragTarget.absEl.highlight(void 0,this.dragColor),this.dragYStep++,this.dragTarget.svgEl.setAttribute("transform","translate(0,"+this.dragYStep*m_.STEP+")"));break;case 9:this.dragYStep!==0&&wp.bind(this)(t);break;default:break}n&&t.preventDefault()}function oH(t,n){for(var e=0;e<t.length;e++)if(n.dataset.index===t[e].svgEl.dataset.index)return e;return-1}function sH(t,n,e){for(var i=9999999,r=-1,s=0;s<t.selectables.length&&i>0;s++){var a=t.selectables[s];if(t.getDim(a),a.dim.left<n&&a.dim.right>n&&a.dim.top<e&&a.dim.bottom>e)r=s,i=0;else if(a.dim.top<e&&a.dim.bottom>e){var l=Math.min(Math.abs(a.dim.left-n),Math.abs(a.dim.right-n));l<i&&(i=l,r=s)}else if(a.dim.left<n&&a.dim.right>n){var d=Math.min(Math.abs(a.dim.top-e),Math.abs(a.dim.bottom-e));d<i&&(i=d,r=s)}else{var u=Math.abs(n-a.dim.left)>Math.abs(n-a.dim.right)?Math.abs(n-a.dim.right):Math.abs(n-a.dim.left),h=Math.abs(e-a.dim.top)>Math.abs(e-a.dim.bottom)?Math.abs(e-a.dim.bottom):Math.abs(e-a.dim.top),_=Math.sqrt(u*u+h*h);_<i&&(i=_,r=s)}}return r>=0&&i<=12?r:-1}function aH(t,n,e){if(t.x<=n.offsetX&&t.x+t.width>=n.offsetX&&t.y<=n.offsetY&&t.y+t.height>=n.offsetY)return[n.offsetX,n.offsetY];var i=Math.abs(n.layerY/e-n.offsetY);return i<3?[n.offsetX,n.offsetY]:[n.layerX,n.layerY]}function lH(t){if(t.tagName==="svg")return t;for(var n=t.getAttribute("selectable");!n;)t=t.parentElement,t.tagName==="svg"?n=!0:n=t.getAttribute("selectable");return t}function B4(t,n){var e,i,r,s=oH(t.selectables,lH(n.target));return s>=0?(r=aH(t.selectables[s].svgEl.getBBox(),n,t.scale),e=r[0],i=r[1]):(r=tH(n),e=r[0],i=r[1],s=sH(t,e,i)),{x:e,y:i,clickedOn:s}}function yC(t){var n=t.target.getBoundingClientRect(),e=t.touches[0].pageX-n.left,i=t.touches[0].pageY-n.top;t.touches[0].offsetX=e,t.touches[0].offsetY=i,t.touches[0].layerX=t.touches[0].pageX,t.touches[0].layerY=t.touches[0].pageY}function O4(t){var n=t;t.type==="touchstart"&&(yC(t),n=t.touches[0]);var e=B4(this,n);e.clickedOn>=0&&(t.type==="touchstart"||t.button===0)&&(this.dragTarget=this.selectables[e.clickedOn],this.dragIndex=e.clickedOn,this.dragMechanism="mouse",this.dragMouseStart={x:e.x,y:e.y},this.dragging&&this.dragTarget.isDraggable&&(hH(this.renderer.paper,"abcjs-dragging-in-progress"),this.dragTarget.absEl.highlight(void 0,this.dragColor)))}function F4(t){var n=t;if(t.type==="touchmove"&&(yC(t),n=t.touches[0]),this.lastTouchMove=t,!(!this.dragTarget||!this.dragging||!this.dragTarget.isDraggable||this.dragMechanism!=="mouse")){var e=B4(this,n),i=Math.round((e.y-this.dragMouseStart.y)/m_.STEP);i!==this.dragYStep&&(this.dragYStep=i,this.dragTarget.svgEl.setAttribute("transform","translate(0,"+i*m_.STEP+")"))}}function wp(t){var n=t;t.type==="touchend"&&(yC(this.lastTouchMove),n=this.lastTouchMove.touches[0]),this.dragTarget&&(N4.bind(this)(),this.dragTarget.absEl&&this.dragTarget.absEl.highlight&&(this.selected=[this.dragTarget.absEl],this.dragTarget.absEl.highlight(void 0,this.selectionColor)),L4.bind(this)(this.dragTarget,this.dragYStep,this.selectables.length,this.dragIndex,n),this.dragTarget.svgEl&&this.dragTarget.svgEl.focus&&(this.dragTarget.svgEl.focus(),this.dragTarget=null,this.dragIndex=-1),uH(this.renderer.svg,"abcjs-dragging-in-progress"))}function cH(t){t>=0&&t<this.selectables.length&&(this.dragTarget=this.selectables[t],this.dragIndex=t,this.dragMechanism="keyboard",wp.bind(this)({target:this.dragTarget.svgEl}))}function L4(t,n,e,i,r){var s=[];if(t.absEl.elemset){for(var a={},l=0;l<t.absEl.elemset.length;l++){var d=t.absEl.elemset[l];if(d)for(var u=d.getAttribute("class").split(" "),h=0;h<u.length;h++)a[u[h]]=!0}for(var _=0;_<Object.keys(a).length;_++)s.push(Object.keys(a)[_])}for(var b={},w=0;w<s.length;w++)_C(s[w],"abcjs-v",b,"voice"),_C(s[w],"abcjs-l",b,"line"),_C(s[w],"abcjs-m",b,"measure");t.staffPos&&(b.staffPos=t.staffPos);for(var S=r.target;!S.dataset.name&&S.tagName.toLowerCase()!=="svg";)S=S.parentNode;for(var L=r.target;!L.dataset.index&&L.tagName.toLowerCase()!=="svg";)L=L.parentNode;b.name=L.dataset.name,b.clickedName=S.dataset.name,b.parentClasses=L.classList,b.clickedClasses=S.classList,b.selectableElement=t.svgEl;for(var R=0;R<this.listeners.length;R++)this.listeners[R](t.absEl.abcelem,t.absEl.tuneNumber,s.join(" "),b,{step:n,max:e,index:i,setSelection:cH.bind(this)},r)}function _C(t,n,e,i){if(t.indexOf(n)===0){var r=t.replace(n,""),s=parseInt(r,10);""+s===r&&(e[i]=s)}}function N4(){for(var t=0;t<this.selected.length;t++)this.selected[t].unhighlight(void 0,this.renderer.foregroundColor);this.selected=[]}function dH(t,n){N4.bind(this)();for(var e=0;e<this.staffgroups.length;e++)for(var i=this.staffgroups[e].voices,r=0;r<i.length;r++)for(var s=i[r].children,a=0;a<s.length;a++){var l=s[a].abcelem.startChar,d=s[a].abcelem.endChar;(n>l&&t<d||n===t&&n===d)&&(this.selected[this.selected.length]=s[a],s[a].highlight(void 0,this.selectionColor))}}function V4(t){var n=t.getAttribute("class");n||(n="");for(var e=n.split(" "),i={},r=0;r<e.length;r++)i[e[r]]=!0;return i}function R4(t,n){var e=[];for(var i in n)n.hasOwnProperty(i)&&e.push(i);t.setAttribute("class",e.join(" "))}function hH(t,n){if(t){var e=V4(t.svg);e[n]=!0,R4(t.svg,e)}}function uH(t,n){if(t){var e=V4(t.svg);delete e[n],R4(t.svg,e)}}j4.exports=eH});var g_=et((OCe,W4)=>{function pH(t,n,e,i,r){return n+(i-n)/(e-t)*(r-t)}W4.exports=pH});var Y4=et((FCe,H4)=>{var fH=ha(),vC=No(),bC=g_(),mH=function(t){if(!(t.elems.length===0||t.allrests)){var n=_H(t.stemsUp,t.isgrace),e=t.elems[0],i=t.elems[t.elems.length-1],r=0,s=t.stemsUp?e.abcelem.maxpitch:e.abcelem.minpitch;r=U4(e,t.stemsUp,s,r),r=U4(i,t.stemsUp,s,r),r=Math.max(t.stemHeight,r+3);var a=yH(t.average,t.elems.length,r,t.stemsUp,e.abcelem.averagepitch,i.abcelem.averagepitch,t.isflat,t.min,t.max,t.isgrace),l=q4(t.stemsUp,e,i);t.addBeam({startX:l[0],endX:l[1],startY:a[0],endY:a[1],dy:n});for(var d=bH(t.elems,t.stemsUp,t.beams[0],t.isgrace,n),u=0;u<d.length;u++)t.addBeam(d[u]);vH(t.elems,t.stemsUp,t.beams[0],n,t.mainNote)}},z4=function(t){return t===void 0?0:Math.floor(Math.log(t)/Math.log(2))};function U4(t,n,e,i){if(!t.children)return i;for(var r=0;r<t.children.length;r++){var s=t.children[r];n&&s.top!==void 0&&s.c==="flags.ugrace"?i=Math.max(i,s.top-e):!n&&s.bottom!==void 0&&s.c==="flags.ugrace"&&(i=Math.max(i,e-s.bottom+7))}return i}function gH(t,n,e,i){if(i)return 0;var r=t-n,s=e/2;return r>s&&(r=s),r<-s&&(r=-s),r}function _H(t,n){var e=t?vC.STEP:-vC.STEP;return n&&(e=e*.4),e}function q4(t,n,e){var i=n.heads[t?0:n.heads.length-1],r=e.heads[t?0:e.heads.length-1],s=i.x;t&&(s+=i.w-.6);var a=r.x;return a+=t?r.w:.6,[s,a]}function yH(t,n,e,i,r,s,a,l,d,u){var h=e-2,_=e-2,b=Math.round(i?Math.max(t+h,d+_):Math.min(t-h,l-_)),w=gH(r,s,n,a),S=b+Math.floor(w/2),L=b+Math.floor(-w/2);return u||(i&&b<6||!i&&b>6)&&(S=6,L=6),[S,L]}function vH(t,n,e,i,r){for(var s=0;s<t.length;s++){var a=t[s];if(!a.abcelem.rest){var l=!a.addExtra,d=l?r:a,u=a.heads[n?0:a.heads.length-1],h=1/5,_=u.pitch+(n?h:-h),b=n?u.w:0;l||(b+=u.dx);var w=u.x+b,S=bC(e.startX,e.startY,e.endX,e.endY,w),L=n?-.6:.6;n||(S-=i/2/vC.STEP),l&&(b+=a.heads[0].dx),u.c==="noteheads.slash.quarter"&&(n?_+=1:_-=1);var R=new fH(null,b,0,_,{type:"stem",pitch2:S,linewidth:L});R.setX(d.x),d.addRight(R)}}}function bH(t,n,e,i,r){for(var s=[],a=[],l=0;l<t.length;l++){var d=t[l];if(!d.abcelem.rest){var u=d.heads[n?0:d.heads.length-1],h=u.x+(n?u.w:0),_=bC(e.startX,e.startY,e.endX,e.endY,h),b=n?-1.5:1.5;i&&(b=b*2/3);var w=d.abcelem.duration;w===0&&(w=.25);for(var S=z4(w);S<-3;S++){var L=-4-S;if(a[L]?a[L].single=!1:a[L]={x:h+(n?-.6:0),y:_+b*(L+1),durlog:S,single:!0},l>0&&d.abcelem.beambr&&d.abcelem.beambr<=L+1){a[L].split||(a[L].split=[a[L].x]);var R=q4(n,t[l-1],d);a[L].split[a[L].split.length-1]>=R[0]&&(R[0]+=d.w),a[L].split.push(R[0]),a[L].split.push(R[1])}}for(var z=a.length-1;z>=0;z--)if(l===t.length-1||z4(t[l+1].abcelem.duration)>-z-4){var ne=h,Q=_+b*(z+1);a[z].single&&(ne=l===0?h+5:h-5,Q=bC(e.startX,e.startY,e.endX,e.endY,ne)+b*(z+1));var q={startX:a[z].x,endX:ne,startY:a[z].y,endY:Q,dy:r};if(a[z].split!==void 0){var T=a[z].split;q.endX<=T[T.length-1]&&(T[T.length-1]-=d.w),T.push(q.endX),q.split=a[z].split}s.push(q),a=a.slice(0,z)}}}return s}H4.exports=mH});var J4=et((BCe,X4)=>{var xH=g_();function CH(t){if(t.anchor1&&t.anchor2){t.hasBeam=!!t.anchor1.parent.beam&&t.anchor1.parent.beam===t.anchor2.parent.beam;var n=t.anchor1.parent.beam;if(t.hasBeam&&(n.elems[0]!==t.anchor1.parent||n.elems[n.elems.length-1]!==t.anchor2.parent)&&(t.hasBeam=!1),t.hasBeam){var e=xC(n)?t.anchor1.x+t.anchor1.w:t.anchor1.x;t.yTextPos=wH(e,t.anchor2.x,n),t.yTextPos+=xC(n)?3:-2,t.xTextPos=MH(e,t.anchor2.x),t.top=t.yTextPos+1,t.bottom=t.yTextPos-2,xC(n)&&(t.endingHeightAbove=4)}else{t.startNote=Math.max(t.anchor1.parent.top,9)+4,t.endNote=Math.max(t.anchor2.parent.top,9)+4,t.anchor1.parent.type==="rest"&&t.anchor2.parent.type!=="rest"?t.startNote=t.endNote:t.anchor2.parent.type==="rest"&&t.anchor1.parent.type!=="rest"&&(t.endNote=t.startNote);for(var i=0,r=0;r<t.middleElems.length;r++)i=Math.max(i,t.middleElems[r].top);i+=4,(i>t.startNote||i>t.endNote)&&(t.startNote=i,t.endNote=i),t.flatBeams&&(t.startNote=Math.max(t.startNote,t.endNote),t.endNote=Math.max(t.startNote,t.endNote)),t.yTextPos=t.startNote+(t.endNote-t.startNote)/2,t.xTextPos=t.anchor1.x+(t.anchor2.x+t.anchor2.w-t.anchor1.x)/2,t.top=t.yTextPos+1}}delete t.middleElems,delete t.flatBeams}function xC(t){return t.stemsUp}function wH(t,n,e){if(e.beams.length===0)return 0;e=e.beams[0];var i=t+(n-t)/2;return xH(e.startX,e.startY,e.endX,e.endY,i)}function MH(t,n){return t+(n-t)/2}X4.exports=CH});var K4=et((LCe,$4)=>{var SH=Y4(),PH=g_(),kH=J4(),EH=function(t){for(var n=0;n<t.beams.length;n++)if(t.beams[n].type==="BeamElem"){SH(t.beams[n]),TH(t.beams[n]);for(var e=0;e<t.beams[n].elems.length;e++)t.adjustRange(t.beams[n].elems[e])}for(t.staff.specialY.chordLines=AH(t.children),n=0;n<t.otherchildren.length;n++){var i=t.otherchildren[n];i.type==="TripletElem"&&(kH(i),t.adjustRange(i))}t.staff.top=Math.max(t.staff.top,t.top),t.staff.bottom=Math.min(t.staff.bottom,t.bottom)};function TH(t){for(var n=1.5,e=0;e<t.elems.length;e++){var i=t.elems[e];if(i.top)for(var r=OH(i,t),s=0;s<i.children.length;s++){var a=i.children[s];if(a.klass==="ornament"&&a.bottom-n<r){var l=r-a.bottom+n;a.bottom+=l,a.top+=l,a.pitch+=l,r=i.top=a.top}}}}function Q4(t,n){var e=n.getChordDim();if(e){for(var i=0;i<t.length;i++){var r=t[i]<e.left;if(r){i>0&&n.putChordInLane(i),t[i]=e.right;return}}t.push(e.right),n.putChordInLane(t.length-1)}}function AH(t){var n=[0],e=[0],i,r,s;for(i=0;i<t.length;i++){for(r=0;r<t[i].children.length;r++)s=t[i].children[r],s.chordHeightAbove&&Q4(n,s);for(r=t[i].children.length-1;r>=0;r--)s=t[i].children[r],s.chordHeightBelow&&Q4(e,s)}return(n.length>1||e.length>1)&&IH(t,n.length,e.length),{above:n.length,below:e.length}}function DH(t){for(var n=0,e=0;e<t.children.length;e++){var i=t.children[e];i.chordHeightBelow&&n++}return n}function IH(t,n,e){for(var i=0;i<t.length;i++)for(var r=DH(t[i]),s=0;s<t[i].children.length;s++){var a=t[i].children[s];a.chordHeightAbove&&a.invertLane(n)}}function OH(t,n){return n=n.beams[0],PH(n.startX,n.startY,n.endX,n.endY,t.x)}$4.exports=EH});var e6=et((NCe,Z4)=>{var Mp=No(),FH=function(t,n){for(var e,i=0;i<n.staffs.length;i++){var r=n.staffs[i],s={tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0};if(t.showDebug&&t.showDebug.indexOf("box")>=0&&(r.originalTop=r.top,r.originalBottom=r.bottom),Yh(r,s,"lyricHeightAbove"),Yh(r,s,"chordHeightAbove",r.specialY.chordLines.above),r.specialY.endingHeightAbove&&(r.specialY.chordHeightAbove?r.top+=2:r.top+=r.specialY.endingHeightAbove+dc,s.endingHeightAbove=r.top),r.specialY.dynamicHeightAbove&&r.specialY.volumeHeightAbove?(r.top+=Math.max(r.specialY.dynamicHeightAbove,r.specialY.volumeHeightAbove)+dc,s.dynamicHeightAbove=r.top,s.volumeHeightAbove=r.top):(Yh(r,s,"dynamicHeightAbove"),Yh(r,s,"volumeHeightAbove")),Yh(r,s,"partHeightAbove"),Yh(r,s,"tempoHeightAbove"),r.specialY.lyricHeightBelow&&(r.specialY.lyricHeightBelow+=t.spacing.vocal/Mp.STEP,s.lyricHeightBelow=r.bottom,r.bottom-=r.specialY.lyricHeightBelow+dc),r.specialY.chordHeightBelow){s.chordHeightBelow=r.bottom;var a=r.specialY.chordHeightBelow;r.specialY.chordLines.below&&(a*=r.specialY.chordLines.below),r.bottom-=a+dc}r.specialY.volumeHeightBelow&&r.specialY.dynamicHeightBelow?(s.volumeHeightBelow=r.bottom,s.dynamicHeightBelow=r.bottom,r.bottom-=Math.max(r.specialY.volumeHeightBelow,r.specialY.dynamicHeightBelow)+dc):r.specialY.volumeHeightBelow?(s.volumeHeightBelow=r.bottom,r.bottom-=r.specialY.volumeHeightBelow+dc):r.specialY.dynamicHeightBelow&&(s.dynamicHeightBelow=r.bottom,r.bottom-=r.specialY.dynamicHeightBelow+dc),t.showDebug&&t.showDebug.indexOf("box")>=0&&(r.positionY=s);for(var l=0;l<r.voices.length;l++){var d=n.voices[r.voices[l]];BH(s,d,t.spacing)}if(e!==void 0){var u=r.top-10,h=e+u,_=t.spacing.systemStaffSeparation/Mp.STEP,b=_-h;b>0&&(r.top+=b)}e=2-r.bottom}},dc=1;function Yh(t,n,e,i){if(t.specialY[e]){var r=t.specialY[e];i&&(r*=i),t.top+=r+dc,n[e]=t.top}}function BH(t,n,e){var i,r;for(i=0;i<n.children.length;i++)r=n.children[i],LH(t,r,e);for(i=0;i<n.otherchildren.length;i++)switch(r=n.otherchildren[i],r.type){case"CrescendoElem":NH(t,r);break;case"DynamicDecoration":VH(t,r);break;case"EndingElem":RH(t,r);break}}function LH(t,n,e){for(var i=0;i<n.children.length;i++){var r=n.children[i];for(var s in n.specialY)n.specialY.hasOwnProperty(s)&&r[s]&&(r.pitch=t[s],r.top===void 0&&(r.type==="TempoElement"?jH(t,r):GH(t,r,e),n.pushTop(r.top),n.pushBottom(r.bottom)))}}function NH(t,n){n.dynamicHeightAbove?n.pitch=t.dynamicHeightAbove:n.pitch=t.dynamicHeightBelow}function VH(t,n){n.volumeHeightAbove?n.pitch=t.volumeHeightAbove:n.pitch=t.volumeHeightBelow}function RH(t,n){n.pitch=t.endingHeightAbove-2}function jH(t,n){if(n.pitch=t.tempoHeightAbove,n.top=t.tempoHeightAbove,n.bottom=t.tempoHeightAbove,n.note){var e=n.pitch-n.totalHeightInPitches+1;n.note.top=e,n.note.bottom=e;for(var i=0;i<n.note.children.length;i++){var r=n.note.children[i];r.top+=e,r.bottom+=e,r.pitch+=e,r.pitch2!==void 0&&(r.pitch2+=e)}}}function GH(t,n,e){switch(n.type){case"part":n.top=t.partHeightAbove+n.height,n.bottom=t.partHeightAbove;break;case"text":case"chord":n.chordHeightAbove?(n.top=t.chordHeightAbove,n.bottom=t.chordHeightAbove):(n.top=t.chordHeightBelow,n.bottom=t.chordHeightBelow);break;case"lyric":n.lyricHeightAbove?(n.top=t.lyricHeightAbove,n.bottom=t.lyricHeightAbove):(n.top=t.lyricHeightBelow+e.vocal/Mp.STEP,n.bottom=t.lyricHeightBelow+e.vocal/Mp.STEP,n.pitch-=e.vocal/Mp.STEP);break;case"debug":n.top=t.chordHeightAbove,n.bottom=t.chordHeightAbove;break}(n.pitch===void 0||n.top===void 0)&&console.error("RelativeElement position not set.",n.type,n.pitch,n.top,t)}Z4.exports=FH});var n6=et((VCe,t6)=>{var El=function(){};El.beginLayout=function(t,n){n.i=0,n.durationindex=0,n.startx=t,n.minx=t,n.nextx=t,n.spacingduration=0};El.layoutEnded=function(t){return t.i>=t.children.length};El.getNextX=function(t){return Math.max(t.minx,t.nextx)};El.getSpacingUnits=function(t){return Math.sqrt(t.spacingduration*8)};El.layoutOneItem=function(t,n,e,i,r){var s=e.children[e.i];if(!s)return 0;var a=t-e.minx,l=e.durationindex+s.duration>0?i:0;if(s.abcelem.el_type==="note"&&!s.abcelem.rest&&e.voicenumber!==0&&r){var d=r.children[r.i],u=d&&(s.abcelem.maxpitch<=d.abcelem.maxpitch+1&&s.abcelem.maxpitch>=d.abcelem.minpitch-1||s.abcelem.minpitch<=d.abcelem.maxpitch+1&&s.abcelem.minpitch>=d.abcelem.minpitch-1);if(u&&s.abcelem.minpitch===d.abcelem.minpitch&&s.abcelem.maxpitch===d.abcelem.maxpitch&&d.heads&&d.heads.length>0&&s.heads&&s.heads.length>0&&d.heads[0].c===s.heads[0].c&&(u=!1),u){var h=d.heads&&d.heads.length>0?d.heads[0].realWidth:d.fixed.w;s.adjustedWidth||(s.adjustedWidth=h+s.w),s.w=s.adjustedWidth;for(var _=0;_<s.children.length;_++){var b=s.children[_];b.name.indexOf("accidental")<0&&(b.adjustedWidth||(b.adjustedWidth=b.dx+h),b.dx=b.adjustedWidth)}}}var w=WH(s,l);return a<w&&(e.i===0||s.type!=="bar"||e.children[e.i-1].type!=="part"&&e.children[e.i-1].type!=="tempo")&&(t+=w-a),s.setX(t),e.spacingduration=s.duration,e.minx=t+zH(s),e.i!==e.children.length-1&&(e.minx+=s.minspacing),this.updateNextX(t,n,e),t};El.shiftRight=function(t,n){var e=n.children[n.i];e&&(e.setX(e.x+t),n.minx+=t,n.nextx+=t)};El.updateNextX=function(t,n,e){e.nextx=t+n*Math.sqrt(e.spacingduration*8)};El.updateIndices=function(t){this.layoutEnded(t)||(t.durationindex+=t.children[t.i].duration,t.children[t.i].type==="bar"&&(t.durationindex=Math.round(t.durationindex*64)/64),t.i++)};function WH(t,n){var e=0;return(t.type==="note"||t.type==="bar")&&(e=n),-t.extraw+e}function zH(t){return t.w}t6.exports=El});var r6=et((RCe,i6)=>{var _s=n6();function UH(t){for(var n=0,e=0;e<t.length;e++){var i=t[e];if(i.children.length>0){var r=i.children.length-1,s=i.children[r];if(s.abcelem.el_type==="bar"){var a=s.children[0].x;a>n?n=a:s.children[0].x=n}}}}var qH=function(t,n,e,i,r){var s=1e-7,a=0,l=1e3,d=r;i.startx=d;var u,h=0;for(e&&console.log("init layout",t),u=0;u<i.voices.length;u++)_s.beginLayout(d,i.voices[u]);for(var _=0;!HH(i.voices);){for(h=null,u=0;u<i.voices.length;u++)!_s.layoutEnded(i.voices[u])&&(!h||CC(i.voices[u])<h)&&(h=CC(i.voices[u]));var b=[],w=[];for(u=0;u<i.voices.length;u++){var S=CC(i.voices[u]);S-h>s?w.push(i.voices[u]):b.push(i.voices[u])}_=0;var L=0;for(u=0;u<b.length;u++)_s.getNextX(b[u])>d&&(d=_s.getNextX(b[u]),_=_s.getSpacingUnits(b[u]),L=b[u].spacingduration);a+=_,l=Math.min(l,_),e&&console.log("currentduration: ",h,a,l);var R=void 0;for(u=0;u<b.length;u++){var z=b[u];z.voicenumber===0&&(R=u);var ne=R!==void 0&&b[R].voicenumber!==z.voicenumber?b[R]:void 0;YH(z,ne)||(ne=void 0);var Q=_s.layoutOneItem(d,t,z,n.minPadding,ne),q=Q-d;if(q>0){d=Q;for(var T=0;T<u;T++)_s.shiftRight(q,b[T])}}for(u=0;u<w.length;u++)w[u].spacingduration-=L,_s.updateNextX(d,t,w[u]);for(u=0;u<b.length;u++){var se=b[u];_s.updateIndices(se)}}for(u=0;u<i.voices.length;u++)_s.getNextX(i.voices[u])>d&&(d=_s.getNextX(i.voices[u]),_=_s.getSpacingUnits(i.voices[u]));return UH(i.voices),a+=_,i.setWidth(d),{spacingUnits:a,minSpace:l}};function HH(t){for(var n=0;n<t.length;n++)if(!_s.layoutEnded(t[n]))return!1;return!0}function CC(t){return t.durationindex-(t.children[t.i]&&t.children[t.i].duration>0?0:5e-7)}function YH(t,n){return!t||!t.staff||!t.staff.voices||t.staff.voices.length===0||!n||!n.staff||!n.staff.voices||n.staff.voices.length===0?!1:t.staff.voices[0]===n.staff.voices[0]}i6.exports=qH});var l6=et((jCe,a6)=>{function XH(t,n,e,i,r){var s=t.padding.left,a=0,l,d;for(l=0;l<e.length;l++)e[l].header&&(d=n.calc(e[l].header,"voicefont",""),a=Math.max(a,d.width));if(a=o6(a,i,n),a=o6(a,r,n),a){var u=n.calc("A","voicefont","");a+=u.width}s+=a;var h=0;return h=s6(i,s,h),h=s6(r,s,h),s+h}function o6(t,n,e){if(n){for(var i=0;i<n.length;i++)if(n[i].header){var r=e.calc(n[i].header,"voicefont","");t=Math.max(t,r.width)}}return t}function s6(t,n,e){if(t)for(var i=0;i<t.length;i++)JH(n,t[i]),e=Math.max(e,t[i].getWidth());return e}function JH(t,n){n.x=t}a6.exports=XH});var d6=et((GCe,c6)=>{var QH=K4(),$H=e6(),KH=r6(),ZH=l6(),eY=function(t,n,e,i){var r,s,a=e;for(r=0;r<n.lines.length;r++)s=n.lines[r],s.staff&&(tY(t,e,i,s.staffGroup,n.formatting,r===n.lines.length-1,!1),s.staffGroup.w>a&&(a=s.staffGroup.w));for(r=0;r<n.lines.length;r++)if(s=n.lines[r],s.staffGroup&&s.staffGroup.voices){for(var l=0;l<s.staffGroup.voices.length;l++)QH(s.staffGroup.voices[l]);$H(t,s.staffGroup)}for(r=0;r<n.lines.length;r++)s=n.lines[r],s.staffGroup&&s.staffGroup.setHeight();return a},tY=function(t,n,e,i,r,s,a){for(var l=ZH(t,i.getTextSize,i.voices,i.brace,i.bracket),d=e,u=0;u<8;u++){var h=KH(d,t,a,i,l);if(d=nY(s,r.stretchlast,n+t.padding.left,i.w,d,h.spacingUnits,h.minSpace,t.padding.left+t.padding.right),a&&console.log("setXSpace",u,i.w,d,i.minspace),d===null)break}iY(i.voices)};function nY(t,n,e,i,r,s,a,l){if(t)if(n===void 0){if(i/e<.66)return null}else{var d=1-(i+l)/e,u=d<n;if(!u)return null}if(Math.abs(e-i)<2)return null;var h=s*r,_=i-h;return s>0?(r=(e-_)/s,r*a>50&&(r=50/a),r):null}function iY(t){for(var n=0;n<t.length;n++)for(var e=t[n],i=1;i<e.children.length-1;i++){var r=e.children[i];if(r.abcelem.rest&&(r.abcelem.rest.type==="whole"||r.abcelem.rest.type==="multimeasure")){var s=e.children[i-1],a=e.children[i+1];r.center(s,a)}}}c6.exports=eY});var u6=et((WCe,h6)=>{var Fs=function(n){this.shouldAddClasses=n.shouldAddClasses,this.reset()};Fs.prototype.reset=function(){this.lineNumber=null,this.voiceNumber=null,this.measureNumber=null,this.measureTotalPerLine=[],this.noteNumber=null};Fs.prototype.incrLine=function(){this.lineNumber===null?this.lineNumber=0:this.lineNumber++,this.voiceNumber=null,this.measureNumber=null,this.noteNumber=null};Fs.prototype.incrVoice=function(){this.voiceNumber===null?this.voiceNumber=0:this.voiceNumber++,this.measureNumber=null,this.noteNumber=null};Fs.prototype.isInMeasure=function(){return this.measureNumber!==null};Fs.prototype.newMeasure=function(){this.measureNumber&&(this.measureTotalPerLine[this.lineNumber]=this.measureNumber),this.measureNumber=null,this.noteNumber=null};Fs.prototype.startMeasure=function(){this.measureNumber=0,this.noteNumber=0};Fs.prototype.incrMeasure=function(){this.measureNumber++,this.noteNumber=0};Fs.prototype.incrNote=function(){this.noteNumber++};Fs.prototype.measureTotal=function(){for(var t=0,n=0;n<this.lineNumber;n++)t+=this.measureTotalPerLine[n]?this.measureTotalPerLine[n]:0;return this.measureNumber&&(t+=this.measureNumber),t};Fs.prototype.getCurrent=function(t){return{line:this.lineNumber,measure:this.measureNumber,measureTotal:this.measureTotal(),voice:this.voiceNumber,note:this.noteNumber}};Fs.prototype.generate=function(t){if(!this.shouldAddClasses)return"";var n=[];if(t&&t.length>0&&n.push(t),this.lineNumber!==null&&n.push("l"+this.lineNumber),this.measureNumber!==null&&n.push("m"+this.measureNumber),this.measureNumber!==null&&n.push("mm"+this.measureTotal()),this.voiceNumber!==null&&n.push("v"+this.voiceNumber),t&&(t.indexOf("note")>=0||t.indexOf("rest")>=0||t.indexOf("lyric")>=0)&&this.noteNumber!==null&&n.push("n"+this.noteNumber),n.length>0){n=n.join(" "),n=n.split(" ");for(var e=0;e<n.length;e++)n[e].indexOf("abcjs-")!==0&&n[e].length>0&&(n[e]="abcjs-"+n[e])}return n.join(" ")};h6.exports=Fs});var f6=et((zCe,p6)=>{var wC=function(n,e){this.formatting=n,this.classes=e};wC.prototype.updateFonts=function(t){t.gchordfont&&(this.formatting.gchordfont=t.gchordfont),t.tripletfont&&(this.formatting.tripletfont=t.tripletfont),t.annotationfont&&(this.formatting.annotationfont=t.annotationfont),t.vocalfont&&(this.formatting.vocalfont=t.vocalfont)};wC.prototype.calc=function(t,n){var e;typeof t=="string"?(e=this.formatting[t],e?e={face:e.face,size:Math.round(e.size*4/3),decoration:e.decoration,style:e.style,weight:e.weight,box:e.box}:e={face:"Arial",size:Math.round(12*4/3),decoration:"underline",style:"normal",weight:"normal"}):e={face:t.face,size:Math.round(t.size*4/3),decoration:t.decoration,style:t.style,weight:t.weight,box:t.box};var i=this.formatting.fontboxpadding?this.formatting.fontboxpadding:.1;e.padding=e.size*i;var r={"font-size":e.size,"font-style":e.style,"font-family":e.face,"font-weight":e.weight,"text-decoration":e.decoration,class:this.classes.generate(n)};return{font:e,attr:r}};p6.exports=wC});var g6=et((UCe,m6)=>{var Sp=function(n,e){this.getFontAndAttr=n,this.svg=e};Sp.prototype.updateFonts=function(t){this.getFontAndAttr.updateFonts(t)};Sp.prototype.attr=function(t,n){return this.getFontAndAttr.calc(t,n)};Sp.prototype.calc=function(t,n,e,i){var r;typeof n=="string"?r=this.attr(n,e):r={font:{face:n.face,size:n.size,decoration:n.decoration,style:n.style,weight:n.weight},attr:{"font-size":n.size,"font-style":n.style,"font-family":n.face,"font-weight":n.weight,"text-decoration":n.decoration,class:this.getFontAndAttr.classes.generate(e)}};var s=this.svg.getTextSize(t,r.attr,i);return r.font.box?{height:s.height+r.font.padding*4,width:s.width+r.font.padding*4}:s};Sp.prototype.baselineToCenter=function(t,n,e,i,r){var s=this.calc(t,n,e).height,a=this.attr(n,e).font.size;return s*.5+(r-i-2)*a};m6.exports=Sp});var hc=et((qCe,_6)=>{var rY=function(){for(var t=0,n,e=arguments[t++],i=[],r,s,a,l;e;){if(r=/^[^\x25]+/.exec(e))i.push(r[0]);else if(r=/^\x25{2}/.exec(e))i.push("%");else if(r=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)){if((n=arguments[r[1]||t++])==null||n==null)throw"Too few arguments.";if(/[^s]/.test(r[7])&&typeof n!="number")throw"Expecting number but found "+typeof n;switch(r[7]){case"b":n=n.toString(2);break;case"c":n=String.fromCharCode(n);break;case"d":n=parseInt(n);break;case"e":n=r[6]?n.toExponential(r[6]):n.toExponential();break;case"f":n=r[6]?parseFloat(n).toFixed(r[6]):parseFloat(n);break;case"o":n=n.toString(8);break;case"s":n=(n=String(n))&&r[6]?n.substring(0,r[6]):n;break;case"u":n=Math.abs(n);break;case"x":n=n.toString(16);break;case"X":n=n.toString(16).toUpperCase();break}n=/[def]/.test(r[7])&&r[2]&&n>0?"+"+n:n,a=r[3]?r[3]=="0"?"0":r[3].charAt(1):" ",l=r[5]-String(n).length,s=r[5]?str_repeat(a,l):"",i.push(r[4]?n+s:s+n)}else throw"Huh ?!";e=e.substring(r[0].length)}return i.join("")};_6.exports=rY});var ya=et((HCe,y6)=>{function oY(t){return parseFloat(t.toFixed(2))}y6.exports=oY});var Tl=et((YCe,b6)=>{var v6=ya();function sY(t,n,e){var i=n.y;if(n.lane){var r=n.dim.font.size*.25;i+=(n.dim.font.size+r)*n.lane}var s;n.dim?(s=n.dim,s.attr.class=n.klass):s=t.controller.getFontAndAttr.calc(n.type,n.klass),n.anchor&&(s.attr["text-anchor"]=n.anchor),s.attr.x=n.x,s.attr.y=i,n.centerVertically||(s.attr.y+=s.font.size),n.type==="debugfont"&&(console.log("Debug msg: "+n.text),s.attr.stroke="#ff0000"),n.cursor&&(s.attr.cursor=n.cursor);var a=n.text.replace(/\n\n/g,`
 
`);a=a.replace(/^\n/,`\xA0
`),s.font.box&&(e||t.paper.openGroup({klass:s.attr.class,fill:t.foregroundColor,"data-name":n.name}),s.attr["text-anchor"]==="end"?s.attr.x-=s.font.padding:s.attr["text-anchor"]==="start"&&(s.attr.x+=s.font.padding),s.attr.y+=s.font.padding,delete s.attr.class),n.noClass&&delete s.attr.class,s.attr.x=v6(s.attr.x),s.attr.y=v6(s.attr.y),n.name&&(s.attr["data-name"]=n.name);var l=t.paper.text(a,s.attr);if(s.font.box){var d=l.getBBox(),u=0;s.attr["text-anchor"]==="middle"?u=d.width/2+s.font.padding:s.attr["text-anchor"]==="end"&&(u=d.width+s.font.padding*2);var h=0;n.centerVertically&&(h=d.height-s.font.padding),t.paper.rect({"data-name":"box",x:Math.round(n.x-u),y:Math.round(i-h),width:Math.round(d.width+s.font.padding*2),height:Math.round(d.height+s.font.padding*2)}),e||(l=t.paper.closeGroup())}return l}b6.exports=sY});var w6=et((XCe,C6)=>{var __=hc(),va=No(),aY=Tl();function lY(t,n,e){var i=n.startVoice.staff.absoluteY-va.STEP*10;return n.endVoice&&n.endVoice.staff?n.endY=n.endVoice.staff.absoluteY-va.STEP*2:n.lastContinuedVoice&&n.lastContinuedVoice.staff?n.endY=n.lastContinuedVoice.staff.absoluteY-va.STEP*2:n.endY=n.startVoice.staff.absoluteY-va.STEP*2,hY(t,n.x,i,n.endY,n.type,n.header,e)}function cY(t,n,e,i,r){n+=va.STEP;var s=va.STEP*.75,a=va.STEP*.75,l=i-e,d=__("M %f %f l %f %f l %f %f l %f %f z",n,e-a,0,l+a*2,s,0,0,-(l+a*2)),u=va.STEP*2,h=va.STEP;return d+=__("M %f %f q %f %f %f %f q %f %f %f %f z",n+s,e-a,u*.6,h*.2,u,-h,-u*.1,h*.3,-u,h+va.STEP),d+=__("M %f %f q %f %f %f %f q %f %f %f %f z",n+s,e+a+l,u*.6,-h*.2,u,h,-u*.1,-h*.3,-u,-h-va.STEP),t.paper.path({path:d,stroke:t.foregroundColor,fill:t.foregroundColor,class:t.controller.classes.generate(r),"data-name":r})}function dY(t,n,e,i,r){var s=i-e,a=x6(n,e,[7.5,-8,21,0,18.5,-10.5,7.5],[0,s/5.5,s/3.14,s/2,s/2.93,s/4.88,0]);return a+=x6(n,e,[0,17.5,-7.5,6.6,-5,20,0],[s/2,s/1.46,s/1.22,s,s/1.19,s/1.42,s/2]),t.paper.path({path:a,stroke:t.foregroundColor,fill:t.foregroundColor,class:t.controller.classes.generate(r),"data-name":r})}function x6(t,n,e,i){return __("M %f %f C %f %f %f %f %f %f C %f %f %f %f %f %f z",t+e[0],n+i[0],t+e[1],n+i[1],t+e[2],n+i[2],t+e[3],n+i[3],t+e[4],n+i[4],t+e[5],n+i[5],t+e[6],n+i[6])}var hY=function(t,n,e,i,r,s,a){var l;if(s){t.paper.openGroup({klass:t.controller.classes.generate("staff-extra voice-name"),"data-name":r});var d=e+(i-e)/2;d=d-t.controller.getTextSize.baselineToCenter(s,"voicefont","staff-extra voice-name",0,1),aY(t,{x:t.padding.left,y:d,text:s,type:"voicefont",klass:"staff-extra voice-name",anchor:"start",centerVertically:!0})}return r==="brace"?l=dY(t,n,e,i,r):r==="bracket"&&(l=cY(t,n,e,i,r)),s&&(l=t.paper.closeGroup()),a.wrapSvgEl({el_type:r,startChar:-1,endChar:-1},l),l};C6.exports=lY});var Xh=et((JCe,M6)=>{function uY(t,n,e){var i=t.paper.path(n);return i}M6.exports=uY});var P6=et((QCe,S6)=>{var pY=hc(),fY=Xh(),mY=ya();function gY(t,n,e){(!n.anchor1||!n.anchor2||!n.anchor1.heads||!n.anchor2.heads||n.anchor1.heads.length===0||n.anchor2.heads.length===0)&&window.console.error("Glissando Element not set.");var i=4,r=t.calcY(n.anchor1.heads[0].pitch),s=t.calcY(n.anchor2.heads[0].pitch),a=n.anchor1.x+n.anchor1.w/2,l=n.anchor2.x+n.anchor2.w/2,d=_Y(a,r,l,s),u=n.anchor1.w/2+i,h=n.anchor2.w/2+i,_=yY(a,r,l,s),b=MC(r,_,u),w=MC(s,_,-h),S=vY(d-u-h),L=SY(t,a+u,b,S,_);return e.wrapSvgEl({el_type:"glissando",startChar:-1,endChar:-1},L),[L]}function _Y(t,n,e,i){var r=e-t,s=i-n;return Math.sqrt(r*r+s*s)}function yY(t,n,e,i){return(i-n)/(e-t)}function MC(t,n,e){return mY(t+e*n)}function vY(t){var n=5;return Math.max(2,Math.floor((t-n*2)/6))}var bY=[[3.5,-4.8]],xY=[[1.5,-1],[.3,-.3],[-3.5,3.8]],CY=[[-1.5,2]],wY=[[3,4],[3,-4]],MY=[[-3,4],[-3,-4]];function Pp(t,n){for(var e="",i=0;i<t.length;i++)e+="l"+t[i][0]+" "+MC(t[i][1],n,t[i][0]);return e}var SY=function(t,n,e,i,r){var s=pY("M %f %f",n,e);s+=Pp(bY,r);var a;for(a=0;a<i;a++)s+=Pp(wY,r);for(s+=Pp(xY,r),a=0;a<i;a++)s+=Pp(MY,r);return s+=Pp(CY,r)+"z",fY(t,{path:s,highlight:"stroke",stroke:t.foregroundColor,class:t.controller.classes.generate("decoration"),"data-name":"glissando"})};S6.exports=gY});var T6=et(($Ce,E6)=>{var PY=hc(),kY=Xh(),Jh=ya();function EY(t,n,e){n.pitch===void 0&&window.console.error("Crescendo Element y-coordinate not set.");var i=t.calcY(n.pitch)+4,r=8,s=n.anchor1?n.anchor1.x:0,a=n.anchor2?n.anchor2.x:800,l;return n.dir==="<"?l=k6(t,i+r/2,i,i+r/2,i+r,s,a):l=k6(t,i,i+r/2,i+r,i+r/2,s,a),e.wrapSvgEl({el_type:"dynamicDecoration",startChar:-1,endChar:-1},l),[l]}var k6=function(t,n,e,i,r,s,a){n=Jh(n),e=Jh(e),i=Jh(i),r=Jh(r),s=Jh(s),a=Jh(a);var l=PY("M %f %f L %f %f M %f %f L %f %f",s,n,a,e,s,i,a,r);return kY(t,{path:l,highlight:"stroke",stroke:t.foregroundColor,class:t.controller.classes.generate("dynamics decoration"),"data-name":"dynamics"})};E6.exports=EY});var y_=et((KCe,D6)=>{var A6=ya();function kp(){this.ingroup=!1}kp.prototype.beginGroup=function(t,n){this.paper=t,this.controller=n,this.path=[],this.lastM=[0,0],this.ingroup=!0,this.paper.openGroup()};kp.prototype.isInGroup=function(){return this.ingroup};kp.prototype.addPath=function(t){if(t=t||[],t.length!==0){t[0][0]="m",t[0][1]=A6(t[0][1]-this.lastM[0]),t[0][2]=A6(t[0][2]-this.lastM[1]),this.lastM[0]+=t[0][1],this.lastM[1]+=t[0][2],this.path.push(t[0]);for(var n=1,e=t.length;n<e;n++)t[n][0]==="m"&&(this.lastM[0]+=t[n][1],this.lastM[1]+=t[n][2]),this.path.push(t[n])}};kp.prototype.endGroup=function(t,n){this.ingroup=!1;for(var e="",i=0;i<this.path.length;i++)e+=this.path[i].join(" ");this.path=[];var r=this.paper.closeGroup();return r&&(r.setAttribute("class",this.controller.classes.generate(t)),r.setAttribute("fill",this.controller.renderer.foregroundColor),r.setAttribute("stroke","none"),r.setAttribute("data-name",n)),r};var TY=new kp;D6.exports=TY});var SC=et((ZCe,F6)=>{var I6=Tl(),Qh=Sl(),O6=y_();function AY(t,n,e,i,r){var s,a;if(!i)return null;if(i.length>1&&i.indexOf(".")<0){var l=O6.isInGroup()?"":r.klass;t.paper.openGroup({"data-name":r.name,klass:l});for(var d=0,u=0;u<i.length;u++){var h=i.charAt(u);a=Qh.getYCorr(h),s=Qh.printSymbol(n+d,t.calcY(e+a),h,t.paper,{stroke:r.stroke,fill:r.fill}),s?u<i.length-1&&(d+=DY(h,i.charAt(u+1),Qh.getSymbolWidth(h))):I6(t,{x:n,y:t.y,text:"no symbol:"+i,type:"debugfont",klass:"debug-msg",anchor:"start"},!1)}var _=t.paper.closeGroup();return _}else return a=Qh.getYCorr(i),O6.isInGroup()?s=Qh.printSymbol(n,t.calcY(e+a),i,t.paper,{"data-name":r.name}):s=Qh.printSymbol(n,t.calcY(e+a),i,t.paper,{klass:r.klass,stroke:r.stroke,fill:r.fill,"data-name":r.name}),s||(I6(t,{x:n,y:t.y,text:"no symbol:"+i,type:"debugfont",klass:"debug-msg",anchor:"start"},!1),null)}function DY(t,n,e){var i=e;return t==="f"&&n==="f"&&(i=i*2/3),t==="p"&&n==="p"&&(i=i*5/6),t==="f"&&n==="z"&&(i=i*5/8),i}F6.exports=AY});var L6=et((ewe,B6)=>{var IY=SC();function OY(t,n,e){n.pitch===void 0&&window.console.error("Dynamic Element y-coordinate not set.");var i=1,r=1,s=IY(t,n.anchor.x,n.pitch,n.dec,{scalex:i,scaley:r,klass:t.controller.classes.generate("decoration dynamics"),fill:t.foregroundColor,stroke:"none",name:"dynamics"});return e.wrapSvgEl({el_type:"dynamicDecoration",startChar:-1,endChar:-1,decoration:n.dec},s),[s]}B6.exports=OY});var V6=et((twe,N6)=>{var FY=hc(),BY=Tl(),LY=Xh(),v_=ya();function NY(t,n,e){t.paper.openGroup({klass:t.controller.classes.generate("triplet "+n.durationClass),"data-name":"triplet"}),n.hasBeam||VY(t,n.anchor1.x,n.startNote,n.anchor2.x+n.anchor2.w,n.endNote),BY(t,{x:n.xTextPos,y:t.calcY(n.yTextPos-1),text:""+n.number,type:"tripletfont",anchor:"middle",centerVertically:!0,noClass:!0,name:""+n.number},!0);var i=t.paper.closeGroup();return e.wrapSvgEl({el_type:"triplet",startChar:-1,endChar:-1},i),i}function b_(t,n,e,i){return FY("M %f %f L %f %f",v_(t),v_(n),v_(e),v_(i))}function VY(t,n,e,i,r){e=t.calcY(e),r=t.calcY(r);var s=5,a="";a+=b_(n,e,n,e+s),a+=b_(i,r,i,r+s);var l=n+(i-n)/2,d=8,u=(r-e)/(i-n),h=l-d,_=e+(h-n)*u;a+=b_(n,e,h,_);var b=l+d,w=e+(b-n)*u;a+=b_(b,w,i,r),LY(t,{path:a,stroke:t.foregroundColor,"data-name":"triplet-bracket"})}N6.exports=NY});var j6=et((nwe,R6)=>{var PC=hc(),RY=Tl(),jY=Xh(),yd=ya();function GY(t,n,e,i,r){n.pitch===void 0&&window.console.error("Ending Element y-coordinate not set.");var s=yd(t.calcY(n.pitch)),a=20,l="";n.anchor1&&(e=yd(n.anchor1.x+n.anchor1.w),l+=PC("M %f %f L %f %f ",e,s,e,yd(s+a))),n.anchor2&&(i=yd(n.anchor2.x),l+=PC("M %f %f L %f %f ",i,s,i,yd(s+a))),l+=PC("M %f %f L %f %f ",e,s,i,s),t.paper.openGroup({klass:t.controller.classes.generate("ending"),"data-name":"ending"}),jY(t,{path:l,stroke:t.foregroundColor,fill:t.foregroundColor,"data-name":"line"}),n.anchor1&&RY(t,{x:yd(e+5),y:yd(t.calcY(n.pitch-.5)),text:n.text,type:"repeatfont",klass:"ending",anchor:"start",noClass:!0,name:n.text});var d=t.paper.closeGroup();return r.wrapSvgEl({el_type:"ending",startChar:-1,endChar:-1},d),[d]}R6.exports=GY});var z6=et((iwe,W6)=>{var G6=hc(),Bs=ya();function WY(t,n,e,i,r){zY(n,e,i);var s="";n.anchor1?s+="abcjs-start-m"+n.anchor1.parent.counters.measure+"-n"+n.anchor1.parent.counters.note:s+="abcjs-start-edge",n.anchor2?s+=" abcjs-end-m"+n.anchor2.parent.counters.measure+"-n"+n.anchor2.parent.counters.note:s+=" abcjs-end-edge",n.hint&&(s="abcjs-hint");var a=n.fixedY?1.5:0,l=UY(t,n.startX,n.endX,n.startY+a,n.endY+a,n.above,s,n.isTie,n.dotted);return r.wrapSvgEl({el_type:"slur",startChar:-1,endChar:-1},l),[l]}var zY=function(t,n,e){!t.anchor1||!t.anchor2||t.anchor1.pitch===t.anchor2.pitch&&t.internalNotes.length===0?t.isTie=!0:t.isTie=!1,t.isTie?(t.calcTieDirection(),t.calcX(n,e),t.calcTieY()):(t.calcSlurDirection(),t.calcX(n,e),t.calcSlurY()),t.avoidCollisionAbove()},UY=function(t,n,e,i,r,s,a,l,d){var u=l?1.2:1.5;n=Bs(n+6),e=Bs(e+4),i=i+(s?u:-u),r=r+(s?u:-u);var h=Bs(t.calcY(i)),_=Bs(t.calcY(r)),b=e-n,w=_-h,S=Math.sqrt(b*b+w*w),L=b/S,R=w/S,z=S/3.5,ne=l?10:25,Q=(s?-1:1)*Math.min(ne,Math.max(4,z)),q=Bs(n+z*L-Q*R),T=Bs(h+z*R+Q*L),se=Bs(e-z*L-Q*R),_e=Bs(_-z*R+Q*L),Me=2;a?a+=" slur":a="slur",a+=l?" tie":" legato";var me;if(d){a+=" dotted";var K=G6("M %f %f C %f %f %f %f %f %f",n,h,q,T,se,_e,e,_);me=t.paper.path({path:K,stroke:t.foregroundColor,fill:"none","stroke-dasharray":"5 5",class:t.controller.classes.generate(a),"data-name":l?"tie":"slur"})}else{var ue=G6("M %f %f C %f %f %f %f %f %f C %f %f %f %f %f %f z",n,h,q,T,se,_e,e,_,Bs(se-Me*R),Bs(_e+Me*L),Bs(q-Me*R),Bs(T+Me*L),n,h);me=t.paper.path({path:ue,stroke:"none",fill:t.foregroundColor,class:t.controller.classes.generate(a),"data-name":l?"tie":"slur"})}return me};W6.exports=WY});var Y6=et((rwe,H6)=>{var qY=Xh(),$h=ya();function HY(t,n){if(n.beams.length!==0){for(var e="",i=0;i<n.beams.length;i++){var r=n.beams[i];if(r.split){for(var s=YY(t,r.startX,r.startY,r.endX,r.endY),a=[],l=0;l<r.split.length;l+=2)a.push([r.split[l],r.split[l+1]]);for(l=0;l<a.length;l++){var d=q6(r.startX,r.startY,s,a[l][0]),u=q6(r.startX,r.startY,s,a[l][1]);e+=U6(t,a[l][0],d,a[l][1],u,r.dy)}}else e+=U6(t,r.startX,r.startY,r.endX,r.endY,r.dy)}var h=("abcjs-d"+n.duration).replace(/\./g,"-"),_=t.controller.classes.generate("beam-elem "+h),b=qY(t,{path:e,stroke:"none",fill:t.foregroundColor,class:_});return[b]}}function U6(t,n,e,i,r,s){e=$h(t.calcY(e)),r=$h(t.calcY(r)),n=$h(n),i=$h(i);var a=$h(e+s),l=$h(r+s);return"M"+n+" "+e+" L"+i+" "+r+"L"+i+" "+l+" L"+n+" "+a+"z"}function YY(t,n,e,i,r){return(r-e)/(i-n)}function q6(t,n,e,i){var r=i-t;return n+r*e}H6.exports=HY});var kC=et((owe,X6)=>{var XY=y_(),Kh=ya();function JY(t,n,e,i,r,s,a){if(e<0||i<r){var l=Kh(r);r=Kh(i),i=l}else i=Kh(i),r=Kh(r);n=Kh(n);for(var d=Kh(n+e),u=[["M",n,i],["L",n,r],["L",d,r],["L",d,i],["z"]],h={path:""},_=0;_<u.length;_++)h.path+=u[_].join(" ");return s&&(h.class=s),a&&(h["data-name"]=a),XY.isInGroup()||(h.stroke="none",h.fill=t.foregroundColor),t.paper.pathToBack(h)}X6.exports=JY});var Q6=et((swe,J6)=>{var QY=hc(),x_=ya();function $Y(t,n,e,i,r,s,a){a||(a=.35);var l=t.foregroundColor;n=x_(n),e=x_(e);var d=x_(i-a),u=x_(i+a),h=QY("M %f %f L %f %f L %f %f L %f %f z",n,d,e,d,e,u,n,u),_={path:h,stroke:"none",fill:l};s&&(_["data-name"]=s),r&&(_.class=r);var b=t.paper.pathToBack(_);return b}J6.exports=$Y});var EC=et((awe,$6)=>{var KY=Q6();function ZY(t,n,e,i,r,s,a){var l=t.calcY(i);return KY(t,n,e,l,r,s,a)}$6.exports=ZY});var TC=et((lwe,Z6)=>{var Al=Tl(),K6=kC(),eX=EC(),tX=SC();function nX(t,n,e){n.pitch===void 0&&window.console.error(n.type+" Relative Element y-coordinate not set.");var i=t.calcY(n.pitch);switch(n.type){case"symbol":if(n.c===null)return null;var r="symbol";n.klass&&(r+=" "+n.klass),n.graphelem=tX(t,n.x,n.pitch,n.c,{scalex:n.scalex,scaley:n.scaley,klass:t.controller.classes.generate(r),name:n.name});break;case"debug":n.graphelem=Al(t,{x:n.x,y:t.calcY(15),text:""+n.c,type:"debugfont",klass:t.controller.classes.generate("debug-msg"),anchor:"start",centerVertically:!1,dim:n.dim},!1);break;case"tabNumber":var s="middle",a="tabnumberfont",l="tab-number";n.isGrace&&(a="tabgracefont",i+=2.5,l="tab-grace"),n.graphelem=Al(t,{x:n.x,y:i,text:""+n.c,type:a,klass:t.controller.classes.generate(l),anchor:s,centerVertically:!1,dim:n.dim,cursor:"default"},!1);break;case"barNumber":n.graphelem=Al(t,{x:n.x,y:i,text:""+n.c,type:"measurefont",klass:t.controller.classes.generate("bar-number"),anchor:"middle",dim:n.dim,name:"bar-number"},!0);break;case"lyric":n.graphelem=Al(t,{x:n.x,y:i,text:n.c,type:"vocalfont",klass:t.controller.classes.generate("lyric"),anchor:"middle",dim:n.dim,name:"lyric"},!1);break;case"chord":n.graphelem=Al(t,{x:n.x,y:i,text:n.c,type:"gchordfont",klass:t.controller.classes.generate("chord"),anchor:"middle",dim:n.dim,lane:n.getLane(),name:"chord"},!1);break;case"decoration":n.graphelem=Al(t,{x:n.x,y:i+6,text:n.c,type:"annotationfont",klass:t.controller.classes.generate("annotation"),anchor:"middle",centerVertically:!0,dim:n.dim},!1);break;case"text":n.graphelem=Al(t,{x:n.x,y:i,text:n.c,type:"annotationfont",klass:t.controller.classes.generate("annotation"),anchor:"start",centerVertically:n.centerVertically,dim:n.dim,lane:n.getLane(),name:"annotation"},!1);break;case"multimeasure-text":n.graphelem=Al(t,{x:n.x+n.w/2,y:i,text:n.c,type:"tempofont",klass:t.controller.classes.generate("rest"),anchor:"middle",centerVertically:!1,dim:n.dim},!1);break;case"part":n.graphelem=Al(t,{x:n.x,y:i,text:n.c,type:"partsfont",klass:t.controller.classes.generate("part"),anchor:"start",dim:n.dim,name:n.c},!0);break;case"bar":n.graphelem=K6(t,n.x,n.linewidth,i,e||t.calcY(n.pitch2),null,"bar");break;case"stem":n.graphelem=K6(t,n.x,n.linewidth,i,t.calcY(n.pitch2),"abcjs-stem","stem");break;case"ledger":n.graphelem=eX(t,n.x,n.x+n.w,n.pitch,"abcjs-ledger","ledger");break}return n.scalex!==1&&n.graphelem&&iX(t.paper,n.graphelem,n.scalex,n.scaley,n.x,i),n.graphelem}function iX(t,n,e,i,r,s){t.setAttributeOnElement(n,{style:"transform:scale("+e+","+i+");transform-origin:"+r+"px "+s+"px;"})}Z6.exports=nX});var tD=et((cwe,eD)=>{var rX=TC(),AC=Tl();function oX(t,n){var e=n.x;n.pitch===void 0&&window.console.error("Tempo Element y-coordinate not set."),n.tempo.el_type="tempo";var i=2,r=t.calcY(n.pitch)+2,s,a;if(n.tempo.preString){s=AC(t,{x:e,y:r,text:n.tempo.preString,type:"tempofont",klass:"abcjs-tempo",anchor:"start",noClass:!0,"dominant-baseline":"ideographic",name:"pre"},!0),a=t.controller.getTextSize.calc(n.tempo.preString,"tempofont","tempo",s);var l=a.width,d=l/n.tempo.preString.length;e+=l+d}if(n.note){n.note.setX(e);for(var u=0;u<n.note.children.length;u++)rX(t,n.note.children[u],e);e+=n.note.w+5;var h="= "+n.tempo.bpm;s=AC(t,{x:e,y:r,text:h,type:"tempofont",klass:"abcjs-tempo",anchor:"start",noClass:!0,name:"beats"}),a=t.controller.getTextSize.calc(h,"tempofont","tempo",s);var _=a.width,b=_/h.length;e+=_+b}n.tempo.postString&&AC(t,{x:e,y:r,text:n.tempo.postString,type:"tempofont",klass:"abcjs-tempo",anchor:"start",noClass:!0,name:"post"},!0)}eD.exports=oX});var oD=et((dwe,rD)=>{var sX=tD(),aX=TC(),lX=No(),nD=fp(),iD=y_();function cX(t,n,e,i,r){if(!n.invisible){var s=n.children.length>0&&n.children[0].type==="TempoElement";n.elemset=[],iD.beginGroup(t.paper,t.controller);for(var a=0;a<n.children.length;a++){var l=n.children[a];switch(l.type){case"TempoElement":sX(t,l);break;default:aX(t,l,e)}}var d=n.type;if((n.type==="note"||n.type==="rest")&&(n.counters=t.controller.classes.getCurrent(),d+=" d"+Math.round(n.durationClass*1e3)/1e3,d=d.replace(/\./g,"-"),n.abcelem.pitches))for(var u=0;u<n.abcelem.pitches.length;u++)d+=" p"+n.abcelem.pitches[u].pitch;var h=iD.endGroup(d,n.type);if(h)if(s)n.startChar=n.abcelem.startChar,n.endChar=n.abcelem.endChar,i.add(n,h,!1,r);else{n.elemset.push(h);var _=!1;(n.type==="note"||n.type==="tabNumber")&&(_=!0),i.add(n,h,_,r)}else n.elemset.length>0&&i.add(n,n.elemset[0],n.type==="note",r);if(n.klass&&nD(n.elemset,"mark","","#00ff00"),n.hint&&nD(n.elemset,"abcjs-hint","",null),n.abcelem.abselem=n,n.heads&&n.heads.length>0){n.notePositions=[];for(var b=0;b<n.heads.length;b++)n.notePositions.push({x:n.heads[b].x+n.heads[b].w/2,y:r.zero-n.heads[b].pitch*lX.STEP})}}}rD.exports=cX});var lD=et((hwe,aD)=>{var dX=P6(),hX=T6(),uX=L6(),pX=V6(),fX=j6(),mX=z6(),gX=Y6(),_X=Tl(),sD=oD();function yX(t,n,e,i,r){var s=n.w-1;if(t.staffbottom=n.staff.bottom,n.header){var a=_X(t,{x:t.padding.left,y:t.calcY(n.headerPosition),text:n.header,type:"voicefont",klass:"staff-extra voice-name",anchor:"start",centerVertically:!0,name:"voice-name"},!0);i.wrapSvgEl({el_type:"voiceName",startChar:-1,endChar:-1,text:n.header},a)}var l,d,u=!1;for(l=0;l<n.children.length;l++){d=n.children[l],(d.type==="note"||d.type==="rest")&&(u=!0);var h=!1;switch(d.type!=="staff-extra"&&!t.controller.classes.isInMeasure()&&(t.controller.classes.startMeasure(),h=!0),d.type){default:n.staff.isTabStaff&&(d.invisible=!1,d.type=="bar"&&d.abcelem.lastBar&&(e=n.topLine)),sD(t,d,n.barto||l===n.children.length-1?e:0,i,r)}(d.type==="note"||vX(d))&&t.controller.classes.incrNote(),d.type==="bar"&&!h&&u&&t.controller.classes.incrMeasure()}for(t.controller.classes.startMeasure(),l=0;l<n.beams.length;l++){var _=n.beams[l];_==="bar"?t.controller.classes.incrMeasure():gX(t,_,i)}for(t.controller.classes.startMeasure(),l=0;l<n.otherchildren.length;l++)if(d=n.otherchildren[l],d==="bar")t.controller.classes.incrMeasure();else switch(d.type){case"GlissandoElem":d.elemset=dX(t,d,i);break;case"CrescendoElem":d.elemset=hX(t,d,i);break;case"DynamicDecoration":d.elemset=uX(t,d,i);break;case"TripletElem":pX(t,d,i);break;case"EndingElem":d.elemset=fX(t,d,n.startx+10,s,i);break;case"TieElem":d.elemset=mX(t,d,n.startx+10,s,i);break;default:console.log(d),sD(t,d,n.startx+10,s,i,r)}}function vX(t){return t.type!=="rest"?!1:!!(t.abcelem&&t.abcelem.rest&&t.abcelem.rest.type!=="spacer")}aD.exports=yX});var hD=et((uwe,dD)=>{var cD=EC();function bX(t,n,e,i,r,s){var a="abcjs-top-line",l=2;r&&(l=r),t.paper.openGroup({prepend:!0,klass:t.controller.classes.generate("abcjs-staff")});var d=0,u=0;if(i===1)cD(t,n,e,6,a),d=t.calcY(10),u=t.calcY(2);else for(var h=i-1;h>=0;h--){var _=(h+1)*l;u=t.calcY(_),d===0&&(d=u),cD(t,n,e,_,a,null,s),a=void 0}return t.paper.closeGroup(),[d,u]}dD.exports=bX});var pD=et((pwe,uD)=>{function xX(t,n,e){var i=t.paper.rectBeneath(n);return e&&t.paper.text(e,{x:0,y:n.y+7,"text-anchor":"start","font-size":"14px",fill:"rgba(0,0,255,.4)",stroke:"rgba(0,0,255,.4)"}),i}uD.exports=xX});var mD=et((fwe,fD)=>{function CX(t,n){var e="rgba(0,0,0,255)",i="rgba(0,0,0,0)",r=Math.round(t.y),s=t.controller.width,a=(s-n)/2,l=a+n,d="M "+a+" "+r+" L "+l+" "+r+" L "+l+" "+(r+1)+" L "+a+" "+(r+1)+" L "+a+" "+r+" z";t.paper.pathToBack({path:d,stroke:i,fill:e,class:t.controller.classes.generate("defined-text")})}fD.exports=CX});var DC=et((mwe,gD)=>{var wX=mD(),MX=Tl();function SX(t,n,e){for(var i=0;i<n.rows.length;i++){var r=n.rows[i];if(r.absmove)t.absolutemoveY(r.absmove);else if(r.move)t.moveY(r.move);else if(r.text){var s=r.left?r.left:0,a=MX(t,{x:s,y:t.y,text:r.text,type:r.font,klass:r.klass,name:r.name,anchor:r.anchor});r.absElemType&&e.wrapSvgEl({el_type:r.absElemType,name:r.name,startChar:r.startChar,endChar:r.endChar,text:r.text},a)}else if(r.separator)wX(t,r.separator);else if(r.startGroup)t.paper.openGroup({klass:r.klass,"data-name":r.name});else if(r.endGroup){var l=t.paper.closeGroup();r.absElemType&&e.wrapSvgEl({el_type:r.absElemType,name:r.name,startChar:r.startChar,endChar:r.endChar,text:""},l)}}}gD.exports=SX});var vD=et((gwe,yD)=>{var Zh=No(),PX=w6(),kX=lD(),EX=hD(),C_=pD(),TX=kC(),AX=DC();function DX(t,n,e,i){for(var r,s=t.y,a=0;a<n.staffs.length;a++){var l=n.staffs[a];t.moveY(Zh.STEP,l.top),l.absoluteY=t.y,t.showDebug&&(t.showDebug.indexOf("box")>=0&&IX(t,n.voices,l.voices),t.showDebug.indexOf("grid")>=0&&(t.paper.dottedLine({x1:t.padding.left,x2:t.padding.left+t.controller.width,y1:s,y2:s,stroke:"#0000ff"}),C_(t,{x:t.padding.left,y:t.calcY(l.originalTop),width:t.controller.width,height:t.calcY(l.originalBottom)-t.calcY(l.originalTop),fill:t.foregroundColor,stroke:t.foregroundColor,"fill-opacity":.1,"stroke-opacity":.1}),r=0,q(l,"chordHeightAbove"),q(l,"chordHeightBelow"),q(l,"dynamicHeightAbove"),q(l,"dynamicHeightBelow"),q(l,"endingHeightAbove"),q(l,"lyricHeightAbove"),q(l,"lyricHeightBelow"),q(l,"partHeightAbove"),q(l,"tempoHeightAbove"),q(l,"volumeHeightAbove"),q(l,"volumeHeightBelow"))),t.moveY(Zh.STEP,-l.bottom),t.showDebug&&t.showDebug.indexOf("grid")>=0&&t.paper.dottedLine({x1:t.padding.left,x2:t.padding.left+t.controller.width,y1:t.y,y2:t.y,stroke:"#0000aa"})}for(var d,u,h=2,_=0,b=0;b<n.voices.length;b++){var w=n.voices[b].staff,S=n.voices[b].tabNameInfos;if(t.y=w.absoluteY,t.controller.classes.incrVoice(),!n.voices[b].duplicate){if(d||(d=t.calcY(10)),u=t.calcY(h),w.lines!==0){w.linePitch&&(h=w.linePitch),t.controller.classes.newMeasure();var L=EX(t,n.startx,n.w,w.lines,w.linePitch,w.dy);u=L[1],w.bottomLine=u,w.topLine=L[0],w.hasTab&&(_=w.topLine),w.hasStaff&&(_=w.hasStaff.topLine,n.voices[b].barto=!0,n.voices[b].topLine=d)}_D(t,w.absoluteY,n.brace,b,e),_D(t,w.absoluteY,n.bracket,b,e)}kX(t,n.voices[b],_,e,{top:s,zero:t.y,height:n.height*Zh.STEP});var R=0;if(S){var z={rows:[]};z.rows.push({absmove:u+2});var ne=8;z.rows.push({left:n.startx+ne,text:S.name,font:"tablabelfont",klass:"text instrument-name",anchor:"start"}),z.rows.push({move:S.textSize.height}),AX(t,z),R=S.textSize.height}t.controller.classes.newMeasure(),n.voices[b].duplicate||(_=t.calcY(2+R))}t.controller.classes.newMeasure();var Q=n.staffs.length;Q>1&&(d=n.staffs[0].topLine,u=n.staffs[Q-1].bottomLine,TX(t,n.startx,.6,d,u,null)),t.y=s;function q(T,se){var _e=["rgb(207,27,36)","rgb(168,214,80)","rgb(110,161,224)","rgb(191,119,218)","rgb(195,30,151)","rgb(31,170,177)","rgb(220,166,142)"];if(T.positionY[se]){var Me=T.specialY[se]*Zh.STEP;se==="chordHeightAbove"&&T.specialY.chordLines&&T.specialY.chordLines.above&&(Me*=T.specialY.chordLines.above),se==="chordHeightBelow"&&T.specialY.chordLines&&T.specialY.chordLines.below&&(Me*=T.specialY.chordLines.below),C_(t,{x:t.padding.left,y:t.calcY(T.positionY[se]),width:t.controller.width,height:Me,fill:_e[r],stroke:_e[r],"fill-opacity":.4,"stroke-opacity":.4},se.substr(0,4)),r+=1,r>6&&(r=0)}}}function _D(t,n,e,i,r){if(e)for(var s=0;s<e.length;s++)e[s].isStartVoice(i)&&(e[s].startY=n-Zh.STEP*10,e[s].elemset=PX(t,e[s],r))}function IX(t,n,e){for(var i=0;i<e.length;i++)for(var r=n[e[i]].children,s=0;s<r.length;s++){var a=r[s],l=a.getFixedCoords();if(!(a.invisible||l.t===void 0||l.b===void 0)){var d=(l.t-l.b)*Zh.STEP;C_(t,{x:l.x,y:t.calcY(l.t),width:l.w,height:d,fill:"#88e888","fill-opacity":.4,stroke:"#4aa93d","stroke-opacity":.8});for(var u=0;u<a.children.length;u++){var h=a.children[u],_=h.getChordDim();if(_){var b=t.calcY(h.pitch);b+=h.dim.font.size*h.getLane(),C_(t,{x:_.left,y:b,width:_.right-_.left,height:h.dim.font.size,fill:"none",stroke:"#4aa93d","stroke-opacity":.8})}}}}}yD.exports=DX});var xD=et((_we,bD)=>{function OX(t,n,e,i){var r=(n+t.padding.right)*e,s=(t.y+t.padding.bottom)*e;if(t.isPrint&&(s=Math.max(s,1056)),t.ariaLabel!==""){var a="Sheet Music";t.abctune&&t.abctune.metaText&&t.abctune.metaText.title&&(a+=' for "'+t.abctune.metaText.title+'"'),t.paper.setTitle(a);var l=t.ariaLabel?t.ariaLabel:a;t.paper.setAttribute("aria-label",l)}var d=["-webkit-touch-callout: none;","-webkit-user-select: none;","-khtml-user-select: none;","-moz-user-select: none;","-ms-user-select: none;","user-select: none;"];t.paper.insertStyles(".abcjs-dragging-in-progress text, .abcjs-dragging-in-progress tspan {"+d.join(" ")+"}");var u={overflow:"hidden"};i==="resize"?t.paper.setResponsiveWidth(r,s):(u.width="",u.height=s+"px",e<1?(u.width=r+"px",t.paper.setSize(r/e,s/e)):t.paper.setSize(r,s)),t.paper.setScale(e),t.paper.setParentStyles(u)}bD.exports=OX});var wD=et((ywe,CD)=>{var FX=Ux(),BX=qx();function Ep(t,n,e){this.elements=[],this.paper=t,this.tuneNumber=e,this.selectTypes=n}Ep.prototype.getElements=function(){return this.elements};Ep.prototype.add=function(t,n,e,i){if(this.canSelect(t)){var r;this.selectTypes===void 0?r={selectable:!1,"data-index":this.elements.length}:r={selectable:!0,tabindex:0,"data-index":this.elements.length},this.paper.setAttributeOnElement(n,r);var s={absEl:t,svgEl:n,isDraggable:e};i!==void 0&&(s.staffPos=i),this.elements.push(s)}};Ep.prototype.canSelect=function(t){return this.selectTypes===!1||!t||!t.abcelem?!1:this.selectTypes===!0?!0:this.selectTypes===void 0?t.abcelem.el_type==="note"||t.abcelem.el_type==="tabNumber":this.selectTypes.indexOf(t.abcelem.el_type)>=0};Ep.prototype.wrapSvgEl=function(t,n){var e={tuneNumber:this.tuneNumber,abcelem:t,elemset:[n],highlight:FX,unhighlight:BX};this.add(e,n,!1)};CD.exports=Ep});var PD=et((vwe,SD)=>{var LX=vD(),NX=xD(),IC=DC(),MD=No(),VX=wD();function RX(t,n,e,i,r,s,a,l,d,u){var h=new VX(t.paper,l,d);t.paper.openGroup(),t.moveY(t.padding.top),IC(t,e.topText,h),t.paper.closeGroup(),t.moveY(t.spacing.music);for(var _=[],b=0;b<e.lines.length;b++){n.incrLine();var w=e.lines[b];if(w.staff){t.paper.openGroup(),w.vskip&&t.moveY(w.vskip),_.length>=1&&GX(t,t.spacing.staffSeparation,_[_.length-1],w.staffGroup);var S=jX(t,w.staffGroup,h,b);S.line=u+b,_.push(S),t.paper.closeGroup()}else w.nonMusic&&(t.paper.openGroup(),IC(t,w.nonMusic,h),t.paper.closeGroup())}return n.reset(),e.bottomText&&e.bottomText.rows&&e.bottomText.rows.length>0&&(t.paper.openGroup(),t.moveY(24),IC(t,e.bottomText,h),t.paper.closeGroup()),NX(t,r,a,s),{staffgroups:_,selectables:h.getElements()}}function jX(t,n,e,i){LX(t,n,e,i);var r=n.height*MD.STEP;return t.y+=r,n}function GX(t,n,e,i){var r=e.staffs[e.staffs.length-1],s=-(r.bottom-2),a=i.staffs[0].top-10,l=a+s,d=l*MD.STEP;d<n&&t.moveY(n-d)}SD.exports=RX});var DD=et((bwe,AD)=>{var WX=No(),zX=f4(),UX=x4(),qX=w4(),HX=S4(),YX=k4(),XX=A4(),JX=I4(),QX=G4(),kD=d6(),$X=u6(),ED=f6(),TD=g6(),KX=PD(),ZX=sC(),Ua=function(t,n){n=n||{},this.oneSvgPerLine=n.oneSvgPerLine,this.selectionColor=n.selectionColor,this.dragColor=n.dragColor?n.dragColor:n.selectionColor,this.dragging=!!n.dragging,this.selectTypes=n.selectTypes,this.responsive=n.responsive,this.space=3*WX.SPACE,this.initialClef=n.initialClef,this.scale=n.scale?parseFloat(n.scale):0,this.classes=new $X({shouldAddClasses:n.add_classes}),this.scale>.1||(this.scale=void 0),n.staffwidth?(this.staffwidthScreen=n.staffwidth,this.staffwidthPrint=n.staffwidth):(this.staffwidthScreen=740,this.staffwidthPrint=680),this.listeners=[],n.clickListener&&this.addSelectListener(n.clickListener),this.renderer=new UX(t),this.renderer.setPaddingOverride(n),n.showDebug&&(this.renderer.showDebug=n.showDebug),n.jazzchords&&(this.jazzchords=n.jazzchords),this.renderer.controller=this,this.renderer.foregroundColor=n.foregroundColor?n.foregroundColor:"currentColor",n.ariaLabel!==void 0&&(this.renderer.ariaLabel=n.ariaLabel),this.renderer.minPadding=n.minPadding?n.minPadding:0,this.reset()};Ua.prototype.reset=function(){this.selected=[],this.staffgroups=[],this.engraver&&this.engraver.reset(),this.engraver=null,this.renderer.reset(),this.dragTarget=null,this.dragIndex=-1,this.dragMouseStart={x:-1,y:-1},this.dragYStep=0};Ua.prototype.engraveABC=function(t,n,e){t[0]===void 0&&(t=[t]),this.reset();for(var i=0;i<t.length;i++)n===void 0&&(n=i),this.getFontAndAttr=new ED(t[i].formatting,this.classes),this.getTextSize=new TD(this.getFontAndAttr,this.renderer.paper),this.engraveTune(t[i],n,e)};Ua.prototype.adjustNonScaledItems=function(t){this.width/=t,this.renderer.adjustNonScaledItems(t)};Ua.prototype.getMeasureWidths=function(t){this.reset(),this.getFontAndAttr=new ED(t.formatting,this.classes),this.getTextSize=new TD(this.getFontAndAttr,this.renderer.paper),this.setupTune(t,0),this.constructTuneElements(t),kD(this.renderer,t,0,this.space);for(var n=[],e,i=!0,r=0;r<t.lines.length;r++){var s=t.lines[r];if(s.staff){if(i&&(e={left:0,measureWidths:[],total:0},n.push(e),i=!1),s.staffGroup.voices.length>0)for(var a=s.staffGroup.voices[0],l=!1,d=0,u=0;u<a.children.length;u++){var h=a.children[u];!l&&!h.isClef&&!h.isKeySig&&(l=!0,e.left=h.x,d=h.x),h.type==="bar"&&(e.measureWidths.push(h.x-d),e.total+=h.x-d,d=h.x)}}else i=!0}return n};Ua.prototype.setupTune=function(t,n){this.classes.reset(),t.formatting.jazzchords!==void 0&&(this.jazzchords=t.formatting.jazzchords),this.renderer.newTune(t),this.engraver=new zX(this.getTextSize,n,{bagpipes:t.formatting.bagpipes,flatbeams:t.formatting.flatbeams,graceSlurs:t.formatting.graceSlurs!==!1,percmap:t.formatting.percmap,initialClef:this.initialClef,jazzchords:this.jazzchords}),this.engraver.setStemHeight(this.renderer.spacing.stemHeight),this.engraver.measureLength=t.getMeterFraction().num/t.getMeterFraction().den,t.formatting.staffwidth?this.width=t.formatting.staffwidth*1.33:this.width=this.renderer.isPrint?this.staffwidthPrint:this.staffwidthScreen;var e=t.formatting.scale?t.formatting.scale:this.scale;return this.responsive==="resize"&&(e=void 0),e===void 0&&(e=this.renderer.isPrint?.75:1),this.adjustNonScaledItems(e),e};Ua.prototype.constructTuneElements=function(t){t.topText=new XX(t.metaText,t.metaTextInfo,t.formatting,t.lines,this.width,this.renderer.isPrint,this.renderer.padding.left,this.renderer.spacing,this.getTextSize);var n,e,i=!1,r=!1;for(n=0;n<t.lines.length;n++)if(e=t.lines[n],e.staff)r=!0,e.staffGroup=this.engraver.createABCLine(e.staff,i?null:t.metaText.tempo,n),i=!0;else if(e.subtitle){if(r){var s=this.width/2+this.renderer.padding.left;e.nonMusic=new YX(this.renderer.spacing.subtitle,t.formatting,e.subtitle,s,this.renderer.padding.left,this.getTextSize)}}else e.text!==void 0?(r=!0,e.nonMusic=new qX(e.text,e.vskip,this.getFontAndAttr,this.renderer.padding.left,this.width,this.getTextSize)):e.separator!==void 0&&e.separator.lineLength&&(r=!0,e.nonMusic=new HX(e.separator.spaceAbove,e.separator.lineLength,e.separator.spaceBelow));t.bottomText=new JX(t.metaText,this.width,this.renderer.isPrint,this.renderer.padding.left,this.renderer.spacing,this.getTextSize)};Ua.prototype.engraveTune=function(t,n,e){var i=this.setupTune(t,n);this.constructTuneElements(t);var r=kD(this.renderer,t,this.width,this.space);t.tablatures&&ZX.layoutTablatures(this.renderer,t);var s=KX(this.renderer,this.classes,t,this.width,r,this.responsive,i,this.selectTypes,n,e);if(this.staffgroups=s.staffgroups,this.selectables=s.selectables,this.oneSvgPerLine){var a=this.renderer.paper.svg.parentNode;this.svgs=eJ(a,t.metaText.title,this.responsive)}else this.svgs=[this.renderer.paper.svg];QX(this,this.svgs)};function eJ(t,n,e){n||(n="Untitled");var i=t.querySelector("svg");e==="resize"&&(t.style.paddingBottom="");for(var r=i.querySelector("style"),s=e==="resize"?i.viewBox.baseVal.width:i.getAttribute("width"),a=t.querySelectorAll("svg > g"),l=0,d=[],u=[],h=0;h<a.length;h++){var _=a[h],b=_.getBBox(),w=b.y-l,S=b.height+w,L=document.createElement("div"),R="overflow: hidden;";e!=="resize"&&(R+="height:"+S+"px;"),L.setAttribute("style",R);var z=tJ(i),ne='Sheet Music for "'+n+'" section '+(h+1);z.setAttribute("aria-label",ne),e!=="resize"&&z.setAttribute("height",S),e==="resize"&&(z.style.position=""),z.setAttribute("viewBox","0 "+l+" "+s+" "+S),z.appendChild(r.cloneNode(!0));var Q=document.createElement("title");Q.innerText=ne,z.appendChild(Q),z.appendChild(_),L.appendChild(z),u.push(z),t.appendChild(L),l=b.y+b.height}return t.removeChild(i),u}function tJ(t){for(var n="http://www.w3.org/2000/svg",e=document.createElementNS(n,"svg"),i=0;i<t.attributes.length;i++){var r=t.attributes[i];r.name!=="height"&&r.name!="aria-label"&&e.setAttribute(r.name,r.value)}return e}Ua.prototype.getDim=function(t){if(!t.dim){var n=t.svgEl.getBBox();t.dim={left:Math.round(n.x),top:Math.round(n.y),right:Math.round(n.x+n.width),bottom:Math.round(n.y+n.height)}}return t.dim};Ua.prototype.addSelectListener=function(t){this.listeners[this.listeners.length]=t};AD.exports=Ua});var OC=et((wwe,BD)=>{var nJ=h_(),xwe=Vx(),OD=DD(),iJ=Rx(),rJ=Bx(),Cwe=oo(),w_={};function ID(){var t=window.innerWidth;for(var n in w_)if(w_.hasOwnProperty(n)){var e=w_[n],i=e.offsetLeft;t-=i*2,e.style.width=t+"px"}}try{window.addEventListener("resize",ID),window.addEventListener("orientationChange",ID)}catch{}function FD(t,n,e,i,r){e.viewportHorizontal?(t.innerHTML='<div class="abcjs-inner"></div>',e.scrollHorizontal?(t.style.overflowX="auto",t.style.overflowY="hidden"):t.style.overflow="hidden",w_[t.id]=t,t=t.children[0]):e.viewportVertical?(t.innerHTML='<div class="abcjs-inner scroll-amount"></div>',t.style.overflowX="hidden",t.style.overflowY="auto",t=t.children[0]):t.innerHTML="";var s=new OD(t,e);if(s.engraveABC(n,i,r),n.engraver=s,e.viewportVertical||e.viewportHorizontal){var a=t.parentNode;a.style.width=t.style.width}}var oJ=function(t,n,e,i,r){var s={},a;if(e){for(a in e)e.hasOwnProperty(a)&&(s[a]=e[a]);s.warnings_id&&s.tablature&&(s.tablature.warning_id=s.warnings_id)}if(i)for(a in i)i.hasOwnProperty(a)&&(a==="listener"?i[a].highlight&&(s.clickListener=i[a].highlight):s[a]=i[a]);if(r)for(a in r)r.hasOwnProperty(a)&&(s[a]=r[a]);function l(d,u,h,_){var b=!1;return d==="*"&&(b=!0,d=document.createElement("div"),d.setAttribute("style","visibility: hidden;"),document.body.appendChild(d)),s.afterParsing&&s.afterParsing(u,h,_),!b&&s.wrap&&s.staffwidth?(u=sJ(d,u,h,_,s),u):(FD(d,u,s,h,0),b&&d.parentNode.removeChild(d),null)}return nJ.renderEngine(l,t,n,s)};function sJ(t,n,e,i,r){var s=new OD(t,r),a=s.getMeasureWidths(n),l=rJ.calcLineWraps(n,a,r);if(l.reParse){var d=new iJ;d.parse(i,l.revisedParams),n=d.getTune();var u=d.getWarnings();u&&(n.warnings=u)}return FD(t,n,l.revisedParams,e,0),n.explanation=l.explanation,n}BD.exports=oJ});var M_=et((Mwe,LD)=>{var aJ={};LD.exports=aJ});var VD=et((Swe,ND)=>{var FC=M_(),lJ=function(t,n,e,i){FC[n]||(FC[n]={});var r=FC[n];return r[e]||(r[e]=new Promise(function(s,a){var l=new XMLHttpRequest;let d=t+n+"-mp3/"+e+".mp3";l.open("GET",d,!0),l.responseType="arraybuffer",l.onload=function(){if(l.status!==200){a(Error("Can't load sound at "+d));return}var u=function(_){s({instrument:n,name:e,status:"loaded",audioBuffer:_})},h=i.decodeAudioData(l.response,u,function(){a(Error("Can't decode sound at "+d))});h&&typeof h.catch=="function"&&h.catch(a)},l.onerror=function(){a(Error("Can't load sound at "+d))},l.send()}).catch(s=>{throw console.error("Didn't load note",n,e,":",s.message),s})),r[e]};ND.exports=lJ});var S_=et((Pwe,RD)=>{var cJ=["acoustic_grand_piano","bright_acoustic_piano","electric_grand_piano","honkytonk_piano","electric_piano_1","electric_piano_2","harpsichord","clavinet","celesta","glockenspiel","music_box","vibraphone","marimba","xylophone","tubular_bells","dulcimer","drawbar_organ","percussive_organ","rock_organ","church_organ","reed_organ","accordion","harmonica","tango_accordion","acoustic_guitar_nylon","acoustic_guitar_steel","electric_guitar_jazz","electric_guitar_clean","electric_guitar_muted","overdriven_guitar","distortion_guitar","guitar_harmonics","acoustic_bass","electric_bass_finger","electric_bass_pick","fretless_bass","slap_bass_1","slap_bass_2","synth_bass_1","synth_bass_2","violin","viola","cello","contrabass","tremolo_strings","pizzicato_strings","orchestral_harp","timpani","string_ensemble_1","string_ensemble_2","synth_strings_1","synth_strings_2","choir_aahs","voice_oohs","synth_choir","orchestra_hit","trumpet","trombone","tuba","muted_trumpet","french_horn","brass_section","synth_brass_1","synth_brass_2","soprano_sax","alto_sax","tenor_sax","baritone_sax","oboe","english_horn","bassoon","clarinet","piccolo","flute","recorder","pan_flute","blown_bottle","shakuhachi","whistle","ocarina","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass_lead","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","sitar","banjo","shamisen","koto","kalimba","bagpipe","fiddle","shanai","tinkle_bell","agogo","steel_drums","woodblock","taiko_drum","melodic_tom","synth_drum","reverse_cymbal","guitar_fret_noise","breath_noise","seashore","bird_tweet","telephone_ring","helicopter","applause","gunshot","percussion"];RD.exports=cJ});var WD=et((kwe,GD)=>{var jD=S_(),dJ=function(t){for(var n=[],e=0;e<t.tracks.length;e++)n.push([]);var i={},r=jD[0];return t.tracks.forEach(function(s,a){s.forEach(function(l){switch(l.cmd){case"note":if(l.duration>0){var d=l.gap?l.gap:0,u=l.duration;d=Math.min(d,u*2/3);var h={pitch:l.pitch,instrument:r,start:Math.round(l.start*1e6)/1e6,end:Math.round((l.start+u-d)*1e6)/1e6,volume:l.volume};l.startChar&&(h.startChar=l.startChar),l.endChar&&(h.endChar=l.endChar),l.style&&(h.style=l.style),l.cents&&(h.cents=l.cents),n[a].push(h)}break;case"program":r=jD[l.instrument];break;case"text":break;default:console.log("Unhandled midi event",l)}})}),n};GD.exports=dJ});var Tp=et((Ewe,zD)=>{function hJ(t){if(t)window.abcjsAudioContext=t;else if(!window.abcjsAudioContext){var n=window.AudioContext||window.webkitAudioContext;if(n)window.abcjsAudioContext=new n;else return!1}return window.abcjsAudioContext.state!=="suspended"}zD.exports=hJ});var vd=et((Twe,UD)=>{var uJ=Tp();function pJ(){return window.abcjsAudioContext||uJ(),window.abcjsAudioContext}UD.exports=pJ});var Ap=et((Awe,qD)=>{var fJ=vd();function mJ(){if(!window.Promise||!window.AudioContext&&!window.webkitAudioContext&&!navigator.mozAudioContext&&!navigator.msAudioContext)return!1;var t=fJ();if(t)return t.resume!==void 0}qD.exports=mJ});var P_=et((Dwe,HD)=>{var gJ={21:"A0",22:"Bb0",23:"B0",24:"C1",25:"Db1",26:"D1",27:"Eb1",28:"E1",29:"F1",30:"Gb1",31:"G1",32:"Ab1",33:"A1",34:"Bb1",35:"B1",36:"C2",37:"Db2",38:"D2",39:"Eb2",40:"E2",41:"F2",42:"Gb2",43:"G2",44:"Ab2",45:"A2",46:"Bb2",47:"B2",48:"C3",49:"Db3",50:"D3",51:"Eb3",52:"E3",53:"F3",54:"Gb3",55:"G3",56:"Ab3",57:"A3",58:"Bb3",59:"B3",60:"C4",61:"Db4",62:"D4",63:"Eb4",64:"E4",65:"F4",66:"Gb4",67:"G4",68:"Ab4",69:"A4",70:"Bb4",71:"B4",72:"C5",73:"Db5",74:"D5",75:"Eb5",76:"E5",77:"F5",78:"Gb5",79:"G5",80:"Ab5",81:"A5",82:"Bb5",83:"B5",84:"C6",85:"Db6",86:"D6",87:"Eb6",88:"E6",89:"F6",90:"Gb6",91:"G6",92:"Ab6",93:"A6",94:"Bb6",95:"B6",96:"C7",97:"Db7",98:"D7",99:"Eb7",100:"E7",101:"F7",102:"Gb7",103:"G7",104:"Ab7",105:"A7",106:"Bb7",107:"B7",108:"C8",109:"Db8",110:"D8",111:"Eb8",112:"E8",113:"F8",114:"Gb8",115:"G8",116:"Ab8",117:"A8",118:"Bb8",119:"B8",120:"C9",121:"Db9"};HD.exports=gJ});var XD=et((Iwe,YD)=>{var _J=function(t){return window.URL.createObjectURL(yJ(t.audioBuffers))};function yJ(t){var n=t[0],e=n.numberOfChannels,i=n.length*e*2+44,r=new ArrayBuffer(i),s=new DataView(r),a=[],l,d,u=0,h=0;for(b(1179011410),b(i-8),b(1163280727),b(544501094),b(16),_(1),_(e),b(n.sampleRate),b(n.sampleRate*2*e),_(e*2),_(16),b(1635017060),b(i-h-4),l=0;l<e;l++)a.push(n.getChannelData(l));for(;h<i;){for(l=0;l<a.length;l++)d=Math.max(-1,Math.min(1,a[l][u])),d=(.5+d<0?d*32768:d*32767)|0,s.setInt16(h,d,!0),h+=2;u++}return new Blob([r],{type:"audio/wav"});function _(w){s.setUint16(h,w,!0),h+=2}function b(w){s.setUint32(h,w,!0),h+=4}}YD.exports=_J});var BC=et((Owe,JD)=>{function vJ(t){return Math.pow(2,t/1200)}JD.exports=vJ});var $D=et((Fwe,QD)=>{var bJ=M_(),xJ=P_(),CJ=BC();function wJ(t,n,e,i,r,s,a,l){var d=window.OfflineAudioContext||window.webkitOfflineAudioContext,u=e.len*e.tempoMultiplier;s&&(u+=s/1e3),u-=l,u<0&&(u=.005);var h=new d(2,Math.floor((u+a)*n),n),_=xJ[e.pitch],b=bJ[e.instrument][_];return b?b.then(function(w){var S=h.createBufferSource();S.buffer=w.audioBuffer;var L=e.volume/96*r;S.gainNode=h.createGain(),e.pan&&h.createStereoPanner&&(S.panNode=h.createStereoPanner(),S.panNode.pan.setValueAtTime(e.pan,0)),S.gainNode.gain.value=L,S.gainNode.gain.linearRampToValueAtTime(S.gainNode.gain.value,u),S.gainNode.gain.linearRampToValueAtTime(0,u+a),e.cents&&(S.playbackRate.value=CJ(e.cents)),S.panNode?(S.panNode.connect(h.destination),S.gainNode.connect(S.panNode)):S.gainNode.connect(h.destination),S.connect(S.gainNode),S.start(0),S.noteOff?S.noteOff(u+a):S.stop(u+a);var R;return h.oncomplete=function(z){if(z.renderedBuffer&&z.renderedBuffer.getChannelData)for(var ne=0;ne<i.length;ne++){var Q=i[ne]*e.tempoMultiplier;s&&(Q-=s/1e3),Q<0&&(Q=0),Q=Math.floor(Q*n),MJ(t,z.renderedBuffer,Q)}R()},h.startRendering(),new Promise(function(z){R=z})}).catch(function(){}):Promise.resolve()}var MJ=function(t,n,e){for(var i=0;i<2;i++)for(var r=n.getChannelData(i),s=t.getChannelData(i),a=0;a<r.length;a++)s[a+e]+=r[a]};QD.exports=wJ});var k_=et((Bwe,tI)=>{var SJ=VD(),PJ=WD(),kJ=Tp(),cr=vd(),EJ=Ap(),TJ=P_(),LC=S_(),AJ=XD(),DJ=$D(),KD=M_(),bd="MIDI is not supported in this browser.",ZD="https://paulrosen.github.io/midi-js-soundfonts/abcjs/",eI="https://paulrosen.github.io/midi-js-soundfonts/FluidR3_GM/",IJ="https://paulrosen.github.io/midi-js-soundfonts/MusyngKite/";function OJ(){var t=this;t.audioBufferPossible=void 0,t.directSource=[],t.startTimeSec=void 0,t.pausedTimeSec=void 0,t.audioBuffers=[],t.duration=void 0,t.isRunning=!1,t.init=function(e){e||(e={}),kJ(e.audioContext);var i=cr().currentTime;if(t.debugCallback=e.debugCallback,t.debugCallback&&t.debugCallback("init called"),t.audioBufferPossible=t._deviceCapable(),!t.audioBufferPossible)return Promise.reject({status:"NotSupported",message:bd});var r=e.options?e.options:{};t.soundFontUrl=r.soundFontUrl?r.soundFontUrl:eI,t.soundFontUrl[t.soundFontUrl.length-1]!=="/"&&(t.soundFontUrl+="/"),r.soundFontVolumeMultiplier||r.soundFontVolumeMultiplier===0?t.soundFontVolumeMultiplier=r.soundFontVolumeMultiplier:t.soundFontUrl===eI||t.soundFontUrl===IJ?t.soundFontVolumeMultiplier=3:t.soundFontUrl===ZD?t.soundFontVolumeMultiplier=.4:t.soundFontVolumeMultiplier=1,r.programOffsets?t.programOffsets=r.programOffsets:t.soundFontUrl===ZD?t.programOffsets={bright_acoustic_piano:20,honkytonk_piano:20,electric_piano_1:30,electric_piano_2:30,harpsichord:40,clavinet:20,celesta:20,glockenspiel:40,vibraphone:30,marimba:35,xylophone:30,tubular_bells:35,dulcimer:30,drawbar_organ:20,percussive_organ:25,rock_organ:20,church_organ:40,reed_organ:40,accordion:40,harmonica:40,acoustic_guitar_nylon:20,acoustic_guitar_steel:30,electric_guitar_jazz:25,electric_guitar_clean:15,electric_guitar_muted:35,overdriven_guitar:25,distortion_guitar:20,guitar_harmonics:30,electric_bass_finger:15,electric_bass_pick:30,fretless_bass:40,violin:105,viola:50,cello:40,contrabass:60,trumpet:10,trombone:90,alto_sax:20,tenor_sax:20,clarinet:20,flute:50,banjo:50,woodblock:20}:t.programOffsets={};var s=r.fadeLength!==void 0?parseInt(r.fadeLength,10):NaN;if(t.fadeLength=isNaN(s)?200:s,s=r.noteEnd!==void 0?parseInt(r.noteEnd,10):NaN,t.noteEnd=isNaN(s)?0:s,t.pan=r.pan,t.meterSize=1,e.visualObj){t.flattened=e.visualObj.setUpAudio(r);var a=e.visualObj.getMeterFraction();a.den&&(t.meterSize=e.visualObj.getMeterFraction().num/e.visualObj.getMeterFraction().den)}else if(e.sequence)t.flattened=e.sequence;else return Promise.reject(new Error("Must pass in either a visualObj or a sequence"));t.millisecondsPerMeasure=e.millisecondsPerMeasure?e.millisecondsPerMeasure:e.visualObj?e.visualObj.millisecondsPerMeasure(t.flattened.tempo):1e3,t.beatsPerMeasure=e.visualObj?e.visualObj.getBeatsPerMeasure():4,t.sequenceCallback=r.sequenceCallback,t.callbackContext=r.callbackContext,t.onEnded=r.onEnded;var l={},d=[],u=[],h=LC[0];t.flattened.tracks.forEach(function(L){L.forEach(function(R){if(R.cmd==="program"&&LC[R.instrument]&&(h=LC[R.instrument]),R.pitch!==void 0){var z=R.pitch,ne=TJ[z];if(ne)if(l[h]||(l[h]={}),!KD[h]||!KD[h][ne])l[h][ne]=!0;else{var Q=h+":"+ne;d.indexOf(Q)<0&&d.push(Q)}else{var q=h+":"+ne;console.log("Can't find note: ",z,q),u.indexOf(q)<0&&u.push(q)}}})}),t.debugCallback&&t.debugCallback("note gathering time = "+Math.floor((cr().currentTime-i)*1e3)+"ms"),i=cr().currentTime;var _=[];Object.keys(l).forEach(function(L){Object.keys(l[L]).forEach(function(R){_.push({instrument:L,note:R})})});for(var b=[],w=256,S=0;S<_.length;S+=w)b.push(_.slice(S,S+w));return new Promise(function(L,R){var z={cached:d,error:u,loaded:[]},ne=0,Q=function(){ne<b.length?t._loadBatch(b[ne],t.soundFontUrl,i).then(function(q){i=cr().currentTime,q&&(q.error&&(z.error=z.error.concat(q.error)),q.loaded&&(z.loaded=z.loaded.concat(q.loaded))),ne++,Q()},R):L(z)};Q()})},t._loadBatch=function(e,i,r,s){var a=[];return e.forEach(function(l){a.push(SJ(i,l.instrument,l.note,cr()))}),Promise.all(a).then(function(l){t.debugCallback&&t.debugCallback("mp3 load time = "+Math.floor((cr().currentTime-r)*1e3)+"ms");for(var d=[],u=[],h=[],_=[],b=0;b<l.length;b++){var w=l[b],S=w.instrument+":"+w.name;w.status==="loaded"?d.push(S):w.status==="pending"?h.push(S):w.status==="cached"?u.push(S):_.push(S+" "+w.message)}if(h.length>0){if(s?s=s*2:s=50,s<9e4)return new Promise(function(z,ne){setTimeout(function(){var Q=[];for(b=0;b<h.length;b++)S=h[b].split(":"),Q.push({instrument:S[0],note:S[1]});t._loadBatch(Q,i,r,s).then(function(q){z(q)}).catch(function(q){ne(q)})},s)});for(var L=[],R=0;R<e.length;R++)L.push(e[R].instrument+"/"+e[R].note);return Promise.reject(new Error("timeout attempting to load: "+L.join(", ")))}else return Promise.resolve({loaded:d,cached:u,error:_})}).catch(function(l){})},t.prime=function(){var e=t.fadeLength/1e3;return t.isRunning=!1,t.audioBufferPossible?(t.debugCallback&&t.debugCallback("prime called"),new Promise(function(i){var r=cr().currentTime,s=t.millisecondsPerMeasure/1e3/t.meterSize;if(t.duration=t.flattened.totalDuration*s,t.duration<=0)return t.audioBuffers=[],i({status:"empty",seconds:0});t.duration+=e;var a=Math.floor(cr().sampleRate*t.duration);t.stop();var l=PJ(t.flattened);t.sequenceCallback&&t.sequenceCallback(l,t.callbackContext);var d=n(l.length,t.pan),u={};l.forEach(function(z,ne){var Q=d&&d.length>ne?d[ne]:0;z.forEach(function(q){var T=q.instrument+":"+q.pitch+":"+q.volume+":"+Math.round((q.end-q.start)*1e3)/1e3+":"+Q+":"+s+":"+(q.cents?q.cents:0);u[T]||(u[T]=[]),u[T].push(q.start)})});for(var h=[],_=cr().createBuffer(2,a,cr().sampleRate),b=0;b<Object.keys(u).length;b++){var w=Object.keys(u)[b],S=w.split(":"),L=S[6]!==void 0?parseFloat(S[6]):0;S={instrument:S[0],pitch:parseInt(S[1],10),volume:parseInt(S[2],10),len:parseFloat(S[3]),pan:parseFloat(S[4]),tempoMultiplier:parseFloat(S[5]),cents:L},h.push(DJ(_,cr().sampleRate,S,u[w],t.soundFontVolumeMultiplier,t.programOffsets[S.instrument],e,t.noteEnd/1e3))}t.audioBuffers=[_],t.debugCallback&&(t.debugCallback("sampleRate = "+cr().sampleRate),t.debugCallback("totalSamples = "+a),t.debugCallback("creationTime = "+Math.floor((cr().currentTime-r)*1e3)+"ms"));function R(z){var ne=z&&z.audioBuffers&&z.audioBuffers.length>0?z.audioBuffers[0].duration:0;return{status:cr().state,duration:ne}}Promise.all(h).then(function(){cr().state==="suspended"?cr().resume().then(function(){i(R(t))}):cr().state==="interrupted"?cr().suspend().then(function(){cr().resume().then(function(){i(R(t))})}):i(R(t))})})):Promise.reject(new Error(bd))};function n(e,i){if(i==null)return null;var r=[];if(i.length){for(var s=0;s<e;s++)if(s<i.length){var a=parseFloat(i[s]);a<-1?a=-1:a>1&&(a=1),r.push(a)}else r.push(0);return r}else{var l=parseFloat(i);if(l*(e-1)>2)return null;for(var d=e%2===0,u=d?0-l/2:0,h=u+l,_=0;_<e;_++)d=_%2===0,d?(r.push(u),u-=l):(r.push(h),h+=l);return r}return null}t.start=function(){if(!t.audioBufferPossible)throw new Error(bd);t.debugCallback&&t.debugCallback("start called");var e=t.pausedTimeSec?t.pausedTimeSec:0;t._kickOffSound(e),t.startTimeSec=cr().currentTime-e,t.pausedTimeSec=void 0,t.debugCallback&&t.debugCallback("MIDI STARTED",t.startTimeSec)},t.pause=function(){if(!t.audioBufferPossible)throw new Error(bd);return t.debugCallback&&t.debugCallback("pause called"),t.pausedTimeSec=t.stop(),t.pausedTimeSec},t.resume=function(){t.start()},t.seek=function(e,i){var r;switch(i){case"seconds":r=e;break;case"beats":r=e*t.millisecondsPerMeasure/t.beatsPerMeasure/1e3;break;default:r=(t.duration-t.fadeLength/1e3)*e;break}if(!t.audioBufferPossible)throw new Error(bd);t.debugCallback&&t.debugCallback("seek called sec="+r),t.isRunning?(t.stop(),t._kickOffSound(r)):t.pausedTimeSec=r,t.pausedTimeSec=r},t.stop=function(){t.isRunning=!1,t.pausedTimeSec=void 0,t.directSource.forEach(function(i){try{i.stop()}catch(r){console.log("direct source didn't stop:",r)}}),t.directSource=[];var e=cr().currentTime-t.startTimeSec;return e},t.finished=function(){t.startTimeSec=void 0,t.pausedTimeSec=void 0,t.isRunning=!1},t.download=function(){return AJ(t)},t._deviceCapable=function(){return EJ()?!0:(console.warn(bd),t.debugCallback&&t.debugCallback(bd),!1)},t._kickOffSound=function(e){t.isRunning=!0,t.directSource=[],t.audioBuffers.forEach(function(i,r){t.directSource[r]=cr().createBufferSource(),t.directSource[r].buffer=i,t.directSource[r].connect(cr().destination)}),t.directSource.forEach(function(i){i.start(0,e)}),t.onEnded&&(t.directSource[0].onended=function(){t.onEnded(t.callbackContext)})}}tI.exports=OJ});var NC=et((Lwe,nI)=>{var FJ=function(){var t=this;t.tracks=[],t.totalDuration=0,t.currentInstrument=[],t.starts=[],t.addTrack=function(){return t.tracks.push([]),t.currentInstrument.push(0),t.starts.push(0),t.tracks.length-1},t.setInstrument=function(n,e){t.tracks[n].push({channel:0,cmd:"program",instrument:e}),t.currentInstrument[n]=e},t.appendNote=function(n,e,i,r,s){var a={cmd:"note",duration:i,gap:0,instrument:t.currentInstrument[n],pitch:e,start:t.starts[n],volume:r};s&&(a.cents=s),t.tracks[n].push(a),t.starts[n]+=i,t.totalDuration=Math.max(t.totalDuration,t.starts[n])}};nI.exports=FJ});var rI=et((Nwe,iI)=>{var BJ=`
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 700" preserveAspectRatio="xMidYMid meet">
	<g transform="translate(0,700) scale(0.1,-0.1)" >
	<path d="M3111 6981 c-20 -37 -90 -55 -364 -96 -120 -18 -190 -33 -244 -55
	-42 -17 -124 -42 -182 -56 -78 -18 -119 -34 -157 -60 -28 -19 -86 -46 -128
	-60 -43 -13 -107 -42 -144 -64 -37 -23 -84 -46 -106 -52 -21 -7 -56 -29 -79
	-50 -22 -22 -61 -50 -86 -63 -26 -13 -67 -40 -91 -60 -24 -20 -65 -47 -90 -60
	-25 -13 -53 -31 -61 -41 -8 -9 -32 -30 -54 -46 -75 -54 -486 -460 -512 -507
	-15 -25 -48 -69 -75 -98 -26 -28 -48 -57 -48 -63 0 -6 -18 -29 -39 -53 -21
	-23 -56 -71 -77 -107 -20 -36 -50 -80 -65 -97 -16 -18 -33 -52 -40 -75 -12
	-47 -47 -115 -84 -166 -13 -18 -30 -56 -38 -83 -8 -27 -34 -80 -56 -118 -33
	-53 -46 -91 -62 -167 -12 -63 -34 -127 -59 -179 -42 -84 -60 -166 -60 -270 0
	-90 26 -122 125 -154 54 -17 96 -19 430 -20 305 -1 381 2 430 14 82 22 140 51
	153 78 6 12 22 47 37 77 14 30 38 77 54 103 15 27 34 73 40 103 7 30 28 78 48
	107 19 28 44 74 55 101 10 28 34 67 53 87 18 20 49 61 68 90 19 30 44 63 57
	74 13 11 36 40 52 65 59 94 232 270 306 313 20 11 57 37 82 58 25 20 70 52
	100 72 30 19 66 47 79 61 13 14 49 35 80 46 30 12 80 37 111 56 31 19 95 45
	143 58 48 12 110 37 139 55 63 40 127 55 323 76 83 9 208 28 279 41 156 29
	165 29 330 4 453 -71 514 -84 606 -130 31 -16 83 -36 116 -45 32 -9 84 -34
	115 -56 31 -21 82 -48 113 -60 32 -11 72 -33 89 -48 18 -16 59 -45 92 -65 33
	-21 74 -51 90 -66 17 -15 49 -40 73 -54 52 -32 65 -61 50 -113 -8 -31 -61 -90
	-277 -308 -300 -303 -361 -382 -369 -481 -2 -29 0 -66 6 -81 13 -40 88 -138
	115 -151 12 -6 54 -26 92 -44 l70 -33 945 -2 c520 -1 975 2 1012 7 64 8 191
	50 231 76 11 7 33 34 50 60 22 34 42 51 65 58 l32 9 0 1101 0 1102 -32 9 c-21
	7 -44 26 -64 55 -60 84 -77 97 -140 110 -44 9 -76 10 -127 2 -59 -9 -77 -17
	-134 -62 -37 -28 -172 -155 -301 -281 -129 -127 -249 -237 -267 -245 -25 -10
	-41 -11 -71 -2 -58 15 -112 45 -124 69 -6 11 -35 35 -64 54 -28 18 -58 41 -66
	50 -8 9 -41 35 -75 58 -33 22 -77 56 -99 75 -21 18 -64 46 -95 61 -31 14 -73
	39 -93 55 -20 15 -70 40 -110 55 -40 15 -97 44 -127 64 -29 21 -78 44 -107 53
	-30 8 -77 31 -105 51 -42 28 -73 39 -173 60 -68 14 -154 39 -196 58 -95 43
	-131 51 -343 76 -209 24 -242 32 -279 70 l-30 29 -328 0 c-312 0 -330 -1 -339
	-19z"></path>
	<path d="M254 2875 c-89 -16 -107 -26 -145 -78 -32 -44 -62 -66 -91 -67 -17 0
	-18 -61 -18 -1140 l0 -1140 24 0 c16 0 41 -17 72 -50 40 -42 61 -55 117 -72
	l69 -21 82 23 c44 12 96 30 114 39 18 9 148 132 290 272 141 141 267 261 279
	268 51 26 86 14 176 -61 32 -26 62 -48 66 -48 5 0 36 -25 70 -55 34 -30 74
	-61 89 -69 15 -8 37 -28 50 -45 12 -17 50 -45 84 -62 34 -17 78 -44 98 -60 19
	-16 61 -37 93 -48 32 -11 81 -37 107 -56 27 -20 76 -45 109 -56 33 -12 75 -31
	93 -44 62 -45 93 -58 191 -82 54 -12 130 -37 168 -54 68 -29 180 -58 226 -59
	62 0 183 -64 183 -96 0 -12 88 -14 639 -14 l639 0 12 30 c18 44 76 66 233 89
	89 14 160 30 200 47 34 15 106 42 159 60 54 18 112 44 130 57 47 35 85 52 146
	67 29 7 76 28 105 48 29 20 77 48 107 63 30 15 66 39 80 54 14 15 50 40 81 56
	31 15 78 46 104 69 26 22 61 46 79 54 17 7 43 26 56 42 14 16 41 41 60 56 64
	48 380 362 408 405 15 23 40 51 55 63 15 12 36 38 46 58 11 21 37 57 58 82 22
	25 49 62 62 83 13 20 38 56 57 78 19 23 50 74 69 113 19 39 46 86 59 104 14
	18 34 62 46 98 12 36 32 77 45 92 31 38 60 97 80 167 9 33 26 76 37 95 29 50
	47 103 68 206 10 52 32 117 51 155 29 56 33 74 34 140 0 94 -10 108 -101 138
	-61 20 -83 21 -463 21 -226 0 -421 -4 -451 -10 -63 -12 -86 -30 -110 -85 -10
	-22 -33 -63 -52 -92 -21 -31 -42 -80 -53 -123 -11 -44 -32 -93 -56 -128 -20
	-32 -47 -83 -59 -115 -12 -32 -37 -77 -56 -100 -19 -23 -50 -65 -69 -94 -19
	-29 -44 -57 -54 -63 -11 -5 -29 -27 -42 -47 -52 -85 -234 -277 -300 -315 -25
	-15 -53 -38 -62 -51 -9 -14 -42 -39 -74 -57 -32 -18 -75 -48 -95 -66 -21 -18
	-59 -44 -85 -58 -26 -13 -72 -40 -100 -59 -35 -24 -78 -41 -128 -52 -47 -11
	-99 -31 -139 -56 -69 -42 -94 -49 -391 -110 -245 -51 -425 -66 -595 -50 -168
	16 -230 27 -330 61 -47 16 -123 35 -170 44 -98 17 -123 25 -172 58 -20 14 -71
	37 -114 53 -44 15 -95 40 -115 56 -20 16 -70 42 -110 59 -40 16 -88 45 -108
	63 -20 19 -55 46 -78 61 -24 14 -49 35 -55 47 -7 11 -34 33 -60 49 -50 31 -65
	61 -53 102 4 13 130 147 281 298 236 238 277 283 299 335 15 32 35 71 46 86
	12 18 19 44 19 76 0 42 -8 63 -53 138 -92 151 11 139 -1207 141 -798 2 -1030
	0 -1086 -11z"></path>
	</g>
</svg>
`;iI.exports=BJ});var sI=et((Vwe,oI)=>{var LJ=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" class="abcjs-play-svg">
    <g>
    <polygon points="4 0 23 12.5 4 25"/>
    </g>
</svg>
`;oI.exports=LJ});var lI=et((Rwe,aI)=>{var NJ=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" class="abcjs-pause-svg">
  <g>
    <rect width="8.23" height="25"/>
    <rect width="8.23" height="25" x="17"/>
  </g>
</svg>
`;aI.exports=NJ});var dI=et((jwe,cI)=>{var VJ=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="abcjs-loading-svg">
    <circle cx="50" cy="50" fill="none" stroke-width="20" r="35" stroke-dasharray="160 55"></circle>
</svg>
`;cI.exports=VJ});var uI=et((Gwe,hI)=>{var RJ=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25">
  <g>
    <polygon points="5 12.5 24 0 24 25"/>
    <rect width="3" height="25" x="0" y="0"/>
  </g>
</svg>
`;hI.exports=RJ});var RC=et((Wwe,fI)=>{var jJ=Ap(),pI=Tp(),Ip=vd(),GJ=oo(),WJ=rI(),zJ=sI(),UJ=lI(),qJ=dI(),HJ=uI();function YJ(t,n){var e=this;if(typeof t=="string"){var i=t;if(t=document.querySelector(i),!t)throw new Error('Cannot find element "'+i+'" in the DOM.')}else if(!(t instanceof HTMLElement))throw new Error("The first parameter must be a valid element or selector in the DOM.");if(e.parent=t,e.options={},n&&(e.options=GJ.clone(n)),e.options.ac&&pI(e.options.ac),XJ(e.parent,e.options),JJ(e),e.disable=function(s){var a=e.parent.querySelector(".abcjs-inline-audio");s?a.classList.add("abcjs-disabled"):a.classList.remove("abcjs-disabled")},e.setWarp=function(s,a){var l=e.parent.querySelector(".abcjs-midi-tempo");l.value=Math.round(a),e.setTempo(s)},e.setTempo=function(s){var a=e.parent.querySelector(".abcjs-midi-current-tempo");a&&(a.innerHTML=Math.round(s))},e.resetAll=function(){for(var s=e.parent.querySelectorAll(".abcjs-pushed"),a=0;a<s.length;a++){var l=s[a];l.classList.remove("abcjs-pushed")}},e.pushPlay=function(s){var a=e.parent.querySelector(".abcjs-midi-start");a&&(s?a.classList.add("abcjs-pushed"):a.classList.remove("abcjs-pushed"))},e.pushLoop=function(s){var a=e.parent.querySelector(".abcjs-midi-loop");a&&(s?a.classList.add("abcjs-pushed"):a.classList.remove("abcjs-pushed"))},e.setProgress=function(s,a){var l=e.parent.querySelector(".abcjs-midi-progress-background"),d=e.parent.querySelector(".abcjs-midi-progress-indicator");if(!(!l||!d)){var u=l.clientWidth,h=u*s;d.style.left=h+"px";var _=e.parent.querySelector(".abcjs-midi-clock");if(_){var b=a*s/1e3,w=Math.floor(b/60),S=Math.floor(b%60),L=S<10?"0"+S:S;_.innerHTML=w+":"+L}}},e.options.afterResume){var r=!1;e.options.ac?r=e.options.ac.state!=="suspended":Ip()&&(r=Ip().state!=="suspended"),r&&e.options.afterResume()}}function XJ(t,n){var e=!!n.loopHandler,i=!!n.restartHandler,r=!!n.playHandler||!!n.playPromiseHandler,s=!!n.progressHandler,a=!!n.warpHandler,l=n.hasClock!==!1,d=`<div class="abcjs-inline-audio">
`;if(e){var u=n.repeatTitle?n.repeatTitle:"Click to toggle play once/repeat.",h=n.repeatAria?n.repeatAria:u;d+='<button type="button" class="abcjs-midi-loop abcjs-btn" title="'+u+'" aria-label="'+h+'">'+WJ+`</button>
`}if(i){var _=n.restartTitle?n.restartTitle:"Click to go to beginning.",b=n.restartAria?n.restartAria:_;d+='<button type="button" class="abcjs-midi-reset abcjs-btn" title="'+_+'" aria-label="'+b+'">'+HJ+`</button>
`}if(r){var w=n.playTitle?n.playTitle:"Click to play/pause.",S=n.playAria?n.playAria:w;d+='<button type="button" class="abcjs-midi-start abcjs-btn" title="'+w+'" aria-label="'+S+'">'+zJ+UJ+qJ+`</button>
`}if(s){var L=n.randomTitle?n.randomTitle:"Click to change the playback position.",R=n.randomAria?n.randomAria:L;d+='<button type="button" class="abcjs-midi-progress-background" title="'+L+'" aria-label="'+R+`"><span class="abcjs-midi-progress-indicator"></span></button>
`}if(l&&(d+=`<span class="abcjs-midi-clock"></span>
`),a){var z=n.warpTitle?n.warpTitle:"Change the playback speed.",ne=n.warpAria?n.warpAria:z,Q=n.bpm?n.bpm:"BPM";d+='<span class="abcjs-tempo-wrapper"><label><input class="abcjs-midi-tempo" type="number" min="1" max="300" value="100" title="'+z+'" aria-label="'+ne+'">%</label><span>&nbsp;(<span class="abcjs-midi-current-tempo"></span> '+Q+`)</span></span>
`}d+='<div class="abcjs-css-warning" style="font-size: 12px;color:red;border: 1px solid red;text-align: center;width: 300px;margin-top: 4px;font-weight: bold;border-radius: 4px;">CSS required: load abcjs-audio.css</div>',d+=`</div>
`,t.innerHTML=d}function Dp(t,n,e,i,r){var s=!0;if(Ip()?s=Ip().state==="suspended":pI(),!jJ())throw{status:"NotSupported",message:"This browser does not support audio."};(s||r)&&e&&e.classList.add("abcjs-loading"),s?Ip().resume().then(function(){i?i().then(function(a){VC(t,n,e,r)}):VC(t,n,e,r)}):VC(t,n,e,r)}function VC(t,n,e,i){i?t(n).then(function(){e&&e.classList.remove("abcjs-loading")}):(t(n),e&&e.classList.remove("abcjs-loading"))}function JJ(t){var n=!!t.options.loopHandler,e=!!t.options.restartHandler,i=!!t.options.playHandler||!!t.options.playPromiseHandler,r=!!t.options.progressHandler,s=!!t.options.warpHandler,a=t.parent.querySelector(".abcjs-midi-start");n&&t.parent.querySelector(".abcjs-midi-loop").addEventListener("click",function(l){Dp(t.options.loopHandler,l,a,t.options.afterResume)}),e&&t.parent.querySelector(".abcjs-midi-reset").addEventListener("click",function(l){Dp(t.options.restartHandler,l,a,t.options.afterResume)}),i&&a.addEventListener("click",function(l){Dp(t.options.playPromiseHandler||t.options.playHandler,l,a,t.options.afterResume,!!t.options.playPromiseHandler)}),r&&t.parent.querySelector(".abcjs-midi-progress-background").addEventListener("click",function(l){Dp(t.options.progressHandler,l,a,t.options.afterResume)}),s&&t.parent.querySelector(".abcjs-midi-tempo").addEventListener("change",function(l){Dp(t.options.warpHandler,l,a,t.options.afterResume)})}fI.exports=YJ});var _I=et((zwe,gI)=>{var QJ=NC(),$J=k_(),KJ=vd();function ZJ(t,n,e){for(var i=new QJ,r=0;r<t.length;r++){var s=t[r],a=i.addTrack();if(i.setInstrument(a,s.instrument),r===0&&n)for(var l=0;l<n.length;l++){var d=n[l];i.appendNote(a,d.pitch,1/64,d.volume,d.cents)}i.appendNote(a,s.pitch,s.duration,s.volume,s.cents)}var u=KJ();return u.state==="suspended"?u.resume().then(function(){return mI(i,e)}):mI(i,e)}function mI(t,n){var e=new $J;return e.init({sequence:t,millisecondsPerMeasure:n}).then(function(){return e.prime()}).then(function(){return e.start(),Promise.resolve()})}gI.exports=ZJ});var jC=et((Uwe,vI)=>{var eQ=RC(),tQ=k_(),nQ=$g(),yI=vd();function iQ(){var t=this;t.warp=100,t.cursorControl=null,t.visualObj=null,t.timer=null,t.midiBuffer=null,t.options=null,t.currentTempo=null,t.control=null,t.isLooping=!1,t.isStarted=!1,t.isLoaded=!1,t.isLoading=!1,t.load=function(e,i,r){r||(r={}),t.control=new eQ(e,{loopHandler:r.displayLoop?t.toggleLoop:void 0,restartHandler:r.displayRestart?t.restart:void 0,playPromiseHandler:r.displayPlay?t.play:void 0,progressHandler:r.displayProgress?t.randomAccess:void 0,warpHandler:r.displayWarp?t.onWarp:void 0,afterResume:t.init}),t.cursorControl=i,t.disable(!0)},t.disable=function(e){t.control&&t.control.disable(e)},t.setTune=function(e,i,r){return t.visualObj=e,t.disable(!1),t.options=r,t.control&&(t.pause(),t.setProgress(0,1),t.control.resetAll(),t.restart(),t.isStarted=!1),t.isLooping=!1,i?t.go():Promise.resolve({status:"no-audio-context"})},t.go=function(){t.isLoading=!0;var e=t.visualObj.millisecondsPerMeasure()*100/t.warp;t.currentTempo=Math.round(t.visualObj.getBeatsPerMeasure()/e*6e4),t.control&&t.control.setTempo(t.currentTempo),t.percent=0;var i;return t.midiBuffer||(t.midiBuffer=new tQ),yI().resume().then(function(r){return t.midiBuffer.init({visualObj:t.visualObj,options:t.options,millisecondsPerMeasure:e})}).then(function(r){return i=r,t.midiBuffer.prime()}).then(function(){var r=16;return t.cursorControl&&t.cursorControl.beatSubdivisions!==void 0&&parseInt(t.cursorControl.beatSubdivisions,10)>=1&&parseInt(t.cursorControl.beatSubdivisions,10)<=64&&(r=parseInt(t.cursorControl.beatSubdivisions,10)),t.timer=new nQ(t.visualObj,{beatCallback:t.beatCallback,eventCallback:t.eventCallback,lineEndCallback:t.lineEndCallback,qpm:t.currentTempo,extraMeasuresAtBeginning:t.cursorControl?t.cursorControl.extraMeasuresAtBeginning:void 0,lineEndAnticipation:t.cursorControl?t.cursorControl.lineEndAnticipation:0,beatSubdivisions:r}),t.cursorControl&&t.cursorControl.onReady&&typeof t.cursorControl.onReady=="function"&&t.cursorControl.onReady(t),t.isLoaded=!0,t.isLoading=!1,Promise.resolve({status:"created",notesStatus:i})})},t.destroy=function(){t.timer&&(t.timer.reset(),t.timer.stop(),t.timer=null),t.midiBuffer&&(t.midiBuffer.stop(),t.midiBuffer=null),t.setProgress(0,1),t.control&&t.control.resetAll()},t.play=function(){return t.runWhenReady(t._play,void 0)};function n(e){return new Promise(function(i){setTimeout(i,e)})}t.runWhenReady=function(e,i){return t.visualObj?t.isLoading?n(500).then(function(){return t.isLoading?t.runWhenReady(e,i):e(i)}):t.isLoaded?e(i):t.go().then(function(){return e(i)}):Promise.resolve({status:"loading"})},t._play=function(){return yI().resume().then(function(){return t.isStarted=!t.isStarted,t.isStarted?(t.cursorControl&&t.cursorControl.onStart&&typeof t.cursorControl.onStart=="function"&&t.cursorControl.onStart(),t.midiBuffer.start(),t.timer.start(t.percent),t.control&&t.control.pushPlay(!0)):t.pause(),Promise.resolve({status:"ok"})})},t.pause=function(){t.timer&&(t.timer.pause(),t.midiBuffer.pause(),t.control&&t.control.pushPlay(!1))},t.toggleLoop=function(){t.isLooping=!t.isLooping,t.control&&t.control.pushLoop(t.isLooping)},t.restart=function(){t.timer&&(t.timer.setProgress(0),t.midiBuffer.seek(0))},t.randomAccess=function(e){return t.runWhenReady(t._randomAccess,e)},t._randomAccess=function(e){var i=e.target.classList.contains("abcjs-midi-progress-indicator")?e.target.parentNode:e.target,r=(e.x-i.offsetLeft)/i.offsetWidth;return r<0&&(r=0),r>1&&(r=1),t.seek(r),Promise.resolve({status:"ok"})},t.seek=function(e,i){t.timer&&t.midiBuffer&&(t.timer.setProgress(e,i),t.midiBuffer.seek(e,i))},t.setWarp=function(e){if(parseInt(e,10)>0){t.warp=parseInt(e,10);var i=t.isStarted,r=t.percent;return t.destroy(),t.isStarted=!1,t.go().then(function(){return t.setProgress(r,t.midiBuffer.duration*1e3),t.control&&t.control.setWarp(t.currentTempo,t.warp),i?t.play().then(function(){return t.seek(r),Promise.resolve()}):(t.seek(r),Promise.resolve())})}return Promise.resolve()},t.onWarp=function(e){var i=e.target.value;return t.setWarp(i)},t.setProgress=function(e,i){t.percent=e,t.control&&t.control.setProgress(e,i)},t.finished=function(){if(t.timer.reset(),t.isLooping)return t.timer.start(0),t.midiBuffer.finished(),t.midiBuffer.start(),"continue";t.timer.stop(),t.isStarted&&(t.control&&t.control.pushPlay(!1),t.isStarted=!1,t.midiBuffer.finished(),t.cursorControl&&t.cursorControl.onFinished&&typeof t.cursorControl.onFinished=="function"&&t.cursorControl.onFinished(),t.setProgress(0,1))},t.beatCallback=function(e,i,r,s){var a=e/i;t.setProgress(a,r),t.cursorControl&&t.cursorControl.onBeat&&typeof t.cursorControl.onBeat=="function"&&t.cursorControl.onBeat(e,i,r,s)},t.eventCallback=function(e){if(e)t.cursorControl&&t.cursorControl.onEvent&&typeof t.cursorControl.onEvent=="function"&&t.cursorControl.onEvent(e);else return t.finished()},t.lineEndCallback=function(e,i){t.cursorControl&&t.cursorControl.onLineEnd&&typeof t.cursorControl.onLineEnd=="function"&&t.cursorControl.onLineEnd(e,i)},t.getUrl=function(){return t.midiBuffer.download()},t.download=function(e){var i=t.getUrl(),r=document.createElement("a");document.body.appendChild(r),r.setAttribute("style","display: none;"),r.href=i,r.download=e||"output.wav",r.click(),window.URL.revokeObjectURL(i),document.body.removeChild(r)}}vI.exports=iQ});var CI=et((qwe,xI)=>{var rQ=BC(),bI;(function(){"use strict";function t(h,_){for(var b in _)_.hasOwnProperty(b)&&h.setAttribute(b,_[b]);return h}function n(){this.trackstrings="",this.trackcount=0,this.noteOnAndChannel="%90",this.noteOffAndChannel="%80"}n.prototype.setTempo=function(h){this.trackcount===0&&(this.startTrack(),this.track+="%00%FF%51%03"+l(Math.round(6e7/h),6),this.endTrack())},n.prototype.setGlobalInfo=function(h,_,b,w){if(this.trackcount===0){this.startTrack();var S=Math.round(6e7/h);this.track+="%00%FF%51%03"+l(S,6),b&&(this.track+=r(b)),w&&(this.track+=s(w)),_&&(this.track+=i(_,"%01")),this.endTrack()}},n.prototype.startTrack=function(){this.noteWarped={},this.track="",this.trackName="",this.trackInstrument="",this.silencelength=0,this.trackcount++,this.instrument&&this.setInstrument(this.instrument)},n.prototype.endTrack=function(){this.track=this.trackName+this.trackInstrument+this.track;var h=l(this.track.length/3+4,8);this.track="MTrk"+h+this.track+"%00%FF%2F%00",this.trackstrings+=this.track},n.prototype.setText=function(h,_){switch(h){case"name":this.trackName=i(_,"%03");break}},n.prototype.setInstrument=function(h){this.trackInstrument="%00%C0"+l(h,2),this.instrument=h},n.prototype.setChannel=function(h,_){this.channel=h;var b="%00%B"+this.channel.toString(16);this.track+=b+"%79%00",this.track+=b+"%40%00",this.track+=b+"%5B%30",_||(_=0),_=Math.round((_+1)*64),this.track+=b+"%0A"+l(_,2),this.track+=b+"%07%64",this.noteOnAndChannel="%9"+this.channel.toString(16),this.noteOffAndChannel="%8"+this.channel.toString(16)};var e=4096;n.prototype.startNote=function(h,_,b){if(this.track+=u(this.silencelength),this.silencelength=0,b){this.track+="%e"+this.channel.toString(16);var w=Math.round(rQ(b)*e);this.track+=d(8192+w),this.track+=u(0),this.noteWarped[h]=!0}this.track+=this.noteOnAndChannel,this.track+="%"+h.toString(16)+l(_,2)},n.prototype.endNote=function(h){this.track+=u(this.silencelength),this.silencelength=0,this.noteWarped[h]&&(this.track+="%e"+this.channel.toString(16),this.track+=d(8192),this.track+=u(0),this.noteWarped[h]=!1),this.track+=this.noteOffAndChannel,this.track+="%"+h.toString(16)+"%00"},n.prototype.addRest=function(h){this.silencelength+=h,this.silencelength<0&&(this.silencelength=0)},n.prototype.getData=function(){return"data:audio/midi,MThd%00%00%00%06%00%01"+l(this.trackcount,4)+"%01%e0"+this.trackstrings},n.prototype.embed=function(h,_){var b=this.getData(),w=t(document.createElement("a"),{href:b});if(w.innerHTML="download midi",h.insertBefore(w,h.firstChild),!_){var S=t(document.createElement("embed"),{src:b,type:"video/quicktime",controller:"true",autoplay:"false",loop:"false",enablejavascript:"true",style:"display:block; height: 20px;"});h.insertBefore(S,h.firstChild)}};function i(h,_){for(var b="",w=0;w<h.length;w++)b+=l(h.charCodeAt(w),2);return"%00%FF"+_+l(b.length/3,2)+b}function r(h){if(!h||!h.accidentals)return"";for(var _="%00%FF%59%02",b=0,w=256,S=0;S<h.accidentals.length;S++)h.accidentals[S].acc==="sharp"?b++:h.accidentals[S].acc==="flat"&&w--;var L=l(w!==256?w:b,2),R=h.mode==="m"?"%01":"%00";return _+L+R}function s(h){var _="%00%FF%58%04"+l(h.num,2),b={1:0,2:1,4:2,8:3,16:4,32:5},w=b[h.den];if(!w)return"";_+=l(w,2);var S;switch(h.num+"/"+h.den){case"2/4":case"3/4":case"4/4":case"5/4":S=24;break;case"6/4":S=72;break;case"2/2":case"3/2":case"4/2":S=48;break;case"3/8":case"6/8":case"9/8":case"12/8":S=36;break}return S?(_+=l(S,2),_+"%08"):""}function a(h){for(var _="",b=0;b<h.length;b+=2)_+="%",_+=h.substr(b,2);return _}function l(h,_){var b=h.toString(16);for(b=b.split(".")[0];b.length<_;)b="0"+b;return b.length>_&&(b=b.substring(0,_)),a(b)}function d(h){h=Math.round(h);var _=h%128,b=h-_;return l(b*2+_,4)}function u(h){var _=0,b=[];for(h=Math.round(h);h!==0;)b.push(h&127),h=h>>7;for(var w=b.length-1;w>=0;w--){_=_<<8;var S=b[w];w!==0&&(S=S|128),_=_|S}var L=_.toString(16).length;return L+=L%2,l(_,L)}bI=function(){return new n}})();xI.exports=bI});var SI=et((Hwe,MI)=>{var oQ=CI(),wI;(function(){"use strict";var t=1920;wI=function(e,i){i===void 0&&(i={});var r=e.setUpAudio(i),s=oQ(),a=e.metaText?e.metaText.title:void 0;a&&a.length>128&&(a=a.substring(0,124)+"...");var l=e.getKeySignature(),d=e.getMeterFraction(),u=r.tempo/60;s.setGlobalInfo(r.tempo,a,l,d);for(var h=0;h<r.tracks.length;h++){s.startTrack();for(var _={},b=0;b<r.tracks[h].length;b++){var w=r.tracks[h][b];switch(w.cmd){case"text":s.setText(w.type,w.text);break;case"program":var S=0;i.pan&&i.pan.length>h&&(S=i.pan[h]),s.setChannel(w.channel,S),s.setInstrument(w.instrument);break;case"note":var L=w.gap*u,R=w.start,z=R+w.duration-L;_[R]||(_[R]=[]),_[R].push({pitch:w.pitch,volume:w.volume,cents:w.cents}),_[z]||(_[z]=[]),_[z].push({pitch:w.pitch,volume:0});break;default:console.log("MIDI create Unknown: "+w.cmd)}}n(s,_,t),s.endTrack()}return s.getData()};function n(e,i,r){for(var s=Object.keys(i),a=0;a<s.length;a++)s[a]=parseFloat(s[a]);s.sort(function(w,S){return w-S});for(var l=0,d=0;d<s.length;d++){var u=i[s[d]];if(s[d]>l){var h=(s[d]-l)*r;e.addRest(h),l=s[d]}for(var _=0;_<u.length;_++){var b=u[_];b.volume?e.startNote(b.pitch,b.volume,b.cents):e.endNote(b.pitch)}}}})();MI.exports=wI});var kI=et((Ywe,PI)=>{var sQ=h_(),aQ=SI(),lQ=function(t,n){var e={};if(n)for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i]);e.generateInline=!1;function r(s,a,l){var d=aQ(a,e);switch(e.midiOutputType){case"encoded":return d;case"binary":var u=d.replace("data:audio/midi,","");u=u.replace(/MThd/g,"%4d%54%68%64"),u=u.replace(/MTrk/g,"%4d%54%72%6b");for(var h=new ArrayBuffer(u.length/3),_=new Uint8Array(h),b=0;b<u.length/3;b++){var w=b*3+1,S=parseInt(u.substring(w,w+2),16);_[b]=S}return _;case"link":default:return dQ(a,e,d,l)}}return typeof t=="string"?sQ.renderEngine(r,"*",t,e):r(null,t,0)};function cQ(t){var n={};return t&&n.toString.call(t)==="[object Function]"}var dQ=function(t,n,e,i){var r=["abcjs-download-midi","abcjs-midi-"+i];n.downloadClass&&r.push(n.downloadClass);var s='<div class="'+r.join(" ")+'">';n.preTextDownload&&(s+=n.preTextDownload);var a=t.metaText&&t.metaText.title?t.metaText.title:"Untitled",l;n.downloadLabel&&cQ(n.downloadLabel)?l=n.downloadLabel(t,i):n.downloadLabel?l=n.downloadLabel.replace(/%T/,a):l='Download MIDI for "'+a+'"',a=a.toLowerCase().replace(/'/g,"").replace(/\W/g,"_").replace(/__/g,"_");var d=n.fileName?n.fileName:a+".midi";return s+='<a download="'+d+'" href="'+e+'">'+l+"</a>",n.postTextDownload&&(s+=n.postTextDownload),s+"</div>"};PI.exports=lQ});var WC=et((Xwe,EI)=>{try{typeof window.CustomEvent!="function"&&(GC=function(t,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),e},GC.prototype=window.Event.prototype,window.CustomEvent=GC)}catch{}var GC,uc=function(t){this.textarea=document.getElementById(t),this.initialText=this.textarea.value,this.isDragging=!1};uc.prototype.addSelectionListener=function(t){this.textarea.onmousemove=function(n){this.isDragging&&t.fireSelectionChanged()}};uc.prototype.addChangeListener=function(t){this.changelistener=t,this.textarea.onkeyup=function(){t.fireChanged()},this.textarea.onmousedown=function(){this.isDragging=!0,t.fireSelectionChanged()},this.textarea.onmouseup=function(){this.isDragging=!1,t.fireChanged()},this.textarea.onchange=function(){t.fireChanged()}};uc.prototype.getSelection=function(){return{start:this.textarea.selectionStart,end:this.textarea.selectionEnd}};uc.prototype.setSelection=function(t,n){if(this.textarea.setSelectionRange)this.textarea.setSelectionRange(t,n);else if(this.textarea.createTextRange){var e=this.textarea.createTextRange();e.collapse(!0),e.moveEnd("character",n),e.moveStart("character",t),e.select()}this.textarea.focus()};uc.prototype.getString=function(){return this.textarea.value};uc.prototype.setString=function(t){this.textarea.value=t,this.initialText=this.getString(),this.changelistener&&this.changelistener.fireChanged()};uc.prototype.getElem=function(){return this.textarea};EI.exports=uc});var DI=et((Jwe,AI)=>{var TI=oo(),hQ=jC(),uQ=Ap(),pQ=OC(),fQ=WC();function mQ(t){var n={},e;if(t.abcjsParams)for(e in t.abcjsParams)t.abcjsParams.hasOwnProperty(e)&&(n[e]=t.abcjsParams[e]);if(t.midi_options)for(e in t.midi_options)t.midi_options.hasOwnProperty(e)&&(n[e]=t.midi_options[e]);if(t.parser_options)for(e in t.parser_options)t.parser_options.hasOwnProperty(e)&&(n[e]=t.parser_options[e]);if(t.render_options)for(e in t.render_options)t.render_options.hasOwnProperty(e)&&(n[e]=t.render_options[e]);return n.tablature&&t.warnings_id&&(n.tablature.warnings_id=t.warnings_id),n}var wo=function(t,n){this.abcjsParams=mQ(n),n.indicate_changed&&(this.indicate_changed=!0),typeof t=="string"?this.editarea=new fQ(t):this.editarea=t,this.editarea.addSelectionListener(this),this.editarea.addChangeListener(this),n.canvas_id?this.div=n.canvas_id:n.paper_id?this.div=n.paper_id:(this.div=document.createElement("DIV"),this.editarea.getElem().parentNode.insertBefore(this.div,this.editarea.getElem())),typeof this.div=="string"&&(this.div=document.getElementById(this.div)),n.selectionChangeCallback&&(this.selectionChangeCallback=n.selectionChangeCallback),this.clientClickListener=this.abcjsParams.clickListener,this.abcjsParams.clickListener=this.highlight.bind(this),n.synth&&uQ()&&(this.synth={el:n.synth.el,cursorControl:n.synth.cursorControl,options:n.synth.options}),n.generate_midi&&(this.generate_midi=n.generate_midi,this.abcjsParams.generateDownload&&(typeof n.midi_download_id=="string"?this.downloadMidi=document.getElementById(n.midi_download_id):n.midi_download_id&&(this.downloadMidi=n.midi_download_id)),this.abcjsParams.generateInline!==!1&&(typeof n.midi_id=="string"?this.inlineMidi=document.getElementById(n.midi_id):n.midi_id&&(this.inlineMidi=n.midi_id))),n.warnings_id?typeof n.warnings_id=="string"?this.warningsdiv=document.getElementById(n.warnings_id):this.warningsdiv=n.warnings_id:n.generate_warnings&&(this.warningsdiv=document.createElement("div"),this.div.parentNode.insertBefore(this.warningsdiv,this.div)),this.onchangeCallback=n.onchange,this.currentAbc="",this.tunes=[],this.bReentry=!1,this.parseABC(),this.modelChanged(),this.addClassName=function(e,i){var r=function(s,a){var l=s.className;return l.length>0&&(l===a||new RegExp("(^|\\s)"+a+"(\\s|$)").test(l))};return r(e,i)||(e.className+=(e.className?" ":"")+i),e},this.removeClassName=function(e,i){return e.className=TI.strip(e.className.replace(new RegExp("(^|\\s+)"+i+"(\\s+|$)")," ")),e},this.setReadOnly=function(e){var i="abc_textarea_readonly",r=this.editarea.getElem();e?(r.setAttribute("readonly","yes"),this.addClassName(r,i)):(r.removeAttribute("readonly"),this.removeClassName(r,i))}};wo.prototype.redrawMidi=function(){if(this.generate_midi&&!this.midiPause){var t=new window.CustomEvent("generateMidi",{detail:{tunes:this.tunes,abcjsParams:this.abcjsParams,downloadMidiEl:this.downloadMidi,inlineMidiEl:this.inlineMidi,engravingEl:this.div}});window.dispatchEvent(t)}if(this.synth){var n=this.synth.synthControl;this.synth.synthControl||(this.synth.synthControl=new hQ,this.synth.synthControl.load(this.synth.el,this.synth.cursorControl,this.synth.options)),this.synth.synthControl.setTune(this.tunes[0],n,this.synth.options)}};wo.prototype.modelChanged=function(){if(!this.bReentry){this.bReentry=!0;try{this.timerId=null,this.synth&&this.synth.synthControl&&this.synth.synthControl.disable(!0),this.tunes=pQ(this.div,this.currentAbc,this.abcjsParams),this.tunes.length>0&&(this.warnings=this.tunes[0].warnings),this.redrawMidi()}catch(t){console.error("ABCJS error: ",t),this.warnings||(this.warnings=[]),this.warnings.push(t.message)}this.warningsdiv&&(this.warningsdiv.innerHTML=this.warnings?this.warnings.join("<br />"):"No errors"),this.updateSelection(),this.bReentry=!1}};wo.prototype.paramChanged=function(t){if(t)for(var n in t)t.hasOwnProperty(n)&&(this.abcjsParams[n]=t[n]);this.currentAbc="",this.fireChanged()};wo.prototype.synthParamChanged=function(t){if(this.synth){if(this.synth.options={},t)for(var n in t)t.hasOwnProperty(n)&&(this.synth.options[n]=t[n]);this.currentAbc="",this.fireChanged()}};wo.prototype.parseABC=function(){var t=this.editarea.getString();return t===this.currentAbc?(this.updateSelection(),!1):(this.currentAbc=t,!0)};wo.prototype.updateSelection=function(){var t=this.editarea.getSelection();try{this.tunes.length>0&&this.tunes[0].engraver&&this.tunes[0].engraver.rangeHighlight(t.start,t.end)}catch{}this.selectionChangeCallback&&this.selectionChangeCallback(t.start,t.end)};wo.prototype.fireSelectionChanged=function(){this.updateSelection()};wo.prototype.setDirtyStyle=function(t){if(this.indicate_changed!==void 0){var n=function(s,a){var l=function(d,u){var h=d.className;return h.length>0&&(h===u||new RegExp("(^|\\s)"+u+"(\\s|$)").test(h))};return l(s,a)||(s.className+=(s.className?" ":"")+a),s},e=function(s,a){return s.className=TI.strip(s.className.replace(new RegExp("(^|\\s+)"+a+"(\\s+|$)")," ")),s},i="abc_textarea_dirty",r=this.editarea.getElem();t?n(r,i):e(r,i)}};wo.prototype.fireChanged=function(){if(!this.bIsPaused&&this.parseABC()){var t=this;this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(function(){t.modelChanged()},300);var n=this.isDirty();this.wasDirty!==n&&(this.wasDirty=n,this.setDirtyStyle(n)),this.onchangeCallback&&this.onchangeCallback(this)}};wo.prototype.setNotDirty=function(){this.editarea.initialText=this.editarea.getString(),this.wasDirty=!1,this.setDirtyStyle(!1)};wo.prototype.isDirty=function(){return this.indicate_changed===void 0?!1:this.editarea.initialText!==this.editarea.getString()};wo.prototype.highlight=function(t,n,e,i,r,s){this.editarea.setSelection(t.startChar,t.endChar),this.selectionChangeCallback&&this.selectionChangeCallback(t.startChar,t.endChar),this.clientClickListener&&this.clientClickListener(t,n,e,i,r,s)};wo.prototype.pause=function(t){this.bIsPaused=t,t||this.fireChanged()};wo.prototype.millisecondsPerMeasure=function(){return!this.synth||!this.synth.synthControl||!this.synth.synthControl.visualObj?0:this.synth.synthControl.visualObj.millisecondsPerMeasure()};wo.prototype.pauseMidi=function(t){this.midiPause=t,t||this.redrawMidi()};AI.exports=wo});var Ko=et((Qwe,FI)=>{var gQ=g5(),II=v5(),OI=h_(),_Q=Lx(),yQ=_A(),ba={};ba.signature="abcjs-basic v"+gQ;Object.keys(II).forEach(function(t){ba[t]=II[t]});Object.keys(OI).forEach(function(t){ba[t]=OI[t]});ba.renderAbc=OC();ba.TimingCallbacks=$g();var vQ=Sl();ba.setGlyph=vQ.setSymbol;ba.strTranspose=yQ;var bQ=k_(),xQ=S_(),CQ=P_(),wQ=NC(),MQ=RC(),SQ=Tp(),PQ=vd(),kQ=Ap(),EQ=_I(),TQ=jC(),AQ=kI();ba.synth={CreateSynth:bQ,instrumentIndexToName:xQ,pitchToNoteName:CQ,SynthController:TQ,SynthSequence:wQ,CreateSynthControl:MQ,registerAudioContext:SQ,activeAudioContext:PQ,supportsAudio:kQ,playEvent:EQ,getMidiFile:AQ,sequence:_Q};ba.Editor=DI();ba.EditArea=WC();FI.exports=ba});var S7=et((nf,jw)=>{(function(t,n){typeof nf=="object"&&typeof jw=="object"?jw.exports=n():typeof define=="function"&&define.amd?define("WaveSurfer",[],n):typeof nf=="object"?nf.WaveSurfer=n():(t.WaveSurfer=t.WaveSurfer||{},t.WaveSurfer.timeline=n())})(nf,function(){return(()=>{"use strict";var t={171:(e,i)=>{function r(l,d){for(var u=0;u<d.length;u++){var h=d[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=function(){function l(_,b){var w=this;if(function(S,L){if(!(S instanceof L))throw new TypeError("Cannot call a class as a function")}(this,l),a.call(this),this.container=typeof _.container=="string"?document.querySelector(_.container):_.container,!this.container)throw new Error("No container for wavesurfer timeline");this.wavesurfer=b,this.util=b.util,this.params=Object.assign({},{height:20,notchPercentHeight:90,labelPadding:5,unlabeledNotchColor:"#c0c0c0",primaryColor:"#000",secondaryColor:"#c0c0c0",primaryFontColor:"#000",secondaryFontColor:"#000",fontFamily:"Arial",fontSize:10,duration:null,zoomDebounce:!1,formatTimeCallback:this.defaultFormatTimeCallback,timeInterval:this.defaultTimeInterval,primaryLabelInterval:this.defaultPrimaryLabelInterval,secondaryLabelInterval:this.defaultSecondaryLabelInterval,offset:0},_),this.canvases=[],this.wrapper=null,this.drawer=null,this.pixelRatio=null,this.maxCanvasWidth=null,this.maxCanvasElementWidth=null,this._onZoom=this.params.zoomDebounce?this.wavesurfer.util.debounce(function(){return w.render()},this.params.zoomDebounce):function(){return w.render()}}var d,u,h;return d=l,h=[{key:"create",value:function(_){return{name:"timeline",deferInit:!(!_||!_.deferInit)&&_.deferInit,params:_,instance:l}}}],(u=[{key:"init",value:function(){this.wavesurfer.isReady?this._onReady():this.wavesurfer.once("ready",this._onReady)}},{key:"destroy",value:function(){this.unAll(),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.un("zoom",this._onZoom),this.wavesurfer.un("ready",this._onReady),this.wavesurfer.drawer.wrapper.removeEventListener("scroll",this._onScroll),this.wrapper&&this.wrapper.parentNode&&(this.wrapper.removeEventListener("click",this._onWrapperClick),this.wrapper.parentNode.removeChild(this.wrapper),this.wrapper=null)}},{key:"createWrapper",value:function(){var _=this.wavesurfer.params;this.container.innerHTML="",this.wrapper=this.container.appendChild(document.createElement("timeline")),this.util.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:"".concat(this.params.height,"px")}),(_.fillParent||_.scrollParent)&&this.util.style(this.wrapper,{width:"100%",overflowX:"hidden",overflowY:"hidden"}),this.wrapper.addEventListener("click",this._onWrapperClick)}},{key:"render",value:function(){this.wrapper||this.createWrapper(),this.updateCanvases(),this.updateCanvasesPositioning(),this.renderCanvases()}},{key:"addCanvas",value:function(){var _=this.wrapper.appendChild(document.createElement("canvas"));this.canvases.push(_),this.util.style(_,{position:"absolute",zIndex:4})}},{key:"removeCanvas",value:function(){var _=this.canvases.pop();_.parentElement.removeChild(_)}},{key:"updateCanvases",value:function(){for(var _=Math.round(this.drawer.wrapper.scrollWidth),b=Math.ceil(_/this.maxCanvasElementWidth);this.canvases.length<b;)this.addCanvas();for(;this.canvases.length>b;)this.removeCanvas()}},{key:"updateCanvasesPositioning",value:function(){var _=this,b=this.canvases.length;this.canvases.forEach(function(w,S){var L=S===b-1?_.drawer.wrapper.scrollWidth-_.maxCanvasElementWidth*(b-1):_.maxCanvasElementWidth;w.width=L*_.pixelRatio,w.height=(_.params.height+1)*_.pixelRatio,_.util.style(w,{width:"".concat(L,"px"),height:"".concat(_.params.height,"px"),left:"".concat(S*_.maxCanvasElementWidth,"px")})})}},{key:"renderCanvases",value:function(){var _=this,b=this.params.duration||this.wavesurfer.backend.getDuration();if(!(b<=0)){var w,S=this.wavesurfer.params,L=this.params.fontSize*S.pixelRatio,R=parseInt(b,10)+1,z=S.fillParent&&!S.scrollParent?this.drawer.getWidth():this.drawer.wrapper.scrollWidth*S.pixelRatio,ne=this.params.height*this.pixelRatio,Q=this.params.height*(this.params.notchPercentHeight/100)*this.pixelRatio,q=z/b,T=this.params.formatTimeCallback,se=function(oe){return typeof oe=="function"?oe(q):oe},_e=se(this.params.timeInterval),Me=se(this.params.primaryLabelInterval),me=se(this.params.secondaryLabelInterval),K=q*this.params.offset,ue=0,be=[];for(w=0;w<R/_e;w++)be.push([w,ue,K]),ue+=_e,K+=q*_e;var Z=function(oe){be.forEach(function(Ee){oe(Ee[0],Ee[1],Ee[2])})};this.setFillStyles(this.params.primaryColor),this.setFonts("".concat(L,"px ").concat(this.params.fontFamily)),this.setFillStyles(this.params.primaryFontColor),Z(function(oe,Ee,Y){oe%Me==0&&(_.fillRect(Y,0,1,ne),_.fillText(T(Ee,q),Y+_.params.labelPadding*_.pixelRatio,ne))}),this.setFillStyles(this.params.secondaryColor),this.setFonts("".concat(L,"px ").concat(this.params.fontFamily)),this.setFillStyles(this.params.secondaryFontColor),Z(function(oe,Ee,Y){oe%me==0&&(_.fillRect(Y,0,1,ne),_.fillText(T(Ee,q),Y+_.params.labelPadding*_.pixelRatio,ne))}),this.setFillStyles(this.params.unlabeledNotchColor),Z(function(oe,Ee,Y){oe%me!=0&&oe%Me!=0&&_.fillRect(Y,0,1,Q)})}}},{key:"setFillStyles",value:function(_){this.canvases.forEach(function(b){b.getContext("2d").fillStyle=_})}},{key:"setFonts",value:function(_){this.canvases.forEach(function(b){b.getContext("2d").font=_})}},{key:"fillRect",value:function(_,b,w,S){var L=this;this.canvases.forEach(function(R,z){var ne=z*L.maxCanvasWidth,Q={x1:Math.max(_,z*L.maxCanvasWidth),y1:b,x2:Math.min(_+w,z*L.maxCanvasWidth+R.width),y2:b+S};Q.x1<Q.x2&&R.getContext("2d").fillRect(Q.x1-ne,Q.y1,Q.x2-Q.x1,Q.y2-Q.y1)})}},{key:"fillText",value:function(_,b,w){var S,L=0;this.canvases.forEach(function(R){var z=R.getContext("2d"),ne=z.canvas.width;L>b+S||(L+ne>b&&(S=z.measureText(_).width,z.fillText(_,b-L,w)),L+=ne)})}},{key:"defaultFormatTimeCallback",value:function(_,b){if(_/60>1){var w=parseInt(_/60,10);return _=(_=parseInt(_%60,10))<10?"0"+_:_,"".concat(w,":").concat(_)}return Math.round(1e3*_)/1e3}},{key:"defaultTimeInterval",value:function(_){return _>=25?1:5*_>=25?5:15*_>=25?15:60*Math.ceil(.5/_)}},{key:"defaultPrimaryLabelInterval",value:function(_){return _>=25?10:5*_>=25?6:4}},{key:"defaultSecondaryLabelInterval",value:function(_){return _>=25?5:2}}])&&r(d.prototype,u),h&&r(d,h),l}();i.default=s;var a=function(){var l=this;this._onScroll=function(){l.wrapper&&l.drawer.wrapper&&(l.wrapper.scrollLeft=l.drawer.wrapper.scrollLeft)},this._onRedraw=function(){return l.render()},this._onReady=function(){var d=l.wavesurfer;l.drawer=d.drawer,l.pixelRatio=d.drawer.params.pixelRatio,l.maxCanvasWidth=d.drawer.maxCanvasWidth||d.drawer.width,l.maxCanvasElementWidth=d.drawer.maxCanvasElementWidth||Math.round(l.maxCanvasWidth/l.pixelRatio),d.drawer.wrapper.addEventListener("scroll",l._onScroll),d.on("redraw",l._onRedraw),d.on("zoom",l._onZoom),l.render()},this._onWrapperClick=function(d){d.preventDefault();var u="offsetX"in d?d.offsetX:d.layerX;l.fireEvent("click",u/l.wrapper.scrollWidth||0)}};e.exports=i.default}},n={};return function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{}};return t[i](r,r.exports,e),r.exports}(171)})()})});var P7=et((rf,Gw)=>{(function(t,n){typeof rf=="object"&&typeof Gw=="object"?Gw.exports=n():typeof define=="function"&&define.amd?define("WaveSurfer",[],n):typeof rf=="object"?rf.WaveSurfer=n():(t.WaveSurfer=t.WaveSurfer||{},t.WaveSurfer.cursor=n())})(rf,function(){return(()=>{"use strict";var t={178:(e,i)=>{function r(a,l){for(var d=0;d<l.length;d++){var u=l[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=function(){function a(h,_){var b=this;(function(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")})(this,a),this.defaultParams={hideOnBlur:!0,width:"1px",color:"black",opacity:"0.25",style:"solid",zIndex:4,customStyle:{},customShowTimeStyle:{},showTime:!1,followCursorY:!1,formatTimeCallback:null},this._onMousemove=function(w){var S=b.wavesurfer.container.getBoundingClientRect(),L=0,R=w.clientX-S.left,z=S.right<w.clientX+b.outerWidth(b.displayTime);b.params.showTime&&b.params.followCursorY&&(L=w.clientY-(S.top+S.height/2)),b.updateCursorPosition(R,L,z)},this._onMouseenter=function(){return b.showCursor()},this._onMouseleave=function(){return b.hideCursor()},this.wavesurfer=_,this.style=_.util.style,this.cursor=null,this.showTime=null,this.displayTime=null,this.params=Object.assign({},this.defaultParams,h)}var l,d,u;return l=a,u=[{key:"create",value:function(h){return{name:"cursor",deferInit:!(!h||!h.deferInit)&&h.deferInit,params:h,staticProps:{},instance:a}}}],(d=[{key:"init",value:function(){this.wrapper=this.wavesurfer.container,this.cursor=this.wrapper.appendChild(this.style(document.createElement("cursor"),Object.assign({position:"absolute",zIndex:this.params.zIndex,left:0,top:0,bottom:0,width:"0",display:"flex",borderRightStyle:this.params.style,borderRightWidth:this.params.width,borderRightColor:this.params.color,opacity:this.params.opacity,pointerEvents:"none"},this.params.customStyle))),this.params.showTime&&(this.showTime=this.wrapper.appendChild(this.style(document.createElement("showTitle"),Object.assign({position:"absolute",zIndex:this.params.zIndex,left:0,top:0,bottom:0,width:"auto",display:"flex",opacity:this.params.opacity,pointerEvents:"none",height:"100%"},this.params.customStyle))),this.displayTime=this.showTime.appendChild(this.style(document.createElement("div"),Object.assign({display:"inline",pointerEvents:"none",margin:"auto",visibility:"hidden"},this.params.customShowTimeStyle))),this.displayTime.innerHTML=this.formatTime(0)),this.wrapper.addEventListener("mousemove",this._onMousemove),this.params.hideOnBlur&&(this.hideCursor(),this.wrapper.addEventListener("mouseenter",this._onMouseenter),this.wrapper.addEventListener("mouseleave",this._onMouseleave))}},{key:"destroy",value:function(){this.params.showTime&&this.cursor.parentNode.removeChild(this.showTime),this.cursor.parentNode.removeChild(this.cursor),this.wrapper.removeEventListener("mousemove",this._onMousemove),this.params.hideOnBlur&&(this.wrapper.removeEventListener("mouseenter",this._onMouseenter),this.wrapper.removeEventListener("mouseleave",this._onMouseleave))}},{key:"updateCursorPosition",value:function(h,_){var b=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(this.style(this.cursor,{left:"".concat(h,"px")}),this.params.showTime){var w=this.wavesurfer.getDuration(),S=this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio,L=this.wavesurfer.drawer.getScrollX(),R=w/this.wavesurfer.drawer.width*L,z=Math.max(0,h/S*w)+R,ne=this.formatTime(z);if(b){var Q=this.outerWidth(this.displayTime);h-=Q}this.style(this.showTime,{left:"".concat(h,"px"),top:"".concat(_,"px")}),this.style(this.displayTime,{visibility:"visible"}),this.displayTime.innerHTML="".concat(ne)}}},{key:"showCursor",value:function(){this.style(this.cursor,{display:"flex"}),this.params.showTime&&this.style(this.showTime,{display:"flex"})}},{key:"hideCursor",value:function(){this.style(this.cursor,{display:"none"}),this.params.showTime&&this.style(this.showTime,{display:"none"})}},{key:"formatTime",value:function(h){return h=isNaN(h)?0:h,this.params.formatTimeCallback?this.params.formatTimeCallback(h):[h].map(function(_){return[Math.floor(_%3600/60),("00"+Math.floor(_%60)).slice(-2),("000"+Math.floor(_%1*1e3)).slice(-3)].join(":")})}},{key:"outerWidth",value:function(h){if(!h)return 0;var _=h.offsetWidth,b=getComputedStyle(h);return _+=parseInt(b.marginLeft+b.marginRight)}}])&&r(l.prototype,d),u&&r(l,u),a}();i.default=s,e.exports=i.default}},n={};return function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{}};return t[i](r,r.exports,e),r.exports}(178)})()})});var k7=et((of,Ww)=>{(function(t,n){typeof of=="object"&&typeof Ww=="object"?Ww.exports=n():typeof define=="function"&&define.amd?define("WaveSurfer",[],n):typeof of=="object"?of.WaveSurfer=n():(t.WaveSurfer=t.WaveSurfer||{},t.WaveSurfer.regions=n())})(of,function(){return(()=>{"use strict";var t={23:(e,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=r(638);function a(_,b){var w=Object.keys(_);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(_);b&&(S=S.filter(function(L){return Object.getOwnPropertyDescriptor(_,L).enumerable})),w.push.apply(w,S)}return w}function l(_){for(var b=1;b<arguments.length;b++){var w=arguments[b]!=null?arguments[b]:{};b%2?a(Object(w),!0).forEach(function(S){d(_,S,w[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(w)):a(Object(w)).forEach(function(S){Object.defineProperty(_,S,Object.getOwnPropertyDescriptor(w,S))})}return _}function d(_,b,w){return b in _?Object.defineProperty(_,b,{value:w,enumerable:!0,configurable:!0,writable:!0}):_[b]=w,_}function u(_,b){for(var w=0;w<b.length;w++){var S=b[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(_,S.key,S)}}var h=function(){function _(L,R){var z=this;(function(ne,Q){if(!(ne instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,_),this.params=L,this.wavesurfer=R,this.util=l(l({},R.util),{},{getRegionSnapToGridValue:function(ne){return z.getRegionSnapToGridValue(ne,L)}}),this.maxRegions=L.maxRegions,this.regionsMinLength=L.regionsMinLength||null,Object.getOwnPropertyNames(this.util.Observer.prototype).forEach(function(ne){s.Region.prototype[ne]=z.util.Observer.prototype[ne]}),this.wavesurfer.Region=s.Region,this._onBackendCreated=function(){z.wrapper=z.wavesurfer.drawer.wrapper,z.params.regions&&z.params.regions.forEach(function(ne){ne.edgeScrollWidth=z.params.edgeScrollWidth||.05*z.wrapper.clientWidth,z.add(ne)})},this.list={},this._onReady=function(){z.wrapper=z.wavesurfer.drawer.wrapper,z.params.dragSelection&&z.enableDragSelection(z.params),Object.keys(z.list).forEach(function(ne){z.list[ne].updateRender()})}}var b,w,S;return b=_,S=[{key:"create",value:function(L){return{name:"regions",deferInit:!(!L||!L.deferInit)&&L.deferInit,params:L,staticProps:{addRegion:function(R){return this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.add(R)},clearRegions:function(){this.regions&&this.regions.clear()},enableDragSelection:function(R){this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.enableDragSelection(R)},disableDragSelection:function(){this.regions.disableDragSelection()}},instance:_}}}],(w=[{key:"init",value:function(){this.wavesurfer.isReady?(this._onBackendCreated(),this._onReady()):(this.wavesurfer.once("ready",this._onReady),this.wavesurfer.once("backend-created",this._onBackendCreated))}},{key:"destroy",value:function(){this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("backend-created",this._onBackendCreated),this.disableDragSelection(),this.clear()}},{key:"wouldExceedMaxRegions",value:function(){return this.maxRegions&&Object.keys(this.list).length>=this.maxRegions}},{key:"add",value:function(L){var R=this;if(this.wouldExceedMaxRegions())return null;!L.minLength&&this.regionsMinLength&&(L=l(l({},L),{},{minLength:this.regionsMinLength}));var z=new this.wavesurfer.Region(L,this.util,this.wavesurfer);return this.list[z.id]=z,z.on("remove",function(){delete R.list[z.id]}),z}},{key:"clear",value:function(){var L=this;Object.keys(this.list).forEach(function(R){L.list[R].remove()})}},{key:"enableDragSelection",value:function(L){var R=this;this.disableDragSelection();var z,ne,Q,q,T,se,_e,Me=L.slop||2,me=this.wavesurfer.drawer.container,K=L.scroll!==!1&&this.wavesurfer.params.scrollParent,ue=L.scrollSpeed||1,be=L.scrollThreshold||10,Z=this.wavesurfer.getDuration(),oe=0,Ee=function X(Ue){if(q&&se){var Ze=R.wrapper.scrollLeft+ue*se;R.wrapper.scrollLeft=Ze=Math.min(ne,Math.max(0,Ze));var De=R.wavesurfer.drawer.handleEvent(Ue);q.update({start:Math.min(De*Z,Q*Z),end:Math.max(De*Z,Q*Z)}),Ze<ne&&Ze>0&&window.requestAnimationFrame(function(){X(Ue)})}},Y=function(X){X.touches&&X.touches.length>1||(Z=R.wavesurfer.getDuration(),T=X.targetTouches?X.targetTouches[0].identifier:null,ne=R.wrapper.scrollWidth-R.wrapper.clientWidth,_e=R.wrapper.getBoundingClientRect(),z=!0,Q=R.wavesurfer.drawer.handleEvent(X,!0),q=null,se=null)};this.wrapper.addEventListener("mousedown",Y),this.wrapper.addEventListener("touchstart",Y),this.on("disable-drag-selection",function(){R.wrapper.removeEventListener("touchstart",Y),R.wrapper.removeEventListener("mousedown",Y)});var G=function(X){X.touches&&X.touches.length>1||(z=!1,oe=0,se=null,q&&(R.util.preventClick(),q.fireEvent("update-end",X),R.wavesurfer.fireEvent("region-update-end",q,X)),q=null)};this.wrapper.addEventListener("mouseleave",G),this.wrapper.addEventListener("mouseup",G),this.wrapper.addEventListener("touchend",G),document.body.addEventListener("mouseup",G),document.body.addEventListener("touchend",G),this.on("disable-drag-selection",function(){document.body.removeEventListener("mouseup",G),document.body.removeEventListener("touchend",G),R.wrapper.removeEventListener("touchend",G),R.wrapper.removeEventListener("mouseup",G),R.wrapper.removeEventListener("mouseleave",G)});var le=function(X){if(z&&!(++oe<=Me)&&!(X.touches&&X.touches.length>1)&&(!X.targetTouches||X.targetTouches[0].identifier==T)&&(q||(q=R.add(L||{})))){var Ue=R.wavesurfer.drawer.handleEvent(X),Ze=R.wavesurfer.regions.util.getRegionSnapToGridValue(Q*Z),De=R.wavesurfer.regions.util.getRegionSnapToGridValue(Ue*Z);if(q.update({start:Math.min(De,Ze),end:Math.max(De,Ze)}),K&&me.clientWidth<R.wrapper.scrollWidth){var xe=X.clientX-_e.left;(se=xe<=be?-1:xe>=_e.right-be?1:null)&&Ee(X)}}};this.wrapper.addEventListener("mousemove",le),this.wrapper.addEventListener("touchmove",le),this.on("disable-drag-selection",function(){R.wrapper.removeEventListener("touchmove",le),R.wrapper.removeEventListener("mousemove",le)}),this.wavesurfer.on("region-created",function(X){R.regionsMinLength&&(X.minLength=R.regionsMinLength)})}},{key:"disableDragSelection",value:function(){this.fireEvent("disable-drag-selection")}},{key:"getCurrentRegion",value:function(){var L=this,R=this.wavesurfer.getCurrentTime(),z=null;return Object.keys(this.list).forEach(function(ne){var Q=L.list[ne];Q.start<=R&&Q.end>=R&&(!z||Q.end-Q.start<z.end-z.start)&&(z=Q)}),z}},{key:"getRegionSnapToGridValue",value:function(L,R){if(R.snapToGridInterval){var z=R.snapToGridOffset||0;return Math.round((L-z)/R.snapToGridInterval)*R.snapToGridInterval+z}return L}}])&&u(b.prototype,w),S&&u(b,S),_}();i.default=h,e.exports=i.default},638:(e,i)=>{function r(a,l){for(var d=0;d<l.length;d++){var u=l[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}Object.defineProperty(i,"__esModule",{value:!0}),i.Region=void 0;var s=function(){function a(h,_,b){var w=this;(function(R,z){if(!(R instanceof z))throw new TypeError("Cannot call a class as a function")})(this,a),this.wavesurfer=b,this.wrapper=b.drawer.wrapper,this.util=b.util,this.style=this.util.style,this.regionsUtil=_,this.id=h.id==null?b.util.getId():h.id,this.start=Number(h.start)||0,this.end=h.end==null?this.start+4/this.wrapper.scrollWidth*this.wavesurfer.getDuration():Number(h.end),this.resize=h.resize===void 0||!!h.resize,this.drag=h.drag===void 0||!!h.drag,this.isResizing=!1,this.isDragging=!1,this.loop=!!h.loop,this.color=h.color||"rgba(0, 0, 0, 0.1)",this.handleStyle=h.handleStyle||{left:{},right:{}},this.handleLeftEl=null,this.handleRightEl=null,this.data=h.data||{},this.attributes=h.attributes||{},this.maxLength=h.maxLength,this.minLength=h.minLength,this._onRedraw=function(){return w.updateRender()},this.scroll=h.scroll!==!1&&b.params.scrollParent,this.scrollSpeed=h.scrollSpeed||1,this.scrollThreshold=h.scrollThreshold||10,this.preventContextMenu=h.preventContextMenu!==void 0&&!!h.preventContextMenu;var S=h.channelIdx==null?-1:parseInt(h.channelIdx);if(this.regionHeight="100%",this.marginTop="0px",S!==-1){var L=this.wavesurfer.backend.buffer!=null?this.wavesurfer.backend.buffer.numberOfChannels:-1;L>=0&&S<L&&(this.regionHeight=Math.floor(1/L*100)+"%",this.marginTop=this.wavesurfer.getHeight()*S+"px")}this.formatTimeCallback=h.formatTimeCallback,this.edgeScrollWidth=h.edgeScrollWidth,this.bindInOut(),this.render(),this.wavesurfer.on("zoom",this._onRedraw),this.wavesurfer.on("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-created",this)}var l,d,u;return l=a,(d=[{key:"update",value:function(h){h.start!=null&&(this.start=Number(h.start)),h.end!=null&&(this.end=Number(h.end)),h.loop!=null&&(this.loop=!!h.loop),h.color!=null&&(this.color=h.color),h.handleStyle!=null&&(this.handleStyle=h.handleStyle),h.data!=null&&(this.data=h.data),h.resize!=null&&(this.resize=!!h.resize,this.updateHandlesResize(this.resize)),h.drag!=null&&(this.drag=!!h.drag),h.maxLength!=null&&(this.maxLength=Number(h.maxLength)),h.minLength!=null&&(this.minLength=Number(h.minLength)),h.attributes!=null&&(this.attributes=h.attributes),this.updateRender(),this.fireEvent("update"),this.wavesurfer.fireEvent("region-updated",this)}},{key:"remove",value:function(){this.element&&(this.wrapper.removeChild(this.element),this.element=null,this.fireEvent("remove"),this.wavesurfer.un("zoom",this._onRedraw),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-removed",this))}},{key:"play",value:function(h){var _=h||this.start;this.wavesurfer.play(_,this.end),this.fireEvent("play"),this.wavesurfer.fireEvent("region-play",this)}},{key:"playLoop",value:function(h){this.loop=!0,this.play(h)}},{key:"setLoop",value:function(h){this.loop=h}},{key:"render",value:function(){var h=document.createElement("region");for(var _ in h.className="wavesurfer-region",h.title=this.formatTime(this.start,this.end),h.setAttribute("data-id",this.id),this.attributes)h.setAttribute("data-region-"+_,this.attributes[_]);if(this.style(h,{position:"absolute",zIndex:2,height:this.regionHeight,top:this.marginTop}),this.resize){this.handleLeftEl=h.appendChild(document.createElement("handle")),this.handleRightEl=h.appendChild(document.createElement("handle")),this.handleLeftEl.className="wavesurfer-handle wavesurfer-handle-start",this.handleRightEl.className="wavesurfer-handle wavesurfer-handle-end";var b={cursor:"col-resize",position:"absolute",top:"0px",width:"2px",height:"100%",backgroundColor:"rgba(0, 0, 0, 1)"},w=this.handleStyle.left!=="none"?Object.assign({left:"0px"},b,this.handleStyle.left):null,S=this.handleStyle.right!=="none"?Object.assign({right:"0px"},b,this.handleStyle.right):null;w&&this.style(this.handleLeftEl,w),S&&this.style(this.handleRightEl,S)}this.element=this.wrapper.appendChild(h),this.updateRender(),this.bindEvents(h)}},{key:"formatTime",value:function(h,_){return this.formatTimeCallback?this.formatTimeCallback(h,_):(h==_?[h]:[h,_]).map(function(b){return[Math.floor(b%3600/60),("00"+Math.floor(b%60)).slice(-2)].join(":")}).join("-")}},{key:"getWidth",value:function(){return this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio}},{key:"updateRender",value:function(){var h=this.wavesurfer.getDuration(),_=this.getWidth(),b=this.start,w=this.end;if(b<0&&(w-=b=0),w>h&&(b=h-((w=h)-b)),this.minLength!=null&&(w=Math.max(b+this.minLength,w)),this.maxLength!=null&&(w=Math.min(b+this.maxLength,w)),this.element!=null){var S=Math.round(b/h*_),L=Math.round(w/h*_)-S;for(var R in this.style(this.element,{left:S+"px",width:L+"px",backgroundColor:this.color,cursor:this.drag?"move":"default"}),this.attributes)this.element.setAttribute("data-region-"+R,this.attributes[R]);this.element.title=this.formatTime(this.start,this.end)}}},{key:"bindInOut",value:function(){var h=this;this.firedIn=!1,this.firedOut=!1;var _=function(b){var w=Math.round(10*h.start)/10,S=Math.round(10*h.end)/10;b=Math.round(10*b)/10,!h.firedOut&&h.firedIn&&(w>b||S<=b)&&(h.firedOut=!0,h.firedIn=!1,h.fireEvent("out"),h.wavesurfer.fireEvent("region-out",h)),!h.firedIn&&w<=b&&S>b&&(h.firedIn=!0,h.firedOut=!1,h.fireEvent("in"),h.wavesurfer.fireEvent("region-in",h))};this.wavesurfer.backend.on("audioprocess",_),this.on("remove",function(){h.wavesurfer.backend.un("audioprocess",_)}),this.on("out",function(){if(h.loop){var b=h.wavesurfer.getCurrentTime();b>=h.start&&b<=h.end&&h.wavesurfer.play(h.start)}})}},{key:"bindEvents",value:function(){var h=this,_=this.preventContextMenu;this.element.addEventListener("mouseenter",function(b){h.fireEvent("mouseenter",b),h.wavesurfer.fireEvent("region-mouseenter",h,b)}),this.element.addEventListener("mouseleave",function(b){h.fireEvent("mouseleave",b),h.wavesurfer.fireEvent("region-mouseleave",h,b)}),this.element.addEventListener("click",function(b){b.preventDefault(),h.fireEvent("click",b),h.wavesurfer.fireEvent("region-click",h,b)}),this.element.addEventListener("dblclick",function(b){b.stopPropagation(),b.preventDefault(),h.fireEvent("dblclick",b),h.wavesurfer.fireEvent("region-dblclick",h,b)}),this.element.addEventListener("contextmenu",function(b){_&&b.preventDefault(),h.fireEvent("contextmenu",b),h.wavesurfer.fireEvent("region-contextmenu",h,b)}),(this.drag||this.resize)&&this.bindDragEvents()}},{key:"bindDragEvents",value:function(){var h,_,b,w,S,L,R,z,ne,Q=this,q=this.wavesurfer.drawer.container,T=this.scrollSpeed,se=(this.scrollThreshold,!1),_e=function ue(be){var Z=Q.wavesurfer.getDuration();if(L&&(b||S)){var oe=be.clientX,Ee=0,Y=0,G=0,le=Q.regionsUtil.getRegionSnapToGridValue(Q.wavesurfer.drawer.handleEvent(be)*Z);if(b)L===-1?(Y=z*Q.wavesurfer.params.minPxPerSec,Ee=oe-R.left):(Y=ne*Q.wavesurfer.params.minPxPerSec,Ee=R.right-oe);else{var X=Q.minLength;X||(X=0),S==="start"?(le>Q.end-X&&(le=Q.end-X,G=T*L),le<0&&(le=0)):S==="end"&&(le<Q.start+X&&(le=Q.start+X,G=T*L),le>Z&&(le=Z))}if(L===-1){if(Math.round(Q.wrapper.scrollLeft)===0||Math.round(Q.wrapper.scrollLeft-Y+Ee)<=0)return}else if(Math.round(Q.wrapper.scrollLeft)===w||Math.round(Q.wrapper.scrollLeft+Y-Ee)>=w)return;var Ue=Q.wrapper.scrollLeft-G+T*L;if(L===-1){var Ze=Math.max(0+Y-Ee,Ue);Q.wrapper.scrollLeft=Ue=Ze}else{var De=Math.min(w-Y+Ee,Ue);Q.wrapper.scrollLeft=Ue=De}var xe=le-h;h=le,b?Q.onDrag(xe):Q.onResize(xe,S),window.requestAnimationFrame(function(){ue(be)})}},Me=function(ue){var be=Q.wavesurfer.getDuration();ue.touches&&ue.touches.length>1||(_=ue.targetTouches?ue.targetTouches[0].identifier:null,(Q.drag||Q.resize)&&ue.stopPropagation(),h=Q.regionsUtil.getRegionSnapToGridValue(Q.wavesurfer.drawer.handleEvent(ue,!0)*be),z=h-Q.start,ne=Q.end-h,w=Q.wrapper.scrollWidth-Q.wrapper.clientWidth,R=Q.wrapper.getBoundingClientRect(),Q.isResizing=!1,Q.isDragging=!1,ue.target.tagName.toLowerCase()==="handle"?(Q.isResizing=!0,S=ue.target.classList.contains("wavesurfer-handle-start")?"start":"end"):(Q.isDragging=!0,b=!0,S=!1))},me=function(ue){ue.touches&&ue.touches.length>1||((b||S)&&(Q.isDragging=!1,Q.isResizing=!1,b=!1,L=null,S=!1),se&&(se=!1,Q.util.preventClick(),Q.fireEvent("update-end",ue),Q.wavesurfer.fireEvent("region-update-end",Q,ue)))},K=function(ue){var be=Q.wavesurfer.getDuration();if(!(ue.touches&&ue.touches.length>1)&&(!ue.targetTouches||ue.targetTouches[0].identifier==_)&&(b||S)){var Z=Q.regionsUtil.getRegionSnapToGridValue(Q.wavesurfer.drawer.handleEvent(ue)*be);if(b){var oe=Q.wavesurfer.getDuration();Z>oe-ne&&(Z=oe-ne),Z-z<0&&(Z=z)}if(S){var Ee=Q.minLength;Ee||(Ee=0),S==="start"?(Z>Q.end-Ee&&(Z=Q.end-Ee),Z<0&&(Z=0)):S==="end"&&(Z<Q.start+Ee&&(Z=Q.start+Ee),Z>be&&(Z=be))}var Y=Z-h;if(h=Z,Q.drag&&b&&(se=se||!!Y,Q.onDrag(Y)),Q.resize&&S&&(se=se||!!Y,Q.onResize(Y,S)),Q.scroll&&q.clientWidth<Q.wrapper.scrollWidth){if(b){var G=ue.clientX;L=G<R.left+Q.edgeScrollWidth?-1:G>R.right-Q.edgeScrollWidth?1:null}else{var le=ue.clientX;L=le<R.left+Q.edgeScrollWidth?-1:le>R.right-Q.edgeScrollWidth?1:null}L&&_e(ue)}}};this.element.addEventListener("mousedown",Me),this.element.addEventListener("touchstart",Me),document.body.addEventListener("mousemove",K),document.body.addEventListener("touchmove",K),document.body.addEventListener("mouseup",me),document.body.addEventListener("touchend",me),this.on("remove",function(){document.body.removeEventListener("mouseup",me),document.body.removeEventListener("touchend",me),document.body.removeEventListener("mousemove",K),document.body.removeEventListener("touchmove",K)}),this.wavesurfer.on("destroy",function(){document.body.removeEventListener("mouseup",me),document.body.removeEventListener("touchend",me)})}},{key:"onDrag",value:function(h){var _=this.wavesurfer.getDuration();this.end+h>_&&(h=_-this.end),this.start+h<0&&(h=-1*this.start),this.update({start:this.start+h,end:this.end+h})}},{key:"onResize",value:function(h,_){var b=this.wavesurfer.getDuration();_==="start"?(h>0&&this.end-(this.start+h)<this.minLength&&(h=this.end-this.minLength-this.start),h<0&&this.start+h<0&&(h=-1*this.start),this.update({start:Math.min(this.start+h,this.end),end:Math.max(this.start+h,this.end)})):(h<0&&this.end+h-this.start<this.minLength&&(h=this.start+this.minLength-this.end),h>0&&this.end+h>b&&(h=b-this.end),this.update({start:Math.min(this.end+h,this.start),end:Math.max(this.end+h,this.start)}))}},{key:"updateHandlesResize",value:function(h){var _=h?"col-resize":"auto";this.handleLeftEl&&this.style(this.handleLeftEl,{cursor:_}),this.handleRightEl&&this.style(this.handleRightEl,{cursor:_})}}])&&r(l.prototype,d),u&&r(l,u),a}();i.Region=s}},n={};return function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{}};return t[i](r,r.exports,e),r.exports}(23)})()})});var E7=et((af,zw)=>{(function(n,e){typeof af=="object"&&typeof zw=="object"?zw.exports=e():typeof define=="function"&&define.amd?define("WaveSurfer",[],e):typeof af=="object"?af.WaveSurfer=e():n.WaveSurfer=e()})(af,function(){return(()=>{var t={"./src/drawer.canvasentry.js":(r,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(a("./src/util/style.js")),d=u(a("./src/util/get-id.js"));function u(S){return S&&S.__esModule?S:{default:S}}function h(S,L){if(!(S instanceof L))throw new TypeError("Cannot call a class as a function")}function _(S,L){for(var R=0;R<L.length;R++){var z=L[R];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(S,z.key,z)}}function b(S,L,R){return L&&_(S.prototype,L),R&&_(S,R),S}var w=function(){function S(){h(this,S),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,d.default)(typeof this.constructor.name<"u"?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}return b(S,[{key:"initWave",value:function(R){this.wave=R,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(R){this.progress=R,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(R,z,ne,Q){this.start=this.wave.offsetLeft/z||0,this.end=this.start+R/z,this.wave.width=ne,this.wave.height=Q;var q={width:R+"px"};(0,l.default)(this.wave,q),this.hasProgressCanvas&&(this.progress.width=ne,this.progress.height=Q,(0,l.default)(this.progress,q))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(R,z){this.waveCtx.fillStyle=R,this.hasProgressCanvas&&(this.progressCtx.fillStyle=z)}},{key:"fillRects",value:function(R,z,ne,Q,q){this.fillRectToContext(this.waveCtx,R,z,ne,Q,q),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,R,z,ne,Q,q)}},{key:"fillRectToContext",value:function(R,z,ne,Q,q,T){R&&(T?this.drawRoundedRect(R,z,ne,Q,q,T):R.fillRect(z,ne,Q,q))}},{key:"drawRoundedRect",value:function(R,z,ne,Q,q,T){q!==0&&(q<0&&(q*=-1,ne-=q),R.beginPath(),R.moveTo(z+T,ne),R.lineTo(z+Q-T,ne),R.quadraticCurveTo(z+Q,ne,z+Q,ne+T),R.lineTo(z+Q,ne+q-T),R.quadraticCurveTo(z+Q,ne+q,z+Q-T,ne+q),R.lineTo(z+T,ne+q),R.quadraticCurveTo(z,ne+q,z,ne+q-T),R.lineTo(z,ne+T),R.quadraticCurveTo(z,ne,z+T,ne),R.closePath(),R.fill())}},{key:"drawLines",value:function(R,z,ne,Q,q,T){this.drawLineToContext(this.waveCtx,R,z,ne,Q,q,T),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,R,z,ne,Q,q,T)}},{key:"drawLineToContext",value:function(R,z,ne,Q,q,T,se){if(R){var _e=z.length/2,Me=Math.round(_e*this.start),me=Math.round(_e*this.end)+1,K=Me,ue=me,be=this.wave.width/(ue-K-1),Z=Q+q,oe=ne/Q;R.beginPath(),R.moveTo((K-Me)*be,Z),R.lineTo((K-Me)*be,Z-Math.round((z[2*K]||0)/oe));var Ee,Y,G;for(Ee=K;Ee<ue;Ee++)Y=z[2*Ee]||0,G=Math.round(Y/oe),R.lineTo((Ee-Me)*be+this.halfPixel,Z-G);var le=ue-1;for(le;le>=K;le--)Y=z[2*le+1]||0,G=Math.round(Y/oe),R.lineTo((le-Me)*be+this.halfPixel,Z-G);R.lineTo((K-Me)*be,Z-Math.round((z[2*K+1]||0)/oe)),R.closePath(),R.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(R,z,ne){var Q=this;if(ne==="blob")return new Promise(function(q){Q.wave.toBlob(q,R,z)});if(ne==="dataURL")return this.wave.toDataURL(R,z)}}]),S}();s.default=w,r.exports=s.default},"./src/drawer.js":(r,s,a)=>{"use strict";function l(se){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l=function(Me){return typeof Me}:l=function(Me){return Me&&typeof Symbol=="function"&&Me.constructor===Symbol&&Me!==Symbol.prototype?"symbol":typeof Me},l(se)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var d=h(a("./src/util/index.js"));function u(){if(typeof WeakMap!="function")return null;var se=new WeakMap;return u=function(){return se},se}function h(se){if(se&&se.__esModule)return se;if(se===null||l(se)!=="object"&&typeof se!="function")return{default:se};var _e=u();if(_e&&_e.has(se))return _e.get(se);var Me={},me=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in se)if(Object.prototype.hasOwnProperty.call(se,K)){var ue=me?Object.getOwnPropertyDescriptor(se,K):null;ue&&(ue.get||ue.set)?Object.defineProperty(Me,K,ue):Me[K]=se[K]}return Me.default=se,_e&&_e.set(se,Me),Me}function _(se,_e){if(!(se instanceof _e))throw new TypeError("Cannot call a class as a function")}function b(se,_e){for(var Me=0;Me<_e.length;Me++){var me=_e[Me];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(se,me.key,me)}}function w(se,_e,Me){return _e&&b(se.prototype,_e),Me&&b(se,Me),se}function S(se,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function");se.prototype=Object.create(_e&&_e.prototype,{constructor:{value:se,writable:!0,configurable:!0}}),_e&&L(se,_e)}function L(se,_e){return L=Object.setPrototypeOf||function(me,K){return me.__proto__=K,me},L(se,_e)}function R(se){var _e=Q();return function(){var me=q(se),K;if(_e){var ue=q(this).constructor;K=Reflect.construct(me,arguments,ue)}else K=me.apply(this,arguments);return z(this,K)}}function z(se,_e){return _e&&(l(_e)==="object"||typeof _e=="function")?_e:ne(se)}function ne(se){if(se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se}function Q(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function q(se){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(Me){return Me.__proto__||Object.getPrototypeOf(Me)},q(se)}var T=function(se){S(Me,se);var _e=R(Me);function Me(me,K){var ue;return _(this,Me),ue=_e.call(this),ue.container=me,ue.params=K,ue.width=0,ue.height=K.height*ue.params.pixelRatio,ue.lastPos=0,ue.wrapper=null,ue}return w(Me,[{key:"style",value:function(K,ue){return d.style(K,ue)}},{key:"createWrapper",value:function(){this.wrapper=this.container.appendChild(document.createElement("wave")),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(K,ue){!ue&&K.preventDefault();var be=K.targetTouches?K.targetTouches[0].clientX:K.clientX,Z=this.wrapper.getBoundingClientRect(),oe=this.width,Ee=this.getWidth(),Y;return!this.params.fillParent&&oe<Ee?Y=(this.params.rtl?Z.right-be:be-Z.left)*(this.params.pixelRatio/oe)||0:Y=((this.params.rtl?Z.right-be:be-Z.left)+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,d.clamp(Y,0,1)}},{key:"setupWrapperEvents",value:function(){var K=this;this.wrapper.addEventListener("click",function(ue){var be=K.wrapper.offsetHeight-K.wrapper.clientHeight;if(be!==0){var Z=K.wrapper.getBoundingClientRect();if(ue.clientY>=Z.bottom-be)return}K.params.interact&&K.fireEvent("click",ue,K.handleEvent(ue))}),this.wrapper.addEventListener("dblclick",function(ue){K.params.interact&&K.fireEvent("dblclick",ue,K.handleEvent(ue))}),this.wrapper.addEventListener("scroll",function(ue){return K.fireEvent("scroll",ue)})}},{key:"drawPeaks",value:function(K,ue,be,Z){this.setWidth(ue)||this.clearWave(),this.params.barWidth?this.drawBars(K,0,be,Z):this.drawWave(K,0,be,Z)}},{key:"resetScroll",value:function(){this.wrapper!==null&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(K){var ue=this.wrapper.scrollWidth*K;this.recenterOnPosition(ue,!0)}},{key:"recenterOnPosition",value:function(K,ue){var be=this.wrapper.scrollLeft,Z=~~(this.wrapper.clientWidth/2),oe=this.wrapper.scrollWidth-this.wrapper.clientWidth,Ee=K-Z,Y=Ee-be;if(oe!=0){if(!ue&&-Z<=Y&&Y<Z){var G=this.params.autoCenterRate;G/=Z,G*=oe,Y=Math.max(-G,Math.min(G,Y)),Ee=be+Y}Ee=Math.max(0,Math.min(oe,Ee)),Ee!=be&&(this.wrapper.scrollLeft=Ee)}}},{key:"getScrollX",value:function(){var K=0;if(this.wrapper){var ue=this.params.pixelRatio;if(K=Math.round(this.wrapper.scrollLeft*ue),this.params.scrollParent){var be=~~(this.wrapper.scrollWidth*ue-this.getWidth());K=Math.min(be,Math.max(0,K))}}return K}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(K){return this.width==K?!1:(this.width=K,this.params.fillParent||this.params.scrollParent?this.style(this.wrapper,{width:""}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"setHeight",value:function(K){return K==this.height?!1:(this.height=K,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(K){var ue=1/this.params.pixelRatio,be=Math.round(K*this.width)*ue;if(be<this.lastPos||be-this.lastPos>=ue){if(this.lastPos=be,this.params.scrollParent&&this.params.autoCenter){var Z=~~(this.wrapper.scrollWidth*K);this.recenterOnPosition(Z,this.params.autoCenterImmediately)}this.updateProgress(be)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container&&this.container.removeChild(this.wrapper),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(K,ue,be,Z){}},{key:"drawWave",value:function(K,ue,be,Z){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(K){}}]),Me}(d.Observer);s.default=T,r.exports=s.default},"./src/drawer.multicanvas.js":(r,s,a)=>{"use strict";function l(me){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l=function(ue){return typeof ue}:l=function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},l(me)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var d=w(a("./src/drawer.js")),u=b(a("./src/util/index.js")),h=w(a("./src/drawer.canvasentry.js"));function _(){if(typeof WeakMap!="function")return null;var me=new WeakMap;return _=function(){return me},me}function b(me){if(me&&me.__esModule)return me;if(me===null||l(me)!=="object"&&typeof me!="function")return{default:me};var K=_();if(K&&K.has(me))return K.get(me);var ue={},be=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in me)if(Object.prototype.hasOwnProperty.call(me,Z)){var oe=be?Object.getOwnPropertyDescriptor(me,Z):null;oe&&(oe.get||oe.set)?Object.defineProperty(ue,Z,oe):ue[Z]=me[Z]}return ue.default=me,K&&K.set(me,ue),ue}function w(me){return me&&me.__esModule?me:{default:me}}function S(me,K){if(!(me instanceof K))throw new TypeError("Cannot call a class as a function")}function L(me,K){for(var ue=0;ue<K.length;ue++){var be=K[ue];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(me,be.key,be)}}function R(me,K,ue){return K&&L(me.prototype,K),ue&&L(me,ue),me}function z(me,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");me.prototype=Object.create(K&&K.prototype,{constructor:{value:me,writable:!0,configurable:!0}}),K&&ne(me,K)}function ne(me,K){return ne=Object.setPrototypeOf||function(be,Z){return be.__proto__=Z,be},ne(me,K)}function Q(me){var K=se();return function(){var be=_e(me),Z;if(K){var oe=_e(this).constructor;Z=Reflect.construct(be,arguments,oe)}else Z=be.apply(this,arguments);return q(this,Z)}}function q(me,K){return K&&(l(K)==="object"||typeof K=="function")?K:T(me)}function T(me){if(me===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return me}function se(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _e(me){return _e=Object.setPrototypeOf?Object.getPrototypeOf:function(ue){return ue.__proto__||Object.getPrototypeOf(ue)},_e(me)}var Me=function(me){z(ue,me);var K=Q(ue);function ue(be,Z){var oe;return S(this,ue),oe=K.call(this,be,Z),oe.maxCanvasWidth=Z.maxCanvasWidth,oe.maxCanvasElementWidth=Math.round(Z.maxCanvasWidth/Z.pixelRatio),oe.hasProgressCanvas=Z.waveColor!=Z.progressColor,oe.halfPixel=.5/Z.pixelRatio,oe.canvases=[],oe.progressWave=null,oe.EntryClass=h.default,oe.canvasContextAttributes=Z.drawingContextAttributes,oe.overlap=2*Math.ceil(Z.pixelRatio/2),oe.barRadius=Z.barRadius||0,oe}return R(ue,[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"})),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var Z=this,oe=Math.round(this.width/this.params.pixelRatio),Ee=Math.ceil(oe/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<Ee;)this.addCanvas();for(;this.canvases.length>Ee;)this.removeCanvas();var Y=this.maxCanvasWidth+this.overlap,G=this.canvases.length-1;this.canvases.forEach(function(le,X){X==G&&(Y=Z.width-Z.maxCanvasWidth*G),Z.updateDimensions(le,Y,Z.height),le.clearWave()})}},{key:"addCanvas",value:function(){var Z=new this.EntryClass;Z.canvasContextAttributes=this.canvasContextAttributes,Z.hasProgressCanvas=this.hasProgressCanvas,Z.halfPixel=this.halfPixel;var oe=this.maxCanvasElementWidth*this.canvases.length;Z.initWave(this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:2,left:oe+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}))),this.hasProgressCanvas&&Z.initProgress(this.progressWave.appendChild(this.style(document.createElement("canvas"),{position:"absolute",left:oe+"px",top:0,bottom:0,height:"100%"}))),this.canvases.push(Z)}},{key:"removeCanvas",value:function(){var Z=this.canvases[this.canvases.length-1];Z.wave.parentElement.removeChild(Z.wave),this.hasProgressCanvas&&Z.progress.parentElement.removeChild(Z.progress),Z&&(Z.destroy(),Z=null),this.canvases.pop()}},{key:"updateDimensions",value:function(Z,oe,Ee){var Y=Math.round(oe/this.params.pixelRatio),G=Math.round(this.width/this.params.pixelRatio);Z.updateDimensions(Y,G,oe,Ee),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var Z=this;u.frame(function(){Z.canvases.forEach(function(oe){return oe.clearWave()})})()}},{key:"drawBars",value:function(Z,oe,Ee,Y){var G=this;return this.prepareDraw(Z,oe,Ee,Y,function(le){var X=le.absmax,Ue=le.hasMinVals,Ze=le.height,De=le.offsetY,xe=le.halfH,ke=le.peaks,Ve=le.channelIndex;if(Ee!==void 0){var it=Ue?2:1,Je=ke.length/it,st=G.params.barWidth*G.params.pixelRatio,ot=G.params.barGap===null?Math.max(G.params.pixelRatio,~~(st/2)):Math.max(G.params.pixelRatio,G.params.barGap*G.params.pixelRatio),pn=st+ot,tn=Je/G.width,Tt=Ee,mt=Y,Mn=Tt;for(Mn;Mn<mt;Mn+=pn){var vt=ke[Math.floor(Mn*tn*it)]||0,Nn=Math.round(vt/X*xe);Nn==0&&G.params.barMinHeight&&(Nn=G.params.barMinHeight),G.fillRect(Mn+G.halfPixel,xe-Nn+De,st+G.halfPixel,Nn*2,G.barRadius,Ve)}}})}},{key:"drawWave",value:function(Z,oe,Ee,Y){var G=this;return this.prepareDraw(Z,oe,Ee,Y,function(le){var X=le.absmax,Ue=le.hasMinVals,Ze=le.height,De=le.offsetY,xe=le.halfH,ke=le.peaks,Ve=le.channelIndex;if(!Ue){var it=[],Je=ke.length,st=0;for(st;st<Je;st++)it[2*st]=ke[st],it[2*st+1]=-ke[st];ke=it}Ee!==void 0&&G.drawLine(ke,X,xe,De,Ee,Y,Ve),G.fillRect(0,xe+De-G.halfPixel,G.width,G.halfPixel,G.barRadius,Ve)})}},{key:"drawLine",value:function(Z,oe,Ee,Y,G,le,X){var Ue=this,Ze=this.params.splitChannelsOptions.channelColors[X]||{},De=Ze.waveColor,xe=Ze.progressColor;this.canvases.forEach(function(ke,Ve){Ue.setFillStyles(ke,De,xe),ke.drawLines(Z,oe,Ee,Y,G,le)})}},{key:"fillRect",value:function(Z,oe,Ee,Y,G,le){var X=Math.floor(Z/this.maxCanvasWidth),Ue=Math.min(Math.ceil((Z+Ee)/this.maxCanvasWidth)+1,this.canvases.length),Ze=X;for(Ze;Ze<Ue;Ze++){var De=this.canvases[Ze],xe=Ze*this.maxCanvasWidth,ke={x1:Math.max(Z,Ze*this.maxCanvasWidth),y1:oe,x2:Math.min(Z+Ee,Ze*this.maxCanvasWidth+De.wave.width),y2:oe+Y};if(ke.x1<ke.x2){var Ve=this.params.splitChannelsOptions.channelColors[le]||{},it=Ve.waveColor,Je=Ve.progressColor;this.setFillStyles(De,it,Je),De.fillRects(ke.x1-xe,ke.y1,ke.x2-ke.x1,ke.y2-ke.y1,G)}}}},{key:"hideChannel",value:function(Z){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(Z)}},{key:"prepareDraw",value:function(Z,oe,Ee,Y,G,le,X){var Ue=this;return u.frame(function(){if(Z[0]instanceof Array){var Ze=Z;if(Ue.params.splitChannels){var De=Ze.filter(function(ot,pn){return!Ue.hideChannel(pn)});Ue.params.splitChannelsOptions.overlay||Ue.setHeight(Math.max(De.length,1)*Ue.params.height*Ue.params.pixelRatio);var xe;return Ue.params.splitChannelsOptions&&Ue.params.splitChannelsOptions.relativeNormalization&&(xe=u.max(Ze.map(function(ot){return u.absMax(ot)}))),Ze.forEach(function(ot,pn){return Ue.prepareDraw(ot,pn,Ee,Y,G,De.indexOf(ot),xe)})}Z=Ze[0]}if(!Ue.hideChannel(oe)){var ke=1/Ue.params.barHeight;Ue.params.normalize&&(ke=X===void 0?u.absMax(Z):X);var Ve=[].some.call(Z,function(ot){return ot<0}),it=Ue.params.height*Ue.params.pixelRatio,Je=it/2,st=it*le||0;return Ue.params.splitChannelsOptions&&Ue.params.splitChannelsOptions.overlay&&(st=0),G({absmax:ke,hasMinVals:Ve,height:it,offsetY:st,halfH:Je,peaks:Z,channelIndex:oe})}})()}},{key:"setFillStyles",value:function(Z){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.params.waveColor,Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.params.progressColor;Z.setFillStyles(oe,Ee)}},{key:"getImage",value:function(Z,oe,Ee){if(Ee==="blob")return Promise.all(this.canvases.map(function(G){return G.getImage(Z,oe,Ee)}));if(Ee==="dataURL"){var Y=this.canvases.map(function(G){return G.getImage(Z,oe,Ee)});return Y.length>1?Y:Y[0]}}},{key:"updateProgress",value:function(Z){this.style(this.progressWave,{width:Z+"px"})}}]),ue}(d.default);s.default=Me,r.exports=s.default},"./src/mediaelement-webaudio.js":(r,s,a)=>{"use strict";function l(_e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l=function(me){return typeof me}:l=function(me){return me&&typeof Symbol=="function"&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":typeof me},l(_e)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var d=u(a("./src/mediaelement.js"));function u(_e){return _e&&_e.__esModule?_e:{default:_e}}function h(_e,Me){if(!(_e instanceof Me))throw new TypeError("Cannot call a class as a function")}function _(_e,Me){for(var me=0;me<Me.length;me++){var K=Me[me];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(_e,K.key,K)}}function b(_e,Me,me){return Me&&_(_e.prototype,Me),me&&_(_e,me),_e}function w(_e,Me,me){return typeof Reflect<"u"&&Reflect.get?w=Reflect.get:w=function(ue,be,Z){var oe=S(ue,be);if(oe){var Ee=Object.getOwnPropertyDescriptor(oe,be);return Ee.get?Ee.get.call(Z):Ee.value}},w(_e,Me,me||_e)}function S(_e,Me){for(;!Object.prototype.hasOwnProperty.call(_e,Me)&&(_e=T(_e),_e!==null););return _e}function L(_e,Me){if(typeof Me!="function"&&Me!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(Me&&Me.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Me&&R(_e,Me)}function R(_e,Me){return R=Object.setPrototypeOf||function(K,ue){return K.__proto__=ue,K},R(_e,Me)}function z(_e){var Me=q();return function(){var K=T(_e),ue;if(Me){var be=T(this).constructor;ue=Reflect.construct(K,arguments,be)}else ue=K.apply(this,arguments);return ne(this,ue)}}function ne(_e,Me){return Me&&(l(Me)==="object"||typeof Me=="function")?Me:Q(_e)}function Q(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function q(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function T(_e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(me){return me.__proto__||Object.getPrototypeOf(me)},T(_e)}var se=function(_e){L(me,_e);var Me=z(me);function me(K){var ue;return h(this,me),ue=Me.call(this,K),ue.params=K,ue.sourceMediaElement=null,ue}return b(me,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(ue,be,Z){w(T(me.prototype),"_load",this).call(this,ue,be,Z),this.createMediaElementSource(ue)}},{key:"createMediaElementSource",value:function(ue){this.sourceMediaElement=this.ac.createMediaElementSource(ue),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(ue,be){return this.resumeAudioContext(),w(T(me.prototype),"play",this).call(this,ue,be)}},{key:"destroy",value:function(){w(T(me.prototype),"destroy",this).call(this),this.destroyWebAudio()}}]),me}(d.default);s.default=se,r.exports=s.default},"./src/mediaelement.js":(r,s,a)=>{"use strict";function l(K){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l=function(be){return typeof be}:l=function(be){return be&&typeof Symbol=="function"&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be},l(K)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var d=b(a("./src/webaudio.js")),u=_(a("./src/util/index.js"));function h(){if(typeof WeakMap!="function")return null;var K=new WeakMap;return h=function(){return K},K}function _(K){if(K&&K.__esModule)return K;if(K===null||l(K)!=="object"&&typeof K!="function")return{default:K};var ue=h();if(ue&&ue.has(K))return ue.get(K);var be={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var oe in K)if(Object.prototype.hasOwnProperty.call(K,oe)){var Ee=Z?Object.getOwnPropertyDescriptor(K,oe):null;Ee&&(Ee.get||Ee.set)?Object.defineProperty(be,oe,Ee):be[oe]=K[oe]}return be.default=K,ue&&ue.set(K,be),be}function b(K){return K&&K.__esModule?K:{default:K}}function w(K,ue){if(!(K instanceof ue))throw new TypeError("Cannot call a class as a function")}function S(K,ue){for(var be=0;be<ue.length;be++){var Z=ue[be];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(K,Z.key,Z)}}function L(K,ue,be){return ue&&S(K.prototype,ue),be&&S(K,be),K}function R(K,ue,be){return typeof Reflect<"u"&&Reflect.get?R=Reflect.get:R=function(oe,Ee,Y){var G=z(oe,Ee);if(G){var le=Object.getOwnPropertyDescriptor(G,Ee);return le.get?le.get.call(Y):le.value}},R(K,ue,be||K)}function z(K,ue){for(;!Object.prototype.hasOwnProperty.call(K,ue)&&(K=Me(K),K!==null););return K}function ne(K,ue){if(typeof ue!="function"&&ue!==null)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(ue&&ue.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),ue&&Q(K,ue)}function Q(K,ue){return Q=Object.setPrototypeOf||function(Z,oe){return Z.__proto__=oe,Z},Q(K,ue)}function q(K){var ue=_e();return function(){var Z=Me(K),oe;if(ue){var Ee=Me(this).constructor;oe=Reflect.construct(Z,arguments,Ee)}else oe=Z.apply(this,arguments);return T(this,oe)}}function T(K,ue){return ue&&(l(ue)==="object"||typeof ue=="function")?ue:se(K)}function se(K){if(K===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K}function _e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Me(K){return Me=Object.setPrototypeOf?Object.getPrototypeOf:function(be){return be.__proto__||Object.getPrototypeOf(be)},Me(K)}var me=function(K){ne(be,K);var ue=q(be);function be(Z){var oe;return w(this,be),oe=ue.call(this,Z),oe.params=Z,oe.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},oe.mediaType=Z.mediaType.toLowerCase(),oe.elementPosition=Z.elementPosition,oe.peaks=null,oe.playbackRate=1,oe.volume=1,oe.isMuted=!1,oe.buffer=null,oe.onPlayEnd=null,oe.mediaListeners={},oe}return L(be,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var oe=this;this.mediaListeners.error=function(){oe.fireEvent("error","Error loading media element")},this.mediaListeners.canplay=function(){oe.fireEvent("canplay")},this.mediaListeners.ended=function(){oe.fireEvent("finish")},this.mediaListeners.play=function(){oe.fireEvent("play")},this.mediaListeners.pause=function(){oe.fireEvent("pause")},this.mediaListeners.seeked=function(Ee){oe.fireEvent("seek")},this.mediaListeners.volumechange=function(Ee){oe.isMuted=oe.media.muted,oe.isMuted?oe.volume=0:oe.volume=oe.media.volume,oe.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(Ee){oe.media.removeEventListener(Ee,oe.mediaListeners[Ee]),oe.media.addEventListener(Ee,oe.mediaListeners[Ee])})}},{key:"createTimer",value:function(){var oe=this,Ee=function Y(){oe.isPaused()||(oe.fireEvent("audioprocess",oe.getCurrentTime()),u.frame(Y)())};this.on("play",Ee),this.on("pause",function(){oe.fireEvent("audioprocess",oe.getCurrentTime())})}},{key:"load",value:function(oe,Ee,Y,G){var le=document.createElement(this.mediaType);le.controls=this.params.mediaControls,le.autoplay=this.params.autoplay||!1,le.preload=G??"auto",le.src=oe,le.style.width="100%";var X=Ee.querySelector(this.mediaType);X&&Ee.removeChild(X),Ee.appendChild(le),this._load(le,Y,G)}},{key:"loadElt",value:function(oe,Ee){oe.controls=this.params.mediaControls,oe.autoplay=this.params.autoplay||!1,this._load(oe,Ee,oe.preload)}},{key:"_load",value:function(oe,Ee,Y){if(!(oe instanceof HTMLMediaElement)||typeof oe.addEventListener>"u")throw new Error("media parameter is not a valid media element");typeof oe.load=="function"&&!(Ee&&Y=="none")&&oe.load(),this.media=oe,this._setupMediaListeners(),this.peaks=Ee,this.onPlayEnd=null,this.buffer=null,this.isMuted=oe.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var oe=(this.buffer||this.media).duration;return oe>=1/0&&(oe=this.media.seekable.end(0)),oe}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(oe){this.playbackRate=oe||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(oe){oe!=null&&(this.media.currentTime=oe),this.clearPlayEnd()}},{key:"play",value:function(oe,Ee){this.seekTo(oe);var Y=this.media.play();return Ee&&this.setPlayEnd(Ee),Y}},{key:"pause",value:function(){var oe;return this.media&&(oe=this.media.pause()),this.clearPlayEnd(),oe}},{key:"setPlayEnd",value:function(oe){var Ee=this;this.clearPlayEnd(),this._onPlayEnd=function(Y){Y>=oe&&(Ee.pause(),Ee.seekTo(oe))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(oe,Ee,Y){return this.buffer?R(Me(be.prototype),"getPeaks",this).call(this,oe,Ee,Y):this.peaks||[]}},{key:"setSinkId",value:function(oe){return oe?this.media.setSinkId?this.media.setSinkId(oe):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+oe))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(oe){this.volume=oe,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(oe){this.isMuted=this.media.muted=oe}},{key:"destroy",value:function(){var oe=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(Ee){oe.media&&oe.media.removeEventListener(Ee,oe.mediaListeners[Ee])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}]),be}(d.default);s.default=me,r.exports=s.default},"./src/peakcache.js":(r,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;function a(h,_){if(!(h instanceof _))throw new TypeError("Cannot call a class as a function")}function l(h,_){for(var b=0;b<_.length;b++){var w=_[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(h,w.key,w)}}function d(h,_,b){return _&&l(h.prototype,_),b&&l(h,b),h}var u=function(){function h(){a(this,h),this.clearPeakCache()}return d(h,[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(b,w,S){b!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=b);for(var L=[],R=0;R<this.peakCacheRanges.length&&this.peakCacheRanges[R]<w;)R++;for(R%2==0&&L.push(w);R<this.peakCacheRanges.length&&this.peakCacheRanges[R]<=S;)L.push(this.peakCacheRanges[R]),R++;R%2==0&&L.push(S),L=L.filter(function(ne,Q,q){return Q==0?ne!=q[Q+1]:Q==q.length-1?ne!=q[Q-1]:ne!=q[Q-1]&&ne!=q[Q+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(L),this.peakCacheRanges=this.peakCacheRanges.sort(function(ne,Q){return ne-Q}).filter(function(ne,Q,q){return Q==0?ne!=q[Q+1]:Q==q.length-1?ne!=q[Q-1]:ne!=q[Q-1]&&ne!=q[Q+1]});var z=[];for(R=0;R<L.length;R+=2)z.push([L[R],L[R+1]]);return z}},{key:"getCacheRanges",value:function(){var b=[],w;for(w=0;w<this.peakCacheRanges.length;w+=2)b.push([this.peakCacheRanges[w],this.peakCacheRanges[w+1]]);return b}}]),h}();s.default=u,r.exports=s.default},"./src/util/absMax.js":(r,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=h;var l=u(a("./src/util/max.js")),d=u(a("./src/util/min.js"));function u(_){return _&&_.__esModule?_:{default:_}}function h(_){var b=(0,l.default)(_),w=(0,d.default)(_);return-w>b?-w:b}r.exports=s.default},"./src/util/clamp.js":(r,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=a;function a(l,d,u){return Math.min(Math.max(d,l),u)}r.exports=s.default},"./src/util/fetch.js":(r,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=w;var l=d(a("./src/util/observer.js"));function d(S){return S&&S.__esModule?S:{default:S}}function u(S,L){if(!(S instanceof L))throw new TypeError("Cannot call a class as a function")}function h(S,L){for(var R=0;R<L.length;R++){var z=L[R];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(S,z.key,z)}}function _(S,L,R){return L&&h(S.prototype,L),R&&h(S,R),S}var b=function(){function S(L,R,z){u(this,S),this.instance=L,this.instance._reader=z.body.getReader(),this.total=parseInt(R,10),this.loaded=0}return _(S,[{key:"start",value:function(R){var z=this,ne=function Q(){z.instance._reader.read().then(function(q){var T=q.done,se=q.value;if(T){z.total===0&&z.instance.onProgress.call(z.instance,{loaded:z.loaded,total:z.total,lengthComputable:!1}),R.close();return}z.loaded+=se.byteLength,z.instance.onProgress.call(z.instance,{loaded:z.loaded,total:z.total,lengthComputable:z.total!==0}),R.enqueue(se),Q()}).catch(function(q){R.error(q)})};ne()}}]),S}();function w(S){if(S){if(!S.url)throw new Error("fetch url missing")}else throw new Error("fetch options missing");var L=new l.default,R=new Headers,z=new Request(S.url);L.controller=new AbortController,S&&S.requestHeaders&&S.requestHeaders.forEach(function(q){R.append(q.key,q.value)});var ne=S.responseType||"json",Q={method:S.method||"GET",headers:R,mode:S.mode||"cors",credentials:S.credentials||"same-origin",cache:S.cache||"default",redirect:S.redirect||"follow",referrer:S.referrer||"client",signal:L.controller.signal};return fetch(z,Q).then(function(q){L.response=q;var T=!0;q.body||(T=!1);var se=q.headers.get("content-length");return se===null&&(T=!1),T?(L.onProgress=function(_e){L.fireEvent("progress",_e)},new Response(new ReadableStream(new b(L,se,q)),Q)):q}).then(function(q){var T;if(q.ok)switch(ne){case"arraybuffer":return q.arrayBuffer();case"json":return q.json();case"blob":return q.blob();case"text":return q.text();default:T="Unknown responseType: "+ne;break}throw T||(T="HTTP error status: "+q.status),new Error(T)}).then(function(q){L.fireEvent("success",q)}).catch(function(q){L.fireEvent("error",q)}),L.fetchRequest=z,L}r.exports=s.default},"./src/util/frame.js":(r,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=u;var l=d(a("./src/util/request-animation-frame.js"));function d(h){return h&&h.__esModule?h:{default:h}}function u(h){return function(){for(var _=arguments.length,b=new Array(_),w=0;w<_;w++)b[w]=arguments[w];return(0,l.default)(function(){return h.apply(void 0,b)})}}r.exports=s.default},"./src/util/get-id.js":(r,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=a;function a(l){return l===void 0&&(l="wavesurfer_"),l+Math.random().toString(32).substring(2)}r.exports=s.default},"./src/util/index.js":(r,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"getId",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(s,"max",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(s,"min",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(s,"absMax",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(s,"Observer",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(s,"style",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(s,"requestAnimationFrame",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(s,"frame",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(s,"debounce",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(s,"preventClick",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(s,"fetchFile",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(s,"clamp",{enumerable:!0,get:function(){return ne.default}});var l=Q(a("./src/util/get-id.js")),d=Q(a("./src/util/max.js")),u=Q(a("./src/util/min.js")),h=Q(a("./src/util/absMax.js")),_=Q(a("./src/util/observer.js")),b=Q(a("./src/util/style.js")),w=Q(a("./src/util/request-animation-frame.js")),S=Q(a("./src/util/frame.js")),L=Q(a("./node_modules/debounce/index.js")),R=Q(a("./src/util/prevent-click.js")),z=Q(a("./src/util/fetch.js")),ne=Q(a("./src/util/clamp.js"));function Q(q){return q&&q.__esModule?q:{default:q}}},"./src/util/max.js":(r,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=a;function a(l){var d=-1/0;return Object.keys(l).forEach(function(u){l[u]>d&&(d=l[u])}),d}r.exports=s.default},"./src/util/min.js":(r,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=a;function a(l){var d=1/0;return Object.keys(l).forEach(function(u){l[u]<d&&(d=l[u])}),d}r.exports=s.default},"./src/util/observer.js":(r,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;function a(h,_){if(!(h instanceof _))throw new TypeError("Cannot call a class as a function")}function l(h,_){for(var b=0;b<_.length;b++){var w=_[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(h,w.key,w)}}function d(h,_,b){return _&&l(h.prototype,_),b&&l(h,b),h}var u=function(){function h(){a(this,h),this._disabledEventEmissions=[],this.handlers=null}return d(h,[{key:"on",value:function(b,w){var S=this;this.handlers||(this.handlers={});var L=this.handlers[b];return L||(L=this.handlers[b]=[]),L.push(w),{name:b,callback:w,un:function(z,ne){return S.un(z,ne)}}}},{key:"un",value:function(b,w){if(this.handlers){var S=this.handlers[b],L;if(S)if(w)for(L=S.length-1;L>=0;L--)S[L]==w&&S.splice(L,1);else S.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(b,w){var S=this,L=function R(){for(var z=arguments.length,ne=new Array(z),Q=0;Q<z;Q++)ne[Q]=arguments[Q];w.apply(S,ne),setTimeout(function(){S.un(b,R)},0)};return this.on(b,L)}},{key:"setDisabledEventEmissions",value:function(b){this._disabledEventEmissions=b}},{key:"_isDisabledEventEmission",value:function(b){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(b)}},{key:"fireEvent",value:function(b){for(var w=arguments.length,S=new Array(w>1?w-1:0),L=1;L<w;L++)S[L-1]=arguments[L];if(!(!this.handlers||this._isDisabledEventEmission(b))){var R=this.handlers[b];R&&R.forEach(function(z){z.apply(void 0,S)})}}}]),h}();s.default=u,r.exports=s.default},"./src/util/prevent-click.js":(r,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=l;function a(d){d.stopPropagation(),document.body.removeEventListener("click",a,!0)}function l(d){document.body.addEventListener("click",a,!0)}r.exports=s.default},"./src/util/request-animation-frame.js":(r,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(l,d){return setTimeout(l,1e3/60)}).bind(window);s.default=a,r.exports=s.default},"./src/util/style.js":(r,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=a;function a(l,d){return Object.keys(d).forEach(function(u){l.style[u]!==d[u]&&(l.style[u]=d[u])}),l}r.exports=s.default},"./src/wavesurfer.js":(r,s,a)=>{"use strict";function l(Z){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l=function(Ee){return typeof Ee}:l=function(Ee){return Ee&&typeof Symbol=="function"&&Ee.constructor===Symbol&&Ee!==Symbol.prototype?"symbol":typeof Ee},l(Z)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var d=R(a("./src/util/index.js")),u=S(a("./src/drawer.multicanvas.js")),h=S(a("./src/webaudio.js")),_=S(a("./src/mediaelement.js")),b=S(a("./src/peakcache.js")),w=S(a("./src/mediaelement-webaudio.js"));function S(Z){return Z&&Z.__esModule?Z:{default:Z}}function L(){if(typeof WeakMap!="function")return null;var Z=new WeakMap;return L=function(){return Z},Z}function R(Z){if(Z&&Z.__esModule)return Z;if(Z===null||l(Z)!=="object"&&typeof Z!="function")return{default:Z};var oe=L();if(oe&&oe.has(Z))return oe.get(Z);var Ee={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in Z)if(Object.prototype.hasOwnProperty.call(Z,G)){var le=Y?Object.getOwnPropertyDescriptor(Z,G):null;le&&(le.get||le.set)?Object.defineProperty(Ee,G,le):Ee[G]=Z[G]}return Ee.default=Z,oe&&oe.set(Z,Ee),Ee}function z(Z,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function");Z.prototype=Object.create(oe&&oe.prototype,{constructor:{value:Z,writable:!0,configurable:!0}}),oe&&ne(Z,oe)}function ne(Z,oe){return ne=Object.setPrototypeOf||function(Y,G){return Y.__proto__=G,Y},ne(Z,oe)}function Q(Z){var oe=se();return function(){var Y=_e(Z),G;if(oe){var le=_e(this).constructor;G=Reflect.construct(Y,arguments,le)}else G=Y.apply(this,arguments);return q(this,G)}}function q(Z,oe){return oe&&(l(oe)==="object"||typeof oe=="function")?oe:T(Z)}function T(Z){if(Z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z}function se(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _e(Z){return _e=Object.setPrototypeOf?Object.getPrototypeOf:function(Ee){return Ee.__proto__||Object.getPrototypeOf(Ee)},_e(Z)}function Me(Z,oe){if(!(Z instanceof oe))throw new TypeError("Cannot call a class as a function")}function me(Z,oe){for(var Ee=0;Ee<oe.length;Ee++){var Y=oe[Ee];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(Z,Y.key,Y)}}function K(Z,oe,Ee){return oe&&me(Z.prototype,oe),Ee&&me(Z,Ee),Z}var ue=function(){function Z(oe,Ee){Me(this,Z)}return K(Z,[{key:"create",value:function(Ee){}},{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),Z}(),be=function(Z){z(Ee,Z);var oe=Q(Ee);function Ee(Y){var G;if(Me(this,Ee),G=oe.call(this),G.defaultParams={audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:u.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1},waveColor:"#999",xhr:{}},G.backends={MediaElement:_.default,WebAudio:h.default,MediaElementWebAudio:w.default},G.util=d,G.params=Object.assign({},G.defaultParams,Y),G.params.splitChannelsOptions=Object.assign({},G.defaultParams.splitChannelsOptions,Y.splitChannelsOptions),G.container=typeof Y.container=="string"?document.querySelector(G.params.container):G.params.container,!G.container)throw new Error("Container element not found");if(G.params.mediaContainer==null?G.mediaContainer=G.container:typeof G.params.mediaContainer=="string"?G.mediaContainer=document.querySelector(G.params.mediaContainer):G.mediaContainer=G.params.mediaContainer,!G.mediaContainer)throw new Error("Media Container element not found");if(G.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(G.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(G.params.rtl===!0&&d.style(G.container,{transform:"rotateY(180deg)"}),G.params.backgroundColor&&G.setBackgroundColor(G.params.backgroundColor),G.savedVolume=0,G.isMuted=!1,G.tmpEvents=[],G.currentRequest=null,G.arraybuffer=null,G.drawer=null,G.backend=null,G.peakCache=null,typeof G.params.renderer!="function")throw new Error("Renderer parameter is invalid");G.Drawer=G.params.renderer,G.params.backend=="AudioElement"&&(G.params.backend="MediaElement"),(G.params.backend=="WebAudio"||G.params.backend==="MediaElementWebAudio")&&!h.default.prototype.supportsWebAudio.call(null)&&(G.params.backend="MediaElement"),G.Backend=G.backends[G.params.backend],G.initialisedPluginList={},G.isDestroyed=!1,G.isReady=!1;var le=0;return G._onResize=d.debounce(function(){le!=G.drawer.wrapper.clientWidth&&!G.params.scrollParent&&(le=G.drawer.wrapper.clientWidth,G.drawer.fireEvent("redraw"))},typeof G.params.responsive=="number"?G.params.responsive:100),q(G,T(G))}return K(Ee,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(G){var le=this;return G.forEach(function(X){return le.addPlugin(X)}),G.forEach(function(X){X.deferInit||le.initPlugin(X.name)}),this.fireEvent("plugins-registered",G),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(G){var le=this;if(!G.name)throw new Error("Plugin does not have a name!");if(!G.instance)throw new Error("Plugin ".concat(G.name," does not have an instance property!"));G.staticProps&&Object.keys(G.staticProps).forEach(function(Ze){le[Ze]=G.staticProps[Ze]});var X=G.instance,Ue=Object.getOwnPropertyNames(d.Observer.prototype);return Ue.forEach(function(Ze){X.prototype[Ze]=d.Observer.prototype[Ze]}),this[G.name]=new X(G.params||{},this),this.fireEvent("plugin-added",G.name),this}},{key:"initPlugin",value:function(G){if(!this[G])throw new Error("Plugin ".concat(G," has not been added yet!"));return this.initialisedPluginList[G]&&this.destroyPlugin(G),this[G].init(),this.initialisedPluginList[G]=!0,this.fireEvent("plugin-initialised",G),this}},{key:"destroyPlugin",value:function(G){if(!this[G])throw new Error("Plugin ".concat(G," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[G])throw new Error("Plugin ".concat(G," is not active and cannot be destroyed!"));if(typeof this[G].destroy!="function")throw new Error("Plugin ".concat(G," does not have a destroy function!"));return this[G].destroy(),delete this.initialisedPluginList[G],this.fireEvent("plugin-destroyed",G),this}},{key:"destroyAllPlugins",value:function(){var G=this;Object.keys(this.initialisedPluginList).forEach(function(le){return G.destroyPlugin(le)})}},{key:"createDrawer",value:function(){var G=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),this.params.responsive!==!1&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){G.drawBuffer(),G.drawer.progress(G.backend.getPlayedPercents())}),this.drawer.on("click",function(le,X){setTimeout(function(){return G.seekTo(X)},0)}),this.drawer.on("scroll",function(le){G.params.partialRender&&G.drawBuffer(),G.fireEvent("scroll",le)})}},{key:"createBackend",value:function(){var G=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){G.drawer.progress(G.backend.getPlayedPercents()),G.fireEvent("finish")}),this.backend.on("play",function(){return G.fireEvent("play")}),this.backend.on("pause",function(){return G.fireEvent("pause")}),this.backend.on("audioprocess",function(le){G.drawer.progress(G.backend.getPlayedPercents()),G.fireEvent("audioprocess",le)}),(this.params.backend==="MediaElement"||this.params.backend==="MediaElementWebAudio")&&(this.backend.on("seek",function(){G.drawer.progress(G.backend.getPlayedPercents())}),this.backend.on("volume",function(){var le=G.getVolume();G.fireEvent("volume",le),G.backend.isMuted!==G.isMuted&&(G.isMuted=G.backend.isMuted,G.fireEvent("mute",G.isMuted))}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new b.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(G){G>=this.getDuration()?this.seekTo(1):this.seekTo(G/this.getDuration())}},{key:"play",value:function(G,le){var X=this;return this.fireEvent("interaction",function(){return X.play(G,le)}),this.backend.play(G,le)}},{key:"setPlayEnd",value:function(G){this.backend.setPlayEnd(G)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(G){this.skip(-G||-this.params.skipLength)}},{key:"skipForward",value:function(G){this.skip(G||this.params.skipLength)}},{key:"skip",value:function(G){var le=this.getDuration()||1,X=this.getCurrentTime()||0;X=Math.max(0,Math.min(le,X+(G||0))),this.seekAndCenter(X/le)}},{key:"seekAndCenter",value:function(G){this.seekTo(G),this.drawer.recenter(G)}},{key:"seekTo",value:function(G){var le=this;if(typeof G!="number"||!isFinite(G)||G<0||G>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return le.seekTo(G)});var X=this.params.backend==="WebAudio",Ue=this.backend.isPaused();X&&!Ue&&this.backend.pause();var Ze=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(G*this.getDuration()),this.drawer.progress(G),X&&!Ue&&this.backend.play(),this.params.scrollParent=Ze,this.fireEvent("seek",G)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(G){return this.backend.setSinkId(G)}},{key:"setVolume",value:function(G){this.backend.setVolume(G),this.fireEvent("volume",G)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(G){this.backend.setPlaybackRate(G)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(G){if(G===this.isMuted){this.fireEvent("mute",this.isMuted);return}this.backend.setMute?(this.backend.setMute(G),this.isMuted=G):G?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){return this.params.waveColor}},{key:"setWaveColor",value:function(G){this.params.waveColor=G,this.drawBuffer()}},{key:"getProgressColor",value:function(){return this.params.progressColor}},{key:"setProgressColor",value:function(G){this.params.progressColor=G,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(G){this.params.backgroundColor=G,d.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(G){this.params.cursorColor=G,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(G){this.params.height=G,this.drawer.setHeight(G*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(G){this.params.splitChannelsOptions.filterChannels=G,this.drawBuffer()}},{key:"drawBuffer",value:function(){var G=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),le=this.drawer.getWidth(),X=G,Ue=0,Ze=Math.max(Ue+le,X);this.params.fillParent&&(!this.params.scrollParent||G<le)&&(X=le,Ue=0,Ze=X);var De;if(this.params.partialRender){var xe=this.peakCache.addRangeToPeakCache(X,Ue,Ze),ke;for(ke=0;ke<xe.length;ke++)De=this.backend.getPeaks(X,xe[ke][0],xe[ke][1]),this.drawer.drawPeaks(De,X,xe[ke][0],xe[ke][1])}else De=this.backend.getPeaks(X,Ue,Ze),this.drawer.drawPeaks(De,X,Ue,Ze);this.fireEvent("redraw",De,X)}},{key:"zoom",value:function(G){G?(this.params.minPxPerSec=G,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",G)}},{key:"loadArrayBuffer",value:function(G){var le=this;this.decodeArrayBuffer(G,function(X){le.isDestroyed||le.loadDecodedBuffer(X)})}},{key:"loadDecodedBuffer",value:function(G){this.backend.load(G),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(G){var le=this,X=new FileReader;X.addEventListener("progress",function(Ue){return le.onProgress(Ue)}),X.addEventListener("load",function(Ue){return le.loadArrayBuffer(Ue.target.result)}),X.addEventListener("error",function(){return le.fireEvent("error","Error reading file")}),X.readAsArrayBuffer(G),this.empty()}},{key:"load",value:function(G,le,X,Ue){if(!G)throw new Error("url parameter cannot be empty");if(this.empty(),X){var Ze={"Preload is not 'auto', 'none' or 'metadata'":["auto","metadata","none"].indexOf(X)===-1,"Peaks are not provided":!le,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend)===-1,"Url is not of type string":typeof G!="string"},De=Object.keys(Ze).filter(function(xe){return Ze[xe]});De.length&&(console.warn(`Preload parameter of wavesurfer.load will be ignored because:
	- `+De.join(`
	- `)),X=null)}switch(this.params.backend==="WebAudio"&&G instanceof HTMLMediaElement&&(G=G.src),this.params.backend){case"WebAudio":return this.loadBuffer(G,le,Ue);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(G,le,X,Ue)}}},{key:"loadBuffer",value:function(G,le,X){var Ue=this,Ze=function(xe){return xe&&Ue.tmpEvents.push(Ue.once("ready",xe)),Ue.getArrayBuffer(G,function(ke){return Ue.loadArrayBuffer(ke)})};if(le)this.backend.setPeaks(le,X),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",Ze));else return Ze()}},{key:"loadMediaElement",value:function(G,le,X,Ue){var Ze=this,De=G;if(typeof G=="string")this.backend.load(De,this.mediaContainer,le,X);else{var xe=G;this.backend.loadElt(xe,le),De=xe.src}this.tmpEvents.push(this.backend.once("canplay",function(){Ze.backend.destroyed||(Ze.drawBuffer(),Ze.isReady=!0,Ze.fireEvent("ready"))}),this.backend.once("error",function(ke){return Ze.fireEvent("error",ke)})),le&&(this.backend.setPeaks(le,Ue),this.drawBuffer(),this.fireEvent("waveform-ready")),(!le||this.params.forceDecode)&&this.backend.supportsWebAudio()&&this.getArrayBuffer(De,function(ke){Ze.decodeArrayBuffer(ke,function(Ve){Ze.backend.buffer=Ve,Ze.backend.setPeaks(null),Ze.drawBuffer(),Ze.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(G,le){var X=this;this.arraybuffer=G,this.backend.decodeArrayBuffer(G,function(Ue){!X.isDestroyed&&X.arraybuffer==G&&(le(Ue),X.arraybuffer=null)},function(){return X.fireEvent("error","Error decoding audiobuffer")})}},{key:"getArrayBuffer",value:function(G,le){var X=this,Ue=Object.assign({url:G,responseType:"arraybuffer"},this.params.xhr),Ze=d.fetchFile(Ue);return this.currentRequest=Ze,this.tmpEvents.push(Ze.on("progress",function(De){X.onProgress(De)}),Ze.on("success",function(De){le(De),X.currentRequest=null}),Ze.on("error",function(De){X.fireEvent("error",De),X.currentRequest=null})),Ze}},{key:"onProgress",value:function(G){var le;G.lengthComputable?le=G.loaded/G.total:le=G.loaded/(G.loaded+1e6),this.fireEvent("loading",Math.round(le*100),G.target)}},{key:"exportPCM",value:function(G,le,X,Ue,Ze){G=G||1024,Ue=Ue||0,le=le||1e4,X=X||!1;var De=this.backend.getPeaks(G,Ue,Ze),xe=[].map.call(De,function(ke){return Math.round(ke*le)/le});return new Promise(function(ke,Ve){var it=JSON.stringify(xe);X||window.open("data:application/json;charset=utf-8,"+encodeURIComponent(it)),ke(it)})}},{key:"exportImage",value:function(G,le,X){return G||(G="image/png"),le||(le=1),X||(X="dataURL"),this.drawer.getImage(G,le,X)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(G){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(G){return G.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),this.params.responsive!==!1&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],[{key:"create",value:function(G){var le=new Ee(G);return le.init()}}]),Ee}(d.Observer);s.default=be,be.VERSION="4.6.0",be.util=d,r.exports=s.default},"./src/webaudio.js":(r,s,a)=>{"use strict";function l(K){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l=function(be){return typeof be}:l=function(be){return be&&typeof Symbol=="function"&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be},l(K)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var d=h(a("./src/util/index.js"));function u(){if(typeof WeakMap!="function")return null;var K=new WeakMap;return u=function(){return K},K}function h(K){if(K&&K.__esModule)return K;if(K===null||l(K)!=="object"&&typeof K!="function")return{default:K};var ue=u();if(ue&&ue.has(K))return ue.get(K);var be={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var oe in K)if(Object.prototype.hasOwnProperty.call(K,oe)){var Ee=Z?Object.getOwnPropertyDescriptor(K,oe):null;Ee&&(Ee.get||Ee.set)?Object.defineProperty(be,oe,Ee):be[oe]=K[oe]}return be.default=K,ue&&ue.set(K,be),be}function _(K,ue,be){return ue in K?Object.defineProperty(K,ue,{value:be,enumerable:!0,configurable:!0,writable:!0}):K[ue]=be,K}function b(K,ue){if(!(K instanceof ue))throw new TypeError("Cannot call a class as a function")}function w(K,ue){for(var be=0;be<ue.length;be++){var Z=ue[be];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(K,Z.key,Z)}}function S(K,ue,be){return ue&&w(K.prototype,ue),be&&w(K,be),K}function L(K,ue){if(typeof ue!="function"&&ue!==null)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(ue&&ue.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),ue&&R(K,ue)}function R(K,ue){return R=Object.setPrototypeOf||function(Z,oe){return Z.__proto__=oe,Z},R(K,ue)}function z(K){var ue=q();return function(){var Z=T(K),oe;if(ue){var Ee=T(this).constructor;oe=Reflect.construct(Z,arguments,Ee)}else oe=Z.apply(this,arguments);return ne(this,oe)}}function ne(K,ue){return ue&&(l(ue)==="object"||typeof ue=="function")?ue:Q(K)}function Q(K){if(K===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K}function q(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function T(K){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(be){return be.__proto__||Object.getPrototypeOf(be)},T(K)}var se="playing",_e="paused",Me="finished",me=function(K){L(be,K);var ue=z(be);function be(Z){var oe,Ee,Y;return b(this,be),Y=ue.call(this),Y.audioContext=null,Y.offlineAudioContext=null,Y.stateBehaviors=(oe={},_(oe,se,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var le=this.getDuration();return this.getCurrentTime()/le||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),_(oe,_e,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var le=this.getDuration();return this.getCurrentTime()/le||0},getCurrentTime:function(){return this.startPosition}}),_(oe,Me,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),oe),Y.params=Z,Y.ac=Z.audioContext||(Y.supportsWebAudio()?Y.getAudioContext():{}),Y.lastPlay=Y.ac.currentTime,Y.startPosition=0,Y.scheduledPause=null,Y.states=(Ee={},_(Ee,se,Object.create(Y.stateBehaviors[se])),_(Ee,_e,Object.create(Y.stateBehaviors[_e])),_(Ee,Me,Object.create(Y.stateBehaviors[Me])),Ee),Y.buffer=null,Y.filters=[],Y.gainNode=null,Y.mergedPeaks=null,Y.offlineAc=null,Y.peaks=null,Y.playbackRate=1,Y.analyser=null,Y.scriptNode=null,Y.source=null,Y.splitPeaks=[],Y.state=null,Y.explicitDuration=Z.duration,Y.destroyed=!1,Y}return S(be,[{key:"supportsWebAudio",value:function(){return!!(window.AudioContext||window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(oe){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,oe)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(_e),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(oe){oe&&oe.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(oe){this.state!==this.states[oe]&&(this.state=this.states[oe],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var oe=arguments.length,Ee=new Array(oe),Y=0;Y<oe;Y++)Ee[Y]=arguments[Y];this.setFilters(Ee)}},{key:"setFilters",value:function(oe){this.disconnectFilters(),oe&&oe.length&&(this.filters=oe,this.analyser.disconnect(),oe.reduce(function(Ee,Y){return Ee.connect(Y),Y},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(be.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(be.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var oe=this;this.scriptNode.onaudioprocess=function(){var Ee=oe.getCurrentTime();Ee>=oe.getDuration()?(oe.setState(Me),oe.fireEvent("pause")):Ee>=oe.scheduledPause?oe.pause():oe.state===oe.states[se]&&oe.fireEvent("audioprocess",Ee)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=function(){}}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(oe){if(oe){var Ee=new window.Audio;if(!Ee.setSinkId)return Promise.reject(new Error("setSinkId is not supported in your browser"));Ee.autoplay=!0;var Y=this.ac.createMediaStreamDestination();return this.gainNode.disconnect(),this.gainNode.connect(Y),Ee.srcObject=Y.stream,Ee.setSinkId(oe)}else return Promise.reject(new Error("Invalid deviceId: "+oe))}},{key:"setVolume",value:function(oe){this.gainNode.gain.setValueAtTime(oe,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(oe,Ee,Y){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(oe,function(G){return Ee(G)},Y):this.offlineAc.decodeAudioData(oe).then(function(G){return Ee(G)}).catch(function(G){return Y(G)})}},{key:"setPeaks",value:function(oe,Ee){Ee!=null&&(this.explicitDuration=Ee),this.peaks=oe}},{key:"setLength",value:function(oe){if(!(this.mergedPeaks&&oe==2*this.mergedPeaks.length-1+2)){this.splitPeaks=[],this.mergedPeaks=[];var Ee=this.buffer?this.buffer.numberOfChannels:1,Y;for(Y=0;Y<Ee;Y++)this.splitPeaks[Y]=[],this.splitPeaks[Y][2*(oe-1)]=0,this.splitPeaks[Y][2*(oe-1)+1]=0;this.mergedPeaks[2*(oe-1)]=0,this.mergedPeaks[2*(oe-1)+1]=0}}},{key:"getPeaks",value:function(oe,Ee,Y){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(Ee=Ee||0,Y=Y||oe-1,this.setLength(oe),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var G=this.createBuffer(1,4096,this.sampleRate);this.buffer=G.buffer}var le=this.buffer.length/oe,X=~~(le/10)||1,Ue=this.buffer.numberOfChannels,Ze;for(Ze=0;Ze<Ue;Ze++){var De=this.splitPeaks[Ze],xe=this.buffer.getChannelData(Ze),ke=void 0;for(ke=Ee;ke<=Y;ke++){var Ve=~~(ke*le),it=~~(Ve+le),Je=xe[Ve],st=Je,ot=void 0;for(ot=Ve;ot<it;ot+=X){var pn=xe[ot];pn>st&&(st=pn),pn<Je&&(Je=pn)}De[2*ke]=st,De[2*ke+1]=Je,(Ze==0||st>this.mergedPeaks[2*ke])&&(this.mergedPeaks[2*ke]=st),(Ze==0||Je<this.mergedPeaks[2*ke+1])&&(this.mergedPeaks[2*ke+1]=Je)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&(typeof this.ac.close=="function"&&this.ac.state!="closed"&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(oe){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=oe,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){this.ac.state=="suspended"&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[se]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(oe,Ee){if(this.buffer)return this.scheduledPause=null,oe==null&&(oe=this.getCurrentTime(),oe>=this.getDuration()&&(oe=0)),Ee==null&&(Ee=this.getDuration()),this.startPosition=oe,this.lastPlay=this.ac.currentTime,this.state===this.states[Me]&&this.setState(_e),{start:oe,end:Ee}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(oe,Ee){if(this.buffer){this.createSource();var Y=this.seekTo(oe,Ee);oe=Y.start,Ee=Y.end,this.scheduledPause=Ee,this.source.start(0,oe),this.resumeAudioContext(),this.setState(se),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime(),this.source&&this.source.stop(0),this.setState(_e),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(oe){this.playbackRate=oe||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(oe){this.scheduledPause=oe}}]),be}(d.Observer);s.default=me,me.scriptBufferSize=256,r.exports=s.default},"./node_modules/debounce/index.js":r=>{function s(a,l,d){var u,h,_,b,w;l==null&&(l=100);function S(){var R=Date.now()-b;R<l&&R>=0?u=setTimeout(S,l-R):(u=null,d||(w=a.apply(_,h),_=h=null))}var L=function(){_=this,h=arguments,b=Date.now();var R=d&&!u;return u||(u=setTimeout(S,l)),R&&(w=a.apply(_,h),_=h=null),w};return L.clear=function(){u&&(clearTimeout(u),u=null)},L.flush=function(){u&&(w=a.apply(_,h),_=h=null,clearTimeout(u),u=null)},L}s.debounce=s,r.exports=s}},n={};function e(r){if(n[r])return n[r].exports;var s=n[r]={exports:{}};return t[r](s,s.exports,e),s.exports}var i=e("./src/wavesurfer.js");return i})()})});var $w=et((z7,A1)=>{(function(t,n){"use strict";typeof A1=="object"&&typeof A1.exports=="object"?A1.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)})(typeof window<"u"?window:z7,function(t,n){"use strict";var e=[],i=Object.getPrototypeOf,r=e.slice,s=e.flat?function(M){return e.flat.call(M)}:function(M){return e.concat.apply([],M)},a=e.push,l=e.indexOf,d={},u=d.toString,h=d.hasOwnProperty,_=h.toString,b=_.call(Object),w={},S=function(B){return typeof B=="function"&&typeof B.nodeType!="number"&&typeof B.item!="function"},L=function(B){return B!=null&&B===B.window},R=t.document,z={type:!0,src:!0,nonce:!0,noModule:!0};function ne(M,B,j){j=j||R;var U,re,ce=j.createElement("script");if(ce.text=M,B)for(U in z)re=B[U]||B.getAttribute&&B.getAttribute(U),re&&ce.setAttribute(U,re);j.head.appendChild(ce).parentNode.removeChild(ce)}function Q(M){return M==null?M+"":typeof M=="object"||typeof M=="function"?d[u.call(M)]||"object":typeof M}var q="3.6.0",T=function(M,B){return new T.fn.init(M,B)};T.fn=T.prototype={jquery:q,constructor:T,length:0,toArray:function(){return r.call(this)},get:function(M){return M==null?r.call(this):M<0?this[M+this.length]:this[M]},pushStack:function(M){var B=T.merge(this.constructor(),M);return B.prevObject=this,B},each:function(M){return T.each(this,M)},map:function(M){return this.pushStack(T.map(this,function(B,j){return M.call(B,j,B)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,function(M,B){return(B+1)%2}))},odd:function(){return this.pushStack(T.grep(this,function(M,B){return B%2}))},eq:function(M){var B=this.length,j=+M+(M<0?B:0);return this.pushStack(j>=0&&j<B?[this[j]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:e.sort,splice:e.splice},T.extend=T.fn.extend=function(){var M,B,j,U,re,ce,ve=arguments[0]||{},je=1,We=arguments.length,$e=!1;for(typeof ve=="boolean"&&($e=ve,ve=arguments[je]||{},je++),typeof ve!="object"&&!S(ve)&&(ve={}),je===We&&(ve=this,je--);je<We;je++)if((M=arguments[je])!=null)for(B in M)U=M[B],!(B==="__proto__"||ve===U)&&($e&&U&&(T.isPlainObject(U)||(re=Array.isArray(U)))?(j=ve[B],re&&!Array.isArray(j)?ce=[]:!re&&!T.isPlainObject(j)?ce={}:ce=j,re=!1,ve[B]=T.extend($e,ce,U)):U!==void 0&&(ve[B]=U));return ve},T.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(M){throw new Error(M)},noop:function(){},isPlainObject:function(M){var B,j;return!M||u.call(M)!=="[object Object]"?!1:(B=i(M),B?(j=h.call(B,"constructor")&&B.constructor,typeof j=="function"&&_.call(j)===b):!0)},isEmptyObject:function(M){var B;for(B in M)return!1;return!0},globalEval:function(M,B,j){ne(M,{nonce:B&&B.nonce},j)},each:function(M,B){var j,U=0;if(se(M))for(j=M.length;U<j&&B.call(M[U],U,M[U])!==!1;U++);else for(U in M)if(B.call(M[U],U,M[U])===!1)break;return M},makeArray:function(M,B){var j=B||[];return M!=null&&(se(Object(M))?T.merge(j,typeof M=="string"?[M]:M):a.call(j,M)),j},inArray:function(M,B,j){return B==null?-1:l.call(B,M,j)},merge:function(M,B){for(var j=+B.length,U=0,re=M.length;U<j;U++)M[re++]=B[U];return M.length=re,M},grep:function(M,B,j){for(var U,re=[],ce=0,ve=M.length,je=!j;ce<ve;ce++)U=!B(M[ce],ce),U!==je&&re.push(M[ce]);return re},map:function(M,B,j){var U,re,ce=0,ve=[];if(se(M))for(U=M.length;ce<U;ce++)re=B(M[ce],ce,j),re!=null&&ve.push(re);else for(ce in M)re=B(M[ce],ce,j),re!=null&&ve.push(re);return s(ve)},guid:1,support:w}),typeof Symbol=="function"&&(T.fn[Symbol.iterator]=e[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(M,B){d["[object "+B+"]"]=B.toLowerCase()});function se(M){var B=!!M&&"length"in M&&M.length,j=Q(M);return S(M)||L(M)?!1:j==="array"||B===0||typeof B=="number"&&B>0&&B-1 in M}var _e=function(M){var B,j,U,re,ce,ve,je,We,$e,ut,jt,at,Ct,xn,Yn,Cn,Lr,Tr,rs,Ri="sizzle"+1*new Date,Wn=M.document,Wo=0,wi=0,or=Cf(),Lu=Cf(),vf=Cf(),os=Cf(),Tc=function(we,Re){return we===Re&&(jt=!0),0},Ac={}.hasOwnProperty,zo=[],Gl=zo.pop,Cs=zo.push,Wl=zo.push,JM=zo.slice,Dc=function(we,Re){for(var Xe=0,kt=we.length;Xe<kt;Xe++)if(we[Xe]===Re)return Xe;return-1},My="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Bi="[\\x20\\t\\r\\n\\f]",Ic="(?:\\\\[\\da-fA-F]{1,6}"+Bi+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",QM="\\["+Bi+"*("+Ic+")(?:"+Bi+"*([*^$|!~]?=)"+Bi+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Ic+"))|)"+Bi+"*\\]",Sy=":("+Ic+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+QM+")*)|.*)\\)|)",aB=new RegExp(Bi+"+","g"),bf=new RegExp("^"+Bi+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Bi+"+$","g"),lB=new RegExp("^"+Bi+"*,"+Bi+"*"),$M=new RegExp("^"+Bi+"*([>+~]|"+Bi+")"+Bi+"*"),cB=new RegExp(Bi+"|>"),dB=new RegExp(Sy),hB=new RegExp("^"+Ic+"$"),xf={ID:new RegExp("^#("+Ic+")"),CLASS:new RegExp("^\\.("+Ic+")"),TAG:new RegExp("^("+Ic+"|[*])"),ATTR:new RegExp("^"+QM),PSEUDO:new RegExp("^"+Sy),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Bi+"*(even|odd|(([+-]|)(\\d*)n|)"+Bi+"*(?:([+-]|)"+Bi+"*(\\d+)|))"+Bi+"*\\)|)","i"),bool:new RegExp("^(?:"+My+")$","i"),needsContext:new RegExp("^"+Bi+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Bi+"*((?:-\\d)?\\d*)"+Bi+"*\\)|)(?=[^-]|$)","i")},uB=/HTML$/i,pB=/^(?:input|select|textarea|button)$/i,fB=/^h\d$/i,Nu=/^[^{]+\{\s*\[native \w/,mB=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Py=/[+~]/,rl=new RegExp("\\\\[\\da-fA-F]{1,6}"+Bi+"?|\\\\([^\\r\\n\\f])","g"),ol=function(we,Re){var Xe="0x"+we.slice(1)-65536;return Re||(Xe<0?String.fromCharCode(Xe+65536):String.fromCharCode(Xe>>10|55296,Xe&1023|56320))},KM=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ZM=function(we,Re){return Re?we==="\0"?"\uFFFD":we.slice(0,-1)+"\\"+we.charCodeAt(we.length-1).toString(16)+" ":"\\"+we},e3=function(){at()},gB=Mf(function(we){return we.disabled===!0&&we.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Wl.apply(zo=JM.call(Wn.childNodes),Wn.childNodes),zo[Wn.childNodes.length].nodeType}catch{Wl={apply:zo.length?function(Re,Xe){Cs.apply(Re,JM.call(Xe))}:function(Re,Xe){for(var kt=Re.length,Ke=0;Re[kt++]=Xe[Ke++];);Re.length=kt-1}}}function zi(we,Re,Xe,kt){var Ke,Lt,Gt,Zt,ln,In,Pn,Ln=Re&&Re.ownerDocument,oi=Re?Re.nodeType:9;if(Xe=Xe||[],typeof we!="string"||!we||oi!==1&&oi!==9&&oi!==11)return Xe;if(!kt&&(at(Re),Re=Re||Ct,Yn)){if(oi!==11&&(ln=mB.exec(we)))if(Ke=ln[1]){if(oi===9)if(Gt=Re.getElementById(Ke)){if(Gt.id===Ke)return Xe.push(Gt),Xe}else return Xe;else if(Ln&&(Gt=Ln.getElementById(Ke))&&rs(Re,Gt)&&Gt.id===Ke)return Xe.push(Gt),Xe}else{if(ln[2])return Wl.apply(Xe,Re.getElementsByTagName(we)),Xe;if((Ke=ln[3])&&j.getElementsByClassName&&Re.getElementsByClassName)return Wl.apply(Xe,Re.getElementsByClassName(Ke)),Xe}if(j.qsa&&!os[we+" "]&&(!Cn||!Cn.test(we))&&(oi!==1||Re.nodeName.toLowerCase()!=="object")){if(Pn=we,Ln=Re,oi===1&&(cB.test(we)||$M.test(we))){for(Ln=Py.test(we)&&Ey(Re.parentNode)||Re,(Ln!==Re||!j.scope)&&((Zt=Re.getAttribute("id"))?Zt=Zt.replace(KM,ZM):Re.setAttribute("id",Zt=Ri)),In=ve(we),Lt=In.length;Lt--;)In[Lt]=(Zt?"#"+Zt:":scope")+" "+wf(In[Lt]);Pn=In.join(",")}try{return Wl.apply(Xe,Ln.querySelectorAll(Pn)),Xe}catch{os(we,!0)}finally{Zt===Ri&&Re.removeAttribute("id")}}}return We(we.replace(bf,"$1"),Re,Xe,kt)}function Cf(){var we=[];function Re(Xe,kt){return we.push(Xe+" ")>U.cacheLength&&delete Re[we.shift()],Re[Xe+" "]=kt}return Re}function Xs(we){return we[Ri]=!0,we}function Js(we){var Re=Ct.createElement("fieldset");try{return!!we(Re)}catch{return!1}finally{Re.parentNode&&Re.parentNode.removeChild(Re),Re=null}}function ky(we,Re){for(var Xe=we.split("|"),kt=Xe.length;kt--;)U.attrHandle[Xe[kt]]=Re}function t3(we,Re){var Xe=Re&&we,kt=Xe&&we.nodeType===1&&Re.nodeType===1&&we.sourceIndex-Re.sourceIndex;if(kt)return kt;if(Xe){for(;Xe=Xe.nextSibling;)if(Xe===Re)return-1}return we?1:-1}function _B(we){return function(Re){var Xe=Re.nodeName.toLowerCase();return Xe==="input"&&Re.type===we}}function yB(we){return function(Re){var Xe=Re.nodeName.toLowerCase();return(Xe==="input"||Xe==="button")&&Re.type===we}}function n3(we){return function(Re){return"form"in Re?Re.parentNode&&Re.disabled===!1?"label"in Re?"label"in Re.parentNode?Re.parentNode.disabled===we:Re.disabled===we:Re.isDisabled===we||Re.isDisabled!==!we&&gB(Re)===we:Re.disabled===we:"label"in Re?Re.disabled===we:!1}}function Oc(we){return Xs(function(Re){return Re=+Re,Xs(function(Xe,kt){for(var Ke,Lt=we([],Xe.length,Re),Gt=Lt.length;Gt--;)Xe[Ke=Lt[Gt]]&&(Xe[Ke]=!(kt[Ke]=Xe[Ke]))})})}function Ey(we){return we&&typeof we.getElementsByTagName<"u"&&we}j=zi.support={},ce=zi.isXML=function(we){var Re=we&&we.namespaceURI,Xe=we&&(we.ownerDocument||we).documentElement;return!uB.test(Re||Xe&&Xe.nodeName||"HTML")},at=zi.setDocument=function(we){var Re,Xe,kt=we?we.ownerDocument||we:Wn;return kt==Ct||kt.nodeType!==9||!kt.documentElement||(Ct=kt,xn=Ct.documentElement,Yn=!ce(Ct),Wn!=Ct&&(Xe=Ct.defaultView)&&Xe.top!==Xe&&(Xe.addEventListener?Xe.addEventListener("unload",e3,!1):Xe.attachEvent&&Xe.attachEvent("onunload",e3)),j.scope=Js(function(Ke){return xn.appendChild(Ke).appendChild(Ct.createElement("div")),typeof Ke.querySelectorAll<"u"&&!Ke.querySelectorAll(":scope fieldset div").length}),j.attributes=Js(function(Ke){return Ke.className="i",!Ke.getAttribute("className")}),j.getElementsByTagName=Js(function(Ke){return Ke.appendChild(Ct.createComment("")),!Ke.getElementsByTagName("*").length}),j.getElementsByClassName=Nu.test(Ct.getElementsByClassName),j.getById=Js(function(Ke){return xn.appendChild(Ke).id=Ri,!Ct.getElementsByName||!Ct.getElementsByName(Ri).length}),j.getById?(U.filter.ID=function(Ke){var Lt=Ke.replace(rl,ol);return function(Gt){return Gt.getAttribute("id")===Lt}},U.find.ID=function(Ke,Lt){if(typeof Lt.getElementById<"u"&&Yn){var Gt=Lt.getElementById(Ke);return Gt?[Gt]:[]}}):(U.filter.ID=function(Ke){var Lt=Ke.replace(rl,ol);return function(Gt){var Zt=typeof Gt.getAttributeNode<"u"&&Gt.getAttributeNode("id");return Zt&&Zt.value===Lt}},U.find.ID=function(Ke,Lt){if(typeof Lt.getElementById<"u"&&Yn){var Gt,Zt,ln,In=Lt.getElementById(Ke);if(In){if(Gt=In.getAttributeNode("id"),Gt&&Gt.value===Ke)return[In];for(ln=Lt.getElementsByName(Ke),Zt=0;In=ln[Zt++];)if(Gt=In.getAttributeNode("id"),Gt&&Gt.value===Ke)return[In]}return[]}}),U.find.TAG=j.getElementsByTagName?function(Ke,Lt){if(typeof Lt.getElementsByTagName<"u")return Lt.getElementsByTagName(Ke);if(j.qsa)return Lt.querySelectorAll(Ke)}:function(Ke,Lt){var Gt,Zt=[],ln=0,In=Lt.getElementsByTagName(Ke);if(Ke==="*"){for(;Gt=In[ln++];)Gt.nodeType===1&&Zt.push(Gt);return Zt}return In},U.find.CLASS=j.getElementsByClassName&&function(Ke,Lt){if(typeof Lt.getElementsByClassName<"u"&&Yn)return Lt.getElementsByClassName(Ke)},Lr=[],Cn=[],(j.qsa=Nu.test(Ct.querySelectorAll))&&(Js(function(Ke){var Lt;xn.appendChild(Ke).innerHTML="<a id='"+Ri+"'></a><select id='"+Ri+"-\r\\' msallowcapture=''><option selected=''></option></select>",Ke.querySelectorAll("[msallowcapture^='']").length&&Cn.push("[*^$]="+Bi+`*(?:''|"")`),Ke.querySelectorAll("[selected]").length||Cn.push("\\["+Bi+"*(?:value|"+My+")"),Ke.querySelectorAll("[id~="+Ri+"-]").length||Cn.push("~="),Lt=Ct.createElement("input"),Lt.setAttribute("name",""),Ke.appendChild(Lt),Ke.querySelectorAll("[name='']").length||Cn.push("\\["+Bi+"*name"+Bi+"*="+Bi+`*(?:''|"")`),Ke.querySelectorAll(":checked").length||Cn.push(":checked"),Ke.querySelectorAll("a#"+Ri+"+*").length||Cn.push(".#.+[+~]"),Ke.querySelectorAll("\\\f"),Cn.push("[\\r\\n\\f]")}),Js(function(Ke){Ke.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Lt=Ct.createElement("input");Lt.setAttribute("type","hidden"),Ke.appendChild(Lt).setAttribute("name","D"),Ke.querySelectorAll("[name=d]").length&&Cn.push("name"+Bi+"*[*^$|!~]?="),Ke.querySelectorAll(":enabled").length!==2&&Cn.push(":enabled",":disabled"),xn.appendChild(Ke).disabled=!0,Ke.querySelectorAll(":disabled").length!==2&&Cn.push(":enabled",":disabled"),Ke.querySelectorAll("*,:x"),Cn.push(",.*:")})),(j.matchesSelector=Nu.test(Tr=xn.matches||xn.webkitMatchesSelector||xn.mozMatchesSelector||xn.oMatchesSelector||xn.msMatchesSelector))&&Js(function(Ke){j.disconnectedMatch=Tr.call(Ke,"*"),Tr.call(Ke,"[s!='']:x"),Lr.push("!=",Sy)}),Cn=Cn.length&&new RegExp(Cn.join("|")),Lr=Lr.length&&new RegExp(Lr.join("|")),Re=Nu.test(xn.compareDocumentPosition),rs=Re||Nu.test(xn.contains)?function(Ke,Lt){var Gt=Ke.nodeType===9?Ke.documentElement:Ke,Zt=Lt&&Lt.parentNode;return Ke===Zt||!!(Zt&&Zt.nodeType===1&&(Gt.contains?Gt.contains(Zt):Ke.compareDocumentPosition&&Ke.compareDocumentPosition(Zt)&16))}:function(Ke,Lt){if(Lt){for(;Lt=Lt.parentNode;)if(Lt===Ke)return!0}return!1},Tc=Re?function(Ke,Lt){if(Ke===Lt)return jt=!0,0;var Gt=!Ke.compareDocumentPosition-!Lt.compareDocumentPosition;return Gt||(Gt=(Ke.ownerDocument||Ke)==(Lt.ownerDocument||Lt)?Ke.compareDocumentPosition(Lt):1,Gt&1||!j.sortDetached&&Lt.compareDocumentPosition(Ke)===Gt?Ke==Ct||Ke.ownerDocument==Wn&&rs(Wn,Ke)?-1:Lt==Ct||Lt.ownerDocument==Wn&&rs(Wn,Lt)?1:ut?Dc(ut,Ke)-Dc(ut,Lt):0:Gt&4?-1:1)}:function(Ke,Lt){if(Ke===Lt)return jt=!0,0;var Gt,Zt=0,ln=Ke.parentNode,In=Lt.parentNode,Pn=[Ke],Ln=[Lt];if(!ln||!In)return Ke==Ct?-1:Lt==Ct?1:ln?-1:In?1:ut?Dc(ut,Ke)-Dc(ut,Lt):0;if(ln===In)return t3(Ke,Lt);for(Gt=Ke;Gt=Gt.parentNode;)Pn.unshift(Gt);for(Gt=Lt;Gt=Gt.parentNode;)Ln.unshift(Gt);for(;Pn[Zt]===Ln[Zt];)Zt++;return Zt?t3(Pn[Zt],Ln[Zt]):Pn[Zt]==Wn?-1:Ln[Zt]==Wn?1:0}),Ct},zi.matches=function(we,Re){return zi(we,null,null,Re)},zi.matchesSelector=function(we,Re){if(at(we),j.matchesSelector&&Yn&&!os[Re+" "]&&(!Lr||!Lr.test(Re))&&(!Cn||!Cn.test(Re)))try{var Xe=Tr.call(we,Re);if(Xe||j.disconnectedMatch||we.document&&we.document.nodeType!==11)return Xe}catch{os(Re,!0)}return zi(Re,Ct,null,[we]).length>0},zi.contains=function(we,Re){return(we.ownerDocument||we)!=Ct&&at(we),rs(we,Re)},zi.attr=function(we,Re){(we.ownerDocument||we)!=Ct&&at(we);var Xe=U.attrHandle[Re.toLowerCase()],kt=Xe&&Ac.call(U.attrHandle,Re.toLowerCase())?Xe(we,Re,!Yn):void 0;return kt!==void 0?kt:j.attributes||!Yn?we.getAttribute(Re):(kt=we.getAttributeNode(Re))&&kt.specified?kt.value:null},zi.escape=function(we){return(we+"").replace(KM,ZM)},zi.error=function(we){throw new Error("Syntax error, unrecognized expression: "+we)},zi.uniqueSort=function(we){var Re,Xe=[],kt=0,Ke=0;if(jt=!j.detectDuplicates,ut=!j.sortStable&&we.slice(0),we.sort(Tc),jt){for(;Re=we[Ke++];)Re===we[Ke]&&(kt=Xe.push(Ke));for(;kt--;)we.splice(Xe[kt],1)}return ut=null,we},re=zi.getText=function(we){var Re,Xe="",kt=0,Ke=we.nodeType;if(Ke){if(Ke===1||Ke===9||Ke===11){if(typeof we.textContent=="string")return we.textContent;for(we=we.firstChild;we;we=we.nextSibling)Xe+=re(we)}else if(Ke===3||Ke===4)return we.nodeValue}else for(;Re=we[kt++];)Xe+=re(Re);return Xe},U=zi.selectors={cacheLength:50,createPseudo:Xs,match:xf,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(we){return we[1]=we[1].replace(rl,ol),we[3]=(we[3]||we[4]||we[5]||"").replace(rl,ol),we[2]==="~="&&(we[3]=" "+we[3]+" "),we.slice(0,4)},CHILD:function(we){return we[1]=we[1].toLowerCase(),we[1].slice(0,3)==="nth"?(we[3]||zi.error(we[0]),we[4]=+(we[4]?we[5]+(we[6]||1):2*(we[3]==="even"||we[3]==="odd")),we[5]=+(we[7]+we[8]||we[3]==="odd")):we[3]&&zi.error(we[0]),we},PSEUDO:function(we){var Re,Xe=!we[6]&&we[2];return xf.CHILD.test(we[0])?null:(we[3]?we[2]=we[4]||we[5]||"":Xe&&dB.test(Xe)&&(Re=ve(Xe,!0))&&(Re=Xe.indexOf(")",Xe.length-Re)-Xe.length)&&(we[0]=we[0].slice(0,Re),we[2]=Xe.slice(0,Re)),we.slice(0,3))}},filter:{TAG:function(we){var Re=we.replace(rl,ol).toLowerCase();return we==="*"?function(){return!0}:function(Xe){return Xe.nodeName&&Xe.nodeName.toLowerCase()===Re}},CLASS:function(we){var Re=or[we+" "];return Re||(Re=new RegExp("(^|"+Bi+")"+we+"("+Bi+"|$)"))&&or(we,function(Xe){return Re.test(typeof Xe.className=="string"&&Xe.className||typeof Xe.getAttribute<"u"&&Xe.getAttribute("class")||"")})},ATTR:function(we,Re,Xe){return function(kt){var Ke=zi.attr(kt,we);return Ke==null?Re==="!=":Re?(Ke+="",Re==="="?Ke===Xe:Re==="!="?Ke!==Xe:Re==="^="?Xe&&Ke.indexOf(Xe)===0:Re==="*="?Xe&&Ke.indexOf(Xe)>-1:Re==="$="?Xe&&Ke.slice(-Xe.length)===Xe:Re==="~="?(" "+Ke.replace(aB," ")+" ").indexOf(Xe)>-1:Re==="|="?Ke===Xe||Ke.slice(0,Xe.length+1)===Xe+"-":!1):!0}},CHILD:function(we,Re,Xe,kt,Ke){var Lt=we.slice(0,3)!=="nth",Gt=we.slice(-4)!=="last",Zt=Re==="of-type";return kt===1&&Ke===0?function(ln){return!!ln.parentNode}:function(ln,In,Pn){var Ln,oi,Ui,On,Nr,mo,ss=Lt!==Gt?"nextSibling":"previousSibling",Zi=ln.parentNode,Vu=Zt&&ln.nodeName.toLowerCase(),Ru=!Pn&&!Zt,as=!1;if(Zi){if(Lt){for(;ss;){for(On=ln;On=On[ss];)if(Zt?On.nodeName.toLowerCase()===Vu:On.nodeType===1)return!1;mo=ss=we==="only"&&!mo&&"nextSibling"}return!0}if(mo=[Gt?Zi.firstChild:Zi.lastChild],Gt&&Ru){for(On=Zi,Ui=On[Ri]||(On[Ri]={}),oi=Ui[On.uniqueID]||(Ui[On.uniqueID]={}),Ln=oi[we]||[],Nr=Ln[0]===Wo&&Ln[1],as=Nr&&Ln[2],On=Nr&&Zi.childNodes[Nr];On=++Nr&&On&&On[ss]||(as=Nr=0)||mo.pop();)if(On.nodeType===1&&++as&&On===ln){oi[we]=[Wo,Nr,as];break}}else if(Ru&&(On=ln,Ui=On[Ri]||(On[Ri]={}),oi=Ui[On.uniqueID]||(Ui[On.uniqueID]={}),Ln=oi[we]||[],Nr=Ln[0]===Wo&&Ln[1],as=Nr),as===!1)for(;(On=++Nr&&On&&On[ss]||(as=Nr=0)||mo.pop())&&!((Zt?On.nodeName.toLowerCase()===Vu:On.nodeType===1)&&++as&&(Ru&&(Ui=On[Ri]||(On[Ri]={}),oi=Ui[On.uniqueID]||(Ui[On.uniqueID]={}),oi[we]=[Wo,as]),On===ln)););return as-=Ke,as===kt||as%kt===0&&as/kt>=0}}},PSEUDO:function(we,Re){var Xe,kt=U.pseudos[we]||U.setFilters[we.toLowerCase()]||zi.error("unsupported pseudo: "+we);return kt[Ri]?kt(Re):kt.length>1?(Xe=[we,we,"",Re],U.setFilters.hasOwnProperty(we.toLowerCase())?Xs(function(Ke,Lt){for(var Gt,Zt=kt(Ke,Re),ln=Zt.length;ln--;)Gt=Dc(Ke,Zt[ln]),Ke[Gt]=!(Lt[Gt]=Zt[ln])}):function(Ke){return kt(Ke,0,Xe)}):kt}},pseudos:{not:Xs(function(we){var Re=[],Xe=[],kt=je(we.replace(bf,"$1"));return kt[Ri]?Xs(function(Ke,Lt,Gt,Zt){for(var ln,In=kt(Ke,null,Zt,[]),Pn=Ke.length;Pn--;)(ln=In[Pn])&&(Ke[Pn]=!(Lt[Pn]=ln))}):function(Ke,Lt,Gt){return Re[0]=Ke,kt(Re,null,Gt,Xe),Re[0]=null,!Xe.pop()}}),has:Xs(function(we){return function(Re){return zi(we,Re).length>0}}),contains:Xs(function(we){return we=we.replace(rl,ol),function(Re){return(Re.textContent||re(Re)).indexOf(we)>-1}}),lang:Xs(function(we){return hB.test(we||"")||zi.error("unsupported lang: "+we),we=we.replace(rl,ol).toLowerCase(),function(Re){var Xe;do if(Xe=Yn?Re.lang:Re.getAttribute("xml:lang")||Re.getAttribute("lang"))return Xe=Xe.toLowerCase(),Xe===we||Xe.indexOf(we+"-")===0;while((Re=Re.parentNode)&&Re.nodeType===1);return!1}}),target:function(we){var Re=M.location&&M.location.hash;return Re&&Re.slice(1)===we.id},root:function(we){return we===xn},focus:function(we){return we===Ct.activeElement&&(!Ct.hasFocus||Ct.hasFocus())&&!!(we.type||we.href||~we.tabIndex)},enabled:n3(!1),disabled:n3(!0),checked:function(we){var Re=we.nodeName.toLowerCase();return Re==="input"&&!!we.checked||Re==="option"&&!!we.selected},selected:function(we){return we.parentNode&&we.parentNode.selectedIndex,we.selected===!0},empty:function(we){for(we=we.firstChild;we;we=we.nextSibling)if(we.nodeType<6)return!1;return!0},parent:function(we){return!U.pseudos.empty(we)},header:function(we){return fB.test(we.nodeName)},input:function(we){return pB.test(we.nodeName)},button:function(we){var Re=we.nodeName.toLowerCase();return Re==="input"&&we.type==="button"||Re==="button"},text:function(we){var Re;return we.nodeName.toLowerCase()==="input"&&we.type==="text"&&((Re=we.getAttribute("type"))==null||Re.toLowerCase()==="text")},first:Oc(function(){return[0]}),last:Oc(function(we,Re){return[Re-1]}),eq:Oc(function(we,Re,Xe){return[Xe<0?Xe+Re:Xe]}),even:Oc(function(we,Re){for(var Xe=0;Xe<Re;Xe+=2)we.push(Xe);return we}),odd:Oc(function(we,Re){for(var Xe=1;Xe<Re;Xe+=2)we.push(Xe);return we}),lt:Oc(function(we,Re,Xe){for(var kt=Xe<0?Xe+Re:Xe>Re?Re:Xe;--kt>=0;)we.push(kt);return we}),gt:Oc(function(we,Re,Xe){for(var kt=Xe<0?Xe+Re:Xe;++kt<Re;)we.push(kt);return we})}},U.pseudos.nth=U.pseudos.eq;for(B in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})U.pseudos[B]=_B(B);for(B in{submit:!0,reset:!0})U.pseudos[B]=yB(B);function i3(){}i3.prototype=U.filters=U.pseudos,U.setFilters=new i3,ve=zi.tokenize=function(we,Re){var Xe,kt,Ke,Lt,Gt,Zt,ln,In=Lu[we+" "];if(In)return Re?0:In.slice(0);for(Gt=we,Zt=[],ln=U.preFilter;Gt;){(!Xe||(kt=lB.exec(Gt)))&&(kt&&(Gt=Gt.slice(kt[0].length)||Gt),Zt.push(Ke=[])),Xe=!1,(kt=$M.exec(Gt))&&(Xe=kt.shift(),Ke.push({value:Xe,type:kt[0].replace(bf," ")}),Gt=Gt.slice(Xe.length));for(Lt in U.filter)(kt=xf[Lt].exec(Gt))&&(!ln[Lt]||(kt=ln[Lt](kt)))&&(Xe=kt.shift(),Ke.push({value:Xe,type:Lt,matches:kt}),Gt=Gt.slice(Xe.length));if(!Xe)break}return Re?Gt.length:Gt?zi.error(we):Lu(we,Zt).slice(0)};function wf(we){for(var Re=0,Xe=we.length,kt="";Re<Xe;Re++)kt+=we[Re].value;return kt}function Mf(we,Re,Xe){var kt=Re.dir,Ke=Re.next,Lt=Ke||kt,Gt=Xe&&Lt==="parentNode",Zt=wi++;return Re.first?function(ln,In,Pn){for(;ln=ln[kt];)if(ln.nodeType===1||Gt)return we(ln,In,Pn);return!1}:function(ln,In,Pn){var Ln,oi,Ui,On=[Wo,Zt];if(Pn){for(;ln=ln[kt];)if((ln.nodeType===1||Gt)&&we(ln,In,Pn))return!0}else for(;ln=ln[kt];)if(ln.nodeType===1||Gt)if(Ui=ln[Ri]||(ln[Ri]={}),oi=Ui[ln.uniqueID]||(Ui[ln.uniqueID]={}),Ke&&Ke===ln.nodeName.toLowerCase())ln=ln[kt]||ln;else{if((Ln=oi[Lt])&&Ln[0]===Wo&&Ln[1]===Zt)return On[2]=Ln[2];if(oi[Lt]=On,On[2]=we(ln,In,Pn))return!0}return!1}}function Ty(we){return we.length>1?function(Re,Xe,kt){for(var Ke=we.length;Ke--;)if(!we[Ke](Re,Xe,kt))return!1;return!0}:we[0]}function vB(we,Re,Xe){for(var kt=0,Ke=Re.length;kt<Ke;kt++)zi(we,Re[kt],Xe);return Xe}function Sf(we,Re,Xe,kt,Ke){for(var Lt,Gt=[],Zt=0,ln=we.length,In=Re!=null;Zt<ln;Zt++)(Lt=we[Zt])&&(!Xe||Xe(Lt,kt,Ke))&&(Gt.push(Lt),In&&Re.push(Zt));return Gt}function Ay(we,Re,Xe,kt,Ke,Lt){return kt&&!kt[Ri]&&(kt=Ay(kt)),Ke&&!Ke[Ri]&&(Ke=Ay(Ke,Lt)),Xs(function(Gt,Zt,ln,In){var Pn,Ln,oi,Ui=[],On=[],Nr=Zt.length,mo=Gt||vB(Re||"*",ln.nodeType?[ln]:ln,[]),ss=we&&(Gt||!Re)?Sf(mo,Ui,we,ln,In):mo,Zi=Xe?Ke||(Gt?we:Nr||kt)?[]:Zt:ss;if(Xe&&Xe(ss,Zi,ln,In),kt)for(Pn=Sf(Zi,On),kt(Pn,[],ln,In),Ln=Pn.length;Ln--;)(oi=Pn[Ln])&&(Zi[On[Ln]]=!(ss[On[Ln]]=oi));if(Gt){if(Ke||we){if(Ke){for(Pn=[],Ln=Zi.length;Ln--;)(oi=Zi[Ln])&&Pn.push(ss[Ln]=oi);Ke(null,Zi=[],Pn,In)}for(Ln=Zi.length;Ln--;)(oi=Zi[Ln])&&(Pn=Ke?Dc(Gt,oi):Ui[Ln])>-1&&(Gt[Pn]=!(Zt[Pn]=oi))}}else Zi=Sf(Zi===Zt?Zi.splice(Nr,Zi.length):Zi),Ke?Ke(null,Zt,Zi,In):Wl.apply(Zt,Zi)})}function Dy(we){for(var Re,Xe,kt,Ke=we.length,Lt=U.relative[we[0].type],Gt=Lt||U.relative[" "],Zt=Lt?1:0,ln=Mf(function(Ln){return Ln===Re},Gt,!0),In=Mf(function(Ln){return Dc(Re,Ln)>-1},Gt,!0),Pn=[function(Ln,oi,Ui){var On=!Lt&&(Ui||oi!==$e)||((Re=oi).nodeType?ln(Ln,oi,Ui):In(Ln,oi,Ui));return Re=null,On}];Zt<Ke;Zt++)if(Xe=U.relative[we[Zt].type])Pn=[Mf(Ty(Pn),Xe)];else{if(Xe=U.filter[we[Zt].type].apply(null,we[Zt].matches),Xe[Ri]){for(kt=++Zt;kt<Ke&&!U.relative[we[kt].type];kt++);return Ay(Zt>1&&Ty(Pn),Zt>1&&wf(we.slice(0,Zt-1).concat({value:we[Zt-2].type===" "?"*":""})).replace(bf,"$1"),Xe,Zt<kt&&Dy(we.slice(Zt,kt)),kt<Ke&&Dy(we=we.slice(kt)),kt<Ke&&wf(we))}Pn.push(Xe)}return Ty(Pn)}function bB(we,Re){var Xe=Re.length>0,kt=we.length>0,Ke=function(Lt,Gt,Zt,ln,In){var Pn,Ln,oi,Ui=0,On="0",Nr=Lt&&[],mo=[],ss=$e,Zi=Lt||kt&&U.find.TAG("*",In),Vu=Wo+=ss==null?1:Math.random()||.1,Ru=Zi.length;for(In&&($e=Gt==Ct||Gt||In);On!==Ru&&(Pn=Zi[On])!=null;On++){if(kt&&Pn){for(Ln=0,!Gt&&Pn.ownerDocument!=Ct&&(at(Pn),Zt=!Yn);oi=we[Ln++];)if(oi(Pn,Gt||Ct,Zt)){ln.push(Pn);break}In&&(Wo=Vu)}Xe&&((Pn=!oi&&Pn)&&Ui--,Lt&&Nr.push(Pn))}if(Ui+=On,Xe&&On!==Ui){for(Ln=0;oi=Re[Ln++];)oi(Nr,mo,Gt,Zt);if(Lt){if(Ui>0)for(;On--;)Nr[On]||mo[On]||(mo[On]=Gl.call(ln));mo=Sf(mo)}Wl.apply(ln,mo),In&&!Lt&&mo.length>0&&Ui+Re.length>1&&zi.uniqueSort(ln)}return In&&(Wo=Vu,$e=ss),Nr};return Xe?Xs(Ke):Ke}return je=zi.compile=function(we,Re){var Xe,kt=[],Ke=[],Lt=vf[we+" "];if(!Lt){for(Re||(Re=ve(we)),Xe=Re.length;Xe--;)Lt=Dy(Re[Xe]),Lt[Ri]?kt.push(Lt):Ke.push(Lt);Lt=vf(we,bB(Ke,kt)),Lt.selector=we}return Lt},We=zi.select=function(we,Re,Xe,kt){var Ke,Lt,Gt,Zt,ln,In=typeof we=="function"&&we,Pn=!kt&&ve(we=In.selector||we);if(Xe=Xe||[],Pn.length===1){if(Lt=Pn[0]=Pn[0].slice(0),Lt.length>2&&(Gt=Lt[0]).type==="ID"&&Re.nodeType===9&&Yn&&U.relative[Lt[1].type]){if(Re=(U.find.ID(Gt.matches[0].replace(rl,ol),Re)||[])[0],Re)In&&(Re=Re.parentNode);else return Xe;we=we.slice(Lt.shift().value.length)}for(Ke=xf.needsContext.test(we)?0:Lt.length;Ke--&&(Gt=Lt[Ke],!U.relative[Zt=Gt.type]);)if((ln=U.find[Zt])&&(kt=ln(Gt.matches[0].replace(rl,ol),Py.test(Lt[0].type)&&Ey(Re.parentNode)||Re))){if(Lt.splice(Ke,1),we=kt.length&&wf(Lt),!we)return Wl.apply(Xe,kt),Xe;break}}return(In||je(we,Pn))(kt,Re,!Yn,Xe,!Re||Py.test(we)&&Ey(Re.parentNode)||Re),Xe},j.sortStable=Ri.split("").sort(Tc).join("")===Ri,j.detectDuplicates=!!jt,at(),j.sortDetached=Js(function(we){return we.compareDocumentPosition(Ct.createElement("fieldset"))&1}),Js(function(we){return we.innerHTML="<a href='#'></a>",we.firstChild.getAttribute("href")==="#"})||ky("type|href|height|width",function(we,Re,Xe){if(!Xe)return we.getAttribute(Re,Re.toLowerCase()==="type"?1:2)}),(!j.attributes||!Js(function(we){return we.innerHTML="<input/>",we.firstChild.setAttribute("value",""),we.firstChild.getAttribute("value")===""}))&&ky("value",function(we,Re,Xe){if(!Xe&&we.nodeName.toLowerCase()==="input")return we.defaultValue}),Js(function(we){return we.getAttribute("disabled")==null})||ky(My,function(we,Re,Xe){var kt;if(!Xe)return we[Re]===!0?Re.toLowerCase():(kt=we.getAttributeNode(Re))&&kt.specified?kt.value:null}),zi}(t);T.find=_e,T.expr=_e.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=_e.uniqueSort,T.text=_e.getText,T.isXMLDoc=_e.isXML,T.contains=_e.contains,T.escapeSelector=_e.escape;var Me=function(M,B,j){for(var U=[],re=j!==void 0;(M=M[B])&&M.nodeType!==9;)if(M.nodeType===1){if(re&&T(M).is(j))break;U.push(M)}return U},me=function(M,B){for(var j=[];M;M=M.nextSibling)M.nodeType===1&&M!==B&&j.push(M);return j},K=T.expr.match.needsContext;function ue(M,B){return M.nodeName&&M.nodeName.toLowerCase()===B.toLowerCase()}var be=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Z(M,B,j){return S(B)?T.grep(M,function(U,re){return!!B.call(U,re,U)!==j}):B.nodeType?T.grep(M,function(U){return U===B!==j}):typeof B!="string"?T.grep(M,function(U){return l.call(B,U)>-1!==j}):T.filter(B,M,j)}T.filter=function(M,B,j){var U=B[0];return j&&(M=":not("+M+")"),B.length===1&&U.nodeType===1?T.find.matchesSelector(U,M)?[U]:[]:T.find.matches(M,T.grep(B,function(re){return re.nodeType===1}))},T.fn.extend({find:function(M){var B,j,U=this.length,re=this;if(typeof M!="string")return this.pushStack(T(M).filter(function(){for(B=0;B<U;B++)if(T.contains(re[B],this))return!0}));for(j=this.pushStack([]),B=0;B<U;B++)T.find(M,re[B],j);return U>1?T.uniqueSort(j):j},filter:function(M){return this.pushStack(Z(this,M||[],!1))},not:function(M){return this.pushStack(Z(this,M||[],!0))},is:function(M){return!!Z(this,typeof M=="string"&&K.test(M)?T(M):M||[],!1).length}});var oe,Ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Y=T.fn.init=function(M,B,j){var U,re;if(!M)return this;if(j=j||oe,typeof M=="string")if(M[0]==="<"&&M[M.length-1]===">"&&M.length>=3?U=[null,M,null]:U=Ee.exec(M),U&&(U[1]||!B))if(U[1]){if(B=B instanceof T?B[0]:B,T.merge(this,T.parseHTML(U[1],B&&B.nodeType?B.ownerDocument||B:R,!0)),be.test(U[1])&&T.isPlainObject(B))for(U in B)S(this[U])?this[U](B[U]):this.attr(U,B[U]);return this}else return re=R.getElementById(U[2]),re&&(this[0]=re,this.length=1),this;else return!B||B.jquery?(B||j).find(M):this.constructor(B).find(M);else{if(M.nodeType)return this[0]=M,this.length=1,this;if(S(M))return j.ready!==void 0?j.ready(M):M(T)}return T.makeArray(M,this)};Y.prototype=T.fn,oe=T(R);var G=/^(?:parents|prev(?:Until|All))/,le={children:!0,contents:!0,next:!0,prev:!0};T.fn.extend({has:function(M){var B=T(M,this),j=B.length;return this.filter(function(){for(var U=0;U<j;U++)if(T.contains(this,B[U]))return!0})},closest:function(M,B){var j,U=0,re=this.length,ce=[],ve=typeof M!="string"&&T(M);if(!K.test(M)){for(;U<re;U++)for(j=this[U];j&&j!==B;j=j.parentNode)if(j.nodeType<11&&(ve?ve.index(j)>-1:j.nodeType===1&&T.find.matchesSelector(j,M))){ce.push(j);break}}return this.pushStack(ce.length>1?T.uniqueSort(ce):ce)},index:function(M){return M?typeof M=="string"?l.call(T(M),this[0]):l.call(this,M.jquery?M[0]:M):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(M,B){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(M,B))))},addBack:function(M){return this.add(M==null?this.prevObject:this.prevObject.filter(M))}});function X(M,B){for(;(M=M[B])&&M.nodeType!==1;);return M}T.each({parent:function(M){var B=M.parentNode;return B&&B.nodeType!==11?B:null},parents:function(M){return Me(M,"parentNode")},parentsUntil:function(M,B,j){return Me(M,"parentNode",j)},next:function(M){return X(M,"nextSibling")},prev:function(M){return X(M,"previousSibling")},nextAll:function(M){return Me(M,"nextSibling")},prevAll:function(M){return Me(M,"previousSibling")},nextUntil:function(M,B,j){return Me(M,"nextSibling",j)},prevUntil:function(M,B,j){return Me(M,"previousSibling",j)},siblings:function(M){return me((M.parentNode||{}).firstChild,M)},children:function(M){return me(M.firstChild)},contents:function(M){return M.contentDocument!=null&&i(M.contentDocument)?M.contentDocument:(ue(M,"template")&&(M=M.content||M),T.merge([],M.childNodes))}},function(M,B){T.fn[M]=function(j,U){var re=T.map(this,B,j);return M.slice(-5)!=="Until"&&(U=j),U&&typeof U=="string"&&(re=T.filter(U,re)),this.length>1&&(le[M]||T.uniqueSort(re),G.test(M)&&re.reverse()),this.pushStack(re)}});var Ue=/[^\x20\t\r\n\f]+/g;function Ze(M){var B={};return T.each(M.match(Ue)||[],function(j,U){B[U]=!0}),B}T.Callbacks=function(M){M=typeof M=="string"?Ze(M):T.extend({},M);var B,j,U,re,ce=[],ve=[],je=-1,We=function(){for(re=re||M.once,U=B=!0;ve.length;je=-1)for(j=ve.shift();++je<ce.length;)ce[je].apply(j[0],j[1])===!1&&M.stopOnFalse&&(je=ce.length,j=!1);M.memory||(j=!1),B=!1,re&&(j?ce=[]:ce="")},$e={add:function(){return ce&&(j&&!B&&(je=ce.length-1,ve.push(j)),function ut(jt){T.each(jt,function(at,Ct){S(Ct)?(!M.unique||!$e.has(Ct))&&ce.push(Ct):Ct&&Ct.length&&Q(Ct)!=="string"&&ut(Ct)})}(arguments),j&&!B&&We()),this},remove:function(){return T.each(arguments,function(ut,jt){for(var at;(at=T.inArray(jt,ce,at))>-1;)ce.splice(at,1),at<=je&&je--}),this},has:function(ut){return ut?T.inArray(ut,ce)>-1:ce.length>0},empty:function(){return ce&&(ce=[]),this},disable:function(){return re=ve=[],ce=j="",this},disabled:function(){return!ce},lock:function(){return re=ve=[],!j&&!B&&(ce=j=""),this},locked:function(){return!!re},fireWith:function(ut,jt){return re||(jt=jt||[],jt=[ut,jt.slice?jt.slice():jt],ve.push(jt),B||We()),this},fire:function(){return $e.fireWith(this,arguments),this},fired:function(){return!!U}};return $e};function De(M){return M}function xe(M){throw M}function ke(M,B,j,U){var re;try{M&&S(re=M.promise)?re.call(M).done(B).fail(j):M&&S(re=M.then)?re.call(M,B,j):B.apply(void 0,[M].slice(U))}catch(ce){j.apply(void 0,[ce])}}T.extend({Deferred:function(M){var B=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],j="pending",U={state:function(){return j},always:function(){return re.done(arguments).fail(arguments),this},catch:function(ce){return U.then(null,ce)},pipe:function(){var ce=arguments;return T.Deferred(function(ve){T.each(B,function(je,We){var $e=S(ce[We[4]])&&ce[We[4]];re[We[1]](function(){var ut=$e&&$e.apply(this,arguments);ut&&S(ut.promise)?ut.promise().progress(ve.notify).done(ve.resolve).fail(ve.reject):ve[We[0]+"With"](this,$e?[ut]:arguments)})}),ce=null}).promise()},then:function(ce,ve,je){var We=0;function $e(ut,jt,at,Ct){return function(){var xn=this,Yn=arguments,Cn=function(){var Tr,rs;if(!(ut<We)){if(Tr=at.apply(xn,Yn),Tr===jt.promise())throw new TypeError("Thenable self-resolution");rs=Tr&&(typeof Tr=="object"||typeof Tr=="function")&&Tr.then,S(rs)?Ct?rs.call(Tr,$e(We,jt,De,Ct),$e(We,jt,xe,Ct)):(We++,rs.call(Tr,$e(We,jt,De,Ct),$e(We,jt,xe,Ct),$e(We,jt,De,jt.notifyWith))):(at!==De&&(xn=void 0,Yn=[Tr]),(Ct||jt.resolveWith)(xn,Yn))}},Lr=Ct?Cn:function(){try{Cn()}catch(Tr){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(Tr,Lr.stackTrace),ut+1>=We&&(at!==xe&&(xn=void 0,Yn=[Tr]),jt.rejectWith(xn,Yn))}};ut?Lr():(T.Deferred.getStackHook&&(Lr.stackTrace=T.Deferred.getStackHook()),t.setTimeout(Lr))}}return T.Deferred(function(ut){B[0][3].add($e(0,ut,S(je)?je:De,ut.notifyWith)),B[1][3].add($e(0,ut,S(ce)?ce:De)),B[2][3].add($e(0,ut,S(ve)?ve:xe))}).promise()},promise:function(ce){return ce!=null?T.extend(ce,U):U}},re={};return T.each(B,function(ce,ve){var je=ve[2],We=ve[5];U[ve[1]]=je.add,We&&je.add(function(){j=We},B[3-ce][2].disable,B[3-ce][3].disable,B[0][2].lock,B[0][3].lock),je.add(ve[3].fire),re[ve[0]]=function(){return re[ve[0]+"With"](this===re?void 0:this,arguments),this},re[ve[0]+"With"]=je.fireWith}),U.promise(re),M&&M.call(re,re),re},when:function(M){var B=arguments.length,j=B,U=Array(j),re=r.call(arguments),ce=T.Deferred(),ve=function(je){return function(We){U[je]=this,re[je]=arguments.length>1?r.call(arguments):We,--B||ce.resolveWith(U,re)}};if(B<=1&&(ke(M,ce.done(ve(j)).resolve,ce.reject,!B),ce.state()==="pending"||S(re[j]&&re[j].then)))return ce.then();for(;j--;)ke(re[j],ve(j),ce.reject);return ce.promise()}});var Ve=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(M,B){t.console&&t.console.warn&&M&&Ve.test(M.name)&&t.console.warn("jQuery.Deferred exception: "+M.message,M.stack,B)},T.readyException=function(M){t.setTimeout(function(){throw M})};var it=T.Deferred();T.fn.ready=function(M){return it.then(M).catch(function(B){T.readyException(B)}),this},T.extend({isReady:!1,readyWait:1,ready:function(M){(M===!0?--T.readyWait:T.isReady)||(T.isReady=!0,!(M!==!0&&--T.readyWait>0)&&it.resolveWith(R,[T]))}}),T.ready.then=it.then;function Je(){R.removeEventListener("DOMContentLoaded",Je),t.removeEventListener("load",Je),T.ready()}R.readyState==="complete"||R.readyState!=="loading"&&!R.documentElement.doScroll?t.setTimeout(T.ready):(R.addEventListener("DOMContentLoaded",Je),t.addEventListener("load",Je));var st=function(M,B,j,U,re,ce,ve){var je=0,We=M.length,$e=j==null;if(Q(j)==="object"){re=!0;for(je in j)st(M,B,je,j[je],!0,ce,ve)}else if(U!==void 0&&(re=!0,S(U)||(ve=!0),$e&&(ve?(B.call(M,U),B=null):($e=B,B=function(ut,jt,at){return $e.call(T(ut),at)})),B))for(;je<We;je++)B(M[je],j,ve?U:U.call(M[je],je,B(M[je],j)));return re?M:$e?B.call(M):We?B(M[0],j):ce},ot=/^-ms-/,pn=/-([a-z])/g;function tn(M,B){return B.toUpperCase()}function Tt(M){return M.replace(ot,"ms-").replace(pn,tn)}var mt=function(M){return M.nodeType===1||M.nodeType===9||!+M.nodeType};function Mn(){this.expando=T.expando+Mn.uid++}Mn.uid=1,Mn.prototype={cache:function(M){var B=M[this.expando];return B||(B={},mt(M)&&(M.nodeType?M[this.expando]=B:Object.defineProperty(M,this.expando,{value:B,configurable:!0}))),B},set:function(M,B,j){var U,re=this.cache(M);if(typeof B=="string")re[Tt(B)]=j;else for(U in B)re[Tt(U)]=B[U];return re},get:function(M,B){return B===void 0?this.cache(M):M[this.expando]&&M[this.expando][Tt(B)]},access:function(M,B,j){return B===void 0||B&&typeof B=="string"&&j===void 0?this.get(M,B):(this.set(M,B,j),j!==void 0?j:B)},remove:function(M,B){var j,U=M[this.expando];if(U!==void 0){if(B!==void 0)for(Array.isArray(B)?B=B.map(Tt):(B=Tt(B),B=B in U?[B]:B.match(Ue)||[]),j=B.length;j--;)delete U[B[j]];(B===void 0||T.isEmptyObject(U))&&(M.nodeType?M[this.expando]=void 0:delete M[this.expando])}},hasData:function(M){var B=M[this.expando];return B!==void 0&&!T.isEmptyObject(B)}};var vt=new Mn,Nn=new Mn,ui=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Mr=/[A-Z]/g;function Br(M){return M==="true"?!0:M==="false"?!1:M==="null"?null:M===+M+""?+M:ui.test(M)?JSON.parse(M):M}function Fi(M,B,j){var U;if(j===void 0&&M.nodeType===1)if(U="data-"+B.replace(Mr,"-$&").toLowerCase(),j=M.getAttribute(U),typeof j=="string"){try{j=Br(j)}catch{}Nn.set(M,B,j)}else j=void 0;return j}T.extend({hasData:function(M){return Nn.hasData(M)||vt.hasData(M)},data:function(M,B,j){return Nn.access(M,B,j)},removeData:function(M,B){Nn.remove(M,B)},_data:function(M,B,j){return vt.access(M,B,j)},_removeData:function(M,B){vt.remove(M,B)}}),T.fn.extend({data:function(M,B){var j,U,re,ce=this[0],ve=ce&&ce.attributes;if(M===void 0){if(this.length&&(re=Nn.get(ce),ce.nodeType===1&&!vt.get(ce,"hasDataAttrs"))){for(j=ve.length;j--;)ve[j]&&(U=ve[j].name,U.indexOf("data-")===0&&(U=Tt(U.slice(5)),Fi(ce,U,re[U])));vt.set(ce,"hasDataAttrs",!0)}return re}return typeof M=="object"?this.each(function(){Nn.set(this,M)}):st(this,function(je){var We;if(ce&&je===void 0)return We=Nn.get(ce,M),We!==void 0||(We=Fi(ce,M),We!==void 0)?We:void 0;this.each(function(){Nn.set(this,M,je)})},null,B,arguments.length>1,null,!0)},removeData:function(M){return this.each(function(){Nn.remove(this,M)})}}),T.extend({queue:function(M,B,j){var U;if(M)return B=(B||"fx")+"queue",U=vt.get(M,B),j&&(!U||Array.isArray(j)?U=vt.access(M,B,T.makeArray(j)):U.push(j)),U||[]},dequeue:function(M,B){B=B||"fx";var j=T.queue(M,B),U=j.length,re=j.shift(),ce=T._queueHooks(M,B),ve=function(){T.dequeue(M,B)};re==="inprogress"&&(re=j.shift(),U--),re&&(B==="fx"&&j.unshift("inprogress"),delete ce.stop,re.call(M,ve,ce)),!U&&ce&&ce.empty.fire()},_queueHooks:function(M,B){var j=B+"queueHooks";return vt.get(M,j)||vt.access(M,j,{empty:T.Callbacks("once memory").add(function(){vt.remove(M,[B+"queue",j])})})}}),T.fn.extend({queue:function(M,B){var j=2;return typeof M!="string"&&(B=M,M="fx",j--),arguments.length<j?T.queue(this[0],M):B===void 0?this:this.each(function(){var U=T.queue(this,M,B);T._queueHooks(this,M),M==="fx"&&U[0]!=="inprogress"&&T.dequeue(this,M)})},dequeue:function(M){return this.each(function(){T.dequeue(this,M)})},clearQueue:function(M){return this.queue(M||"fx",[])},promise:function(M,B){var j,U=1,re=T.Deferred(),ce=this,ve=this.length,je=function(){--U||re.resolveWith(ce,[ce])};for(typeof M!="string"&&(B=M,M=void 0),M=M||"fx";ve--;)j=vt.get(ce[ve],M+"queueHooks"),j&&j.empty&&(U++,j.empty.add(je));return je(),re.promise(B)}});var qt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Qn=new RegExp("^(?:([+-])=|)("+qt+")([a-z%]*)$","i"),Sr=["Top","Right","Bottom","Left"],vi=R.documentElement,Pr=function(M){return T.contains(M.ownerDocument,M)},Wi={composed:!0};vi.getRootNode&&(Pr=function(M){return T.contains(M.ownerDocument,M)||M.getRootNode(Wi)===M.ownerDocument});var li=function(M,B){return M=B||M,M.style.display==="none"||M.style.display===""&&Pr(M)&&T.css(M,"display")==="none"};function Hi(M,B,j,U){var re,ce,ve=20,je=U?function(){return U.cur()}:function(){return T.css(M,B,"")},We=je(),$e=j&&j[3]||(T.cssNumber[B]?"":"px"),ut=M.nodeType&&(T.cssNumber[B]||$e!=="px"&&+We)&&Qn.exec(T.css(M,B));if(ut&&ut[3]!==$e){for(We=We/2,$e=$e||ut[3],ut=+We||1;ve--;)T.style(M,B,ut+$e),(1-ce)*(1-(ce=je()/We||.5))<=0&&(ve=0),ut=ut/ce;ut=ut*2,T.style(M,B,ut+$e),j=j||[]}return j&&(ut=+ut||+We||0,re=j[1]?ut+(j[1]+1)*j[2]:+j[2],U&&(U.unit=$e,U.start=ut,U.end=re)),re}var is={};function Eo(M){var B,j=M.ownerDocument,U=M.nodeName,re=is[U];return re||(B=j.body.appendChild(j.createElement(U)),re=T.css(B,"display"),B.parentNode.removeChild(B),re==="none"&&(re="block"),is[U]=re,re)}function Jr(M,B){for(var j,U,re=[],ce=0,ve=M.length;ce<ve;ce++)U=M[ce],U.style&&(j=U.style.display,B?(j==="none"&&(re[ce]=vt.get(U,"display")||null,re[ce]||(U.style.display="")),U.style.display===""&&li(U)&&(re[ce]=Eo(U))):j!=="none"&&(re[ce]="none",vt.set(U,"display",j)));for(ce=0;ce<ve;ce++)re[ce]!=null&&(M[ce].style.display=re[ce]);return M}T.fn.extend({show:function(){return Jr(this,!0)},hide:function(){return Jr(this)},toggle:function(M){return typeof M=="boolean"?M?this.show():this.hide():this.each(function(){li(this)?T(this).show():T(this).hide()})}});var Pi=/^(?:checkbox|radio)$/i,ee=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,te=/^$|^module$|\/(?:java|ecma)script/i;(function(){var M=R.createDocumentFragment(),B=M.appendChild(R.createElement("div")),j=R.createElement("input");j.setAttribute("type","radio"),j.setAttribute("checked","checked"),j.setAttribute("name","t"),B.appendChild(j),w.checkClone=B.cloneNode(!0).cloneNode(!0).lastChild.checked,B.innerHTML="<textarea>x</textarea>",w.noCloneChecked=!!B.cloneNode(!0).lastChild.defaultValue,B.innerHTML="<option></option>",w.option=!!B.lastChild})();var Te={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Te.tbody=Te.tfoot=Te.colgroup=Te.caption=Te.thead,Te.th=Te.td,w.option||(Te.optgroup=Te.option=[1,"<select multiple='multiple'>","</select>"]);function Qe(M,B){var j;return typeof M.getElementsByTagName<"u"?j=M.getElementsByTagName(B||"*"):typeof M.querySelectorAll<"u"?j=M.querySelectorAll(B||"*"):j=[],B===void 0||B&&ue(M,B)?T.merge([M],j):j}function bt(M,B){for(var j=0,U=M.length;j<U;j++)vt.set(M[j],"globalEval",!B||vt.get(B[j],"globalEval"))}var Rt=/<|&#?\w+;/;function Nt(M,B,j,U,re){for(var ce,ve,je,We,$e,ut,jt=B.createDocumentFragment(),at=[],Ct=0,xn=M.length;Ct<xn;Ct++)if(ce=M[Ct],ce||ce===0)if(Q(ce)==="object")T.merge(at,ce.nodeType?[ce]:ce);else if(!Rt.test(ce))at.push(B.createTextNode(ce));else{for(ve=ve||jt.appendChild(B.createElement("div")),je=(ee.exec(ce)||["",""])[1].toLowerCase(),We=Te[je]||Te._default,ve.innerHTML=We[1]+T.htmlPrefilter(ce)+We[2],ut=We[0];ut--;)ve=ve.lastChild;T.merge(at,ve.childNodes),ve=jt.firstChild,ve.textContent=""}for(jt.textContent="",Ct=0;ce=at[Ct++];){if(U&&T.inArray(ce,U)>-1){re&&re.push(ce);continue}if($e=Pr(ce),ve=Qe(jt.appendChild(ce),"script"),$e&&bt(ve),j)for(ut=0;ce=ve[ut++];)te.test(ce.type||"")&&j.push(ce)}return jt}var St=/^([^.]*)(?:\.(.+)|)/;function kn(){return!0}function rn(){return!1}function rr(M,B){return M===Ye()==(B==="focus")}function Ye(){try{return R.activeElement}catch{}}function rt(M,B,j,U,re,ce){var ve,je;if(typeof B=="object"){typeof j!="string"&&(U=U||j,j=void 0);for(je in B)rt(M,je,j,U,B[je],ce);return M}if(U==null&&re==null?(re=j,U=j=void 0):re==null&&(typeof j=="string"?(re=U,U=void 0):(re=U,U=j,j=void 0)),re===!1)re=rn;else if(!re)return M;return ce===1&&(ve=re,re=function(We){return T().off(We),ve.apply(this,arguments)},re.guid=ve.guid||(ve.guid=T.guid++)),M.each(function(){T.event.add(this,B,re,U,j)})}T.event={global:{},add:function(M,B,j,U,re){var ce,ve,je,We,$e,ut,jt,at,Ct,xn,Yn,Cn=vt.get(M);if(mt(M))for(j.handler&&(ce=j,j=ce.handler,re=ce.selector),re&&T.find.matchesSelector(vi,re),j.guid||(j.guid=T.guid++),(We=Cn.events)||(We=Cn.events=Object.create(null)),(ve=Cn.handle)||(ve=Cn.handle=function(Lr){return typeof T<"u"&&T.event.triggered!==Lr.type?T.event.dispatch.apply(M,arguments):void 0}),B=(B||"").match(Ue)||[""],$e=B.length;$e--;)je=St.exec(B[$e])||[],Ct=Yn=je[1],xn=(je[2]||"").split(".").sort(),Ct&&(jt=T.event.special[Ct]||{},Ct=(re?jt.delegateType:jt.bindType)||Ct,jt=T.event.special[Ct]||{},ut=T.extend({type:Ct,origType:Yn,data:U,handler:j,guid:j.guid,selector:re,needsContext:re&&T.expr.match.needsContext.test(re),namespace:xn.join(".")},ce),(at=We[Ct])||(at=We[Ct]=[],at.delegateCount=0,(!jt.setup||jt.setup.call(M,U,xn,ve)===!1)&&M.addEventListener&&M.addEventListener(Ct,ve)),jt.add&&(jt.add.call(M,ut),ut.handler.guid||(ut.handler.guid=j.guid)),re?at.splice(at.delegateCount++,0,ut):at.push(ut),T.event.global[Ct]=!0)},remove:function(M,B,j,U,re){var ce,ve,je,We,$e,ut,jt,at,Ct,xn,Yn,Cn=vt.hasData(M)&&vt.get(M);if(!(!Cn||!(We=Cn.events))){for(B=(B||"").match(Ue)||[""],$e=B.length;$e--;){if(je=St.exec(B[$e])||[],Ct=Yn=je[1],xn=(je[2]||"").split(".").sort(),!Ct){for(Ct in We)T.event.remove(M,Ct+B[$e],j,U,!0);continue}for(jt=T.event.special[Ct]||{},Ct=(U?jt.delegateType:jt.bindType)||Ct,at=We[Ct]||[],je=je[2]&&new RegExp("(^|\\.)"+xn.join("\\.(?:.*\\.|)")+"(\\.|$)"),ve=ce=at.length;ce--;)ut=at[ce],(re||Yn===ut.origType)&&(!j||j.guid===ut.guid)&&(!je||je.test(ut.namespace))&&(!U||U===ut.selector||U==="**"&&ut.selector)&&(at.splice(ce,1),ut.selector&&at.delegateCount--,jt.remove&&jt.remove.call(M,ut));ve&&!at.length&&((!jt.teardown||jt.teardown.call(M,xn,Cn.handle)===!1)&&T.removeEvent(M,Ct,Cn.handle),delete We[Ct])}T.isEmptyObject(We)&&vt.remove(M,"handle events")}},dispatch:function(M){var B,j,U,re,ce,ve,je=new Array(arguments.length),We=T.event.fix(M),$e=(vt.get(this,"events")||Object.create(null))[We.type]||[],ut=T.event.special[We.type]||{};for(je[0]=We,B=1;B<arguments.length;B++)je[B]=arguments[B];if(We.delegateTarget=this,!(ut.preDispatch&&ut.preDispatch.call(this,We)===!1)){for(ve=T.event.handlers.call(this,We,$e),B=0;(re=ve[B++])&&!We.isPropagationStopped();)for(We.currentTarget=re.elem,j=0;(ce=re.handlers[j++])&&!We.isImmediatePropagationStopped();)(!We.rnamespace||ce.namespace===!1||We.rnamespace.test(ce.namespace))&&(We.handleObj=ce,We.data=ce.data,U=((T.event.special[ce.origType]||{}).handle||ce.handler).apply(re.elem,je),U!==void 0&&(We.result=U)===!1&&(We.preventDefault(),We.stopPropagation()));return ut.postDispatch&&ut.postDispatch.call(this,We),We.result}},handlers:function(M,B){var j,U,re,ce,ve,je=[],We=B.delegateCount,$e=M.target;if(We&&$e.nodeType&&!(M.type==="click"&&M.button>=1)){for(;$e!==this;$e=$e.parentNode||this)if($e.nodeType===1&&!(M.type==="click"&&$e.disabled===!0)){for(ce=[],ve={},j=0;j<We;j++)U=B[j],re=U.selector+" ",ve[re]===void 0&&(ve[re]=U.needsContext?T(re,this).index($e)>-1:T.find(re,this,null,[$e]).length),ve[re]&&ce.push(U);ce.length&&je.push({elem:$e,handlers:ce})}}return $e=this,We<B.length&&je.push({elem:$e,handlers:B.slice(We)}),je},addProp:function(M,B){Object.defineProperty(T.Event.prototype,M,{enumerable:!0,configurable:!0,get:S(B)?function(){if(this.originalEvent)return B(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[M]},set:function(j){Object.defineProperty(this,M,{enumerable:!0,configurable:!0,writable:!0,value:j})}})},fix:function(M){return M[T.expando]?M:new T.Event(M)},special:{load:{noBubble:!0},click:{setup:function(M){var B=this||M;return Pi.test(B.type)&&B.click&&ue(B,"input")&&dt(B,"click",kn),!1},trigger:function(M){var B=this||M;return Pi.test(B.type)&&B.click&&ue(B,"input")&&dt(B,"click"),!0},_default:function(M){var B=M.target;return Pi.test(B.type)&&B.click&&ue(B,"input")&&vt.get(B,"click")||ue(B,"a")}},beforeunload:{postDispatch:function(M){M.result!==void 0&&M.originalEvent&&(M.originalEvent.returnValue=M.result)}}}};function dt(M,B,j){if(!j){vt.get(M,B)===void 0&&T.event.add(M,B,kn);return}vt.set(M,B,!1),T.event.add(M,B,{namespace:!1,handler:function(U){var re,ce,ve=vt.get(this,B);if(U.isTrigger&1&&this[B]){if(ve.length)(T.event.special[B]||{}).delegateType&&U.stopPropagation();else if(ve=r.call(arguments),vt.set(this,B,ve),re=j(this,B),this[B](),ce=vt.get(this,B),ve!==ce||re?vt.set(this,B,!1):ce={},ve!==ce)return U.stopImmediatePropagation(),U.preventDefault(),ce&&ce.value}else ve.length&&(vt.set(this,B,{value:T.event.trigger(T.extend(ve[0],T.Event.prototype),ve.slice(1),this)}),U.stopImmediatePropagation())}})}T.removeEvent=function(M,B,j){M.removeEventListener&&M.removeEventListener(B,j)},T.Event=function(M,B){if(!(this instanceof T.Event))return new T.Event(M,B);M&&M.type?(this.originalEvent=M,this.type=M.type,this.isDefaultPrevented=M.defaultPrevented||M.defaultPrevented===void 0&&M.returnValue===!1?kn:rn,this.target=M.target&&M.target.nodeType===3?M.target.parentNode:M.target,this.currentTarget=M.currentTarget,this.relatedTarget=M.relatedTarget):this.type=M,B&&T.extend(this,B),this.timeStamp=M&&M.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:rn,isPropagationStopped:rn,isImmediatePropagationStopped:rn,isSimulated:!1,preventDefault:function(){var M=this.originalEvent;this.isDefaultPrevented=kn,M&&!this.isSimulated&&M.preventDefault()},stopPropagation:function(){var M=this.originalEvent;this.isPropagationStopped=kn,M&&!this.isSimulated&&M.stopPropagation()},stopImmediatePropagation:function(){var M=this.originalEvent;this.isImmediatePropagationStopped=kn,M&&!this.isSimulated&&M.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},function(M,B){T.event.special[M]={setup:function(){return dt(this,M,rr),!1},trigger:function(){return dt(this,M),!0},_default:function(){return!0},delegateType:B}}),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(M,B){T.event.special[M]={delegateType:B,bindType:B,handle:function(j){var U,re=this,ce=j.relatedTarget,ve=j.handleObj;return(!ce||ce!==re&&!T.contains(re,ce))&&(j.type=ve.origType,U=ve.handler.apply(this,arguments),j.type=B),U}}}),T.fn.extend({on:function(M,B,j,U){return rt(this,M,B,j,U)},one:function(M,B,j,U){return rt(this,M,B,j,U,1)},off:function(M,B,j){var U,re;if(M&&M.preventDefault&&M.handleObj)return U=M.handleObj,T(M.delegateTarget).off(U.namespace?U.origType+"."+U.namespace:U.origType,U.selector,U.handler),this;if(typeof M=="object"){for(re in M)this.off(re,B,M[re]);return this}return(B===!1||typeof B=="function")&&(j=B,B=void 0),j===!1&&(j=rn),this.each(function(){T.event.remove(this,M,j,B)})}});var Dt=/<script|<style|<link/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,Qt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pt(M,B){return ue(M,"table")&&ue(B.nodeType!==11?B:B.firstChild,"tr")&&T(M).children("tbody")[0]||M}function It(M){return M.type=(M.getAttribute("type")!==null)+"/"+M.type,M}function c(M){return(M.type||"").slice(0,5)==="true/"?M.type=M.type.slice(5):M.removeAttribute("type"),M}function x(M,B){var j,U,re,ce,ve,je,We;if(B.nodeType===1){if(vt.hasData(M)&&(ce=vt.get(M),We=ce.events,We)){vt.remove(B,"handle events");for(re in We)for(j=0,U=We[re].length;j<U;j++)T.event.add(B,re,We[re][j])}Nn.hasData(M)&&(ve=Nn.access(M),je=T.extend({},ve),Nn.set(B,je))}}function g(M,B){var j=B.nodeName.toLowerCase();j==="input"&&Pi.test(M.type)?B.checked=M.checked:(j==="input"||j==="textarea")&&(B.defaultValue=M.defaultValue)}function f(M,B,j,U){B=s(B);var re,ce,ve,je,We,$e,ut=0,jt=M.length,at=jt-1,Ct=B[0],xn=S(Ct);if(xn||jt>1&&typeof Ct=="string"&&!w.checkClone&&Pt.test(Ct))return M.each(function(Yn){var Cn=M.eq(Yn);xn&&(B[0]=Ct.call(this,Yn,Cn.html())),f(Cn,B,j,U)});if(jt&&(re=Nt(B,M[0].ownerDocument,!1,M,U),ce=re.firstChild,re.childNodes.length===1&&(re=ce),ce||U)){for(ve=T.map(Qe(re,"script"),It),je=ve.length;ut<jt;ut++)We=re,ut!==at&&(We=T.clone(We,!0,!0),je&&T.merge(ve,Qe(We,"script"))),j.call(M[ut],We,ut);if(je)for($e=ve[ve.length-1].ownerDocument,T.map(ve,c),ut=0;ut<je;ut++)We=ve[ut],te.test(We.type||"")&&!vt.access(We,"globalEval")&&T.contains($e,We)&&(We.src&&(We.type||"").toLowerCase()!=="module"?T._evalUrl&&!We.noModule&&T._evalUrl(We.src,{nonce:We.nonce||We.getAttribute("nonce")},$e):ne(We.textContent.replace(Qt,""),We,$e))}return M}function v(M,B,j){for(var U,re=B?T.filter(B,M):M,ce=0;(U=re[ce])!=null;ce++)!j&&U.nodeType===1&&T.cleanData(Qe(U)),U.parentNode&&(j&&Pr(U)&&bt(Qe(U,"script")),U.parentNode.removeChild(U));return M}T.extend({htmlPrefilter:function(M){return M},clone:function(M,B,j){var U,re,ce,ve,je=M.cloneNode(!0),We=Pr(M);if(!w.noCloneChecked&&(M.nodeType===1||M.nodeType===11)&&!T.isXMLDoc(M))for(ve=Qe(je),ce=Qe(M),U=0,re=ce.length;U<re;U++)g(ce[U],ve[U]);if(B)if(j)for(ce=ce||Qe(M),ve=ve||Qe(je),U=0,re=ce.length;U<re;U++)x(ce[U],ve[U]);else x(M,je);return ve=Qe(je,"script"),ve.length>0&&bt(ve,!We&&Qe(M,"script")),je},cleanData:function(M){for(var B,j,U,re=T.event.special,ce=0;(j=M[ce])!==void 0;ce++)if(mt(j)){if(B=j[vt.expando]){if(B.events)for(U in B.events)re[U]?T.event.remove(j,U):T.removeEvent(j,U,B.handle);j[vt.expando]=void 0}j[Nn.expando]&&(j[Nn.expando]=void 0)}}}),T.fn.extend({detach:function(M){return v(this,M,!0)},remove:function(M){return v(this,M)},text:function(M){return st(this,function(B){return B===void 0?T.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=B)})},null,M,arguments.length)},append:function(){return f(this,arguments,function(M){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var B=pt(this,M);B.appendChild(M)}})},prepend:function(){return f(this,arguments,function(M){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var B=pt(this,M);B.insertBefore(M,B.firstChild)}})},before:function(){return f(this,arguments,function(M){this.parentNode&&this.parentNode.insertBefore(M,this)})},after:function(){return f(this,arguments,function(M){this.parentNode&&this.parentNode.insertBefore(M,this.nextSibling)})},empty:function(){for(var M,B=0;(M=this[B])!=null;B++)M.nodeType===1&&(T.cleanData(Qe(M,!1)),M.textContent="");return this},clone:function(M,B){return M=M??!1,B=B??M,this.map(function(){return T.clone(this,M,B)})},html:function(M){return st(this,function(B){var j=this[0]||{},U=0,re=this.length;if(B===void 0&&j.nodeType===1)return j.innerHTML;if(typeof B=="string"&&!Dt.test(B)&&!Te[(ee.exec(B)||["",""])[1].toLowerCase()]){B=T.htmlPrefilter(B);try{for(;U<re;U++)j=this[U]||{},j.nodeType===1&&(T.cleanData(Qe(j,!1)),j.innerHTML=B);j=0}catch{}}j&&this.empty().append(B)},null,M,arguments.length)},replaceWith:function(){var M=[];return f(this,arguments,function(B){var j=this.parentNode;T.inArray(this,M)<0&&(T.cleanData(Qe(this)),j&&j.replaceChild(B,this))},M)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(M,B){T.fn[M]=function(j){for(var U,re=[],ce=T(j),ve=ce.length-1,je=0;je<=ve;je++)U=je===ve?this:this.clone(!0),T(ce[je])[B](U),a.apply(re,U.get());return this.pushStack(re)}});var k=new RegExp("^("+qt+")(?!px)[a-z%]+$","i"),A=function(M){var B=M.ownerDocument.defaultView;return(!B||!B.opener)&&(B=t),B.getComputedStyle(M)},O=function(M,B,j){var U,re,ce={};for(re in B)ce[re]=M.style[re],M.style[re]=B[re];U=j.call(M);for(re in B)M.style[re]=ce[re];return U},N=new RegExp(Sr.join("|"),"i");(function(){function M(){if($e){We.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",$e.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",vi.appendChild(We).appendChild($e);var ut=t.getComputedStyle($e);j=ut.top!=="1%",je=B(ut.marginLeft)===12,$e.style.right="60%",ce=B(ut.right)===36,U=B(ut.width)===36,$e.style.position="absolute",re=B($e.offsetWidth/3)===12,vi.removeChild(We),$e=null}}function B(ut){return Math.round(parseFloat(ut))}var j,U,re,ce,ve,je,We=R.createElement("div"),$e=R.createElement("div");$e.style&&($e.style.backgroundClip="content-box",$e.cloneNode(!0).style.backgroundClip="",w.clearCloneStyle=$e.style.backgroundClip==="content-box",T.extend(w,{boxSizingReliable:function(){return M(),U},pixelBoxStyles:function(){return M(),ce},pixelPosition:function(){return M(),j},reliableMarginLeft:function(){return M(),je},scrollboxSize:function(){return M(),re},reliableTrDimensions:function(){var ut,jt,at,Ct;return ve==null&&(ut=R.createElement("table"),jt=R.createElement("tr"),at=R.createElement("div"),ut.style.cssText="position:absolute;left:-11111px;border-collapse:separate",jt.style.cssText="border:1px solid",jt.style.height="1px",at.style.height="9px",at.style.display="block",vi.appendChild(ut).appendChild(jt).appendChild(at),Ct=t.getComputedStyle(jt),ve=parseInt(Ct.height,10)+parseInt(Ct.borderTopWidth,10)+parseInt(Ct.borderBottomWidth,10)===jt.offsetHeight,vi.removeChild(ut)),ve}}))})();function D(M,B,j){var U,re,ce,ve,je=M.style;return j=j||A(M),j&&(ve=j.getPropertyValue(B)||j[B],ve===""&&!Pr(M)&&(ve=T.style(M,B)),!w.pixelBoxStyles()&&k.test(ve)&&N.test(B)&&(U=je.width,re=je.minWidth,ce=je.maxWidth,je.minWidth=je.maxWidth=je.width=ve,ve=j.width,je.width=U,je.minWidth=re,je.maxWidth=ce)),ve!==void 0?ve+"":ve}function V(M,B){return{get:function(){if(M()){delete this.get;return}return(this.get=B).apply(this,arguments)}}}var F=["Webkit","Moz","ms"],I=R.createElement("div").style,C={};function W(M){for(var B=M[0].toUpperCase()+M.slice(1),j=F.length;j--;)if(M=F[j]+B,M in I)return M}function de(M){var B=T.cssProps[M]||C[M];return B||(M in I?M:C[M]=W(M)||M)}var he=/^(none|table(?!-c[ea]).+)/,H=/^--/,ye={position:"absolute",visibility:"hidden",display:"block"},Ce={letterSpacing:"0",fontWeight:"400"};function He(M,B,j){var U=Qn.exec(B);return U?Math.max(0,U[2]-(j||0))+(U[3]||"px"):B}function Ie(M,B,j,U,re,ce){var ve=B==="width"?1:0,je=0,We=0;if(j===(U?"border":"content"))return 0;for(;ve<4;ve+=2)j==="margin"&&(We+=T.css(M,j+Sr[ve],!0,re)),U?(j==="content"&&(We-=T.css(M,"padding"+Sr[ve],!0,re)),j!=="margin"&&(We-=T.css(M,"border"+Sr[ve]+"Width",!0,re))):(We+=T.css(M,"padding"+Sr[ve],!0,re),j!=="padding"?We+=T.css(M,"border"+Sr[ve]+"Width",!0,re):je+=T.css(M,"border"+Sr[ve]+"Width",!0,re));return!U&&ce>=0&&(We+=Math.max(0,Math.ceil(M["offset"+B[0].toUpperCase()+B.slice(1)]-ce-We-je-.5))||0),We}function Se(M,B,j){var U=A(M),re=!w.boxSizingReliable()||j,ce=re&&T.css(M,"boxSizing",!1,U)==="border-box",ve=ce,je=D(M,B,U),We="offset"+B[0].toUpperCase()+B.slice(1);if(k.test(je)){if(!j)return je;je="auto"}return(!w.boxSizingReliable()&&ce||!w.reliableTrDimensions()&&ue(M,"tr")||je==="auto"||!parseFloat(je)&&T.css(M,"display",!1,U)==="inline")&&M.getClientRects().length&&(ce=T.css(M,"boxSizing",!1,U)==="border-box",ve=We in M,ve&&(je=M[We])),je=parseFloat(je)||0,je+Ie(M,B,j||(ce?"border":"content"),ve,U,je)+"px"}T.extend({cssHooks:{opacity:{get:function(M,B){if(B){var j=D(M,"opacity");return j===""?"1":j}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(M,B,j,U){if(!(!M||M.nodeType===3||M.nodeType===8||!M.style)){var re,ce,ve,je=Tt(B),We=H.test(B),$e=M.style;if(We||(B=de(je)),ve=T.cssHooks[B]||T.cssHooks[je],j!==void 0){if(ce=typeof j,ce==="string"&&(re=Qn.exec(j))&&re[1]&&(j=Hi(M,B,re),ce="number"),j==null||j!==j)return;ce==="number"&&!We&&(j+=re&&re[3]||(T.cssNumber[je]?"":"px")),!w.clearCloneStyle&&j===""&&B.indexOf("background")===0&&($e[B]="inherit"),(!ve||!("set"in ve)||(j=ve.set(M,j,U))!==void 0)&&(We?$e.setProperty(B,j):$e[B]=j)}else return ve&&"get"in ve&&(re=ve.get(M,!1,U))!==void 0?re:$e[B]}},css:function(M,B,j,U){var re,ce,ve,je=Tt(B),We=H.test(B);return We||(B=de(je)),ve=T.cssHooks[B]||T.cssHooks[je],ve&&"get"in ve&&(re=ve.get(M,!0,j)),re===void 0&&(re=D(M,B,U)),re==="normal"&&B in Ce&&(re=Ce[B]),j===""||j?(ce=parseFloat(re),j===!0||isFinite(ce)?ce||0:re):re}}),T.each(["height","width"],function(M,B){T.cssHooks[B]={get:function(j,U,re){if(U)return he.test(T.css(j,"display"))&&(!j.getClientRects().length||!j.getBoundingClientRect().width)?O(j,ye,function(){return Se(j,B,re)}):Se(j,B,re)},set:function(j,U,re){var ce,ve=A(j),je=!w.scrollboxSize()&&ve.position==="absolute",We=je||re,$e=We&&T.css(j,"boxSizing",!1,ve)==="border-box",ut=re?Ie(j,B,re,$e,ve):0;return $e&&je&&(ut-=Math.ceil(j["offset"+B[0].toUpperCase()+B.slice(1)]-parseFloat(ve[B])-Ie(j,B,"border",!1,ve)-.5)),ut&&(ce=Qn.exec(U))&&(ce[3]||"px")!=="px"&&(j.style[B]=U,U=T.css(j,B)),He(j,U,ut)}}}),T.cssHooks.marginLeft=V(w.reliableMarginLeft,function(M,B){if(B)return(parseFloat(D(M,"marginLeft"))||M.getBoundingClientRect().left-O(M,{marginLeft:0},function(){return M.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(M,B){T.cssHooks[M+B]={expand:function(j){for(var U=0,re={},ce=typeof j=="string"?j.split(" "):[j];U<4;U++)re[M+Sr[U]+B]=ce[U]||ce[U-2]||ce[0];return re}},M!=="margin"&&(T.cssHooks[M+B].set=He)}),T.fn.extend({css:function(M,B){return st(this,function(j,U,re){var ce,ve,je={},We=0;if(Array.isArray(U)){for(ce=A(j),ve=U.length;We<ve;We++)je[U[We]]=T.css(j,U[We],!1,ce);return je}return re!==void 0?T.style(j,U,re):T.css(j,U)},M,B,arguments.length>1)}});function tt(M,B,j,U,re){return new tt.prototype.init(M,B,j,U,re)}T.Tween=tt,tt.prototype={constructor:tt,init:function(M,B,j,U,re,ce){this.elem=M,this.prop=j,this.easing=re||T.easing._default,this.options=B,this.start=this.now=this.cur(),this.end=U,this.unit=ce||(T.cssNumber[j]?"":"px")},cur:function(){var M=tt.propHooks[this.prop];return M&&M.get?M.get(this):tt.propHooks._default.get(this)},run:function(M){var B,j=tt.propHooks[this.prop];return this.options.duration?this.pos=B=T.easing[this.easing](M,this.options.duration*M,0,1,this.options.duration):this.pos=B=M,this.now=(this.end-this.start)*B+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),j&&j.set?j.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(M){var B;return M.elem.nodeType!==1||M.elem[M.prop]!=null&&M.elem.style[M.prop]==null?M.elem[M.prop]:(B=T.css(M.elem,M.prop,""),!B||B==="auto"?0:B)},set:function(M){T.fx.step[M.prop]?T.fx.step[M.prop](M):M.elem.nodeType===1&&(T.cssHooks[M.prop]||M.elem.style[de(M.prop)]!=null)?T.style(M.elem,M.prop,M.now+M.unit):M.elem[M.prop]=M.now}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(M){M.elem.nodeType&&M.elem.parentNode&&(M.elem[M.prop]=M.now)}},T.easing={linear:function(M){return M},swing:function(M){return .5-Math.cos(M*Math.PI)/2},_default:"swing"},T.fx=tt.prototype.init,T.fx.step={};var xt,qe,Ge=/^(?:toggle|show|hide)$/,_t=/queueHooks$/;function ze(){qe&&(R.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(ze):t.setTimeout(ze,T.fx.interval),T.fx.tick())}function Pe(){return t.setTimeout(function(){xt=void 0}),xt=Date.now()}function ct(M,B){var j,U=0,re={height:M};for(B=B?1:0;U<4;U+=2-B)j=Sr[U],re["margin"+j]=re["padding"+j]=M;return B&&(re.opacity=re.width=M),re}function wt(M,B,j){for(var U,re=(wn.tweeners[B]||[]).concat(wn.tweeners["*"]),ce=0,ve=re.length;ce<ve;ce++)if(U=re[ce].call(j,B,M))return U}function Ne(M,B,j){var U,re,ce,ve,je,We,$e,ut,jt="width"in B||"height"in B,at=this,Ct={},xn=M.style,Yn=M.nodeType&&li(M),Cn=vt.get(M,"fxshow");j.queue||(ve=T._queueHooks(M,"fx"),ve.unqueued==null&&(ve.unqueued=0,je=ve.empty.fire,ve.empty.fire=function(){ve.unqueued||je()}),ve.unqueued++,at.always(function(){at.always(function(){ve.unqueued--,T.queue(M,"fx").length||ve.empty.fire()})}));for(U in B)if(re=B[U],Ge.test(re)){if(delete B[U],ce=ce||re==="toggle",re===(Yn?"hide":"show"))if(re==="show"&&Cn&&Cn[U]!==void 0)Yn=!0;else continue;Ct[U]=Cn&&Cn[U]||T.style(M,U)}if(We=!T.isEmptyObject(B),!(!We&&T.isEmptyObject(Ct))){jt&&M.nodeType===1&&(j.overflow=[xn.overflow,xn.overflowX,xn.overflowY],$e=Cn&&Cn.display,$e==null&&($e=vt.get(M,"display")),ut=T.css(M,"display"),ut==="none"&&($e?ut=$e:(Jr([M],!0),$e=M.style.display||$e,ut=T.css(M,"display"),Jr([M]))),(ut==="inline"||ut==="inline-block"&&$e!=null)&&T.css(M,"float")==="none"&&(We||(at.done(function(){xn.display=$e}),$e==null&&(ut=xn.display,$e=ut==="none"?"":ut)),xn.display="inline-block")),j.overflow&&(xn.overflow="hidden",at.always(function(){xn.overflow=j.overflow[0],xn.overflowX=j.overflow[1],xn.overflowY=j.overflow[2]})),We=!1;for(U in Ct)We||(Cn?"hidden"in Cn&&(Yn=Cn.hidden):Cn=vt.access(M,"fxshow",{display:$e}),ce&&(Cn.hidden=!Yn),Yn&&Jr([M],!0),at.done(function(){Yn||Jr([M]),vt.remove(M,"fxshow");for(U in Ct)T.style(M,U,Ct[U])})),We=wt(Yn?Cn[U]:0,U,at),U in Cn||(Cn[U]=We.start,Yn&&(We.end=We.start,We.start=0))}}function Sn(M,B){var j,U,re,ce,ve;for(j in M)if(U=Tt(j),re=B[U],ce=M[j],Array.isArray(ce)&&(re=ce[1],ce=M[j]=ce[0]),j!==U&&(M[U]=ce,delete M[j]),ve=T.cssHooks[U],ve&&"expand"in ve){ce=ve.expand(ce),delete M[U];for(j in ce)j in M||(M[j]=ce[j],B[j]=re)}else B[U]=re}function wn(M,B,j){var U,re,ce=0,ve=wn.prefilters.length,je=T.Deferred().always(function(){delete We.elem}),We=function(){if(re)return!1;for(var jt=xt||Pe(),at=Math.max(0,$e.startTime+$e.duration-jt),Ct=at/$e.duration||0,xn=1-Ct,Yn=0,Cn=$e.tweens.length;Yn<Cn;Yn++)$e.tweens[Yn].run(xn);return je.notifyWith(M,[$e,xn,at]),xn<1&&Cn?at:(Cn||je.notifyWith(M,[$e,1,0]),je.resolveWith(M,[$e]),!1)},$e=je.promise({elem:M,props:T.extend({},B),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},j),originalProperties:B,originalOptions:j,startTime:xt||Pe(),duration:j.duration,tweens:[],createTween:function(jt,at){var Ct=T.Tween(M,$e.opts,jt,at,$e.opts.specialEasing[jt]||$e.opts.easing);return $e.tweens.push(Ct),Ct},stop:function(jt){var at=0,Ct=jt?$e.tweens.length:0;if(re)return this;for(re=!0;at<Ct;at++)$e.tweens[at].run(1);return jt?(je.notifyWith(M,[$e,1,0]),je.resolveWith(M,[$e,jt])):je.rejectWith(M,[$e,jt]),this}}),ut=$e.props;for(Sn(ut,$e.opts.specialEasing);ce<ve;ce++)if(U=wn.prefilters[ce].call($e,M,ut,$e.opts),U)return S(U.stop)&&(T._queueHooks($e.elem,$e.opts.queue).stop=U.stop.bind(U)),U;return T.map(ut,wt,$e),S($e.opts.start)&&$e.opts.start.call(M,$e),$e.progress($e.opts.progress).done($e.opts.done,$e.opts.complete).fail($e.opts.fail).always($e.opts.always),T.fx.timer(T.extend(We,{elem:M,anim:$e,queue:$e.opts.queue})),$e}T.Animation=T.extend(wn,{tweeners:{"*":[function(M,B){var j=this.createTween(M,B);return Hi(j.elem,M,Qn.exec(B),j),j}]},tweener:function(M,B){S(M)?(B=M,M=["*"]):M=M.match(Ue);for(var j,U=0,re=M.length;U<re;U++)j=M[U],wn.tweeners[j]=wn.tweeners[j]||[],wn.tweeners[j].unshift(B)},prefilters:[Ne],prefilter:function(M,B){B?wn.prefilters.unshift(M):wn.prefilters.push(M)}}),T.speed=function(M,B,j){var U=M&&typeof M=="object"?T.extend({},M):{complete:j||!j&&B||S(M)&&M,duration:M,easing:j&&B||B&&!S(B)&&B};return T.fx.off?U.duration=0:typeof U.duration!="number"&&(U.duration in T.fx.speeds?U.duration=T.fx.speeds[U.duration]:U.duration=T.fx.speeds._default),(U.queue==null||U.queue===!0)&&(U.queue="fx"),U.old=U.complete,U.complete=function(){S(U.old)&&U.old.call(this),U.queue&&T.dequeue(this,U.queue)},U},T.fn.extend({fadeTo:function(M,B,j,U){return this.filter(li).css("opacity",0).show().end().animate({opacity:B},M,j,U)},animate:function(M,B,j,U){var re=T.isEmptyObject(M),ce=T.speed(B,j,U),ve=function(){var je=wn(this,T.extend({},M),ce);(re||vt.get(this,"finish"))&&je.stop(!0)};return ve.finish=ve,re||ce.queue===!1?this.each(ve):this.queue(ce.queue,ve)},stop:function(M,B,j){var U=function(re){var ce=re.stop;delete re.stop,ce(j)};return typeof M!="string"&&(j=B,B=M,M=void 0),B&&this.queue(M||"fx",[]),this.each(function(){var re=!0,ce=M!=null&&M+"queueHooks",ve=T.timers,je=vt.get(this);if(ce)je[ce]&&je[ce].stop&&U(je[ce]);else for(ce in je)je[ce]&&je[ce].stop&&_t.test(ce)&&U(je[ce]);for(ce=ve.length;ce--;)ve[ce].elem===this&&(M==null||ve[ce].queue===M)&&(ve[ce].anim.stop(j),re=!1,ve.splice(ce,1));(re||!j)&&T.dequeue(this,M)})},finish:function(M){return M!==!1&&(M=M||"fx"),this.each(function(){var B,j=vt.get(this),U=j[M+"queue"],re=j[M+"queueHooks"],ce=T.timers,ve=U?U.length:0;for(j.finish=!0,T.queue(this,M,[]),re&&re.stop&&re.stop.call(this,!0),B=ce.length;B--;)ce[B].elem===this&&ce[B].queue===M&&(ce[B].anim.stop(!0),ce.splice(B,1));for(B=0;B<ve;B++)U[B]&&U[B].finish&&U[B].finish.call(this);delete j.finish})}}),T.each(["toggle","show","hide"],function(M,B){var j=T.fn[B];T.fn[B]=function(U,re,ce){return U==null||typeof U=="boolean"?j.apply(this,arguments):this.animate(ct(B,!0),U,re,ce)}}),T.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(M,B){T.fn[M]=function(j,U,re){return this.animate(B,j,U,re)}}),T.timers=[],T.fx.tick=function(){var M,B=0,j=T.timers;for(xt=Date.now();B<j.length;B++)M=j[B],!M()&&j[B]===M&&j.splice(B--,1);j.length||T.fx.stop(),xt=void 0},T.fx.timer=function(M){T.timers.push(M),T.fx.start()},T.fx.interval=13,T.fx.start=function(){qe||(qe=!0,ze())},T.fx.stop=function(){qe=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(M,B){return M=T.fx&&T.fx.speeds[M]||M,B=B||"fx",this.queue(B,function(j,U){var re=t.setTimeout(j,M);U.stop=function(){t.clearTimeout(re)}})},function(){var M=R.createElement("input"),B=R.createElement("select"),j=B.appendChild(R.createElement("option"));M.type="checkbox",w.checkOn=M.value!=="",w.optSelected=j.selected,M=R.createElement("input"),M.value="t",M.type="radio",w.radioValue=M.value==="t"}();var ri,Gn=T.expr.attrHandle;T.fn.extend({attr:function(M,B){return st(this,T.attr,M,B,arguments.length>1)},removeAttr:function(M){return this.each(function(){T.removeAttr(this,M)})}}),T.extend({attr:function(M,B,j){var U,re,ce=M.nodeType;if(!(ce===3||ce===8||ce===2)){if(typeof M.getAttribute>"u")return T.prop(M,B,j);if((ce!==1||!T.isXMLDoc(M))&&(re=T.attrHooks[B.toLowerCase()]||(T.expr.match.bool.test(B)?ri:void 0)),j!==void 0){if(j===null){T.removeAttr(M,B);return}return re&&"set"in re&&(U=re.set(M,j,B))!==void 0?U:(M.setAttribute(B,j+""),j)}return re&&"get"in re&&(U=re.get(M,B))!==null?U:(U=T.find.attr(M,B),U??void 0)}},attrHooks:{type:{set:function(M,B){if(!w.radioValue&&B==="radio"&&ue(M,"input")){var j=M.value;return M.setAttribute("type",B),j&&(M.value=j),B}}}},removeAttr:function(M,B){var j,U=0,re=B&&B.match(Ue);if(re&&M.nodeType===1)for(;j=re[U++];)M.removeAttribute(j)}}),ri={set:function(M,B,j){return B===!1?T.removeAttr(M,j):M.setAttribute(j,j),j}},T.each(T.expr.match.bool.source.match(/\w+/g),function(M,B){var j=Gn[B]||T.find.attr;Gn[B]=function(U,re,ce){var ve,je,We=re.toLowerCase();return ce||(je=Gn[We],Gn[We]=ve,ve=j(U,re,ce)!=null?We:null,Gn[We]=je),ve}});var $t=/^(?:input|select|textarea|button)$/i,Vi=/^(?:a|area)$/i;T.fn.extend({prop:function(M,B){return st(this,T.prop,M,B,arguments.length>1)},removeProp:function(M){return this.each(function(){delete this[T.propFix[M]||M]})}}),T.extend({prop:function(M,B,j){var U,re,ce=M.nodeType;if(!(ce===3||ce===8||ce===2))return(ce!==1||!T.isXMLDoc(M))&&(B=T.propFix[B]||B,re=T.propHooks[B]),j!==void 0?re&&"set"in re&&(U=re.set(M,j,B))!==void 0?U:M[B]=j:re&&"get"in re&&(U=re.get(M,B))!==null?U:M[B]},propHooks:{tabIndex:{get:function(M){var B=T.find.attr(M,"tabindex");return B?parseInt(B,10):$t.test(M.nodeName)||Vi.test(M.nodeName)&&M.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),w.optSelected||(T.propHooks.selected={get:function(M){var B=M.parentNode;return B&&B.parentNode&&B.parentNode.selectedIndex,null},set:function(M){var B=M.parentNode;B&&(B.selectedIndex,B.parentNode&&B.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this});function An(M){var B=M.match(Ue)||[];return B.join(" ")}function En(M){return M.getAttribute&&M.getAttribute("class")||""}function Kt(M){return Array.isArray(M)?M:typeof M=="string"?M.match(Ue)||[]:[]}T.fn.extend({addClass:function(M){var B,j,U,re,ce,ve,je,We=0;if(S(M))return this.each(function($e){T(this).addClass(M.call(this,$e,En(this)))});if(B=Kt(M),B.length){for(;j=this[We++];)if(re=En(j),U=j.nodeType===1&&" "+An(re)+" ",U){for(ve=0;ce=B[ve++];)U.indexOf(" "+ce+" ")<0&&(U+=ce+" ");je=An(U),re!==je&&j.setAttribute("class",je)}}return this},removeClass:function(M){var B,j,U,re,ce,ve,je,We=0;if(S(M))return this.each(function($e){T(this).removeClass(M.call(this,$e,En(this)))});if(!arguments.length)return this.attr("class","");if(B=Kt(M),B.length){for(;j=this[We++];)if(re=En(j),U=j.nodeType===1&&" "+An(re)+" ",U){for(ve=0;ce=B[ve++];)for(;U.indexOf(" "+ce+" ")>-1;)U=U.replace(" "+ce+" "," ");je=An(U),re!==je&&j.setAttribute("class",je)}}return this},toggleClass:function(M,B){var j=typeof M,U=j==="string"||Array.isArray(M);return typeof B=="boolean"&&U?B?this.addClass(M):this.removeClass(M):S(M)?this.each(function(re){T(this).toggleClass(M.call(this,re,En(this),B),B)}):this.each(function(){var re,ce,ve,je;if(U)for(ce=0,ve=T(this),je=Kt(M);re=je[ce++];)ve.hasClass(re)?ve.removeClass(re):ve.addClass(re);else(M===void 0||j==="boolean")&&(re=En(this),re&&vt.set(this,"__className__",re),this.setAttribute&&this.setAttribute("class",re||M===!1?"":vt.get(this,"__className__")||""))})},hasClass:function(M){var B,j,U=0;for(B=" "+M+" ";j=this[U++];)if(j.nodeType===1&&(" "+An(En(j))+" ").indexOf(B)>-1)return!0;return!1}});var Ai=/\r/g;T.fn.extend({val:function(M){var B,j,U,re=this[0];return arguments.length?(U=S(M),this.each(function(ce){var ve;this.nodeType===1&&(U?ve=M.call(this,ce,T(this).val()):ve=M,ve==null?ve="":typeof ve=="number"?ve+="":Array.isArray(ve)&&(ve=T.map(ve,function(je){return je==null?"":je+""})),B=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()],(!B||!("set"in B)||B.set(this,ve,"value")===void 0)&&(this.value=ve))})):re?(B=T.valHooks[re.type]||T.valHooks[re.nodeName.toLowerCase()],B&&"get"in B&&(j=B.get(re,"value"))!==void 0?j:(j=re.value,typeof j=="string"?j.replace(Ai,""):j??"")):void 0}}),T.extend({valHooks:{option:{get:function(M){var B=T.find.attr(M,"value");return B??An(T.text(M))}},select:{get:function(M){var B,j,U,re=M.options,ce=M.selectedIndex,ve=M.type==="select-one",je=ve?null:[],We=ve?ce+1:re.length;for(ce<0?U=We:U=ve?ce:0;U<We;U++)if(j=re[U],(j.selected||U===ce)&&!j.disabled&&(!j.parentNode.disabled||!ue(j.parentNode,"optgroup"))){if(B=T(j).val(),ve)return B;je.push(B)}return je},set:function(M,B){for(var j,U,re=M.options,ce=T.makeArray(B),ve=re.length;ve--;)U=re[ve],(U.selected=T.inArray(T.valHooks.option.get(U),ce)>-1)&&(j=!0);return j||(M.selectedIndex=-1),ce}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(M,B){if(Array.isArray(B))return M.checked=T.inArray(T(M).val(),B)>-1}},w.checkOn||(T.valHooks[this].get=function(M){return M.getAttribute("value")===null?"on":M.value})}),w.focusin="onfocusin"in t;var Qr=/^(?:focusinfocus|focusoutblur)$/,$i=function(M){M.stopPropagation()};T.extend(T.event,{trigger:function(M,B,j,U){var re,ce,ve,je,We,$e,ut,jt,at=[j||R],Ct=h.call(M,"type")?M.type:M,xn=h.call(M,"namespace")?M.namespace.split("."):[];if(ce=jt=ve=j=j||R,!(j.nodeType===3||j.nodeType===8)&&!Qr.test(Ct+T.event.triggered)&&(Ct.indexOf(".")>-1&&(xn=Ct.split("."),Ct=xn.shift(),xn.sort()),We=Ct.indexOf(":")<0&&"on"+Ct,M=M[T.expando]?M:new T.Event(Ct,typeof M=="object"&&M),M.isTrigger=U?2:3,M.namespace=xn.join("."),M.rnamespace=M.namespace?new RegExp("(^|\\.)"+xn.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,M.result=void 0,M.target||(M.target=j),B=B==null?[M]:T.makeArray(B,[M]),ut=T.event.special[Ct]||{},!(!U&&ut.trigger&&ut.trigger.apply(j,B)===!1))){if(!U&&!ut.noBubble&&!L(j)){for(je=ut.delegateType||Ct,Qr.test(je+Ct)||(ce=ce.parentNode);ce;ce=ce.parentNode)at.push(ce),ve=ce;ve===(j.ownerDocument||R)&&at.push(ve.defaultView||ve.parentWindow||t)}for(re=0;(ce=at[re++])&&!M.isPropagationStopped();)jt=ce,M.type=re>1?je:ut.bindType||Ct,$e=(vt.get(ce,"events")||Object.create(null))[M.type]&&vt.get(ce,"handle"),$e&&$e.apply(ce,B),$e=We&&ce[We],$e&&$e.apply&&mt(ce)&&(M.result=$e.apply(ce,B),M.result===!1&&M.preventDefault());return M.type=Ct,!U&&!M.isDefaultPrevented()&&(!ut._default||ut._default.apply(at.pop(),B)===!1)&&mt(j)&&We&&S(j[Ct])&&!L(j)&&(ve=j[We],ve&&(j[We]=null),T.event.triggered=Ct,M.isPropagationStopped()&&jt.addEventListener(Ct,$i),j[Ct](),M.isPropagationStopped()&&jt.removeEventListener(Ct,$i),T.event.triggered=void 0,ve&&(j[We]=ve)),M.result}},simulate:function(M,B,j){var U=T.extend(new T.Event,j,{type:M,isSimulated:!0});T.event.trigger(U,null,B)}}),T.fn.extend({trigger:function(M,B){return this.each(function(){T.event.trigger(M,B,this)})},triggerHandler:function(M,B){var j=this[0];if(j)return T.event.trigger(M,B,j,!0)}}),w.focusin||T.each({focus:"focusin",blur:"focusout"},function(M,B){var j=function(U){T.event.simulate(B,U.target,T.event.fix(U))};T.event.special[B]={setup:function(){var U=this.ownerDocument||this.document||this,re=vt.access(U,B);re||U.addEventListener(M,j,!0),vt.access(U,B,(re||0)+1)},teardown:function(){var U=this.ownerDocument||this.document||this,re=vt.access(U,B)-1;re?vt.access(U,B,re):(U.removeEventListener(M,j,!0),vt.remove(U,B))}}});var po=t.location,Go={guid:Date.now()},Mt=/\?/;T.parseXML=function(M){var B,j;if(!M||typeof M!="string")return null;try{B=new t.DOMParser().parseFromString(M,"text/xml")}catch{}return j=B&&B.getElementsByTagName("parsererror")[0],(!B||j)&&T.error("Invalid XML: "+(j?T.map(j.childNodes,function(U){return U.textContent}).join(`
`):M)),B};var Ec=/\[\]$/,Ki=/\r?\n/g,jl=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function Ot(M,B,j,U){var re;if(Array.isArray(B))T.each(B,function(ce,ve){j||Ec.test(M)?U(M,ve):Ot(M+"["+(typeof ve=="object"&&ve!=null?ce:"")+"]",ve,j,U)});else if(!j&&Q(B)==="object")for(re in B)Ot(M+"["+re+"]",B[re],j,U);else U(M,B)}T.param=function(M,B){var j,U=[],re=function(ce,ve){var je=S(ve)?ve():ve;U[U.length]=encodeURIComponent(ce)+"="+encodeURIComponent(je??"")};if(M==null)return"";if(Array.isArray(M)||M.jquery&&!T.isPlainObject(M))T.each(M,function(){re(this.name,this.value)});else for(j in M)Ot(j,M[j],B,re);return U.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var M=T.prop(this,"elements");return M?T.makeArray(M):this}).filter(function(){var M=this.type;return this.name&&!T(this).is(":disabled")&&At.test(this.nodeName)&&!jl.test(M)&&(this.checked||!Pi.test(M))}).map(function(M,B){var j=T(this).val();return j==null?null:Array.isArray(j)?T.map(j,function(U){return{name:B.name,value:U.replace(Ki,`\r
`)}}):{name:B.name,value:j.replace(Ki,`\r
`)}}).get()}});var Jt=/%20/g,ci=/#.*$/,Ht=/([?&])_=[^&]*/,Dn=/^(.*?):[ \t]*([^\r\n]*)$/mg,kr=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ki=/^(?:GET|HEAD)$/,hn=/^\/\//,Ei={},Yi={},pi="*/".concat("*"),gn=R.createElement("a");gn.href=po.href;function bn(M){return function(B,j){typeof B!="string"&&(j=B,B="*");var U,re=0,ce=B.toLowerCase().match(Ue)||[];if(S(j))for(;U=ce[re++];)U[0]==="+"?(U=U.slice(1)||"*",(M[U]=M[U]||[]).unshift(j)):(M[U]=M[U]||[]).push(j)}}function sn(M,B,j,U){var re={},ce=M===Yi;function ve(je){var We;return re[je]=!0,T.each(M[je]||[],function($e,ut){var jt=ut(B,j,U);if(typeof jt=="string"&&!ce&&!re[jt])return B.dataTypes.unshift(jt),ve(jt),!1;if(ce)return!(We=jt)}),We}return ve(B.dataTypes[0])||!re["*"]&&ve("*")}function di(M,B){var j,U,re=T.ajaxSettings.flatOptions||{};for(j in B)B[j]!==void 0&&((re[j]?M:U||(U={}))[j]=B[j]);return U&&T.extend(!0,M,U),M}function Er(M,B,j){for(var U,re,ce,ve,je=M.contents,We=M.dataTypes;We[0]==="*";)We.shift(),U===void 0&&(U=M.mimeType||B.getResponseHeader("Content-Type"));if(U){for(re in je)if(je[re]&&je[re].test(U)){We.unshift(re);break}}if(We[0]in j)ce=We[0];else{for(re in j){if(!We[0]||M.converters[re+" "+We[0]]){ce=re;break}ve||(ve=re)}ce=ce||ve}if(ce)return ce!==We[0]&&We.unshift(ce),j[ce]}function $r(M,B,j,U){var re,ce,ve,je,We,$e={},ut=M.dataTypes.slice();if(ut[1])for(ve in M.converters)$e[ve.toLowerCase()]=M.converters[ve];for(ce=ut.shift();ce;)if(M.responseFields[ce]&&(j[M.responseFields[ce]]=B),!We&&U&&M.dataFilter&&(B=M.dataFilter(B,M.dataType)),We=ce,ce=ut.shift(),ce){if(ce==="*")ce=We;else if(We!=="*"&&We!==ce){if(ve=$e[We+" "+ce]||$e["* "+ce],!ve){for(re in $e)if(je=re.split(" "),je[1]===ce&&(ve=$e[We+" "+je[0]]||$e["* "+je[0]],ve)){ve===!0?ve=$e[re]:$e[re]!==!0&&(ce=je[0],ut.unshift(je[1]));break}}if(ve!==!0)if(ve&&M.throws)B=ve(B);else try{B=ve(B)}catch(jt){return{state:"parsererror",error:ve?jt:"No conversion from "+We+" to "+ce}}}}return{state:"success",data:B}}T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:po.href,type:"GET",isLocal:kr.test(po.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(M,B){return B?di(di(M,T.ajaxSettings),B):di(T.ajaxSettings,M)},ajaxPrefilter:bn(Ei),ajaxTransport:bn(Yi),ajax:function(M,B){typeof M=="object"&&(B=M,M=void 0),B=B||{};var j,U,re,ce,ve,je,We,$e,ut,jt,at=T.ajaxSetup({},B),Ct=at.context||at,xn=at.context&&(Ct.nodeType||Ct.jquery)?T(Ct):T.event,Yn=T.Deferred(),Cn=T.Callbacks("once memory"),Lr=at.statusCode||{},Tr={},rs={},Ri="canceled",Wn={readyState:0,getResponseHeader:function(wi){var or;if(We){if(!ce)for(ce={};or=Dn.exec(re);)ce[or[1].toLowerCase()+" "]=(ce[or[1].toLowerCase()+" "]||[]).concat(or[2]);or=ce[wi.toLowerCase()+" "]}return or==null?null:or.join(", ")},getAllResponseHeaders:function(){return We?re:null},setRequestHeader:function(wi,or){return We==null&&(wi=rs[wi.toLowerCase()]=rs[wi.toLowerCase()]||wi,Tr[wi]=or),this},overrideMimeType:function(wi){return We==null&&(at.mimeType=wi),this},statusCode:function(wi){var or;if(wi)if(We)Wn.always(wi[Wn.status]);else for(or in wi)Lr[or]=[Lr[or],wi[or]];return this},abort:function(wi){var or=wi||Ri;return j&&j.abort(or),Wo(0,or),this}};if(Yn.promise(Wn),at.url=((M||at.url||po.href)+"").replace(hn,po.protocol+"//"),at.type=B.method||B.type||at.method||at.type,at.dataTypes=(at.dataType||"*").toLowerCase().match(Ue)||[""],at.crossDomain==null){je=R.createElement("a");try{je.href=at.url,je.href=je.href,at.crossDomain=gn.protocol+"//"+gn.host!=je.protocol+"//"+je.host}catch{at.crossDomain=!0}}if(at.data&&at.processData&&typeof at.data!="string"&&(at.data=T.param(at.data,at.traditional)),sn(Ei,at,B,Wn),We)return Wn;$e=T.event&&at.global,$e&&T.active++===0&&T.event.trigger("ajaxStart"),at.type=at.type.toUpperCase(),at.hasContent=!ki.test(at.type),U=at.url.replace(ci,""),at.hasContent?at.data&&at.processData&&(at.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(at.data=at.data.replace(Jt,"+")):(jt=at.url.slice(U.length),at.data&&(at.processData||typeof at.data=="string")&&(U+=(Mt.test(U)?"&":"?")+at.data,delete at.data),at.cache===!1&&(U=U.replace(Ht,"$1"),jt=(Mt.test(U)?"&":"?")+"_="+Go.guid+++jt),at.url=U+jt),at.ifModified&&(T.lastModified[U]&&Wn.setRequestHeader("If-Modified-Since",T.lastModified[U]),T.etag[U]&&Wn.setRequestHeader("If-None-Match",T.etag[U])),(at.data&&at.hasContent&&at.contentType!==!1||B.contentType)&&Wn.setRequestHeader("Content-Type",at.contentType),Wn.setRequestHeader("Accept",at.dataTypes[0]&&at.accepts[at.dataTypes[0]]?at.accepts[at.dataTypes[0]]+(at.dataTypes[0]!=="*"?", "+pi+"; q=0.01":""):at.accepts["*"]);for(ut in at.headers)Wn.setRequestHeader(ut,at.headers[ut]);if(at.beforeSend&&(at.beforeSend.call(Ct,Wn,at)===!1||We))return Wn.abort();if(Ri="abort",Cn.add(at.complete),Wn.done(at.success),Wn.fail(at.error),j=sn(Yi,at,B,Wn),!j)Wo(-1,"No Transport");else{if(Wn.readyState=1,$e&&xn.trigger("ajaxSend",[Wn,at]),We)return Wn;at.async&&at.timeout>0&&(ve=t.setTimeout(function(){Wn.abort("timeout")},at.timeout));try{We=!1,j.send(Tr,Wo)}catch(wi){if(We)throw wi;Wo(-1,wi)}}function Wo(wi,or,Lu,vf){var os,Tc,Ac,zo,Gl,Cs=or;We||(We=!0,ve&&t.clearTimeout(ve),j=void 0,re=vf||"",Wn.readyState=wi>0?4:0,os=wi>=200&&wi<300||wi===304,Lu&&(zo=Er(at,Wn,Lu)),!os&&T.inArray("script",at.dataTypes)>-1&&T.inArray("json",at.dataTypes)<0&&(at.converters["text script"]=function(){}),zo=$r(at,zo,Wn,os),os?(at.ifModified&&(Gl=Wn.getResponseHeader("Last-Modified"),Gl&&(T.lastModified[U]=Gl),Gl=Wn.getResponseHeader("etag"),Gl&&(T.etag[U]=Gl)),wi===204||at.type==="HEAD"?Cs="nocontent":wi===304?Cs="notmodified":(Cs=zo.state,Tc=zo.data,Ac=zo.error,os=!Ac)):(Ac=Cs,(wi||!Cs)&&(Cs="error",wi<0&&(wi=0))),Wn.status=wi,Wn.statusText=(or||Cs)+"",os?Yn.resolveWith(Ct,[Tc,Cs,Wn]):Yn.rejectWith(Ct,[Wn,Cs,Ac]),Wn.statusCode(Lr),Lr=void 0,$e&&xn.trigger(os?"ajaxSuccess":"ajaxError",[Wn,at,os?Tc:Ac]),Cn.fireWith(Ct,[Wn,Cs]),$e&&(xn.trigger("ajaxComplete",[Wn,at]),--T.active||T.event.trigger("ajaxStop")))}return Wn},getJSON:function(M,B,j){return T.get(M,B,j,"json")},getScript:function(M,B){return T.get(M,void 0,B,"script")}}),T.each(["get","post"],function(M,B){T[B]=function(j,U,re,ce){return S(U)&&(ce=ce||re,re=U,U=void 0),T.ajax(T.extend({url:j,type:B,dataType:ce,data:U,success:re},T.isPlainObject(j)&&j))}}),T.ajaxPrefilter(function(M){var B;for(B in M.headers)B.toLowerCase()==="content-type"&&(M.contentType=M.headers[B]||"")}),T._evalUrl=function(M,B,j){return T.ajax({url:M,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(U){T.globalEval(U,B,j)}})},T.fn.extend({wrapAll:function(M){var B;return this[0]&&(S(M)&&(M=M.call(this[0])),B=T(M,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&B.insertBefore(this[0]),B.map(function(){for(var j=this;j.firstElementChild;)j=j.firstElementChild;return j}).append(this)),this},wrapInner:function(M){return S(M)?this.each(function(B){T(this).wrapInner(M.call(this,B))}):this.each(function(){var B=T(this),j=B.contents();j.length?j.wrapAll(M):B.append(M)})},wrap:function(M){var B=S(M);return this.each(function(j){T(this).wrapAll(B?M.call(this,j):M)})},unwrap:function(M){return this.parent(M).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(M){return!T.expr.pseudos.visible(M)},T.expr.pseudos.visible=function(M){return!!(M.offsetWidth||M.offsetHeight||M.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var vn={0:200,1223:204},fo=T.ajaxSettings.xhr();w.cors=!!fo&&"withCredentials"in fo,w.ajax=fo=!!fo,T.ajaxTransport(function(M){var B,j;if(w.cors||fo&&!M.crossDomain)return{send:function(U,re){var ce,ve=M.xhr();if(ve.open(M.type,M.url,M.async,M.username,M.password),M.xhrFields)for(ce in M.xhrFields)ve[ce]=M.xhrFields[ce];M.mimeType&&ve.overrideMimeType&&ve.overrideMimeType(M.mimeType),!M.crossDomain&&!U["X-Requested-With"]&&(U["X-Requested-With"]="XMLHttpRequest");for(ce in U)ve.setRequestHeader(ce,U[ce]);B=function(je){return function(){B&&(B=j=ve.onload=ve.onerror=ve.onabort=ve.ontimeout=ve.onreadystatechange=null,je==="abort"?ve.abort():je==="error"?typeof ve.status!="number"?re(0,"error"):re(ve.status,ve.statusText):re(vn[ve.status]||ve.status,ve.statusText,(ve.responseType||"text")!=="text"||typeof ve.responseText!="string"?{binary:ve.response}:{text:ve.responseText},ve.getAllResponseHeaders()))}},ve.onload=B(),j=ve.onerror=ve.ontimeout=B("error"),ve.onabort!==void 0?ve.onabort=j:ve.onreadystatechange=function(){ve.readyState===4&&t.setTimeout(function(){B&&j()})},B=B("abort");try{ve.send(M.hasContent&&M.data||null)}catch(je){if(B)throw je}},abort:function(){B&&B()}}}),T.ajaxPrefilter(function(M){M.crossDomain&&(M.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(M){return T.globalEval(M),M}}}),T.ajaxPrefilter("script",function(M){M.cache===void 0&&(M.cache=!1),M.crossDomain&&(M.type="GET")}),T.ajaxTransport("script",function(M){if(M.crossDomain||M.scriptAttrs){var B,j;return{send:function(U,re){B=T("<script>").attr(M.scriptAttrs||{}).prop({charset:M.scriptCharset,src:M.url}).on("load error",j=function(ce){B.remove(),j=null,ce&&re(ce.type==="error"?404:200,ce.type)}),R.head.appendChild(B[0])},abort:function(){j&&j()}}}});var Kr=[],wy=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var M=Kr.pop()||T.expando+"_"+Go.guid++;return this[M]=!0,M}}),T.ajaxPrefilter("json jsonp",function(M,B,j){var U,re,ce,ve=M.jsonp!==!1&&(wy.test(M.url)?"url":typeof M.data=="string"&&(M.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&wy.test(M.data)&&"data");if(ve||M.dataTypes[0]==="jsonp")return U=M.jsonpCallback=S(M.jsonpCallback)?M.jsonpCallback():M.jsonpCallback,ve?M[ve]=M[ve].replace(wy,"$1"+U):M.jsonp!==!1&&(M.url+=(Mt.test(M.url)?"&":"?")+M.jsonp+"="+U),M.converters["script json"]=function(){return ce||T.error(U+" was not called"),ce[0]},M.dataTypes[0]="json",re=t[U],t[U]=function(){ce=arguments},j.always(function(){re===void 0?T(t).removeProp(U):t[U]=re,M[U]&&(M.jsonpCallback=B.jsonpCallback,Kr.push(U)),ce&&S(re)&&re(ce[0]),ce=re=void 0}),"script"}),w.createHTMLDocument=function(){var M=R.implementation.createHTMLDocument("").body;return M.innerHTML="<form></form><form></form>",M.childNodes.length===2}(),T.parseHTML=function(M,B,j){if(typeof M!="string")return[];typeof B=="boolean"&&(j=B,B=!1);var U,re,ce;return B||(w.createHTMLDocument?(B=R.implementation.createHTMLDocument(""),U=B.createElement("base"),U.href=R.location.href,B.head.appendChild(U)):B=R),re=be.exec(M),ce=!j&&[],re?[B.createElement(re[1])]:(re=Nt([M],B,ce),ce&&ce.length&&T(ce).remove(),T.merge([],re.childNodes))},T.fn.load=function(M,B,j){var U,re,ce,ve=this,je=M.indexOf(" ");return je>-1&&(U=An(M.slice(je)),M=M.slice(0,je)),S(B)?(j=B,B=void 0):B&&typeof B=="object"&&(re="POST"),ve.length>0&&T.ajax({url:M,type:re||"GET",dataType:"html",data:B}).done(function(We){ce=arguments,ve.html(U?T("<div>").append(T.parseHTML(We)).find(U):We)}).always(j&&function(We,$e){ve.each(function(){j.apply(this,ce||[We.responseText,$e,We])})}),this},T.expr.pseudos.animated=function(M){return T.grep(T.timers,function(B){return M===B.elem}).length},T.offset={setOffset:function(M,B,j){var U,re,ce,ve,je,We,$e,ut=T.css(M,"position"),jt=T(M),at={};ut==="static"&&(M.style.position="relative"),je=jt.offset(),ce=T.css(M,"top"),We=T.css(M,"left"),$e=(ut==="absolute"||ut==="fixed")&&(ce+We).indexOf("auto")>-1,$e?(U=jt.position(),ve=U.top,re=U.left):(ve=parseFloat(ce)||0,re=parseFloat(We)||0),S(B)&&(B=B.call(M,j,T.extend({},je))),B.top!=null&&(at.top=B.top-je.top+ve),B.left!=null&&(at.left=B.left-je.left+re),"using"in B?B.using.call(M,at):jt.css(at)}},T.fn.extend({offset:function(M){if(arguments.length)return M===void 0?this:this.each(function(re){T.offset.setOffset(this,M,re)});var B,j,U=this[0];if(U)return U.getClientRects().length?(B=U.getBoundingClientRect(),j=U.ownerDocument.defaultView,{top:B.top+j.pageYOffset,left:B.left+j.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var M,B,j,U=this[0],re={top:0,left:0};if(T.css(U,"position")==="fixed")B=U.getBoundingClientRect();else{for(B=this.offset(),j=U.ownerDocument,M=U.offsetParent||j.documentElement;M&&(M===j.body||M===j.documentElement)&&T.css(M,"position")==="static";)M=M.parentNode;M&&M!==U&&M.nodeType===1&&(re=T(M).offset(),re.top+=T.css(M,"borderTopWidth",!0),re.left+=T.css(M,"borderLeftWidth",!0))}return{top:B.top-re.top-T.css(U,"marginTop",!0),left:B.left-re.left-T.css(U,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var M=this.offsetParent;M&&T.css(M,"position")==="static";)M=M.offsetParent;return M||vi})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(M,B){var j=B==="pageYOffset";T.fn[M]=function(U){return st(this,function(re,ce,ve){var je;if(L(re)?je=re:re.nodeType===9&&(je=re.defaultView),ve===void 0)return je?je[B]:re[ce];je?je.scrollTo(j?je.pageXOffset:ve,j?ve:je.pageYOffset):re[ce]=ve},M,U,arguments.length)}}),T.each(["top","left"],function(M,B){T.cssHooks[B]=V(w.pixelPosition,function(j,U){if(U)return U=D(j,B),k.test(U)?T(j).position()[B]+"px":U})}),T.each({Height:"height",Width:"width"},function(M,B){T.each({padding:"inner"+M,content:B,"":"outer"+M},function(j,U){T.fn[U]=function(re,ce){var ve=arguments.length&&(j||typeof re!="boolean"),je=j||(re===!0||ce===!0?"margin":"border");return st(this,function(We,$e,ut){var jt;return L(We)?U.indexOf("outer")===0?We["inner"+M]:We.document.documentElement["client"+M]:We.nodeType===9?(jt=We.documentElement,Math.max(We.body["scroll"+M],jt["scroll"+M],We.body["offset"+M],jt["offset"+M],jt["client"+M])):ut===void 0?T.css(We,$e,je):T.style(We,$e,ut,je)},B,ve?re:void 0,ve)}})}),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(M,B){T.fn[B]=function(j){return this.on(B,j)}}),T.fn.extend({bind:function(M,B,j){return this.on(M,null,B,j)},unbind:function(M,B){return this.off(M,null,B)},delegate:function(M,B,j,U){return this.on(B,M,j,U)},undelegate:function(M,B,j){return arguments.length===1?this.off(M,"**"):this.off(B,M||"**",j)},hover:function(M,B){return this.mouseenter(M).mouseleave(B||M)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(M,B){T.fn[B]=function(j,U){return arguments.length>0?this.on(B,null,j,U):this.trigger(B)}});var rB=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;T.proxy=function(M,B){var j,U,re;if(typeof B=="string"&&(j=M[B],B=M,M=j),!!S(M))return U=r.call(arguments,2),re=function(){return M.apply(B||this,U.concat(r.call(arguments)))},re.guid=M.guid=M.guid||T.guid++,re},T.holdReady=function(M){M?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=ue,T.isFunction=S,T.isWindow=L,T.camelCase=Tt,T.type=Q,T.now=Date.now,T.isNumeric=function(M){var B=T.type(M);return(B==="number"||B==="string")&&!isNaN(M-parseFloat(M))},T.trim=function(M){return M==null?"":(M+"").replace(rB,"")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return T});var oB=t.jQuery,sB=t.$;return T.noConflict=function(M){return t.$===T&&(t.$=sB),M&&t.jQuery===T&&(t.jQuery=oB),T},typeof n>"u"&&(t.jQuery=t.$=T),T})});var Y7=et((LPe,D1)=>{"use strict";console.log("WebAudioFont Loader v1.30 GPL3");function H7(t){return this.player=t,this.cached=[],this.startLoad=function(n,e,i){if(!window[i]){for(var r=0;r<this.cached.length;r++)if(this.cached[r].variableName==i)return;this.cached.push({filePath:e,variableName:i});var s=document.createElement("script");s.setAttribute("type","text/javascript"),s.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(s),this.decodeAfterLoading(n,i)}},this.decodeAfterLoading=function(n,e){var i=this;this.waitOrFinish(e,function(){i.player.adjustPreset(n,window[e])})},this.waitOrFinish=function(n,e){if(window[n])e();else{var i=this;setTimeout(function(){i.waitOrFinish(n,e)},111)}},this.loaded=function(n){if(!window[n])return!1;for(var e=window[n],i=0;i<e.zones.length;i++)if(!e.zones[i].buffer)return!1;return!0},this.progress=function(){if(this.cached.length>0){for(var n=0;n<this.cached.length;n++)if(!this.loaded(this.cached[n].variableName))return n/this.cached.length;return 1}else return 1},this.waitLoad=function(n){var e=this;this.progress()>=1?n():setTimeout(function(){e.waitLoad(n)},333)},this.instrumentTitles=function(){if(!this.instrumentNamesArray){var n=[];n[0]="Acoustic Grand Piano: Piano",n[1]="Bright Acoustic Piano: Piano",n[2]="Electric Grand Piano: Piano",n[3]="Honky-tonk Piano: Piano",n[4]="Electric Piano 1: Piano",n[5]="Electric Piano 2: Piano",n[6]="Harpsichord: Piano",n[7]="Clavinet: Piano",n[8]="Celesta: Chromatic Percussion",n[9]="Glockenspiel: Chromatic Percussion",n[10]="Music Box: Chromatic Percussion",n[11]="Vibraphone: Chromatic Percussion",n[12]="Marimba: Chromatic Percussion",n[13]="Xylophone: Chromatic Percussion",n[14]="Tubular Bells: Chromatic Percussion",n[15]="Dulcimer: Chromatic Percussion",n[16]="Drawbar Organ: Organ",n[17]="Percussive Organ: Organ",n[18]="Rock Organ: Organ",n[19]="Church Organ: Organ",n[20]="Reed Organ: Organ",n[21]="Accordion: Organ",n[22]="Harmonica: Organ",n[23]="Tango Accordion: Organ",n[24]="Acoustic Guitar (nylon): Guitar",n[25]="Acoustic Guitar (steel): Guitar",n[26]="Electric Guitar (jazz): Guitar",n[27]="Electric Guitar (clean): Guitar",n[28]="Electric Guitar (muted): Guitar",n[29]="Overdriven Guitar: Guitar",n[30]="Distortion Guitar: Guitar",n[31]="Guitar Harmonics: Guitar",n[32]="Acoustic Bass: Bass",n[33]="Electric Bass (finger): Bass",n[34]="Electric Bass (pick): Bass",n[35]="Fretless Bass: Bass",n[36]="Slap Bass 1: Bass",n[37]="Slap Bass 2: Bass",n[38]="Synth Bass 1: Bass",n[39]="Synth Bass 2: Bass",n[40]="Violin: Strings",n[41]="Viola: Strings",n[42]="Cello: Strings",n[43]="Contrabass: Strings",n[44]="Tremolo Strings: Strings",n[45]="Pizzicato Strings: Strings",n[46]="Orchestral Harp: Strings",n[47]="Timpani: Strings",n[48]="String Ensemble 1: Ensemble",n[49]="String Ensemble 2: Ensemble",n[50]="Synth Strings 1: Ensemble",n[51]="Synth Strings 2: Ensemble",n[52]="Choir Aahs: Ensemble",n[53]="Voice Oohs: Ensemble",n[54]="Synth Choir: Ensemble",n[55]="Orchestra Hit: Ensemble",n[56]="Trumpet: Brass",n[57]="Trombone: Brass",n[58]="Tuba: Brass",n[59]="Muted Trumpet: Brass",n[60]="French Horn: Brass",n[61]="Brass Section: Brass",n[62]="Synth Brass 1: Brass",n[63]="Synth Brass 2: Brass",n[64]="Soprano Sax: Reed",n[65]="Alto Sax: Reed",n[66]="Tenor Sax: Reed",n[67]="Baritone Sax: Reed",n[68]="Oboe: Reed",n[69]="English Horn: Reed",n[70]="Bassoon: Reed",n[71]="Clarinet: Reed",n[72]="Piccolo: Pipe",n[73]="Flute: Pipe",n[74]="Recorder: Pipe",n[75]="Pan Flute: Pipe",n[76]="Blown bottle: Pipe",n[77]="Shakuhachi: Pipe",n[78]="Whistle: Pipe",n[79]="Ocarina: Pipe",n[80]="Lead 1 (square): Synth Lead",n[81]="Lead 2 (sawtooth): Synth Lead",n[82]="Lead 3 (calliope): Synth Lead",n[83]="Lead 4 (chiff): Synth Lead",n[84]="Lead 5 (charang): Synth Lead",n[85]="Lead 6 (voice): Synth Lead",n[86]="Lead 7 (fifths): Synth Lead",n[87]="Lead 8 (bass + lead): Synth Lead",n[88]="Pad 1 (new age): Synth Pad",n[89]="Pad 2 (warm): Synth Pad",n[90]="Pad 3 (polysynth): Synth Pad",n[91]="Pad 4 (choir): Synth Pad",n[92]="Pad 5 (bowed): Synth Pad",n[93]="Pad 6 (metallic): Synth Pad",n[94]="Pad 7 (halo): Synth Pad",n[95]="Pad 8 (sweep): Synth Pad",n[96]="FX 1 (rain): Synth Effects",n[97]="FX 2 (soundtrack): Synth Effects",n[98]="FX 3 (crystal): Synth Effects",n[99]="FX 4 (atmosphere): Synth Effects",n[100]="FX 5 (brightness): Synth Effects",n[101]="FX 6 (goblins): Synth Effects",n[102]="FX 7 (echoes): Synth Effects",n[103]="FX 8 (sci-fi): Synth Effects",n[104]="Sitar: Ethnic",n[105]="Banjo: Ethnic",n[106]="Shamisen: Ethnic",n[107]="Koto: Ethnic",n[108]="Kalimba: Ethnic",n[109]="Bagpipe: Ethnic",n[110]="Fiddle: Ethnic",n[111]="Shanai: Ethnic",n[112]="Tinkle Bell: Percussive",n[113]="Agogo: Percussive",n[114]="Steel Drums: Percussive",n[115]="Woodblock: Percussive",n[116]="Taiko Drum: Percussive",n[117]="Melodic Tom: Percussive",n[118]="Synth Drum: Percussive",n[119]="Reverse Cymbal: Percussive",n[120]="Guitar Fret Noise: Sound effects",n[121]="Breath Noise: Sound effects",n[122]="Seashore: Sound effects",n[123]="Bird Tweet: Sound effects",n[124]="Telephone Ring: Sound effects",n[125]="Helicopter: Sound effects",n[126]="Applause: Sound effects",n[127]="Gunshot: Sound effects",this.instrumentNamesArray=n}return this.instrumentNamesArray},this.instrumentKeys=function(){return this.instrumentKeyArray||(this.instrumentKeyArray=["0000_JCLive_sf2_file","0000_Aspirin_sf2_file","0000_Chaos_sf2_file","0000_FluidR3_GM_sf2_file","0000_GeneralUserGS_sf2_file","0000_SBLive_sf2","0000_SoundBlasterOld_sf2","0001_FluidR3_GM_sf2_file","0001_GeneralUserGS_sf2_file","0002_GeneralUserGS_sf2_file","0003_GeneralUserGS_sf2_file","0010_Aspirin_sf2_file","0010_Chaos_sf2_file","0010_FluidR3_GM_sf2_file","0010_GeneralUserGS_sf2_file","0010_JCLive_sf2_file","0010_SBLive_sf2","0010_SoundBlasterOld_sf2","0011_Aspirin_sf2_file","0011_FluidR3_GM_sf2_file","0011_GeneralUserGS_sf2_file","0012_GeneralUserGS_sf2_file","0020_Aspirin_sf2_file","0020_Chaos_sf2_file","0020_FluidR3_GM_sf2_file","0020_GeneralUserGS_sf2_file","0020_JCLive_sf2_file","0020_SBLive_sf2","0020_SoundBlasterOld_sf2","0021_Aspirin_sf2_file","0021_GeneralUserGS_sf2_file","0022_Aspirin_sf2_file","0030_Aspirin_sf2_file","0030_Chaos_sf2_file","0030_FluidR3_GM_sf2_file","0030_GeneralUserGS_sf2_file","0030_JCLive_sf2_file","0030_SBLive_sf2","0030_SoundBlasterOld_sf2","0031_Aspirin_sf2_file","0031_FluidR3_GM_sf2_file","0031_GeneralUserGS_sf2_file","0031_SoundBlasterOld_sf2","0040_Aspirin_sf2_file","0040_Chaos_sf2_file","0040_FluidR3_GM_sf2_file","0040_GeneralUserGS_sf2_file","0040_JCLive_sf2_file","0040_SBLive_sf2","0040_SoundBlasterOld_sf2","0041_FluidR3_GM_sf2_file","0041_GeneralUserGS_sf2_file","0041_SoundBlasterOld_sf2","0042_GeneralUserGS_sf2_file","0043_GeneralUserGS_sf2_file","0044_GeneralUserGS_sf2_file","0045_GeneralUserGS_sf2_file","0046_GeneralUserGS_sf2_file","0050_Aspirin_sf2_file","0050_Chaos_sf2_file","0050_FluidR3_GM_sf2_file","0050_GeneralUserGS_sf2_file","0050_JCLive_sf2_file","0050_SBLive_sf2","0050_SoundBlasterOld_sf2","0051_FluidR3_GM_sf2_file","0051_GeneralUserGS_sf2_file","0052_GeneralUserGS_sf2_file","0053_GeneralUserGS_sf2_file","0054_GeneralUserGS_sf2_file","0060_Aspirin_sf2_file","0060_Chaos_sf2_file","0060_FluidR3_GM_sf2_file","0060_GeneralUserGS_sf2_file","0060_JCLive_sf2_file","0060_SBLive_sf2","0060_SoundBlasterOld_sf2","0061_Aspirin_sf2_file","0061_GeneralUserGS_sf2_file","0061_SoundBlasterOld_sf2","0062_GeneralUserGS_sf2_file","0070_Aspirin_sf2_file","0070_Chaos_sf2_file","0070_FluidR3_GM_sf2_file","0070_GeneralUserGS_sf2_file","0070_JCLive_sf2_file","0070_SBLive_sf2","0070_SoundBlasterOld_sf2","0071_GeneralUserGS_sf2_file","0080_Aspirin_sf2_file","0080_Chaos_sf2_file","0080_FluidR3_GM_sf2_file","0080_GeneralUserGS_sf2_file","0080_JCLive_sf2_file","0080_SBLive_sf2","0080_SoundBlasterOld_sf2","0081_FluidR3_GM_sf2_file","0081_GeneralUserGS_sf2_file","0081_SoundBlasterOld_sf2","0090_Aspirin_sf2_file","0090_Chaos_sf2_file","0090_FluidR3_GM_sf2_file","0090_GeneralUserGS_sf2_file","0090_JCLive_sf2_file","0090_SBLive_sf2","0090_SoundBlasterOld_sf2","0091_SoundBlasterOld_sf2","0100_Aspirin_sf2_file","0100_Chaos_sf2_file","0100_FluidR3_GM_sf2_file","0100_GeneralUserGS_sf2_file","0100_JCLive_sf2_file","0100_SBLive_sf2","0100_SoundBlasterOld_sf2","0101_GeneralUserGS_sf2_file","0101_SoundBlasterOld_sf2","0110_Aspirin_sf2_file","0110_Chaos_sf2_file","0110_FluidR3_GM_sf2_file","0110_GeneralUserGS_sf2_file","0110_JCLive_sf2_file","0110_SBLive_sf2","0110_SoundBlasterOld_sf2","0111_FluidR3_GM_sf2_file","0120_Aspirin_sf2_file","0120_Chaos_sf2_file","0120_FluidR3_GM_sf2_file","0120_GeneralUserGS_sf2_file","0120_JCLive_sf2_file","0120_SBLive_sf2","0120_SoundBlasterOld_sf2","0121_FluidR3_GM_sf2_file","0121_GeneralUserGS_sf2_file","0130_Aspirin_sf2_file","0130_Chaos_sf2_file","0130_FluidR3_GM_sf2_file","0130_GeneralUserGS_sf2_file","0130_JCLive_sf2_file","0130_SBLive_sf2","0130_SoundBlasterOld_sf2","0131_FluidR3_GM_sf2_file","0140_Aspirin_sf2_file","0140_Chaos_sf2_file","0140_FluidR3_GM_sf2_file","0140_GeneralUserGS_sf2_file","0140_JCLive_sf2_file","0140_SBLive_sf2","0140_SoundBlasterOld_sf2","0141_FluidR3_GM_sf2_file","0141_GeneralUserGS_sf2_file","0142_GeneralUserGS_sf2_file","0143_GeneralUserGS_sf2_file","0150_Aspirin_sf2_file","0150_Chaos_sf2_file","0150_FluidR3_GM_sf2_file","0150_GeneralUserGS_sf2_file","0150_JCLive_sf2_file","0150_SBLive_sf2","0150_SoundBlasterOld_sf2","0151_FluidR3_GM_sf2_file","0160_Aspirin_sf2_file","0160_Chaos_sf2_file","0160_FluidR3_GM_sf2_file","0160_GeneralUserGS_sf2_file","0160_JCLive_sf2_file","0160_SBLive_sf2","0160_SoundBlasterOld_sf2","0161_Aspirin_sf2_file","0161_FluidR3_GM_sf2_file","0161_SoundBlasterOld_sf2","0170_Aspirin_sf2_file","0170_Chaos_sf2_file","0170_FluidR3_GM_sf2_file","0170_GeneralUserGS_sf2_file","0170_JCLive_sf2_file","0170_SBLive_sf2","0170_SoundBlasterOld_sf2","0171_FluidR3_GM_sf2_file","0171_GeneralUserGS_sf2_file","0172_FluidR3_GM_sf2_file","0180_Aspirin_sf2_file","0180_Chaos_sf2_file","0180_FluidR3_GM_sf2_file","0180_GeneralUserGS_sf2_file","0180_JCLive_sf2_file","0180_SBLive_sf2","0180_SoundBlasterOld_sf2","0181_Aspirin_sf2_file","0181_GeneralUserGS_sf2_file","0181_SoundBlasterOld_sf2","0190_Aspirin_sf2_file","0190_Chaos_sf2_file","0190_FluidR3_GM_sf2_file","0190_GeneralUserGS_sf2_file","0190_JCLive_sf2_file","0190_SBLive_sf2","0190_SoundBlasterOld_sf2","0191_Aspirin_sf2_file","0191_GeneralUserGS_sf2_file","0191_SoundBlasterOld_sf2","0200_Aspirin_sf2_file","0200_Chaos_sf2_file","0200_FluidR3_GM_sf2_file","0200_GeneralUserGS_sf2_file","0200_JCLive_sf2_file","0200_SBLive_sf2","0200_SoundBlasterOld_sf2","0201_Aspirin_sf2_file","0201_FluidR3_GM_sf2_file","0201_GeneralUserGS_sf2_file","0201_SoundBlasterOld_sf2","0210_Aspirin_sf2_file","0210_Chaos_sf2_file","0210_FluidR3_GM_sf2_file","0210_GeneralUserGS_sf2_file","0210_JCLive_sf2_file","0210_SBLive_sf2","0210_SoundBlasterOld_sf2","0211_Aspirin_sf2_file","0211_FluidR3_GM_sf2_file","0211_GeneralUserGS_sf2_file","0211_SoundBlasterOld_sf2","0212_GeneralUserGS_sf2_file","0220_Aspirin_sf2_file","0220_Chaos_sf2_file","0220_FluidR3_GM_sf2_file","0220_GeneralUserGS_sf2_file","0220_JCLive_sf2_file","0220_SBLive_sf2","0220_SoundBlasterOld_sf2","0221_FluidR3_GM_sf2_file","0230_Aspirin_sf2_file","0230_Chaos_sf2_file","0230_FluidR3_GM_sf2_file","0230_GeneralUserGS_sf2_file","0230_JCLive_sf2_file","0230_SBLive_sf2","0230_SoundBlasterOld_sf2","0231_FluidR3_GM_sf2_file","0231_GeneralUserGS_sf2_file","0231_JCLive_sf2_file","0231_SoundBlasterOld_sf2","0232_FluidR3_GM_sf2_file","0233_FluidR3_GM_sf2_file","0240_Aspirin_sf2_file","0240_Chaos_sf2_file","0240_FluidR3_GM_sf2_file","0240_GeneralUserGS_sf2_file","0240_JCLive_sf2_file","0240_LK_Godin_Nylon_SF2_file","0240_SBLive_sf2","0240_SoundBlasterOld_sf2","0241_GeneralUserGS_sf2_file","0241_JCLive_sf2_file","0242_JCLive_sf2_file","0243_JCLive_sf2_file","0253_Acoustic_Guitar_sf2_file","0250_Aspirin_sf2_file","0250_Chaos_sf2_file","0250_FluidR3_GM_sf2_file","0250_GeneralUserGS_sf2_file","0250_JCLive_sf2_file","0250_LK_AcousticSteel_SF2_file","0250_SBLive_sf2","0250_SoundBlasterOld_sf2","0251_Acoustic_Guitar_sf2_file","0251_GeneralUserGS_sf2_file","0252_Acoustic_Guitar_sf2_file","0252_GeneralUserGS_sf2_file","0253_Acoustic_Guitar_sf2_file","0253_GeneralUserGS_sf2_file","0254_Acoustic_Guitar_sf2_file","0254_GeneralUserGS_sf2_file","0255_GeneralUserGS_sf2_file","0260_Aspirin_sf2_file","0260_Chaos_sf2_file","0260_FluidR3_GM_sf2_file","0260_GeneralUserGS_sf2_file","0260_JCLive_sf2_file","0260_SBLive_sf2","0260_SoundBlasterOld_sf2","0260_Stratocaster_sf2_file","0261_GeneralUserGS_sf2_file","0261_SoundBlasterOld_sf2","0261_Stratocaster_sf2_file","0262_Stratocaster_sf2_file","0270_Aspirin_sf2_file","0270_Chaos_sf2_file","0270_FluidR3_GM_sf2_file","0270_GeneralUserGS_sf2_file","0270_Gibson_Les_Paul_sf2_file","0270_JCLive_sf2_file","0270_SBAWE32_sf2_file","0270_SBLive_sf2","0270_SoundBlasterOld_sf2","0270_Stratocaster_sf2_file","0271_GeneralUserGS_sf2_file","0271_Stratocaster_sf2_file","0272_Stratocaster_sf2_file","0280_Aspirin_sf2_file","0280_Chaos_sf2_file","0280_FluidR3_GM_sf2_file","0280_GeneralUserGS_sf2_file","0280_JCLive_sf2_file","0280_LesPaul_sf2","0280_LesPaul_sf2_file","0280_SBAWE32_sf2_file","0280_SBLive_sf2","0280_SoundBlasterOld_sf2","0281_Aspirin_sf2_file","0281_FluidR3_GM_sf2_file","0281_GeneralUserGS_sf2_file","0282_FluidR3_GM_sf2_file","0282_GeneralUserGS_sf2_file","0283_GeneralUserGS_sf2_file","0290_Aspirin_sf2_file","0290_Chaos_sf2_file","0290_FluidR3_GM_sf2_file","0290_GeneralUserGS_sf2_file","0290_JCLive_sf2_file","0290_LesPaul_sf2","0290_LesPaul_sf2_file","0290_SBAWE32_sf2_file","0290_SBLive_sf2","0290_SoundBlasterOld_sf2","0291_Aspirin_sf2_file","0291_LesPaul_sf2","0291_LesPaul_sf2_file","0291_SBAWE32_sf2_file","0291_SoundBlasterOld_sf2","0292_Aspirin_sf2_file","0292_LesPaul_sf2","0292_LesPaul_sf2_file","0300_Aspirin_sf2_file","0300_Chaos_sf2_file","0300_FluidR3_GM_sf2_file","0300_GeneralUserGS_sf2_file","0300_JCLive_sf2_file","0300_LesPaul_sf2","0300_LesPaul_sf2_file","0300_SBAWE32_sf2_file","0300_SBLive_sf2","0300_SoundBlasterOld_sf2","0301_Aspirin_sf2_file","0301_FluidR3_GM_sf2_file","0301_GeneralUserGS_sf2_file","0301_JCLive_sf2_file","0301_LesPaul_sf2","0301_LesPaul_sf2_file","0302_Aspirin_sf2_file","0302_GeneralUserGS_sf2_file","0302_JCLive_sf2_file","0303_Aspirin_sf2_file","0304_Aspirin_sf2_file","0310_Aspirin_sf2_file","0310_Chaos_sf2_file","0310_FluidR3_GM_sf2_file","0310_GeneralUserGS_sf2_file","0310_JCLive_sf2_file","0310_LesPaul_sf2","0310_LesPaul_sf2_file","0310_SBAWE32_sf2_file","0310_SBLive_sf2","0310_SoundBlasterOld_sf2","0311_FluidR3_GM_sf2_file","0311_GeneralUserGS_sf2_file","0320_Aspirin_sf2_file","0320_Chaos_sf2_file","0320_FluidR3_GM_sf2_file","0320_GeneralUserGS_sf2_file","0320_JCLive_sf2_file","0320_SBLive_sf2","0320_SoundBlasterOld_sf2","0321_GeneralUserGS_sf2_file","0322_GeneralUserGS_sf2_file","0330_Aspirin_sf2_file","0330_Chaos_sf2_file","0330_FluidR3_GM_sf2_file","0330_GeneralUserGS_sf2_file","0330_JCLive_sf2_file","0330_SBLive_sf2","0330_SoundBlasterOld_sf2","0331_GeneralUserGS_sf2_file","0332_GeneralUserGS_sf2_file","0340_Aspirin_sf2_file","0340_Chaos_sf2_file","0340_FluidR3_GM_sf2_file","0340_GeneralUserGS_sf2_file","0340_JCLive_sf2_file","0340_SBLive_sf2","0340_SoundBlasterOld_sf2","0341_Aspirin_sf2_file","0341_GeneralUserGS_sf2_file","0350_Aspirin_sf2_file","0350_Chaos_sf2_file","0350_FluidR3_GM_sf2_file","0350_GeneralUserGS_sf2_file","0350_JCLive_sf2_file","0350_SBLive_sf2","0350_SoundBlasterOld_sf2","0351_GeneralUserGS_sf2_file","0360_Aspirin_sf2_file","0360_Chaos_sf2_file","0360_FluidR3_GM_sf2_file","0360_GeneralUserGS_sf2_file","0360_JCLive_sf2_file","0360_SBLive_sf2","0360_SoundBlasterOld_sf2","0361_GeneralUserGS_sf2_file","0370_Aspirin_sf2_file","0370_Chaos_sf2_file","0370_FluidR3_GM_sf2_file","0370_GeneralUserGS_sf2_file","0370_JCLive_sf2_file","0370_SBLive_sf2","0370_SoundBlasterOld_sf2","0371_GeneralUserGS_sf2_file","0372_GeneralUserGS_sf2_file","0385_GeneralUserGS_sf2_file","0380_Aspirin_sf2_file","0380_Chaos_sf2_file","0380_FluidR3_GM_sf2_file","0380_GeneralUserGS_sf2_file","0380_JCLive_sf2_file","0380_SBLive_sf2","0380_SoundBlasterOld_sf2","0381_FluidR3_GM_sf2_file","0381_GeneralUserGS_sf2_file","0382_FluidR3_GM_sf2_file","0382_GeneralUserGS_sf2_file","0383_GeneralUserGS_sf2_file","0384_GeneralUserGS_sf2_file","0386_GeneralUserGS_sf2_file","0387_GeneralUserGS_sf2_file","0390_Aspirin_sf2_file","0390_Chaos_sf2_file","0390_FluidR3_GM_sf2_file","0390_GeneralUserGS_sf2_file","0390_JCLive_sf2_file","0390_SBLive_sf2","0390_SoundBlasterOld_sf2","0391_FluidR3_GM_sf2_file","0391_GeneralUserGS_sf2_file","0391_SoundBlasterOld_sf2","0392_FluidR3_GM_sf2_file","0392_GeneralUserGS_sf2_file","0393_GeneralUserGS_sf2_file","0400_Aspirin_sf2_file","0400_Chaos_sf2_file","0400_FluidR3_GM_sf2_file","0400_GeneralUserGS_sf2_file","0400_JCLive_sf2_file","0400_SBLive_sf2","0400_SoundBlasterOld_sf2","0401_Aspirin_sf2_file","0401_FluidR3_GM_sf2_file","0401_GeneralUserGS_sf2_file","0402_GeneralUserGS_sf2_file","0410_Aspirin_sf2_file","0410_Chaos_sf2_file","0410_FluidR3_GM_sf2_file","0410_GeneralUserGS_sf2_file","0410_JCLive_sf2_file","0410_SBLive_sf2","0410_SoundBlasterOld_sf2","0411_FluidR3_GM_sf2_file","0420_Aspirin_sf2_file","0420_Chaos_sf2_file","0420_FluidR3_GM_sf2_file","0420_GeneralUserGS_sf2_file","0420_JCLive_sf2_file","0420_SBLive_sf2","0420_SoundBlasterOld_sf2","0421_FluidR3_GM_sf2_file","0421_GeneralUserGS_sf2_file","0430_Aspirin_sf2_file","0430_Chaos_sf2_file","0430_FluidR3_GM_sf2_file","0430_GeneralUserGS_sf2_file","0430_JCLive_sf2_file","0430_SBLive_sf2","0430_SoundBlasterOld_sf2","0431_FluidR3_GM_sf2_file","0440_Aspirin_sf2_file","0440_Chaos_sf2_file","0440_FluidR3_GM_sf2_file","0440_GeneralUserGS_sf2_file","0440_JCLive_sf2_file","0440_SBLive_sf2","0440_SoundBlasterOld_sf2","0441_GeneralUserGS_sf2_file","0442_GeneralUserGS_sf2_file","0450_Aspirin_sf2_file","0450_Chaos_sf2_file","0450_FluidR3_GM_sf2_file","0450_GeneralUserGS_sf2_file","0450_JCLive_sf2_file","0450_SBLive_sf2","0450_SoundBlasterOld_sf2","0451_FluidR3_GM_sf2_file","0460_Aspirin_sf2_file","0460_Chaos_sf2_file","0460_FluidR3_GM_sf2_file","0460_GeneralUserGS_sf2_file","0460_JCLive_sf2_file","0460_SBLive_sf2","0460_SoundBlasterOld_sf2","0461_FluidR3_GM_sf2_file","0470_Aspirin_sf2_file","0470_Chaos_sf2_file","0470_FluidR3_GM_sf2_file","0470_GeneralUserGS_sf2_file","0470_JCLive_sf2_file","0470_SBLive_sf2","0470_SoundBlasterOld_sf2","0471_FluidR3_GM_sf2_file","0471_GeneralUserGS_sf2_file","0480_Aspirin_sf2_file","0480_Chaos_sf2_file","0480_FluidR3_GM_sf2_file","0480_GeneralUserGS_sf2_file","0480_JCLive_sf2_file","0480_SBLive_sf2","0480_SoundBlasterOld_sf2","04810_GeneralUserGS_sf2_file","04811_GeneralUserGS_sf2_file","04812_GeneralUserGS_sf2_file","04813_GeneralUserGS_sf2_file","04814_GeneralUserGS_sf2_file","04815_GeneralUserGS_sf2_file","04816_GeneralUserGS_sf2_file","04817_GeneralUserGS_sf2_file","0481_Aspirin_sf2_file","0481_FluidR3_GM_sf2_file","0481_GeneralUserGS_sf2_file","0482_Aspirin_sf2_file","0482_GeneralUserGS_sf2_file","0483_GeneralUserGS_sf2_file","0484_GeneralUserGS_sf2_file","0485_GeneralUserGS_sf2_file","0486_GeneralUserGS_sf2_file","0487_GeneralUserGS_sf2_file","0488_GeneralUserGS_sf2_file","0489_GeneralUserGS_sf2_file","0490_Aspirin_sf2_file","0490_Chaos_sf2_file","0490_FluidR3_GM_sf2_file","0490_GeneralUserGS_sf2_file","0490_JCLive_sf2_file","0490_SBLive_sf2","0490_SoundBlasterOld_sf2","0491_GeneralUserGS_sf2_file","0492_GeneralUserGS_sf2_file","0500_Aspirin_sf2_file","0500_Chaos_sf2_file","0500_FluidR3_GM_sf2_file","0500_GeneralUserGS_sf2_file","0500_JCLive_sf2_file","0500_SBLive_sf2","0500_SoundBlasterOld_sf2","0501_FluidR3_GM_sf2_file","0501_GeneralUserGS_sf2_file","0502_FluidR3_GM_sf2_file","0502_GeneralUserGS_sf2_file","0503_FluidR3_GM_sf2_file","0504_FluidR3_GM_sf2_file","0505_FluidR3_GM_sf2_file","0510_Aspirin_sf2_file","0510_Chaos_sf2_file","0510_FluidR3_GM_sf2_file","0510_GeneralUserGS_sf2_file","0510_JCLive_sf2_file","0510_SBLive_sf2","0510_SoundBlasterOld_sf2","0511_GeneralUserGS_sf2_file","0511_SoundBlasterOld_sf2","0520_Aspirin_sf2_file","0520_Chaos_sf2_file","0520_FluidR3_GM_sf2_file","0520_GeneralUserGS_sf2_file","0520_JCLive_sf2_file","0520_SBLive_sf2","0520_Soul_Ahhs_sf2_file","0520_SoundBlasterOld_sf2","0521_FluidR3_GM_sf2_file","0521_Soul_Ahhs_sf2_file","0521_SoundBlasterOld_sf2","0522_Soul_Ahhs_sf2_file","0530_Aspirin_sf2_file","0530_Chaos_sf2_file","0530_FluidR3_GM_sf2_file","0530_GeneralUserGS_sf2_file","0530_JCLive_sf2_file","0530_SBLive_sf2","0530_Soul_Ahhs_sf2_file","0530_SoundBlasterOld_sf2","0531_FluidR3_GM_sf2_file","0531_GeneralUserGS_sf2_file","0531_JCLive_sf2_file","0531_SoundBlasterOld_sf2","0540_Aspirin_sf2_file","0540_Chaos_sf2_file","0540_FluidR3_GM_sf2_file","0540_GeneralUserGS_sf2_file","0540_JCLive_sf2_file","0540_SBLive_sf2","0540_SoundBlasterOld_sf2","0541_FluidR3_GM_sf2_file","0550_Aspirin_sf2_file","0550_Chaos_sf2_file","0550_FluidR3_GM_sf2_file","0550_GeneralUserGS_sf2_file","0550_JCLive_sf2_file","0550_SBLive_sf2","0550_SoundBlasterOld_sf2","0551_Aspirin_sf2_file","0551_FluidR3_GM_sf2_file","0560_Aspirin_sf2_file","0560_Chaos_sf2_file","0560_FluidR3_GM_sf2_file","0560_GeneralUserGS_sf2_file","0560_JCLive_sf2_file","0560_SBLive_sf2","0560_SoundBlasterOld_sf2","0570_Aspirin_sf2_file","0570_Chaos_sf2_file","0570_FluidR3_GM_sf2_file","0570_GeneralUserGS_sf2_file","0570_JCLive_sf2_file","0570_SBLive_sf2","0570_SoundBlasterOld_sf2","0571_GeneralUserGS_sf2_file","0580_Aspirin_sf2_file","0580_Chaos_sf2_file","0580_FluidR3_GM_sf2_file","0580_GeneralUserGS_sf2_file","0580_JCLive_sf2_file","0580_SBLive_sf2","0580_SoundBlasterOld_sf2","0581_GeneralUserGS_sf2_file","0590_Aspirin_sf2_file","0590_Chaos_sf2_file","0590_FluidR3_GM_sf2_file","0590_GeneralUserGS_sf2_file","0590_JCLive_sf2_file","0590_SBLive_sf2","0590_SoundBlasterOld_sf2","0591_GeneralUserGS_sf2_file","0600_Aspirin_sf2_file","0600_Chaos_sf2_file","0600_FluidR3_GM_sf2_file","0600_GeneralUserGS_sf2_file","0600_JCLive_sf2_file","0600_SBLive_sf2","0600_SoundBlasterOld_sf2","0601_FluidR3_GM_sf2_file","0601_GeneralUserGS_sf2_file","0602_GeneralUserGS_sf2_file","0603_GeneralUserGS_sf2_file","0610_Aspirin_sf2_file","0610_Chaos_sf2_file","0610_FluidR3_GM_sf2_file","0610_GeneralUserGS_sf2_file","0610_JCLive_sf2_file","0610_SBLive_sf2","0610_SoundBlasterOld_sf2","0611_GeneralUserGS_sf2_file","0612_GeneralUserGS_sf2_file","0613_GeneralUserGS_sf2_file","0614_GeneralUserGS_sf2_file","0615_GeneralUserGS_sf2_file","0620_Aspirin_sf2_file","0620_Chaos_sf2_file","0620_FluidR3_GM_sf2_file","0620_GeneralUserGS_sf2_file","0620_JCLive_sf2_file","0620_SBLive_sf2","0620_SoundBlasterOld_sf2","0621_Aspirin_sf2_file","0621_FluidR3_GM_sf2_file","0621_GeneralUserGS_sf2_file","0622_FluidR3_GM_sf2_file","0622_GeneralUserGS_sf2_file","0630_Aspirin_sf2_file","0630_Chaos_sf2_file","0630_FluidR3_GM_sf2_file","0630_GeneralUserGS_sf2_file","0630_JCLive_sf2_file","0630_SBLive_sf2","0630_SoundBlasterOld_sf2","0631_Aspirin_sf2_file","0631_FluidR3_GM_sf2_file","0631_GeneralUserGS_sf2_file","0632_FluidR3_GM_sf2_file","0633_FluidR3_GM_sf2_file","0640_Aspirin_sf2_file","0640_Chaos_sf2_file","0640_FluidR3_GM_sf2_file","0640_GeneralUserGS_sf2_file","0640_JCLive_sf2_file","0640_SBLive_sf2","0640_SoundBlasterOld_sf2","0641_FluidR3_GM_sf2_file","0650_Aspirin_sf2_file","0650_Chaos_sf2_file","0650_FluidR3_GM_sf2_file","0650_GeneralUserGS_sf2_file","0650_JCLive_sf2_file","0650_SBLive_sf2","0650_SoundBlasterOld_sf2","0651_Aspirin_sf2_file","0651_FluidR3_GM_sf2_file","0660_Aspirin_sf2_file","0660_Chaos_sf2_file","0660_FluidR3_GM_sf2_file","0660_GeneralUserGS_sf2_file","0660_JCLive_sf2_file","0660_SBLive_sf2","0660_SoundBlasterOld_sf2","0661_FluidR3_GM_sf2_file","0661_GeneralUserGS_sf2_file","0670_Aspirin_sf2_file","0670_Chaos_sf2_file","0670_FluidR3_GM_sf2_file","0670_GeneralUserGS_sf2_file","0670_JCLive_sf2_file","0670_SBLive_sf2","0670_SoundBlasterOld_sf2","0671_FluidR3_GM_sf2_file","0680_Aspirin_sf2_file","0680_Chaos_sf2_file","0680_FluidR3_GM_sf2_file","0680_GeneralUserGS_sf2_file","0680_JCLive_sf2_file","0680_SBLive_sf2","0680_SoundBlasterOld_sf2","0681_FluidR3_GM_sf2_file","0690_Aspirin_sf2_file","0690_Chaos_sf2_file","0690_FluidR3_GM_sf2_file","0690_GeneralUserGS_sf2_file","0690_JCLive_sf2_file","0690_SBLive_sf2","0690_SoundBlasterOld_sf2","0691_FluidR3_GM_sf2_file","0700_Aspirin_sf2_file","0700_Chaos_sf2_file","0700_FluidR3_GM_sf2_file","0700_GeneralUserGS_sf2_file","0700_JCLive_sf2_file","0700_SBLive_sf2","0700_SoundBlasterOld_sf2","0701_FluidR3_GM_sf2_file","0701_GeneralUserGS_sf2_file","0710_Aspirin_sf2_file","0710_Chaos_sf2_file","0710_FluidR3_GM_sf2_file","0710_GeneralUserGS_sf2_file","0710_JCLive_sf2_file","0710_SBLive_sf2","0710_SoundBlasterOld_sf2","0711_FluidR3_GM_sf2_file","0720_Aspirin_sf2_file","0720_Chaos_sf2_file","0720_FluidR3_GM_sf2_file","0720_GeneralUserGS_sf2_file","0720_JCLive_sf2_file","0720_SBLive_sf2","0720_SoundBlasterOld_sf2","0721_FluidR3_GM_sf2_file","0721_SoundBlasterOld_sf2","0730_Aspirin_sf2_file","0730_Chaos_sf2_file","0730_FluidR3_GM_sf2_file","0730_GeneralUserGS_sf2_file","0730_JCLive_sf2_file","0730_SBLive_sf2","0730_SoundBlasterOld_sf2","0731_Aspirin_sf2_file","0731_FluidR3_GM_sf2_file","0731_SoundBlasterOld_sf2","0740_Aspirin_sf2_file","0740_Chaos_sf2_file","0740_FluidR3_GM_sf2_file","0740_GeneralUserGS_sf2_file","0740_JCLive_sf2_file","0740_SBLive_sf2","0740_SoundBlasterOld_sf2","0741_GeneralUserGS_sf2_file","0750_Aspirin_sf2_file","0750_Chaos_sf2_file","0750_FluidR3_GM_sf2_file","0750_GeneralUserGS_sf2_file","0750_JCLive_sf2_file","0750_SBLive_sf2","0750_SoundBlasterOld_sf2","0751_Aspirin_sf2_file","0751_FluidR3_GM_sf2_file","0751_GeneralUserGS_sf2_file","0751_SoundBlasterOld_sf2","0760_Aspirin_sf2_file","0760_Chaos_sf2_file","0760_FluidR3_GM_sf2_file","0760_GeneralUserGS_sf2_file","0760_JCLive_sf2_file","0760_SBLive_sf2","0760_SoundBlasterOld_sf2","0761_FluidR3_GM_sf2_file","0761_GeneralUserGS_sf2_file","0761_SoundBlasterOld_sf2","0762_GeneralUserGS_sf2_file","0770_Aspirin_sf2_file","0770_Chaos_sf2_file","0770_FluidR3_GM_sf2_file","0770_GeneralUserGS_sf2_file","0770_JCLive_sf2_file","0770_SBLive_sf2","0770_SoundBlasterOld_sf2","0771_FluidR3_GM_sf2_file","0771_GeneralUserGS_sf2_file","0772_GeneralUserGS_sf2_file","0780_Aspirin_sf2_file","0780_Chaos_sf2_file","0780_FluidR3_GM_sf2_file","0780_GeneralUserGS_sf2_file","0780_JCLive_sf2_file","0780_SBLive_sf2","0780_SoundBlasterOld_sf2","0781_GeneralUserGS_sf2_file","0790_Aspirin_sf2_file","0790_Chaos_sf2_file","0790_FluidR3_GM_sf2_file","0790_GeneralUserGS_sf2_file","0790_JCLive_sf2_file","0790_SBLive_sf2","0790_SoundBlasterOld_sf2","0791_GeneralUserGS_sf2_file","0800_Aspirin_sf2_file","0800_Chaos_sf2_file","0800_FluidR3_GM_sf2_file","0800_GeneralUserGS_sf2_file","0800_JCLive_sf2_file","0800_SBLive_sf2","0800_SoundBlasterOld_sf2","0801_FluidR3_GM_sf2_file","0801_GeneralUserGS_sf2_file","0810_Aspirin_sf2_file","0810_Chaos_sf2_file","0810_FluidR3_GM_sf2_file","0810_GeneralUserGS_sf2_file","0810_JCLive_sf2_file","0810_SBLive_sf2","0810_SoundBlasterOld_sf2","0811_Aspirin_sf2_file","0811_GeneralUserGS_sf2_file","0811_SoundBlasterOld_sf2","0820_Aspirin_sf2_file","0820_Chaos_sf2_file","0820_FluidR3_GM_sf2_file","0820_GeneralUserGS_sf2_file","0820_JCLive_sf2_file","0820_SBLive_sf2","0820_SoundBlasterOld_sf2","0821_FluidR3_GM_sf2_file","0821_GeneralUserGS_sf2_file","0821_SoundBlasterOld_sf2","0822_GeneralUserGS_sf2_file","0823_GeneralUserGS_sf2_file","0830_Aspirin_sf2_file","0830_Chaos_sf2_file","0830_FluidR3_GM_sf2_file","0830_GeneralUserGS_sf2_file","0830_JCLive_sf2_file","0830_SBLive_sf2","0830_SoundBlasterOld_sf2","0831_FluidR3_GM_sf2_file","0831_GeneralUserGS_sf2_file","0831_SoundBlasterOld_sf2","0840_Aspirin_sf2_file","0840_Chaos_sf2_file","0840_FluidR3_GM_sf2_file","0840_GeneralUserGS_sf2_file","0840_JCLive_sf2_file","0840_SBLive_sf2","0840_SoundBlasterOld_sf2","0841_Aspirin_sf2_file","0841_Chaos_sf2_file","0841_FluidR3_GM_sf2_file","0841_GeneralUserGS_sf2_file","0841_JCLive_sf2_file","0841_SoundBlasterOld_sf2","0842_FluidR3_GM_sf2_file","0850_Aspirin_sf2_file","0850_Chaos_sf2_file","0850_FluidR3_GM_sf2_file","0850_GeneralUserGS_sf2_file","0850_JCLive_sf2_file","0850_SBLive_sf2","0850_SoundBlasterOld_sf2","0851_FluidR3_GM_sf2_file","0851_GeneralUserGS_sf2_file","0851_JCLive_sf2_file","0851_SoundBlasterOld_sf2","0860_Aspirin_sf2_file","0860_Chaos_sf2_file","0860_FluidR3_GM_sf2_file","0860_GeneralUserGS_sf2_file","0860_JCLive_sf2_file","0860_SBLive_sf2","0860_SoundBlasterOld_sf2","0861_Aspirin_sf2_file","0861_FluidR3_GM_sf2_file","0861_SoundBlasterOld_sf2","0870_Aspirin_sf2_file","0870_Chaos_sf2_file","0870_FluidR3_GM_sf2_file","0870_GeneralUserGS_sf2_file","0870_JCLive_sf2_file","0870_SBLive_sf2","0870_SoundBlasterOld_sf2","0871_GeneralUserGS_sf2_file","0872_GeneralUserGS_sf2_file","0873_GeneralUserGS_sf2_file","0880_Aspirin_sf2_file","0880_Chaos_sf2_file","0880_FluidR3_GM_sf2_file","0880_GeneralUserGS_sf2_file","0880_JCLive_sf2_file","0880_SBLive_sf2","0880_SoundBlasterOld_sf2","0881_Aspirin_sf2_file","0881_FluidR3_GM_sf2_file","0881_GeneralUserGS_sf2_file","0881_SoundBlasterOld_sf2","0882_Aspirin_sf2_file","0882_FluidR3_GM_sf2_file","0882_GeneralUserGS_sf2_file","0883_GeneralUserGS_sf2_file","0884_GeneralUserGS_sf2_file","0885_GeneralUserGS_sf2_file","0886_GeneralUserGS_sf2_file","0887_GeneralUserGS_sf2_file","0888_GeneralUserGS_sf2_file","0889_GeneralUserGS_sf2_file","0890_Aspirin_sf2_file","0890_Chaos_sf2_file","0890_FluidR3_GM_sf2_file","0890_GeneralUserGS_sf2_file","0890_JCLive_sf2_file","0890_SBLive_sf2","0890_SoundBlasterOld_sf2","0891_Aspirin_sf2_file","0891_FluidR3_GM_sf2_file","0891_GeneralUserGS_sf2_file","0900_Aspirin_sf2_file","0900_Chaos_sf2_file","0900_FluidR3_GM_sf2_file","0900_GeneralUserGS_sf2_file","0900_JCLive_sf2_file","0900_SBLive_sf2","0900_SoundBlasterOld_sf2","0901_Aspirin_sf2_file","0901_FluidR3_GM_sf2_file","0901_GeneralUserGS_sf2_file","0901_SoundBlasterOld_sf2","0910_Aspirin_sf2_file","0910_Chaos_sf2_file","0910_FluidR3_GM_sf2_file","0910_GeneralUserGS_sf2_file","0910_JCLive_sf2_file","0910_SBLive_sf2","0910_SoundBlasterOld_sf2","0911_Aspirin_sf2_file","0911_GeneralUserGS_sf2_file","0911_JCLive_sf2_file","0911_SoundBlasterOld_sf2","0920_Aspirin_sf2_file","0920_Chaos_sf2_file","0920_FluidR3_GM_sf2_file","0920_GeneralUserGS_sf2_file","0920_JCLive_sf2_file","0920_SBLive_sf2","0920_SoundBlasterOld_sf2","0921_Aspirin_sf2_file","0921_GeneralUserGS_sf2_file","0921_SoundBlasterOld_sf2","0930_Aspirin_sf2_file","0930_Chaos_sf2_file","0930_FluidR3_GM_sf2_file","0930_GeneralUserGS_sf2_file","0930_JCLive_sf2_file","0930_SBLive_sf2","0930_SoundBlasterOld_sf2","0931_Aspirin_sf2_file","0931_FluidR3_GM_sf2_file","0931_GeneralUserGS_sf2_file","0931_SoundBlasterOld_sf2","0940_Aspirin_sf2_file","0940_Chaos_sf2_file","0940_FluidR3_GM_sf2_file","0940_GeneralUserGS_sf2_file","0940_JCLive_sf2_file","0940_SBLive_sf2","0940_SoundBlasterOld_sf2","0941_Aspirin_sf2_file","0941_FluidR3_GM_sf2_file","0941_GeneralUserGS_sf2_file","0941_JCLive_sf2_file","0950_Aspirin_sf2_file","0950_Chaos_sf2_file","0950_FluidR3_GM_sf2_file","0950_GeneralUserGS_sf2_file","0950_JCLive_sf2_file","0950_SBLive_sf2","0950_SoundBlasterOld_sf2","0951_FluidR3_GM_sf2_file","0951_GeneralUserGS_sf2_file","0960_Aspirin_sf2_file","0960_Chaos_sf2_file","0960_FluidR3_GM_sf2_file","0960_GeneralUserGS_sf2_file","0960_JCLive_sf2_file","0960_SBLive_sf2","0960_SoundBlasterOld_sf2","0961_Aspirin_sf2_file","0961_FluidR3_GM_sf2_file","0961_GeneralUserGS_sf2_file","0961_SoundBlasterOld_sf2","0962_GeneralUserGS_sf2_file","0970_Aspirin_sf2_file","0970_Chaos_sf2_file","0970_FluidR3_GM_sf2_file","0970_GeneralUserGS_sf2_file","0970_JCLive_sf2_file","0970_SBLive_sf2","0970_SoundBlasterOld_sf2","0971_FluidR3_GM_sf2_file","0971_GeneralUserGS_sf2_file","0971_SoundBlasterOld_sf2","0980_Aspirin_sf2_file","0980_Chaos_sf2_file","0980_FluidR3_GM_sf2_file","0980_GeneralUserGS_sf2_file","0980_JCLive_sf2_file","0980_SBLive_sf2","0980_SoundBlasterOld_sf2","0981_Aspirin_sf2_file","0981_FluidR3_GM_sf2_file","0981_GeneralUserGS_sf2_file","0981_SoundBlasterOld_sf2","0982_GeneralUserGS_sf2_file","0983_GeneralUserGS_sf2_file","0984_GeneralUserGS_sf2_file","0990_Aspirin_sf2_file","0990_Chaos_sf2_file","0990_FluidR3_GM_sf2_file","0990_GeneralUserGS_sf2_file","0990_JCLive_sf2_file","0990_SBLive_sf2","0990_SoundBlasterOld_sf2","0991_Aspirin_sf2_file","0991_FluidR3_GM_sf2_file","0991_GeneralUserGS_sf2_file","0991_JCLive_sf2_file","0991_SoundBlasterOld_sf2","0992_FluidR3_GM_sf2_file","0992_JCLive_sf2_file","0993_JCLive_sf2_file","0994_JCLive_sf2_file","1000_Aspirin_sf2_file","1000_Chaos_sf2_file","1000_FluidR3_GM_sf2_file","1000_GeneralUserGS_sf2_file","1000_JCLive_sf2_file","1000_SBLive_sf2","1000_SoundBlasterOld_sf2","1001_Aspirin_sf2_file","1001_FluidR3_GM_sf2_file","1001_GeneralUserGS_sf2_file","1001_JCLive_sf2_file","1001_SoundBlasterOld_sf2","1002_Aspirin_sf2_file","1002_FluidR3_GM_sf2_file","1002_GeneralUserGS_sf2_file","1010_Aspirin_sf2_file","1010_Chaos_sf2_file","1010_FluidR3_GM_sf2_file","1010_GeneralUserGS_sf2_file","1010_JCLive_sf2_file","1010_SBLive_sf2","1010_SoundBlasterOld_sf2","1011_Aspirin_sf2_file","1011_FluidR3_GM_sf2_file","1011_JCLive_sf2_file","1012_Aspirin_sf2_file","1020_Aspirin_sf2_file","1020_Chaos_sf2_file","1020_FluidR3_GM_sf2_file","1020_GeneralUserGS_sf2_file","1020_JCLive_sf2_file","1020_SBLive_sf2","1020_SoundBlasterOld_sf2","1021_Aspirin_sf2_file","1021_FluidR3_GM_sf2_file","1021_GeneralUserGS_sf2_file","1021_JCLive_sf2_file","1021_SoundBlasterOld_sf2","1022_GeneralUserGS_sf2_file","1030_Aspirin_sf2_file","1030_Chaos_sf2_file","1030_FluidR3_GM_sf2_file","1030_GeneralUserGS_sf2_file","1030_JCLive_sf2_file","1030_SBLive_sf2","1030_SoundBlasterOld_sf2","1031_Aspirin_sf2_file","1031_FluidR3_GM_sf2_file","1031_GeneralUserGS_sf2_file","1031_SoundBlasterOld_sf2","1032_FluidR3_GM_sf2_file","1040_Aspirin_sf2_file","1040_Chaos_sf2_file","1040_FluidR3_GM_sf2_file","1040_GeneralUserGS_sf2_file","1040_JCLive_sf2_file","1040_SBLive_sf2","1040_SoundBlasterOld_sf2","1041_FluidR3_GM_sf2_file","1041_GeneralUserGS_sf2_file","1050_Aspirin_sf2_file","1050_Chaos_sf2_file","1050_FluidR3_GM_sf2_file","1050_GeneralUserGS_sf2_file","1050_JCLive_sf2_file","1050_SBLive_sf2","1050_SoundBlasterOld_sf2","1051_GeneralUserGS_sf2_file","1060_Aspirin_sf2_file","1060_Chaos_sf2_file","1060_FluidR3_GM_sf2_file","1060_GeneralUserGS_sf2_file","1060_JCLive_sf2_file","1060_SBLive_sf2","1060_SoundBlasterOld_sf2","1061_FluidR3_GM_sf2_file","1061_GeneralUserGS_sf2_file","1061_SoundBlasterOld_sf2","1070_Aspirin_sf2_file","1070_Chaos_sf2_file","1070_FluidR3_GM_sf2_file","1070_GeneralUserGS_sf2_file","1070_JCLive_sf2_file","1070_SBLive_sf2","1070_SoundBlasterOld_sf2","1071_FluidR3_GM_sf2_file","1071_GeneralUserGS_sf2_file","1072_GeneralUserGS_sf2_file","1073_GeneralUserGS_sf2_file","1080_Aspirin_sf2_file","1080_Chaos_sf2_file","1080_FluidR3_GM_sf2_file","1080_GeneralUserGS_sf2_file","1080_JCLive_sf2_file","1080_SBLive_sf2","1080_SoundBlasterOld_sf2","1081_SoundBlasterOld_sf2","1090_Aspirin_sf2_file","1090_Chaos_sf2_file","1090_FluidR3_GM_sf2_file","1090_GeneralUserGS_sf2_file","1090_JCLive_sf2_file","1090_SBLive_sf2","1090_SoundBlasterOld_sf2","1091_SoundBlasterOld_sf2","1100_Aspirin_sf2_file","1100_Chaos_sf2_file","1100_FluidR3_GM_sf2_file","1100_GeneralUserGS_sf2_file","1100_JCLive_sf2_file","1100_SBLive_sf2","1100_SoundBlasterOld_sf2","1101_Aspirin_sf2_file","1101_FluidR3_GM_sf2_file","1101_GeneralUserGS_sf2_file","1102_GeneralUserGS_sf2_file","1110_Aspirin_sf2_file","1110_Chaos_sf2_file","1110_FluidR3_GM_sf2_file","1110_GeneralUserGS_sf2_file","1110_JCLive_sf2_file","1110_SBLive_sf2","1110_SoundBlasterOld_sf2","1120_Aspirin_sf2_file","1120_Chaos_sf2_file","1120_FluidR3_GM_sf2_file","1120_GeneralUserGS_sf2_file","1120_JCLive_sf2_file","1120_SBLive_sf2","1120_SoundBlasterOld_sf2","1121_SoundBlasterOld_sf2","1130_Aspirin_sf2_file","1130_Chaos_sf2_file","1130_FluidR3_GM_sf2_file","1130_GeneralUserGS_sf2_file","1130_JCLive_sf2_file","1130_SBLive_sf2","1130_SoundBlasterOld_sf2","1131_FluidR3_GM_sf2_file","1131_SoundBlasterOld_sf2","1140_Aspirin_sf2_file","1140_Chaos_sf2_file","1140_FluidR3_GM_sf2_file","1140_GeneralUserGS_sf2_file","1140_JCLive_sf2_file","1140_SBLive_sf2","1140_SoundBlasterOld_sf2","1141_FluidR3_GM_sf2_file","1150_Aspirin_sf2_file","1150_Chaos_sf2_file","1150_FluidR3_GM_sf2_file","1150_GeneralUserGS_sf2_file","1150_JCLive_sf2_file","1150_SBLive_sf2","1150_SoundBlasterOld_sf2","1151_FluidR3_GM_sf2_file","1151_GeneralUserGS_sf2_file","1152_FluidR3_GM_sf2_file","1152_GeneralUserGS_sf2_file","1160_Aspirin_sf2_file","1160_Chaos_sf2_file","1160_FluidR3_GM_sf2_file","1160_GeneralUserGS_sf2_file","1160_JCLive_sf2_file","1160_SBLive_sf2","1160_SoundBlasterOld_sf2","1161_FluidR3_GM_sf2_file","1161_GeneralUserGS_sf2_file","1161_SoundBlasterOld_sf2","1162_FluidR3_GM_sf2_file","1162_GeneralUserGS_sf2_file","1163_FluidR3_GM_sf2_file","1170_Aspirin_sf2_file","1170_Chaos_sf2_file","1170_FluidR3_GM_sf2_file","1170_GeneralUserGS_sf2_file","1170_JCLive_sf2_file","1170_SBLive_sf2","1170_SoundBlasterOld_sf2","1171_FluidR3_GM_sf2_file","1171_GeneralUserGS_sf2_file","1172_FluidR3_GM_sf2_file","1173_FluidR3_GM_sf2_file","1180_Aspirin_sf2_file","1180_Chaos_sf2_file","1180_FluidR3_GM_sf2_file","1180_GeneralUserGS_sf2_file","1180_JCLive_sf2_file","1180_SBLive_sf2","1180_SoundBlasterOld_sf2","1181_FluidR3_GM_sf2_file","1181_GeneralUserGS_sf2_file","1181_SoundBlasterOld_sf2","1190_Aspirin_sf2_file","1190_Chaos_sf2_file","1190_FluidR3_GM_sf2_file","1190_GeneralUserGS_sf2_file","1190_JCLive_sf2_file","1190_SBLive_sf2","1190_SoundBlasterOld_sf2","1191_GeneralUserGS_sf2_file","1192_GeneralUserGS_sf2_file","1193_GeneralUserGS_sf2_file","1194_GeneralUserGS_sf2_file","1200_Aspirin_sf2_file","1200_Chaos_sf2_file","1200_FluidR3_GM_sf2_file","1200_GeneralUserGS_sf2_file","1200_JCLive_sf2_file","1200_SBLive_sf2","1200_SoundBlasterOld_sf2","1201_Aspirin_sf2_file","1201_GeneralUserGS_sf2_file","1202_GeneralUserGS_sf2_file","1210_Aspirin_sf2_file","1210_Chaos_sf2_file","1210_FluidR3_GM_sf2_file","1210_GeneralUserGS_sf2_file","1210_JCLive_sf2_file","1210_SBLive_sf2","1210_SoundBlasterOld_sf2","1211_Aspirin_sf2_file","1211_GeneralUserGS_sf2_file","1212_GeneralUserGS_sf2_file","1220_Aspirin_sf2_file","1220_Chaos_sf2_file","1220_FluidR3_GM_sf2_file","1220_GeneralUserGS_sf2_file","1220_JCLive_sf2_file","1220_SBLive_sf2","1220_SoundBlasterOld_sf2","1221_Aspirin_sf2_file","1221_GeneralUserGS_sf2_file","1221_JCLive_sf2_file","1222_Aspirin_sf2_file","1222_GeneralUserGS_sf2_file","1223_Aspirin_sf2_file","1223_GeneralUserGS_sf2_file","1224_Aspirin_sf2_file","1224_GeneralUserGS_sf2_file","1225_GeneralUserGS_sf2_file","1226_GeneralUserGS_sf2_file","1230_Aspirin_sf2_file","1230_Chaos_sf2_file","1230_FluidR3_GM_sf2_file","1230_GeneralUserGS_sf2_file","1230_JCLive_sf2_file","1230_SBLive_sf2","1230_SoundBlasterOld_sf2","1231_Aspirin_sf2_file","1231_GeneralUserGS_sf2_file","1232_Aspirin_sf2_file","1232_GeneralUserGS_sf2_file","1233_GeneralUserGS_sf2_file","1234_GeneralUserGS_sf2_file","1240_Aspirin_sf2_file","1240_Chaos_sf2_file","1240_FluidR3_GM_sf2_file","1240_GeneralUserGS_sf2_file","1240_JCLive_sf2_file","1240_SBLive_sf2","1240_SoundBlasterOld_sf2","1241_Aspirin_sf2_file","1241_GeneralUserGS_sf2_file","1242_Aspirin_sf2_file","1242_GeneralUserGS_sf2_file","1243_Aspirin_sf2_file","1243_GeneralUserGS_sf2_file","1244_Aspirin_sf2_file","1244_GeneralUserGS_sf2_file","1250_Aspirin_sf2_file","1250_Chaos_sf2_file","1250_FluidR3_GM_sf2_file","1250_GeneralUserGS_sf2_file","1250_JCLive_sf2_file","1250_SBLive_sf2","1250_SoundBlasterOld_sf2","1251_Aspirin_sf2_file","1251_FluidR3_GM_sf2_file","1251_GeneralUserGS_sf2_file","1252_Aspirin_sf2_file","1252_FluidR3_GM_sf2_file","1252_GeneralUserGS_sf2_file","1253_Aspirin_sf2_file","1253_GeneralUserGS_sf2_file","1254_Aspirin_sf2_file","1254_GeneralUserGS_sf2_file","1255_Aspirin_sf2_file","1255_GeneralUserGS_sf2_file","1256_Aspirin_sf2_file","1256_GeneralUserGS_sf2_file","1257_Aspirin_sf2_file","1257_GeneralUserGS_sf2_file","1258_Aspirin_sf2_file","1258_GeneralUserGS_sf2_file","1259_GeneralUserGS_sf2_file","1260_Aspirin_sf2_file","1260_Chaos_sf2_file","1260_FluidR3_GM_sf2_file","1260_GeneralUserGS_sf2_file","1260_JCLive_sf2_file","1260_SBLive_sf2","1260_SoundBlasterOld_sf2","1261_Aspirin_sf2_file","1261_GeneralUserGS_sf2_file","1262_Aspirin_sf2_file","1262_GeneralUserGS_sf2_file","1263_Aspirin_sf2_file","1263_GeneralUserGS_sf2_file","1264_Aspirin_sf2_file","1264_GeneralUserGS_sf2_file","1265_Aspirin_sf2_file","1265_GeneralUserGS_sf2_file","1270_Aspirin_sf2_file","1270_Chaos_sf2_file","1270_FluidR3_GM_sf2_file","1270_GeneralUserGS_sf2_file","1270_JCLive_sf2_file","1270_SBLive_sf2","1270_SoundBlasterOld_sf2","1271_Aspirin_sf2_file","1271_GeneralUserGS_sf2_file","1272_Aspirin_sf2_file","1272_GeneralUserGS_sf2_file","1273_GeneralUserGS_sf2_file","1274_GeneralUserGS_sf2_file"]),this.instrumentKeyArray},this.instrumentInfo=function(n){var e=this.instrumentKeys()[n],i=1*e.substr(0,3);return{variable:"_tone_"+e,url:"https://surikov.github.io/webaudiofontdata/sound/"+e+".js",title:this.instrumentTitles()[i]}},this.findInstrument=function(n){this.choosenInfos||(this.choosenInfos=[[1,2],[2,14],[3,25],[4,37],[5,48],[6,58],[7,70],[8,83],[9,91],[10,99],[11,107],[12,118],[13,127],[14,136],[15,144],[16,152],[17,164],[18,170],[19,183],[20,194],[21,205],[22,215],[23,228],[24,241],[25,254],[26,263],[27,277],[28,296],[29,308],[30,319],[31,350],[32,356],[33,369],[34,379],[35,385],[36,399],[37,403],[38,412],[39,421],[40,438],[41,452],[42,461],[43,467],[44,477],[45,488],[46,493],[47,501],[48,511],[49,518],[50,547]]);for(var e=0;e<this.instrumentKeys().length;e++)if(n==1*this.instrumentKeys()[e].substring(0,3))return e;return console.log("program",n,"not found"),0},this.drumTitles=function(){if(!this.drumNamesArray){var n=[];n[35]="Bass Drum 2",n[36]="Bass Drum 1",n[37]="Side Stick/Rimshot",n[38]="Snare Drum 1",n[39]="Hand Clap",n[40]="Snare Drum 2",n[41]="Low Tom 2",n[42]="Closed Hi-hat",n[43]="Low Tom 1",n[44]="Pedal Hi-hat",n[45]="Mid Tom 2",n[46]="Open Hi-hat",n[47]="Mid Tom 1",n[48]="High Tom 2",n[49]="Crash Cymbal 1",n[50]="High Tom 1",n[51]="Ride Cymbal 1",n[52]="Chinese Cymbal",n[53]="Ride Bell",n[54]="Tambourine",n[55]="Splash Cymbal",n[56]="Cowbell",n[57]="Crash Cymbal 2",n[58]="Vibra Slap",n[59]="Ride Cymbal 2",n[60]="High Bongo",n[61]="Low Bongo",n[62]="Mute High Conga",n[63]="Open High Conga",n[64]="Low Conga",n[65]="High Timbale",n[66]="Low Timbale",n[67]="High Agogo",n[68]="Low Agogo",n[69]="Cabasa",n[70]="Maracas",n[71]="Short Whistle",n[72]="Long Whistle",n[73]="Short Guiro",n[74]="Long Guiro",n[75]="Claves",n[76]="High Wood Block",n[77]="Low Wood Block",n[78]="Mute Cuica",n[79]="Open Cuica",n[80]="Mute Triangle",n[81]="Open Triangle",this.drumNamesArray=n}return this.drumNamesArray},this.drumKeys=function(){return this.drumKeyArray||(this.drumKeyArray=["35_0_Chaos_sf2_file","35_12_JCLive_sf2_file","35_16_JCLive_sf2_file","35_18_JCLive_sf2_file","35_4_Chaos_sf2_file","36_0_SBLive_sf2","36_12_JCLive_sf2_file","36_16_JCLive_sf2_file","36_18_JCLive_sf2_file","36_4_Chaos_sf2_file","37_0_SBLive_sf2","37_12_JCLive_sf2_file","37_16_JCLive_sf2_file","37_18_JCLive_sf2_file","37_4_Chaos_sf2_file","38_0_SBLive_sf2","38_12_JCLive_sf2_file","38_16_JCLive_sf2_file","38_18_JCLive_sf2_file","38_4_Chaos_sf2_file","39_0_SBLive_sf2","39_12_JCLive_sf2_file","39_16_JCLive_sf2_file","39_18_JCLive_sf2_file","39_4_Chaos_sf2_file","40_0_SBLive_sf2","40_12_JCLive_sf2_file","40_16_JCLive_sf2_file","40_18_JCLive_sf2_file","40_4_Chaos_sf2_file","41_0_SBLive_sf2","41_12_JCLive_sf2_file","41_16_JCLive_sf2_file","41_18_JCLive_sf2_file","41_4_Chaos_sf2_file","42_0_SBLive_sf2","42_12_JCLive_sf2_file","42_16_JCLive_sf2_file","42_18_JCLive_sf2_file","42_4_Chaos_sf2_file","43_0_SBLive_sf2","43_12_JCLive_sf2_file","43_16_JCLive_sf2_file","43_18_JCLive_sf2_file","43_4_Chaos_sf2_file","44_0_SBLive_sf2","44_12_JCLive_sf2_file","44_16_JCLive_sf2_file","44_18_JCLive_sf2_file","44_4_Chaos_sf2_file","45_0_SBLive_sf2","45_12_JCLive_sf2_file","45_16_JCLive_sf2_file","45_18_JCLive_sf2_file","45_4_Chaos_sf2_file","46_0_SBLive_sf2","46_12_JCLive_sf2_file","46_16_JCLive_sf2_file","46_18_JCLive_sf2_file","46_4_Chaos_sf2_file","47_0_SBLive_sf2","47_12_JCLive_sf2_file","47_16_JCLive_sf2_file","47_18_JCLive_sf2_file","47_4_Chaos_sf2_file","48_0_SBLive_sf2","48_12_JCLive_sf2_file","48_16_JCLive_sf2_file","48_18_JCLive_sf2_file","48_4_Chaos_sf2_file","49_0_SBLive_sf2","49_12_JCLive_sf2_file","49_16_JCLive_sf2_file","49_18_JCLive_sf2_file","49_4_Chaos_sf2_file","50_0_SBLive_sf2","50_12_JCLive_sf2_file","50_16_JCLive_sf2_file","50_18_JCLive_sf2_file","50_4_Chaos_sf2_file","51_0_SBLive_sf2","51_12_JCLive_sf2_file","51_16_JCLive_sf2_file","51_18_JCLive_sf2_file","51_4_Chaos_sf2_file","52_0_SBLive_sf2","52_12_JCLive_sf2_file","52_16_JCLive_sf2_file","52_18_JCLive_sf2_file","52_4_Chaos_sf2_file","53_0_SBLive_sf2","53_12_JCLive_sf2_file","53_16_JCLive_sf2_file","53_18_JCLive_sf2_file","53_4_Chaos_sf2_file","54_0_SBLive_sf2","54_12_JCLive_sf2_file","54_16_JCLive_sf2_file","54_18_JCLive_sf2_file","54_4_Chaos_sf2_file","55_0_SBLive_sf2","55_12_JCLive_sf2_file","55_16_JCLive_sf2_file","55_18_JCLive_sf2_file","55_4_Chaos_sf2_file","56_0_SBLive_sf2","56_12_JCLive_sf2_file","56_16_JCLive_sf2_file","56_18_JCLive_sf2_file","56_4_Chaos_sf2_file","57_0_SBLive_sf2","57_12_JCLive_sf2_file","57_16_JCLive_sf2_file","57_18_JCLive_sf2_file","57_4_Chaos_sf2_file","58_0_SBLive_sf2","58_12_JCLive_sf2_file","58_16_JCLive_sf2_file","58_18_JCLive_sf2_file","58_4_Chaos_sf2_file","59_0_SBLive_sf2","59_12_JCLive_sf2_file","59_16_JCLive_sf2_file","59_18_JCLive_sf2_file","59_4_Chaos_sf2_file","60_0_SBLive_sf2","60_12_JCLive_sf2_file","60_16_JCLive_sf2_file","60_18_JCLive_sf2_file","60_4_Chaos_sf2_file","61_0_SBLive_sf2","61_12_JCLive_sf2_file","61_16_JCLive_sf2_file","61_18_JCLive_sf2_file","61_4_Chaos_sf2_file","62_0_SBLive_sf2","62_12_JCLive_sf2_file","62_16_JCLive_sf2_file","62_18_JCLive_sf2_file","62_4_Chaos_sf2_file","63_0_SBLive_sf2","63_12_JCLive_sf2_file","63_16_JCLive_sf2_file","63_18_JCLive_sf2_file","63_4_Chaos_sf2_file","64_0_SBLive_sf2","64_12_JCLive_sf2_file","64_16_JCLive_sf2_file","64_18_JCLive_sf2_file","64_4_Chaos_sf2_file","65_0_SBLive_sf2","65_12_JCLive_sf2_file","65_16_JCLive_sf2_file","65_18_JCLive_sf2_file","65_4_Chaos_sf2_file","66_0_SBLive_sf2","66_12_JCLive_sf2_file","66_16_JCLive_sf2_file","66_18_JCLive_sf2_file","66_4_Chaos_sf2_file","67_0_SBLive_sf2","67_12_JCLive_sf2_file","67_16_JCLive_sf2_file","67_18_JCLive_sf2_file","67_4_Chaos_sf2_file","68_0_SBLive_sf2","68_12_JCLive_sf2_file","68_16_JCLive_sf2_file","68_18_JCLive_sf2_file","68_4_Chaos_sf2_file","69_0_SBLive_sf2","69_12_JCLive_sf2_file","69_16_JCLive_sf2_file","69_18_JCLive_sf2_file","69_4_Chaos_sf2_file","70_0_SBLive_sf2","70_12_JCLive_sf2_file","70_16_JCLive_sf2_file","70_18_JCLive_sf2_file","70_4_Chaos_sf2_file","71_0_SBLive_sf2","71_12_JCLive_sf2_file","71_16_JCLive_sf2_file","71_18_JCLive_sf2_file","71_4_Chaos_sf2_file","72_0_SBLive_sf2","72_12_JCLive_sf2_file","72_16_JCLive_sf2_file","72_18_JCLive_sf2_file","72_4_Chaos_sf2_file","73_0_SBLive_sf2","73_12_JCLive_sf2_file","73_16_JCLive_sf2_file","73_18_JCLive_sf2_file","73_4_Chaos_sf2_file","74_0_SBLive_sf2","74_12_JCLive_sf2_file","74_16_JCLive_sf2_file","74_18_JCLive_sf2_file","74_4_Chaos_sf2_file","75_0_SBLive_sf2","75_12_JCLive_sf2_file","75_16_JCLive_sf2_file","75_18_JCLive_sf2_file","75_4_Chaos_sf2_file","76_0_SBLive_sf2","76_12_JCLive_sf2_file","76_16_JCLive_sf2_file","76_18_JCLive_sf2_file","76_4_Chaos_sf2_file","77_0_SBLive_sf2","77_12_JCLive_sf2_file","77_16_JCLive_sf2_file","77_18_JCLive_sf2_file","77_4_Chaos_sf2_file","78_0_SBLive_sf2","78_12_JCLive_sf2_file","78_16_JCLive_sf2_file","78_18_JCLive_sf2_file","78_4_Chaos_sf2_file","79_0_SBLive_sf2","79_12_JCLive_sf2_file","79_16_JCLive_sf2_file","79_18_JCLive_sf2_file","79_4_Chaos_sf2_file","80_0_SBLive_sf2","80_12_JCLive_sf2_file","80_16_JCLive_sf2_file","80_18_JCLive_sf2_file","80_4_Chaos_sf2_file","81_0_SBLive_sf2","81_12_JCLive_sf2_file","81_16_JCLive_sf2_file","81_18_JCLive_sf2_file","81_4_Chaos_sf2_file"]),this.drumKeyArray},this.drumInfo=function(n){var e=this.drumKeys()[n],i=1*e.substr(0,2);return{variable:"_drum_"+e,url:"https://surikov.github.io/webaudiofontdata/sound/128"+e+".js",pitch:i,title:this.drumTitles()[i]}},this.findDrum=function(n){for(var e=0;e<this.drumKeys().length;e++)if(n==1*this.drumKeys()[e].substring(0,2))return e;return 0},this}typeof D1=="object"&&D1.exports&&(D1.exports=H7);typeof window<"u"&&(window.WebAudioFontLoader=H7)});var J7=et((NPe,I1)=>{"use strict";console.log("WebAudioFont Channel v1.06 GPL3");function X7(t){return this.audioContext=t,this.bandEqualizer=function(n,e){var i=this.audioContext.createBiquadFilter();return i.frequency.setTargetAtTime(e,0,1e-4),i.type="peaking",i.gain.setTargetAtTime(0,0,1e-4),i.Q.setTargetAtTime(1,0,1e-4),n.connect(i),i},this.input=t.createGain(),this.band32=this.bandEqualizer(this.input,32),this.band64=this.bandEqualizer(this.band32,64),this.band128=this.bandEqualizer(this.band64,128),this.band256=this.bandEqualizer(this.band128,256),this.band512=this.bandEqualizer(this.band256,512),this.band1k=this.bandEqualizer(this.band512,1024),this.band2k=this.bandEqualizer(this.band1k,2048),this.band4k=this.bandEqualizer(this.band2k,4096),this.band8k=this.bandEqualizer(this.band4k,8192),this.band16k=this.bandEqualizer(this.band8k,16384),this.output=t.createGain(),this.band16k.connect(this.output),this}typeof I1=="object"&&I1.exports&&(I1.exports=X7);typeof window<"u"&&(window.WebAudioFontChannel=X7)});var $7=et((VPe,O1)=>{"use strict";console.log("WebAudioFont Reverberator/Compressor v1.17 GPL3");function Q7(t){var n=this;this.audioContext=t,this.output=t.createGain(),this.input=this.audioContext.createBiquadFilter(),this.compressor=t.createDynamicsCompressor(),this.compressorWet=t.createGain(),this.compressorDry=t.createGain(),this.convolver=null,this.convolverInput=t.createGain(),this.dry=t.createGain(),this.wet=t.createGain(),this.input.type="lowpass",this.input.frequency.setTargetAtTime(18e3,0,1e-4),this.compressorWet.gain.setTargetAtTime(1,0,1e-4),this.compressorDry.gain.setTargetAtTime(0,0,1e-4);var e=-35,i=35,r=8,s=.02,a=.1;this.compressor.threshold.setValueAtTime(e,1e-4),this.compressor.knee.setValueAtTime(i,1e-4),this.compressor.ratio.setValueAtTime(r,1e-4),this.compressor.attack.setValueAtTime(s,1e-4),this.compressor.release.setValueAtTime(a,1e-4),this.dry.gain.setTargetAtTime(.6,0,1e-4),this.wet.gain.setTargetAtTime(.4,0,1e-4),this.input.connect(this.compressorDry),this.compressorDry.connect(this.convolverInput),this.input.connect(this.compressorWet),this.compressorWet.connect(this.compressor),this.compressor.connect(this.convolverInput),this.convolverInput.connect(this.dry),this.dry.connect(this.output),this.convolverInput.connect(this.wet);var l="//uQZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAABEAABwpgADBwsLDxISFhoaHiEhJSkpLTAwNDg4PEBDQ0dLS09SUlZaWl5hYWVpaW1wcHR4eHyAg4OHi4uPkpKWmpqeoaGlqamtsLC0uLi8wMPDx8vLz9LS1tra3uHh5enp7fDw9Pj4/P8AAAA5TEFNRTMuOTlyAaoAAAAAAAAAABSAJAakTgAAgAAAcKbsxJsOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQZAAAA2dJS0UMwAAt4AgdoIgAk1mNc/j0ABjDACR3ACACkAAAAX0TrnHAwMDAxbuBhBDLPTu0yBAgQAAAABBC77RERF3d3d3cR//EQTT3xH/8QYQIEI8RERERF2ene/2QIRH/smAAggQIECBBC7PJkyZNO4jP/3sgQQz3fgmTB/ygIAgD5//z638HwfB8P6wSba2gVAkg+UISjnSgflw+uIAQ//h/4P///BD/B//BD///lwfB8H4Pg+H5QEHQJMHQFIGMGMPBYMxULDajyWWA98l3EgFJQsWtLCYHI/LYry5k4DJ4NyjQHGmhGEACgghURgaiogHEBGEaOIwRCJmIoeg2PdCBMH+4oKoRPGeO0EIRDx10jitDKJFncRhznJBBBcEB201J6PVMf0lc/e7p8PKLBkW/2IjGCmt+L2JodbFLjR///0/90QUZJqvd5ZKLF6gw5cRkCgWgQUSgUAUNhBEBEEAR7W7L4qKee/7/TSj12/FtD//lLq//6lsATfqd/R//kv/6RVXEhAAAAAAxP2MVw9g6BYSGDNKJKnMR//uSZAsCA/o0Wuc9gAAsAAjN4IgAkTT9Z4wwzci4AGM0EIgC5hGEuDwNJzHWENh1S+qjMjtHJNKBIgQyXA8KyCvs849b2WVjq+6+78NdfVo1x2rfmrtndajli+/a12Imp2tb1Yteb31j6zkADCZUocA4OndwPkw6tATVGnlgd6AEBlV7q7Tq1xs9DR1aJRXLQ5BAkSA4/KoEsCemSYpf7P/9W6depQY/sfrvXT7P///ijl0zakMGyIioAABAAFtVWgXrka2CEq7WCW2dO4yxxWuv5GPjJrcMDMSjMOC4niMx8UlYoPHgjjxdBwe1JYVnT9ljj1jAvpTstWQlyon1TnaFRaDsgSGJnKdzdbrkUUckcfMOropml5r9koqs853K6/2dpiFEbXt95Wt2BUuNHJMIXxJrnew/jbRxNl38sr31cSUtklEkkoZBISUsEEeC+1Bati36e13/FSao3+1P/7b+v+3//19CUrEYUW1zUCcggwEQAAAAAAAZDSCNhwAWStQZfTuJKrkYrTcUrWgTAsYVNMAyKCRRCHxouEIMPqRITP/7kmQYggQFQtp56RviLQ2YYQAj6A7xcWunpG9IugAjdBCJuth9eOm9jFSbST3tk2tkkZotYIcXjBIUhPxFquCAdgIQOiAwFBSn6Ry4ZUazQjViy9eGzqxUiAH3I7yn9ORQSinc4OVff39/5OfT33bGffPoQfl///z/nWP0MGnoS5n5kiH3P///18//i523XpDIW9WhsgEFWFK6BDUEJIMUQABAABUxml8ISeWiFtY9BroaTJqShBPhBLxwUicTCttwwJhk0wZKPFjA8YEzV+HVdSmrtwQXS+RgII2qkDaVCu8XEuCooHhRZOx8UUWTvVZbuc4V13uSQuLlN0sbP8qdh+cYnYVDPil87lSuR9XnYPvZpXycblKLLYI7JbGiUKXJLM3XCzRTtQ5Xt/tcvrb5ec/3/3fQ/vc7Zq/+SqFzkxC6GCgQRaAAAAAAAAC6ZwiCbFsCRjdPw9S8F9MFWF7NGM/RqGrKLRrUdSI1oJhQskiDCF59osRh6TKI++W1NiDaTdybE67w/ZRu4LVp2LRSNzvj64mV+vSevU4aHkGVuHH/+5JkLYYDwTBaaek0UCugCN0EIm6O8SNnp5hXANE2YnQQCsizCRhUwRg8Wiolp0pYyYc7fUpZCHCFABsNLqGCllFtsAkltRJQXIKePR6HNWTxpAY1z/SowC4a9tX9n/v/9eln//3dvoUyNyBDEEgAOrgJeJgLoN0eY8EMLFCCFpzRFMCPfGGXgwlk6EIukkKfvmuCpokSeC/UwUeiTCcssHvJKYs0CJzRQU2Iczn8ySre0MZpYm2EFoctZRu93Rr8jIrTOZt0ttVVRPUmkna86OOWLNJMZ0qe5Cy7gfcil6o81NoGoGAtuAzIAHI/z/5zmX6//2T/7/+lv/evf/rr/9f3//////7pddrIiarIppXZFVBJEFGGRcSASQQAAAXOuxfD4RJLCxn0bpcnR6nojI7SlFhSPWdNN6IUCAnIDTbTOxkRZxIiRSJ2dWFIkIcuqqFoQgLYINabOqqQvlchYUZzIJfjJwkVLoVI0mU+Wc6pIX1+h+H9vPekFJV7AmbX1hEWcSWAWx7Wl1hwNKootGgllFYRKCrvKMToQlyoxf7v//uSZESCg7JK2unmHEAoIBjdBCIAj9kpY6wwscC2teJ0EApZ7f//Zv9NOm39Stjrkf/+jelUxafAEABIAAADmmVxZdZgI5yuUu1TTjqyp93+kbww9LYxAj4vsue9w5DdWP5qtbFJfKq84SpDKyP2+ePkJtfjiG1AhKrFeCOOaLoa6zWYLbXapoFzz5wu/Goo4f7af1VqpSkBBtEje7rQmr3u3+16xUScWWsOvFAXIlNKDRaL024v9QAgAGZAA///8v/6fp7a+9f//1/9V//T//////9P095kVmQ5LI2pHBEIkMpxil2EogAkAAAF7xSBEpDUlEX4Ww6GQhhpHbKbjIftHBkVkNXPEg4K6hlpFE0SZeSHUQlPb2TXhK4lXUTZA5rRSpJnn7GhkapTJYRR/n7vv5wtlyM7/jMi9X9p/3lNMyzDNUSJJASmr4o9w76CROqQSQRtuUIEgIXaofXpRtXz3z//TUR/++mX/Xqiq+z//9tvIGyGdGCdDB5KkwIsAAqUn5dh6zTShOTYIQFwS9KIM1EpqagHE5tQsVZROYKoi//7kmReAuNgSdrp5hywKsAIvQQibo18kWenpG2AxLZhQACn2JxSDSGJE+di2OqeMOtOozWUcGOq0umKIZyHQNgoDxkSNeoEAaIgEJkmBk6I4YApLiMABsJ6qFDxjQcRCB0JupTklK5L31dPdfNylfbX3MiJmnRCyLPuzpy0f//yn/X9f1PK9S9xdeVuUtSG8dVG6TRpFHisMWpbqYAEEAAAAAEqeAFUYSFJwAYL4Hs8i3xzuI22opUlgKBOxUXIamFCzqCFgTQ0c42ZIAmJ05gi1Z5Jy9J2saT0o7UxQyorZOjMw024vyBEFgiXBgwHUEZWYPQIm6IAsfMAadOjD4tkVqoFGftHtAFAFFFoiAAH5f5/5/3/v/2//p/9P/9/6/1/X+/7d/////9192fUXbemQ6mYE6ECqSIYfgAAAKmdiumKEeMgxAwiWDu2fBMCpNWG1Dm2Fyc8VAwOzMhAHjAZcP6uRkDBExIdRQZWZQ4ZYhz2PXnS+NXCZdtGR4SIkFmgTEIpoKFyGjmTpJDhEi5QLBpe1whiUBIeLDCFSA86pDn/+5JkgwLzXifY6elEsDLteI0EAsBNwN9jR6RvgL014UAAo9no+PXaTiRcP/8vZ86WQskbBOS9RazO6B//1+zn9vX8JR8tXJiJUQ58jEcwZDKqCIQSTicIhzCRVQAAACpXpGjHCEG+Os1BcEChAgNxwn441Z0U4XVDeRNTSJBdwBTRLMJgndsLnKxGe/5o3Vdw2UdCJyp8Ol7QzKfc+JmufvlfvD7SLQ3ORPmf8ciLQtDE1Md3FbhmSVvy/9c/9zgYmIM0QaowA2wowDIAE+vz16/1/y//9f/1//f/Wq6/on//v/////0r1UjK16O5EodhERFypEkQKQwxUSIIACnWwTkGMQYvZXAYhYDTuTiQWAvhmJqdhiMqsTsj1huzriNFfCeTgYmBktVQYndws7D3lAptDKzG31lurkvdhitcK6TPZWBumim+KKkm9NmZpEs9NVBLR5at1sWQpXhO30fWhC21ezWZLNQVqxX/vNbp6aSI9Cu1UfqjMPvSRfZNXXm//7dP2ds/ecfD7c7JffJaD6N6J945RAo18w0KTGWAAAEA//uSZKQC41xb2lHmHCQ1bYidBAXCDgWFZUeYVNDKteFAARvZAAABvMxbxHQUAJtHhIU+OUZo6h1KYhaPaWlXpBD0c2u2ZVrlXVb1RHfMqZUjCiG4/WJdP2PMEkWTE5qaI6wIkkhZzknVbJoybcO9TjnVnoyl+czMK183M7IVHc23bxZoYUBxJlgkcUSLhISo/+epZWXU9w5Uf/o6zKu+OA3sq5ST2LZH6//zZb5695L2y2jduavUsYnfsLMtT2U9tBx6eYAgAAABTlWA7DOQoCcBesBKBBx6yxFAkDYMxhJwvH6oniCTx2QqHo1LyxKg8LBGLwkKl5AO/cgtuwOF1yiVpmk9G6+ijijETSl1XzXmTwJrZGou9j9sTiRpmHC9NSHCoCaXCZUvH2pe707OWIqK08p+PxtqLxEQALXkvPWVKv69a//1//T//k/6cn///32///////6U/Zx1doZ9lBs4tHFLEMGKwAAAAAApyyRFJqJlvMiXD6GiGbZ2sW2WrScZ54YbSFuW7DPhRCdn9icWB3qOBgRl8KoTkq1f8vKiDf/7kmTBAgOjPNhp5hYwL42oUAAm9g4IwV+nsM8AzTTidBALAfFDzxydGnp6gkKSQOLtjl8ycZ2lGzyc4ZGdX+Mza/ddJL1ml7+YzN/rVimnNZm3d8X3KrfvwZcbFapwBWGjJ2upaAIiSRljH/z//7KG/WZ7hYIMrJzI2ZS30Wi//////z99T38tX+U6uQ2Di4Qc8y4IGUUckefYGukEgBAAAEpzEozOlLeHX3Umjy/rMo2IZWHUYHofnVAVquZLELywqifBl8f1lpsgagQJmgvI2B1pWQF0bZUPMEqxCmA/SjXJqW6esSUdJYQfQEZtfUpDFFbpnM41EIZKgUDFIBGkG1OXfXic24JixyoLcJCgXajYYVkAjL7nXl6+v9n//p/9On/20/p1///p/3//+//9v//ecuStKMZmZTqoKU6ugMqagAEAAAAp1eI6VRd+2pqHozwSzd7VSvS3dtaZfq62TtnpPK4S6RUNebJz5QeIvMSMrJJxCZcb7WGWULkT5281aFdq7oVj1FlAJREJi0hAgTwyI9klY9csIHDo5ISw5m3/+5Jk3AAEC0xXUww0NDDtmGAAJugOTRFnrDBpkM+2InQQCwC2fjcY6xYzp5wGsqSWDSTyVgwSH/CoUYYbOEMRH/yoGAABB/P//9f/0nZUpr0v669N1IjI9CUSzn8rI79E///erVNuj2mY6PcSYe4Ys5hxQ4OHiBVDokIggsOQC4CUFTHBER4sBQ43gzETOFA0Q1il0kmVYk9FRIkiwShxQesI1BYzYYClDjNDVE6zWG7Po8DUHRb5dMkoXEcaywWPmg7BWXz8sgbTFF5GTnxIKxoORmuaJJbHyhiyyoerUu3K7h/GuuVaQ4zGcZ7D1/iBqGKDtfMFCX6EUqdLwbsu8gBEOKjiI9StJVBdbqPkmhEQRhwOCRogEZcjvuv1wlR/kdfL//+P675fz/vX//Of//638/7//6//ZUd+tnalCIdVdbiTRgeugAAAAAAGZaKpzg828FmsaNdTII7oRJOqQSo1hbLQRd7mhF8VivXFl8tNYC8aQltXbPVMIBfGfgZnCdbWn5h9Tt+WVOfUIJkPzKC8JbAnqzwmgwlc2ZF5q92y//uSZO6CA+1E11MMG+Q8LZhoBAVuEkjtUEyweNDbNKK0EIr7ZhxIVVnEQQ9AHJ2JIAhoFEKN5/IiIRhQGBCGToxpkWAhhAcJipyM9QXWAEDmZ784Lvlnek1dokkjbbbdYIBBSjzpPTrLJIk/3L/myLM//r/r9v/+v///vb+Siev7dNE7fquiN3ZK2ua1jUSqwQMeGaAFKXwsNB8CjJdJ9oByKQoICFSGIlpMvIzlgbmKKKFP/GnXjbUlb2vM0ayzmHmIL8guZX/DF0exgLyQUStQvxtNEpG4e6VCtWx+mZNeZTPlJxPDZASWl321kPpYnG9dee1Ia/kFKUzQXCIWJ2cCBNKy3qmYhW0B0aVJA+FjI6JSrwV2/qU1b+2OD7CSmlDHT0RD0V9XSqbWVEV1BrRMioiutzrqz3b/0f///3H9T8d977/buczzn5EuSR2nyGB6KVRHUmXVgAAAAAAFxUgXLMwgmjEI5OKkKGBl72ZJmLZTkWenumGpo0CFR1o7W3FYvDENQh2Hj65MVaTOwPCYrJHVZG/cVjMMygwuNpRPnv/7kmTsBuSGL9RTDDYQOY2YnQQC4JHNA1LsMHcQ1jYhQAEb2LYAocm4VKR0aDSjTPYBiKv3bmSgRhG5BrhNj23a8UWfComDbiAjf50WNBA4wUY6gVKsUJGEvyj6336wCaYSMvDj1WjDSiyS1oEAlnEPLJsP9rmU9E57UqFw47pdb+3//v/////7GFXIQ+aHQ4AZlOkqjlOcQ/SQqMYSAMESgEgzIdM8FRQSYTqJkVg2YQ8nwpQXeUwS7YGjRF36Wa7SvXASORyXU4UreF3FGWtNdaZD8SA6ERaXmJqJhXJw8D2Bclh+W0Q8C8mCU8fQEomolsTxBoVIUxiW2T04JZpC9VLpI6mGOJh0KE8c2xmIjMokwZeE0hasulKYKgEocYbQA+3WrpsKvNElHmCqyZAABA5f//+v//2VP/337pv/r20//X///7rezPa7Em2h0d0RGKY0UOJU6qggkgAAAnZUrO9pfIRdEnl2kHEu0JRbZ0U0mCpbrCuvFm8h91FxwKrBDjhNadytBiA6bgN/4Yh983pjktZK+tK/loVkJMK0YhH/+5Jk444kVzHU0yk2FCqAGO0EIgCT2PNKbLB4wLI14iAQCqM5UoRh84PjxrVyLNJ5rmcakxqFLmUlU1GxmDMrVfGCT/49yNip9q6c5/qLJhYoIrxwXqNt0+l9QvbQoej8+///kRl/IcDK8wbR1YSxORjWRoIAJAP/6//2//avdPWj/yPpf/6f///2v86yIeWjEN3Di3BlZAxH6CSdjoIgGd7QEOawRwTm6yX/MhQBMLHSVSONtBWwDEJIPwFgDDAS2pmiIAmpJyCzLY36ZYiskUgHTWakW7aDHU5GGpaO9ASXzVY6zcAqMGJNLovEtepHAGwjp1ApHc5GgkeSCZxwtKypy8qjcnXbeOo/L0VrMLmY18N7VqPERkPIHjvUrl0bhaJdMqnq9JW7d6Mlrv9m/+9F0uj0MiHYed2N7sNBuvl/+1tf/91699LG2vp/t///911TRmTU6OdlRHdkIHRzlnI4bMAm9VUAAAKVG8HKTBkCYEZFGYu8SEwVBBBEQDwNDfRIgmCDx2XlAWBi9ayS8SDzpMxUpWFWm1qOKHrxU2a0//uSZOIO9Lpl1BsJHjYqLYhyAEbqVBWDSGywuMictqHAARvgRAErkJi52IM9guWuSHBXYZJD0qh1tYq/r7NAlUBu2/E3x1XfVzbj8nXTIiYTRUwdMMuQFrhKuRD1JCVz8+V8pk5hHmNV0F5YIkS2PzeRXWkrej5sCiphAqWp39Uo8iFAiguSdaAno928OMRmH6SB8GwrZLaIJbdGCEFrUF0J2bcZWZcO7f09DjDd3/9gz//1z2tv//29i7RYs8swARzGa0Y+YFhF7gFMOjBYaMoOmoIICdLpLToSggRrIKVhh/wsCxBAaCjGn4M7U6TfflaLpF5FLVDkl4QoI9cug6V5yVrjyT0vUWlL+v7FwxBRaWLEIDTtxNFLI7RNFxdexqmjXI4lZuX4UBUdHBjBlWLb2xEBggUFCsaQxYUsz+sZM4l6FraHzJJ0/FC4J+7/+SW1L+0sDpMIP+t//9///581/+X5f3////+7NaqO5nGaRZiujwTBHDCDhA1RAAL7Q4UbCpgCBR0x4ToIIBzgfF6ACCPShgIAHCAgAAkWF03yBP/7kmTcD8VfRNEbTDcQKUAI7QAiAJMdI0YMsHqAkzUiBACLo4KDLGVwL2QHM8lSNqCVXKQy9XZaitFLdC5Whsy0o5Jnne9lldl8bcCfiODivyzmB4ZeCuvqOMsft9ZTnABCIC4oWKidEUFQjWGypxViZtx0nMLFCWklHFnYcDdUF0bOmZN8es7ORIRbAyGhE+QNQiAOEf//l12HRbR1+Rf/P/OZlqfM5t2gdr87///xcPWX7t3isSOQL+NDFEBxUGxSiIjC3FEAurMe4WyYKUa6wBr5UAmtGm4EiZkXLmFSBGkSfLzHQAYiYcKP7IzSRHpRZ8tYFBQx4t2DYUBQYmISx0GojYZozKQKAzoMFXkrslBW2jQ86RDuTae6q76uk1RiTbSCVtcpIJpJG5ywECqSIpHJhkTiUQVgnjCXTiAehUgiUnSPqyUWFprMrtqSnTbF0VZ2msOuMX62Tq8kGZVYgFUvnY1CXCcCe7/+7d6VA4RAQ0O4/0ZBCcexdB82oV2+3u/o6f6GpUz/d//7///pit5lgDUoiHxQOAIoGIAAAAD/+5Jk0Y4E8ULREykfECitmGAAI/YVTPE+LWWN0LeAYvwAiAB2OkgYbQQaSYWmOMQNSDEC9mRQVTKDGwNQMDIgCAAeLBYfBrJV4NZT7T0aap0qdaKCsIikmdxx16SJ/31VTZpTrQWDn3KGZVMU4irBgKbltWuRk0S9EMomR0dkk6MtdSrGrw7t3Dylz9DYSwWUXZucftvc6vHIZWpwjz/1EwxBCkjE8drOmf4MiAxZawV+ir/aW3PLNTKHJLJJLGCUHovclVDRwqtCZDcY3K+uLI3dv//0vf162pxcls/o/6mO5hUbDz0gy1sxcwNZFTZgEHcJwMiYuzmkh44kGQnJhiUJGBoZUBR0wEKMkASgQNZEBZgPWVHAaICK47AUTy4gjgEKdVw0HgMAumhezREttBwKPsDspnU9IrlSx5iClDJ17K6UjTTGb+Oi3ReURburcmM5rQcVEIVbcICE+2oRD5A8mVCi5EBhGAYjQiNkfNojieOLv2UWWXTlKdUodCSCDQWS4Wo4hy3//8p1lq9f/7//3+vqVefUok8N4fPP//////uSZMEGxMtI0TtMHjAuAAjNBCJulQjpPE3hL4CotiHAAJuh+3/b/s+PDP9eLx8zKnaicYy4V7KOoOql1ZpQAAAqNMjzMk+RKC1rgXYJQdkUcJ9LpNnUoj7QFYAQFYpDFzEmgyJM9MDICe/vVNWkcympcxL2dmYPVN5oI7ytd30pyoQNfGDAFADQ0xRs/RY6aujjeW8S/5X/dwMOBf9xKgEG1burIexzX//XsgZrv1O2/+zV/Zpo//60ijF2pD4sBARQRGA3R4QIfABsHHzV2DeEDUh0/DBAA6WDnY8MTyIACLYhIPuXRUqsAoostUquyoHjatrIVdOUie5ceVsaW67xmy45EgIBUH6U3NwzcfWOHRODYoH/mROK3JXjpCsAZD0m6CSWBRyinMWKILA+Lok7oU6eGvt7dP3jazt+zuEc3E80+jM8Nv9+W7ekUjmnUIfRpf/Z8SMIoANBP/n/+Z/+U/nq76kXL8/79r//5fPx4OVORswkGCgqMoXRQEPzqgAAAo11hcMGIDNvDOBAeXBisy00XNGeAAowwKAEyBCRUP/7kmSzAsLtNdjR5hPMKwAYvQAiABKlJURtMNaAmbXiCACPqUjDRMdiLIyq2KsVpYeXYSOXWhEsCXDBiKwjA1mu8j6+xb6QwXCUs2DLycUdwbmZgBQIwWISC2dnYKs4U0RdlEVG2SohLXCo3iA2xNUVkpQWOL21y1Ix1rRL5msefdpl4cvsD5EuyhBxKjYsgsKFkM/+rQ7Q/Qr8pT6aBkWsvGHrj87znc5/D///8///re+/+5bbW05h9QfGE182mQCyxoM6mgyAdQkhQgM0VDC4ArFjSRFH00cxOEMwpgHkFgFK1ZZaW8bcRAFtBotPtfCANQVBmCV/LsSYUrGi2Lg4UWKLjM9UuAVEgd5phzqZJJw9UycbOoUIqwnoSgjJDVCxt56Hk7U8N9HR+0vBkeyK5cq1Vq1cqxWwnWoHkmh0YqQ3F7NqsTttYoZUSKQuIwaQNTRWwtqdckAqf8///Ii2vW2Wx2S0IkoEHILtCdz6TKStdqYxEx//0f6dPR/yVn1J71//7Nq1AuqWk0UAAAyN9iE9K4BfHqqDzDPGMkkLmgD/+5Jkz44EuDTQG1licC2NmGAAJvYTQNE+TeXnwKyAI3QAibopB8zjwcKnshWLAjxTdkpVsy+spckiOhqwqLF4HnWaqBTJ/ISps77+warS0BvnvaG/9tW0ojVlcaidxu4Wh5Z4zcJK9uTpkwQhYsYTY4KGZLukx5g5iF56/+HUyauaU9xhWk/KOLBAmtGK71Hv7///SAQJNKBRJJLGEQAOtr6ilFNarhVSNnT0XbnlphP/iK0zMDYtFu3/////MUrZcA0gKOUCAPICYOCDgS8LjxkSQHNxgQiFRI5dT9Qyl4nQyOHrBCU1WJBZLQQKUHCet10VQoQGjQ9ZEtwxDQEixUVURJGj2vS49S/2is2AoGAoE8tIAeB+IRIaEcqFophKbmRvdS+62Xiw2z/lZDhOktG3EdfxGyw9BFdaBDZANxZoWVw6MAizBM8O/v/f//+fDSXySSuSCyFQEWeCiLsx5Ize+5RN31Hj///b/6GxSi/Qqn/7v5/sTJCgiAxYqKgkAAL3GIS4aNMQyMKvA1BNU1JAwz8uwbAmcMoiIBjyPYNE//uSZMmOJD81UJssNhAsgBjdACIAkgC/Pm3hicC2AGLsEIgCFAESFGDCJlswSbQPROTuXMAQ6Tb3sDQgCwNp7oLMVUY6oAqk86mbE4Zbi3IOx4BUigiNCM2JhOD0hHQhk0t+hFcSggVKYVE2Jx8w6U3zw3ZL58ki0tZC1VGr/XmvBA+Nl9KP5KbqdMEHzW1gao9H6P/1m/FlvCNFEjDDjYEjQIIYOpZJFXXr/pSuv+VK++//VRQIkzw4x0/+lP/+JEwRWB73kxw8CnwYPA6TgANTOE5jYvD0LwNmN3pNxGA0UUYgLYb1EIBA84MynByUg0TKJTlyB6YPODUtMTKbE3VE4oMCDtiQTCz0X0VqVBOjnFH3RMmGHOG0xWx427O9NU9JDKqsleaXtZbAtd577gr8fWFvVCCaH1Tsxs9R4qnpglPTy50Va2fNuiXMfkEz3vRBIJgI0CJFDDAegsWvr/h/6P/lFu2FXIHjj6v//X0RcbkXMYT0vge/+n////8/kNJtcyPKUipKZ1FAYJwgg1wMG0uAAAAAC1uaBoKEmmAHTP/7kmTPhuTLPU8TTB4wMqAYnQAiAJO4zTrtYY3AnLYhwACL0UmTmrEMPDDugMDGYQAk6mKPBCoaVUBQELrhCwpUY1GEhZha6mI4dVhCsBETvyTyd5gyQbD2PvaoBLnsW09+1MgVHkxE8FR0CoDrw0ryi0G4jiSMqloRkiwcUJDLZgsevzhn0S1ovLpR3vWH83rLbSz81ivAABY4gnnRMwqVa5TotdlH//57Z1ZyNHuSsMQSCQSBoAAIqoLibHOW3aP2f9H7LUen+nvq2/////3vSMDgbBAFSwuHA4ZOjwFUwcQNghUehkZgMb9YdGGdpS1MRpDRgjUpRUmOoRgKYMmZYcYMQDD6V6bBZVOAFAV6F1hEBbdbheKKNfSIagGAkd3jS6X3DCKzGX1XfJ84PcdYi3ZYqaClHX8LYUrV4/jokA4VNJ7K4DzbaZDRqzeB1YiYMn6PqsSHjqxna6jvyDmIpCqdXXZkW6ojdzJX/2/5v////2+1rTatx6EiWSSWiSxEFBRhwosjHNKCAb9LeLafzm3/V//xm4U/UA9NHtUv/5T/+5JkxgYE1DTOy1hjwC2AGK0AIgCTrZc4bTBagLWAYzQAiAJQy8cVChapMCAjBxgwSVM+KDKWM2+cNNFjIGQzpoALGLxA+I3yTRaJBwzAgLHSRI05AAUCGAERgZgYoqb6h5e8s2WfESwGqVQEF4JUBUQNITtEAI0gy9L1QxEZ0gSgfi4BvFsH0b4gakhlEcA9Iug5ohKTkQtGG+eQhKEPEqaB8OaOgnDBU8Q8GVWq9UMj9aULudSM7yV5W75mgS4bnuvS9PumsQlic+AYYatDqU///yvrqrXgskKsGOEgskkjFiRCCLbCT7WvIVFGftYn0lYX/cHe82hDfV0q//Vuuze3+heyXdtOFz6DKYRFQAJLk0UPQCp0gApexxFprlSJaxDbBBkUMSNz2KPCYAEAoqTGG+TkpJQi5siGzDAGcclSUYxpHRo4xEsoRWFphbHKeksNeqfa/3Xri0iPNkym5G/bHETD/YfKeXTBk4lwQHlBCx5toVuFDxz/Lv//5xLT4hA/Hww2A0JCGo/QjZ1KP7//9vsQn9v8nodV9339P/+c//uSZLuABZQ6TAN5enAvgBjNACIAjrDdUUwkztCuACK0EIm4bsBEuokRNh8EhcoMAAAVpFARiFRh9pkS4BAAvGAugQdMOcKist+gFMoRT3eFbwNDF4EnxCF2XsXOgeNAgqHLrs7WKpu2ixG2YKrlD5i79OCw1czDkupNPxWJv68bxudRQA/1NAMih183Ai8npIjM24+UegORckRJDl9G1xrGIEYNOz3N9oRXWAkNH133a8t/gwTlu0zOngnkCOjf//hXr/Z9TaSJyYglFkFgFiRBCL2yKhVWlTUN/s/uv93Pc5H/6P/9f///7WJWYegesFAdoABKcblCwg8ZM9mqKpfVtodL1tTXq1566Re7FoUzSzBDxS14pDQgikwiOGixpGQjCMsNTj1fTdPXM86EFGDEE6P6cYcznQzec0s9z1i4OLclcMZgsJgMRsEQsxj2rOOFlDjZ/iwp/+e/d9NTTCAjbRhdJbdWkUGiMhdg459tYgID0uVfW76bv0f4t7nVOa7+r//2//q6iyJlgAAAAABWJshjkmMEL5D/Qk+N5GeMav/7kmS5BATUUs6bRhcgKIAI3QAiAI3cvUrsJNKQp4Aj9BCIAhYhjWCA1Ica5KlLBy1SWLpurGHPa+9igzXS5qfznqYx9dzyvVPs3ZOEp0JbAAuriCLymYF94tjgsXJCIfJCYSjoaH2ZizTrbW7DE7q0UpNU1OKrnVA6JiwVSgsdBdHEDBYNGxULVzx3dS/5V/rXp/TFgoJt/+MP9uBACglRxt1FTaL06rf/+1H//+3/0a03I/2a1ZbUlYnUDZ1aiI5ThgEITsMGABqIzl403o6HEmgBF0zocnBgIcasCGTRkyyxFYHIyyKnKtBEJJAYQQdYtwpsWgTVXooGxRgiwaKA6DcNdkAqbKHKBrcXhJocbtAm5TAkmXs2F8neNjEF6kcqrztohoBYLahHV07+L38izgIZCgjRQCEcDO1thSOrurfJmqjrcKNc5jEOn8wX1/q/WvR7HBmupBIDjcf3cARAkbiy3WqtVaoVu///0f2o7f7kM/X7v/+xDfYgAWDVj0AYIEFAABKTkdVDsImAUYkQ4mRrFoJ/rIT2VI7zAIfYD1j/+5JkygYETCzPUyxNkCugGK0EIgAS3R82bTBaQKcAYvQAiAAGxicFoQlwNmKD6MFpfPzPz84WnkT71WscWHC6zcLjjVOct0WPrEC+4IIVh8tW+u6Q0sPFXWQrvsLWI1J+LjbmTRBOGU6ovopUP/VnzcSoeLKsEgAckEYbQJBVHtkULFnaBy7f/1IctTwEH6q0GBhV3/92DCN97Wf//ta7edMwGJzCBseAAyqZhcobXgY9waVODGwFJGXciImDCo9UCgQBdQXVkWIRrOIAkqABZCE5N5TSXKqMOTnS9U5aMX7gZG1U8COkDMxHkSgvD0DqMnYvLg4HpXROD+X3FSU9MFwdHMKQS6OUrV3dib7OYWVg+Os1ZgqbAgw686gkEcnWfcQaHcDnfr/9vu+AFBljHtvS0YAHJAFiH/uqXbR//1////+aR/R//7bMxYA1MNGGA4oRFQAGBACZKkmhkpmwIcEHmHDpkQaa+EBBkNAZhpUDgBppualIl8CGuQB0FIkuQdUuOHEItsuLWLFTxWe2iv1gC4ShbJk6FwraUHdvkPO0//uQZM4Ek4Az0rsMG3QyIBi9ACIAkYi5OE1hi0CCgCM0EIgCsm1In+pOrPl0sgKYFYccH2QcDqQVKLE7CApBFNfIVVTmhw3Gn7uI4bv/qntKSHgUDSQyt4haLoCktaop7v+Af3eZcx7WMDqg0O0gt0sgurSSBhS9bCTVIJtTb6+piKrcSL9vfb/MaKEpfaKGdlDav///+vdsHhIjEY0RmuNhgxYZUcD8CbCqGIghmLaYWPGEmJhAWA+wOCdoZsxl9hIA1mVvDBSEtAevIKHmeIFBQKeqBAPTMoYKrySvA2F1RIFjr3s4V4rEqu3Ku4LftmgFY0TkTSjUDR02TTFcMxCOWkInnrLEUnPNNwroYGrPMpodfrWl2UCEmfrFLDorQFJg2duxX/6P9jeHktPNcKNNvOnW2aiyQWXBpFB7DTUmNytRnVnskij/4XYj1+tKtJoCxB/s8x///7KqCYqKtm0qARIkEAxlw+ZcsHE3ZolUZKhg7BNLEM0NAcJwMhMLxAqIKilEyEBlIlz0ATmDQ6jIjFSPRYElWDq6ehaHYJ4A//uSZOUOBLQyzRN4SvAsYBj9BCIAk2i9Mk3li8CxAGO0AIgCggWC7uwLxGRPQbjUcisKp85nczTkEQxmdm4qS2MLM6cnB5dmOplZGKK4PtYzLBf71re30PPzittwiYLiYCggKBZZUWulmhEYbxOv//an5PfIcRgJ4GFDrAE2sQSSRt2IgAMaitKgkToW6y/Zvv9rh4+noa3Yv/5z/////qwMwukaRcxqEtGAAvVKZAAQa2IoaIQJvXZoQoqMC4YGBCYaHDYQiUMAU+U+XKBQJH521TrzbEuiH37Uba+zNpTdos9zQYbYyDEE1x2YEYhsFCBEbJWnxIVxnp+6j+NqDK9xshzNDHSkg4QOBROpkVY7mdalrOqU834X4s3FDJc3YiiQ++T1s9D6lnU1MWRUFLBJJbJLYiQgdTUoYIUoTG7nqOjjDTDa/6/7f0f+N//pJOs96l3f6JDgFqjoRNUVAAdH+MVcDH08z4PI0Y3vCMqFjGywwgIMFSjHxJcphB6IAVLUEtCuyKqPpuM6KcLjl6lmgZikC7oCiu4sOJQMrDlJSP/7kmTejgTGL0yLeXnkLcAYvQAiAJCQ/TptMHaAuYAjdBCJurFZ+gQkEFMmZo/kBz7o8cGGLLElgKR5HnhuAZmBYEdq7Xic/Ny00mYgI0+qxCjSLWW0e04hRvyHf78bvv7/w3f/67N9Sem4ESbgTEZkzW9fv0k/s6TgEWoi0yphI+AABAAACAT/+v0////e1v//T16f9ft+v///9dq7tIj0KRFcoIFW7iWZyGUoMVQMDMTWkjWoDZNDaSjgMSXcYIKJejk7zBgi2ZlAgCDhgUQCENBwUs8FLVOG/iKuhwUkWgKS3TLQcIQq1XMCBKdgQSUQEQNWFhzBYw9zowQ6rsXKefjsJgl12DMooIXH4hEolEnQlUqvZMaWKk4zCPxK+na1yfusYnefcp6u0rKVNlvq3vV2ZXWidf/ev//0kT/2T9nRNEKuNzjQzgGAAwGoAZAI3ff7O////Xr9bf/U///t//+6gVFyoNoAgMCQIhNQLAALREIcZm+nmxWHdfmjMHeYpBm1KGnHPuFDIOQgwEYwAXSibDBUSBQKzS+kpQbAoEr/+5Jk4I4FAz7ME3gzcC3NiIwEAm4TYZkwTSRcSJsAYrQAiADCCMGvpPsGAVwp4JzILtUUehmTqqNjVCyJu0tigXDyblREWAYjqnHQeScVDuyqIqGaK5p7zqRyy/nL57si7CpSBRkEiy7LIjPqld0XTq8o7XiYfb/U/91ifQkbGRd6HuU0DlQALy1wUQCSwIlBgVC7z93R9e7maPcIms/tsIak63/1673fntTan55X+zKvjWUoOgyEElQhKVQUDRRY4er2ZFGLimvGoRGJZGVClCgFFCpR8ZgYEKLMpBzSVsbKoAxyQqEkrC7q1GMKCJOpyOPFJY7dEiolS7iRrjNcl0rtvdnTyZ+nMid2hAEEFoICoUQHjA4NQ8+ReeOKSJoXsiRMptbPNREcSlvaw/7xfV7oLD2GX0exgOir8u7p/V+r9DFLUBFB1IxAAmoulEtmgcNZCrFWdaHm5i7Td/R/////Z/RG1dtdf/5fFVJFDBeqAB7CETJQoBXZoaCY9CGaLwGcRQXBR6Z8ZmPDxlYYYiBLkMSH0fC3AOEkOZKNKrOQ//uSZNeOFK9BzJNMLiAwAAjNBCJukl0FMm1hC8CYACO0EIgCGAjDEhmjrLSIdhijvkIEWqVgdROBHJoLN4pA2MItwyAcnC8dFRierPSFwqtEZOdC5GesL8OHrntD35x+uWd1U7ZxmKuTWe11mYNx3OaUK7o9S3vIxedP24xvuQcpGOqO/+dyL5uHRyptckrEklkrSJICi0hipLFVRjzazaR6H2/9v099Ld0Yjv354d9r93//7dcjc2MYksAxdZEHAqKiNqMVZzt4A3ZAN6rjQhkRHpno2JCo6RBcQAQDAqioIFxYYEjJKpStO0vgja5QGDZA1lLdlS5xgDUYQ3dB03HfVLdW1Uq3U1nofQvC0KlsScaSuSycIhcIwjLlJ6jEo9LlFh0mbn3qsz/2hLDCsNdIYZchnPIpSsMaZ5bfM6tyGn6LmlNOfu0vy/53/b0rSdEnZLNdC1WQikMYp1QjDSjYBA5AxIIiSgtGbr1fTzTv+1P1/1++hVVJNtX+mxesMf/u/A7wyBSJQNmkhioDiqHmXJplpuYdHn6np3iaa0MGXv/7kmTXDgTLRcwTbBYwMCAYzQAiAJSBsS5NsLiIrwBjNBCIAiwXSSoBt+VBowcdMRAS7rlAfAVs3oEE/ZcwraIRKUsRBSUfy9SN6/FMF4q3qlaS49BAzMo4ydxbFZ5o7YhmDIjWdqGG7Pfdgh7ZuU2KaZpZm2MJAo6IcIbUOgwsxS6nZ1ru7Nzfrqi9tXN3+d5dJHmYv3eQn7f7/ZUflMys8rq+c8qqIQIKCgmSTWSSwZokoGwbe5zl5O0RKt+JBT/f7f9H+3zSDFv9P///7orny4WWEtAASl+saUhgX8KtTz4EKCFRBOJwINVvbAy1tmaxqLraoqSJxRDooc0RxkCpZgwiRvEVIEGYyMNJUeEEySlxE7RXtE1EqXlVJfCtxKWvm375k9tf19escovRU8SWwJMQeLEBgqwJtSlN5ljqWPWtvhPDGPEaQsLIsUJBHJZYKJJbEiECWRkLZ47WpYqxeypzur0O9HRuOtPCm7/6f6ysf39dP6O+SWNWaJrKsJEKABk38liBRcUv8aGpmrQC6UOaFU6zddrtPzGWjMZb9nH/+5JkyQgE4GjLi3gTcikAGN0EIgCPVNNBTCTQwMeAYzQQiAILomiwkNijhWKwybPo1901rl7a6BqjPYcEUcMQ5Nx8IKYQjBGRVIh0KQ5STm1v3M7ppKjH2o5MUXRJlQHYERlbaxX7wRrbs/9Zf/2e3XV/ZA+gzeP+ee/lx9sfrOpTBYXqs6Nfv//+/7N91u7xrs7R5/j6jXlqQoWHG08WBOGY3QAFLWmqmLDmPemYZnGVihAuSmgYoGioocxNkIwEX+0prcGzCnnbpWfQHDXrUgyIZkeBE8PJUNFyROdCWroeMPMqVufTKgsAAY0FnLAPHKNwUZ83B0UG8qurAv7hIjHFJnJU0JB3gFrDpkmFnC9TpS/7lmP3rhmFQkgBJcho564eACHgHb8CklALJfualG6zVHf/66Uf/etX67Go/q39P+z84hI4cVcVLkLBQUcGKmjmCDJ4KoaAOmqa55hEZMmmojRgUaBl0AkplJCADoYFQgeRqJQEcAjUUSq+RpEgJGuRAvozxK4t8+o4BhgoFmb7s9QrVOIANXTXRpjUped4//uSZM8MA59k0BsJFDIsLZhgACb2D9jtOG0wcsC6ACL8EIm4WvsUkT6Muk1LATtv1A0nhbC36h+bgGDKKMybKR5XqvNZSS9/ax7h1M/aJz7p5/cyKSQ6agyvHV//OuOTr5Tf/8j+l/e8hZEf10X/v1cqI0npQj9OqbQDGNgAOgAGOa2WgSiy2NEoAUeginsUrx2haUif/QW6E7tKGWnvb/Y30+4dAqLN9SP/ye4m5SjQuMAH5GGBR8H8E0hiXALIwDA+I4Wi9YhRBRwqwMnKwjghYRQDsamncW8YgLSH6exrjsoOp7swV21xUsud5lpk4FQaHpP8tD4/CdnCxcOy5auQABLImSk6Ope2f2VP95qZWHkJgVHd/3+Sdk//u2N8VBYYYEqRUm06CI+sCuuaj0XFh96OO6o0Rw/MA8gWQ4QCiASQVu+t6/o2vF3+O/0a2rU/ezTUyx6uZTk1e30rWz/o/btc12LFiCQ0s+H6AgDB5gpkdfTmjh50EAawdoBTVRExMzMBLhpQCwRTmEDCggjEjMQUKCAgDisGWjQGAAKtyP/7kmTnDBVybEoDeBvyMEAI3QQiAJGY5zBMsNZAuQBjdACIAmjI1yovowwwh9FUXkUF4w4pMTHwPegqiQQF56FCwYXqRRwPSO6ciRQfHlkdso7GwvhzmnPYz4lcdEatHJmdjEJKzUTTIUhzomlqupae5bPfV1I/9js+9/+mXR5aKSjoXqjXcIzOc4Ncglv/0+3eiLVP9KKr6Omv+ns////9EstPWRlZ0c6HQikHKBJMFAnrgZPWGAAU4klwOaMyG8AHgneocZh5rLNl46UmS0xgrytxdlgzeJWtUtSBnsgaVkyxuLqy13YRPOHHIuqLGEAjYZK7FPI2nOfOmVTqBtCVSadwI3LxVQiPdzNXJIVbzOl0I9QDKhMGig94VV7jIrvXO2StLzP2oj1uVYkSrcxwWJIFUyCQQSMARAkh2LL08vXu//8x9H/61vRUi7fK6U56n//2101Km2rY1wHaGQBbRAcYocaIeYuuBqJ1Ux2CgtuFBJc8EARZGzoFMQYERTGQA0Dawmu/rAASBdOJSp205G9LSqVuxPOTQLUbs+L9uxH/+5Jk2QwE8GnKi2wVsikNWHAARvhPvM02bKR2gKiAYzQQiAL3K3biFA8jSIflo3RidIOR7Jz7/Ou43Xc32aC3SVENa1bMjr2Q0rIZuR89FvlJ0nO5urVp/6Inv/antq9GV7yS3RdJGnnGXWaSCySWIkoMa0mKpuoOUFp4l03Nq/Z/d/u97vLLp23fsVV23GP/qmFIYozEw0uAMED6wjpjzZFRMwbLCICxONMPTNSNMaQM2QQ8TPIgheotqFgYcWQ5vBHWfppInJWtRbmMAmGt5A6m7S0uXzPR3HRMFKRwTVJ+J4cDyWBFhXMxkinRIV8Kt0S5RyqQK6nFXMroZGJ31qz7O6qfZ2W+7mM3fu61ZlV3R1RVV69/7XvnvujX7LUrWaqM5mKpiZpHmF8rGBvA5JI5HBEACExSknT7jj1qkmv3mGf7+3m6CH//69n/3V/6P0dD5JZA4BWtOrDdACUBGKAlLMcXzURYykYM0HTkQUws5EOZgqnaeNjJzglMLkFD4VFBSJf4WNacNAJfF84sstliHsaa89q02oS9lEGvCqdW//uSZOCMBExsTBNGFiAtwBjNBCIAkt2zKg0wVoC2AGL0EIgCKgqJzagdC8vuhOWLq6i5CSEI/dVMtRRQXlpj25pWef+bx0OaPOYIRMPBlhpx4mdEe1gfSWBICOOyof+v6Dj2Fm2pS9Twea8OhAsMLBccsVEkEgkEkkDCJAVa+xzqSDeLDu7/9n/+z6tFv3/////rqBBt5xY5AsMANAAEhj2YY/jGejxl8YChIZVDITEzsmMjGgYAwKMixUA1UkcREDjwkXuEgpiQJBICctM8L4VQUrQZKEpwOstDDE1JESwUpGtA+FS+ZVM5sqkfHvZwZMO3sVhfVtHxK6FMVHIU07UKqvYqZSv1a5CMXK70/OCSqWzhCLhtXsun//k962/1aHYepYIKZWIGKJcqwZxyQ5kUrICHlkgoYcFiJKBz42wuc19tjP16K1rMf1fq+Zsvdoruei9FaaSCNdKFFP7arUhTOS0y8moIBBTlsTuqogfY5bjp2FrXAR2BRSja7EvkM2BRKD4g/cKaA16H2kuxL43WiMon7JYcgChEhwAUYgEhMv/7kmThjgStK8sTeWHwJcAIzQQibpNVrypNvFMAxYBjNBCIAqFuU8otL2JNM1qhj5tYUvidtXXgYQnjm9shRpCZ8ofoghQmfXn5L7Uwz64leiBXcEm1SyioCPlPRa45Ws5OnBgQeAwBS8TEPDg8AHTgqUPOe9KOhyyv///2/6TvRZTpbVevuro2f1epVcUQmFVqgMsLJBggCgYLjJ7Fhy7AyUHVY8oBhQ0Z4uwIixIRHRit4QWHhKCcwRMWWtkgZrrTVBUT0Bg0xSiVDCFdE8YC5noVEadcnIarEnZGGVSzOSF1OuAu4zF9Sbb1+01/Ys+RWMghmmCEuxqu0jsVqP1W60erdW5zWd0c6PN1Vboq+rfR77U/3WrlsbhXrUk4chkVna5IsUQWwcbNYAIJHIKwSSHq6qETa4+ij5n9Sbf/9ldO5v9dfXz3//6qXxMLkSrTJl81AhE0x7oy+0LSzebTQKU+TEjTESxBBMeINiQXoAWJjhoNAjQICB1N2yMpMCAg1RN1l/GECg4E2jA1pO/DiJ2DUWIpgS9nC/GuvRP04hX/+5Jk3IQD/UjNuyYdMC9AGL4AIgASYa0qLTxTCKgAIzQQibqJois/EmUWI7URLGlI1jCpnuKG7UDzZ00J6hJfVtH/H9Vn6OkMqWdLe15WrdHX6x3+etK//ylZ98tP0b/jWyod3Bwy1BtLiC1Q2ICSjh8ttkkkssSJQYQEj1OYtqc+wVMCDuWv+//Ry17v+j9yv83CCv///apDWJJKPplAEEWkABQZSCY0ueycx1WUx48yKUw4syYkxodVEiDotqLlBa+vpqKOaANnymyTbv0qcK5XmWuwJu0MOGyYLwUI4rXRmDhkZa/r8XsPL8SPx0hh/XdhfU+Ttwisa+eYYnnntlbmhFpkqQl/yaT4XfyM5ZCYr/28/n/fz/OWc8t+GZ5/zpO7OpS0OTQAh4ZgAkkEDjjFYBJBAylsnVqRq2ff/2//+ive21tR7v2VX//Z61oW+xthprxMKhMEhqoVEDIhszkgMuegi/NIoQ5DMWFTLAdZQGJhkaMZIgsDpIoGqnTkSJLWAgEEACztS+CFNHFaM0trrKXJR7cRZjjOOpU6K7pp//uSZOWOBNdrygtJHhIsoAjdBCJukemrKk0wdoi1gCL0EIm6xIbwtU0bjNNUldmU5z9m3Q1LNTligt/4SZWZphKhinxpgEsjIb1SO0MSkSm8VTsytT84owE0cicHUngnb+8hZiPtpvoYyFYynKURCZ5wkOceZf13+9ZE8fO/xopo6XDNeS71/L5n+fn9laH7R3AiFYgB13Ko4wBAImElQKB8ACrGkFcjJ0HkQiOb2oIyszOguRXKyWfqdQ84SPkbV1EWIMjeRMFxHwl4HDQAySQGgBEwwVEpzDIoIVRJjTS7M8tqpEBEqxOD6lN67E0849bMmMjsEmRcAiIqLCIgGyRG0LkhI9b0A002cOCrtxdbUrMGC3it/0UJoWRc840KZMCgAcDjfcaMhj3dm7VqZq/7f6v6P9F33/qk0o330Vfs7mzb1pWfQWA4+gEAFSxMOWFEzvKNNEA4mY4ZpZMq6AWHEiy8wMCa+teLMIUDUWgp7lSQ/D8KiE9OUzpU0PQ/J5ffgZiriuvIIpYy6NLxRuJGh2nTNoRxGUTbfpFRLS+rq//7kmTiCATBbEoDYS9AK414YAAj9lAYpzLtYSPAoIBi9ACIAJ0HLx3VCmiDWPsUL1birGepbLtpp/b22pb8iu0vdWJdLTbsyO6K7GQ+WUquzkMxf/3/q7b0fMUKPRU9yIkQnGTWW2SyS6tFIEVsNuSopietVXAVpkA/6X1WejSP9n9Is5UoJ+mlLBL///+SeyZA0akCBBkYQCnUwIlO3OhwbBLqYGOA5aIiQEo4szqlMVg6ZmMLLbQxgQCJHMcC5SIyfA2Iy9YA5z1umuxwpWmGjEnwiDFlDojNuA+0+3C4y95aXszII70eeUB4hBEIpgONKxrVVmFMtb/TDF2ghoue9++oqP7f5ZIHzXGscUyrIy9Hpr9ieOE59fvVmho+unmenp/+mPqEYsq5FCTHERFNJLNexBsQDg7FR4wTJLJbLaESgQMNOLAT1eK6UatP+ZIO/700f9l/U/uT3S////rWLT6nLA49dQB5RKkAsjcySAobD8ehQAmCQxkwyAQmkzyOanSH1UDEi2DbOsmc6LDWHOvFmvKCl8JRVkjexVxXYhH/+5Jk6ohEuGLLuykWQjAACO0EIgCVNasiDeELyKcAI3QQiboruRN+LmGUuBZJA6SKJJMuP0HxDvWHQ6odv8+Gxx2Ixq1lS2Pbtnxuzr7U7yz4z7W5lSlFabnI7opkQqpduhVd6Eqejtov7pZT+5k05WIV0VzKQ7hJGiBp9JrrZLbQ0ig5zFC4fKAcinfJpVnkDK//641qV0p9BWVSpL2t16vFd713///nd+w9LVQAVqiJTFzSvjGITjJgQBATeulmO9WeVRCgUcS1Ka49aikq526r7eSKUUWkDfMmiTkvm/8/E8oZA+LYPo2UshPWmavsQFbkaPcZcNvRl1UbP+bObf29QO/yVvns869vc6180xCnUfAoYZQ4z7lWzuO/9dlYAUHvt4Z//c/Lfc/jaDDlFEu937rfgAfj8DNEoHIfWtfWOpR//o+r7Uf/q3Uf7P/9H1PEqi6owuTFzoCEYPoA0UUtMUcB4HKWJqjQI8QHHGWKKkgroeQgNOp027rkVsVieB93wWlEHHZOPAcIkMcrnA81FR8IhycoCgkROMsOUdbX//uSZNwEBJJrypNGLkIxYAjtBCJukOzDLM1hJ8imgGL0EIgAvTzPP/AxG1y2YiUekehwer6iRZE2cwW6EhIpIsTJpcoVR+9pYxRozVKSvLO9mi593I37YiCrMyucbOPnp/+90Inn160N1zGYQuVxDdSti0AW2wXRpFCDTe4VLhKeOWexdNzf1fo7+7Z/V0//s///8/r60gBsAJGmKGGoJgSKaAsIoq9DEk0BIOIsYSbS+RYQSLCl2FLoaZ5RQ/p0o5A8WU88cJdoGA1MVxBtHMPB8jWzmVEE8rYL2mxUJokKqOGfYpPrqNdnM1A70ic2qyw5NOoSk1CYoRE0UlieZ2pVnsGHeiKs+1T6Tf7Z+zNX7/9n8y+WxtH8ut5bGIF55vICJHM/DgoMkklrEEoaRJCSKxcrY/Sk9mNTn//T7W603Y7VXqjNCXbG/f///2kHocl8IGI5gIUICQMEAcM0KowdM5BAPPmGIEw4CDCZMYIu7KqaAJYFVZg0yiusPAK9hLF4LjoBBgfzEdB+IRYoRhEhWk8whSxIV3NWa1VfzhIo6v/7kmTgjASJY8sTLBzSJMAY/QAiAJJFryxNJHVIuoBjNBCIAq77kTOGNSAAmZHlCQYkC2KshfY4+WuWE7ZRwQMZiMn7XWUkGvnqeVe2llm//y/y9hq9+mZ+Tu5EZeiEUYnJMVcHC1TFiaJctRRbI7JLGiUG3UDyttyUp1WlNP+23uuo6FX/rb9X29hyu32f/7mJlHkIKFTIUClFG4X2BBZmlCIUEKj/4UDVavlYYtOvp9H4Umu54obmodpYw6NeM3ZqRdqUT9SiznnJaWgjtLEJbdpYJgOclJKqKCkFYPAZ87BGEn2E+qHxs0xBZJGEDEyp+c9NfnlpwVTFwjP8WvN5CHyXX4Dbd82WZsZpf2mT0iVNnPBQ4VvTY8v55l//PfRfY4HrcgR3EG+T/y/5/TI+9M+6PZ88mXn//////1tbZ7v9fttG7aEsf6V9VsZLzGGJ5xK1ARnQiGTFQsxcKMSgDBSkxg6AoQmYnCIQEACIVBhCAJyog1AsAW44y1r8DqKX3nPESowPioOBmSAfMAVaumQFb91FY3bMatlGl1dbeef/+5Jk5ADkjWxKk0wcQiwACN0EIgCSbaUy7Jh5QKY2YYAAm9jann7WZcla9dxdWH45DmHdFB012rRmBhW0FB2VImdmjiQJwrA9cNDQeE/PBjMZqesIj/zn3/1O5rGlkJjvMgTNHM2hM45AnIynDCU0rLAIBZBbWiUGvZV0lWql3+ZCZo2Y0a0Fqfds4qtpz3d33/0f6en/1HEY02FmG7RgAhALX90GJ+HZJoIURA2yjil6wqwzDIWNIrPgoA6diErLCGcE5aYQxHpvcLGWRu0SkRgFDHlEYC6G09zk2oC4F/5ZIne+2lnZR6+nEdIm9ln+JrxWV2xA5i6PCBF4GCLTyyyCqUg6TSZaVGC1zG41T3cJzNhgDjZQuUJvBTnrZJLJJJo0Cgmn2C4xA64hsZ0opgYwNR6Ur3XmWd3a3/sjVVf19Fv2/ye2j1uZAClAjIB9lSRjrgqMZEbstdPgH+YKVhSsQcYQyNNdoLVnauOlp8YOmc4npy+yqymD/ZLzIjZ4SrDkFoIVRUuYkikPKMNGmR82YQSOlsXYqLmvbM1UAp6k//uSZOWABM1qyotsHNIvABjdACIAj7zdNSwwywC9AGN0EIgC0lUjacovxmeed4tGUI7ElEipDa8JKpQSgrt583qNRh9ccylfd0mcRyzQkO7miK0jubGCn6pn/P76XavkVQUshhGiszlLrZZZRLo0SQFiaT6ijEAxYNA/oU/C6dn3+pgApceJ30/3f/Z//1/6vcL3tip5CViFAIyUs37w5vcraBYyHGzHnDAjUHUEzrCwxifHBQSoexxL1qbI5+H6cxiH48Kp0P/NB0TkhKwnQrVJQSJFxYyD2k0jFcegaWnLGhNaye2YfKJ3Q4w3DRseoPh+lt27yfePZVw022+O9RvqN0rI/qpq9tvnnGq871/5qm7a2et/pn1v4/8PC93n72Ke8zfRRCU2NLvT2Z8A6FyACBiCQNEEh6e2r29tXPf+7da539X+y3ucQe1Kv/9/36gA0y8JvPRHFVFSCggAAKBTBxwNbNWSMG4B5o1g04YFOJTBDmW8QEIagoSgiXw0dPNSxrEOQHTMkdyUK3SOIyqIQFK43FXTnJiHpfLn3qzwKP/7kmTpgATMZ0zLCR16LoAI3QQibpM1sSYNMNKIrwAi9BCJuuLUiDn5NDOxU5FWi76u7oDvSYv5jc2E4ezmK2meE4PoiO9Y4yC2bZHE0YdUWrdzld0ZkzE6pdbnpS+RTSFPoZ2ayoeaS1CxdziyoUSiIvEg/UKEChCDIAAAAoAFCAI////h/7f//v+nr/t6a/T/01//r+av///93ZaIzlS533rSYyxbOQGScBCMqo7YoTAzQ3Vw15wwrkFUQ5kospEx4sCm11lm0yoHRbVisJ0PbAsb46zxFU5qCIMhccM4iRMj65wX6AjQsS8VGuVo2lGyFOJOOtvYXPNE3guo1mHbXyCmXerm5Jx/8p0gYkeHA0G/d6m8DQzZhkbY+w4WaL6R/3H1kkn9JTjnxNM+/TLBuTc1IDYx5sEMgYvQhAPUELGlAAwG21AaAQb0eMov7Ef//7Pp/0/vbu/RX/pT9lGZSaUMGrQSAw4Ikz4LUmpKaXBlCnPWfipxKnCQaYKkkcEOIKOWutBt1D4HghQd95AC4h0DwSRsYD2ejWOcSZjx3cP/+5Jk4YAE22rJq0YuMDAtaJ0EApZTBbMozSRzgKGAYrQAiAD7l8/q3tFFb8hZK9uze9+s1er7LDsL8Pw7Z3JecrhildVV3Ea0Kp3U4s9rIxzNMjKu6Mt6diE912Jral2pVVavno2X+6e6g/jpODU5wSnDuit4S0ViSWtkEhsaRcmzqi2+WNMc9ez6SWYEMK/qt/2U/lWdf///R+0yeC4DAJpZAKGMIwM1zNIvCrkcBG7OFrwaGRKaOGCEYV2tSWBpnhiEGQS77ssWd6SSmWupJZU/0FutM0sUJgqIQSIFjkRMxB5jwWTbvl4oxmyZMy9VDQkNdw5KBgKjnKqmB3hQyuuHtsRSdnQwuFwlbgnELgwYs12pt7EZHfk5ys1baf+RndvzvQZFPVVsMjMUyxWEQGLshgwa+3G4AG4HgBQBJbT39dv//Wn8V///2bd3do//20402phYQpaYABNpUB0LAgBEDV5Aw41NBJjaissE8sCpMYOIFvgcIw4PEeKszscplxOiqxhcOo20L6za5lLrwUpTVkmu4JI6lleYXgXNKtaW//uSZNqOBENpyossFGIsoBjNACIAko2xKE0YdsihAGL0EIgAWwvWTgkRImKz7Tpzc4tRVzBS6xi6pRP4WaVCSG3rblX9rX35dx815f5bW+yz18N3Jb9u0lZ6d37/PTf41Vr//z8878eHgr4f/FNLQhslLcD+kzCOOPUsI0skLFsjkjAFgACEiYLtaSuShrf/X+1Nn/////+OUhzKkd//rPqWtpWH2F3vDC+TWqQn4bheFKpulYJiK9XEtoLghqIKDC95fpgD8pOmCAOPTustINILTIPpFltwyqlhQh/HVamgJSPt006BRjLBfSdkwQyFlmX1p42EU1Yncw0BMstnpE+9Lz1/nyHuZiHn7hXW/dz+/Zvv3KtmvMv9s+9v8+V/88s17Hj5v7T52H3u/T9WcrMNJIw+wx7oHqIr1QdyAGIYlYfJLJKIJbAiQCcLtJwCZypvgu+ee0/1e7/t3FQ9Yd/o7KDkrfb///7fMC7TpVQ4wImAEFAEDX0hjtP4aMDvGVkecKEtJlU6asDKnaanq2z/uApk8M1ELMsf+AJwoiTJoP/7kmTgjwTubEkDbDUiKmAIzQQibpNBryQNPNDIvoBjNACIAgxyzTiQwVckrah+vdIzN/OC/HKLJalrfA9HGMzQZFsR3ZR2Qv3+7/5zmxwM5m0cTB2rqPtL5anSTiyaE3Kt15/nv695/yXOn/lfnwfqFxAX2EiG5PiL0ejj/DX4doFB6Ka0X7ba7D9P/u/3S/bf//Z9Pb//R2dCBGUaZwgGw4D04gABgl/6mVhUkBunsQELj1YhXS3QoWkqq7S1oCpoi+EdaBR0919c/kcPstm8Ys9DZ9RGwI1Fj3VYbYtdp80+scTdNvYMvgvN9t4hdU0tyLLcC3ydT7XzLipP625mMscy7J0lzIiLPbaEhwuMmR5nOyXPh2nDzbeyfu0yPN/+EV17KjubOu9JAbF5QCgQAAj////v9/////rf//////3VmJRn0dbGKhCMjGBD9How0jMfKDGhkQhhveIhOIhoFW4cDlkwaSl1RY1RBGAhX6fjtFymkOgmCoJF1Y3bVtWdaZQ1iRwO79iahx2797cppZqWix4aiAYfZY8kj6NMJ2j/+5Bk1oDEL2pLYyYc4ipgCK0EIm4RQactLKR1SIW1YowQC5lNnYLInRG7WYjZVowaBlAeTNKZ91gL6jjF65xRWsX0CjTrJU7ZDl7l5rTdnRR/JtUG1jXuC77GnIdbbcNW67zSrWMbeZpC17m2uy83Z9XdMwtK2V2FmVLRgTiJ54wlCQmeJLAJJHa0SUIDegB9t7kKLUULbWp/6n+hH/Yrv603uhS1HpWU2X+t39SlINFloUTeeC4qQCgAJAjTqChI8INfNMMDBJQMKgIsn2WsLZI6teDgCaq02cQ4ziB2kvFWpeQQ3OZ4qPCotpM4REhOsQyHW1ZRv3JtZhZmf1qfOpRRZCGNZPIQWqUsURLJPRID3UTSe14ao5HpU5pqHOZjmYaexIr7qghkUjKfc79L2+Q3mrV0XpYToQmIIh9znO7aPQ0TYXl2AoxEBgAABcAEgCPX///8/f/T//3rt//9P/9P//1////+nSqLq66Kq6KzzqRoc7AxpRalB2zcKO8kwJAsge5xdwiOGAFZke0m00Uunfa48LWaFPSJ0UTdOEv/+5Jk5wAFj21Hg2ZmYDUACM0AIgCSIbEpLSSziLi2IrQQCtHNPUsLoK4ImIGopAEwiCg3eNpCkqeqcEJqSjBv1ElrFtOd3V7AN5s5uoZCKX3OewYkhEbUKJspzw+/uGf+OkEwnNGq1zz+SpeFn/Tsu5r3LPatxEZjcU0yqtBfBOVIGYWBggtwrW2Sx2CzRIkgwbQZQPtg6cY/ONvJPjRUtV7PTR+00139VEjxv+Y///8xXchxqFAgSCwULjjg0cJzBwVUYZFGNAphYI7SJgFAkB48BplQO3eIOc2r8vy5DB4fzCAUIZrbnCFczcfQxOLkSf4CWeL6J50PjybcNuRJPoF0Xe9DWtTKtOIx63pghd4cGIX7bvv5rqLTdpyX3JvCk2QNPhHmhFvSGX250et+RsM1RE3//WbG7kGd+X0++Pvi6aC2RTXCIeq01POzYecEC0S9/2/AEJKH41rmvnGqiv//+v+rv/Vk6P/Jf/17DVCjpi4sVeGRAKCAAAkF6gF0B2AcWDqQ6IOMTMM0KCANBiSRBstHAz8R7axF6NMTplLd//uSZNMMhGdsyZMmHUAvABjdACIAk4WzJA2w0oCpAGK0AIgAmZtrYirjLJbu3BkKlCt6CiUaCFuzeS99JG/l6QO9Hb9mxUhyVP/LOWXcnonPxWURu5chh+INpqOkpbLuxZ3XKh19IfkEDtGgG7C44u9+IUuhvUWyYodoNCAhFxUASncAw4/9mLUVPUtSKIy6G5ZWsXq8/DI0QgkFSBGNFmlBkUC8TYpFKCji5LLolku6Sqi6iDcXcTeaBhHGmk4f+M5X6qFX7ppJi7YhuRycNhj4FMrvxd8JwQtzgYDXUC3VEACvVQ636UPimhOj7/2ez+u61P///////0IEtpqAKaqfg+gbAiRJwkQiAigJwSMyRyG4ZRNoymH0YSmUkY6KxEW06ZKQMAWp8ippKIxciooJiT2EhOaUUUw09VMILFt2c67q2K6mHc9SjXGQYUGFB1Bww11E9zNTwZaTHzcmFD4gQprhpwG3ceTNLoF8+Mx9a0/+O+Q5/+vod/YDQYCyrWwzA+23/t4rySVNelj9dfbd/6v1a//Z+n////7dimPPXP/7kmTQgBbRbEoTWEzyH4AZTQACAZEM/zWHpRCImoAitBCJuPUSIgu0+GTdAAkAAHtL9okDdJrpioZCOXKaJBycqvX+emGnVazGn3l1HuNuVOZQK6VFlfa+wpsEcgxlq4sIKOoCOSYv4kRlDyzSk1ULWzTkytSsNSj0KJ6Tkmd1/JUTRGgSpA0hJeRmnEntGomk3LyVzYqz8NHDozDiRUapDJympCMimR2ZWOe2dzz8/yylnp777YtU1ZTPOGWcUwUNiCopZdNbaLAGgUDDiSYqlxqwsVd0hJyP//bSDSKtrq//6b3f6r7O3V/293k1FJOChCLCmIiaoAkXThWkDRF/AQEXjVpWMm1CHVft32KxWLwS+UDXa0FwDDdR6JPKJayN2nlooFA8S4YRIlfRICIDAkDopEW11OJNii9PnlxQkftAqhO/I/7I+hZguTTDEO8VrkUyJXRpRybaqaGEBAPGFKD2EpjiCJqYdQ5VE0Xlcc3PbZsQfTVp6ZmmmhNLl5LFiIGdDRUto48NsjFAyosOIjDEkAbckASAITGsT3ProQb/+5JkuwIEx2tKwykd0iwgGN0EIgCUPbEozKR3SK+AIvQQiboqcaq//6trr2FJ3///+vd/s/qbHqixAY8qIhQTpQgUHIBjHFXyd6xorEzwCxhhKRFddTlLQeuAqjdXQdunfmfl1x/oKlDnuur5rSKzXU+JZGBSbEio6HyhASwSFZSCOVrvmmrSytRRuUbuiOAo06KkydrtQ81DqNdiSbkxwho4dLBjGvSp7POvZRXa2IJGVbTpJi9jZdcouW5x2PN6+b3t2+/5bvn/+xN/tmvvj+8nxcLachm5cnXE75WZzWMEAa8u1FAkturRKDGCouxDddVZRg1LhbtG0ddx3sb/r/9HR/R+dm+v//ZR6gBJUAhJGVhsj4ihGkLrDApoEBF9gkEy4QhWeylQBOtz19NkbeUxvbtRWDX0gVprVpdE1bZ5qTcoLMqionhJs0KHyQuTJjwPIEsIHN1UWyyl0+pS1tOBplB8QGJkiGBGiStIq0CwMspwEJ8Dx7uytVbqyJKLINjmNFa6Li+1v21iFpo0vtfvm0HVMzlfpLxbNfEpaw/c//uSZLCB5RptSgspNcAowBj9BCIAlMGxJw0lFwCtNiGAAJvZ+iowxE5odbiaLh0OEUTIKIj/545h//L90wDAn/CUV+f//yP/89eW37Lw/+X9dmdoq6wvmFfZA1ZhDQjMFWtJWGHIYSA2zIU9C4QiBRmL4q9ZPLGmPw+E7qaeV0WvPBIpmpqOQtzIOYxLna00J4ESWteRymDEkwYs5FzVTpCRryzWjBl1432NWt6xbq0XxPVZUPwk588XEq64xWGq64ATPwHUCmN8hSclTWYcYHfnBl55fLD91fnYdDnPp90hruc3x++/db/P6zO6Feks/Q74i3zUb+XPobqKzxgy4QPwXlp3/l+YDYfT2x5TfI+RGpNFyx8+////06uqZXdBNIxjjxsokhA8RRp4mDXExTYMyDRxQsUZECiSIeMW7VeXyUglSQANlXcqgzluD1vnDE68vHLqwA8z+w8yhwYbhpkOTrxRGSDQuqwsbBM8eoiX1knpJcTOI4abDSRUPJogQvQs6DNa5JGEKSANpjUTZInBVMmzNpKsd8Oc/t9S5bwxnf/7kmSgiwUfbMkDLDXALQ1YYAAl9lQRtScMpNaAoYAjtBCIAgtml0OfHfcesYr5lu+N3x6v92qoef9/z7+/nXv/93rKxIvwwrXmKiJM3D4a+MKAlYJaJbKLaGiULxxe8T2VH+tjGsR0/9VyFM9Xf/f/f/f3p///r3thVLBZSOBAAmUisUkQG1Ql+xgKXnZinQhPTKfWJxR8J99evBlK68qnoJg1gMPMuZqu6Jw8/sNw2tm/J5mtCnJUPuDJKPKt0rlEGr285JtqB70ywQsYnJZO41OAfglMUj92ICjRIWq7kRDiD4Nm6Vt4H8LxiwqYPbm4ef5ve0NV+pevqPl5hFWG+e4//eOuKPqjRkDYmFNiFQ4YKjqu3J8KQUpLf//qDaXMl9J6hHnNSjk3eX///5fv//D7+js7rYn4mMnWJMezWULxCqk6kx6JJlwpva5qkZ0ThrBzjL6XhVQCpruHDs81txV3t9ejMAw/A/3ItGFfu2j7DCS7xOJQM0FxeCReSh6PHbPUjMTwjWYVGJbea1CubLIlKP8SR88u+PkKn9nOzRL/+5Jkko8E+WzJA0lGMCvNeGAAJvZU7a8iDTDXCMKAYzQQiALDy5ZY9YLcDdCgj4glzFmGuaELxIBxM0bzACd3l00uQzl1LlNELSR/WzP/vtmr+u2fN///xjDd/rDKjUK1NvF9zxiB1M484wK2gIgcqSSSyRySWNEAFaSU4+LPNN2ottG6bPxZCOKJrrUercxrqqL//////odU1lG+CxQoFyABAAKNCJSYg4WVDhRxiw8wUg5TG0VUfEQnEgqAbboy6DInOSthlI7U26rpPjA6izqyZWyKOQaJEQrUnIMcVGYrICWShhRBuSmKQPZIxVY0qzjh7TAWRubpvFMRIEcwZMHByCxsq1tvvm9893en+NKRNjz0WMLRbIZt+H1nxphv67bGw/ePL////7iM56zZ+7Si8h7THMknMJE5korckMNglO8ADgADAAEBB/X/60f///+r////Vo//t0JqYSaEmrWG3MDwYQVGAASUBwSKBLGIXGrFo0cXYjgkOt9QMdGDR0f5+oo3VQwK5Y2yrLom512VLAhr5lPFRqyRsYo7FmTr//uSZIAABQ1ryKtJNaQjIBi9ACIAE3mtJyy8y8i0gGM0AIgCMB5WF6TorKpCdNx0gwU0EzgiUEaKS3d3s6ZWyREqjW00iFrPdKfpqeL9sGIppZ2SszX3MvSSFnZGfflR22tNuSs+xX9Pe+i///n7//vD+96vy/z1NuGo4lpbOqXfQXCJEQS2RwC2AkgJrYaOhIbTs+Lhxp0II/KrDn/9f9N2/R99n///7mwIOuc9gImAxQhAAyEzqwwUgGhjLuxKgnO3R9kblPUrK1iNidOLtKZFNSx2aaMYdf28yWXMfEkVCAJgNmkN0YHFWI0hdRKrGKVZUq+UeY+02QiNcDipKSnfuRWy70okiDPyJEiklpTs7/W+NkevvI1Wf7MvmaSbXbG1v/8a+3Z++5Pfxf/8M8thr5Ph4/e8d9d8vZfvzhp+FYxeNYlAtLSY4ALgAAcf/4VkFBfvvk616f///p2/0//9///r7//X/p/Rf/////9200l5XzWaLzlirGCilIerh2mnOaWA2XExbEBQd53dZLKb0ef6CmNQXLobfKdrvu/0+//7kmR4AwTTaskrTDUiLo0IrQAiVlPVryIMpRZIqQAjdBCJuqzgNCbkr2qw2Ku+0JRARE5ahGhiSqDQnJ0Sx5w7VUOM0J7OTcYNryxtCq3jMoOVOaYx4tliMbIjupxJMnmsTx3cac8vY5rWYqJSa62YXmIHnN9900XfPE6/URxut086TEtLUwwuDLHQRRsDwgeoEUoeIp4iDBw6eSwWyCS0MkoOHofRa2vFCSdCqSL//+Nf+n9n9yK2/9P2Vf/6yciEGuBsUWLBjUaSiIKdWQWpB0uViQZxG0V2rDjaTqjHWSZHQXpfGBhgH2cykil80VzWpix7W1U3ukUsw5GdndMCcbFe5PtgEYFIvRkLSSGNh8w/4zxFnP/xJQ6MOooHlC5FUdfxnQ6v2flxEyQXjaVnxsKyktaGuWZml2+Pvfabdtis713+5k/fHvG+zuOW+fOVPLqyzCbkFICGJMmnoVkmrAAtAFklgRBHWdZ8OBdK0stnb2fUtpX//t173tYZ//2f//0V1RK2taSREFAOGMoswYS1ZqmDkiECQao2Ps69rjn/+5JkbgMU3mzIg08y8CnAGN0AIgCSGbEkrIzbSKeAIvQQibpQIrbDjBoHo4LsUP2J+hlUPxuG3RkT9OM48MymbwhverMqsV5fGM7NrmXvijMUwch1MoZmG3q6ldqGTTHNQIBQHCaoqZR0yh6rw8yuAyJ0XTNm+JlwoeRe2eXc8umcyj3/9Z225lDGyFW++lJZacmJ2aDEwVrnCc4dIy2QRyQSCJiEOuanHEgpqvQgb/0uV6Kf+P97LHM9C/////G3tnaSYEYOCSoAQoAYAIDZyHQRzmkwSHIqKVIzS9Rd11PP03wXouEcKhHWlY3Qzd1aIq8wKB8cDhUw4WCjTMMDglAqz1GCsIBG5BQm10nTZTG+VOjndvpZlPW7nhEDTB5IzcNbO2XNZJrtDiHZpZqdG0aTzMZtZjXxsn/39y/5yG+X3zfFf7mfw8dCc3Gv7585Cm+VhI1IMUGKLRlBnLgSPvv7uBwIgWOV1M7Pk/n//X+19//T//////q3//9f///r//rtZKP3ye0oJAkgQAZsis8IMjTfPlEmdRKQfbirc6Fx//uSZGyKBLdsSUMsM0IszUi9BALCUgWzJIyxDcC9AGM0EIgCkkNj4IiQ7EtS2uKTAqPIB+D4XJyeUC3fKQkPnWizXdbqcNP89i5ett0T9sl7jLWNV6GiAPeU/h56ofVvnKyTmarFtW7P8dNbRffNIczc6jbZp5u5hJpfmYquHqVr40uqWGm4HizdcjDqO6QsTskycMgh5IO6EMwYG2LfCSWARiVoEoDOpMRYIt64v+mxb/6fb//1V+pB+6urqZ2XdSRB/bci2Ri8TNDANhcBAASwVXGlgEOM2gICGACIgZAEnK1F8GpuJxkB5meIpKvlo0PjCe1eJJKiC0/ZWrYlC665DZo9qM0S06VEDefN3ys89G3HVNdUNarSqtsR4ZEaGHuttY1zXnaXG7QPzXNGijw09bIPHRG9NVXHF3S2THzHTTx6zT20zLWnJWK6nwe1d2LUUPex0EMcfnCCIIoAhAoJCiw5NOJf8fcYccAEFCTr0q/P/l/9f//1//7f///t/////N/01337q8royq6EitIpmHLBoh6xDYoo0dZwkWpq5v/7kmRqCwTLbEirTENyK60IvQQCxFKptSIMsQvAt4Bi9BCIAiq77r4DNCMQPhwbnRGMi9CWXTg1P6FQuVBcYD55SRpYzNo+MTmPDFawpqpyQmxbJOuiXOq89Ll1cvGqqv6C4kSVY3FkJi3f2uKUq9qx5mcyRFYzq4qP4S0i73Tnu+N5r54uZS/2trQlKiIhDLmLLG1Vj1QUthCFBJVTjR8sFxZx48PRHDs+ZJXLGxJGiQQaZh7wmxyO7uON6/9PZUlH96u9SFqR9X//+j1s0C2pxKpY0yWeCFUCAQJmlwz+mMYIxGBfYDIIUTCOaknaZNQxp0XLqBegycRkr8J3nQeGaNkAozqkRATKRm3hGxzh+Fw6ii3FWw+4PZan2erda4b4WVTeHMx1VXNVWk2//ja+R1NK0jS99b2ktE/XP9JD/rU/EVMPfqyxcz3Mc1TxUcosIqr4jti5Bws7hUcNooQRU6+AAMBtwOiAhX/lL+/qvP+vT//b//3///tpv7///W3///T/v6T9JTI6GUvVHMxWkYUYgAoDMgAMrNGDBgEgwxP/+5JkZIkETm1JKylD0DENiK0EArISdbEirTEL2Lo0orQQCtEEPZInSv5krhCALikaCOZOIZgeEy8j0sOU5jcajVauJyaJ1KsOk6m+YthQ3dy1qG0vAoeNlHX8dYtq6RFUzTcdGuOw/W5o/5eXqeYINV4uNXHWkrzEx8yrHVFSfETV1XDy18tDxUTO3THNfzUFw0DGXEZGiYKGUsSKqp2hZ7WwZkP0gFrA2AAFG1wASAQv/9/Of9c//+n/3/v////b//7tT//9un0/pcxtDoslzbM7opRoR7QaYACosgSvH8SJWGoErMMApbK4bvVf1t1ctdkZFLutIDk5LDG5K45nx/mgnSGZ6lt8Mz9ie3cnOryXVix2TF8mquyVuaNlneGrhou6eYPNGFjBHqd1SR7pbRKDmvb+mlWmpta4qIfvFIne3RabWI7niE+mul6pEmoGqbOpxpSyPVXFDJcoYtigkD0RLLDgIig+uxcRBREABf/5Zn9bqCNT1Dd+WX/L9f////8//Z237rzeZsa16zF0zLcq0SSScQQEpYIVAkyzPvNn//uSZGUHBLVsSAMvQ2IrzahxACb2Ec2xIqylD5C2AGL0AIgCUCDmoArpcielM8DWm2lLnvzYdHRQIlxTBEgIgZLjQGWmkIZDzVwPlm3oFIIXSTaQdN1a6EEdM9NOe88DR/R1r18yietqsJ5y1HU5713fHzzrjVTsYjzy/8EzU9RdXPSfaTPzM3Nw9nVzFzZsWh4waTkmRCDDhGQbpZqsQKFlC54wGlF4WMPoSwURySVsgkF4vKv3qQ5zYDscygNM2/dqlJH/d/9ivoMLxb///Rka5ViBI80HKkCBEABTVOc+0LPmzJIUEiSSSrTlSGftV7XPf9oEHHbTSGoOTpqAutHPFAUnD7Lzjjb3RtOL6xNNPRa7QWKNnIHQPoftd1zvFI9pUUPuOaKisq4cYppU8/kadlcUtUiZpe8X/pNVf1SaXdPcx/c3axDOst9PD99SzXDdRcsMmRFR6GmWNIBaOIIIMEp64TgkHZNSyByORuQRAgBBalVr3Sytuga3/6LLHy7jv/o2ChZEfp/////jmNLCp42LGQWB0DgYLDy4BgrMUP/7kmRkgwSRbEjDDEPSMaAYrQQiAJKdsSAMmTfIpIBi9ACIAoxxXE2wELGjMNgyAWnqr1aJ8ZiNPNGp+YkGW91JLbjMggh84dvU9GCCSjrPgmiCHHjuWctDBblv9eWt9/jH/mt748vsPusyTJEGf73d1Ocm2aRhr5eXmlGxWZO48GQvH9ec3zY7+ai98d+/u+7/b+5uZavy5ppUynqGbbTRqjLl4KLMOZPOTRYZteS4VLtbXBJHBABA0CCGximGlU/9//33dk43/r8+xz09fd63f/9nIeNPyDUhITRSAEEgAJADIS5x8KHEQJdAskBRBxwHElpPTHNIkZc0EeKtdsbJazi6KZrVijL8xxLtZkN8UemZqEmgvJkEgNRUgYc8nvqWrHPUncHNn5drbOpeUlBLilqTQw5vd27289TEdlDN1OPDe3+3r9nu3a1s/7/742dzNVnbW79u37O2v+z3N6o3MBNA9o1ucBlGoEEIKHJg4KmRFIHol6EEQhyQSRuSCIkEKS8XtYZPO0nppHQf/35z9y9R7ami+hW7934t//9u+pj/+5JkYoDk6mxISy8x8jGACL0EIm6S+bMgrKUNwLa2IYAAm9g1AGECws0DB08gBgQMHBNJsrmGwWfN+EifLjIAYdUzgF1pQ0oMAOAgWFAWWRRUNnITRmgoHUDyVAucV1BI8sKKNQmzCLSLKvE3KKu1ixQWGzDbIixEzPVwjuc6LVT8dDh0TqxH0tGjBmV6jFq69O5tYpY56ttXxt8zMx6clTMUNqI5tKvssiGzGfIMkQWD8G0WWexMSeFRcsPBGDgRRQyg8I/7PyScvmwKWXnRHIlLY85yz8v/////vb/+s/yp8PPd9YqzVaSREQRTU6FnksRVAIADREOplpBRMhpAwCHJUTRYGXZXexwpvUqcaclGMn7O1/lc1hP0F3j+yaZpb9NWufWxopu1S6xwuY2b9DBwhgmxjHR8ynx4GOM9r1qH+5R6ZF58M4SWFHNFquOk+TQGHPbISynlCtkkazb6/KRw85K+NaGneerXU7F/EwRzOCEhIMHCMUcIwHJFHyLULAJLRJJRWIJIkQgkRXCLuvqJm+kbp+1qX77+2kXfGVkP//uSZFcDBIJtSCsjNtAvoBjNACIAkJ2xFQwxB0i1gGG8AIgARf//2tPP/1f3bmKTLJOtEAweALCCaSfT4AEA6E3HYo7xkEpYBsOxKJ32mUxk2YrVp6DUFQCwjQ012LHKtSSKirbMzMzKtcMxR0NMNftWzMzNCqqqsSrftfUeqrWtcNbNqrMU0wULCxqrDSKr//Nbckipqr3DXxaqrftqtftxeyrUiqrWx01c7MoqDU2LXgkGqCwscULMKBmeGYFh/+K0YEw6mHeRxLg16j3LHv1fUsFXazv+HeJUf//Wd//I/+JToNA0DKpMQU1FMy45OS4zqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqkxBTUUzLjk5LjOqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7kmRAj/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqo=",d=l.length/2;this.irrArrayBuffer=new ArrayBuffer(d);for(var u=new Uint8Array(this.irrArrayBuffer),h=atob(l),_,b=0;b<h.length;b++)_=h.charCodeAt(b),u[b]=_;return this.audioContext.decodeAudioData(this.irrArrayBuffer,function(w){n.convolver=t.createConvolver(),n.convolver.buffer=w,n.wet.connect(n.convolver),n.convolver.connect(n.output),console.log("convolver audioBuffer",w)}),this}typeof O1=="object"&&O1.exports&&(O1.exports=Q7);typeof window<"u"&&(window.WebAudioFontReverberator=Q7)});var nM=et((RPe,F1)=>{"use strict";console.log("WebAudioFont Player v2.92 GPL3");var Uee=Y7(),qee=J7(),Hee=$7();function K7(){return this.envelopes=[],this.loader=new Uee(this),this.onCacheFinish=null,this.onCacheProgress=null,this.afterTime=.05,this.nearZero=1e-6,this.createChannel=function(t){return new qee(t)},this.createReverberator=function(t){return new Hee(t)},this.limitVolume=function(t){return t?t=1*t:t=.5,t},this.queueChord=function(t,n,e,i,r,s,a,l){a=this.limitVolume(a);for(var d=[],u=0;u<r.length;u++){var h=this.queueWaveTable(t,n,e,i,r[u],s,a-Math.random()*.01,l);d.push(h)}return d},this.queueStrumUp=function(t,n,e,i,r,s,a,l){return r.sort(function(d,u){return u-d}),this.queueStrum(t,n,e,i,r,s,a,l)},this.queueStrumDown=function(t,n,e,i,r,s,a,l){return r.sort(function(d,u){return d-u}),this.queueStrum(t,n,e,i,r,s,a,l)},this.queueStrum=function(t,n,e,i,r,s,a,l){a=this.limitVolume(a),i<t.currentTime&&(i=t.currentTime);for(var d=[],u=0;u<r.length;u++){var h=this.queueWaveTable(t,n,e,i+u*.01,r[u],s,a-Math.random()*.01,l);d.push(h),a=.9*a}return d},this.queueSnap=function(t,n,e,i,r,s,a,l){return a=this.limitVolume(a),a=1.5*(a||1),s=.05,this.queueChord(t,n,e,i,r,s,a,l)},this.resumeContext=function(t){try{t.state=="suspended"&&t.constructor.name=="AudioContext"&&(console.log("audioContext.resume",t),t.resume())}catch{}},this.queueWaveTable=function(t,n,e,i,r,s,a,l){this.resumeContext(t),a=this.limitVolume(a);var d=this.findZone(t,e,r);if(!d.buffer){console.log("empty buffer ",d);return}var u=d.originalPitch-100*d.coarseTune-d.fineTune,h=1*Math.pow(2,(100*r-u)/1200),_=d.sampleRate/t.sampleRate,b=i;b<t.currentTime&&(b=t.currentTime);var w=s+this.afterTime,S=!0;(d.loopStart<1||d.loopStart>=d.loopEnd)&&(S=!1),S||w>d.buffer.duration/h&&(w=d.buffer.duration/h);var L=this.findEnvelope(t,n,b,w);if(this.setupEnvelope(t,L,d,a,b,w,s),L.audioBufferSourceNode=t.createBufferSource(),L.audioBufferSourceNode.playbackRate.setValueAtTime(h,0),l&&l.length>0){L.audioBufferSourceNode.playbackRate.setValueAtTime(h,i);for(var R=0;R<l.length;R++){var z=1*Math.pow(2,(100*l[R].pitch-u)/1200),ne=i+l[R].when;L.audioBufferSourceNode.playbackRate.linearRampToValueAtTime(z,ne)}}return L.audioBufferSourceNode.buffer=d.buffer,S?(L.audioBufferSourceNode.loop=!0,L.audioBufferSourceNode.loopStart=d.loopStart/d.sampleRate+d.delay,L.audioBufferSourceNode.loopEnd=d.loopEnd/d.sampleRate+d.delay):L.audioBufferSourceNode.loop=!1,L.audioBufferSourceNode.connect(L),L.audioBufferSourceNode.start(b,d.delay),L.audioBufferSourceNode.stop(b+w),L.when=b,L.duration=w,L.pitch=r,L.preset=e,L},this.noZeroVolume=function(t){return t>this.nearZero?t:this.nearZero},this.setupEnvelope=function(t,n,e,i,r,s,a){n.gain.setValueAtTime(this.noZeroVolume(0),t.currentTime);var l=0,d=0,u=a,h=e.ahdsr;s<u+this.afterTime&&(u=s-this.afterTime),h?h.length>0||(h=[{duration:0,volume:1},{duration:.5,volume:1},{duration:1.5,volume:.5},{duration:3,volume:0}]):h=[{duration:0,volume:1},{duration:u,volume:1}],n.gain.cancelScheduledValues(r),n.gain.setValueAtTime(this.noZeroVolume(h[0].volume*i),r);for(var _=0;_<h.length;_++)if(h[_].duration>0){if(h[_].duration+l>u){var b=1-(h[_].duration+l-u)/h[_].duration,w=d-b*(d-h[_].volume);n.gain.linearRampToValueAtTime(this.noZeroVolume(i*w),r+u);break}l=l+h[_].duration,d=h[_].volume,n.gain.linearRampToValueAtTime(this.noZeroVolume(i*d),r+l)}n.gain.linearRampToValueAtTime(this.noZeroVolume(0),r+u+this.afterTime)},this.numValue=function(t,n){return typeof t=="number"?t:n},this.findEnvelope=function(t,n,e,i){for(var r=null,s=0;s<this.envelopes.length;s++){var a=this.envelopes[s];if(a.target==n&&t.currentTime>a.when+a.duration+.001){try{a.audioBufferSourceNode.disconnect(),a.audioBufferSourceNode.stop(0),a.audioBufferSourceNode=null}catch{}r=a;break}}return r||(r=t.createGain(),r.target=n,r.connect(n),r.cancel=function(){r.when+r.duration>t.currentTime&&(r.gain.cancelScheduledValues(0),r.gain.setTargetAtTime(1e-5,t.currentTime,.1),r.when=t.currentTime+1e-5,r.duration=0)},this.envelopes.push(r)),r},this.adjustPreset=function(t,n){for(var e=0;e<n.zones.length;e++)this.adjustZone(t,n.zones[e])},this.adjustZone=function(t,n){if(!n.buffer){if(n.delay=0,n.sample){var e=atob(n.sample);n.buffer=t.createBuffer(1,e.length/2,n.sampleRate);for(var i=n.buffer.getChannelData(0),r,s,a,l=0;l<e.length/2;l++)r=e.charCodeAt(l*2),s=e.charCodeAt(l*2+1),r<0&&(r=256+r),s<0&&(s=256+s),a=s*256+r,a>=65536/2&&(a=a-65536),i[l]=a/65536}else if(n.file){for(var d=n.file.length,u=new ArrayBuffer(d),h=new Uint8Array(u),e=atob(n.file),_,l=0;l<e.length;l++)_=e.charCodeAt(l),h[l]=_;t.decodeAudioData(u,function(w){n.buffer=w})}n.loopStart=this.numValue(n.loopStart,0),n.loopEnd=this.numValue(n.loopEnd,0),n.coarseTune=this.numValue(n.coarseTune,0),n.fineTune=this.numValue(n.fineTune,0),n.originalPitch=this.numValue(n.originalPitch,6e3),n.sampleRate=this.numValue(n.sampleRate,44100),n.sustain=this.numValue(n.originalPitch,0)}},this.findZone=function(t,n,e){for(var i=null,r=n.zones.length-1;r>=0&&(i=n.zones[r],!(i.keyRangeLow<=e&&i.keyRangeHigh+1>=e));r--);try{this.adjustZone(t,i)}catch(s){console.log("adjustZone",s)}return i},this.cancelQueue=function(t){for(var n=0;n<this.envelopes.length;n++){var e=this.envelopes[n];e.gain.cancelScheduledValues(0),e.gain.setValueAtTime(this.nearZero,t.currentTime),e.when=-1;try{e.audioBufferSourceNode.disconnect()}catch(i){console.log(i)}}},this}typeof F1=="object"&&F1.exports&&(F1.exports=K7);typeof window<"u"&&(window.WebAudioFontPlayer=K7)});var e9=et((qPe,Z7)=>{"use strict";function ote(t){return t>64&&t<91?t-65:t>96&&t<123?t-71:t>47&&t<58?t+4:t===43?62:t===47?63:0}function ste(t,n){for(var e=t.replace(/[^A-Za-z0-9\+\/]/g,""),i=e.length,r=n?Math.ceil((i*3+1>>2)/n)*n:i*3+1>>2,s=new Uint8Array(r),a,l,d=0,u=0,h=0;h<i;h++)if(l=h&3,d|=ote(e.charCodeAt(h))<<18-6*l,l===3||i-h===1){for(a=0;a<3&&u<r;a++,u++)s[u]=d>>>(16>>>a&24)&255;d=0}return s}Z7.exports={decode:ste}});var n9=et((HPe,t9)=>{"use strict";t9.exports=function(t,n){return new Promise(function(e,i){var r=new XMLHttpRequest;n&&(r.responseType=n),r.open("GET",t),r.onload=function(){r.status===200?e(r.response):i(Error(r.statusText))},r.onerror=function(){i(Error("Network Error"))},r.send()})}});var i9=et((YPe,j1)=>{"use strict";var ate=e9(),lte=n9();function G1(t){return function(n){return typeof n=="string"&&t.test(n)}}function iM(t,n){return typeof t=="string"?t+n:typeof t=="function"?t(n):n}function xs(t,n,e,i){var r=cte(n)?dte:hte(n)?ute:pte(n)?fte:mte(n)?gte:_te(n)?yte:vte(n)?bte:xte(n)?Cte:wte(n)?Mte:null,s=e||{};return r?r(t,n,s):i?Promise.resolve(i):Promise.reject("Source not valid ("+n+")")}xs.fetch=lte;function cte(t){return t instanceof ArrayBuffer}function dte(t,n,e){return new Promise(function(i,r){t.decodeAudioData(n,function(s){i(s)},function(){r("Can't decode audio data ("+n.slice(0,30)+"...)")})})}var hte=G1(/\.(mp3|wav|ogg)(\?.*)?$/i);function ute(t,n,e){var i=iM(e.from,n);return xs(t,xs.fetch(i,"arraybuffer"),e)}function pte(t){return t&&typeof t.then=="function"}function fte(t,n,e){return n.then(function(i){return xs(t,i,e)})}var mte=Array.isArray;function gte(t,n,e){return Promise.all(n.map(function(i){return xs(t,i,e,i)}))}function _te(t){return t&&typeof t=="object"}function yte(t,n,e){var i={},r=Object.keys(n).map(function(s){if(e.only&&e.only.indexOf(s)===-1)return null;var a=n[s];return xs(t,a,e,a).then(function(l){i[s]=l})});return Promise.all(r).then(function(){return i})}var vte=G1(/\.json(\?.*)?$/i);function bte(t,n,e){var i=iM(e.from,n);return xs(t,xs.fetch(i,"text").then(JSON.parse),e)}var xte=G1(/^data:audio/);function Cte(t,n,e){var i=n.indexOf(",");return xs(t,ate.decode(n.slice(i+1)).buffer,e)}var wte=G1(/\.js(\?.*)?$/i);function Mte(t,n,e){var i=iM(e.from,n);return xs(t,xs.fetch(i,"text").then(Ste),e)}function Ste(t){var n=t.indexOf("MIDI.Soundfont.");if(n<0)throw Error("Invalid MIDI.js Soundfont format");n=t.indexOf("=",n)+2;var e=t.lastIndexOf(",");return JSON.parse(t.slice(n,e)+"}")}typeof j1=="object"&&j1.exports&&(j1.exports=xs);typeof window<"u"&&(window.loadAudio=xs)});var s9=et((XPe,o9)=>{o9.exports=Pte;function Pte(t){var n=t.createGain(),e=n._voltage=Tte(t),i=Cu(e),r=Cu(e),s=Cu(e);return n._startAmount=Cu(r),n._endAmount=Cu(s),n._multiplier=Cu(i),n._multiplier.connect(n),n._startAmount.connect(n),n._endAmount.connect(n),n.value=i.gain,n.startValue=r.gain,n.endValue=s.gain,n.startValue.value=0,n.endValue.value=0,Object.defineProperties(n,kte),n}var kte={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(t){var n=this._multiplier.gain,e=this._startAmount.gain,i=this._endAmount.gain;this._voltage.start(t),this._decayFrom=this._decayFrom=t+this.attack,this._startedAt=t;var r=this.sustain;n.cancelScheduledValues(t),e.cancelScheduledValues(t),i.cancelScheduledValues(t),i.setValueAtTime(0,t),this.attack?(n.setValueAtTime(0,t),n.linearRampToValueAtTime(1,t+this.attack),e.setValueAtTime(1,t),e.linearRampToValueAtTime(0,t+this.attack)):(n.setValueAtTime(1,t),e.setValueAtTime(0,t)),this.decay&&n.setTargetAtTime(r,this._decayFrom,r9(this.decay))}},stop:{value:function(t,n){n&&(t=t-this.release);var e=t+this.release;if(this.release){var i=this._multiplier.gain,r=this._startAmount.gain,s=this._endAmount.gain;i.cancelScheduledValues(t),r.cancelScheduledValues(t),s.cancelScheduledValues(t);var a=r9(this.release);if(this.attack&&t<this._decayFrom){var l=Ate(0,1,this._startedAt,this._decayFrom,t);i.linearRampToValueAtTime(l,t),r.linearRampToValueAtTime(1-l,t),r.setTargetAtTime(0,t,a)}s.setTargetAtTime(1,t,a),i.setTargetAtTime(0,t,a)}return this._voltage.stop(e),e}},onended:{get:function(){return this._voltage.onended},set:function(t){this._voltage.onended=t}}},Ete=new Float32Array([1,1]);function Tte(t){var n=t.createBufferSource(),e=t.createBuffer(1,2,t.sampleRate);return e.getChannelData(0).set(Ete),n.buffer=e,n.loop=!0,n}function Cu(t){var n=t.context.createGain();return t.connect(n),n}function r9(t){return Math.log(t+1)/Math.log(100)}function Ate(t,n,e,i,r){var s=n-t,a=i-e,l=r-e,d=l/a,u=t+d*s;return u<=t&&(u=t),u>=n&&(u=n),u}});var c9=et((JPe,l9)=>{"use strict";var Dte=s9(),Ite={},Ote={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function Fte(t,n,e){var i=!1,r=0,s={},a=t.createGain();a.gain.value=1;var l=Object.assign({},Ote,e),d={context:t,out:a,opts:l};return n instanceof AudioBuffer?d.buffer=n:d.buffers=n,d.start=function(_,b,w){if(d.buffer&&_!==null)return d.start(null,_,b);var S=_?d.buffers[_]:d.buffer;if(S){if(!i){console.warn("SamplePlayer not connected to any node.");return}}else{console.warn("Buffer "+_+" not found.");return}var L=w||Ite;b=Math.max(t.currentTime,b||0),d.emit("start",b,_,L);var R=h(_,S,L);return R.id=u(_,R),R.env.start(b),R.source.start(b),d.emit("started",b,R.id,R),L.duration&&R.stop(b+L.duration),R},d.play=function(_,b,w){return d.start(_,b,w)},d.stop=function(_,b){var w;return b=b||Object.keys(s),b.map(function(S){return w=s[S],w?(w.stop(_),w.id):null})},d.connect=function(_){return i=!0,a.connect(_),d},d.emit=function(_,b,w,S){d.onevent&&d.onevent(_,b,w,S);var L=d["on"+_];L&&L(b,w,S)},d;function u(_,b){return b.id=r++,s[b.id]=b,b.source.onended=function(){var w=t.currentTime;b.source.disconnect(),b.env.disconnect(),b.disconnect(),d.emit("ended",w,b.id,b)},b.id}function h(_,b,w){var S=t.createGain();return S.gain.value=0,S.connect(a),S.env=Lte(t,w,l),S.env.connect(S.gain),S.source=t.createBufferSource(),S.source.buffer=b,S.source.connect(S),S.source.loop=w.loop||l.loop,S.source.playbackRate.value=Nte(w.cents||l.cents),S.source.loopStart=w.loopStart||l.loopStart,S.source.loopEnd=w.loopEnd||l.loopEnd,S.stop=function(L){var R=L||t.currentTime;d.emit("stop",R,_);var z=S.env.stop(R);S.source.stop(z)},S}}function a9(t){return typeof t=="number"}var Bte=["attack","decay","sustain","release"];function Lte(t,n,e){var i=Dte(t),r=n.adsr||e.adsr;return Bte.forEach(function(s,a){r?i[s]=r[a]:i[s]=n[s]||e[s]}),i.value.value=a9(n.gain)?n.gain:a9(e.gain)?e.gain:1,i}function Nte(t){return t?Math.pow(2,t/1200):1}l9.exports=Fte});var h9=et((QPe,d9)=>{d9.exports=function(t){return t.on=function(n,e){if(arguments.length===1&&typeof n=="function")return t.on("event",n);var i="on"+n,r=t[i];return t[i]=r?Vte(r,e):e,t},t};function Vte(t,n){return function(e,i,r,s){t(e,i,r,s),n(e,i,r,s)}}});var _9=et(($Pe,g9)=>{"use strict";var u9=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function Rte(){return u9}var jte=[0,2,4,5,7,9,11];function p9(t,n,e){if(typeof t!="string")return null;var i=u9.exec(t);if(!i||!n&&i[4])return null;var r={letter:i[1].toUpperCase(),acc:i[2].replace(/x/g,"##")};return r.pc=r.letter+r.acc,r.step=(r.letter.charCodeAt(0)+3)%7,r.alt=r.acc[0]==="b"?-r.acc.length:r.acc.length,r.chroma=jte[r.step]+r.alt,i[3]&&(r.oct=+i[3],r.midi=r.chroma+12*(r.oct+1),r.freq=f9(r.midi,e)),n&&(r.tonicOf=i[4]),r}function f9(t,n){return Math.pow(2,(t-69)/12)*(n||440)}var m9={parse:p9,regex:Rte,midiToFreq:f9},Gte=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];Gte.forEach(function(t){m9[t]=function(n){var e=p9(n);return e&&typeof e[t]<"u"?e[t]:null}});g9.exports=m9});var v9=et((KPe,y9)=>{"use strict";var Wte=_9(),zte=function(t){return t!==null&&t!==[]&&t>=0&&t<129},Ute=function(t){return zte(t)?+t:Wte.midi(t)};y9.exports=function(t){if(t.buffers){var n=t.opts.map,e=typeof n=="function"?n:Ute,i=function(s){return s?e(s)||s:null};t.buffers=qte(t.buffers,i);var r=t.start;t.start=function(s,a,l){var d=i(s),u=d%1;return u&&(d=Math.floor(d),l=Object.assign(l||{},{cents:Math.floor(u*100)})),r(d,a,l)}}return t};function qte(t,n){return Object.keys(t).reduce(function(e,i){return e[n(i)]=t[i],e},{})}});var x9=et((ZPe,b9)=>{"use strict";var Hte=Array.isArray,Yte=function(t){return t&&typeof t=="object"},Xte={};b9.exports=function(t){return t.schedule=function(n,e){var i=t.context.currentTime,r=n<i?i:n;t.emit("schedule",r,e);var s,a,l,d;return e.map(function(u){if(u)Hte(u)?(s=u[0],a=u[1]):(s=u.time,a=u);else return null;return Yte(a)?(l=a.name||a.key||a.note||a.midi||null,d=a):(l=a,d=Xte),t.start(l,r+(s||0),d)})},t}});var w9=et((C9,rM)=>{(function(t){if(typeof C9=="object"&&typeof rM<"u")rM.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n;typeof window<"u"?n=window:typeof global<"u"?n=global:typeof self<"u"?n=self:n=this,n.midimessage=t()}})(function(){var t,n,e;return function i(r,s,a){function l(h,_){if(!s[h]){if(!r[h]){var b=typeof Gu=="function"&&Gu;if(!_&&b)return b(h,!0);if(d)return d(h,!0);var w=new Error("Cannot find module '"+h+"'");throw w.code="MODULE_NOT_FOUND",w}var S=s[h]={exports:{}};r[h][0].call(S.exports,function(L){var R=r[h][1][L];return l(R||L)},S,S.exports,i,r,s,a)}return s[h].exports}for(var d=typeof Gu=="function"&&Gu,u=0;u<a.length;u++)l(a[u]);return l}({1:[function(i,r,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(a){function l(d){if(this._event=d,this._data=d.data,this.receivedTime=d.receivedTime,this._data&&this._data.length<2){console.warn("Illegal MIDI message of length",this._data.length);return}switch(this._messageCode=d.data[0]&240,this.channel=d.data[0]&15,this._messageCode){case 128:this.messageType="noteoff",this.key=d.data[1]&127,this.velocity=d.data[2]&127;break;case 144:this.messageType="noteon",this.key=d.data[1]&127,this.velocity=d.data[2]&127;break;case 160:this.messageType="keypressure",this.key=d.data[1]&127,this.pressure=d.data[2]&127;break;case 176:this.messageType="controlchange",this.controllerNumber=d.data[1]&127,this.controllerValue=d.data[2]&127,this.controllerNumber===120&&this.controllerValue===0?this.channelModeMessage="allsoundoff":this.controllerNumber===121?this.channelModeMessage="resetallcontrollers":this.controllerNumber===122?this.controllerValue===0?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":this.controllerNumber===123&&this.controllerValue===0?this.channelModeMessage="allnotesoff":this.controllerNumber===124&&this.controllerValue===0?this.channelModeMessage="omnimodeoff":this.controllerNumber===125&&this.controllerValue===0?this.channelModeMessage="omnimodeon":this.controllerNumber===126?this.channelModeMessage="monomodeon":this.controllerNumber===127&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=d.data[1];break;case 208:this.messageType="channelpressure",this.pressure=d.data[1]&127;break;case 224:this.messageType="pitchbendchange";var u=d.data[2]&127,h=d.data[1]&127;this.pitchBend=(u<<8)+h;break}}return new l(a)},r.exports=s.default},{}]},{},[1])(1)})});var S9=et((tke,M9)=>{var Jte=w9();M9.exports=function(t){return t.listenToMidi=function(n,e){var i={},r=e||{},s=r.gain||function(a){return a/127};return n.onmidimessage=function(a){var l=a.messageType?a:Jte(a);if(l.messageType==="noteon"&&l.velocity===0&&(l.messageType="noteoff"),!(r.channel&&l.channel!==r.channel))switch(l.messageType){case"noteon":i[l.key]=t.play(l.key,0,{gain:s(l.velocity)});break;case"noteoff":i[l.key]&&(i[l.key].stop(),delete i[l.key]);break}},t},t}});var k9=et((nke,W1)=>{"use strict";var Qte=c9(),$te=h9(),Kte=v9(),Zte=x9(),ene=S9();function P9(t,n,e){return ene(Zte(Kte($te(Qte(t,n,e)))))}typeof W1=="object"&&W1.exports&&(W1.exports=P9);typeof window<"u"&&(window.SamplePlayer=P9)});var O9={};EB(O9,{acc:()=>dne,alt:()=>pne,build:()=>D9,chroma:()=>fne,freq:()=>lne,letter:()=>cne,midi:()=>I9,oct:()=>mne,parse:()=>Bl,pc:()=>hne,regex:()=>ine,step:()=>une});function E9(t,n){return Array(n+1).join(t)}function oM(t){return typeof t=="number"}function tne(t){return typeof t=="string"}function nne(t){return typeof t<"u"}function T9(t,n){return Math.pow(2,(t-69)/12)*(n||440)}function ine(){return A9}function Bl(t,n,e){if(typeof t!="string")return null;var i=A9.exec(t);if(!i||!n&&i[4])return null;var r={letter:i[1].toUpperCase(),acc:i[2].replace(/x/g,"##")};r.pc=r.letter+r.acc,r.step=(r.letter.charCodeAt(0)+3)%7,r.alt=r.acc[0]==="b"?-r.acc.length:r.acc.length;var s=rne[r.step]+r.alt;return r.chroma=s<0?12+s:s%12,i[3]&&(r.oct=+i[3],r.midi=s+12*(r.oct+1),r.freq=T9(r.midi,e)),n&&(r.tonicOf=i[4]),r}function sne(t){return oM(t)?t<0?E9("b",-t):E9("#",t):""}function ane(t){return oM(t)?""+t:""}function D9(t,n,e){return t===null||typeof t>"u"?null:t.step?D9(t.step,t.alt,t.oct):t<0||t>6?null:one.charAt(t)+sne(n)+ane(e)}function I9(t){if((oM(t)||tne(t))&&t>=0&&t<128)return+t;var n=Bl(t);return n&&nne(n.midi)?n.midi:null}function lne(t,n){var e=I9(t);return e===null?null:T9(e,n)}function cne(t){return(Bl(t)||{}).letter}function dne(t){return(Bl(t)||{}).acc}function hne(t){return(Bl(t)||{}).pc}function une(t){return(Bl(t)||{}).step}function pne(t){return(Bl(t)||{}).alt}function fne(t){return(Bl(t)||{}).chroma}function mne(t){return(Bl(t)||{}).oct}var A9,rne,one,F9=kB(()=>{"use strict";A9=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;rne=[0,2,4,5,7,9,11];one="CDEFGAB"});var L9=et((ike,B9)=>{"use strict";var sM=(F9(),TB(O9));function el(t,n){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof el))return new el(t);this.nameToUrl=n||el.nameToUrl,this.ctx=t,this.instruments={},this.promises=[]}el.prototype.onready=function(t){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(t)};el.prototype.instrument=function(t,n){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var e=this.ctx;if(t=t||"default",t in this.instruments)return this.instruments[t];var i={name:t,play:_ne(e,n)};if(this.instruments[t]=i,t!=="default"){var r=el.instrument(e,t,n).then(function(s){return i.play=s.play,i});this.promises.push(r),i.onready=function(s){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),r.then(s)}}else i.onready=function(s){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),s()};return i};function gne(t,n,e){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),el.instrument(t,n,e).then(function(i){return i.buffers})}el.loadBuffers=gne;function _ne(t,n){return n=n||{},function(e,i,r,s){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var a=e>0&&e<129?+e:sM.midi(e),l=a?sM.midiToFreq(a,440):null;if(l){r=r||.2,s=s||{};var d=s.destination||n.destination||t.destination,u=s.vcoType||n.vcoType||"sine",h=s.gain||n.gain||.4,_=t.createOscillator();_.type=u,_.frequency.value=l;var b=t.createGain();return b.gain.value=h,_.connect(b),b.connect(d),_.start(i),r>0&&_.stop(i+r),_}}}el.noteToMidi=sM.midi;B9.exports=el});var R9=et((rke,z1)=>{"use strict";var yne=i9(),vne=k9();function N9(t,n,e){if(arguments.length===1)return function(l,d){return N9(t,l,d)};var i=e||{},r=i.isSoundfontURL||bne,s=i.nameToUrl||V9,a=r(n)?n:s(n,i.soundfont,i.format);return yne(t,a,{only:i.only||i.notes}).then(function(l){var d=vne(t,l,i).connect(i.destination?i.destination:t.destination);return d.url=a,d.name=n,d})}function bne(t){return/\.js(\?.*)?$/i.test(t)}function V9(t,n,e){return e=e==="ogg"?e:"mp3",n=n==="FluidR3_GM"?n:"MusyngKite","https://gleitz.github.io/midi-js-soundfonts/"+n+"/"+t+"-"+e+".js"}var U1=L9();U1.instrument=N9;U1.nameToUrl=V9;typeof z1=="object"&&z1.exports&&(z1.exports=U1);typeof window<"u"&&(window.Soundfont=U1)});var gM=et((d5e,ty)=>{(function(){function t(ee,te){ee.prototype=n(te.prototype),ee.prototype.constructor=ee,ee.base=te.prototype}function n(ee){function te(){}return te.prototype=ee,new te}function e(ee,te,Te){return Te==="millisecond"?ee.setMilliseconds(ee.getMilliseconds()+1*te):Te==="second"?ee.setSeconds(ee.getSeconds()+1*te):Te==="minute"?ee.setMinutes(ee.getMinutes()+1*te):Te==="hour"?ee.setHours(ee.getHours()+1*te):Te==="day"?ee.setDate(ee.getDate()+1*te):Te==="week"?ee.setDate(ee.getDate()+7*te):Te==="month"?ee.setMonth(ee.getMonth()+1*te):Te==="year"&&ee.setFullYear(ee.getFullYear()+1*te),ee}function i(ee,te){var Te=!1;for(0>ee&&(Te=!0,ee*=-1),ee=""+ee,te=te||1;ee.length<te;)ee="0"+ee;return Te?"-"+ee:ee}function r(ee){if(!ee)return ee;ee=ee.replace(/^\s\s*/,"");for(var te=/\s/,Te=ee.length;te.test(ee.charAt(--Te)););return ee.slice(0,Te+1)}function s(ee){ee.roundRect=function(te,Te,Qe,bt,Rt,Nt,St,kn){St&&(this.fillStyle=St),kn&&(this.strokeStyle=kn),typeof Rt>"u"&&(Rt=5),this.lineWidth=Nt,this.beginPath(),this.moveTo(te+Rt,Te),this.lineTo(te+Qe-Rt,Te),this.quadraticCurveTo(te+Qe,Te,te+Qe,Te+Rt),this.lineTo(te+Qe,Te+bt-Rt),this.quadraticCurveTo(te+Qe,Te+bt,te+Qe-Rt,Te+bt),this.lineTo(te+Rt,Te+bt),this.quadraticCurveTo(te,Te+bt,te,Te+bt-Rt),this.lineTo(te,Te+Rt),this.quadraticCurveTo(te,Te,te+Rt,Te),this.closePath(),St&&this.fill(),kn&&0<Nt&&this.stroke()}}function a(ee,te){return ee-te}function l(ee,te,Te){if(ee&&te&&Te){Te=Te+"."+te;var Qe="image/"+te;ee=ee.toDataURL(Qe);var bt=!1,Rt=document.createElement("a");if(Rt.download=Te,Rt.href=ee,typeof Blob<"u"&&new Blob){for(var Nt=ee.replace(/^data:[a-z\/]*;base64,/,""),Nt=atob(Nt),St=new ArrayBuffer(Nt.length),St=new Uint8Array(St),kn=0;kn<Nt.length;kn++)St[kn]=Nt.charCodeAt(kn);te=new Blob([St.buffer],{type:"image/"+te});try{window.navigator.msSaveBlob(te,Te),bt=!0}catch{Rt.dataset.downloadurl=[Qe,Rt.download,Rt.href].join(":"),Rt.href=window.URL.createObjectURL(te)}}if(!bt)try{event=document.createEvent("MouseEvents"),event.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Rt.dispatchEvent?Rt.dispatchEvent(event):Rt.fireEvent&&Rt.fireEvent("onclick")}catch{te=window.open(),te.document.write("<img src='"+ee+"'></img><div>Please right click on the image and save it to your device</div>"),te.document.close()}}}function d(ee){var te=((ee&16711680)>>16).toString(16),Te=((ee&65280)>>8).toString(16);return ee=((ee&255)>>0).toString(16),te=2>te.length?"0"+te:te,Te=2>Te.length?"0"+Te:Te,ee=2>ee.length?"0"+ee:ee,"#"+te+Te+ee}function u(ee,te){var Te=this.length>>>0,Qe=Number(te)||0,Qe=0>Qe?Math.ceil(Qe):Math.floor(Qe);for(0>Qe&&(Qe+=Te);Qe<Te;Qe++)if(Qe in this&&this[Qe]===ee)return Qe;return-1}function h(ee){return ee===null||typeof ee>"u"}function _(ee){return ee.indexOf||(ee.indexOf=u),ee}function b(ee){le.fSDec&&ee[Hi("`eeDwdouMhrudods")](Hi("e`u`@ohl`uhnoHuds`uhnoDoe"),function(){le._fTWm&&le._fTWm(ee)})}function w(ee,te,Te){Te=Te||"normal";var Qe=ee+"_"+te+"_"+Te,bt=Nn[Qe];if(isNaN(bt)){try{if(ee="position:absolute; left:0px; top:-20000px; padding:0px;margin:0px;border:none;white-space:pre;line-height:normal;font-family:"+ee+"; font-size:"+te+"px; font-weight:"+Te+";",!ui){var Rt=document.body;ui=document.createElement("span"),ui.innerHTML="";var Nt=document.createTextNode("Mpgyi");ui.appendChild(Nt),Rt.appendChild(ui)}ui.style.display="",ui.setAttribute("style",ee),bt=Math.round(ui.offsetHeight),ui.style.display="none"}catch{bt=Math.ceil(1.1*te)}bt=Math.max(bt,te),Nn[Qe]=bt}return bt}function S(ee,te){var Te=[];if(Te={solid:[],shortDash:[3,1],shortDot:[1,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],dot:[1,2],dash:[4,2],dashDot:[4,2,1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2]}[ee||"solid"])for(var Qe=0;Qe<Te.length;Qe++)Te[Qe]*=te;else Te=[];return Te}function L(ee,te,Te,Qe,bt){return Qe=Qe||[],bt=bt||!1,Qe.push([ee,te,Te,bt]),ee.addEventListener?(ee.addEventListener(te,Te,bt),Te):ee.attachEvent?(Qe=function(Rt){Rt=Rt||window.event,Rt.preventDefault=Rt.preventDefault||function(){Rt.returnValue=!1},Rt.stopPropagation=Rt.stopPropagation||function(){Rt.cancelBubble=!0},Te.call(ee,Rt)},ee.attachEvent("on"+te,Qe),Qe):!1}function R(ee,te,Te){for(ee*=Wi,te*=Wi,ee=Te.getImageData(ee,te,2,2).data,te=!0,Te=0;4>Te;Te++)if(ee[Te]!==ee[Te+4]|ee[Te]!==ee[Te+8]|ee[Te]!==ee[Te+12]){te=!1;break}return te?ee[0]<<16|ee[1]<<8|ee[2]:0}function z(ee,te,Te){return ee in te?te[ee]:Te[ee]}function ne(ee,te,Te){if(X&&Sr){var Qe=ee.getContext("2d");Pr=Qe.webkitBackingStorePixelRatio||Qe.mozBackingStorePixelRatio||Qe.msBackingStorePixelRatio||Qe.oBackingStorePixelRatio||Qe.backingStorePixelRatio||1,Wi=vi/Pr,ee.width=te*Wi,ee.height=Te*Wi,vi!==Pr&&(ee.style.width=te+"px",ee.style.height=Te+"px",Qe.scale(Wi,Wi))}else ee.width=te,ee.height=Te}function Q(ee){if(!Eo){var te=!1,Te=!1;typeof Ue.Chart.creditHref>"u"?(ee.creditHref=Hi("iuuqr;..b`ow`rkr/bnl."),ee.creditText=Hi("B`ow`rKR/bnl")):(te=ee.updateOption("creditText"),Te=ee.updateOption("creditHref")),ee.creditHref&&ee.creditText&&(ee._creditLink||(ee._creditLink=document.createElement("a"),ee._creditLink.setAttribute("class","canvasjs-chart-credit"),ee._creditLink.setAttribute("title","JavaScript Charts"),ee._creditLink.setAttribute("style","outline:none;margin:0px;position:absolute;right:2px;top:"+(ee.height-14)+"px;color:dimgrey;text-decoration:none;font-size:11px;font-family: Calibri, Lucida Grande, Lucida Sans Unicode, Arial, sans-serif"),ee._creditLink.setAttribute("tabIndex",-1),ee._creditLink.setAttribute("target","_blank")),(ee.renderCount===0||te||Te)&&(ee._creditLink.setAttribute("href",ee.creditHref),ee._creditLink.innerHTML=ee.creditText),ee._creditLink&&ee.creditHref&&ee.creditText?(ee._creditLink.parentElement||ee._canvasJSContainer.appendChild(ee._creditLink),ee._creditLink.style.top=ee.height-14+"px"):ee._creditLink.parentElement&&ee._canvasJSContainer.removeChild(ee._creditLink))}}function q(ee,te){G&&(this.canvasCount|=0,window.console.log(++this.canvasCount));var Te=document.createElement("canvas");return Te.setAttribute("class","canvasjs-chart-canvas"),ne(Te,ee,te),X||typeof G_vmlCanvasManager>"u"||G_vmlCanvasManager.initElement(Te),Te}function T(ee,te,Te){for(var Qe in Te)te.style[Qe]=Te[Qe]}function se(ee,te,Te){te.getAttribute("state")||(te.style.backgroundColor=ee.toolbar.backgroundColor,te.style.color=ee.toolbar.fontColor,te.style.border="none",T(ee,te,{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"})),te.getAttribute("state")!==Te&&(te.setAttribute("state",Te),te.setAttribute("type","button"),T(ee,te,{padding:"5px 12px",cursor:"pointer",float:"left",width:"40px",height:"25px",outline:"0px",verticalAlign:"baseline",lineHeight:"0"}),te.setAttribute("title",ee._cultureInfo[Te+"Text"]),te.innerHTML="<img style='height:95%; pointer-events: none;' src='"+Jr[Te].image+"' alt='"+ee._cultureInfo[Te+"Text"]+"' />")}function _e(){for(var ee=null,te=0;te<arguments.length;te++)ee=arguments[te],ee.style&&(ee.style.display="inline")}function Me(){for(var ee=null,te=0;te<arguments.length;te++)(ee=arguments[te])&&ee.style&&(ee.style.display="none")}function me(ee,te,Te,Qe,bt){this._defaultsKey=ee,this._themeOptionsKey=te,this._index=Qe,this.parent=bt,this._eventListeners=[],ee={},this.theme&&h(te)&&h(Qe)?ee=h(Mn[this.theme])?Mn.light1:Mn[this.theme]:this.parent&&this.parent.themeOptions&&this.parent.themeOptions[te]&&(Qe===null?ee=this.parent.themeOptions[te]:0<this.parent.themeOptions[te].length&&(Qe=Math.min(this.parent.themeOptions[te].length-1,Qe),ee=this.parent.themeOptions[te][Qe])),this.themeOptions=ee,this.options=Te||{_isPlaceholder:!0},this.setOptions(this.options,ee)}function K(ee,te,Te,Qe,bt){typeof bt>"u"&&(bt=0),this._padding=bt,this._x1=ee,this._y1=te,this._x2=Te,this._y2=Qe,this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding}function ue(ee,te){ue.base.constructor.call(this,"TextBlock",null,te,null,null),this.ctx=ee,this._isDirty=!0,this._wrappedText=null,this._initialize()}function be(ee,te){be.base.constructor.call(this,"Toolbar","toolbar",te,null,ee),this.chart=ee,this.canvas=ee.canvas,this.ctx=this.chart.ctx,this.optionsName="toolbar"}function Z(ee,te){if(Z.base.constructor.call(this,"Title","title",te,null,ee),this.chart=ee,this.canvas=ee.canvas,this.ctx=this.chart.ctx,this.optionsName="title",h(this.options.margin)&&ee.options.subtitles){for(var Te=ee.options.subtitles,Qe=0;Qe<Te.length;Qe++)if((h(Te[Qe].horizontalAlign)&&this.horizontalAlign==="center"||Te[Qe].horizontalAlign===this.horizontalAlign)&&(h(Te[Qe].verticalAlign)&&this.verticalAlign==="top"||Te[Qe].verticalAlign===this.verticalAlign)&&!Te[Qe].dockInsidePlotArea==!this.dockInsidePlotArea){this.margin=0;break}}typeof this.options.fontSize>"u"&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function oe(ee,te,Te){oe.base.constructor.call(this,"Subtitle","subtitles",te,Te,ee),this.chart=ee,this.canvas=ee.canvas,this.ctx=this.chart.ctx,this.optionsName="subtitles",this.isOptionsInArray=!0,typeof this.options.fontSize>"u"&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function Ee(){this.pool=[]}function Y(ee){var te;ee&&Ze[ee]&&(te=Ze[ee]),Y.base.constructor.call(this,"CultureInfo",null,te,null,null)}var G=!1,le={},X=!!document.createElement("canvas").getContext,Ue={Chart:{width:500,height:400,zoomEnabled:!1,zoomType:"x",backgroundColor:"white",theme:"light1",animationEnabled:!1,animationDuration:1200,dataPointWidth:null,dataPointMinWidth:null,dataPointMaxWidth:null,colorSet:"colorSet1",culture:"en",creditHref:"",creditText:"CanvasJS",interactivityEnabled:!0,exportEnabled:!1,exportFileName:"Chart",rangeChanging:null,rangeChanged:null,publicProperties:{title:"readWrite",subtitles:"readWrite",toolbar:"readWrite",toolTip:"readWrite",legend:"readWrite",axisX:"readWrite",axisY:"readWrite",axisX2:"readWrite",axisY2:"readWrite",data:"readWrite",options:"readWrite",bounds:"readOnly",container:"readOnly"}},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:X?"transparent":null,margin:5,wrap:!0,maxWidth:null,dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Subtitle:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:14,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:2,wrap:!0,maxWidth:null,dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Toolbar:{backgroundColor:"white",backgroundColorOnHover:"#2196f3",borderColor:"#2196f3",borderThickness:1,fontColor:"black",fontColorOnHover:"white",publicProperties:{options:"readWrite",chart:"readOnly"}},Legend:{name:null,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",cursor:null,itemmouseover:null,itemmouseout:null,itemmousemove:null,itemclick:null,dockInsidePlotArea:!1,reversed:!1,backgroundColor:X?"transparent":null,borderColor:X?"transparent":null,borderThickness:0,cornerRadius:0,maxWidth:null,maxHeight:null,markerMargin:null,itemMaxWidth:null,itemWidth:null,itemWrap:!0,itemTextFormatter:null,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},ToolTip:{enabled:!0,shared:!1,animationEnabled:!0,content:null,contentFormatter:null,reversed:!1,backgroundColor:X?"rgba(255,255,255,.9)":"rgb(255,255,255)",borderColor:null,borderThickness:2,cornerRadius:5,fontSize:14,fontColor:"black",fontFamily:"Calibri, Arial, Georgia, serif;",fontWeight:"normal",fontStyle:"italic",publicProperties:{options:"readWrite",chart:"readOnly"}},Axis:{minimum:null,maximum:null,viewportMinimum:null,viewportMaximum:null,interval:null,intervalType:null,reversed:!1,logarithmic:!1,logarithmBase:10,title:null,titleFontColor:"black",titleFontSize:20,titleFontFamily:"arial",titleFontWeight:"normal",titleFontStyle:"normal",titleWrap:!0,titleMaxWidth:null,titleBackgroundColor:X?"transparent":null,titleBorderColor:X?"transparent":null,titleBorderThickness:0,titleCornerRadius:0,labelAngle:0,labelFontFamily:"arial",labelFontColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelAutoFit:!0,labelWrap:!0,labelMaxWidth:null,labelFormatter:null,labelBackgroundColor:X?"transparent":null,labelBorderColor:X?"transparent":null,labelBorderThickness:0,labelCornerRadius:0,labelPlacement:"outside",prefix:"",suffix:"",includeZero:!0,tickLength:5,tickColor:"black",tickThickness:1,lineColor:"black",lineThickness:1,lineDashType:"solid",gridColor:"A0A0A0",gridThickness:0,gridDashType:"solid",interlacedColor:X?"transparent":null,valueFormatString:null,margin:2,publicProperties:{options:"readWrite",stripLines:"readWrite",scaleBreaks:"readWrite",crosshair:"readWrite",bounds:"readOnly",chart:"readOnly"}},StripLine:{value:null,startValue:null,endValue:null,color:"orange",opacity:null,thickness:2,lineDashType:"solid",label:"",labelPlacement:"inside",labelAlign:"far",labelWrap:!0,labelMaxWidth:null,labelBackgroundColor:null,labelBorderColor:X?"transparent":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:"arial",labelFontColor:"orange",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,showOnTop:!1,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},ScaleBreaks:{autoCalculate:!1,collapsibleThreshold:"25%",maxNumberOfAutoBreaks:2,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",customBreaks:"readWrite",axis:"readOnly",autoBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Break:{startValue:null,endValue:null,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",scaleBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Crosshair:{enabled:!1,snapToDataPoint:!1,color:"grey",opacity:null,thickness:2,lineDashType:"solid",label:"",labelWrap:!0,labelMaxWidth:null,labelBackgroundColor:X?"grey":null,labelBorderColor:X?"grey":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:X?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:12,labelFontColor:"#fff",labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,valueFormatString:null,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:!1,highlightEnabled:!0,cursor:"default",indexLabel:"",indexLabelPlacement:"auto",indexLabelOrientation:"horizontal",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"Arial",indexLabelFontWeight:"normal",indexLabelBackgroundColor:null,indexLabelLineColor:"gray",indexLabelLineThickness:1,indexLabelLineDashType:"solid",indexLabelMaxWidth:null,indexLabelWrap:!0,indexLabelFormatter:null,lineThickness:2,lineDashType:"solid",connectNullData:!1,nullDataLineDashType:"dash",color:null,lineColor:null,risingColor:"white",fallingColor:"red",fillOpacity:null,startAngle:0,radius:null,innerRadius:null,neckHeight:null,neckWidth:null,reversed:!1,valueRepresents:null,linkedDataSeriesIndex:null,whiskerThickness:2,whiskerDashType:"solid",whiskerColor:null,whiskerLength:null,stemThickness:2,stemColor:null,stemDashType:"solid",upperBoxColor:"white",lowerBoxColor:"white",type:"column",xValueType:"number",axisXType:"primary",axisYType:"primary",axisXIndex:0,axisYIndex:0,xValueFormatString:null,yValueFormatString:null,zValueFormatString:null,percentFormatString:null,showInLegend:null,legendMarkerType:null,legendMarkerColor:null,legendText:null,legendMarkerBorderColor:X?"transparent":null,legendMarkerBorderThickness:0,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:X?"transparent":null,markerBorderThickness:0,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null,visible:!0,publicProperties:{options:"readWrite",axisX:"readWrite",axisY:"readWrite",chart:"readOnly"}},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",fontSize:12,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",menuText:"More Options",saveJPGText:"Save as JPEG",savePNGText:"Save as PNG",printText:"Print",days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")}},Ze={en:{}},De=X?"Trebuchet MS, Helvetica, sans-serif":"Arial",xe=X?"Impact, Charcoal, sans-serif":"Arial",ke={colorSet1:"#4F81BC #C0504E #9BBB58 #23BFAA #8064A1 #4AACC5 #F79647 #7F6084 #77A033 #33558B #E59566".split(" "),colorSet2:"#6D78AD #51CDA0 #DF7970 #4C9CA0 #AE7D99 #C9D45C #5592AD #DF874D #52BCA8 #8E7AA3 #E3CB64 #C77B85 #C39762 #8DD17E #B57952 #FCC26C".split(" "),colorSet3:"#8CA1BC #36845C #017E82 #8CB9D0 #708C98 #94838D #F08891 #0366A7 #008276 #EE7757 #E5BA3A #F2990B #03557B #782970".split(" ")},Ve,it,Je,st,ot;it="#333333",Je="#000000",Ve="#666666",ot=st="#000000";var Tt=20,mt=14,pn={colorSet:"colorSet1",backgroundColor:"#FFFFFF",title:{fontFamily:xe,fontSize:32,fontColor:it,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:xe,fontSize:mt,fontColor:it,fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:De,indexLabelFontSize:mt,indexLabelFontColor:it,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:it,titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:Je,labelFontWeight:"normal",lineThickness:1,lineColor:Ve,tickThickness:1,tickColor:Ve,gridThickness:0,gridColor:Ve,stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:ot,color:st,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:it,titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:Je,labelFontWeight:"normal",lineThickness:1,lineColor:Ve,tickThickness:1,tickColor:Ve,gridThickness:0,gridColor:Ve,stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:ot,color:st,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:it,titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:Je,labelFontWeight:"normal",lineThickness:1,lineColor:Ve,tickThickness:1,tickColor:Ve,gridThickness:1,gridColor:Ve,stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:ot,color:st,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:it,titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:Je,labelFontWeight:"normal",lineThickness:1,lineColor:Ve,tickThickness:1,tickColor:Ve,gridThickness:1,gridColor:Ve,stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:ot,color:st,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:De,fontSize:14,fontColor:it,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:De,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1}};Je=it="#F5F5F5",Ve="#FFFFFF",st="#40BAF1",ot="#F5F5F5";var Tt=20,mt=14,tn={colorSet:"colorSet2",title:{fontFamily:De,fontSize:33,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:5},subtitles:[{fontFamily:De,fontSize:mt,fontColor:"#3A3A3A",fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:De,indexLabelFontSize:mt,indexLabelFontColor:"#666666",indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickThickness:1,tickColor:"#BBBBBB",gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:De,fontSize:14,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:De,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1}};Je=it="#F5F5F5",Ve="#FFFFFF",st="#40BAF1",ot="#F5F5F5",Tt=20,mt=14,xe={colorSet:"colorSet12",backgroundColor:"#2A2A2A",title:{fontFamily:xe,fontSize:32,fontColor:it,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:xe,fontSize:mt,fontColor:it,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{backgroundColor:"#666666",backgroundColorOnHover:"#FF7372",borderColor:"#FF7372",borderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:De,indexLabelFontSize:mt,indexLabelFontColor:Je,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:Je,titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:Je,labelFontWeight:"normal",lineThickness:1,lineColor:Ve,tickThickness:1,tickColor:Ve,gridThickness:0,gridColor:Ve,stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ot,color:st,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:Je,titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:Je,labelFontWeight:"normal",lineThickness:1,lineColor:Ve,tickThickness:1,tickColor:Ve,gridThickness:0,gridColor:Ve,stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ot,color:st,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:Je,titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:Je,labelFontWeight:"normal",lineThickness:1,lineColor:Ve,tickThickness:1,tickColor:Ve,gridThickness:1,gridColor:Ve,stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ot,color:st,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:Je,titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:Je,labelFontWeight:"normal",lineThickness:1,lineColor:Ve,tickThickness:1,tickColor:Ve,gridThickness:1,gridColor:Ve,stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ot,color:st,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:De,fontSize:14,fontColor:it,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:De,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:Je,backgroundColor:"rgba(0, 0, 0, .7)"}},Ve="#FFFFFF",Je=it="#FAFAFA",st="#40BAF1",ot="#F5F5F5";var Tt=20,mt=14,Mn={light1:pn,light2:tn,dark1:xe,dark2:{colorSet:"colorSet2",backgroundColor:"#32373A",title:{fontFamily:De,fontSize:32,fontColor:it,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:De,fontSize:mt,fontColor:it,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{backgroundColor:"#666666",backgroundColorOnHover:"#FF7372",borderColor:"#FF7372",borderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:De,indexLabelFontSize:mt,indexLabelFontColor:Je,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:Je,titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:Je,labelFontWeight:"normal",lineThickness:1,lineColor:Ve,tickThickness:1,tickColor:Ve,gridThickness:0,gridColor:Ve,stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ot,color:st,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:Je,titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:Je,labelFontWeight:"normal",lineThickness:1,lineColor:Ve,tickThickness:1,tickColor:Ve,gridThickness:0,gridColor:Ve,stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ot,color:st,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:Je,titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:Je,labelFontWeight:"normal",lineThickness:0,lineColor:Ve,tickThickness:1,tickColor:Ve,gridThickness:1,gridColor:Ve,stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ot,color:st,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:De,titleFontSize:Tt,titleFontColor:Je,titleFontWeight:"normal",labelFontFamily:De,labelFontSize:mt,labelFontColor:Je,labelFontWeight:"normal",lineThickness:0,lineColor:Ve,tickThickness:1,tickColor:Ve,gridThickness:1,gridColor:Ve,stripLines:[{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:De,labelFontSize:mt,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ot,color:st,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:De,fontSize:14,fontColor:it,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:De,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:Je,backgroundColor:"rgba(0, 0, 0, .7)"}},theme1:pn,theme2:tn,theme3:pn},vt={numberDuration:1,yearDuration:314496e5,monthDuration:2592e6,weekDuration:6048e5,dayDuration:864e5,hourDuration:36e5,minuteDuration:6e4,secondDuration:1e3,millisecondDuration:1,dayOfWeekFromInt:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")};(function(){le.fSDec=function(ee){for(var te="",Te=0;Te<ee.length;Te++)te+=String.fromCharCode(Math.ceil(ee.length/57/5)^ee.charCodeAt(Te));return te},le.obj={trVs:"Ush`m!Wdsrhno",fntStr:"qy!B`mhcsh-!Mtbhe`!Fs`oed-!Mtbhe`!R`or!Tohbned-!@sh`m-!r`or,rdshg",txtBl:"udyuC`rdmhod",fnt:"gnou",fSy:"ghmmRuxmd",fTx:"ghmmUdyu",grClr:"fsdx",cntx:"buy",tp:"unq"},delete Ue[le.fSDec("Bi`su")][le.fSDec("bsdehuIsdg")],le.pro={sCH:Ue[le.fSDec("Bi`su")][le.fSDec("bsdehuIsdg")]},le._fTWm=function(ee){if(typeof le.pro.sCH>"u"&&!is)try{var te=ee[le.fSDec(le.obj.cntx)];te[le.fSDec(le.obj.txtBl)]=le.fSDec(le.obj.tp),te[le.fSDec(le.obj.fnt)]=11+le.fSDec(le.obj.fntStr),te[le.fSDec(le.obj.fSy)]=le.fSDec(le.obj.grClr),te[le.fSDec(le.obj.fTx)](le.fSDec(le.obj.trVs),2,ee.height-11-2)}catch{}}})();var Nn={},ui=null,Mr=function(){this.ctx.clearRect(0,0,this.width,this.height),this.backgroundColor&&(this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height))},Br=function(ee,te,Te){return te=Math.min(this.width,this.height),Math.max(this.theme==="theme4"?0:300<=te?12:10,Math.round(te*(ee/400)))},Fi=function(){var ee=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g,te="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Te="Sun Mon Tue Wed Thu Fri Sat".split(" "),Qe="January February March April May June July August September October November December".split(" "),bt="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Rt=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,Nt=/[^-+\dA-Z]/g;return function(St,kn,rn){var rr=rn?rn.days:te,Ye=rn?rn.months:Qe,rt=rn?rn.shortDays:Te,dt=rn?rn.shortMonths:bt;rn="";var Dt=!1;if(St=St&&St.getTime?St:St?new Date(St):new Date,isNaN(St))throw SyntaxError("invalid date");kn.slice(0,4)==="UTC:"&&(kn=kn.slice(4),Dt=!0),rn=Dt?"getUTC":"get";var Pt=St[rn+"Date"](),Qt=St[rn+"Day"](),pt=St[rn+"Month"](),It=St[rn+"FullYear"](),c=St[rn+"Hours"](),x=St[rn+"Minutes"](),g=St[rn+"Seconds"](),f=St[rn+"Milliseconds"](),v=Dt?0:St.getTimezoneOffset();return rn=kn.replace(ee,function(k){switch(k){case"D":return Pt;case"DD":return i(Pt,2);case"DDD":return rt[Qt];case"DDDD":return rr[Qt];case"M":return pt+1;case"MM":return i(pt+1,2);case"MMM":return dt[pt];case"MMMM":return Ye[pt];case"Y":return parseInt(String(It).slice(-2));case"YY":return i(String(It).slice(-2),2);case"YYY":return i(String(It).slice(-3),3);case"YYYY":return i(It,4);case"h":return c%12||12;case"hh":return i(c%12||12,2);case"H":return c;case"HH":return i(c,2);case"m":return x;case"mm":return i(x,2);case"s":return g;case"ss":return i(g,2);case"f":return String(f).slice(0,1);case"ff":return i(String(f).slice(0,2),2);case"fff":return i(String(f).slice(0,3),3);case"t":return 12>c?"a":"p";case"tt":return 12>c?"am":"pm";case"T":return 12>c?"A":"P";case"TT":return 12>c?"AM":"PM";case"K":return Dt?"UTC":(String(St).match(Rt)||[""]).pop().replace(Nt,"");case"z":return(0<v?"-":"+")+Math.floor(Math.abs(v)/60);case"zz":return(0<v?"-":"+")+i(Math.floor(Math.abs(v)/60),2);case"zzz":return(0<v?"-":"+")+i(Math.floor(Math.abs(v)/60),2)+i(Math.abs(v)%60,2);default:return k.slice(1,k.length-1)}})}}(),qt=function(ee,te,Te){if(ee===null)return"";if(!isFinite(ee))return ee;ee=Number(ee);var Qe=0>ee;Qe&&(ee*=-1);var bt=Te?Te.decimalSeparator:".",Rt=Te?Te.digitGroupSeparator:",",Nt="";te=String(te);var Nt=1,Pt=Te="",St=-1,kn=[],rn=[],rr=0,Ye=0,rt=0,dt=!1,Dt=0,Pt=te.match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]|\u2030|./g);te=null;for(var Qt=0;Pt&&Qt<Pt.length;Qt++)if(te=Pt[Qt],te==="."&&0>St)St=Qt;else{if(te==="%")Nt*=100;else if(te==="\u2030"){Nt*=1e3;continue}else if(te[0]===","&&te[te.length-1]==="."){Nt/=Math.pow(1e3,te.length-1),St=Qt+te.length-1;continue}else te[0]!=="E"&&te[0]!=="e"||te[te.length-1]!=="0"||(dt=!0);0>St?(kn.push(te),te==="#"||te==="0"?rr++:te===","&&rt++):(rn.push(te),te!=="#"&&te!=="0"||Ye++)}for(dt&&(te=Math.floor(ee),Pt=-Math.floor(Math.log(ee)/Math.LN10+1),Dt=ee===0?0:te===0?-(rr+Pt):String(te).length-rr,Nt/=Math.pow(10,Dt)),0>St&&(St=Qt),Nt=(ee*Nt).toFixed(Ye),te=Nt.split("."),Nt=(te[0]+"").split(""),ee=(te[1]+"").split(""),Nt&&Nt[0]==="0"&&Nt.shift(),dt=Pt=Qt=Ye=St=0;0<kn.length;)if(te=kn.pop(),te==="#"||te==="0")if(St++,St===rr){var pt=Nt,Nt=[];if(te==="0")for(te=rr-Ye-(pt?pt.length:0);0<te;)pt.unshift("0"),te--;for(;0<pt.length;)Te=pt.pop()+Te,dt++,dt%Pt===0&&Qt===rt&&0<pt.length&&(Te=Rt+Te)}else 0<Nt.length?(Te=Nt.pop()+Te,Ye++,dt++):te==="0"&&(Te="0"+Te,Ye++,dt++),dt%Pt===0&&Qt===rt&&0<Nt.length&&(Te=Rt+Te);else te[0]!=="E"&&te[0]!=="e"||te[te.length-1]!=="0"||!/[eE][+-]*[0]+/.test(te)?te===","?(Qt++,Pt=dt,dt=0,0<Nt.length&&(Te=Rt+Te)):Te=1<te.length&&(te[0]==='"'&&te[te.length-1]==='"'||te[0]==="'"&&te[te.length-1]==="'")?te.slice(1,te.length-1)+Te:te+Te:(te=0>Dt?te.replace("+","").replace("-",""):te.replace("-",""),Te+=te.replace(/[0]+/,function(It){return i(Dt,It.length)}));for(Rt="",kn=!1;0<rn.length;)te=rn.shift(),te==="#"||te==="0"?0<ee.length&&Number(ee.join(""))!==0?(Rt+=ee.shift(),kn=!0):te==="0"&&(Rt+="0",kn=!0):1<te.length&&(te[0]==='"'&&te[te.length-1]==='"'||te[0]==="'"&&te[te.length-1]==="'")?Rt+=te.slice(1,te.length-1):te[0]!=="E"&&te[0]!=="e"||te[te.length-1]!=="0"||!/[eE][+-]*[0]+/.test(te)?Rt+=te:(te=0>Dt?te.replace("+","").replace("-",""):te.replace("-",""),Rt+=te.replace(/[0]+/,function(It){return i(Dt,It.length)}));return Te+=(kn?bt:"")+Rt,Qe?"-"+Te:Te},Qn=function(ee){var te=0,Te=0;return ee=ee||window.event,ee.offsetX||ee.offsetX===0?(te=ee.offsetX,Te=ee.offsetY):ee.layerX||ee.layerX==0?(te=ee.layerX,Te=ee.layerY):(te=ee.pageX-ee.target.offsetLeft,Te=ee.pageY-ee.target.offsetTop),{x:te,y:Te}},Sr=!0,vi=window.devicePixelRatio||1,Pr=1,Wi=Sr?vi/Pr:1,li=function(ee,te,Te,Qe,bt,Rt,Nt,St,kn,rn,rr,Ye,rt){typeof rt>"u"&&(rt=1),Nt=Nt||0,St=St||"black";var dt=15<Qe-te&&15<bt-Te?8:.35*Math.min(Qe-te,bt-Te);ee.beginPath(),ee.moveTo(te,Te),ee.save(),ee.fillStyle=Rt,ee.globalAlpha=rt,ee.fillRect(te,Te,Qe-te,bt-Te),ee.globalAlpha=1,0<Nt&&(rt=Nt%2===0?0:.5,ee.beginPath(),ee.lineWidth=Nt,ee.strokeStyle=St,ee.moveTo(te,Te),ee.rect(te-rt,Te-rt,Qe-te+2*rt,bt-Te+2*rt),ee.stroke()),ee.restore(),kn===!0&&(ee.save(),ee.beginPath(),ee.moveTo(te,Te),ee.lineTo(te+dt,Te+dt),ee.lineTo(Qe-dt,Te+dt),ee.lineTo(Qe,Te),ee.closePath(),Nt=ee.createLinearGradient((Qe+te)/2,Te+dt,(Qe+te)/2,Te),Nt.addColorStop(0,Rt),Nt.addColorStop(1,"rgba(255, 255, 255, .4)"),ee.fillStyle=Nt,ee.fill(),ee.restore()),rn===!0&&(ee.save(),ee.beginPath(),ee.moveTo(te,bt),ee.lineTo(te+dt,bt-dt),ee.lineTo(Qe-dt,bt-dt),ee.lineTo(Qe,bt),ee.closePath(),Nt=ee.createLinearGradient((Qe+te)/2,bt-dt,(Qe+te)/2,bt),Nt.addColorStop(0,Rt),Nt.addColorStop(1,"rgba(255, 255, 255, .4)"),ee.fillStyle=Nt,ee.fill(),ee.restore()),rr===!0&&(ee.save(),ee.beginPath(),ee.moveTo(te,Te),ee.lineTo(te+dt,Te+dt),ee.lineTo(te+dt,bt-dt),ee.lineTo(te,bt),ee.closePath(),Nt=ee.createLinearGradient(te+dt,(bt+Te)/2,te,(bt+Te)/2),Nt.addColorStop(0,Rt),Nt.addColorStop(1,"rgba(255, 255, 255, 0.1)"),ee.fillStyle=Nt,ee.fill(),ee.restore()),Ye===!0&&(ee.save(),ee.beginPath(),ee.moveTo(Qe,Te),ee.lineTo(Qe-dt,Te+dt),ee.lineTo(Qe-dt,bt-dt),ee.lineTo(Qe,bt),Nt=ee.createLinearGradient(Qe-dt,(bt+Te)/2,Qe,(bt+Te)/2),Nt.addColorStop(0,Rt),Nt.addColorStop(1,"rgba(255, 255, 255, 0.1)"),ee.fillStyle=Nt,Nt.addColorStop(0,Rt),Nt.addColorStop(1,"rgba(255, 255, 255, 0.1)"),ee.fillStyle=Nt,ee.fill(),ee.closePath(),ee.restore())},Hi=function(ee){for(var te="",Te=0;Te<ee.length;Te++)te+=String.fromCharCode(Math.ceil(ee.length/57/5)^ee.charCodeAt(Te));return te},is=window&&window[Hi("mnb`uhno")]&&window[Hi("mnb`uhno")].href&&window[Hi("mnb`uhno")].href.indexOf&&(window[Hi("mnb`uhno")].href.indexOf(Hi("b`ow`rkr/bnl"))!==-1||window[Hi("mnb`uhno")].href.indexOf(Hi("gdonqhy/bnl"))!==-1||window[Hi("mnb`uhno")].href.indexOf(Hi("gheemd"))!==-1),Eo=is&&window[Hi("mnb`uhno")].href.indexOf(Hi("gheemd"))===-1,Jr={reset:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAeCAYAAABJ/8wUAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAPjSURBVFhHxVdJaFNRFP1J/jwkP5MxsbaC1WJEglSxOFAXIsFpVRE3ggi1K90obioRRBA33XXnQnciirhQcMCdorgQxBkXWlREkFKsWkv5npvckp/XnzRpKh64kLw733fffe9L/wrL0+mVUdO8uTSZ3MBL/we2qg4rkuSpodCELstXE46ziVkLQ6FQcGOmeSSq6wd4aV50d3drWjj8kQKZJTUc9kxFGenv79dZrDksTSTWWJp2QYtEPiErysyzdX0LsxsCQR8keX8gs6RHIk8ysdgKFg2G53mhuOPsshTlBjKaFo1g7SqLNoShKLdFXT8huQ/paLSbxatYnc2mHMM4hr18Vi8TIvCmXF3vYrW6cF23gGTOk0M1wA4RKvOmq6vLZRVJipvmSWT6tZ6CSEYkco5V50VPT4+D7RwOqi6RiSZm0fJ+vggSqkeoypdsNmuyelNwbXsbgvkWYMtzDWNvWaijoyOBqE+hVK8abcssUeXQ/YfKyi0gFYv1Ipgfoj34fYGTJLOYJA0ODirok32GLN8XhUWCwSes1hIwBg6LydJ/tEeRRapAdUp+wSAiZchtZZWWgAZ+JNpD8peYXQVK9UwUxNpzOK8pq97kURZhYTCKBwPD7h2zK+js7Myi7D8Fod+0TkMI8+EMAngLGc/WtBFWawkFHFnoj/t9KLgGmF0B3QfkxC+EarxkdhnFYlFLY06USqUwL7UMjICHfh/wOc2sCqhpxGbCkLvL7EUDbF73+6DkmVWB6zi7xUDQSLeYvWjAILvm9zEnkJhlbRcDQZcv6Kg2AipyT/Axw6wKlqVSqxDdjF8Izfod13qURdrG/nxehY+xGh+h0CSzKygGvSNQIcc097BI24jb9hax6kj2E7OrMFX1il+ICEf2NrPbhiXLl+fYl+U7zK4iYdsDcyLGf+ofFlkwcN+s10KhmpuYhhtm0hCLVIFL0MDsqNlDIqy9x2CLs1jL6OvrI7vPRbtohXG6eFmsFnHDGAp6n9AgyuVySRZrGvROxRgIfLXhzjrNYnNBUxNX/dMgRWT1mt4XLDovaApD53E9W3ilNX5M55LJHpRtIsgAvciR4WWcgK2Dvb1YqgXevmF8z2zEBTcKG39EfSKsT9EbhVUaI2FZO+oZIqImxol6j66/hcAu4sSN4vc1ZPoKeoE6RGhYL2YYA+ymOSSi0Z0wWntbtkGUWCvfSDXIxONraZ/FY90KUfNTpfC5spnNLgxoYNnR9RO4F8ofXEHOgogCQE99w+fF2Xw+b7O59rEOsyRqGEfpVoaDMQQ1CZrG46bcM6AZ0C/wPqNfHliqejyTySxh9TqQpL+xmbIlkB9SlAAAAABJRU5ErkJggg=="},pan:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAICSURBVEhLxZbPahNRGMUn/5MpuAiBEAIufQGfzr5E40YptBXajYzudCEuGqS+gGlrFwquDGRTutBdYfydzJ3LzeQmJGZue+Dw/Z17Mnfmu5Pof9Hr9Z61Wq0bWZMKj263O6xWq99wU9lOpzPMKgEhEcRucNOcioOK+0RzBhNvt9tPV4nmVF19+OWhVqt9xXgFXZq+8lCv119UKpUJ7iX2FmvFTKz8RH34YdBsNk8wVtjE4fGYwm8wrrDi3WBG5oKXZGRSS9hGuNFojLTe2lFz5xThWZIktayyiE2FdT3rzXBXz7krKiL8c17wAKFDjCus2AvW+YGZ9y2JF0VFRuMPfI//rsCE/C+s26s4gQu9ul7r4NteKx7H8XOC724xNNGbaNu++IrBqbOV7Tj3FgMRvc/YKOr3+3sE47wgEt/Bl/gaK5cHbNU11vYSXylfpK7XOvjuumPp4Wcoipu30Qsez2uMXYz4lfI+mOmwothY+SLiXJy7mKVpWs3Si0CoOMfeI9Od43Wic+jO+ZVv+crsm9QSNhUW9LXSeoPBYLXopthGuFQgdIxxhY+UDwlt1x5CZ1hX+NTUdt/OIvjKaDSmuOJfaIVNPKX+W18j/PLA2/kR44p5Sd8HbHngT/yTfNRWUXX14ZcL3wmX0+TLf8YO7CGT8yFE5zB3/gney25/OETRP9CtPDFe5jShAAAAAElFTkSuQmCC"},zoom:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALWSURBVEhLvZZLaBNRFIabyftBIgEfqCCBoCC6MYqiXYiIj4U76U4X7sUHbhQhUBfixhZEUBDB16YuFERaUaQLK7ooCOJj4UKtYEFU0EptShO/A9Ph3js3k8lo/eHnP7n3nP/M3LlzMz1hkUwmNziOcyKRSFyFt+LxeD/c2Wq1Ym7Kv0M2m11Os1OxWGycn1OwZXCGuXfwIhezkd9/jRgNT2L4ldhs1pbkX5OLJe4euVxuGQaPCa3mnUjtJx7BDuKusJTCV6jVVGHTMuYRjxma7yIOhTgFY6jNaAKew2xPKpVay9ganmkvj+M448/MfJdT5K5Gg4HJacRngPFgqVRaRNwW1B4i7yehWfsEDdz1K+A01AoxPIqGAiuwGfkOTY8+1A6u7AyiFTB2Hu0KPIrdiOnzHLWDybeImvy+Wq2mZa5bUHsD0Zpz+KxHdWQymV6kAb1ElqeORgJLvgnRdj1+R1AfzkIvSUjxVjQSarVakrueIPT8+H1F5jSUy+WXiJrUYBVWyVxU4PEU8TzhfaijUqnMIWrjaY492eWRwdKOIqrnIxnXwLLeRLwk2GQzrEMjg0avEbXxkIxr4OoOImpj2QwyFgms1koa/SZUG8s+0iGnEhNfCNXEhzIXBVz0McTzEvJ+70P9oNFtxEzei3aFYrFYxmuSUPWSv9Yi9IMm2xE1We56Mp1OV4nDwqFmBDV9gk9AEh4gZtFHNt8W4kAUCoXF5MorY9Z/kDni9nDv7hc0i2fhgLvTtX8a99PoMPPagTFPxofRzmDJ9yM+AyEmTfgGysYbQcfhDzPPJDmX0c7gDg4gs9BqFIWhm/Nct5H8gtBq1I7UfIbtvmIuoaGQcp+fdpbbSM43eEH5wrwLbXmhm/fU63VHXjcuok7hEByFY/AeHGC8L5/PL3HT5xGH1uYwfPOICGo+CBcU0vwO1BqzUqILDl/z/9VYIMfpddiAc47jDP8BsUpb13wOLRwAAAAASUVORK5CYII="},menu:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAeCAYAAABE4bxTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADoSURBVFhH7dc9CsJAFATgRxIIBCwCqZKATX5sbawsY2MvWOtF9AB6AU8gguAJbD2AnZ2VXQT/Ko2TYGCL2OYtYQc+BuYA+1hCtnCVwMm27SGaXpDJIAiCvCkVR05hGOZNN3HkFMdx3nQRR06+76/R1IcFLJlNQEWlmWlBTwJtKLKHynehZqnjOGM0PYWRVXk61C37p7xlZ3Hk5HneCk1dmMH811xGoKLSzDiQwIBZB4ocoPJdqNkDt2yKlueWRVGUtzy3rPwo3sWRU3nLjuLI6OO67oZM00wMw3hrmpZx0XU9syxrR0T0BeMpb9dneSR2AAAAAElFTkSuQmCC"},handle:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAAzwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7sqSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII="}};me.prototype.setOptions=function(ee,te){if(Ue[this._defaultsKey]){var Te=Ue[this._defaultsKey],Qe;for(Qe in Te)Qe!=="publicProperties"&&Te.hasOwnProperty(Qe)&&(this[Qe]=ee&&Qe in ee?ee[Qe]:te&&Qe in te?te[Qe]:Te[Qe])}else G&&window.console&&console.log("defaults not set")},me.prototype.get=function(ee){var te=Ue[this._defaultsKey];if(ee==="options")return this.options&&this.options._isPlaceholder?null:this.options;if(te.hasOwnProperty(ee)||te.publicProperties&&te.publicProperties.hasOwnProperty(ee))return this[ee];window.console&&window.console.log('Property "'+ee+`" doesn't exist. Please check for typo.`)},me.prototype.set=function(ee,te,Te){Te=typeof Te>"u"?!0:Te;var Qe=Ue[this._defaultsKey];if(ee==="options")this.createUserOptions(te);else if(Qe.hasOwnProperty(ee)||Qe.publicProperties&&Qe.publicProperties.hasOwnProperty(ee)&&Qe.publicProperties[ee]==="readWrite")this.options._isPlaceholder&&this.createUserOptions(),this.options[ee]=te;else{window.console&&(Qe.publicProperties&&Qe.publicProperties.hasOwnProperty(ee)&&Qe.publicProperties[ee]==="readOnly"?window.console.log('Property "'+ee+'" is read-only.'):window.console.log('Property "'+ee+`" doesn't exist. Please check for typo.`));return}Te&&(this.stockChart||this.chart||this).render()},me.prototype.addTo=function(ee,te,Te,Qe){Qe=typeof Qe>"u"?!0:Qe;var bt=Ue[this._defaultsKey];bt.hasOwnProperty(ee)||bt.publicProperties&&bt.publicProperties.hasOwnProperty(ee)&&bt.publicProperties[ee]==="readWrite"?(this.options._isPlaceholder&&this.createUserOptions(),typeof this.options[ee]>"u"&&(this.options[ee]=[]),ee=this.options[ee],Te=typeof Te>"u"||Te===null?ee.length:Te,ee.splice(Te,0,te),Qe&&(this.chart||this).render()):window.console&&(bt.publicProperties&&bt.publicProperties.hasOwnProperty(ee)&&bt.publicProperties[ee]==="readOnly"?window.console.log('Property "'+ee+'" is read-only.'):window.console.log('Property "'+ee+`" doesn't exist. Please check for typo.`))},me.prototype.createUserOptions=function(ee){if(typeof ee<"u"||this.options._isPlaceholder)if(this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.isOptionsInArray){this.parent.options[this.optionsName]||(this.parent.options[this.optionsName]=[]);var te=this.parent.options[this.optionsName],Te=te.length;this.options._isPlaceholder||(_(te),Te=te.indexOf(this.options)),this.options=typeof ee>"u"?{}:ee,te[Te]=this.options}else this.options=typeof ee>"u"?{}:ee,ee=this.parent.options,this.optionsName?te=this.optionsName:(te=this._defaultsKey)&&te.length!==0?(Te=te.charAt(0).toLowerCase(),1<te.length&&(Te=Te.concat(te.slice(1))),te=Te):te=void 0,ee[te]=this.options},me.prototype.remove=function(ee){if(ee=typeof ee>"u"?!0:ee,this.isOptionsInArray){var te=this.parent.options[this.optionsName];_(te);var Te=te.indexOf(this.options);0<=Te&&te.splice(Te,1)}else delete this.parent.options[this.optionsName];ee&&(this.chart||this).render()},me.prototype.updateOption=function(ee){!Ue[this._defaultsKey]&&G&&window.console&&console.log("defaults not set");var te=Ue[this._defaultsKey],Te={},Qe=this[ee],bt=this._themeOptionsKey,Rt=this._index;return this.theme&&h(bt)&&h(Rt)?Te=h(Mn[this.theme])?Mn.light1:Mn[this.theme]:this.parent&&this.parent.themeOptions&&this.parent.themeOptions[bt]&&(Rt===null?Te=this.parent.themeOptions[bt]:0<this.parent.themeOptions[bt].length&&(Te=Math.min(this.parent.themeOptions[bt].length-1,Rt),Te=this.parent.themeOptions[bt][Te])),this.themeOptions=Te,ee in te&&(Qe=ee in this.options?this.options[ee]:Te&&ee in Te?Te[ee]:te[ee]),Qe===this[ee]?!1:(this[ee]=Qe,!0)},me.prototype.trackChanges=function(ee){if(!this.sessionVariables)throw"Session Variable Store not set";this.sessionVariables[ee]=this.options[ee]},me.prototype.isBeingTracked=function(ee){return this.options._oldOptions||(this.options._oldOptions={}),!!this.options._oldOptions[ee]},me.prototype.hasOptionChanged=function(ee){if(!this.sessionVariables)throw"Session Variable Store not set";return this.sessionVariables[ee]!==this.options[ee]},me.prototype.addEventListener=function(ee,te,Te){ee&&te&&(this._eventListeners[ee]=this._eventListeners[ee]||[],this._eventListeners[ee].push({context:Te||this,eventHandler:te}))},me.prototype.removeEventListener=function(ee,te){if(ee&&te&&this._eventListeners[ee]){for(var Te=this._eventListeners[ee],Qe=0;Qe<Te.length;Qe++)if(Te[Qe].eventHandler===te){Te[Qe].splice(Qe,1);break}}},me.prototype.removeAllEventListeners=function(){this._eventListeners=[]},me.prototype.dispatchEvent=function(ee,te,Te){if(ee&&this._eventListeners[ee]){te=te||{};for(var Qe=this._eventListeners[ee],bt=0;bt<Qe.length;bt++)Qe[bt].eventHandler.call(Qe[bt].context,te)}typeof this[ee]=="function"&&this[ee].call(Te||this.chart,te)},K.prototype.registerSpace=function(ee,te){ee==="top"?this._topOccupied+=te.height:ee==="bottom"?this._bottomOccupied+=te.height:ee==="left"?this._leftOccupied+=te.width:ee==="right"&&(this._rightOccupied+=te.width)},K.prototype.unRegisterSpace=function(ee,te){ee==="top"?this._topOccupied-=te.height:ee==="bottom"?this._bottomOccupied-=te.height:ee==="left"?this._leftOccupied-=te.width:ee==="right"&&(this._rightOccupied-=te.width)},K.prototype.getFreeSpace=function(){return{x1:this._x1+this._leftOccupied,y1:this._y1+this._topOccupied,x2:this._x2-this._rightOccupied,y2:this._y2-this._bottomOccupied,width:this._x2-this._x1-this._rightOccupied-this._leftOccupied,height:this._y2-this._y1-this._bottomOccupied-this._topOccupied}},K.prototype.reset=function(){this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding},t(ue,me),ue.prototype._initialize=function(){h(this.padding)||typeof this.padding!="object"?this.topPadding=this.rightPadding=this.bottomPadding=this.leftPadding=Number(this.padding)|0:(this.topPadding=h(this.padding.top)?0:Number(this.padding.top)|0,this.rightPadding=h(this.padding.right)?0:Number(this.padding.right)|0,this.bottomPadding=h(this.padding.bottom)?0:Number(this.padding.bottom)|0,this.leftPadding=h(this.padding.left)?0:Number(this.padding.left)|0)},ue.prototype.render=function(ee){if(this.fontSize!==0){ee&&this.ctx.save();var te=this.ctx.font;this.ctx.textBaseline=this.textBaseline;var Te=0;this._isDirty&&this.measureText(this.ctx),this.ctx.translate(this.x,this.y+Te),this.textBaseline==="middle"&&(Te=-this._lineHeight/2),this.ctx.font=this._getFontString(),this.ctx.rotate(Math.PI/180*this.angle);var Qe=0,bt=this.topPadding,Rt=null;for(this.ctx.roundRect||s(this.ctx),(0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(0,Te,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor),this.ctx.fillStyle=this.fontColor,Te=0;Te<this._wrappedText.lines.length;Te++)Rt=this._wrappedText.lines[Te],this.horizontalAlign==="right"?Qe=(this.width-(this.leftPadding+this.rightPadding))/2-Rt.width/2+this.leftPadding:this.horizontalAlign==="left"?Qe=this.leftPadding:this.horizontalAlign==="center"&&(Qe=(this.width-(this.leftPadding+this.rightPadding))/2-Rt.width/2+this.leftPadding),this.ctx.fillText(Rt.text,Qe,bt),bt+=Rt.height;this.ctx.font=te,ee&&this.ctx.restore()}},ue.prototype.setText=function(ee){this.text=ee,this._isDirty=!0,this._wrappedText=null},ue.prototype.measureText=function(){if(this._lineHeight=w(this.fontFamily,this.fontSize,this.fontWeight),this.maxWidth===null)throw"Please set maxWidth and height for TextBlock";return this._wrapText(this.ctx),this._isDirty=!1,{width:this.width,height:this.height}},ue.prototype._getLineWithWidth=function(ee,te,Te){if(ee=String(ee),!ee)return{text:"",width:0};var Qe=Te=0,bt=ee.length-1,Rt=1/0;for(this.ctx.font=this._getFontString();Qe<=bt;){var Rt=Math.floor((Qe+bt)/2),Nt=ee.substr(0,Rt+1);if(Te=this.ctx.measureText(Nt).width,Te<te)Qe=Rt+1;else if(Te>te)bt=Rt-1;else break}return Te>te&&1<Nt.length&&(Nt=Nt.substr(0,Nt.length-1),Te=this.ctx.measureText(Nt).width),te=!0,(Nt.length===ee.length||ee[Nt.length]===" ")&&(te=!1),te&&(ee=Nt.split(" "),1<ee.length&&ee.pop(),Nt=ee.join(" "),Te=this.ctx.measureText(Nt).width),{text:Nt,width:Te}},ue.prototype._wrapText=function(){var ee=new String(r(String(this.text))),te=[],Te=this.ctx.font,Qe=0,bt=0;if(this.ctx.font=this._getFontString(),this.frontSize===0)bt=Qe=0;else for(;0<ee.length;){var Rt=this.maxHeight-(this.topPadding+this.bottomPadding),Nt=this._getLineWithWidth(ee,this.maxWidth-(this.leftPadding+this.rightPadding),!1);Nt.height=this._lineHeight,te.push(Nt);var St=bt,bt=Math.max(bt,Nt.width),Qe=Qe+Nt.height,ee=r(ee.slice(Nt.text.length,ee.length));Rt&&Qe>Rt&&(Nt=te.pop(),Qe-=Nt.height,bt=St)}this._wrappedText={lines:te,width:bt,height:Qe},this.width=bt+(this.leftPadding+this.rightPadding),this.height=Qe+(this.topPadding+this.bottomPadding),this.ctx.font=Te},ue.prototype._getFontString=function(){var ee;ee=this.fontStyle?this.fontStyle+" ":"",ee+=this.fontWeight?this.fontWeight+" ":"",ee+=this.fontSize?this.fontSize+"px ":"";var te=this.fontFamily?this.fontFamily+"":"";return!X&&te&&(te=te.split(",")[0],te[0]!=="'"&&te[0]!=='"'&&(te="'"+te+"'")),ee+=te},t(be,me),t(Z,me),Z.prototype.setLayout=function(){if(this.text){var ee=this.dockInsidePlotArea?this.chart.plotArea:this.chart,te=ee.layoutManager.getFreeSpace(),Te=te.x1,Qe=te.y1,bt=0,Rt=0,Nt=this.chart._menuButton&&this.chart.exportEnabled&&this.verticalAlign==="top"?22:0,St,kn;this.verticalAlign==="top"||this.verticalAlign==="bottom"?(this.maxWidth===null&&(this.maxWidth=te.width-4-Nt*(this.horizontalAlign==="center"?2:1)),Rt=.5*te.height-this.margin-2,bt=0):this.verticalAlign==="center"&&(this.horizontalAlign==="left"||this.horizontalAlign==="right"?(this.maxWidth===null&&(this.maxWidth=te.height-4),Rt=.5*te.width-this.margin-2):this.horizontalAlign==="center"&&(this.maxWidth===null&&(this.maxWidth=te.width-4),Rt=.5*te.height-4));var rn;h(this.padding)||typeof this.padding!="number"?h(this.padding)||typeof this.padding!="object"||(rn=this.padding.top?this.padding.top:this.padding.bottom?this.padding.bottom:0,rn+=this.padding.bottom?this.padding.bottom:this.padding.top?this.padding.top:0,rn*=1.25):rn=2.5*this.padding,this.wrap||(Rt=Math.min(Rt,Math.max(1.5*this.fontSize,this.fontSize+rn))),Rt=new ue(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,horizontalAlign:this.horizontalAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:this.maxWidth,maxHeight:Rt,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:"top"}),rn=Rt.measureText(),this.verticalAlign==="top"||this.verticalAlign==="bottom"?(this.verticalAlign==="top"?(Qe=te.y1+2,kn="top"):this.verticalAlign==="bottom"&&(Qe=te.y2-2-rn.height,kn="bottom"),this.horizontalAlign==="left"?Te=te.x1+2:this.horizontalAlign==="center"?Te=te.x1+te.width/2-rn.width/2:this.horizontalAlign==="right"&&(Te=te.x2-2-rn.width-Nt),St=this.horizontalAlign,this.width=rn.width,this.height=rn.height):this.verticalAlign==="center"&&(this.horizontalAlign==="left"?(Te=te.x1+2,Qe=te.y2-2-(this.maxWidth/2-rn.width/2),bt=-90,kn="left",this.width=rn.height,this.height=rn.width):this.horizontalAlign==="right"?(Te=te.x2-2,Qe=te.y1+2+(this.maxWidth/2-rn.width/2),bt=90,kn="right",this.width=rn.height,this.height=rn.width):this.horizontalAlign==="center"&&(Qe=ee.y1+(ee.height/2-rn.height/2),Te=ee.x1+(ee.width/2-rn.width/2),kn="center",this.width=rn.width,this.height=rn.height),St="center"),Rt.x=Te,Rt.y=Qe,Rt.angle=bt,Rt.horizontalAlign=St,this._textBlock=Rt,ee.layoutManager.registerSpace(kn,{width:this.width+(kn==="left"||kn==="right"?this.margin+2:0),height:this.height+(kn==="top"||kn==="bottom"?this.margin+2:0)}),this.bounds={x1:Te,y1:Qe,x2:Te+this.width,y2:Qe+this.height},this.ctx.textBaseline="top"}},Z.prototype.render=function(){this._textBlock&&this._textBlock.render(!0)},t(oe,me),oe.prototype.setLayout=Z.prototype.setLayout,oe.prototype.render=Z.prototype.render,Ee.prototype.get=function(ee,te){var Te=null;return 0<this.pool.length?(Te=this.pool.pop(),ne(Te,ee,te)):Te=q(ee,te),Te},Ee.prototype.release=function(ee){this.pool.push(ee)},t(Y,me);var Pi={addTheme:function(ee,te){Mn[ee]=te},addColorSet:function(ee,te){ke[ee]=te},addCultureInfo:function(ee,te){Ze[ee]=te},formatNumber:function(ee,te,Te){if(Te=Te||"en",Ze[Te])return qt(ee,te||"#,##0.##",new Y(Te));throw"Unknown Culture Name"},formatDate:function(ee,te,Te){if(Te=Te||"en",Ze[Te])return Fi(ee,te||"DD MMM YYYY",new Y(Te));throw"Unknown Culture Name"}};typeof ty<"u"&&typeof ty.exports<"u"?ty.exports=Pi:typeof define=="function"&&define.amd?define([],function(){return Pi}):window.CanvasJS=Pi,Pi.Chart=function(){function ee(c,x){return c.x-x.x}function te(c,x){x=x||{},this.theme=h(x.theme)||h(Mn[x.theme])?"light1":x.theme,te.base.constructor.call(this,"Chart",null,x,null,null);var g=this;if(this._containerId=c,this._objectsInitialized=!1,this.overlaidCanvasCtx=this.ctx=null,this._indexLabels=[],this._panTimerId=0,this._lastTouchEventType="",this._lastTouchData=null,this.isAnimating=!1,this.renderCount=0,this.disableToolTip=this.animatedRender=!1,this.canvasPool=new Ee,this.allDOMEventHandlers=[],this.panEnabled=!1,this._defaultCursor="default",this.plotArea={canvas:null,ctx:null,x1:0,y1:0,x2:0,y2:0,width:0,height:0},this._dataInRenderedOrder=[],this.container=typeof this._containerId=="string"?document.getElementById(this._containerId):this._containerId){this.container.innerHTML="";var f=0,v=0,f=this.options.width?this.width:0<this.container.clientWidth?this.container.clientWidth:this.width,v=this.options.height?this.height:0<this.container.clientHeight?this.container.clientHeight:this.height;this.width=f,this.height=v,this.x1=this.y1=0,this.x2=this.width,this.y2=this.height,this._selectedColorSet=typeof ke[this.colorSet]<"u"?ke[this.colorSet]:ke.colorSet1,this._canvasJSContainer=document.createElement("div"),this._canvasJSContainer.setAttribute("class","canvasjs-chart-container"),this._canvasJSContainer.style.position="relative",this._canvasJSContainer.style.textAlign="left",this._canvasJSContainer.style.cursor="auto",X||(this._canvasJSContainer.style.height="0px"),this.container.appendChild(this._canvasJSContainer),this.canvas=q(f,v),this._preRenderCanvas=q(f,v),this.canvas.style.position="absolute",this.canvas.style.WebkitUserSelect="none",this.canvas.style.MozUserSelect="none",this.canvas.style.msUserSelect="none",this.canvas.style.userSelect="none",this.canvas.getContext&&(this._canvasJSContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",s(this.ctx),this._preRenderCtx=this._preRenderCanvas.getContext("2d"),this._preRenderCtx.textBaseline="top",s(this._preRenderCtx),X?this.plotArea.ctx=this.ctx:(this.plotArea.canvas=q(f,v),this.plotArea.canvas.style.position="absolute",this.plotArea.canvas.setAttribute("class","plotAreaCanvas"),this._canvasJSContainer.appendChild(this.plotArea.canvas),this.plotArea.ctx=this.plotArea.canvas.getContext("2d")),this.overlaidCanvas=q(f,v),this.overlaidCanvas.style.position="absolute",this.overlaidCanvas.style.webkitTapHighlightColor="transparent",this.overlaidCanvas.style.WebkitUserSelect="none",this.overlaidCanvas.style.MozUserSelect="none",this.overlaidCanvas.style.msUserSelect="none",this.overlaidCanvas.style.userSelect="none",this.overlaidCanvas.getContext&&(this._canvasJSContainer.appendChild(this.overlaidCanvas),this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d"),this.overlaidCanvasCtx.textBaseline="top",s(this.overlaidCanvasCtx)),this._eventManager=new dt(this),this.windowResizeHandler=L(window,"resize",function(){g._updateSize()&&g.render()},this.allDOMEventHandlers),this._toolBar=document.createElement("div"),this._toolBar.setAttribute("class","canvasjs-chart-toolbar"),this._toolBar.style.cssText="position: absolute; right: 1px; top: 1px;",this._canvasJSContainer.appendChild(this._toolBar),this.bounds={x1:0,y1:0,x2:this.width,y2:this.height},L(this.overlaidCanvas,"click",function(k){g._mouseEventHandler(k)},this.allDOMEventHandlers),L(this.overlaidCanvas,"mousemove",function(k){g._mouseEventHandler(k)},this.allDOMEventHandlers),L(this.overlaidCanvas,"mouseup",function(k){g._mouseEventHandler(k)},this.allDOMEventHandlers),L(this.overlaidCanvas,"mousedown",function(k){g._mouseEventHandler(k),Me(g._dropdownMenu)},this.allDOMEventHandlers),L(this.overlaidCanvas,"mouseout",function(k){g._mouseEventHandler(k)},this.allDOMEventHandlers),L(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",function(k){g._touchEventHandler(k)},this.allDOMEventHandlers),L(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",function(k){g._touchEventHandler(k)},this.allDOMEventHandlers),L(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerUp":"touchend",function(k){g._touchEventHandler(k)},this.allDOMEventHandlers),L(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel",function(k){g._touchEventHandler(k)},this.allDOMEventHandlers),this.toolTip=new rt(this,this.options.toolTip),this.data=null,this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this.sessionVariables={axisX:[],axisX2:[],axisY:[],axisY2:[]})}else window.console&&window.console.log('CanvasJS Error: Chart Container with id "'+this._containerId+'" was not found')}function Te(c,x){for(var g=[],f,v=0;v<c.length;v++)if(v==0)g.push(c[0]);else{var k,A,O;O=v-1,k=O===0?0:O-1,A=O===c.length-1?O:O+1,f=Math.abs((c[A].x-c[k].x)/(c[A].x-c[O].x===0?.01:c[A].x-c[O].x))*(x-1)/2+1;var N=(c[A].x-c[k].x)/f;f=(c[A].y-c[k].y)/f,g[g.length]=c[O].x>c[k].x&&0<N||c[O].x<c[k].x&&0>N?{x:c[O].x+N/3,y:c[O].y+f/3}:{x:c[O].x,y:c[O].y+f/9},O=v,k=O===0?0:O-1,A=O===c.length-1?O:O+1,f=Math.abs((c[A].x-c[k].x)/(c[O].x-c[k].x===0?.01:c[O].x-c[k].x))*(x-1)/2+1,N=(c[A].x-c[k].x)/f,f=(c[A].y-c[k].y)/f,g[g.length]=c[O].x>c[k].x&&0<N||c[O].x<c[k].x&&0>N?{x:c[O].x-N/3,y:c[O].y-f/3}:{x:c[O].x,y:c[O].y-f/9},g[g.length]=c[v]}return g}function Qe(c,x,g,f,v,k,A,O,N,D){var V=0;D?(A.color=k,O.color=k):D=1,V=Math.abs(N?v-g:f-x),V=0<A.trimLength?Math.abs(V*A.trimLength/100):Math.abs(V-A.length),N?(g+=V/2,v-=V/2):(x+=V/2,f-=V/2);var V=Math.round(A.thickness)%2===1?.5:0,F=Math.round(O.thickness)%2===1?.5:0;c.save(),c.globalAlpha=D,c.strokeStyle=O.color||k,c.lineWidth=O.thickness||2,c.setLineDash&&c.setLineDash(S(O.dashType,O.thickness)),c.beginPath(),N&&0<O.thickness?(c.moveTo(f-A.thickness/2,Math.round((g+v)/2)-F),c.lineTo(x+A.thickness/2,Math.round((g+v)/2)-F)):0<O.thickness&&(c.moveTo(Math.round((x+f)/2)-F,g+A.thickness/2),c.lineTo(Math.round((x+f)/2)-F,v-A.thickness/2)),c.stroke(),c.strokeStyle=A.color||k,c.lineWidth=A.thickness||2,c.setLineDash&&c.setLineDash(S(A.dashType,A.thickness)),c.beginPath(),N&&0<A.thickness?(c.moveTo(f-V,g),c.lineTo(f-V,v),c.moveTo(x+V,g),c.lineTo(x+V,v)):0<A.thickness&&(c.moveTo(x,g+V),c.lineTo(f,g+V),c.moveTo(x,v-V),c.lineTo(f,v-V)),c.stroke(),c.restore()}function bt(c,x,g,f,v){return c===null||typeof c>"u"?typeof g>"u"?x:g:(c=parseFloat(c.toString())*(0<=c.toString().indexOf("%")?x/100:1),typeof f<"u"&&(c=Math.min(f,c),typeof v<"u"&&(c=Math.max(v,c))),!isNaN(c)&&c<=x&&0<=c?c:typeof g>"u"?x:g)}function Rt(c,x){Rt.base.constructor.call(this,"Legend","legend",x,null,c),this.chart=c,this.canvas=c.canvas,this.ctx=this.chart.ctx,this.ghostCtx=this.chart._eventManager.ghostCtx,this.items=[],this.optionsName="legend",this.height=this.width=0,this.orientation=null,this.dataSeries=[],this.bounds={x1:null,y1:null,x2:null,y2:null},typeof this.options.fontSize>"u"&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.lineHeight=w(this.fontFamily,this.fontSize,this.fontWeight),this.horizontalSpacing=this.fontSize}function Nt(c,x,g,f){for(Nt.base.constructor.call(this,"DataSeries","data",x,g,c),this.chart=c,this.canvas=c.canvas,this._ctx=c.canvas.ctx,this.index=g,this.noDataPointsInPlotArea=0,this.id=f,this.chart._eventManager.objectMap[f]={id:f,objectType:"dataSeries",dataSeriesIndex:g},c=x.dataPoints?x.dataPoints.length:0,this.dataPointEOs=[],x=0;x<c;x++)this.dataPointEOs[x]={};this.dataPointIds=[],this.plotUnit=[],this.axisY=this.axisX=null,this.optionsName="data",this.isOptionsInArray=!0,this.fillOpacity===null&&(this.type.match(/area/i)?this.fillOpacity=.7:this.fillOpacity=1),this.axisPlacement=this.getDefaultAxisPlacement(),typeof this.options.indexLabelFontSize>"u"&&(this.indexLabelFontSize=this.chart.getAutoFontSize(this.indexLabelFontSize))}function St(c,x,g,f,v,k){if(St.base.constructor.call(this,"Axis",x,g,f,c),this.chart=c,this.canvas=c.canvas,this.ctx=c.ctx,this.intervalStartPosition=this.maxHeight=this.maxWidth=0,this.labels=[],this.dataSeries=[],this._stripLineLabels=this._ticks=this._labels=null,this.dataInfo={min:1/0,max:-1/0,viewPortMin:1/0,viewPortMax:-1/0,minDiff:1/0},this.isOptionsInArray=!0,v==="axisX"?(k==="left"||k==="bottom"?(this.optionsName="axisX",h(this.chart.sessionVariables.axisX[f])&&(this.chart.sessionVariables.axisX[f]={}),this.sessionVariables=this.chart.sessionVariables.axisX[f]):(this.optionsName="axisX2",h(this.chart.sessionVariables.axisX2[f])&&(this.chart.sessionVariables.axisX2[f]={}),this.sessionVariables=this.chart.sessionVariables.axisX2[f]),this.options.interval||(this.intervalType=null)):k==="left"||k==="bottom"?(this.optionsName="axisY",h(this.chart.sessionVariables.axisY[f])&&(this.chart.sessionVariables.axisY[f]={}),this.sessionVariables=this.chart.sessionVariables.axisY[f]):(this.optionsName="axisY2",h(this.chart.sessionVariables.axisY2[f])&&(this.chart.sessionVariables.axisY2[f]={}),this.sessionVariables=this.chart.sessionVariables.axisY2[f]),typeof this.options.titleFontSize>"u"&&(this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize)),typeof this.options.labelFontSize>"u"&&(this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize)),this.type=v,v!=="axisX"||g&&typeof g.gridThickness<"u"||(this.gridThickness=0),this._position=k,this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null},this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>this.labelAngle?this.labelAngle-=180:270<=this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360),this.options.scaleBreaks&&(this.scaleBreaks=new kn(this.chart,this.options.scaleBreaks,++this.chart._eventManager.lastObjectId,this)),this.stripLines=[],this.options.stripLines&&0<this.options.stripLines.length)for(c=0;c<this.options.stripLines.length;c++)this.stripLines.push(new rr(this.chart,this.options.stripLines[c],c,++this.chart._eventManager.lastObjectId,this));this.options.crosshair&&(this.crosshair=new Ye(this.chart,this.options.crosshair,this)),this._titleTextBlock=null,this.hasOptionChanged("viewportMinimum")&&this.viewportMinimum===null&&(this.options.viewportMinimum=void 0,this.sessionVariables.viewportMinimum=null),this.hasOptionChanged("viewportMinimum")||isNaN(this.sessionVariables.newViewportMinimum)||this.sessionVariables.newViewportMinimum===null?this.sessionVariables.newViewportMinimum=null:this.viewportMinimum=this.sessionVariables.newViewportMinimum,this.hasOptionChanged("viewportMaximum")&&this.viewportMaximum===null&&(this.options.viewportMaximum=void 0,this.sessionVariables.viewportMaximum=null),this.hasOptionChanged("viewportMaximum")||isNaN(this.sessionVariables.newViewportMaximum)||this.sessionVariables.newViewportMaximum===null?this.sessionVariables.newViewportMaximum=null:this.viewportMaximum=this.sessionVariables.newViewportMaximum,this.minimum!==null&&this.viewportMinimum!==null&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum)),this.maximum!==null&&this.viewportMaximum!==null&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum)),this.trackChanges("viewportMinimum"),this.trackChanges("viewportMaximum")}function kn(c,x,g,f){if(kn.base.constructor.call(this,"ScaleBreaks","scaleBreaks",x,null,f),this.id=g,this.chart=c,this.ctx=this.chart.ctx,this.axis=f,this.optionsName="scaleBreaks",this.isOptionsInArray=!1,this._appliedBreaks=[],this.customBreaks=[],this.autoBreaks=[],typeof this.spacing=="string"?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?8:(10<this.spacing?10:this.spacing)+"%"):typeof this.spacing!="number"&&(this.spacing=8),this.autoCalculate&&(this.maxNumberOfAutoBreaks=Math.min(this.maxNumberOfAutoBreaks,5)),this.options.customBreaks&&0<this.options.customBreaks.length){for(c=0;c<this.options.customBreaks.length;c++)this.customBreaks.push(new rn(this.chart,"customBreaks",this.options.customBreaks[c],c,++this.chart._eventManager.lastObjectId,this)),typeof this.customBreaks[c].startValue=="number"&&typeof this.customBreaks[c].endValue=="number"&&this.customBreaks[c].endValue!==this.customBreaks[c].startValue&&this._appliedBreaks.push(this.customBreaks[c]);for(this._appliedBreaks.sort(function(v,k){return v.startValue-k.startValue}),c=0;c<this._appliedBreaks.length-1;c++)this._appliedBreaks[c].endValue>=this._appliedBreaks[c+1].startValue&&(this._appliedBreaks[c].endValue=Math.max(this._appliedBreaks[c].endValue,this._appliedBreaks[c+1].endValue),window.console&&window.console.log("CanvasJS Error: Breaks "+c+" and "+(c+1)+" are overlapping."),this._appliedBreaks.splice(c,2),c--)}}function rn(c,x,g,f,v,k){rn.base.constructor.call(this,"Break",x,g,f,k),this.id=v,this.chart=c,this.ctx=this.chart.ctx,this.scaleBreaks=k,this.optionsName=x,this.isOptionsInArray=!0,this.type=g.type?this.type:k.type,this.fillOpacity=h(g.fillOpacity)?k.fillOpacity:this.fillOpacity,this.lineThickness=h(g.lineThickness)?k.lineThickness:this.lineThickness,this.color=g.color?this.color:k.color,this.lineColor=g.lineColor?this.lineColor:k.lineColor,this.lineDashType=g.lineDashType?this.lineDashType:k.lineDashType,!h(this.startValue)&&this.startValue.getTime&&(this.startValue=this.startValue.getTime()),!h(this.endValue)&&this.endValue.getTime&&(this.endValue=this.endValue.getTime()),typeof this.startValue=="number"&&typeof this.endValue=="number"&&this.endValue<this.startValue&&(c=this.startValue,this.startValue=this.endValue,this.endValue=c),this.spacing=typeof g.spacing>"u"?k.spacing:g.spacing,typeof this.options.spacing=="string"?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?0:(10<this.spacing?10:this.spacing)+"%"):typeof this.options.spacing!="number"&&(this.spacing=k.spacing),this.size=k.parent.logarithmic?1:0}function rr(c,x,g,f,v){rr.base.constructor.call(this,"StripLine","stripLines",x,g,v),this.id=f,this.chart=c,this.ctx=this.chart.ctx,this.label=this.label,this.axis=v,this.optionsName="stripLines",this.isOptionsInArray=!0,this._thicknessType="pixel",this.startValue!==null&&this.endValue!==null&&(this.value=v.logarithmic?Math.sqrt((this.startValue.getTime?this.startValue.getTime():this.startValue)*(this.endValue.getTime?this.endValue.getTime():this.endValue)):((this.startValue.getTime?this.startValue.getTime():this.startValue)+(this.endValue.getTime?this.endValue.getTime():this.endValue))/2,this._thicknessType=null)}function Ye(c,x,g){Ye.base.constructor.call(this,"Crosshair","crosshair",x,null,g),this.chart=c,this.ctx=this.chart.ctx,this.axis=g,this.optionsName="crosshair",this._thicknessType="pixel"}function rt(c,x){rt.base.constructor.call(this,"ToolTip","toolTip",x,null,c),this.chart=c,this.canvas=c.canvas,this.ctx=this.chart.ctx,this.currentDataPointIndex=this.currentSeriesIndex=-1,this._prevY=this._prevX=NaN,this.containerTransitionDuration=.1,this.mozContainerTransition=this.getContainerTransition(this.containerTransitionDuration),this.optionsName="toolTip",this._initialize()}function dt(c){this.chart=c,this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.ghostCanvas=q(this.chart.width,this.chart.height),this.ghostCtx=this.ghostCanvas.getContext("2d"),this.mouseoveredObjectMaps=[]}function Dt(c){this.chart=c,this.ctx=this.chart.plotArea.ctx,this.animations=[],this.animationRequestId=null}t(te,me),te.prototype.destroy=function(){var c=this.allDOMEventHandlers;this._animator&&this._animator.cancelAllAnimations(),this._panTimerId&&clearTimeout(this._panTimerId);for(var x=0;x<c.length;x++){var g=c[x][0],f=c[x][1],v=c[x][2],k=c[x][3],k=k||!1;g.removeEventListener?g.removeEventListener(f,v,k):g.detachEvent&&g.detachEvent("on"+f,v)}for(this.allDOMEventHandlers=[],this.removeAllEventListeners();this._canvasJSContainer&&this._canvasJSContainer.hasChildNodes();)this._canvasJSContainer.removeChild(this._canvasJSContainer.lastChild);for(;this.container&&this.container.hasChildNodes();)this.container.removeChild(this.container.lastChild);for(;this._dropdownMenu&&this._dropdownMenu.hasChildNodes();)this._dropdownMenu.removeChild(this._dropdownMenu.lastChild);this.overlaidCanvas=this.canvas=this.container=this._canvasJSContainer=null,this._toolBar=this._dropdownMenu=this._menuButton=this._resetButton=this._zoomButton=this._breaksCanvas=this._preRenderCanvas=this.toolTip.container=null},te.prototype._updateOptions=function(){var c=this;if(this.updateOption("width"),this.updateOption("height"),this.updateOption("dataPointWidth"),this.updateOption("dataPointMinWidth"),this.updateOption("dataPointMaxWidth"),this.updateOption("interactivityEnabled"),this.updateOption("theme"),this.updateOption("colorSet")&&(this._selectedColorSet=typeof ke[this.colorSet]<"u"?ke[this.colorSet]:ke.colorSet1),this.updateOption("backgroundColor"),this.backgroundColor||(this.backgroundColor="rgba(0,0,0,0)"),this.updateOption("culture"),this._cultureInfo=new Y(this.options.culture),this.updateOption("animationEnabled"),this.animationEnabled=this.animationEnabled&&X,this.updateOption("animationDuration"),this.updateOption("rangeChanging"),this.updateOption("rangeChanged"),this.updateOption("exportEnabled"),this.updateOption("exportFileName"),this.updateOption("zoomType"),this.options.zoomEnabled){if(!this._zoomButton){var x=!1;Me(this._zoomButton=document.createElement("button")),se(this,this._zoomButton,"pan"),this._toolBar.appendChild(this._zoomButton),this._zoomButton.style.borderRight=this.toolbar.borderThickness+"px solid "+this.toolbar.borderColor,L(this._zoomButton,"touchstart",function(v){x=!0},this.allDOMEventHandlers),L(this._zoomButton,"click",function(){c.zoomEnabled?(c.zoomEnabled=!1,c.panEnabled=!0,se(c,c._zoomButton,"zoom")):(c.zoomEnabled=!0,c.panEnabled=!1,se(c,c._zoomButton,"pan")),c.render()},this.allDOMEventHandlers),L(this._zoomButton,"mouseover",function(){x?x=!1:(T(c,c._zoomButton,{backgroundColor:c.toolbar.backgroundColorOnHover,color:c.toolbar.fontColorOnHover,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&T(c,c._zoomButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))},this.allDOMEventHandlers),L(this._zoomButton,"mouseout",function(){x||(T(c,c._zoomButton,{backgroundColor:c.toolbar.backgroundColor,color:c.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&T(c,c._zoomButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))},this.allDOMEventHandlers)}this._resetButton||(x=!1,Me(this._resetButton=document.createElement("button")),se(this,this._resetButton,"reset"),this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.borderThickness:0)+"px solid "+this.toolbar.borderColor,this._toolBar.appendChild(this._resetButton),L(this._resetButton,"touchstart",function(v){x=!0},this.allDOMEventHandlers),L(this._resetButton,"click",function(){if(c.toolTip.hide(),c.zoomEnabled||c.panEnabled?(c.zoomEnabled=!0,c.panEnabled=!1,se(c,c._zoomButton,"pan"),c._defaultCursor="default",c.overlaidCanvas.style.cursor=c._defaultCursor):(c.zoomEnabled=!1,c.panEnabled=!1),c.sessionVariables.axisX)for(var v=0;v<c.sessionVariables.axisX.length;v++)c.sessionVariables.axisX[v].newViewportMinimum=null,c.sessionVariables.axisX[v].newViewportMaximum=null;if(c.sessionVariables.axisX2)for(v=0;v<c.sessionVariables.axisX2.length;v++)c.sessionVariables.axisX2[v].newViewportMinimum=null,c.sessionVariables.axisX2[v].newViewportMaximum=null;if(c.sessionVariables.axisY)for(v=0;v<c.sessionVariables.axisY.length;v++)c.sessionVariables.axisY[v].newViewportMinimum=null,c.sessionVariables.axisY[v].newViewportMaximum=null;if(c.sessionVariables.axisY2)for(v=0;v<c.sessionVariables.axisY2.length;v++)c.sessionVariables.axisY2[v].newViewportMinimum=null,c.sessionVariables.axisY2[v].newViewportMaximum=null;c.resetOverlayedCanvas(),Me(c._zoomButton,c._resetButton),c._dispatchRangeEvent("rangeChanging","reset"),c.render(),c._dispatchRangeEvent("rangeChanged","reset"),c.syncCharts&&c.syncCharts(null,null)},this.allDOMEventHandlers),L(this._resetButton,"mouseover",function(){x||(T(c,c._resetButton,{backgroundColor:c.toolbar.backgroundColorOnHover,color:c.toolbar.hoverFfontColorOnHoverontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&T(c,c._resetButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))},this.allDOMEventHandlers),L(this._resetButton,"mouseout",function(){x||(T(c,c._resetButton,{backgroundColor:c.toolbar.backgroundColor,color:c.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&T(c,c._resetButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))},this.allDOMEventHandlers),this.overlaidCanvas.style.cursor=c._defaultCursor),this.zoomEnabled||this.panEnabled||(this._zoomButton?(c._zoomButton.getAttribute("state")===c._cultureInfo.zoomText?(this.panEnabled=!0,this.zoomEnabled=!1):(this.zoomEnabled=!0,this.panEnabled=!1),_e(c._zoomButton,c._resetButton)):(this.zoomEnabled=!0,this.panEnabled=!1))}else this.panEnabled=this.zoomEnabled=!1;if(this._menuButton?this.exportEnabled?_e(this._menuButton):Me(this._menuButton):this.exportEnabled&&X&&(x=!1,this._menuButton=document.createElement("button"),se(this,this._menuButton,"menu"),this._toolBar.appendChild(this._menuButton),L(this._menuButton,"touchstart",function(v){x=!0},this.allDOMEventHandlers),L(this._menuButton,"click",function(){c._dropdownMenu.style.display!=="none"||c._dropDownCloseTime&&500>=new Date().getTime()-c._dropDownCloseTime.getTime()||(c._dropdownMenu.style.display="block",c._menuButton.blur(),c._dropdownMenu.focus())},this.allDOMEventHandlers,!0),L(this._menuButton,"mouseover",function(){x||(T(c,c._menuButton,{backgroundColor:c.toolbar.backgroundColorOnHover,color:c.toolbar.fontColorOnHover}),0>=navigator.userAgent.search("MSIE")&&T(c,c._menuButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))},this.allDOMEventHandlers,!0),L(this._menuButton,"mouseout",function(){x||(T(c,c._menuButton,{backgroundColor:c.toolbar.backgroundColor,color:c.toolbar.fontColor}),0>=navigator.userAgent.search("MSIE")&&T(c,c._menuButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))},this.allDOMEventHandlers,!0)),!this._dropdownMenu&&this.exportEnabled&&X){x=!1,this._dropdownMenu=document.createElement("div"),this._dropdownMenu.setAttribute("tabindex",-1);var g=this.theme.indexOf("dark")!==-1?"black":"#888888";this._dropdownMenu.style.cssText="position: absolute; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; cursor: pointer;right: 0px;top: 25px;min-width: 120px;outline: 0;font-size: 14px; font-family: Arial, Helvetica, sans-serif;padding: 5px 0px 5px 0px;text-align: left;line-height: 10px;background-color:"+this.toolbar.backgroundColor+";box-shadow: 2px 2px 10px "+g,c._dropdownMenu.style.display="none",this._toolBar.appendChild(this._dropdownMenu),L(this._dropdownMenu,"blur",function(){Me(c._dropdownMenu),c._dropDownCloseTime=new Date},this.allDOMEventHandlers,!0),g=document.createElement("div"),g.style.cssText="padding: 12px 8px 12px 8px",g.innerHTML=this._cultureInfo.printText,g.style.backgroundColor=this.toolbar.backgroundColor,g.style.color=this.toolbar.fontColor,this._dropdownMenu.appendChild(g),L(g,"touchstart",function(v){x=!0},this.allDOMEventHandlers),L(g,"mouseover",function(){x||(this.style.backgroundColor=c.toolbar.backgroundColorOnHover,this.style.color=c.toolbar.fontColorOnHover)},this.allDOMEventHandlers,!0),L(g,"mouseout",function(){x||(this.style.backgroundColor=c.toolbar.backgroundColor,this.style.color=c.toolbar.fontColor)},this.allDOMEventHandlers,!0),L(g,"click",function(){c.print(),Me(c._dropdownMenu)},this.allDOMEventHandlers,!0),g=document.createElement("div"),g.style.cssText="padding: 12px 8px 12px 8px",g.innerHTML=this._cultureInfo.saveJPGText,g.style.backgroundColor=this.toolbar.backgroundColor,g.style.color=this.toolbar.fontColor,this._dropdownMenu.appendChild(g),L(g,"touchstart",function(v){x=!0},this.allDOMEventHandlers),L(g,"mouseover",function(){x||(this.style.backgroundColor=c.toolbar.backgroundColorOnHover,this.style.color=c.toolbar.fontColorOnHover)},this.allDOMEventHandlers,!0),L(g,"mouseout",function(){x||(this.style.backgroundColor=c.toolbar.backgroundColor,this.style.color=c.toolbar.fontColor)},this.allDOMEventHandlers,!0),L(g,"click",function(){l(c.canvas,"jpeg",c.exportFileName),Me(c._dropdownMenu)},this.allDOMEventHandlers,!0),g=document.createElement("div"),g.style.cssText="padding: 12px 8px 12px 8px",g.innerHTML=this._cultureInfo.savePNGText,g.style.backgroundColor=this.toolbar.backgroundColor,g.style.color=this.toolbar.fontColor,this._dropdownMenu.appendChild(g),L(g,"touchstart",function(v){x=!0},this.allDOMEventHandlers),L(g,"mouseover",function(){x||(this.style.backgroundColor=c.toolbar.backgroundColorOnHover,this.style.color=c.toolbar.fontColorOnHover)},this.allDOMEventHandlers,!0),L(g,"mouseout",function(){x||(this.style.backgroundColor=c.toolbar.backgroundColor,this.style.color=c.toolbar.fontColor)},this.allDOMEventHandlers,!0),L(g,"click",function(){l(c.canvas,"png",c.exportFileName),Me(c._dropdownMenu)},this.allDOMEventHandlers,!0)}this._toolBar.style.display!=="none"&&this._zoomButton&&(this.panEnabled?se(c,c._zoomButton,"zoom"):se(c,c._zoomButton,"pan"),c._resetButton.getAttribute("state")!==c._cultureInfo.resetText&&se(c,c._resetButton,"reset")),this.options.toolTip&&this.toolTip.options!==this.options.toolTip&&(this.toolTip.options=this.options.toolTip);for(var f in this.toolTip.options)this.toolTip.options.hasOwnProperty(f)&&this.toolTip.updateOption(f)},te.prototype._updateSize=function(){var c;c=[this.canvas,this._preRenderCanvas,this.overlaidCanvas,this._eventManager.ghostCanvas];var x=0,g=0;if(this.options.width?x=this.width:this.width=x=0<this.container.clientWidth?this.container.clientWidth:this.width,this.options.height?g=this.height:this.height=g=0<this.container.clientHeight?this.container.clientHeight:this.height,this.canvas.width!==x*Wi||this.canvas.height!==g*Wi){for(var f=0;f<c.length;f++)ne(c[f],x,g);c=!0}else c=!1;return c},te.prototype._initialize=function(){this.isNavigator=!(h(this.parent)||h(this.parent._defaultsKey)||this.parent._defaultsKey!=="Navigator"),this.toolbar=new be(this,this.options.toolbar),this._animator?this._animator.cancelAllAnimations():this._animator=new Dt(this),this.removeAllEventListeners(),this.disableToolTip=!1,this._axes=[],this.funnelPyramidClickHandler=this.pieDoughnutClickHandler=null,this._updateOptions(),this.animatedRender=X&&this.animationEnabled&&this.renderCount===0,this._updateSize(),this.clearCanvas(),this.ctx.beginPath(),this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this._indexLabels=[],this._dataInRenderedOrder=[],this._events=[],this._eventManager&&this._eventManager.reset(),this.plotInfo={axisPlacement:null,plotTypes:[]},this.layoutManager=new K(0,0,this.width,this.height,this.isNavigator?0:2),this.plotArea.layoutManager&&this.plotArea.layoutManager.reset(),this.data=[];var c=0,x=null;if(this.options.data){for(var g=0;g<this.options.data.length;g++)if(c++,!this.options.data[g].type||0<=te._supportedChartTypes.indexOf(this.options.data[g].type)){var f=new Nt(this,this.options.data[g],c-1,++this._eventManager.lastObjectId);f.type==="error"&&(f.linkedDataSeriesIndex=h(this.options.data[g].linkedDataSeriesIndex)?g-1:this.options.data[g].linkedDataSeriesIndex,0>f.linkedDataSeriesIndex||f.linkedDataSeriesIndex>=this.options.data.length||typeof f.linkedDataSeriesIndex!="number"||this.options.data[f.linkedDataSeriesIndex].type==="error")&&(f.linkedDataSeriesIndex=null),f.name===null&&(f.name="DataSeries "+c),f.color===null?1<this.options.data.length?(f._colorSet=[this._selectedColorSet[f.index%this._selectedColorSet.length]],f.color=this._selectedColorSet[f.index%this._selectedColorSet.length]):f._colorSet=f.type==="line"||f.type==="stepLine"||f.type==="spline"||f.type==="area"||f.type==="stepArea"||f.type==="splineArea"||f.type==="stackedArea"||f.type==="stackedArea100"||f.type==="rangeArea"||f.type==="rangeSplineArea"||f.type==="candlestick"||f.type==="ohlc"||f.type==="waterfall"||f.type==="boxAndWhisker"?[this._selectedColorSet[0]]:this._selectedColorSet:f._colorSet=[f.color],f.markerSize===null&&((f.type==="line"||f.type==="stepLine"||f.type==="spline"||0<=f.type.toLowerCase().indexOf("area"))&&f.dataPoints&&f.dataPoints.length<this.width/16||f.type==="scatter")&&(f.markerSize=8),f.type!=="bubble"&&f.type!=="scatter"||!f.dataPoints||(f.dataPoints.some?f.dataPoints.some(function(O){return O.x})&&f.dataPoints.sort(ee):f.dataPoints.sort(ee)),this.data.push(f);var v=f.axisPlacement,x=x||v,k;if(v==="normal"?this.plotInfo.axisPlacement==="xySwapped"?k='You cannot combine "'+f.type+'" with bar chart':this.plotInfo.axisPlacement==="none"?k='You cannot combine "'+f.type+'" with pie chart':this.plotInfo.axisPlacement===null&&(this.plotInfo.axisPlacement="normal"):v==="xySwapped"?this.plotInfo.axisPlacement==="normal"?k='You cannot combine "'+f.type+'" with line, area, column or pie chart':this.plotInfo.axisPlacement==="none"?k='You cannot combine "'+f.type+'" with pie chart':this.plotInfo.axisPlacement===null&&(this.plotInfo.axisPlacement="xySwapped"):v==="none"?this.plotInfo.axisPlacement==="normal"?k='You cannot combine "'+f.type+'" with line, area, column or bar chart':this.plotInfo.axisPlacement==="xySwapped"?k='You cannot combine "'+f.type+'" with bar chart':this.plotInfo.axisPlacement===null&&(this.plotInfo.axisPlacement="none"):v===null&&this.plotInfo.axisPlacement==="none"&&(k='You cannot combine "'+f.type+'" with pie chart'),k&&window.console){window.console.log(k);return}}for(g=0;g<this.data.length;g++){if(x=="none"&&this.data[g].type==="error"&&window.console){window.console.log('You cannot combine "'+f.type+'" with error chart');return}this.data[g].type==="error"&&(this.data[g].axisPlacement=this.plotInfo.axisPlacement=x||"normal",this.data[g]._linkedSeries=this.data[g].linkedDataSeriesIndex===null?null:this.data[this.data[g].linkedDataSeriesIndex])}}this._objectsInitialized=!0,this._plotAreaElements=[]},te._supportedChartTypes=_("line stepLine spline column area stepArea splineArea bar bubble scatter stackedColumn stackedColumn100 stackedBar stackedBar100 stackedArea stackedArea100 candlestick ohlc boxAndWhisker rangeColumn error rangeBar rangeArea rangeSplineArea pie doughnut funnel pyramid waterfall".split(" ")),te.prototype.setLayout=function(){for(var c=this._plotAreaElements,x=0;x<this.data.length;x++)if(this.plotInfo.axisPlacement==="normal"||this.plotInfo.axisPlacement==="xySwapped"){if(!this.data[x].axisYType||this.data[x].axisYType==="primary")if(this.options.axisY&&0<this.options.axisY.length){if(!this.axisY.length)for(var g=0;g<this.options.axisY.length;g++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY[g]=new St(this,"axisY",this.options.axisY[g],g,"axisY","left")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY[g]=new St(this,"axisY",this.options.axisY[g],g,"axisY","bottom"));this.data[x].axisY=this.axisY[0<=this.data[x].axisYIndex&&this.data[x].axisYIndex<this.axisY.length?this.data[x].axisYIndex:0],this.axisY[0<=this.data[x].axisYIndex&&this.data[x].axisYIndex<this.axisY.length?this.data[x].axisYIndex:0].dataSeries.push(this.data[x])}else this.axisY.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY[0]=new St(this,"axisY",this.options.axisY,0,"axisY","left")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY[0]=new St(this,"axisY",this.options.axisY,0,"axisY","bottom"))),this.data[x].axisY=this.axisY[0],this.axisY[0].dataSeries.push(this.data[x]);if(this.data[x].axisYType==="secondary")if(this.options.axisY2&&0<this.options.axisY2.length){if(!this.axisY2.length)for(g=0;g<this.options.axisY2.length;g++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY2[g]=new St(this,"axisY2",this.options.axisY2[g],g,"axisY","right")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY2[g]=new St(this,"axisY2",this.options.axisY2[g],g,"axisY","top"));this.data[x].axisY=this.axisY2[0<=this.data[x].axisYIndex&&this.data[x].axisYIndex<this.axisY2.length?this.data[x].axisYIndex:0],this.axisY2[0<=this.data[x].axisYIndex&&this.data[x].axisYIndex<this.axisY2.length?this.data[x].axisYIndex:0].dataSeries.push(this.data[x])}else this.axisY2.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY2[0]=new St(this,"axisY2",this.options.axisY2,0,"axisY","right")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY2[0]=new St(this,"axisY2",this.options.axisY2,0,"axisY","top"))),this.data[x].axisY=this.axisY2[0],this.axisY2[0].dataSeries.push(this.data[x]);if(!this.data[x].axisXType||this.data[x].axisXType==="primary")if(this.options.axisX&&0<this.options.axisX.length){if(!this.axisX.length)for(g=0;g<this.options.axisX.length;g++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX[g]=new St(this,"axisX",this.options.axisX[g],g,"axisX","bottom")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX[g]=new St(this,"axisX",this.options.axisX[g],g,"axisX","left"));this.data[x].axisX=this.axisX[0<=this.data[x].axisXIndex&&this.data[x].axisXIndex<this.axisX.length?this.data[x].axisXIndex:0],this.axisX[0<=this.data[x].axisXIndex&&this.data[x].axisXIndex<this.axisX.length?this.data[x].axisXIndex:0].dataSeries.push(this.data[x])}else this.axisX.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX[0]=new St(this,"axisX",this.options.axisX,0,"axisX","bottom")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX[0]=new St(this,"axisX",this.options.axisX,0,"axisX","left"))),this.data[x].axisX=this.axisX[0],this.axisX[0].dataSeries.push(this.data[x]);if(this.data[x].axisXType==="secondary")if(this.options.axisX2&&0<this.options.axisX2.length){if(!this.axisX2.length)for(g=0;g<this.options.axisX2.length;g++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX2[g]=new St(this,"axisX2",this.options.axisX2[g],g,"axisX","top")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX2[g]=new St(this,"axisX2",this.options.axisX2[g],g,"axisX","right"));this.data[x].axisX=this.axisX2[0<=this.data[x].axisXIndex&&this.data[x].axisXIndex<this.axisX2.length?this.data[x].axisXIndex:0],this.axisX2[0<=this.data[x].axisXIndex&&this.data[x].axisXIndex<this.axisX2.length?this.data[x].axisXIndex:0].dataSeries.push(this.data[x])}else this.axisX2.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX2[0]=new St(this,"axisX2",this.options.axisX2,0,"axisX","top")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX2[0]=new St(this,"axisX2",this.options.axisX2,0,"axisX","right"))),this.data[x].axisX=this.axisX2[0],this.axisX2[0].dataSeries.push(this.data[x])}if(this.axisY){for(g=1;g<this.axisY.length;g++)typeof this.axisY[g].options.gridThickness>"u"&&(this.axisY[g].gridThickness=0);for(g=0;g<this.axisY.length-1;g++)typeof this.axisY[g].options.margin>"u"&&(this.axisY[g].margin=10)}if(this.axisY2){for(g=1;g<this.axisY2.length;g++)typeof this.axisY2[g].options.gridThickness>"u"&&(this.axisY2[g].gridThickness=0);for(g=0;g<this.axisY2.length-1;g++)typeof this.axisY2[g].options.margin>"u"&&(this.axisY2[g].margin=10)}if(this.axisY&&0<this.axisY.length&&this.axisY2&&0<this.axisY2.length&&(0<this.axisY[0].gridThickness&&typeof this.axisY2[0].options.gridThickness>"u"?this.axisY2[0].gridThickness=0:0<this.axisY2[0].gridThickness&&typeof this.axisY[0].options.gridThickness>"u"&&(this.axisY[0].gridThickness=0)),this.axisX)for(g=0;g<this.axisX.length;g++)typeof this.axisX[g].options.gridThickness>"u"&&(this.axisX[g].gridThickness=0);if(this.axisX2)for(g=0;g<this.axisX2.length;g++)typeof this.axisX2[g].options.gridThickness>"u"&&(this.axisX2[g].gridThickness=0);if(this.axisX&&0<this.axisX.length&&this.axisX2&&0<this.axisX2.length&&(0<this.axisX[0].gridThickness&&typeof this.axisX2[0].options.gridThickness>"u"?this.axisX2[0].gridThickness=0:0<this.axisX2[0].gridThickness&&typeof this.axisX[0].options.gridThickness>"u"&&(this.axisX[0].gridThickness=0)),g=!1,0<this._axes.length&&(this.zoomEnabled||this.panEnabled)){for(x=0;x<this._axes.length;x++)if(this._axes[x].viewportMinimum!==null||this._axes[x].viewportMaximum!==null){g=!0;break}}if(g?(_e(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.borderThickness+"px solid "+this.toolbar.borderColor,this._zoomButton.style.borderRight=this.toolbar.borderThickness+"px solid "+this.toolbar.borderColor,this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.borderThickness:0)+"px solid "+this.toolbar.borderColor):(Me(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.borderThickness+"px solid transparent",this.options.zoomEnabled&&(this.zoomEnabled=!0,this.panEnabled=!1)),b(this),this._processData(),this.options.title&&(this.title=new Z(this,this.options.title),this.title.dockInsidePlotArea?c.push(this.title):this.title.setLayout()),this.subtitles=[],this.options.subtitles)for(x=0;x<this.options.subtitles.length;x++)g=new oe(this,this.options.subtitles[x],x),this.subtitles.push(g),g.dockInsidePlotArea?c.push(g):g.setLayout();for(this.legend=new Rt(this,this.options.legend),x=0;x<this.data.length;x++)(this.data[x].showInLegend||this.data[x].type==="pie"||this.data[x].type==="doughnut"||this.data[x].type==="funnel"||this.data[x].type==="pyramid")&&this.legend.dataSeries.push(this.data[x]);for(this.legend.dockInsidePlotArea?c.push(this.legend):this.legend.setLayout(),x=0;x<this._axes.length;x++)if(this._axes[x].scaleBreaks&&this._axes[x].scaleBreaks._appliedBreaks.length){X?(this._breaksCanvas=q(this.width,this.height,!0),this._breaksCanvasCtx=this._breaksCanvas.getContext("2d")):(this._breaksCanvas=this.canvas,this._breaksCanvasCtx=this.ctx);break}this._preRenderCanvas=h(this._preRenderCanvas)?q(this.width,this.height):this._preRenderCanvas,this._preRenderCtx=this._preRenderCanvas.getContext("2d"),this.plotInfo.axisPlacement!=="normal"&&this.plotInfo.axisPlacement!=="xySwapped"||St.setLayout(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace())},te.prototype.renderElements=function(){var f=this._plotAreaElements;this.title&&!this.title.dockInsidePlotArea&&this.title.render();for(var c=0;c<this.subtitles.length;c++)this.subtitles[c].dockInsidePlotArea||this.subtitles[c].render();if(this.legend.dockInsidePlotArea||this.legend.render(),this.plotInfo.axisPlacement==="normal"||this.plotInfo.axisPlacement==="xySwapped")St.render(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement);else if(this.plotInfo.axisPlacement==="none")this.preparePlotArea();else return;for(c=0;c<f.length;c++)f[c].setLayout(),f[c].render();var x=[];if(this.animatedRender){var g=q(this.width,this.height);g.getContext("2d").drawImage(this.canvas,0,0,this.width,this.height)}Q(this);var f=this.ctx.miterLimit,v;for(this.ctx.miterLimit=3,X&&this._breaksCanvas&&(this._preRenderCtx.drawImage(this.canvas,0,0,this.width,this.height),this._preRenderCtx.drawImage(this._breaksCanvas,0,0,this.width,this.height),this._breaksCanvasCtx.globalCompositeOperation="source-atop",this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),this._preRenderCtx.clearRect(0,0,this.width,this.height)),c=0;c<this.plotInfo.plotTypes.length;c++)for(var k=this.plotInfo.plotTypes[c],A=0;A<k.plotUnits.length;A++){var O=k.plotUnits[A],N=null;O.targetCanvas=null,this.animatedRender&&(O.targetCanvas=q(this.width,this.height),O.targetCanvasCtx=O.targetCanvas.getContext("2d"),v=O.targetCanvasCtx.miterLimit,O.targetCanvasCtx.miterLimit=3),O.type==="line"?N=this.renderLine(O):O.type==="stepLine"?N=this.renderStepLine(O):O.type==="spline"?N=this.renderSpline(O):O.type==="column"?N=this.renderColumn(O):O.type==="bar"?N=this.renderBar(O):O.type==="area"?N=this.renderArea(O):O.type==="stepArea"?N=this.renderStepArea(O):O.type==="splineArea"?N=this.renderSplineArea(O):O.type==="stackedColumn"?N=this.renderStackedColumn(O):O.type==="stackedColumn100"?N=this.renderStackedColumn100(O):O.type==="stackedBar"?N=this.renderStackedBar(O):O.type==="stackedBar100"?N=this.renderStackedBar100(O):O.type==="stackedArea"?N=this.renderStackedArea(O):O.type==="stackedArea100"?N=this.renderStackedArea100(O):O.type==="bubble"?N=N=this.renderBubble(O):O.type==="scatter"?N=this.renderScatter(O):O.type==="pie"?this.renderPie(O):O.type==="doughnut"?this.renderPie(O):O.type==="funnel"?N=this.renderFunnel(O):O.type==="pyramid"?N=this.renderFunnel(O):O.type==="candlestick"?N=this.renderCandlestick(O):O.type==="ohlc"?N=this.renderCandlestick(O):O.type==="rangeColumn"?N=this.renderRangeColumn(O):O.type==="error"?N=this.renderError(O):O.type==="rangeBar"?N=this.renderRangeBar(O):O.type==="rangeArea"?N=this.renderRangeArea(O):O.type==="rangeSplineArea"?N=this.renderRangeSplineArea(O):O.type==="waterfall"?N=this.renderWaterfall(O):O.type==="boxAndWhisker"&&(N=this.renderBoxAndWhisker(O));for(var D=0;D<O.dataSeriesIndexes.length;D++)this._dataInRenderedOrder.push(this.data[O.dataSeriesIndexes[D]]);this.animatedRender&&(O.targetCanvasCtx.miterLimit=v,N&&x.push(N))}this.ctx.miterLimit=f,this.animatedRender&&this._breaksCanvasCtx&&x.push({source:this._breaksCanvasCtx,dest:this.plotArea.ctx,animationCallback:pt.fadeInAnimation,easingFunction:pt.easing.easeInQuad,animationBase:0,startTimePercent:.7}),this.animatedRender&&0<this._indexLabels.length&&(v=q(this.width,this.height).getContext("2d"),x.push(this.renderIndexLabels(v)));var V=this;if(0<x.length)V.disableToolTip=!0,V._animator.animate(200,V.animationDuration,function(F){V.ctx.clearRect(0,0,V.width,V.height),V.ctx.drawImage(g,0,0,Math.floor(V.width*Wi),Math.floor(V.height*Wi),0,0,V.width,V.height);for(var I=0;I<x.length;I++)N=x[I],1>F&&typeof N.startTimePercent<"u"?F>=N.startTimePercent&&N.animationCallback(N.easingFunction(F-N.startTimePercent,0,1,1-N.startTimePercent),N):N.animationCallback(N.easingFunction(F,0,1,1),N);V.dispatchEvent("dataAnimationIterationEnd",{chart:V})},function(){x=[];for(var F=0;F<V.plotInfo.plotTypes.length;F++)for(var I=V.plotInfo.plotTypes[F],C=0;C<I.plotUnits.length;C++)I.plotUnits[C].targetCanvas=null;g=null,V.disableToolTip=!1});else{if(V._breaksCanvas)if(X)V.plotArea.ctx.drawImage(V._breaksCanvas,0,0,this.width,this.height);else for(D=0;D<V._axes.length;D++)V._axes[D].createMask();0<V._indexLabels.length&&V.renderIndexLabels(),V.dispatchEvent("dataAnimationIterationEnd",{chart:V})}for(this.attachPlotAreaEventHandlers(),this.zoomEnabled||this.panEnabled||!this._zoomButton||this._zoomButton.style.display==="none"||Me(this._zoomButton,this._resetButton),this.toolTip._updateToolTip(),this.renderCount++,G&&(V=this,setTimeout(function(){var F=document.getElementById("ghostCanvasCopy");F&&(ne(F,V.width,V.height),F.getContext("2d").drawImage(V._eventManager.ghostCanvas,0,0))},2e3)),this._breaksCanvas&&(delete this._breaksCanvas,delete this._breaksCanvasCtx),D=0;D<this._axes.length;D++)this._axes[D].maskCanvas&&(delete this._axes[D].maskCanvas,delete this._axes[D].maskCtx)},te.prototype.render=function(c){c&&(this.options=c),this._initialize(),this.setLayout(),this.renderElements()},te.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,cursor:this.panEnabled?"move":"default",capture:!0,bounds:this.plotArea})},te.prototype.categoriseDataSeries=function(){for(var c="",x=0;x<this.data.length;x++)if(c=this.data[x],c.dataPoints&&c.dataPoints.length!==0&&c.visible&&0<=te._supportedChartTypes.indexOf(c.type)){for(var g=null,f=!1,v=null,k=!1,A=0;A<this.plotInfo.plotTypes.length;A++)if(this.plotInfo.plotTypes[A].type===c.type){f=!0,g=this.plotInfo.plotTypes[A];break}for(f||(g={type:c.type,totalDataSeries:0,plotUnits:[]},this.plotInfo.plotTypes.push(g)),A=0;A<g.plotUnits.length;A++)if(g.plotUnits[A].axisYType===c.axisYType&&g.plotUnits[A].axisXType===c.axisXType&&g.plotUnits[A].axisYIndex===c.axisYIndex&&g.plotUnits[A].axisXIndex===c.axisXIndex){k=!0,v=g.plotUnits[A];break}k||(v={type:c.type,previousDataSeriesCount:0,index:g.plotUnits.length,plotType:g,axisXType:c.axisXType,axisYType:c.axisYType,axisYIndex:c.axisYIndex,axisXIndex:c.axisXIndex,axisY:c.axisYType==="primary"?this.axisY[0<=c.axisYIndex&&c.axisYIndex<this.axisY.length?c.axisYIndex:0]:this.axisY2[0<=c.axisYIndex&&c.axisYIndex<this.axisY2.length?c.axisYIndex:0],axisX:c.axisXType==="primary"?this.axisX[0<=c.axisXIndex&&c.axisXIndex<this.axisX.length?c.axisXIndex:0]:this.axisX2[0<=c.axisXIndex&&c.axisXIndex<this.axisX2.length?c.axisXIndex:0],dataSeriesIndexes:[],yTotals:[]},g.plotUnits.push(v)),g.totalDataSeries++,v.dataSeriesIndexes.push(x),c.plotUnit=v}for(x=0;x<this.plotInfo.plotTypes.length;x++)for(g=this.plotInfo.plotTypes[x],A=c=0;A<g.plotUnits.length;A++)g.plotUnits[A].previousDataSeriesCount=c,c+=g.plotUnits[A].dataSeriesIndexes.length},te.prototype.assignIdToDataPoints=function(){for(var c=0;c<this.data.length;c++){var x=this.data[c];if(x.dataPoints)for(var g=x.dataPoints.length,f=0;f<g;f++)x.dataPointIds[f]=++this._eventManager.lastObjectId}},te.prototype._processData=function(){this.assignIdToDataPoints(),this.categoriseDataSeries();for(var c=0;c<this.plotInfo.plotTypes.length;c++)for(var x=this.plotInfo.plotTypes[c],g=0;g<x.plotUnits.length;g++){var f=x.plotUnits[g];f.type==="line"||f.type==="stepLine"||f.type==="spline"||f.type==="column"||f.type==="area"||f.type==="stepArea"||f.type==="splineArea"||f.type==="bar"||f.type==="bubble"||f.type==="scatter"?this._processMultiseriesPlotUnit(f):f.type==="stackedColumn"||f.type==="stackedBar"||f.type==="stackedArea"?this._processStackedPlotUnit(f):f.type==="stackedColumn100"||f.type==="stackedBar100"||f.type==="stackedArea100"?this._processStacked100PlotUnit(f):f.type==="candlestick"||f.type==="ohlc"||f.type==="rangeColumn"||f.type==="rangeBar"||f.type==="rangeArea"||f.type==="rangeSplineArea"||f.type==="error"||f.type==="boxAndWhisker"?this._processMultiYPlotUnit(f):f.type==="waterfall"&&this._processSpecificPlotUnit(f)}this.calculateAutoBreaks()},te.prototype._processMultiseriesPlotUnit=function(c){if(c.dataSeriesIndexes&&!(1>c.dataSeriesIndexes.length))for(var x=c.axisY.dataInfo,g=c.axisX.dataInfo,f,v,k=!1,A=0;A<c.dataSeriesIndexes.length;A++){var O=this.data[c.dataSeriesIndexes[A]],N=0,D=!1,V=!1,F;if(O.axisPlacement==="normal"||O.axisPlacement==="xySwapped")var I=c.axisX.sessionVariables.newViewportMinimum?c.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:c.axisX.logarithmic?0:-1/0,C=c.axisX.sessionVariables.newViewportMaximum?c.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:1/0;for((O.dataPoints[N].x&&O.dataPoints[N].x.getTime||O.xValueType==="dateTime")&&(k=!0),N=0;N<O.dataPoints.length;N++){if(typeof O.dataPoints[N].x>"u"&&(O.dataPoints[N].x=N+(c.axisX.logarithmic?1:0)),O.dataPoints[N].x.getTime?(k=!0,f=O.dataPoints[N].x.getTime()):f=O.dataPoints[N].x,v=O.dataPoints[N].y,f<g.min&&(g.min=f),f>g.max&&(g.max=f),v<x.min&&typeof v=="number"&&(x.min=v),v>x.max&&typeof v=="number"&&(x.max=v),0<N){if(c.axisX.logarithmic){var W=f/O.dataPoints[N-1].x;1>W&&(W=1/W),g.minDiff>W&&W!==1&&(g.minDiff=W)}else W=f-O.dataPoints[N-1].x,0>W&&(W*=-1),g.minDiff>W&&W!==0&&(g.minDiff=W);v!==null&&O.dataPoints[N-1].y!==null&&(c.axisY.logarithmic?(W=v/O.dataPoints[N-1].y,1>W&&(W=1/W),x.minDiff>W&&W!==1&&(x.minDiff=W)):(W=v-O.dataPoints[N-1].y,0>W&&(W*=-1),x.minDiff>W&&W!==0&&(x.minDiff=W)))}if(f<I&&!D)v!==null&&(F=f);else{if(!D&&(D=!0,0<N)){N-=2;continue}if(f>C&&!V)V=!0;else if(f>C&&V)continue;O.dataPoints[N].label&&(c.axisX.labels[f]=O.dataPoints[N].label),f<g.viewPortMin&&(g.viewPortMin=f),f>g.viewPortMax&&(g.viewPortMax=f),v===null?g.viewPortMin===f&&F<f&&(g.viewPortMin=F):(v<x.viewPortMin&&typeof v=="number"&&(x.viewPortMin=v),v>x.viewPortMax&&typeof v=="number"&&(x.viewPortMax=v))}}O.axisX.valueType=O.xValueType=k?"dateTime":"number"}},te.prototype._processStackedPlotUnit=function(c){if(c.dataSeriesIndexes&&!(1>c.dataSeriesIndexes.length)){for(var x=c.axisY.dataInfo,g=c.axisX.dataInfo,f,v,k=!1,A=[],O=[],N=1/0,D=-1/0,V=0;V<c.dataSeriesIndexes.length;V++){var F=this.data[c.dataSeriesIndexes[V]],I=0,C=!1,W=!1,de;if(F.axisPlacement==="normal"||F.axisPlacement==="xySwapped")var he=c.axisX.sessionVariables.newViewportMinimum?c.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:-1/0,H=c.axisX.sessionVariables.newViewportMaximum?c.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:1/0;for((F.dataPoints[I].x&&F.dataPoints[I].x.getTime||F.xValueType==="dateTime")&&(k=!0),I=0;I<F.dataPoints.length;I++){if(typeof F.dataPoints[I].x>"u"&&(F.dataPoints[I].x=I+(c.axisX.logarithmic?1:0)),F.dataPoints[I].x.getTime?(k=!0,f=F.dataPoints[I].x.getTime()):f=F.dataPoints[I].x,v=h(F.dataPoints[I].y)?0:F.dataPoints[I].y,f<g.min&&(g.min=f),f>g.max&&(g.max=f),0<I){if(c.axisX.logarithmic){var ye=f/F.dataPoints[I-1].x;1>ye&&(ye=1/ye),g.minDiff>ye&&ye!==1&&(g.minDiff=ye)}else ye=f-F.dataPoints[I-1].x,0>ye&&(ye*=-1),g.minDiff>ye&&ye!==0&&(g.minDiff=ye);v!==null&&F.dataPoints[I-1].y!==null&&(c.axisY.logarithmic?0<v&&(ye=v/F.dataPoints[I-1].y,1>ye&&(ye=1/ye),x.minDiff>ye&&ye!==1&&(x.minDiff=ye)):(ye=v-F.dataPoints[I-1].y,0>ye&&(ye*=-1),x.minDiff>ye&&ye!==0&&(x.minDiff=ye)))}if(f<he&&!C)F.dataPoints[I].y!==null&&(de=f);else{if(!C&&(C=!0,0<I)){I-=2;continue}if(f>H&&!W)W=!0;else if(f>H&&W)continue;F.dataPoints[I].label&&(c.axisX.labels[f]=F.dataPoints[I].label),f<g.viewPortMin&&(g.viewPortMin=f),f>g.viewPortMax&&(g.viewPortMax=f),F.dataPoints[I].y===null?g.viewPortMin===f&&de<f&&(g.viewPortMin=de):(c.yTotals[f]=(c.yTotals[f]?c.yTotals[f]:0)+v,0<=v?A[f]?A[f]+=v:(A[f]=v,N=Math.min(v,N)):O[f]?O[f]+=v:(O[f]=v,D=Math.max(v,D)))}}c.axisY.scaleBreaks&&c.axisY.scaleBreaks.autoCalculate&&1<=c.axisY.scaleBreaks.maxNumberOfAutoBreaks&&(x.dataPointYPositiveSums?(x.dataPointYPositiveSums.push.apply(x.dataPointYPositiveSums,A),x.dataPointYNegativeSums.push.apply(x.dataPointYPositiveSums,O)):(x.dataPointYPositiveSums=A,x.dataPointYNegativeSums=O)),F.axisX.valueType=F.xValueType=k?"dateTime":"number"}for(I in A)A.hasOwnProperty(I)&&!isNaN(I)&&(c=A[I],c<x.min&&(x.min=Math.min(c,N)),c>x.max&&(x.max=c),I<g.viewPortMin||I>g.viewPortMax||(c<x.viewPortMin&&(x.viewPortMin=Math.min(c,N)),c>x.viewPortMax&&(x.viewPortMax=c)));for(I in O)O.hasOwnProperty(I)&&!isNaN(I)&&(c=O[I],c<x.min&&(x.min=c),c>x.max&&(x.max=Math.max(c,D)),I<g.viewPortMin||I>g.viewPortMax||(c<x.viewPortMin&&(x.viewPortMin=c),c>x.viewPortMax&&(x.viewPortMax=Math.max(c,D))))}},te.prototype._processStacked100PlotUnit=function(c){if(c.dataSeriesIndexes&&!(1>c.dataSeriesIndexes.length)){for(var x=c.axisY.dataInfo,g=c.axisX.dataInfo,f,v,k=!1,A=!1,O=!1,N=[],D=0;D<c.dataSeriesIndexes.length;D++){var V=this.data[c.dataSeriesIndexes[D]],F=0,I=!1,C=!1,W;if(V.axisPlacement==="normal"||V.axisPlacement==="xySwapped")var de=c.axisX.sessionVariables.newViewportMinimum?c.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:-1/0,he=c.axisX.sessionVariables.newViewportMaximum?c.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:1/0;for((V.dataPoints[F].x&&V.dataPoints[F].x.getTime||V.xValueType==="dateTime")&&(k=!0),F=0;F<V.dataPoints.length;F++){if(typeof V.dataPoints[F].x>"u"&&(V.dataPoints[F].x=F+(c.axisX.logarithmic?1:0)),V.dataPoints[F].x.getTime?(k=!0,f=V.dataPoints[F].x.getTime()):f=V.dataPoints[F].x,v=h(V.dataPoints[F].y)?null:V.dataPoints[F].y,f<g.min&&(g.min=f),f>g.max&&(g.max=f),0<F){if(c.axisX.logarithmic){var H=f/V.dataPoints[F-1].x;1>H&&(H=1/H),g.minDiff>H&&H!==1&&(g.minDiff=H)}else H=f-V.dataPoints[F-1].x,0>H&&(H*=-1),g.minDiff>H&&H!==0&&(g.minDiff=H);h(v)||V.dataPoints[F-1].y===null||(c.axisY.logarithmic?0<v&&(H=v/V.dataPoints[F-1].y,1>H&&(H=1/H),x.minDiff>H&&H!==1&&(x.minDiff=H)):(H=v-V.dataPoints[F-1].y,0>H&&(H*=-1),x.minDiff>H&&H!==0&&(x.minDiff=H)))}if(f<de&&!I)v!==null&&(W=f);else{if(!I&&(I=!0,0<F)){F-=2;continue}if(f>he&&!C)C=!0;else if(f>he&&C)continue;V.dataPoints[F].label&&(c.axisX.labels[f]=V.dataPoints[F].label),f<g.viewPortMin&&(g.viewPortMin=f),f>g.viewPortMax&&(g.viewPortMax=f),v===null?g.viewPortMin===f&&W<f&&(g.viewPortMin=W):(c.yTotals[f]=(c.yTotals[f]?c.yTotals[f]:0)+v,0<=v?A=!0:0>v&&(O=!0),N[f]=N[f]?N[f]+Math.abs(v):Math.abs(v))}}V.axisX.valueType=V.xValueType=k?"dateTime":"number"}c.axisY.logarithmic?(x.max=h(x.viewPortMax)?99*Math.pow(c.axisY.logarithmBase,-.05):Math.max(x.viewPortMax,99*Math.pow(c.axisY.logarithmBase,-.05)),x.min=h(x.viewPortMin)?1:Math.min(x.viewPortMin,1)):A&&!O?(x.max=h(x.viewPortMax)?99:Math.max(x.viewPortMax,99),x.min=h(x.viewPortMin)?1:Math.min(x.viewPortMin,1)):A&&O?(x.max=h(x.viewPortMax)?99:Math.max(x.viewPortMax,99),x.min=h(x.viewPortMin)?-99:Math.min(x.viewPortMin,-99)):!A&&O&&(x.max=h(x.viewPortMax)?-1:Math.max(x.viewPortMax,-1),x.min=h(x.viewPortMin)?-99:Math.min(x.viewPortMin,-99)),x.viewPortMin=x.min,x.viewPortMax=x.max,c.dataPointYSums=N}},te.prototype._processMultiYPlotUnit=function(c){if(c.dataSeriesIndexes&&!(1>c.dataSeriesIndexes.length))for(var x=c.axisY.dataInfo,g=c.axisX.dataInfo,f,v,k,A,O=!1,N=0;N<c.dataSeriesIndexes.length;N++){var D=this.data[c.dataSeriesIndexes[N]],V=0,F=!1,I=!1,C,W,de;if(D.axisPlacement==="normal"||D.axisPlacement==="xySwapped")var he=c.axisX.sessionVariables.newViewportMinimum?c.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:c.axisX.logarithmic?0:-1/0,H=c.axisX.sessionVariables.newViewportMaximum?c.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:1/0;for((D.dataPoints[V].x&&D.dataPoints[V].x.getTime||D.xValueType==="dateTime")&&(O=!0),V=0;V<D.dataPoints.length;V++){if(typeof D.dataPoints[V].x>"u"&&(D.dataPoints[V].x=V+(c.axisX.logarithmic?1:0)),D.dataPoints[V].x.getTime?(O=!0,f=D.dataPoints[V].x.getTime()):f=D.dataPoints[V].x,(v=D.dataPoints[V].y)&&v.length){k=Math.min.apply(null,v),A=Math.max.apply(null,v),W=!0;for(var ye=0;ye<v.length;ye++)v.k===null&&(W=!1);W&&(F||(de=C),C=f)}if(f<g.min&&(g.min=f),f>g.max&&(g.max=f),k<x.min&&(x.min=k),A>x.max&&(x.max=A),0<V&&(c.axisX.logarithmic?(W=f/D.dataPoints[V-1].x,1>W&&(W=1/W),g.minDiff>W&&W!==1&&(g.minDiff=W)):(W=f-D.dataPoints[V-1].x,0>W&&(W*=-1),g.minDiff>W&&W!==0&&(g.minDiff=W)),v&&v[0]!==null&&D.dataPoints[V-1].y&&D.dataPoints[V-1].y[0]!==null&&(c.axisY.logarithmic?(W=v[0]/D.dataPoints[V-1].y[0],1>W&&(W=1/W),x.minDiff>W&&W!==1&&(x.minDiff=W)):(W=v[0]-D.dataPoints[V-1].y[0],0>W&&(W*=-1),x.minDiff>W&&W!==0&&(x.minDiff=W)))),!(f<he)||F){if(!F&&(F=!0,0<V)){V-=2,C=de;continue}if(f>H&&!I)I=!0;else if(f>H&&I)continue;if(D.dataPoints[V].label&&(c.axisX.labels[f]=D.dataPoints[V].label),f<g.viewPortMin&&(g.viewPortMin=f),f>g.viewPortMax&&(g.viewPortMax=f),g.viewPortMin===f&&v){for(ye=0;ye<v.length;ye++)if(v[ye]===null&&C<f){g.viewPortMin=C;break}}v===null?g.viewPortMin===f&&C<f&&(g.viewPortMin=C):(k<x.viewPortMin&&(x.viewPortMin=k),A>x.viewPortMax&&(x.viewPortMax=A))}}D.axisX.valueType=D.xValueType=O?"dateTime":"number"}},te.prototype._processSpecificPlotUnit=function(c){if(c.type==="waterfall"&&c.dataSeriesIndexes&&!(1>c.dataSeriesIndexes.length))for(var x=c.axisY.dataInfo,g=c.axisX.dataInfo,f,v,k=!1,A=0;A<c.dataSeriesIndexes.length;A++){var O=this.data[c.dataSeriesIndexes[A]],N=0,D=!1,V=!1,F=f=0;if(O.axisPlacement==="normal"||O.axisPlacement==="xySwapped")var I=c.axisX.sessionVariables.newViewportMinimum?c.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:c.axisX.logarithmic?0:-1/0,C=c.axisX.sessionVariables.newViewportMaximum?c.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:1/0;for((O.dataPoints[N].x&&O.dataPoints[N].x.getTime||O.xValueType==="dateTime")&&(k=!0),N=0;N<O.dataPoints.length;N++)typeof O.dataPoints[N].isCumulativeSum<"u"&&O.dataPoints[N].isCumulativeSum===!0?(O.dataPointEOs[N].cumulativeSumYStartValue=0,O.dataPointEOs[N].cumulativeSum=N===0?0:O.dataPointEOs[N-1].cumulativeSum,O.dataPoints[N].y=N===0?0:O.dataPointEOs[N-1].cumulativeSum):typeof O.dataPoints[N].isIntermediateSum<"u"&&O.dataPoints[N].isIntermediateSum===!0?(O.dataPointEOs[N].cumulativeSumYStartValue=F,O.dataPointEOs[N].cumulativeSum=N===0?0:O.dataPointEOs[N-1].cumulativeSum,O.dataPoints[N].y=N===0?0:f,F=N===0?0:O.dataPointEOs[N-1].cumulativeSum,f=0):(v=typeof O.dataPoints[N].y!="number"?0:O.dataPoints[N].y,O.dataPointEOs[N].cumulativeSumYStartValue=N===0?0:O.dataPointEOs[N-1].cumulativeSum,O.dataPointEOs[N].cumulativeSum=N===0?v:O.dataPointEOs[N-1].cumulativeSum+v,f+=v);for(N=0;N<O.dataPoints.length;N++)if(typeof O.dataPoints[N].x>"u"&&(O.dataPoints[N].x=N+(c.axisX.logarithmic?1:0)),O.dataPoints[N].x.getTime?(k=!0,f=O.dataPoints[N].x.getTime()):f=O.dataPoints[N].x,v=O.dataPoints[N].y,f<g.min&&(g.min=f),f>g.max&&(g.max=f),O.dataPointEOs[N].cumulativeSum<x.min&&(x.min=O.dataPointEOs[N].cumulativeSum),O.dataPointEOs[N].cumulativeSum>x.max&&(x.max=O.dataPointEOs[N].cumulativeSum),0<N&&(c.axisX.logarithmic?(F=f/O.dataPoints[N-1].x,1>F&&(F=1/F),g.minDiff>F&&F!==1&&(g.minDiff=F)):(F=f-O.dataPoints[N-1].x,0>F&&(F*=-1),g.minDiff>F&&F!==0&&(g.minDiff=F)),v!==null&&O.dataPoints[N-1].y!==null&&(c.axisY.logarithmic?(v=O.dataPointEOs[N].cumulativeSum/O.dataPointEOs[N-1].cumulativeSum,1>v&&(v=1/v),x.minDiff>v&&v!==1&&(x.minDiff=v)):(v=O.dataPointEOs[N].cumulativeSum-O.dataPointEOs[N-1].cumulativeSum,0>v&&(v*=-1),x.minDiff>v&&v!==0&&(x.minDiff=v)))),!(f<I)||D){if(!D&&(D=!0,0<N)){N-=2;continue}if(f>C&&!V)V=!0;else if(f>C&&V)continue;O.dataPoints[N].label&&(c.axisX.labels[f]=O.dataPoints[N].label),f<g.viewPortMin&&(g.viewPortMin=f),f>g.viewPortMax&&(g.viewPortMax=f),0<N&&(O.dataPointEOs[N-1].cumulativeSum<x.viewPortMin&&(x.viewPortMin=O.dataPointEOs[N-1].cumulativeSum),O.dataPointEOs[N-1].cumulativeSum>x.viewPortMax&&(x.viewPortMax=O.dataPointEOs[N-1].cumulativeSum)),O.dataPointEOs[N].cumulativeSum<x.viewPortMin&&(x.viewPortMin=O.dataPointEOs[N].cumulativeSum),O.dataPointEOs[N].cumulativeSum>x.viewPortMax&&(x.viewPortMax=O.dataPointEOs[N].cumulativeSum)}O.axisX.valueType=O.xValueType=k?"dateTime":"number"}},te.prototype.calculateAutoBreaks=function(){function c(W,de,he,H){return H?(he=Math.pow(Math.min(he*W/de,de/W),.2),1>=he&&(he=Math.pow(1>W?1/W:Math.min(de/W,W),.25)),{startValue:W*he,endValue:de/he}):(he=.2*Math.min(he-de+W,de-W),0>=he&&(he=.25*Math.min(de-W,Math.abs(W))),{startValue:W+he,endValue:de-he})}function x(W){if(W.dataSeriesIndexes&&!(1>W.dataSeriesIndexes.length)){var de=W.axisX.scaleBreaks&&W.axisX.scaleBreaks.autoCalculate&&1<=W.axisX.scaleBreaks.maxNumberOfAutoBreaks,he=W.axisY.scaleBreaks&&W.axisY.scaleBreaks.autoCalculate&&1<=W.axisY.scaleBreaks.maxNumberOfAutoBreaks;if(de||he)for(var tt=W.axisY.dataInfo,Se=W.axisX.dataInfo,H,ye=Se.min,Ce=Se.max,He=tt.min,Ie=tt.max,Se=Se._dataRanges,tt=tt._dataRanges,xt,qe=0,Ge=0;Ge<W.dataSeriesIndexes.length;Ge++){var _t=v.data[W.dataSeriesIndexes[Ge]];if(!(4>_t.dataPoints.length)){for(qe=0;qe<_t.dataPoints.length;qe++)if(de&&(xt=(Ce+1-ye)*Math.max(parseFloat(W.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100,H=_t.dataPoints[qe].x.getTime?_t.dataPoints[qe].x.getTime():_t.dataPoints[qe].x,xt=Math.floor((H-ye)/xt),H<Se[xt].min&&(Se[xt].min=H),H>Se[xt].max&&(Se[xt].max=H)),he){var ze=(Ie+1-He)*Math.max(parseFloat(W.axisY.scaleBreaks.collapsibleThreshold)||10,10)/100;if((H=W.type==="waterfall"?_t.dataPointEOs[qe].cumulativeSum:_t.dataPoints[qe].y)&&H.length)for(var Pe=0;Pe<H.length;Pe++)xt=Math.floor((H[Pe]-He)/ze),H[Pe]<tt[xt].min&&(tt[xt].min=H[Pe]),H[Pe]>tt[xt].max&&(tt[xt].max=H[Pe]);else h(H)||(xt=Math.floor((H-He)/ze),H<tt[xt].min&&(tt[xt].min=H),H>tt[xt].max&&(tt[xt].max=H))}}}}}function g(W){if(W.dataSeriesIndexes&&!(1>W.dataSeriesIndexes.length)&&W.axisX.scaleBreaks&&W.axisX.scaleBreaks.autoCalculate&&1<=W.axisX.scaleBreaks.maxNumberOfAutoBreaks)for(var de=W.axisX.dataInfo,he=de.min,H=de.max,ye=de._dataRanges,Ce,He=0,Ie=0;Ie<W.dataSeriesIndexes.length;Ie++){var Se=v.data[W.dataSeriesIndexes[Ie]];if(!(4>Se.dataPoints.length))for(He=0;He<Se.dataPoints.length;He++)Ce=(H+1-he)*Math.max(parseFloat(W.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100,de=Se.dataPoints[He].x.getTime?Se.dataPoints[He].x.getTime():Se.dataPoints[He].x,Ce=Math.floor((de-he)/Ce),de<ye[Ce].min&&(ye[Ce].min=de),de>ye[Ce].max&&(ye[Ce].max=de)}}for(var f,v=this,k=!1,A=0;A<this._axes.length;A++)if(this._axes[A].scaleBreaks&&this._axes[A].scaleBreaks.autoCalculate&&1<=this._axes[A].scaleBreaks.maxNumberOfAutoBreaks){k=!0,this._axes[A].dataInfo._dataRanges=[];for(var O=0;O<100/Math.max(parseFloat(this._axes[A].scaleBreaks.collapsibleThreshold)||10,10);O++)this._axes[A].dataInfo._dataRanges.push({min:1/0,max:-1/0})}if(k){for(A=0;A<this.plotInfo.plotTypes.length;A++)for(k=this.plotInfo.plotTypes[A],O=0;O<k.plotUnits.length;O++)f=k.plotUnits[O],f.type==="line"||f.type==="stepLine"||f.type==="spline"||f.type==="column"||f.type==="area"||f.type==="stepArea"||f.type==="splineArea"||f.type==="bar"||f.type==="bubble"||f.type==="scatter"||f.type==="candlestick"||f.type==="ohlc"||f.type==="rangeColumn"||f.type==="rangeBar"||f.type==="rangeArea"||f.type==="rangeSplineArea"||f.type==="waterfall"||f.type==="error"||f.type==="boxAndWhisker"?x(f):0<=f.type.indexOf("stacked")&&g(f);for(A=0;A<this._axes.length;A++)if(this._axes[A].dataInfo._dataRanges){var N=this._axes[A].dataInfo.min;f=(this._axes[A].dataInfo.max+1-N)*Math.max(parseFloat(this._axes[A].scaleBreaks.collapsibleThreshold)||10,10)/100;var D=this._axes[A].dataInfo._dataRanges,V,F,k=[];if(this._axes[A].dataInfo.dataPointYPositiveSums){var I=this._axes[A].dataInfo.dataPointYPositiveSums;V=D;for(O in I)if(I.hasOwnProperty(O)&&!isNaN(O)&&(F=I[O],!h(F))){var C=Math.floor((F-N)/f);F<V[C].min&&(V[C].min=F),F>V[C].max&&(V[C].max=F)}delete this._axes[A].dataInfo.dataPointYPositiveSums}if(this._axes[A].dataInfo.dataPointYNegativeSums){I=this._axes[A].dataInfo.dataPointYNegativeSums,V=D;for(O in I)I.hasOwnProperty(O)&&!isNaN(O)&&(F=-1*I[O],h(F)||(C=Math.floor((F-N)/f),F<V[C].min&&(V[C].min=F),F>V[C].max&&(V[C].max=F)));delete this._axes[A].dataInfo.dataPointYNegativeSums}for(O=0;O<D.length-1;O++)if(V=D[O].max,isFinite(V))for(;O<D.length-1;)if(N=D[O+1].min,isFinite(N)){F=N-V,F>f&&k.push({diff:F,start:V,end:N});break}else O++;if(this._axes[A].scaleBreaks.customBreaks)for(O=0;O<this._axes[A].scaleBreaks.customBreaks.length;O++)for(f=0;f<k.length;f++)(this._axes[A].scaleBreaks.customBreaks[O].startValue<=k[f].start&&k[f].start<=this._axes[A].scaleBreaks.customBreaks[O].endValue||this._axes[A].scaleBreaks.customBreaks[O].startValue<=k[f].start&&k[f].start<=this._axes[A].scaleBreaks.customBreaks[O].endValue||k[f].start<=this._axes[A].scaleBreaks.customBreaks[O].startValue&&this._axes[A].scaleBreaks.customBreaks[O].startValue<=k[f].end||k[f].start<=this._axes[A].scaleBreaks.customBreaks[O].endValue&&this._axes[A].scaleBreaks.customBreaks[O].endValue<=k[f].end)&&(k.splice(f,1),f--);for(k.sort(function(de,he){return he.diff-de.diff}),O=0;O<Math.min(k.length,this._axes[A].scaleBreaks.maxNumberOfAutoBreaks);O++)f=c(k[O].start,k[O].end,this._axes[A].logarithmic?this._axes[A].dataInfo.max/this._axes[A].dataInfo.min:this._axes[A].dataInfo.max-this._axes[A].dataInfo.min,this._axes[A].logarithmic),this._axes[A].scaleBreaks.autoBreaks.push(new rn(this,"autoBreaks",f,O,++this._eventManager.lastObjectId,this._axes[A].scaleBreaks)),this._axes[A].scaleBreaks._appliedBreaks.push(this._axes[A].scaleBreaks.autoBreaks[this._axes[A].scaleBreaks.autoBreaks.length-1]);this._axes[A].scaleBreaks._appliedBreaks.sort(function(de,he){return de.startValue-he.startValue})}}},te.prototype.getDataPointAtXY=function(c,x,g){g=g||!1;for(var f=[],v=this._dataInRenderedOrder.length-1;0<=v;v--){var k=null;(k=this._dataInRenderedOrder[v].getDataPointAtXY(c,x,g))&&f.push(k)}for(c=null,x=!1,g=0;g<f.length;g++)if((f[g].dataSeries.type==="line"||f[g].dataSeries.type==="stepLine"||f[g].dataSeries.type==="area"||f[g].dataSeries.type==="stepArea")&&(v=z("markerSize",f[g].dataPoint,f[g].dataSeries)||8,f[g].distance<=v/2)){x=!0;break}for(g=0;g<f.length;g++)x&&f[g].dataSeries.type!=="line"&&f[g].dataSeries.type!=="stepLine"&&f[g].dataSeries.type!=="area"&&f[g].dataSeries.type!=="stepArea"||(c?f[g].distance<=c.distance&&(c=f[g]):c=f[g]);return c},te.prototype.getObjectAtXY=function(c,x,g){var f=null;if(g=this.getDataPointAtXY(c,x,g||!1))f=g.dataSeries.dataPointIds[g.dataPointIndex];else if(X)f=R(c,x,this._eventManager.ghostCtx);else for(g=0;g<this.legend.items.length;g++){var v=this.legend.items[g];c>=v.x1&&c<=v.x2&&x>=v.y1&&x<=v.y2&&(f=v.id)}return f},te.prototype.getAutoFontSize=Br,te.prototype.resetOverlayedCanvas=function(){this.overlaidCanvasCtx.clearRect(0,0,this.width,this.height)},te.prototype.clearCanvas=Mr,te.prototype.attachEvent=function(c){this._events.push(c)},te.prototype._touchEventHandler=function(c){if(c.changedTouches&&this.interactivityEnabled){var x=[],g=c.changedTouches,f=g?g[0]:c,v=null;switch(c.type){case"touchstart":case"MSPointerDown":x=["mousemove","mousedown"],this._lastTouchData=Qn(f),this._lastTouchData.time=new Date;break;case"touchmove":case"MSPointerMove":x=["mousemove"];break;case"touchend":case"MSPointerUp":var k=this._lastTouchData&&this._lastTouchData.time?new Date-this._lastTouchData.time:0,x=this._lastTouchEventType==="touchstart"||this._lastTouchEventType==="MSPointerDown"||300>k?["mouseup","click"]:["mouseup"];break;default:return}if(!(g&&1<g.length)){v=Qn(f),v.time=new Date;try{var A=v.y-this._lastTouchData.y,k=v.time-this._lastTouchData.time;(1<Math.abs(A)&&this._lastTouchData.scroll||5<Math.abs(A)&&250>k)&&(this._lastTouchData.scroll=!0)}catch{}if(this._lastTouchEventType=c.type,this._lastTouchData.scroll&&this.zoomEnabled)this.isDrag&&this.resetOverlayedCanvas(),this.isDrag=!1;else for(g=0;g<x.length;g++)v=x[g],A=document.createEvent("MouseEvent"),A.initMouseEvent(v,!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null),f.target.dispatchEvent(A),(!h(this._lastTouchData.scroll)&&!this._lastTouchData.scroll||!this._lastTouchData.scroll&&250<k||v==="click")&&(c.preventManipulation&&c.preventManipulation(),c.preventDefault&&c.preventDefault())}}},te.prototype._dispatchRangeEvent=function(c,x){var g={chart:this};g.type=c,g.trigger=x;var f=[];this.axisX&&0<this.axisX.length&&f.push("axisX"),this.axisX2&&0<this.axisX2.length&&f.push("axisX2"),this.axisY&&0<this.axisY.length&&f.push("axisY"),this.axisY2&&0<this.axisY2.length&&f.push("axisY2");for(var v=0;v<f.length;v++)if(h(g[f[v]])&&(g[f[v]]=[]),f[v]==="axisY")for(var k=0;k<this.axisY.length;k++)g[f[v]].push({viewportMinimum:this[f[v]][k].sessionVariables.newViewportMinimum,viewportMaximum:this[f[v]][k].sessionVariables.newViewportMaximum});else if(f[v]==="axisY2")for(k=0;k<this.axisY2.length;k++)g[f[v]].push({viewportMinimum:this[f[v]][k].sessionVariables.newViewportMinimum,viewportMaximum:this[f[v]][k].sessionVariables.newViewportMaximum});else if(f[v]==="axisX")for(k=0;k<this.axisX.length;k++)g[f[v]].push({viewportMinimum:this[f[v]][k].sessionVariables.newViewportMinimum,viewportMaximum:this[f[v]][k].sessionVariables.newViewportMaximum});else if(f[v]==="axisX2")for(k=0;k<this.axisX2.length;k++)g[f[v]].push({viewportMinimum:this[f[v]][k].sessionVariables.newViewportMinimum,viewportMaximum:this[f[v]][k].sessionVariables.newViewportMaximum});this.dispatchEvent(c,g,this)},te.prototype._mouseEventHandler=function(c){typeof c.target>"u"&&c.srcElement&&(c.target=c.srcElement);var x=Qn(c),g=c.type,f,v;if(c.which?v=c.which==3:c.button&&(v=c.button==2),te.capturedEventParam&&(f=te.capturedEventParam,g==="mouseup"&&(te.capturedEventParam=null,f.chart.overlaidCanvas.releaseCapture?f.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",f.chart._mouseEventHandler,!1)),f.hasOwnProperty(g)&&(g!=="mouseup"||f.chart.overlaidCanvas.releaseCapture?c.target!==f.chart.overlaidCanvas&&X||f[g].call(f.context,x.x,x.y):c.target!==f.chart.overlaidCanvas&&(f.chart.isDrag=!1))),this.interactivityEnabled){if(this._ignoreNextEvent)this._ignoreNextEvent=!1;else if(c.preventManipulation&&c.preventManipulation(),c.preventDefault&&c.preventDefault(),G&&window.console&&(window.console.log(g+" --> x: "+x.x+"; y:"+x.y),v&&window.console.log(c.which),g==="mouseup"&&window.console.log("mouseup")),!v){if(!te.capturedEventParam&&this._events){for(var k=0;k<this._events.length;k++)if(this._events[k].hasOwnProperty(g))if(f=this._events[k],v=f.bounds,x.x>=v.x1&&x.x<=v.x2&&x.y>=v.y1&&x.y<=v.y2){f[g].call(f.context,x.x,x.y),g==="mousedown"&&f.capture===!0?(te.capturedEventParam=f,this.overlaidCanvas.setCapture?this.overlaidCanvas.setCapture():document.documentElement.addEventListener("mouseup",this._mouseEventHandler,!1)):g==="mouseup"&&(f.chart.overlaidCanvas.releaseCapture?f.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",this._mouseEventHandler,!1));break}else f=null;c.target.style.cursor=f&&f.cursor?f.cursor:this._defaultCursor}g=this.plotArea,(x.x<g.x1||x.x>g.x2||x.y<g.y1||x.y>g.y2)&&(this.toolTip&&this.toolTip.enabled?this.toolTip.hide():this.resetOverlayedCanvas()),this.isDrag&&this.zoomEnabled||!this._eventManager||this._eventManager.mouseEventHandler(c)}}},te.prototype._plotAreaMouseDown=function(c,x){this.isDrag=!0,this.dragStartPoint={x:c,y:x}},te.prototype._plotAreaMouseUp=function(c,x){if((this.plotInfo.axisPlacement==="normal"||this.plotInfo.axisPlacement==="xySwapped")&&this.isDrag){var g=x-this.dragStartPoint.y,f=c-this.dragStartPoint.x,O=0<=this.zoomType.indexOf("x"),A=0<=this.zoomType.indexOf("y"),v=!1;if(this.resetOverlayedCanvas(),this.plotInfo.axisPlacement==="xySwapped")var k=A,A=O,O=k;if(this.panEnabled||this.zoomEnabled){if(this.panEnabled)for(O=A=0;O<this._axes.length;O++)g=this._axes[O],g.logarithmic?g.viewportMinimum<g.minimum?(A=g.minimum/g.viewportMinimum,g.sessionVariables.newViewportMinimum=g.viewportMinimum*A,g.sessionVariables.newViewportMaximum=g.viewportMaximum*A,v=!0):g.viewportMaximum>g.maximum&&(A=g.viewportMaximum/g.maximum,g.sessionVariables.newViewportMinimum=g.viewportMinimum/A,g.sessionVariables.newViewportMaximum=g.viewportMaximum/A,v=!0):g.viewportMinimum<g.minimum?(A=g.minimum-g.viewportMinimum,g.sessionVariables.newViewportMinimum=g.viewportMinimum+A,g.sessionVariables.newViewportMaximum=g.viewportMaximum+A,v=!0):g.viewportMaximum>g.maximum&&(A=g.viewportMaximum-g.maximum,g.sessionVariables.newViewportMinimum=g.viewportMinimum-A,g.sessionVariables.newViewportMaximum=g.viewportMaximum-A,v=!0);else if((!O||2<Math.abs(f))&&(!A||2<Math.abs(g))&&this.zoomEnabled){if(!this.dragStartPoint)return;g=O?this.dragStartPoint.x:this.plotArea.x1,f=A?this.dragStartPoint.y:this.plotArea.y1,O=O?c:this.plotArea.x2,A=A?x:this.plotArea.y2,2<Math.abs(g-O)&&2<Math.abs(f-A)&&this._zoomPanToSelectedRegion(g,f,O,A)&&(v=!0)}v&&(this._ignoreNextEvent=!0,this._dispatchRangeEvent("rangeChanging","zoom"),this.render(),this._dispatchRangeEvent("rangeChanged","zoom"),v&&this.zoomEnabled&&this._zoomButton.style.display==="none"&&(_e(this._zoomButton,this._resetButton),se(this,this._zoomButton,"pan"),se(this,this._resetButton,"reset")))}}if(this.isDrag=!1,this.plotInfo.axisPlacement!=="none"){if(this.resetOverlayedCanvas(),this.axisX&&0<this.axisX.length)for(v=0;v<this.axisX.length;v++)this.axisX[v].crosshair&&this.axisX[v].crosshair.enabled&&this.axisX[v].renderCrosshair(c,x);if(this.axisX2&&0<this.axisX2.length)for(v=0;v<this.axisX2.length;v++)this.axisX2[v].crosshair&&this.axisX2[v].crosshair.enabled&&this.axisX2[v].renderCrosshair(c,x);if(this.axisY&&0<this.axisY.length)for(v=0;v<this.axisY.length;v++)this.axisY[v].crosshair&&this.axisY[v].crosshair.enabled&&this.axisY[v].renderCrosshair(c,x);if(this.axisY2&&0<this.axisY2.length)for(v=0;v<this.axisY2.length;v++)this.axisY2[v].crosshair&&this.axisY2[v].crosshair.enabled&&this.axisY2[v].renderCrosshair(c,x)}},te.prototype._plotAreaMouseMove=function(c,x){if(this.isDrag&&this.plotInfo.axisPlacement!=="none"){var g=0,f=0,v=g=null,v=0<=this.zoomType.indexOf("x"),k=0<=this.zoomType.indexOf("y"),A=this;if(this.plotInfo.axisPlacement==="xySwapped"&&(g=k,k=v,v=g),g=this.dragStartPoint.x-c,f=this.dragStartPoint.y-x,2<Math.abs(g)&&8>Math.abs(g)&&(this.panEnabled||this.zoomEnabled)?this.toolTip.hide():this.panEnabled||this.zoomEnabled||this.toolTip.mouseMoveHandler(c,x),(!v||2<Math.abs(g)||!k||2<Math.abs(f))&&(this.panEnabled||this.zoomEnabled)){if(this.panEnabled)v={x1:v?this.plotArea.x1+g:this.plotArea.x1,y1:k?this.plotArea.y1+f:this.plotArea.y1,x2:v?this.plotArea.x2+g:this.plotArea.x2,y2:k?this.plotArea.y2+f:this.plotArea.y2},clearTimeout(A._panTimerId),A._panTimerId=setTimeout(function(V,F,I,C){return function(){A._zoomPanToSelectedRegion(V,F,I,C,!0)&&(A._dispatchRangeEvent("rangeChanging","pan"),A.render(),A._dispatchRangeEvent("rangeChanged","pan"),A.dragStartPoint.x=c,A.dragStartPoint.y=x)}}(v.x1,v.y1,v.x2,v.y2),0);else if(this.zoomEnabled){this.resetOverlayedCanvas(),g=this.overlaidCanvasCtx.globalAlpha,this.overlaidCanvasCtx.fillStyle="#A89896";var f=v?this.dragStartPoint.x:this.plotArea.x1,O=k?this.dragStartPoint.y:this.plotArea.y1,N=v?c-this.dragStartPoint.x:this.plotArea.x2-this.plotArea.x1,D=k?x-this.dragStartPoint.y:this.plotArea.y2-this.plotArea.y1;this.validateRegion(f,O,v?c:this.plotArea.x2-this.plotArea.x1,k?x:this.plotArea.y2-this.plotArea.y1,this.zoomType!=="xy").isValid&&(this.resetOverlayedCanvas(),this.overlaidCanvasCtx.fillStyle="#99B2B5"),this.overlaidCanvasCtx.globalAlpha=.7,this.overlaidCanvasCtx.fillRect(f,O,N,D),this.overlaidCanvasCtx.globalAlpha=g}}}else if(this.toolTip.mouseMoveHandler(c,x),this.plotInfo.axisPlacement!=="none"){if(this.axisX&&0<this.axisX.length)for(v=0;v<this.axisX.length;v++)this.axisX[v].crosshair&&this.axisX[v].crosshair.enabled&&this.axisX[v].renderCrosshair(c,x);if(this.axisX2&&0<this.axisX2.length)for(v=0;v<this.axisX2.length;v++)this.axisX2[v].crosshair&&this.axisX2[v].crosshair.enabled&&this.axisX2[v].renderCrosshair(c,x);if(this.axisY&&0<this.axisY.length)for(v=0;v<this.axisY.length;v++)this.axisY[v].crosshair&&this.axisY[v].crosshair.enabled&&this.axisY[v].renderCrosshair(c,x);if(this.axisY2&&0<this.axisY2.length)for(v=0;v<this.axisY2.length;v++)this.axisY2[v].crosshair&&this.axisY2[v].crosshair.enabled&&this.axisY2[v].renderCrosshair(c,x)}},te.prototype._zoomPanToSelectedRegion=function(c,x,g,f,v){if(c=this.validateRegion(c,x,g,f,v),x=c.axesWithValidRange,g=c.axesRanges,c.isValid)for(f=0;f<x.length;f++)v=g[f],x[f].setViewPortRange(v.val1,v.val2),this.syncCharts&&this.syncCharts(v.val1,v.val2);return c.isValid},te.prototype.validateRegion=function(c,x,g,f,v){v=v||!1;for(var k=0<=this.zoomType.indexOf("x"),A=0<=this.zoomType.indexOf("y"),O=!1,N=[],D=[],V=[],F=0;F<this._axes.length;F++)(this._axes[F].type==="axisX"&&k||this._axes[F].type==="axisY"&&A)&&D.push(this._axes[F]);for(A=0;A<D.length;A++){var F=D[A],k=!1,W=F.convertPixelToValue({x:c,y:x}),C=F.convertPixelToValue({x:g,y:f});if(W>C)var I=C,C=W,W=I;if(F.scaleBreaks)for(I=0;!k&&I<F.scaleBreaks._appliedBreaks.length;I++)k=F.scaleBreaks._appliedBreaks[I].startValue<=W&&F.scaleBreaks._appliedBreaks[I].endValue>=C;if(isFinite(F.dataInfo.minDiff)){if(I=F.getApparentDifference(W,C,null,!0),!(k||!(this.panEnabled&&F.scaleBreaks&&F.scaleBreaks._appliedBreaks.length)&&(F.logarithmic&&I<Math.pow(F.dataInfo.minDiff,3)||!F.logarithmic&&I<3*Math.abs(F.dataInfo.minDiff))||W<F.minimum||C>F.maximum))N.push(F),V.push({val1:W,val2:C}),O=!0;else if(!v){O=!1;break}}}return{isValid:O,axesWithValidRange:N,axesRanges:V}},te.prototype.preparePlotArea=function(){var c=this.plotArea;if(!X&&(0<c.x1||0<c.y1)&&c.ctx.translate(c.x1,c.y1),(this.axisX[0]||this.axisX2[0])&&(this.axisY[0]||this.axisY2[0])){var x=this.axisX[0]?this.axisX[0].lineCoordinates:this.axisX2[0].lineCoordinates;if(this.axisY&&0<this.axisY.length&&this.axisY[0]){var g=this.axisY[0];c.x1=x.x1<x.x2?x.x1:g.lineCoordinates.x1,c.y1=x.y1<g.lineCoordinates.y1?x.y1:g.lineCoordinates.y1,c.x2=x.x2>g.lineCoordinates.x2?x.x2:g.lineCoordinates.x2,c.y2=x.y2>x.y1?x.y2:g.lineCoordinates.y2,c.width=c.x2-c.x1,c.height=c.y2-c.y1}this.axisY2&&0<this.axisY2.length&&this.axisY2[0]&&(g=this.axisY2[0],c.x1=x.x1<x.x2?x.x1:g.lineCoordinates.x1,c.y1=x.y1<g.lineCoordinates.y1?x.y1:g.lineCoordinates.y1,c.x2=x.x2>g.lineCoordinates.x2?x.x2:g.lineCoordinates.x2,c.y2=x.y2>x.y1?x.y2:g.lineCoordinates.y2,c.width=c.x2-c.x1,c.height=c.y2-c.y1)}else x=this.layoutManager.getFreeSpace(),c.x1=x.x1,c.x2=x.x2,c.y1=x.y1,c.y2=x.y2,c.width=x.width,c.height=x.height;X||(c.canvas.width=c.width,c.canvas.height=c.height,c.canvas.style.left=c.x1+"px",c.canvas.style.top=c.y1+"px",(0<c.x1||0<c.y1)&&c.ctx.translate(-c.x1,-c.y1)),c.layoutManager=new K(c.x1,c.y1,c.x2,c.y2,2)},te.prototype.renderIndexLabels=function(c){var x=c||this.plotArea.ctx,g=this.plotArea,f=0,v=0,k=0,A=0,O=f=A=v=k=0,N=0;for(c=0;c<this._indexLabels.length;c++){var D=this._indexLabels[c],V=D.chartType.toLowerCase(),F,I,O=z("indexLabelFontColor",D.dataPoint,D.dataSeries),N=z("indexLabelFontSize",D.dataPoint,D.dataSeries);F=z("indexLabelFontFamily",D.dataPoint,D.dataSeries),I=z("indexLabelFontStyle",D.dataPoint,D.dataSeries);var A=z("indexLabelFontWeight",D.dataPoint,D.dataSeries),C=z("indexLabelBackgroundColor",D.dataPoint,D.dataSeries),v=z("indexLabelMaxWidth",D.dataPoint,D.dataSeries),k=z("indexLabelWrap",D.dataPoint,D.dataSeries),W=z("indexLabelLineDashType",D.dataPoint,D.dataSeries),de=z("indexLabelLineColor",D.dataPoint,D.dataSeries),he=h(D.dataPoint.indexLabelLineThickness)?h(D.dataSeries.options.indexLabelLineThickness)?0:D.dataSeries.options.indexLabelLineThickness:D.dataPoint.indexLabelLineThickness,f=0<he?Math.min(10,(this.plotInfo.axisPlacement==="normal"?this.plotArea.height:this.plotArea.width)<<0):0,H={percent:null,total:null},ye=null;(0<=D.dataSeries.type.indexOf("stacked")||D.dataSeries.type==="pie"||D.dataSeries.type==="doughnut")&&(H=this.getPercentAndTotal(D.dataSeries,D.dataPoint)),(D.dataSeries.indexLabelFormatter||D.dataPoint.indexLabelFormatter)&&(ye={chart:this,dataSeries:D.dataSeries,dataPoint:D.dataPoint,index:D.indexKeyword,total:H.total,percent:H.percent});var Ce=D.dataPoint.indexLabelFormatter?D.dataPoint.indexLabelFormatter(ye):D.dataPoint.indexLabel?this.replaceKeywordsWithValue(D.dataPoint.indexLabel,D.dataPoint,D.dataSeries,null,D.indexKeyword):D.dataSeries.indexLabelFormatter?D.dataSeries.indexLabelFormatter(ye):D.dataSeries.indexLabel?this.replaceKeywordsWithValue(D.dataSeries.indexLabel,D.dataPoint,D.dataSeries,null,D.indexKeyword):null;if(Ce!==null&&Ce!==""){var H=z("indexLabelPlacement",D.dataPoint,D.dataSeries),ye=z("indexLabelOrientation",D.dataPoint,D.dataSeries),He=D.direction,Ie=D.dataSeries.axisX,Se=D.dataSeries.axisY,tt=!1,C=new ue(x,{x:0,y:0,maxWidth:v||.5*this.width,maxHeight:k?5*N:1.5*N,angle:ye==="horizontal"?0:-90,text:Ce,padding:0,backgroundColor:C,horizontalAlign:"left",fontSize:N,fontFamily:F,fontWeight:A,fontColor:O,fontStyle:I,textBaseline:"top"});if(C.measureText(),D.dataSeries.indexLabelMaxWidth=C.maxWidth,V==="stackedarea100"){if(D.point.x<g.x1||D.point.x>g.x2||D.point.y<g.y1-1||D.point.y>g.y2+1)continue}else if(V==="rangearea"||V==="rangesplinearea"){if(D.dataPoint.x<Ie.viewportMinimum||D.dataPoint.x>Ie.viewportMaximum||Math.max.apply(null,D.dataPoint.y)<Se.viewportMinimum||Math.min.apply(null,D.dataPoint.y)>Se.viewportMaximum)continue}else if(0<=V.indexOf("line")||0<=V.indexOf("area")||0<=V.indexOf("bubble")||0<=V.indexOf("scatter")){if(D.dataPoint.x<Ie.viewportMinimum||D.dataPoint.x>Ie.viewportMaximum||D.dataPoint.y<Se.viewportMinimum||D.dataPoint.y>Se.viewportMaximum)continue}else if(0<=V.indexOf("column")||V==="waterfall"||V==="error"&&!D.axisSwapped){if(D.dataPoint.x<Ie.viewportMinimum||D.dataPoint.x>Ie.viewportMaximum||D.bounds.y1>g.y2||D.bounds.y2<g.y1)continue}else if(0<=V.indexOf("bar")||V==="error"){if(D.dataPoint.x<Ie.viewportMinimum||D.dataPoint.x>Ie.viewportMaximum||D.bounds.x1>g.x2||D.bounds.x2<g.x1)continue}else if(V==="candlestick"||V==="ohlc"){if(D.dataPoint.x<Ie.viewportMinimum||D.dataPoint.x>Ie.viewportMaximum||Math.max.apply(null,D.dataPoint.y)<Se.viewportMinimum||Math.min.apply(null,D.dataPoint.y)>Se.viewportMaximum)continue}else if(D.dataPoint.x<Ie.viewportMinimum||D.dataPoint.x>Ie.viewportMaximum)continue;v=A=2,ye==="horizontal"?(O=C.width,N=C.height):(N=C.width,O=C.height),this.plotInfo.axisPlacement==="normal"?(0<=V.indexOf("line")||0<=V.indexOf("area")?(H="auto",A=4):0<=V.indexOf("stacked")?H==="auto"&&(H="inside"):(V==="bubble"||V==="scatter")&&(H="inside"),F=D.point.x-O/2,H!=="inside"?(v=g.y1,k=g.y2,0<He?(I=D.point.y-N-A-f,I<v&&(I=H==="auto"?Math.max(D.point.y,v)+A+f:v+A+f,tt=I+N>D.point.y)):(I=D.point.y+A+f,I>k-N-A-f&&(I=H==="auto"?Math.min(D.point.y,k)-N-A-f:k-N-A-f,tt=I<D.point.y))):(v=Math.max(D.bounds.y1,g.y1),k=Math.min(D.bounds.y2,g.y2),f=0<=V.indexOf("range")||V==="error"?0<He?Math.max(D.bounds.y1,g.y1)+N/2+A:Math.min(D.bounds.y2,g.y2)-N/2-A:(Math.max(D.bounds.y1,g.y1)+Math.min(D.bounds.y2,g.y2))/2,0<He?(I=Math.max(D.point.y,f)-N/2,I<v&&(V==="bubble"||V==="scatter")&&(I=Math.max(D.point.y-N-A,g.y1+A))):(I=Math.min(D.point.y,f)-N/2,I>k-N-A&&(V==="bubble"||V==="scatter")&&(I=Math.min(D.point.y+A,g.y2-N-A))),I=Math.min(I,k-N))):(0<=V.indexOf("line")||0<=V.indexOf("area")||0<=V.indexOf("scatter")?(H="auto",v=4):0<=V.indexOf("stacked")?H==="auto"&&(H="inside"):V==="bubble"&&(H="inside"),I=D.point.y-N/2,H!=="inside"?(A=g.x1,k=g.x2,0>He?(F=D.point.x-O-v-f,F<A&&(F=H==="auto"?Math.max(D.point.x,A)+v+f:A+v+f,tt=F+O>D.point.x)):(F=D.point.x+v+f,F>k-O-v-f&&(F=H==="auto"?Math.min(D.point.x,k)-O-v-f:k-O-v-f,tt=F<D.point.x))):(A=Math.max(D.bounds.x1,g.x1),Math.min(D.bounds.x2,g.x2),f=0<=V.indexOf("range")||V==="error"?0>He?Math.max(D.bounds.x1,g.x1)+O/2+v:Math.min(D.bounds.x2,g.x2)-O/2-v:(Math.max(D.bounds.x1,g.x1)+Math.min(D.bounds.x2,g.x2))/2,F=0>He?Math.max(D.point.x,f)-O/2:Math.min(D.point.x,f)-O/2,F=Math.max(F,A))),ye==="vertical"&&(I+=N),C.x=F,C.y=I,C.render(!0),he&&H!=="inside"&&(0>V.indexOf("bar")&&(V!=="error"||!D.axisSwapped)&&D.point.x>g.x1&&D.point.x<g.x2||!tt)&&(0>V.indexOf("column")&&(V!=="error"||D.axisSwapped)&&D.point.y>g.y1&&D.point.y<g.y2||!tt)&&(x.lineWidth=he,x.strokeStyle=de||"gray",x.setLineDash&&x.setLineDash(S(W,he)),x.beginPath(),x.moveTo(D.point.x,D.point.y),0<=V.indexOf("bar")||V==="error"&&D.axisSwapped?x.lineTo(F+(0<D.direction?0:O),I+(ye==="horizontal"?N:-N)/2):0<=V.indexOf("column")||V==="error"&&!D.axisSwapped?x.lineTo(F+O/2,I+((0<D.direction?N:-N)+(ye==="horizontal"?N:-N))/2):x.lineTo(F+O/2,I+((I<D.point.y?N:-N)+(ye==="horizontal"?N:-N))/2),x.stroke())}}for(x={source:x,dest:this.plotArea.ctx,animationCallback:pt.fadeInAnimation,easingFunction:pt.easing.easeInQuad,animationBase:0,startTimePercent:.7},c=0;c<this._indexLabels.length;c++)D=this._indexLabels[c],C=z("indexLabelBackgroundColor",D.dataPoint,D.dataSeries),D.dataSeries.indexLabelBackgroundColor=h(C)?X?"transparent":null:C;return x},te.prototype.renderLine=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x;if(!(0>=c.dataSeriesIndexes.length)){var f=this._eventManager.ghostCtx;g.save();var v=this.plotArea;g.beginPath(),g.rect(v.x1,v.y1,v.width,v.height),g.clip();for(var k=[],A,O=0;O<c.dataSeriesIndexes.length;O++){var N=c.dataSeriesIndexes[O],D=this.data[N];g.lineWidth=D.lineThickness;var V=D.dataPoints,F="solid";if(g.setLineDash){var I=S(D.nullDataLineDashType,D.lineThickness),F=D.lineDashType,C=S(F,D.lineThickness);g.setLineDash(C)}var W=D.id;this._eventManager.objectMap[W]={objectType:"dataSeries",dataSeriesIndex:N},W=d(W),f.strokeStyle=W,f.lineWidth=0<D.lineThickness?Math.max(D.lineThickness,4):0;var W=D._colorSet,de=W=D.lineColor=D.options.lineColor?D.options.lineColor:W[0];g.strokeStyle=W;var he=!0,H=0,ye,Ce;if(g.beginPath(),0<V.length){for(var He=!1,H=0;H<V.length;H++)if(ye=V[H].x.getTime?V[H].x.getTime():V[H].x,!(ye<c.axisX.dataInfo.viewPortMin||ye>c.axisX.dataInfo.viewPortMax&&(!D.connectNullData||!He)))if(typeof V[H].y!="number")0<H&&!(D.connectNullData||He||he)&&(g.stroke(),X&&f.stroke()),He=!0;else{ye=c.axisX.convertValueToPixel(ye),Ce=c.axisY.convertValueToPixel(V[H].y);var Ie=D.dataPointIds[H];if(this._eventManager.objectMap[Ie]={id:Ie,objectType:"dataPoint",dataSeriesIndex:N,dataPointIndex:H,x1:ye,y1:Ce},he||He?(!he&&D.connectNullData?(g.setLineDash&&(D.options.nullDataLineDashType||F===D.lineDashType&&D.lineDashType!==D.nullDataLineDashType)&&(g.stroke(),g.beginPath(),g.moveTo(A.x,A.y),F=D.nullDataLineDashType,g.setLineDash(I)),g.lineTo(ye,Ce),X&&f.lineTo(ye,Ce)):(g.beginPath(),g.moveTo(ye,Ce),X&&(f.beginPath(),f.moveTo(ye,Ce))),He=he=!1):(g.lineTo(ye,Ce),X&&f.lineTo(ye,Ce),H%500==0&&(g.stroke(),g.beginPath(),g.moveTo(ye,Ce),X&&(f.stroke(),f.beginPath(),f.moveTo(ye,Ce)))),A={x:ye,y:Ce},H<V.length-1&&(de!==(V[H].lineColor||W)||F!==(V[H].lineDashType||D.lineDashType))&&(g.stroke(),g.beginPath(),g.moveTo(ye,Ce),de=V[H].lineColor||W,g.strokeStyle=de,g.setLineDash&&(V[H].lineDashType?(F=V[H].lineDashType,g.setLineDash(S(F,D.lineThickness))):(F=D.lineDashType,g.setLineDash(C)))),0<V[H].markerSize||0<D.markerSize){var Se=D.getMarkerProperties(H,ye,Ce,g);k.push(Se),Ie=d(Ie),X&&k.push({x:ye,y:Ce,ctx:f,type:Se.type,size:Se.size,color:Ie,borderColor:Ie,borderThickness:Se.borderThickness})}(V[H].indexLabel||D.indexLabel||V[H].indexLabelFormatter||D.indexLabelFormatter)&&this._indexLabels.push({chartType:"line",dataPoint:V[H],dataSeries:D,point:{x:ye,y:Ce},direction:0>V[H].y===c.axisY.reversed?1:-1,color:W})}g.stroke(),X&&f.stroke()}}return It.drawMarkers(k),X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(v.x1,v.y1,v.width,v.height),f.beginPath()),g.restore(),g.beginPath(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.xClipAnimation,easingFunction:pt.easing.linear,animationBase:0}}},te.prototype.renderStepLine=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x;if(!(0>=c.dataSeriesIndexes.length)){var f=this._eventManager.ghostCtx;g.save();var v=this.plotArea;g.beginPath(),g.rect(v.x1,v.y1,v.width,v.height),g.clip();for(var k=[],A,O=0;O<c.dataSeriesIndexes.length;O++){var N=c.dataSeriesIndexes[O],D=this.data[N];g.lineWidth=D.lineThickness;var V=D.dataPoints,F="solid";if(g.setLineDash){var I=S(D.nullDataLineDashType,D.lineThickness),F=D.lineDashType,C=S(F,D.lineThickness);g.setLineDash(C)}var W=D.id;this._eventManager.objectMap[W]={objectType:"dataSeries",dataSeriesIndex:N},W=d(W),f.strokeStyle=W,f.lineWidth=0<D.lineThickness?Math.max(D.lineThickness,4):0;var W=D._colorSet,de=W=D.lineColor=D.options.lineColor?D.options.lineColor:W[0];g.strokeStyle=W;var he=!0,H=0,ye,Ce;if(g.beginPath(),0<V.length){for(var He=!1,H=0;H<V.length;H++)if(ye=V[H].getTime?V[H].x.getTime():V[H].x,!(ye<c.axisX.dataInfo.viewPortMin||ye>c.axisX.dataInfo.viewPortMax&&(!D.connectNullData||!He)))if(typeof V[H].y!="number")0<H&&!(D.connectNullData||He||he)&&(g.stroke(),X&&f.stroke()),He=!0;else{var Ie=Ce;ye=c.axisX.convertValueToPixel(ye),Ce=c.axisY.convertValueToPixel(V[H].y);var Se=D.dataPointIds[H];this._eventManager.objectMap[Se]={id:Se,objectType:"dataPoint",dataSeriesIndex:N,dataPointIndex:H,x1:ye,y1:Ce},he||He?(!he&&D.connectNullData?(g.setLineDash&&(D.options.nullDataLineDashType||F===D.lineDashType&&D.lineDashType!==D.nullDataLineDashType)&&(g.stroke(),g.beginPath(),g.moveTo(A.x,A.y),F=D.nullDataLineDashType,g.setLineDash(I)),g.lineTo(ye,Ie),g.lineTo(ye,Ce),X&&(f.lineTo(ye,Ie),f.lineTo(ye,Ce))):(g.beginPath(),g.moveTo(ye,Ce),X&&(f.beginPath(),f.moveTo(ye,Ce))),He=he=!1):(g.lineTo(ye,Ie),X&&f.lineTo(ye,Ie),g.lineTo(ye,Ce),X&&f.lineTo(ye,Ce),H%500==0&&(g.stroke(),g.beginPath(),g.moveTo(ye,Ce),X&&(f.stroke(),f.beginPath(),f.moveTo(ye,Ce)))),A={x:ye,y:Ce},H<V.length-1&&(de!==(V[H].lineColor||W)||F!==(V[H].lineDashType||D.lineDashType))&&(g.stroke(),g.beginPath(),g.moveTo(ye,Ce),de=V[H].lineColor||W,g.strokeStyle=de,g.setLineDash&&(V[H].lineDashType?(F=V[H].lineDashType,g.setLineDash(S(F,D.lineThickness))):(F=D.lineDashType,g.setLineDash(C)))),(0<V[H].markerSize||0<D.markerSize)&&(Ie=D.getMarkerProperties(H,ye,Ce,g),k.push(Ie),Se=d(Se),X&&k.push({x:ye,y:Ce,ctx:f,type:Ie.type,size:Ie.size,color:Se,borderColor:Se,borderThickness:Ie.borderThickness})),(V[H].indexLabel||D.indexLabel||V[H].indexLabelFormatter||D.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepLine",dataPoint:V[H],dataSeries:D,point:{x:ye,y:Ce},direction:0>V[H].y===c.axisY.reversed?1:-1,color:W})}g.stroke(),X&&f.stroke()}}return It.drawMarkers(k),X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(v.x1,v.y1,v.width,v.height),f.beginPath()),g.restore(),g.beginPath(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.xClipAnimation,easingFunction:pt.easing.linear,animationBase:0}}},te.prototype.renderSpline=function(c){function x(Se){if(Se=Te(Se,2),0<Se.length){f.beginPath(),X&&v.beginPath(),f.moveTo(Se[0].x,Se[0].y),Se[0].newStrokeStyle&&(f.strokeStyle=Se[0].newStrokeStyle),Se[0].newLineDashArray&&f.setLineDash(Se[0].newLineDashArray),X&&v.moveTo(Se[0].x,Se[0].y);for(var tt=0;tt<Se.length-3;tt+=3)f.bezierCurveTo(Se[tt+1].x,Se[tt+1].y,Se[tt+2].x,Se[tt+2].y,Se[tt+3].x,Se[tt+3].y),X&&v.bezierCurveTo(Se[tt+1].x,Se[tt+1].y,Se[tt+2].x,Se[tt+2].y,Se[tt+3].x,Se[tt+3].y),(0<tt&&tt%3e3===0||Se[tt+3].newStrokeStyle||Se[tt+3].newLineDashArray)&&(f.stroke(),f.beginPath(),f.moveTo(Se[tt+3].x,Se[tt+3].y),Se[tt+3].newStrokeStyle&&(f.strokeStyle=Se[tt+3].newStrokeStyle),Se[tt+3].newLineDashArray&&f.setLineDash(Se[tt+3].newLineDashArray),X&&(v.stroke(),v.beginPath(),v.moveTo(Se[tt+3].x,Se[tt+3].y)));f.stroke(),X&&v.stroke()}}var g=c.targetCanvasCtx||this.plotArea.ctx,f=X?this._preRenderCtx:g;if(!(0>=c.dataSeriesIndexes.length)){var v=this._eventManager.ghostCtx;f.save();var k=this.plotArea;f.beginPath(),f.rect(k.x1,k.y1,k.width,k.height),f.clip();for(var A=[],O=0;O<c.dataSeriesIndexes.length;O++){var N=c.dataSeriesIndexes[O],D=this.data[N];f.lineWidth=D.lineThickness;var V=D.dataPoints,F="solid";if(f.setLineDash){var I=S(D.nullDataLineDashType,D.lineThickness),F=D.lineDashType,C=S(F,D.lineThickness);f.setLineDash(C)}var W=D.id;this._eventManager.objectMap[W]={objectType:"dataSeries",dataSeriesIndex:N},W=d(W),v.strokeStyle=W,v.lineWidth=0<D.lineThickness?Math.max(D.lineThickness,4):0;var W=D._colorSet,de=W=D.lineColor=D.options.lineColor?D.options.lineColor:W[0];f.strokeStyle=W;var he=0,H,ye,Ce=[];if(f.beginPath(),0<V.length){for(ye=!1,he=0;he<V.length;he++)if(H=V[he].getTime?V[he].x.getTime():V[he].x,!(H<c.axisX.dataInfo.viewPortMin||H>c.axisX.dataInfo.viewPortMax&&(!D.connectNullData||!ye)))if(typeof V[he].y!="number")0<he&&!ye&&(D.connectNullData?f.setLineDash&&0<Ce.length&&(D.options.nullDataLineDashType||!V[he-1].lineDashType)&&(Ce[Ce.length-1].newLineDashArray=I,F=D.nullDataLineDashType):(x(Ce),Ce=[])),ye=!0;else{H=c.axisX.convertValueToPixel(H),ye=c.axisY.convertValueToPixel(V[he].y);var He=D.dataPointIds[he];if(this._eventManager.objectMap[He]={id:He,objectType:"dataPoint",dataSeriesIndex:N,dataPointIndex:he,x1:H,y1:ye},Ce[Ce.length]={x:H,y:ye},he<V.length-1&&(de!==(V[he].lineColor||W)||F!==(V[he].lineDashType||D.lineDashType))&&(de=V[he].lineColor||W,Ce[Ce.length-1].newStrokeStyle=de,f.setLineDash&&(V[he].lineDashType?(F=V[he].lineDashType,Ce[Ce.length-1].newLineDashArray=S(F,D.lineThickness)):(F=D.lineDashType,Ce[Ce.length-1].newLineDashArray=C))),0<V[he].markerSize||0<D.markerSize){var Ie=D.getMarkerProperties(he,H,ye,f);A.push(Ie),He=d(He),X&&A.push({x:H,y:ye,ctx:v,type:Ie.type,size:Ie.size,color:He,borderColor:He,borderThickness:Ie.borderThickness})}(V[he].indexLabel||D.indexLabel||V[he].indexLabelFormatter||D.indexLabelFormatter)&&this._indexLabels.push({chartType:"spline",dataPoint:V[he],dataSeries:D,point:{x:H,y:ye},direction:0>V[he].y===c.axisY.reversed?1:-1,color:W}),ye=!1}}x(Ce)}return It.drawMarkers(A),X&&(g.drawImage(this._preRenderCanvas,0,0,this.width,this.height),f.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&f.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&f.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),f.clearRect(k.x1,k.y1,k.width,k.height),v.beginPath()),f.restore(),f.beginPath(),{source:g,dest:this.plotArea.ctx,animationCallback:pt.xClipAnimation,easingFunction:pt.easing.linear,animationBase:0}}},te.prototype.renderColumn=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x;if(!(0>=c.dataSeriesIndexes.length)){var f=null,v=this.plotArea,D=0,k,A,O,N=c.axisY.convertValueToPixel(c.axisY.logarithmic?c.axisY.viewportMinimum:0),D=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,V=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,.9*(this.plotArea.width/c.plotType.totalDataSeries))<<0,F=c.axisX.dataInfo.minDiff;for(isFinite(F)||(F=.3*Math.abs(c.axisX.range)),F=this.dataPointWidth=this.options.dataPointWidth?this.dataPointWidth:.9*(v.width*(c.axisX.logarithmic?Math.log(F)/Math.log(c.axisX.range):Math.abs(F)/Math.abs(c.axisX.range))/c.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&D>V&&(D=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,V)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&V<D&&(V=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,D)),F<D&&(F=D),F>V&&(F=V),g.save(),X&&this._eventManager.ghostCtx.save(),g.beginPath(),g.rect(v.x1,v.y1,v.width,v.height),g.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.clip()),V=0;V<c.dataSeriesIndexes.length;V++){var I=c.dataSeriesIndexes[V],C=this.data[I],W=C.dataPoints;if(0<W.length){for(var de=!!(5<F&&C.bevelEnabled),D=0;D<W.length;D++)if(W[D].getTime?O=W[D].x.getTime():O=W[D].x,!(O<c.axisX.dataInfo.viewPortMin||O>c.axisX.dataInfo.viewPortMax)&&typeof W[D].y=="number"){k=c.axisX.convertValueToPixel(O),A=c.axisY.convertValueToPixel(W[D].y),k=c.axisX.reversed?k+c.plotType.totalDataSeries*F/2-(c.previousDataSeriesCount+V)*F<<0:k-c.plotType.totalDataSeries*F/2+(c.previousDataSeriesCount+V)*F<<0;var he=c.axisX.reversed?k-F<<0:k+F<<0,H;0<=W[D].y?H=N:(H=A,A=N),A>H&&(f=A,A=H,H=f),f=W[D].color?W[D].color:C._colorSet[D%C._colorSet.length],li(g,k,A,he,H,f,0,null,de&&0<=W[D].y,0>W[D].y&&de,!1,!1,C.fillOpacity),f=C.dataPointIds[D],this._eventManager.objectMap[f]={id:f,objectType:"dataPoint",dataSeriesIndex:I,dataPointIndex:D,x1:k,y1:A,x2:he,y2:H},f=d(f),X&&li(this._eventManager.ghostCtx,k,A,he,H,f,0,null,!1,!1,!1,!1),(W[D].indexLabel||C.indexLabel||W[D].indexLabelFormatter||C.indexLabelFormatter)&&this._indexLabels.push({chartType:"column",dataPoint:W[D],dataSeries:C,point:{x:k+(he-k)/2,y:0>W[D].y===c.axisY.reversed?A:H},direction:0>W[D].y===c.axisY.reversed?1:-1,bounds:{x1:k,y1:Math.min(A,H),x2:he,y2:Math.max(A,H)},color:f})}}}return X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.restore()),g.restore(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.yScaleAnimation,easingFunction:pt.easing.easeOutQuart,animationBase:N<c.axisY.bounds.y1?c.axisY.bounds.y1:N>c.axisY.bounds.y2?c.axisY.bounds.y2:N}}},te.prototype.renderStackedColumn=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x;if(!(0>=c.dataSeriesIndexes.length)){var f=null,v=this.plotArea,k=[],A=[],O=[],N=[],I=0,D,V,F=c.axisY.convertValueToPixel(c.axisY.logarithmic?c.axisY.viewportMinimum:0),I=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;D=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width<<0;var C=c.axisX.dataInfo.minDiff;isFinite(C)||(C=.3*Math.abs(c.axisX.range)),C=this.options.dataPointWidth?this.dataPointWidth:.9*(v.width*(c.axisX.logarithmic?Math.log(C)/Math.log(c.axisX.range):Math.abs(C)/Math.abs(c.axisX.range))/c.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&I>D&&(I=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,D)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&D<I&&(D=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,I)),C<I&&(C=I),C>D&&(C=D),g.save(),X&&this._eventManager.ghostCtx.save(),g.beginPath(),g.rect(v.x1,v.y1,v.width,v.height),g.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.clip());for(var W=0;W<c.dataSeriesIndexes.length;W++){var de=c.dataSeriesIndexes[W],he=this.data[de],H=he.dataPoints;if(0<H.length){var ye=!!(5<C&&he.bevelEnabled);for(g.strokeStyle="#4572A7 ",I=0;I<H.length;I++)if(f=H[I].x.getTime?H[I].x.getTime():H[I].x,!(f<c.axisX.dataInfo.viewPortMin||f>c.axisX.dataInfo.viewPortMax)&&typeof H[I].y=="number"){D=c.axisX.convertValueToPixel(f);var Ce=D-c.plotType.plotUnits.length*C/2+c.index*C<<0,He=Ce+C<<0,Ie;if(c.axisY.logarithmic||c.axisY.scaleBreaks&&0<c.axisY.scaleBreaks._appliedBreaks.length&&0<H[I].y)O[f]=H[I].y+(O[f]?O[f]:0),0<O[f]&&(V=c.axisY.convertValueToPixel(O[f]),Ie=typeof k[f]<"u"?k[f]:F,k[f]=V);else if(c.axisY.scaleBreaks&&0<c.axisY.scaleBreaks._appliedBreaks.length&&0>=H[I].y)N[f]=H[I].y+(N[f]?N[f]:0),Ie=c.axisY.convertValueToPixel(N[f]),V=typeof A[f]<"u"?A[f]:F,A[f]=Ie;else if(V=c.axisY.convertValueToPixel(H[I].y),0<=H[I].y){var Se=typeof k[f]<"u"?k[f]:0;V-=Se,Ie=F-Se,k[f]=Se+(Ie-V)}else Se=A[f]?A[f]:0,Ie=V+Se,V=F+Se,A[f]=Se+(Ie-V);f=H[I].color?H[I].color:he._colorSet[I%he._colorSet.length],li(g,Ce,V,He,Ie,f,0,null,ye&&0<=H[I].y,0>H[I].y&&ye,!1,!1,he.fillOpacity),f=he.dataPointIds[I],this._eventManager.objectMap[f]={id:f,objectType:"dataPoint",dataSeriesIndex:de,dataPointIndex:I,x1:Ce,y1:V,x2:He,y2:Ie},f=d(f),X&&li(this._eventManager.ghostCtx,Ce,V,He,Ie,f,0,null,!1,!1,!1,!1),(H[I].indexLabel||he.indexLabel||H[I].indexLabelFormatter||he.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn",dataPoint:H[I],dataSeries:he,point:{x:D,y:0<=H[I].y?V:Ie},direction:0>H[I].y===c.axisY.reversed?1:-1,bounds:{x1:Ce,y1:Math.min(V,Ie),x2:He,y2:Math.max(V,Ie)},color:f})}}}return X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.restore()),g.restore(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.yScaleAnimation,easingFunction:pt.easing.easeOutQuart,animationBase:F<c.axisY.bounds.y1?c.axisY.bounds.y1:F>c.axisY.bounds.y2?c.axisY.bounds.y2:F}}},te.prototype.renderStackedColumn100=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x;if(!(0>=c.dataSeriesIndexes.length)){var f=null,v=this.plotArea,k=[],A=[],O=[],N=[],I=0,D,V,F=c.axisY.convertValueToPixel(c.axisY.logarithmic?c.axisY.viewportMinimum:0),I=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;D=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width<<0;var C=c.axisX.dataInfo.minDiff;isFinite(C)||(C=.3*Math.abs(c.axisX.range)),C=this.options.dataPointWidth?this.dataPointWidth:.9*(v.width*(c.axisX.logarithmic?Math.log(C)/Math.log(c.axisX.range):Math.abs(C)/Math.abs(c.axisX.range))/c.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&I>D&&(I=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,D)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&D<I&&(D=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,I)),C<I&&(C=I),C>D&&(C=D),g.save(),X&&this._eventManager.ghostCtx.save(),g.beginPath(),g.rect(v.x1,v.y1,v.width,v.height),g.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.clip());for(var W=0;W<c.dataSeriesIndexes.length;W++){var de=c.dataSeriesIndexes[W],he=this.data[de],H=he.dataPoints;if(0<H.length){for(var ye=!!(5<C&&he.bevelEnabled),I=0;I<H.length;I++)if(f=H[I].x.getTime?H[I].x.getTime():H[I].x,!(f<c.axisX.dataInfo.viewPortMin||f>c.axisX.dataInfo.viewPortMax)&&typeof H[I].y=="number"){D=c.axisX.convertValueToPixel(f),V=c.dataPointYSums[f]!==0?100*(H[I].y/c.dataPointYSums[f]):0;var Ce=D-c.plotType.plotUnits.length*C/2+c.index*C<<0,He=Ce+C<<0,Ie;if(c.axisY.logarithmic||c.axisY.scaleBreaks&&0<c.axisY.scaleBreaks._appliedBreaks.length&&0<H[I].y){if(O[f]=V+(typeof O[f]<"u"?O[f]:0),0>=O[f])continue;V=c.axisY.convertValueToPixel(O[f]),Ie=k[f]?k[f]:F,k[f]=V}else if(c.axisY.scaleBreaks&&0<c.axisY.scaleBreaks._appliedBreaks.length&&0>=H[I].y)N[f]=V+(typeof N[f]<"u"?N[f]:0),Ie=c.axisY.convertValueToPixel(N[f]),V=A[f]?A[f]:F,A[f]=Ie;else if(V=c.axisY.convertValueToPixel(V),0<=H[I].y){var Se=typeof k[f]<"u"?k[f]:0;V-=Se,Ie=F-Se,c.dataSeriesIndexes.length-1===W&&1>=Math.abs(v.y1-V)&&(V=v.y1),k[f]=Se+(Ie-V)}else Se=typeof A[f]<"u"?A[f]:0,Ie=V+Se,V=F+Se,c.dataSeriesIndexes.length-1===W&&1>=Math.abs(v.y2-Ie)&&(Ie=v.y2),A[f]=Se+(Ie-V);f=H[I].color?H[I].color:he._colorSet[I%he._colorSet.length],li(g,Ce,V,He,Ie,f,0,null,ye&&0<=H[I].y,0>H[I].y&&ye,!1,!1,he.fillOpacity),f=he.dataPointIds[I],this._eventManager.objectMap[f]={id:f,objectType:"dataPoint",dataSeriesIndex:de,dataPointIndex:I,x1:Ce,y1:V,x2:He,y2:Ie},f=d(f),X&&li(this._eventManager.ghostCtx,Ce,V,He,Ie,f,0,null,!1,!1,!1,!1),(H[I].indexLabel||he.indexLabel||H[I].indexLabelFormatter||he.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn100",dataPoint:H[I],dataSeries:he,point:{x:D,y:0<=H[I].y?V:Ie},direction:0>H[I].y===c.axisY.reversed?1:-1,bounds:{x1:Ce,y1:Math.min(V,Ie),x2:He,y2:Math.max(V,Ie)},color:f})}}}return X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.restore()),g.restore(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.yScaleAnimation,easingFunction:pt.easing.easeOutQuart,animationBase:F<c.axisY.bounds.y1?c.axisY.bounds.y1:F>c.axisY.bounds.y2?c.axisY.bounds.y2:F}}},te.prototype.renderBar=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x;if(!(0>=c.dataSeriesIndexes.length)){var f=null,v=this.plotArea,D=0,k,A,O,N=c.axisY.convertValueToPixel(c.axisY.logarithmic?c.axisY.viewportMinimum:0),D=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,V=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,.9*(this.plotArea.height/c.plotType.totalDataSeries))<<0,F=c.axisX.dataInfo.minDiff;for(isFinite(F)||(F=.3*Math.abs(c.axisX.range)),F=this.options.dataPointWidth?this.dataPointWidth:.9*(v.height*(c.axisX.logarithmic?Math.log(F)/Math.log(c.axisX.range):Math.abs(F)/Math.abs(c.axisX.range))/c.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&D>V&&(D=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,V)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&V<D&&(V=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,D)),F<D&&(F=D),F>V&&(F=V),g.save(),X&&this._eventManager.ghostCtx.save(),g.beginPath(),g.rect(v.x1,v.y1,v.width,v.height),g.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.clip()),V=0;V<c.dataSeriesIndexes.length;V++){var I=c.dataSeriesIndexes[V],C=this.data[I],W=C.dataPoints;if(0<W.length){var de=!!(5<F&&C.bevelEnabled);for(g.strokeStyle="#4572A7 ",D=0;D<W.length;D++)if(W[D].getTime?O=W[D].x.getTime():O=W[D].x,!(O<c.axisX.dataInfo.viewPortMin||O>c.axisX.dataInfo.viewPortMax)&&typeof W[D].y=="number"){A=c.axisX.convertValueToPixel(O),k=c.axisY.convertValueToPixel(W[D].y),A=c.axisX.reversed?A+c.plotType.totalDataSeries*F/2-(c.previousDataSeriesCount+V)*F<<0:A-c.plotType.totalDataSeries*F/2+(c.previousDataSeriesCount+V)*F<<0;var he=c.axisX.reversed?A-F<<0:A+F<<0,H;0<=W[D].y?H=N:(H=k,k=N),f=W[D].color?W[D].color:C._colorSet[D%C._colorSet.length],li(g,H,A,k,he,f,0,null,de,!1,!1,!1,C.fillOpacity),f=C.dataPointIds[D],this._eventManager.objectMap[f]={id:f,objectType:"dataPoint",dataSeriesIndex:I,dataPointIndex:D,x1:H,y1:A,x2:k,y2:he},f=d(f),X&&li(this._eventManager.ghostCtx,H,A,k,he,f,0,null,!1,!1,!1,!1),(W[D].indexLabel||C.indexLabel||W[D].indexLabelFormatter||C.indexLabelFormatter)&&this._indexLabels.push({chartType:"bar",dataPoint:W[D],dataSeries:C,point:{x:0<=W[D].y?k:H,y:A+(he-A)/2},direction:0>W[D].y===c.axisY.reversed?1:-1,bounds:{x1:Math.min(H,k),y1:A,x2:Math.max(H,k),y2:he},color:f})}}}return X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.restore()),g.restore(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.xScaleAnimation,easingFunction:pt.easing.easeOutQuart,animationBase:N<c.axisY.bounds.x1?c.axisY.bounds.x1:N>c.axisY.bounds.x2?c.axisY.bounds.x2:N}}},te.prototype.renderStackedBar=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x;if(!(0>=c.dataSeriesIndexes.length)){var f=null,v=this.plotArea,k=[],A=[],O=[],N=[],I=0,D,V,F=c.axisY.convertValueToPixel(c.axisY.logarithmic?c.axisY.viewportMinimum:0),I=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;V=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height<<0;var C=c.axisX.dataInfo.minDiff;isFinite(C)||(C=.3*Math.abs(c.axisX.range)),C=this.options.dataPointWidth?this.dataPointWidth:.9*(v.height*(c.axisX.logarithmic?Math.log(C)/Math.log(c.axisX.range):Math.abs(C)/Math.abs(c.axisX.range))/c.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&I>V&&(I=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,V)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&V<I&&(V=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,I)),C<I&&(C=I),C>V&&(C=V),g.save(),X&&this._eventManager.ghostCtx.save(),g.beginPath(),g.rect(v.x1,v.y1,v.width,v.height),g.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.clip());for(var W=0;W<c.dataSeriesIndexes.length;W++){var de=c.dataSeriesIndexes[W],he=this.data[de],H=he.dataPoints;if(0<H.length){var ye=!!(5<C&&he.bevelEnabled);for(g.strokeStyle="#4572A7 ",I=0;I<H.length;I++)if(f=H[I].x.getTime?H[I].x.getTime():H[I].x,!(f<c.axisX.dataInfo.viewPortMin||f>c.axisX.dataInfo.viewPortMax)&&typeof H[I].y=="number"){V=c.axisX.convertValueToPixel(f);var Ce=V-c.plotType.plotUnits.length*C/2+c.index*C<<0,He=Ce+C<<0,Ie;if(c.axisY.logarithmic||c.axisY.scaleBreaks&&0<c.axisY.scaleBreaks._appliedBreaks.length&&0<H[I].y)O[f]=H[I].y+(O[f]?O[f]:0),0<O[f]&&(Ie=k[f]?k[f]:F,k[f]=D=c.axisY.convertValueToPixel(O[f]));else if(c.axisY.scaleBreaks&&0<c.axisY.scaleBreaks._appliedBreaks.length&&0>=H[I].y)N[f]=H[I].y+(N[f]?N[f]:0),D=A[f]?A[f]:F,A[f]=Ie=c.axisY.convertValueToPixel(N[f]);else if(D=c.axisY.convertValueToPixel(H[I].y),0<=H[I].y){var Se=k[f]?k[f]:0;Ie=F+Se,D+=Se,k[f]=Se+(D-Ie)}else Se=A[f]?A[f]:0,Ie=D-Se,D=F-Se,A[f]=Se+(D-Ie);f=H[I].color?H[I].color:he._colorSet[I%he._colorSet.length],li(g,Ie,Ce,D,He,f,0,null,ye,!1,!1,!1,he.fillOpacity),f=he.dataPointIds[I],this._eventManager.objectMap[f]={id:f,objectType:"dataPoint",dataSeriesIndex:de,dataPointIndex:I,x1:Ie,y1:Ce,x2:D,y2:He},f=d(f),X&&li(this._eventManager.ghostCtx,Ie,Ce,D,He,f,0,null,!1,!1,!1,!1),(H[I].indexLabel||he.indexLabel||H[I].indexLabelFormatter||he.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar",dataPoint:H[I],dataSeries:he,point:{x:0<=H[I].y?D:Ie,y:V},direction:0>H[I].y===c.axisY.reversed?1:-1,bounds:{x1:Math.min(Ie,D),y1:Ce,x2:Math.max(Ie,D),y2:He},color:f})}}}return X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.restore()),g.restore(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.xScaleAnimation,easingFunction:pt.easing.easeOutQuart,animationBase:F<c.axisY.bounds.x1?c.axisY.bounds.x1:F>c.axisY.bounds.x2?c.axisY.bounds.x2:F}}},te.prototype.renderStackedBar100=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x;if(!(0>=c.dataSeriesIndexes.length)){var f=null,v=this.plotArea,k=[],A=[],O=[],N=[],I=0,D,V,F=c.axisY.convertValueToPixel(c.axisY.logarithmic?c.axisY.viewportMinimum:0),I=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;V=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height<<0;var C=c.axisX.dataInfo.minDiff;isFinite(C)||(C=.3*Math.abs(c.axisX.range)),C=this.options.dataPointWidth?this.dataPointWidth:.9*(v.height*(c.axisX.logarithmic?Math.log(C)/Math.log(c.axisX.range):Math.abs(C)/Math.abs(c.axisX.range))/c.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&I>V&&(I=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,V)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&V<I&&(V=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,I)),C<I&&(C=I),C>V&&(C=V),g.save(),X&&this._eventManager.ghostCtx.save(),g.beginPath(),g.rect(v.x1,v.y1,v.width,v.height),g.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.clip());for(var W=0;W<c.dataSeriesIndexes.length;W++){var de=c.dataSeriesIndexes[W],he=this.data[de],H=he.dataPoints;if(0<H.length){var ye=!!(5<C&&he.bevelEnabled);for(g.strokeStyle="#4572A7 ",I=0;I<H.length;I++)if(f=H[I].x.getTime?H[I].x.getTime():H[I].x,!(f<c.axisX.dataInfo.viewPortMin||f>c.axisX.dataInfo.viewPortMax)&&typeof H[I].y=="number"){V=c.axisX.convertValueToPixel(f);var Ce;Ce=c.dataPointYSums[f]!==0?100*(H[I].y/c.dataPointYSums[f]):0;var He=V-c.plotType.plotUnits.length*C/2+c.index*C<<0,Ie=He+C<<0;if(c.axisY.logarithmic||c.axisY.scaleBreaks&&0<c.axisY.scaleBreaks._appliedBreaks.length&&0<H[I].y){if(O[f]=Ce+(O[f]?O[f]:0),0>=O[f])continue;Ce=k[f]?k[f]:F,k[f]=D=c.axisY.convertValueToPixel(O[f])}else if(c.axisY.scaleBreaks&&0<c.axisY.scaleBreaks._appliedBreaks.length&&0>=H[I].y)N[f]=Ce+(N[f]?N[f]:0),D=A[f]?A[f]:F,A[f]=Ce=c.axisY.convertValueToPixel(N[f]);else if(D=c.axisY.convertValueToPixel(Ce),0<=H[I].y){var Se=k[f]?k[f]:0;Ce=F+Se,D+=Se,c.dataSeriesIndexes.length-1===W&&1>=Math.abs(v.x2-D)&&(D=v.x2),k[f]=Se+(D-Ce)}else Se=A[f]?A[f]:0,Ce=D-Se,D=F-Se,c.dataSeriesIndexes.length-1===W&&1>=Math.abs(v.x1-Ce)&&(Ce=v.x1),A[f]=Se+(D-Ce);f=H[I].color?H[I].color:he._colorSet[I%he._colorSet.length],li(g,Ce,He,D,Ie,f,0,null,ye,!1,!1,!1,he.fillOpacity),f=he.dataPointIds[I],this._eventManager.objectMap[f]={id:f,objectType:"dataPoint",dataSeriesIndex:de,dataPointIndex:I,x1:Ce,y1:He,x2:D,y2:Ie},f=d(f),X&&li(this._eventManager.ghostCtx,Ce,He,D,Ie,f,0,null,!1,!1,!1,!1),(H[I].indexLabel||he.indexLabel||H[I].indexLabelFormatter||he.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar100",dataPoint:H[I],dataSeries:he,point:{x:0<=H[I].y?D:Ce,y:V},direction:0>H[I].y===c.axisY.reversed?1:-1,bounds:{x1:Math.min(Ce,D),y1:He,x2:Math.max(Ce,D),y2:Ie},color:f})}}}return X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.restore()),g.restore(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.xScaleAnimation,easingFunction:pt.easing.easeOutQuart,animationBase:F<c.axisY.bounds.x1?c.axisY.bounds.x1:F>c.axisY.bounds.x2?c.axisY.bounds.x2:F}}},te.prototype.renderArea=function(c){var x,g;function f(){Se&&(0<W.lineThickness&&k.stroke(),c.axisY.logarithmic||0>=c.axisY.viewportMinimum&&0<=c.axisY.viewportMaximum?Ie=He:0>c.axisY.viewportMaximum?Ie=N.y1:0<c.axisY.viewportMinimum&&(Ie=O.y2),k.lineTo(H,Ie),k.lineTo(Se.x,Ie),k.closePath(),k.globalAlpha=W.fillOpacity,k.fill(),k.globalAlpha=1,X&&(A.lineTo(H,Ie),A.lineTo(Se.x,Ie),A.closePath(),A.fill()),k.beginPath(),k.moveTo(H,ye),A.beginPath(),A.moveTo(H,ye),Se={x:H,y:ye})}var v=c.targetCanvasCtx||this.plotArea.ctx,k=X?this._preRenderCtx:v;if(!(0>=c.dataSeriesIndexes.length)){var A=this._eventManager.ghostCtx,O=c.axisX.lineCoordinates,N=c.axisY.lineCoordinates,D=[],V=this.plotArea,F;k.save(),X&&A.save(),k.beginPath(),k.rect(V.x1,V.y1,V.width,V.height),k.clip(),X&&(A.beginPath(),A.rect(V.x1,V.y1,V.width,V.height),A.clip());for(var I=0;I<c.dataSeriesIndexes.length;I++){var C=c.dataSeriesIndexes[I],W=this.data[C],de=W.dataPoints,D=W.id;this._eventManager.objectMap[D]={objectType:"dataSeries",dataSeriesIndex:C},D=d(D),A.fillStyle=D,D=[],x=!0;var he=0,H,ye,Ce,He=c.axisY.convertValueToPixel(c.axisY.logarithmic?c.axisY.viewportMinimum:0),Ie,Se=null;if(0<de.length){var tt=W._colorSet[he%W._colorSet.length],xt=W.lineColor=W.options.lineColor||tt,qe=xt;if(k.fillStyle=tt,k.strokeStyle=xt,k.lineWidth=W.lineThickness,g="solid",k.setLineDash){var Ge=S(W.nullDataLineDashType,W.lineThickness);g=W.lineDashType;var _t=S(g,W.lineThickness);k.setLineDash(_t)}for(var ze=!0;he<de.length;he++)if(Ce=de[he].x.getTime?de[he].x.getTime():de[he].x,!(Ce<c.axisX.dataInfo.viewPortMin||Ce>c.axisX.dataInfo.viewPortMax&&(!W.connectNullData||!ze)))if(typeof de[he].y!="number")W.connectNullData||ze||x||f(),ze=!0;else{H=c.axisX.convertValueToPixel(Ce),ye=c.axisY.convertValueToPixel(de[he].y),x||ze?(!x&&W.connectNullData?(k.setLineDash&&(W.options.nullDataLineDashType||g===W.lineDashType&&W.lineDashType!==W.nullDataLineDashType)&&(x=H,g=ye,H=F.x,ye=F.y,f(),k.moveTo(F.x,F.y),H=x,ye=g,Se=F,g=W.nullDataLineDashType,k.setLineDash(Ge)),k.lineTo(H,ye),X&&A.lineTo(H,ye)):(k.beginPath(),k.moveTo(H,ye),X&&(A.beginPath(),A.moveTo(H,ye)),Se={x:H,y:ye}),ze=x=!1):(k.lineTo(H,ye),X&&A.lineTo(H,ye),he%250==0&&f()),F={x:H,y:ye},he<de.length-1&&(qe!==(de[he].lineColor||xt)||g!==(de[he].lineDashType||W.lineDashType))&&(f(),qe=de[he].lineColor||xt,k.strokeStyle=qe,k.setLineDash&&(de[he].lineDashType?(g=de[he].lineDashType,k.setLineDash(S(g,W.lineThickness))):(g=W.lineDashType,k.setLineDash(_t))));var Pe=W.dataPointIds[he];this._eventManager.objectMap[Pe]={id:Pe,objectType:"dataPoint",dataSeriesIndex:C,dataPointIndex:he,x1:H,y1:ye},de[he].markerSize!==0&&(0<de[he].markerSize||0<W.markerSize)&&(Ce=W.getMarkerProperties(he,H,ye,k),D.push(Ce),Pe=d(Pe),X&&D.push({x:H,y:ye,ctx:A,type:Ce.type,size:Ce.size,color:Pe,borderColor:Pe,borderThickness:Ce.borderThickness})),(de[he].indexLabel||W.indexLabel||de[he].indexLabelFormatter||W.indexLabelFormatter)&&this._indexLabels.push({chartType:"area",dataPoint:de[he],dataSeries:W,point:{x:H,y:ye},direction:0>de[he].y===c.axisY.reversed?1:-1,color:tt})}f(),It.drawMarkers(D)}}return X&&(v.drawImage(this._preRenderCanvas,0,0,this.width,this.height),k.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&k.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&k.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),k.clearRect(V.x1,V.y1,V.width,V.height),this._eventManager.ghostCtx.restore()),k.restore(),{source:v,dest:this.plotArea.ctx,animationCallback:pt.xClipAnimation,easingFunction:pt.easing.linear,animationBase:0}}},te.prototype.renderSplineArea=function(c){function x(){var ze=Te(Ce,2);if(0<ze.length){if(0<F.lineThickness){f.beginPath(),f.moveTo(ze[0].x,ze[0].y),ze[0].newStrokeStyle&&(f.strokeStyle=ze[0].newStrokeStyle),ze[0].newLineDashArray&&f.setLineDash(ze[0].newLineDashArray);for(var Pe=0;Pe<ze.length-3;Pe+=3)f.bezierCurveTo(ze[Pe+1].x,ze[Pe+1].y,ze[Pe+2].x,ze[Pe+2].y,ze[Pe+3].x,ze[Pe+3].y),X&&v.bezierCurveTo(ze[Pe+1].x,ze[Pe+1].y,ze[Pe+2].x,ze[Pe+2].y,ze[Pe+3].x,ze[Pe+3].y),(ze[Pe+3].newStrokeStyle||ze[Pe+3].newLineDashArray)&&(f.stroke(),f.beginPath(),f.moveTo(ze[Pe+3].x,ze[Pe+3].y),ze[Pe+3].newStrokeStyle&&(f.strokeStyle=ze[Pe+3].newStrokeStyle),ze[Pe+3].newLineDashArray&&f.setLineDash(ze[Pe+3].newLineDashArray));f.stroke()}for(f.beginPath(),f.moveTo(ze[0].x,ze[0].y),X&&(v.beginPath(),v.moveTo(ze[0].x,ze[0].y)),Pe=0;Pe<ze.length-3;Pe+=3)f.bezierCurveTo(ze[Pe+1].x,ze[Pe+1].y,ze[Pe+2].x,ze[Pe+2].y,ze[Pe+3].x,ze[Pe+3].y),X&&v.bezierCurveTo(ze[Pe+1].x,ze[Pe+1].y,ze[Pe+2].x,ze[Pe+2].y,ze[Pe+3].x,ze[Pe+3].y);c.axisY.logarithmic||0>=c.axisY.viewportMinimum&&0<=c.axisY.viewportMaximum?H=he:0>c.axisY.viewportMaximum?H=A.y1:0<c.axisY.viewportMinimum&&(H=k.y2),ye={x:ze[0].x,y:ze[0].y},f.lineTo(ze[ze.length-1].x,H),f.lineTo(ye.x,H),f.closePath(),f.globalAlpha=F.fillOpacity,f.fill(),f.globalAlpha=1,X&&(v.lineTo(ze[ze.length-1].x,H),v.lineTo(ye.x,H),v.closePath(),v.fill())}}var g=c.targetCanvasCtx||this.plotArea.ctx,f=X?this._preRenderCtx:g;if(!(0>=c.dataSeriesIndexes.length)){var v=this._eventManager.ghostCtx,k=c.axisX.lineCoordinates,A=c.axisY.lineCoordinates,O=[],N=this.plotArea;f.save(),X&&v.save(),f.beginPath(),f.rect(N.x1,N.y1,N.width,N.height),f.clip(),X&&(v.beginPath(),v.rect(N.x1,N.y1,N.width,N.height),v.clip());for(var D=0;D<c.dataSeriesIndexes.length;D++){var V=c.dataSeriesIndexes[D],F=this.data[V],I=F.dataPoints,O=F.id;this._eventManager.objectMap[O]={objectType:"dataSeries",dataSeriesIndex:V},O=d(O),v.fillStyle=O;var O=[],C=0,W,de,he=c.axisY.convertValueToPixel(c.axisY.logarithmic?c.axisY.viewportMinimum:0),H,ye=null,Ce=[];if(0<I.length){var He=F._colorSet[C%F._colorSet.length],Ie=F.lineColor=F.options.lineColor||He,Se=Ie;f.fillStyle=He,f.strokeStyle=Ie,f.lineWidth=F.lineThickness;var tt="solid";if(f.setLineDash){var xt=S(F.nullDataLineDashType,F.lineThickness),tt=F.lineDashType,qe=S(tt,F.lineThickness);f.setLineDash(qe)}for(de=!1;C<I.length;C++)if(W=I[C].x.getTime?I[C].x.getTime():I[C].x,!(W<c.axisX.dataInfo.viewPortMin||W>c.axisX.dataInfo.viewPortMax&&(!F.connectNullData||!de)))if(typeof I[C].y!="number")0<C&&!de&&(F.connectNullData?f.setLineDash&&0<Ce.length&&(F.options.nullDataLineDashType||!I[C-1].lineDashType)&&(Ce[Ce.length-1].newLineDashArray=xt,tt=F.nullDataLineDashType):(x(),Ce=[])),de=!0;else{W=c.axisX.convertValueToPixel(W),de=c.axisY.convertValueToPixel(I[C].y);var Ge=F.dataPointIds[C];if(this._eventManager.objectMap[Ge]={id:Ge,objectType:"dataPoint",dataSeriesIndex:V,dataPointIndex:C,x1:W,y1:de},Ce[Ce.length]={x:W,y:de},C<I.length-1&&(Se!==(I[C].lineColor||Ie)||tt!==(I[C].lineDashType||F.lineDashType))&&(Se=I[C].lineColor||Ie,Ce[Ce.length-1].newStrokeStyle=Se,f.setLineDash&&(I[C].lineDashType?(tt=I[C].lineDashType,Ce[Ce.length-1].newLineDashArray=S(tt,F.lineThickness)):(tt=F.lineDashType,Ce[Ce.length-1].newLineDashArray=qe))),I[C].markerSize!==0&&(0<I[C].markerSize||0<F.markerSize)){var _t=F.getMarkerProperties(C,W,de,f);O.push(_t),Ge=d(Ge),X&&O.push({x:W,y:de,ctx:v,type:_t.type,size:_t.size,color:Ge,borderColor:Ge,borderThickness:_t.borderThickness})}(I[C].indexLabel||F.indexLabel||I[C].indexLabelFormatter||F.indexLabelFormatter)&&this._indexLabels.push({chartType:"splineArea",dataPoint:I[C],dataSeries:F,point:{x:W,y:de},direction:0>I[C].y===c.axisY.reversed?1:-1,color:He}),de=!1}x(),It.drawMarkers(O)}}return X&&(g.drawImage(this._preRenderCanvas,0,0,this.width,this.height),f.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&f.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&f.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),f.clearRect(N.x1,N.y1,N.width,N.height),this._eventManager.ghostCtx.restore()),f.restore(),{source:g,dest:this.plotArea.ctx,animationCallback:pt.xClipAnimation,easingFunction:pt.easing.linear,animationBase:0}}},te.prototype.renderStepArea=function(c){var x,g;function f(){Se&&(0<W.lineThickness&&k.stroke(),c.axisY.logarithmic||0>=c.axisY.viewportMinimum&&0<=c.axisY.viewportMaximum?Ie=He:0>c.axisY.viewportMaximum?Ie=N.y1:0<c.axisY.viewportMinimum&&(Ie=O.y2),k.lineTo(H,Ie),k.lineTo(Se.x,Ie),k.closePath(),k.globalAlpha=W.fillOpacity,k.fill(),k.globalAlpha=1,X&&(A.lineTo(H,Ie),A.lineTo(Se.x,Ie),A.closePath(),A.fill()),k.beginPath(),k.moveTo(H,ye),A.beginPath(),A.moveTo(H,ye),Se={x:H,y:ye})}var v=c.targetCanvasCtx||this.plotArea.ctx,k=X?this._preRenderCtx:v;if(!(0>=c.dataSeriesIndexes.length)){var A=this._eventManager.ghostCtx,O=c.axisX.lineCoordinates,N=c.axisY.lineCoordinates,D=[],V=this.plotArea,F;k.save(),X&&A.save(),k.beginPath(),k.rect(V.x1,V.y1,V.width,V.height),k.clip(),X&&(A.beginPath(),A.rect(V.x1,V.y1,V.width,V.height),A.clip());for(var I=0;I<c.dataSeriesIndexes.length;I++){var C=c.dataSeriesIndexes[I],W=this.data[C],de=W.dataPoints,D=W.id;this._eventManager.objectMap[D]={objectType:"dataSeries",dataSeriesIndex:C},D=d(D),A.fillStyle=D,D=[],x=!0;var he=0,H,ye,Ce,He=c.axisY.convertValueToPixel(c.axisY.logarithmic?c.axisY.viewportMinimum:0),Ie,Se=null;if(g=!1,0<de.length){var tt=W._colorSet[he%W._colorSet.length],xt=W.lineColor=W.options.lineColor||tt,qe=xt;k.fillStyle=tt,k.strokeStyle=xt,k.lineWidth=W.lineThickness;var Ge="solid";if(k.setLineDash){var _t=S(W.nullDataLineDashType,W.lineThickness),Ge=W.lineDashType,ze=S(Ge,W.lineThickness);k.setLineDash(ze)}for(;he<de.length;he++)if(Ce=de[he].x.getTime?de[he].x.getTime():de[he].x,!(Ce<c.axisX.dataInfo.viewPortMin||Ce>c.axisX.dataInfo.viewPortMax&&(!W.connectNullData||!g))){var Pe=ye;typeof de[he].y!="number"?(W.connectNullData||g||x||f(),g=!0):(H=c.axisX.convertValueToPixel(Ce),ye=c.axisY.convertValueToPixel(de[he].y),x||g?(!x&&W.connectNullData?(k.setLineDash&&(W.options.nullDataLineDashType||Ge===W.lineDashType&&W.lineDashType!==W.nullDataLineDashType)&&(x=H,g=ye,H=F.x,ye=F.y,f(),k.moveTo(F.x,F.y),H=x,ye=g,Se=F,Ge=W.nullDataLineDashType,k.setLineDash(_t)),k.lineTo(H,Pe),k.lineTo(H,ye),X&&(A.lineTo(H,Pe),A.lineTo(H,ye))):(k.beginPath(),k.moveTo(H,ye),X&&(A.beginPath(),A.moveTo(H,ye)),Se={x:H,y:ye}),g=x=!1):(k.lineTo(H,Pe),X&&A.lineTo(H,Pe),k.lineTo(H,ye),X&&A.lineTo(H,ye),he%250==0&&f()),F={x:H,y:ye},he<de.length-1&&(qe!==(de[he].lineColor||xt)||Ge!==(de[he].lineDashType||W.lineDashType))&&(f(),qe=de[he].lineColor||xt,k.strokeStyle=qe,k.setLineDash&&(de[he].lineDashType?(Ge=de[he].lineDashType,k.setLineDash(S(Ge,W.lineThickness))):(Ge=W.lineDashType,k.setLineDash(ze)))),Ce=W.dataPointIds[he],this._eventManager.objectMap[Ce]={id:Ce,objectType:"dataPoint",dataSeriesIndex:C,dataPointIndex:he,x1:H,y1:ye},de[he].markerSize!==0&&(0<de[he].markerSize||0<W.markerSize)&&(Pe=W.getMarkerProperties(he,H,ye,k),D.push(Pe),Ce=d(Ce),X&&D.push({x:H,y:ye,ctx:A,type:Pe.type,size:Pe.size,color:Ce,borderColor:Ce,borderThickness:Pe.borderThickness})),(de[he].indexLabel||W.indexLabel||de[he].indexLabelFormatter||W.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepArea",dataPoint:de[he],dataSeries:W,point:{x:H,y:ye},direction:0>de[he].y===c.axisY.reversed?1:-1,color:tt}))}f(),It.drawMarkers(D)}}return X&&(v.drawImage(this._preRenderCanvas,0,0,this.width,this.height),k.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&k.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&k.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),k.clearRect(V.x1,V.y1,V.width,V.height),this._eventManager.ghostCtx.restore()),k.restore(),{source:v,dest:this.plotArea.ctx,animationCallback:pt.xClipAnimation,easingFunction:pt.easing.linear,animationBase:0}}},te.prototype.renderStackedArea=function(c){function x(){if(!(1>D.length)){for(0<Se.lineThickness&&f.stroke();0<D.length;){var Ne=D.pop();f.lineTo(Ne.x,Ne.y),X&&he.lineTo(Ne.x,Ne.y)}f.closePath(),f.globalAlpha=Se.fillOpacity,f.fill(),f.globalAlpha=1,f.beginPath(),X&&(he.closePath(),he.fill(),he.beginPath()),D=[]}}var g=c.targetCanvasCtx||this.plotArea.ctx,f=X?this._preRenderCtx:g;if(!(0>=c.dataSeriesIndexes.length)){var v=null,k=null,A=[],O=this.plotArea,N=[],D=[],V=[],F=[],I=0,C,W,de=c.axisY.convertValueToPixel(c.axisY.logarithmic?c.axisY.viewportMinimum:0),he=this._eventManager.ghostCtx,H,ye,Ce;X&&he.beginPath(),f.save(),X&&he.save(),f.beginPath(),f.rect(O.x1,O.y1,O.width,O.height),f.clip(),X&&(he.beginPath(),he.rect(O.x1,O.y1,O.width,O.height),he.clip());for(var v=[],He=0;He<c.dataSeriesIndexes.length;He++){var Ie=c.dataSeriesIndexes[He],Se=this.data[Ie],tt=Se.dataPoints;for(Se.dataPointIndexes=[],I=0;I<tt.length;I++)Ie=tt[I].x.getTime?tt[I].x.getTime():tt[I].x,Se.dataPointIndexes[Ie]=I,v[Ie]||(V.push(Ie),v[Ie]=!0);V.sort(a)}for(He=0;He<c.dataSeriesIndexes.length;He++){if(Ie=c.dataSeriesIndexes[He],Se=this.data[Ie],tt=Se.dataPoints,ye=!0,D=[],I=Se.id,this._eventManager.objectMap[I]={objectType:"dataSeries",dataSeriesIndex:Ie},I=d(I),he.fillStyle=I,0<V.length){var v=Se._colorSet[0],xt=Se.lineColor=Se.options.lineColor||v,qe=xt;if(f.fillStyle=v,f.strokeStyle=xt,f.lineWidth=Se.lineThickness,Ce="solid",f.setLineDash){var Ge=S(Se.nullDataLineDashType,Se.lineThickness);Ce=Se.lineDashType;var _t=S(Ce,Se.lineThickness);f.setLineDash(_t)}for(var ze=!0,I=0;I<V.length;I++){var k=V[I],Pe=null,Pe=0<=Se.dataPointIndexes[k]?tt[Se.dataPointIndexes[k]]:{x:k,y:null};if(!(k<c.axisX.dataInfo.viewPortMin||k>c.axisX.dataInfo.viewPortMax&&(!Se.connectNullData||!ze)))if(typeof Pe.y!="number")Se.connectNullData||ze||ye||x(),ze=!0;else{C=c.axisX.convertValueToPixel(k);var ct=N[k]?N[k]:0;if(c.axisY.logarithmic||c.axisY.scaleBreaks&&0<c.axisY.scaleBreaks._appliedBreaks.length){if(F[k]=Pe.y+(F[k]?F[k]:0),0>=F[k]&&c.axisY.logarithmic)continue;W=c.axisY.convertValueToPixel(F[k])}else W=c.axisY.convertValueToPixel(Pe.y),W-=ct;if(D.push({x:C,y:de-ct}),N[k]=de-W,ye||ze?(!ye&&Se.connectNullData?(f.setLineDash&&(Se.options.nullDataLineDashType||Ce===Se.lineDashType&&Se.lineDashType!==Se.nullDataLineDashType)&&(ye=D.pop(),Ce=D[D.length-1],x(),f.moveTo(H.x,H.y),D.push(Ce),D.push(ye),Ce=Se.nullDataLineDashType,f.setLineDash(Ge)),f.lineTo(C,W),X&&he.lineTo(C,W)):(f.beginPath(),f.moveTo(C,W),X&&(he.beginPath(),he.moveTo(C,W))),ze=ye=!1):(f.lineTo(C,W),X&&he.lineTo(C,W),I%250==0&&(x(),f.moveTo(C,W),X&&he.moveTo(C,W),D.push({x:C,y:de-ct}))),H={x:C,y:W},I<tt.length-1&&(qe!==(tt[I].lineColor||xt)||Ce!==(tt[I].lineDashType||Se.lineDashType))&&(x(),f.beginPath(),f.moveTo(C,W),D.push({x:C,y:de-ct}),qe=tt[I].lineColor||xt,f.strokeStyle=qe,f.setLineDash&&(tt[I].lineDashType?(Ce=tt[I].lineDashType,f.setLineDash(S(Ce,Se.lineThickness))):(Ce=Se.lineDashType,f.setLineDash(_t)))),0<=Se.dataPointIndexes[k]){var wt=Se.dataPointIds[Se.dataPointIndexes[k]];this._eventManager.objectMap[wt]={id:wt,objectType:"dataPoint",dataSeriesIndex:Ie,dataPointIndex:Se.dataPointIndexes[k],x1:C,y1:W}}0<=Se.dataPointIndexes[k]&&Pe.markerSize!==0&&(0<Pe.markerSize||0<Se.markerSize)&&(ct=Se.getMarkerProperties(Se.dataPointIndexes[k],C,W,f),A.push(ct),k=d(wt),X&&A.push({x:C,y:W,ctx:he,type:ct.type,size:ct.size,color:k,borderColor:k,borderThickness:ct.borderThickness})),(Pe.indexLabel||Se.indexLabel||Pe.indexLabelFormatter||Se.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea",dataPoint:Pe,dataSeries:Se,point:{x:C,y:W},direction:0>tt[I].y===c.axisY.reversed?1:-1,color:v})}}x(),f.moveTo(C,W),X&&he.moveTo(C,W)}delete Se.dataPointIndexes}return It.drawMarkers(A),X&&(g.drawImage(this._preRenderCanvas,0,0,this.width,this.height),f.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&f.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&f.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),f.clearRect(O.x1,O.y1,O.width,O.height),he.restore()),f.restore(),{source:g,dest:this.plotArea.ctx,animationCallback:pt.xClipAnimation,easingFunction:pt.easing.linear,animationBase:0}}},te.prototype.renderStackedArea100=function(c){function x(){for(0<Se.lineThickness&&f.stroke();0<D.length;){var Sn=D.pop();f.lineTo(Sn.x,Sn.y),X&&Ce.lineTo(Sn.x,Sn.y)}f.closePath(),f.globalAlpha=Se.fillOpacity,f.fill(),f.globalAlpha=1,f.beginPath(),X&&(Ce.closePath(),Ce.fill(),Ce.beginPath()),D=[]}var g=c.targetCanvasCtx||this.plotArea.ctx,f=X?this._preRenderCtx:g;if(!(0>=c.dataSeriesIndexes.length)){var v=null,k=null,A=this.plotArea,O=[],N=[],D=[],V=[],F=[],I=0,C,W,de,he,H,ye=c.axisY.convertValueToPixel(c.axisY.logarithmic?c.axisY.viewportMinimum:0),Ce=this._eventManager.ghostCtx;f.save(),X&&Ce.save(),f.beginPath(),f.rect(A.x1,A.y1,A.width,A.height),f.clip(),X&&(Ce.beginPath(),Ce.rect(A.x1,A.y1,A.width,A.height),Ce.clip());for(var v=[],He=0;He<c.dataSeriesIndexes.length;He++){var Ie=c.dataSeriesIndexes[He],Se=this.data[Ie],tt=Se.dataPoints;for(Se.dataPointIndexes=[],I=0;I<tt.length;I++)Ie=tt[I].x.getTime?tt[I].x.getTime():tt[I].x,Se.dataPointIndexes[Ie]=I,v[Ie]||(V.push(Ie),v[Ie]=!0);V.sort(a)}for(He=0;He<c.dataSeriesIndexes.length;He++){if(Ie=c.dataSeriesIndexes[He],Se=this.data[Ie],tt=Se.dataPoints,he=!0,v=Se.id,this._eventManager.objectMap[v]={objectType:"dataSeries",dataSeriesIndex:Ie},v=d(v),Ce.fillStyle=v,D=[],0<V.length){var v=Se._colorSet[I%Se._colorSet.length],xt=Se.lineColor=Se.options.lineColor||v,qe=xt;if(f.fillStyle=v,f.strokeStyle=xt,f.lineWidth=Se.lineThickness,H="solid",f.setLineDash){var Ge=S(Se.nullDataLineDashType,Se.lineThickness);H=Se.lineDashType;var _t=S(H,Se.lineThickness);f.setLineDash(_t)}for(var ze=!0,I=0;I<V.length;I++){var k=V[I],Pe=null,Pe=0<=Se.dataPointIndexes[k]?tt[Se.dataPointIndexes[k]]:{x:k,y:null};if(!(k<c.axisX.dataInfo.viewPortMin||k>c.axisX.dataInfo.viewPortMax&&(!Se.connectNullData||!ze)))if(typeof Pe.y!="number")Se.connectNullData||ze||he||x(),ze=!0;else{var ct;ct=c.dataPointYSums[k]!==0?100*(Pe.y/c.dataPointYSums[k]):0,C=c.axisX.convertValueToPixel(k);var wt=N[k]?N[k]:0;if(c.axisY.logarithmic||c.axisY.scaleBreaks&&0<c.axisY.scaleBreaks._appliedBreaks.length){if(F[k]=ct+(F[k]?F[k]:0),0>=F[k]&&c.axisY.logarithmic)continue;W=c.axisY.convertValueToPixel(F[k])}else W=c.axisY.convertValueToPixel(ct),W-=wt;if(D.push({x:C,y:ye-wt}),N[k]=ye-W,he||ze?(!he&&Se.connectNullData?(f.setLineDash&&(Se.options.nullDataLineDashType||H===Se.lineDashType&&Se.lineDashType!==Se.nullDataLineDashType)&&(he=D.pop(),H=D[D.length-1],x(),f.moveTo(de.x,de.y),D.push(H),D.push(he),H=Se.nullDataLineDashType,f.setLineDash(Ge)),f.lineTo(C,W),X&&Ce.lineTo(C,W)):(f.beginPath(),f.moveTo(C,W),X&&(Ce.beginPath(),Ce.moveTo(C,W))),ze=he=!1):(f.lineTo(C,W),X&&Ce.lineTo(C,W),I%250==0&&(x(),f.moveTo(C,W),X&&Ce.moveTo(C,W),D.push({x:C,y:ye-wt}))),de={x:C,y:W},I<tt.length-1&&(qe!==(tt[I].lineColor||xt)||H!==(tt[I].lineDashType||Se.lineDashType))&&(x(),f.beginPath(),f.moveTo(C,W),D.push({x:C,y:ye-wt}),qe=tt[I].lineColor||xt,f.strokeStyle=qe,f.setLineDash&&(tt[I].lineDashType?(H=tt[I].lineDashType,f.setLineDash(S(H,Se.lineThickness))):(H=Se.lineDashType,f.setLineDash(_t)))),0<=Se.dataPointIndexes[k]){var Ne=Se.dataPointIds[Se.dataPointIndexes[k]];this._eventManager.objectMap[Ne]={id:Ne,objectType:"dataPoint",dataSeriesIndex:Ie,dataPointIndex:Se.dataPointIndexes[k],x1:C,y1:W}}0<=Se.dataPointIndexes[k]&&Pe.markerSize!==0&&(0<Pe.markerSize||0<Se.markerSize)&&(wt=Se.getMarkerProperties(I,C,W,f),O.push(wt),k=d(Ne),X&&O.push({x:C,y:W,ctx:Ce,type:wt.type,size:wt.size,color:k,borderColor:k,borderThickness:wt.borderThickness})),(Pe.indexLabel||Se.indexLabel||Pe.indexLabelFormatter||Se.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea100",dataPoint:Pe,dataSeries:Se,point:{x:C,y:W},direction:0>tt[I].y===c.axisY.reversed?1:-1,color:v})}}x(),f.moveTo(C,W),X&&Ce.moveTo(C,W)}delete Se.dataPointIndexes}return It.drawMarkers(O),X&&(g.drawImage(this._preRenderCanvas,0,0,this.width,this.height),f.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&f.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&f.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),f.clearRect(A.x1,A.y1,A.width,A.height),Ce.restore()),f.restore(),{source:g,dest:this.plotArea.ctx,animationCallback:pt.xClipAnimation,easingFunction:pt.easing.linear,animationBase:0}}},te.prototype.renderBubble=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x;if(!(0>=c.dataSeriesIndexes.length)){var f=this.plotArea,v=0,k,A;g.save(),X&&this._eventManager.ghostCtx.save(),g.beginPath(),g.rect(f.x1,f.y1,f.width,f.height),g.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(f.x1,f.y1,f.width,f.height),this._eventManager.ghostCtx.clip());for(var O=-1/0,N=1/0,D=0;D<c.dataSeriesIndexes.length;D++)for(var V=c.dataSeriesIndexes[D],F=this.data[V],I=F.dataPoints,C=0,v=0;v<I.length;v++)k=I[v].getTime?k=I[v].x.getTime():k=I[v].x,k<c.axisX.dataInfo.viewPortMin||k>c.axisX.dataInfo.viewPortMax||typeof I[v].z>"u"||(C=I[v].z,C>O&&(O=C),C<N&&(N=C));for(var W=25*Math.PI,de=Math.max(Math.pow(.25*Math.min(f.height,f.width)/2,2)*Math.PI,W),D=0;D<c.dataSeriesIndexes.length;D++)if(V=c.dataSeriesIndexes[D],F=this.data[V],I=F.dataPoints,0<I.length){for(g.strokeStyle="#4572A7 ",v=0;v<I.length;v++)if(k=I[v].getTime?k=I[v].x.getTime():k=I[v].x,!(k<c.axisX.dataInfo.viewPortMin||k>c.axisX.dataInfo.viewPortMax)&&typeof I[v].y=="number"){k=c.axisX.convertValueToPixel(k),A=c.axisY.convertValueToPixel(I[v].y);var C=I[v].z,he=2*Math.max(Math.sqrt((O===N?de/2:W+(de-W)/(O-N)*(C-N))/Math.PI)<<0,1),C=F.getMarkerProperties(v,g);C.size=he,g.globalAlpha=F.fillOpacity,It.drawMarker(k,A,g,C.type,C.size,C.color,C.borderColor,C.borderThickness),g.globalAlpha=1;var H=F.dataPointIds[v];this._eventManager.objectMap[H]={id:H,objectType:"dataPoint",dataSeriesIndex:V,dataPointIndex:v,x1:k,y1:A,size:he},he=d(H),X&&It.drawMarker(k,A,this._eventManager.ghostCtx,C.type,C.size,he,he,C.borderThickness),(I[v].indexLabel||F.indexLabel||I[v].indexLabelFormatter||F.indexLabelFormatter)&&this._indexLabels.push({chartType:"bubble",dataPoint:I[v],dataSeries:F,point:{x:k,y:A},direction:1,bounds:{x1:k-C.size/2,y1:A-C.size/2,x2:k+C.size/2,y2:A+C.size/2},color:null})}}return X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(f.x1,f.y1,f.width,f.height),this._eventManager.ghostCtx.restore()),g.restore(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.fadeInAnimation,easingFunction:pt.easing.easeInQuad,animationBase:0}}},te.prototype.renderScatter=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x;if(!(0>=c.dataSeriesIndexes.length)){var f=this.plotArea,v=0,k,A;g.save(),X&&this._eventManager.ghostCtx.save(),g.beginPath(),g.rect(f.x1,f.y1,f.width,f.height),g.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(f.x1,f.y1,f.width,f.height),this._eventManager.ghostCtx.clip());for(var O=0;O<c.dataSeriesIndexes.length;O++){var N=c.dataSeriesIndexes[O],D=this.data[N],V=D.dataPoints;if(0<V.length){g.strokeStyle="#4572A7 ",Math.pow(.3*Math.min(f.height,f.width)/2,2);for(var F=0,I=0,v=0;v<V.length;v++)if(k=V[v].getTime?k=V[v].x.getTime():k=V[v].x,!(k<c.axisX.dataInfo.viewPortMin||k>c.axisX.dataInfo.viewPortMax)&&typeof V[v].y=="number"){k=c.axisX.convertValueToPixel(k),A=c.axisY.convertValueToPixel(V[v].y);var C=D.getMarkerProperties(v,k,A,g);g.globalAlpha=D.fillOpacity,It.drawMarker(C.x,C.y,C.ctx,C.type,C.size,C.color,C.borderColor,C.borderThickness),g.globalAlpha=1,Math.sqrt((F-k)*(F-k)+(I-A)*(I-A))<Math.min(C.size,5)&&V.length>Math.min(this.plotArea.width,this.plotArea.height)||(F=D.dataPointIds[v],this._eventManager.objectMap[F]={id:F,objectType:"dataPoint",dataSeriesIndex:N,dataPointIndex:v,x1:k,y1:A},F=d(F),X&&It.drawMarker(C.x,C.y,this._eventManager.ghostCtx,C.type,C.size,F,F,C.borderThickness),(V[v].indexLabel||D.indexLabel||V[v].indexLabelFormatter||D.indexLabelFormatter)&&this._indexLabels.push({chartType:"scatter",dataPoint:V[v],dataSeries:D,point:{x:k,y:A},direction:1,bounds:{x1:k-C.size/2,y1:A-C.size/2,x2:k+C.size/2,y2:A+C.size/2},color:null}),F=k,I=A)}}}return X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(f.x1,f.y1,f.width,f.height),this._eventManager.ghostCtx.restore()),g.restore(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.fadeInAnimation,easingFunction:pt.easing.easeInQuad,animationBase:0}}},te.prototype.renderCandlestick=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x,f=this._eventManager.ghostCtx;if(!(0>=c.dataSeriesIndexes.length)){var I=null,C=null,v=this.plotArea,k=0,A,O,N,D,V,F,I=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,C=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,W=c.axisX.dataInfo.minDiff;isFinite(W)||(W=.3*Math.abs(c.axisX.range)),W=this.options.dataPointWidth?this.dataPointWidth:.7*v.width*(c.axisX.logarithmic?Math.log(W)/Math.log(c.axisX.range):Math.abs(W)/Math.abs(c.axisX.range))<<0,this.dataPointMaxWidth&&I>C&&(I=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,C)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&C<I&&(C=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,I)),W<I&&(W=I),W>C&&(W=C),g.save(),X&&f.save(),g.beginPath(),g.rect(v.x1,v.y1,v.width,v.height),g.clip(),X&&(f.beginPath(),f.rect(v.x1,v.y1,v.width,v.height),f.clip());for(var de=0;de<c.dataSeriesIndexes.length;de++){var he=c.dataSeriesIndexes[de],H=this.data[he],ye=H.dataPoints;if(0<ye.length){for(var Ce=!!(5<W&&H.bevelEnabled),k=0;k<ye.length;k++)if(ye[k].getTime?F=ye[k].x.getTime():F=ye[k].x,!(F<c.axisX.dataInfo.viewPortMin||F>c.axisX.dataInfo.viewPortMax)&&!h(ye[k].y)&&ye[k].y.length&&typeof ye[k].y[0]=="number"&&typeof ye[k].y[1]=="number"&&typeof ye[k].y[2]=="number"&&typeof ye[k].y[3]=="number"){A=c.axisX.convertValueToPixel(F),O=c.axisY.convertValueToPixel(ye[k].y[0]),N=c.axisY.convertValueToPixel(ye[k].y[1]),D=c.axisY.convertValueToPixel(ye[k].y[2]),V=c.axisY.convertValueToPixel(ye[k].y[3]);var He=A-W/2<<0,Ie=He+W<<0,C=H.options.fallingColor?H.fallingColor:H._colorSet[0],I=ye[k].color?ye[k].color:H._colorSet[0],Se=Math.round(Math.max(1,.15*W)),tt=Se%2===0?0:.5,xt=H.dataPointIds[k];this._eventManager.objectMap[xt]={id:xt,objectType:"dataPoint",dataSeriesIndex:he,dataPointIndex:k,x1:He,y1:O,x2:Ie,y2:N,x3:A,y3:D,x4:A,y4:V,borderThickness:Se,color:I},g.strokeStyle=I,g.beginPath(),g.lineWidth=Se,f.lineWidth=Math.max(Se,4),H.type==="candlestick"?(g.moveTo(A-tt,N),g.lineTo(A-tt,Math.min(O,V)),g.stroke(),g.moveTo(A-tt,Math.max(O,V)),g.lineTo(A-tt,D),g.stroke(),li(g,He,Math.min(O,V),Ie,Math.max(O,V),ye[k].y[0]<=ye[k].y[3]?H.risingColor:C,Se,I,Ce,Ce,!1,!1,H.fillOpacity),X&&(I=d(xt),f.strokeStyle=I,f.moveTo(A-tt,N),f.lineTo(A-tt,Math.min(O,V)),f.stroke(),f.moveTo(A-tt,Math.max(O,V)),f.lineTo(A-tt,D),f.stroke(),li(f,He,Math.min(O,V),Ie,Math.max(O,V),I,0,null,!1,!1,!1,!1))):H.type==="ohlc"&&(g.moveTo(A-tt,N),g.lineTo(A-tt,D),g.stroke(),g.beginPath(),g.moveTo(A,O),g.lineTo(He,O),g.stroke(),g.beginPath(),g.moveTo(A,V),g.lineTo(Ie,V),g.stroke(),X&&(I=d(xt),f.strokeStyle=I,f.moveTo(A-tt,N),f.lineTo(A-tt,D),f.stroke(),f.beginPath(),f.moveTo(A,O),f.lineTo(He,O),f.stroke(),f.beginPath(),f.moveTo(A,V),f.lineTo(Ie,V),f.stroke())),(ye[k].indexLabel||H.indexLabel||ye[k].indexLabelFormatter||H.indexLabelFormatter)&&this._indexLabels.push({chartType:H.type,dataPoint:ye[k],dataSeries:H,point:{x:He+(Ie-He)/2,y:c.axisY.reversed?D:N},direction:1,bounds:{x1:He,y1:Math.min(N,D),x2:Ie,y2:Math.max(N,D)},color:I})}}}return X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(v.x1,v.y1,v.width,v.height),f.restore()),g.restore(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.fadeInAnimation,easingFunction:pt.easing.easeInQuad,animationBase:0}}},te.prototype.renderBoxAndWhisker=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x,f=this._eventManager.ghostCtx;if(!(0>=c.dataSeriesIndexes.length)){var I=null,v=this.plotArea,C=0,k,A,O,N,D,V,F,I=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,C=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,W=c.axisX.dataInfo.minDiff;isFinite(W)||(W=.3*Math.abs(c.axisX.range)),W=this.options.dataPointWidth?this.dataPointWidth:.7*v.width*(c.axisX.logarithmic?Math.log(W)/Math.log(c.axisX.range):Math.abs(W)/Math.abs(c.axisX.range))<<0,this.dataPointMaxWidth&&I>C&&(I=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,C)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&C<I&&(C=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,I)),W<I&&(W=I),W>C&&(W=C),g.save(),X&&f.save(),g.beginPath(),g.rect(v.x1,v.y1,v.width,v.height),g.clip(),X&&(f.beginPath(),f.rect(v.x1,v.y1,v.width,v.height),f.clip());for(var de=!1,de=!!c.axisY.reversed,he=0;he<c.dataSeriesIndexes.length;he++){var H=c.dataSeriesIndexes[he],ye=this.data[H],Ce=ye.dataPoints;if(0<Ce.length){for(var He=!!(5<W&&ye.bevelEnabled),C=0;C<Ce.length;C++)if(Ce[C].getTime?F=Ce[C].x.getTime():F=Ce[C].x,!(F<c.axisX.dataInfo.viewPortMin||F>c.axisX.dataInfo.viewPortMax)&&!h(Ce[C].y)&&Ce[C].y.length&&typeof Ce[C].y[0]=="number"&&typeof Ce[C].y[1]=="number"&&typeof Ce[C].y[2]=="number"&&typeof Ce[C].y[3]=="number"&&typeof Ce[C].y[4]=="number"&&Ce[C].y.length===5){k=c.axisX.convertValueToPixel(F),A=c.axisY.convertValueToPixel(Ce[C].y[0]),O=c.axisY.convertValueToPixel(Ce[C].y[1]),N=c.axisY.convertValueToPixel(Ce[C].y[2]),D=c.axisY.convertValueToPixel(Ce[C].y[3]),V=c.axisY.convertValueToPixel(Ce[C].y[4]);var Ie=k-W/2<<0,Se=k+W/2<<0,I=Ce[C].color?Ce[C].color:ye._colorSet[0],tt=Math.round(Math.max(1,.15*W)),xt=tt%2===0?0:.5,qe=Ce[C].whiskerColor?Ce[C].whiskerColor:Ce[C].color?ye.whiskerColor?ye.whiskerColor:Ce[C].color:ye.whiskerColor?ye.whiskerColor:I,Ge=typeof Ce[C].whiskerThickness=="number"?Ce[C].whiskerThickness:typeof ye.options.whiskerThickness=="number"?ye.whiskerThickness:tt,_t=Ce[C].whiskerDashType?Ce[C].whiskerDashType:ye.whiskerDashType,ze=h(Ce[C].whiskerLength)?h(ye.options.whiskerLength)?W:ye.whiskerLength:Ce[C].whiskerLength,ze=typeof ze=="number"?0>=ze?0:ze>=W?W:ze:typeof ze=="string"?parseInt(ze)*W/100>W?W:parseInt(ze)*W/100:W,Pe=Math.round(Ge)%2===1?.5:0,ct=Ce[C].stemColor?Ce[C].stemColor:Ce[C].color?ye.stemColor?ye.stemColor:Ce[C].color:ye.stemColor?ye.stemColor:I,wt=typeof Ce[C].stemThickness=="number"?Ce[C].stemThickness:typeof ye.options.stemThickness=="number"?ye.stemThickness:tt,Ne=Math.round(wt)%2===1?.5:0,Sn=Ce[C].stemDashType?Ce[C].stemDashType:ye.stemDashType,wn=Ce[C].lineColor?Ce[C].lineColor:Ce[C].color?ye.lineColor?ye.lineColor:Ce[C].color:ye.lineColor?ye.lineColor:I,ri=typeof Ce[C].lineThickness=="number"?Ce[C].lineThickness:typeof ye.options.lineThickness=="number"?ye.lineThickness:tt,Gn=Ce[C].lineDashType?Ce[C].lineDashType:ye.lineDashType,$t=Math.round(ri)%2===1?.5:0,Vi=ye.upperBoxColor,An=ye.lowerBoxColor,En=h(ye.options.fillOpacity)?1:ye.fillOpacity,Kt=ye.dataPointIds[C];this._eventManager.objectMap[Kt]={id:Kt,objectType:"dataPoint",dataSeriesIndex:H,dataPointIndex:C,x1:Ie,y1:A,x2:Se,y2:O,x3:k,y3:N,x4:k,y4:D,y5:V,borderThickness:tt,color:I,stemThickness:wt,stemColor:ct,whiskerThickness:Ge,whiskerLength:ze,whiskerColor:qe,lineThickness:ri,lineColor:wn},g.save(),0<wt&&(g.beginPath(),g.strokeStyle=ct,g.lineWidth=wt,g.setLineDash&&g.setLineDash(S(Sn,wt)),g.moveTo(k-Ne,O),g.lineTo(k-Ne,A),g.stroke(),g.moveTo(k-Ne,D),g.lineTo(k-Ne,N),g.stroke()),g.restore(),f.lineWidth=Math.max(tt,4),g.beginPath(),li(g,Ie,Math.min(V,O),Se,Math.max(O,V),An,0,I,de?He:!1,de?!1:He,!1,!1,En),g.beginPath(),li(g,Ie,Math.min(N,V),Se,Math.max(V,N),Vi,0,I,de?!1:He,de?He:!1,!1,!1,En),g.beginPath(),g.lineWidth=tt,g.strokeStyle=I,g.rect(Ie-xt,Math.min(O,N)-xt,Se-Ie+2*xt,Math.max(O,N)-Math.min(O,N)+2*xt),g.stroke(),g.save(),0<ri&&(g.beginPath(),g.globalAlpha=1,g.setLineDash&&g.setLineDash(S(Gn,ri)),g.strokeStyle=wn,g.lineWidth=ri,g.moveTo(Ie,V-$t),g.lineTo(Se,V-$t),g.stroke()),g.restore(),g.save(),0<Ge&&(g.beginPath(),g.setLineDash&&g.setLineDash(S(_t,Ge)),g.strokeStyle=qe,g.lineWidth=Ge,g.moveTo(k-ze/2<<0,D-Pe),g.lineTo(k+ze/2<<0,D-Pe),g.stroke(),g.moveTo(k-ze/2<<0,A+Pe),g.lineTo(k+ze/2<<0,A+Pe),g.stroke()),g.restore(),X&&(I=d(Kt),f.strokeStyle=I,f.lineWidth=wt,0<wt&&(f.moveTo(k-xt-Ne,O),f.lineTo(k-xt-Ne,Math.max(A,D)),f.stroke(),f.moveTo(k-xt-Ne,Math.min(A,D)),f.lineTo(k-xt-Ne,N),f.stroke()),li(f,Ie,Math.max(O,N),Se,Math.min(O,N),I,0,null,!1,!1,!1,!1),0<Ge&&(f.beginPath(),f.lineWidth=Ge,f.moveTo(k+ze/2,D-Pe),f.lineTo(k-ze/2,D-Pe),f.stroke(),f.moveTo(k+ze/2,A+Pe),f.lineTo(k-ze/2,A+Pe),f.stroke())),(Ce[C].indexLabel||ye.indexLabel||Ce[C].indexLabelFormatter||ye.indexLabelFormatter)&&this._indexLabels.push({chartType:ye.type,dataPoint:Ce[C],dataSeries:ye,point:{x:Ie+(Se-Ie)/2,y:c.axisY.reversed?A:D},direction:1,bounds:{x1:Ie,y1:Math.min(A,D),x2:Se,y2:Math.max(A,D)},color:I})}}}return X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(v.x1,v.y1,v.width,v.height),f.restore()),g.restore(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.fadeInAnimation,easingFunction:pt.easing.easeInQuad,animationBase:0}}},te.prototype.renderRangeColumn=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x;if(!(0>=c.dataSeriesIndexes.length)){var f=null,v=this.plotArea,N=0,k,A,O,N=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;k=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.03*this.width;var D=c.axisX.dataInfo.minDiff;isFinite(D)||(D=.3*Math.abs(c.axisX.range)),D=this.options.dataPointWidth?this.dataPointWidth:.9*(v.width*(c.axisX.logarithmic?Math.log(D)/Math.log(c.axisX.range):Math.abs(D)/Math.abs(c.axisX.range))/c.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&N>k&&(N=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,k)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&k<N&&(k=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,N)),D<N&&(D=N),D>k&&(D=k),g.save(),X&&this._eventManager.ghostCtx.save(),g.beginPath(),g.rect(v.x1,v.y1,v.width,v.height),g.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.clip());for(var V=0;V<c.dataSeriesIndexes.length;V++){var F=c.dataSeriesIndexes[V],I=this.data[F],C=I.dataPoints;if(0<C.length){for(var W=!!(5<D&&I.bevelEnabled),N=0;N<C.length;N++)if(C[N].getTime?O=C[N].x.getTime():O=C[N].x,!(O<c.axisX.dataInfo.viewPortMin||O>c.axisX.dataInfo.viewPortMax)&&!h(C[N].y)&&C[N].y.length&&typeof C[N].y[0]=="number"&&typeof C[N].y[1]=="number"){f=c.axisX.convertValueToPixel(O),k=c.axisY.convertValueToPixel(C[N].y[0]),A=c.axisY.convertValueToPixel(C[N].y[1]);var de=c.axisX.reversed?f+c.plotType.totalDataSeries*D/2-(c.previousDataSeriesCount+V)*D<<0:f-c.plotType.totalDataSeries*D/2+(c.previousDataSeriesCount+V)*D<<0,he=c.axisX.reversed?de-D<<0:de+D<<0,f=C[N].color?C[N].color:I._colorSet[N%I._colorSet.length];if(k>A){var H=k;k=A,A=H}H=I.dataPointIds[N],this._eventManager.objectMap[H]={id:H,objectType:"dataPoint",dataSeriesIndex:F,dataPointIndex:N,x1:de,y1:k,x2:he,y2:A},li(g,de,k,he,A,f,0,f,W,W,!1,!1,I.fillOpacity),f=d(H),X&&li(this._eventManager.ghostCtx,de,k,he,A,f,0,null,!1,!1,!1,!1),(C[N].indexLabel||I.indexLabel||C[N].indexLabelFormatter||I.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeColumn",dataPoint:C[N],dataSeries:I,indexKeyword:0,point:{x:de+(he-de)/2,y:C[N].y[1]>=C[N].y[0]?A:k},direction:C[N].y[1]>=C[N].y[0]?-1:1,bounds:{x1:de,y1:Math.min(k,A),x2:he,y2:Math.max(k,A)},color:f}),this._indexLabels.push({chartType:"rangeColumn",dataPoint:C[N],dataSeries:I,indexKeyword:1,point:{x:de+(he-de)/2,y:C[N].y[1]>=C[N].y[0]?k:A},direction:C[N].y[1]>=C[N].y[0]?1:-1,bounds:{x1:de,y1:Math.min(k,A),x2:he,y2:Math.max(k,A)},color:f}))}}}return X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.restore()),g.restore(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.fadeInAnimation,easingFunction:pt.easing.easeInQuad,animationBase:0}}},te.prototype.renderError=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x,f=c.axisY._position?!(c.axisY._position==="left"||c.axisY._position==="right"):!1;if(!(0>=c.dataSeriesIndexes.length)){var v=null,k=!1,A=this.plotArea,O=0,N,D,V,F,I,C,W,de=c.axisX.dataInfo.minDiff;isFinite(de)||(de=.3*Math.abs(c.axisX.range)),g.save(),X&&this._eventManager.ghostCtx.save(),g.beginPath(),g.rect(A.x1,A.y1,A.width,A.height),g.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(A.x1,A.y1,A.width,A.height),this._eventManager.ghostCtx.clip());for(var he=0,H=0;H<this.data.length;H++)!this.data[H].type.match(/(bar|column)/ig)||!this.data[H].visible||this.data[H].type.match(/(stacked)/ig)&&he||he++;for(var ye=0;ye<c.dataSeriesIndexes.length;ye++){var Ce=c.dataSeriesIndexes[ye],He=this.data[Ce],Ie=He.dataPoints,Se=h(He._linkedSeries)?!1:!!(He._linkedSeries.type.match(/(bar|column)/ig)&&He._linkedSeries.visible),tt=0;if(Se)for(v=He._linkedSeries.id,H=0;H<v;H++)!this.data[H].type.match(/(bar|column)/ig)||!this.data[H].visible||this.data[H].type.match(/(stacked)/ig)&&tt||(this.data[H].type.match(/(range)/ig)&&(k=!0),tt++);if(v=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,O=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:f?Math.min(.15*this.height,.9*(this.plotArea.height/(Se?he:1)))<<0:.3*this.width,k&&(O=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:f?Math.min(.15*this.height,.9*(this.plotArea.height/(Se?he:1)))<<0:.03*this.width),H=this.options.dataPointWidth?this.dataPointWidth:.9*((f?A.height:A.width)*(c.axisX.logarithmic?Math.log(de)/Math.log(c.axisX.range):Math.abs(de)/Math.abs(c.axisX.range))/(Se?he:1))<<0,this.dataPointMaxWidth&&v>O&&(v=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,O)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&O<v&&(O=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,v)),H<v&&(H=v),H>O&&(H=O),0<Ie.length)for(var xt=He._colorSet,O=0;O<Ie.length;O++){var v=He.lineColor=He.options.color?He.options.color:xt[0],qe={color:Ie[O].whiskerColor?Ie[O].whiskerColor:Ie[O].color?He.whiskerColor?He.whiskerColor:Ie[O].color:He.whiskerColor?He.whiskerColor:v,thickness:h(Ie[O].whiskerThickness)?He.whiskerThickness:Ie[O].whiskerThickness,dashType:Ie[O].whiskerDashType?Ie[O].whiskerDashType:He.whiskerDashType,length:h(Ie[O].whiskerLength)?h(He.options.whiskerLength)?H:He.options.whiskerLength:Ie[O].whiskerLength,trimLength:h(Ie[O].whiskerLength)&&h(He.options.whiskerLength)?50:0};qe.length=typeof qe.length=="number"?0>=qe.length?0:qe.length>=H?H:qe.length:typeof qe.length=="string"?parseInt(qe.length)*H/100>H?H:parseInt(qe.length)*H/100>H:H,qe.thickness=typeof qe.thickness=="number"?0>qe.thickness?0:Math.round(qe.thickness):2;var Ge={color:Ie[O].stemColor?Ie[O].stemColor:Ie[O].color?He.stemColor?He.stemColor:Ie[O].color:He.stemColor?He.stemColor:v,thickness:Ie[O].stemThickness?Ie[O].stemThickness:He.stemThickness,dashType:Ie[O].stemDashType?Ie[O].stemDashType:He.stemDashType};if(Ge.thickness=typeof Ge.thickness=="number"?0>Ge.thickness?0:Math.round(Ge.thickness):2,Ie[O].getTime?W=Ie[O].x.getTime():W=Ie[O].x,!(W<c.axisX.dataInfo.viewPortMin||W>c.axisX.dataInfo.viewPortMax)&&!h(Ie[O].y)&&Ie[O].y.length&&typeof Ie[O].y[0]=="number"&&typeof Ie[O].y[1]=="number"){var _t=c.axisX.convertValueToPixel(W);f?D=_t:N=_t,_t=c.axisY.convertValueToPixel(Ie[O].y[0]),f?V=_t:I=_t,_t=c.axisY.convertValueToPixel(Ie[O].y[1]),f?F=_t:C=_t,f?(I=c.axisX.reversed?D+(Se?he:1)*H/2-(Se?tt-1:0)*H<<0:D-(Se?he:1)*H/2+(Se?tt-1:0)*H<<0,C=c.axisX.reversed?I-H<<0:I+H<<0):(V=c.axisX.reversed?N+(Se?he:1)*H/2-(Se?tt-1:0)*H<<0:N-(Se?he:1)*H/2+(Se?tt-1:0)*H<<0,F=c.axisX.reversed?V-H<<0:V+H<<0),!f&&I>C&&(_t=I,I=C,C=_t),f&&V>F&&(_t=V,V=F,F=_t),_t=He.dataPointIds[O],this._eventManager.objectMap[_t]={id:_t,objectType:"dataPoint",dataSeriesIndex:Ce,dataPointIndex:O,x1:Math.min(V,F),y1:Math.min(I,C),x2:Math.max(F,V),y2:Math.max(C,I),isXYSwapped:f,stemProperties:Ge,whiskerProperties:qe},Qe(g,Math.min(V,F),Math.min(I,C),Math.max(F,V),Math.max(C,I),v,qe,Ge,f),X&&Qe(this._eventManager.ghostCtx,V,I,F,C,v,qe,Ge,f),(Ie[O].indexLabel||He.indexLabel||Ie[O].indexLabelFormatter||He.indexLabelFormatter)&&(this._indexLabels.push({chartType:"error",dataPoint:Ie[O],dataSeries:He,indexKeyword:0,point:{x:f?Ie[O].y[1]>=Ie[O].y[0]?V:F:V+(F-V)/2,y:f?I+(C-I)/2:Ie[O].y[1]>=Ie[O].y[0]?C:I},direction:Ie[O].y[1]>=Ie[O].y[0]?-1:1,bounds:{x1:f?Math.min(V,F):V,y1:f?I:Math.min(I,C),x2:f?Math.max(V,F):F,y2:f?C:Math.max(I,C)},color:v,axisSwapped:f}),this._indexLabels.push({chartType:"error",dataPoint:Ie[O],dataSeries:He,indexKeyword:1,point:{x:f?Ie[O].y[1]>=Ie[O].y[0]?F:V:V+(F-V)/2,y:f?I+(C-I)/2:Ie[O].y[1]>=Ie[O].y[0]?I:C},direction:Ie[O].y[1]>=Ie[O].y[0]?1:-1,bounds:{x1:f?Math.min(V,F):V,y1:f?I:Math.min(I,C),x2:f?Math.max(V,F):F,y2:f?C:Math.max(I,C)},color:v,axisSwapped:f}))}}}return X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(A.x1,A.y1,A.width,A.height),this._eventManager.ghostCtx.restore()),g.restore(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.fadeInAnimation,easingFunction:pt.easing.easeInQuad,animationBase:0}}},te.prototype.renderRangeBar=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x;if(!(0>=c.dataSeriesIndexes.length)){var f=null,v=this.plotArea,D=0,k,A,O,N,D=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;k=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,.9*(this.plotArea.height/c.plotType.totalDataSeries))<<0;var V=c.axisX.dataInfo.minDiff;isFinite(V)||(V=.3*Math.abs(c.axisX.range)),V=this.options.dataPointWidth?this.dataPointWidth:.9*(v.height*(c.axisX.logarithmic?Math.log(V)/Math.log(c.axisX.range):Math.abs(V)/Math.abs(c.axisX.range))/c.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&D>k&&(D=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,k)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&k<D&&(k=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,D)),V<D&&(V=D),V>k&&(V=k),g.save(),X&&this._eventManager.ghostCtx.save(),g.beginPath(),g.rect(v.x1,v.y1,v.width,v.height),g.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.clip());for(var F=0;F<c.dataSeriesIndexes.length;F++){var I=c.dataSeriesIndexes[F],C=this.data[I],W=C.dataPoints;if(0<W.length){var de=!!(5<V&&C.bevelEnabled);for(g.strokeStyle="#4572A7 ",D=0;D<W.length;D++)if(W[D].getTime?N=W[D].x.getTime():N=W[D].x,!(N<c.axisX.dataInfo.viewPortMin||N>c.axisX.dataInfo.viewPortMax)&&!h(W[D].y)&&W[D].y.length&&typeof W[D].y[0]=="number"&&typeof W[D].y[1]=="number"){k=c.axisY.convertValueToPixel(W[D].y[0]),A=c.axisY.convertValueToPixel(W[D].y[1]),O=c.axisX.convertValueToPixel(N),O=c.axisX.reversed?O+c.plotType.totalDataSeries*V/2-(c.previousDataSeriesCount+F)*V<<0:O-c.plotType.totalDataSeries*V/2+(c.previousDataSeriesCount+F)*V<<0;var he=c.axisX.reversed?O-V<<0:O+V<<0;k>A&&(f=k,k=A,A=f),f=W[D].color?W[D].color:C._colorSet[D%C._colorSet.length],li(g,k,O,A,he,f,0,null,de,!1,!1,!1,C.fillOpacity),f=C.dataPointIds[D],this._eventManager.objectMap[f]={id:f,objectType:"dataPoint",dataSeriesIndex:I,dataPointIndex:D,x1:k,y1:O,x2:A,y2:he},f=d(f),X&&li(this._eventManager.ghostCtx,k,O,A,he,f,0,null,!1,!1,!1,!1),(W[D].indexLabel||C.indexLabel||W[D].indexLabelFormatter||C.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeBar",dataPoint:W[D],dataSeries:C,indexKeyword:0,point:{x:W[D].y[1]>=W[D].y[0]?k:A,y:O+(he-O)/2},direction:W[D].y[1]>=W[D].y[0]?-1:1,bounds:{x1:Math.min(k,A),y1:O,x2:Math.max(k,A),y2:he},color:f}),this._indexLabels.push({chartType:"rangeBar",dataPoint:W[D],dataSeries:C,indexKeyword:1,point:{x:W[D].y[1]>=W[D].y[0]?A:k,y:O+(he-O)/2},direction:W[D].y[1]>=W[D].y[0]?1:-1,bounds:{x1:Math.min(k,A),y1:O,x2:Math.max(k,A),y2:he},color:f}))}}}return X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.restore()),g.restore(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.fadeInAnimation,easingFunction:pt.easing.easeInQuad,animationBase:0}}},te.prototype.renderRangeArea=function(c){function x(){if(ye){var ze=null;0<V.lineThickness&&f.stroke();for(var Pe=N.length-1;0<=Pe;Pe--)ze=N[Pe],f.lineTo(ze.x,ze.y),v.lineTo(ze.x,ze.y);if(f.closePath(),f.globalAlpha=V.fillOpacity,f.fill(),f.globalAlpha=1,v.fill(),0<V.lineThickness){for(f.beginPath(),f.moveTo(ze.x,ze.y),Pe=0;Pe<N.length;Pe++)ze=N[Pe],f.lineTo(ze.x,ze.y);f.stroke()}f.beginPath(),f.moveTo(W,de),v.beginPath(),v.moveTo(W,de),ye={x:W,y:de},N=[],N.push({x:W,y:he})}}var g=c.targetCanvasCtx||this.plotArea.ctx,f=X?this._preRenderCtx:g;if(!(0>=c.dataSeriesIndexes.length)){var v=this._eventManager.ghostCtx,k=[],A=this.plotArea;f.save(),X&&v.save(),f.beginPath(),f.rect(A.x1,A.y1,A.width,A.height),f.clip(),X&&(v.beginPath(),v.rect(A.x1,A.y1,A.width,A.height),v.clip());for(var O=0;O<c.dataSeriesIndexes.length;O++){var N=[],D=c.dataSeriesIndexes[O],V=this.data[D],F=V.dataPoints,k=V.id;this._eventManager.objectMap[k]={objectType:"dataSeries",dataSeriesIndex:D},k=d(k),v.fillStyle=k;var k=[],I=!0,C=0,W,de,he,H,ye=null;if(0<F.length){var Ce=V._colorSet[C%V._colorSet.length],He=V.lineColor=V.options.lineColor||Ce,Ie=He;f.fillStyle=Ce,f.strokeStyle=He,f.lineWidth=V.lineThickness;var Se="solid";if(f.setLineDash){var tt=S(V.nullDataLineDashType,V.lineThickness),Se=V.lineDashType,xt=S(Se,V.lineThickness);f.setLineDash(xt)}for(var qe=!0;C<F.length;C++)if(H=F[C].x.getTime?F[C].x.getTime():F[C].x,!(H<c.axisX.dataInfo.viewPortMin||H>c.axisX.dataInfo.viewPortMax&&(!V.connectNullData||!qe)))if(F[C].y!==null&&F[C].y.length&&typeof F[C].y[0]=="number"&&typeof F[C].y[1]=="number"){if(W=c.axisX.convertValueToPixel(H),de=c.axisY.convertValueToPixel(F[C].y[0]),he=c.axisY.convertValueToPixel(F[C].y[1]),I||qe?(V.connectNullData&&!I?(f.setLineDash&&(V.options.nullDataLineDashType||Se===V.lineDashType&&V.lineDashType!==V.nullDataLineDashType)&&(N[N.length-1].newLineDashArray=xt,Se=V.nullDataLineDashType,f.setLineDash(tt)),f.lineTo(W,de),X&&v.lineTo(W,de),N.push({x:W,y:he})):(f.beginPath(),f.moveTo(W,de),ye={x:W,y:de},N=[],N.push({x:W,y:he}),X&&(v.beginPath(),v.moveTo(W,de))),qe=I=!1):(f.lineTo(W,de),N.push({x:W,y:he}),X&&v.lineTo(W,de),C%250==0&&x()),H=V.dataPointIds[C],this._eventManager.objectMap[H]={id:H,objectType:"dataPoint",dataSeriesIndex:D,dataPointIndex:C,x1:W,y1:de,y2:he},C<F.length-1&&(Ie!==(F[C].lineColor||He)||Se!==(F[C].lineDashType||V.lineDashType))&&(x(),Ie=F[C].lineColor||He,N[N.length-1].newStrokeStyle=Ie,f.strokeStyle=Ie,f.setLineDash&&(F[C].lineDashType?(Se=F[C].lineDashType,N[N.length-1].newLineDashArray=S(Se,V.lineThickness),f.setLineDash(N[N.length-1].newLineDashArray)):(Se=V.lineDashType,N[N.length-1].newLineDashArray=xt,f.setLineDash(xt)))),F[C].markerSize!==0&&(0<F[C].markerSize||0<V.markerSize)){var Ge=V.getMarkerProperties(C,W,he,f);k.push(Ge);var _t=d(H);X&&k.push({x:W,y:he,ctx:v,type:Ge.type,size:Ge.size,color:_t,borderColor:_t,borderThickness:Ge.borderThickness}),Ge=V.getMarkerProperties(C,W,de,f),k.push(Ge),_t=d(H),X&&k.push({x:W,y:de,ctx:v,type:Ge.type,size:Ge.size,color:_t,borderColor:_t,borderThickness:Ge.borderThickness})}(F[C].indexLabel||V.indexLabel||F[C].indexLabelFormatter||V.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeArea",dataPoint:F[C],dataSeries:V,indexKeyword:0,point:{x:W,y:de},direction:F[C].y[0]>F[C].y[1]===c.axisY.reversed?-1:1,color:Ce}),this._indexLabels.push({chartType:"rangeArea",dataPoint:F[C],dataSeries:V,indexKeyword:1,point:{x:W,y:he},direction:F[C].y[0]>F[C].y[1]===c.axisY.reversed?1:-1,color:Ce}))}else qe||I||x(),qe=!0;x(),It.drawMarkers(k)}}return X&&(g.drawImage(this._preRenderCanvas,0,0,this.width,this.height),f.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&f.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&f.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),f.clearRect(A.x1,A.y1,A.width,A.height),this._eventManager.ghostCtx.restore()),f.restore(),{source:g,dest:this.plotArea.ctx,animationCallback:pt.xClipAnimation,easingFunction:pt.easing.linear,animationBase:0}}},te.prototype.renderRangeSplineArea=function(c){function x(Ge,_t){var ze=Te(de,2);if(0<ze.length){if(0<D.lineThickness){f.strokeStyle=_t,f.setLineDash&&f.setLineDash(Ge),f.beginPath(),f.moveTo(ze[0].x,ze[0].y);for(var Pe=0;Pe<ze.length-3;Pe+=3)(ze[Pe].newStrokeStyle||ze[Pe].newLineDashArray)&&(f.stroke(),f.beginPath(),f.moveTo(ze[Pe].x,ze[Pe].y),ze[Pe].newStrokeStyle&&(f.strokeStyle=ze[Pe].newStrokeStyle),ze[Pe].newLineDashArray&&f.setLineDash(ze[Pe].newLineDashArray)),f.bezierCurveTo(ze[Pe+1].x,ze[Pe+1].y,ze[Pe+2].x,ze[Pe+2].y,ze[Pe+3].x,ze[Pe+3].y);f.stroke()}for(f.beginPath(),f.moveTo(ze[0].x,ze[0].y),X&&(v.beginPath(),v.moveTo(ze[0].x,ze[0].y)),Pe=0;Pe<ze.length-3;Pe+=3)f.bezierCurveTo(ze[Pe+1].x,ze[Pe+1].y,ze[Pe+2].x,ze[Pe+2].y,ze[Pe+3].x,ze[Pe+3].y),X&&v.bezierCurveTo(ze[Pe+1].x,ze[Pe+1].y,ze[Pe+2].x,ze[Pe+2].y,ze[Pe+3].x,ze[Pe+3].y);for(ze=Te(he,2),f.lineTo(he[he.length-1].x,he[he.length-1].y),Pe=ze.length-1;2<Pe;Pe-=3)f.bezierCurveTo(ze[Pe-1].x,ze[Pe-1].y,ze[Pe-2].x,ze[Pe-2].y,ze[Pe-3].x,ze[Pe-3].y),X&&v.bezierCurveTo(ze[Pe-1].x,ze[Pe-1].y,ze[Pe-2].x,ze[Pe-2].y,ze[Pe-3].x,ze[Pe-3].y);if(f.closePath(),f.globalAlpha=D.fillOpacity,f.fill(),X&&(v.closePath(),v.fill()),f.globalAlpha=1,0<D.lineThickness){f.strokeStyle=_t,f.setLineDash&&f.setLineDash(Ge),f.beginPath(),f.moveTo(ze[0].x,ze[0].y);for(var ct=Pe=0;Pe<ze.length-3;Pe+=3,ct++)(de[ct].newStrokeStyle||de[ct].newLineDashArray)&&(f.stroke(),f.beginPath(),f.moveTo(ze[Pe].x,ze[Pe].y),de[ct].newStrokeStyle&&(f.strokeStyle=de[ct].newStrokeStyle),de[ct].newLineDashArray&&f.setLineDash(de[ct].newLineDashArray)),f.bezierCurveTo(ze[Pe+1].x,ze[Pe+1].y,ze[Pe+2].x,ze[Pe+2].y,ze[Pe+3].x,ze[Pe+3].y);f.stroke()}f.beginPath()}}var g=c.targetCanvasCtx||this.plotArea.ctx,f=X?this._preRenderCtx:g;if(!(0>=c.dataSeriesIndexes.length)){var v=this._eventManager.ghostCtx,k=[],A=this.plotArea;f.save(),X&&v.save(),f.beginPath(),f.rect(A.x1,A.y1,A.width,A.height),f.clip(),X&&(v.beginPath(),v.rect(A.x1,A.y1,A.width,A.height),v.clip());for(var O=0;O<c.dataSeriesIndexes.length;O++){var N=c.dataSeriesIndexes[O],D=this.data[N],V=D.dataPoints,k=D.id;this._eventManager.objectMap[k]={objectType:"dataSeries",dataSeriesIndex:N},k=d(k),v.fillStyle=k;var k=[],F=0,I,C,W,de=[],he=[];if(0<V.length){var H=D._colorSet[F%D._colorSet.length],ye=D.lineColor=D.options.lineColor||H,Ce=ye;f.fillStyle=H,f.lineWidth=D.lineThickness;var He="solid",Ie;if(f.setLineDash){var Se=S(D.nullDataLineDashType,D.lineThickness),He=D.lineDashType;Ie=S(He,D.lineThickness)}for(C=!1;F<V.length;F++)if(I=V[F].x.getTime?V[F].x.getTime():V[F].x,!(I<c.axisX.dataInfo.viewPortMin||I>c.axisX.dataInfo.viewPortMax&&(!D.connectNullData||!C)))if(V[F].y!==null&&V[F].y.length&&typeof V[F].y[0]=="number"&&typeof V[F].y[1]=="number"){I=c.axisX.convertValueToPixel(I),C=c.axisY.convertValueToPixel(V[F].y[0]),W=c.axisY.convertValueToPixel(V[F].y[1]);var tt=D.dataPointIds[F];if(this._eventManager.objectMap[tt]={id:tt,objectType:"dataPoint",dataSeriesIndex:N,dataPointIndex:F,x1:I,y1:C,y2:W},de[de.length]={x:I,y:C},he[he.length]={x:I,y:W},F<V.length-1&&(Ce!==(V[F].lineColor||ye)||He!==(V[F].lineDashType||D.lineDashType))&&(Ce=V[F].lineColor||ye,de[de.length-1].newStrokeStyle=Ce,f.setLineDash&&(V[F].lineDashType?(He=V[F].lineDashType,de[de.length-1].newLineDashArray=S(He,D.lineThickness)):(He=D.lineDashType,de[de.length-1].newLineDashArray=Ie))),V[F].markerSize!==0&&(0<V[F].markerSize||0<D.markerSize)){var xt=D.getMarkerProperties(F,I,C,f);k.push(xt);var qe=d(tt);X&&k.push({x:I,y:C,ctx:v,type:xt.type,size:xt.size,color:qe,borderColor:qe,borderThickness:xt.borderThickness}),xt=D.getMarkerProperties(F,I,W,f),k.push(xt),qe=d(tt),X&&k.push({x:I,y:W,ctx:v,type:xt.type,size:xt.size,color:qe,borderColor:qe,borderThickness:xt.borderThickness})}(V[F].indexLabel||D.indexLabel||V[F].indexLabelFormatter||D.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:V[F],dataSeries:D,indexKeyword:0,point:{x:I,y:C},direction:V[F].y[0]<=V[F].y[1]?-1:1,color:H}),this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:V[F],dataSeries:D,indexKeyword:1,point:{x:I,y:W},direction:V[F].y[0]<=V[F].y[1]?1:-1,color:H})),C=!1}else 0<F&&!C&&(D.connectNullData?f.setLineDash&&0<de.length&&(D.options.nullDataLineDashType||!V[F-1].lineDashType)&&(de[de.length-1].newLineDashArray=Se,He=D.nullDataLineDashType):(x(Ie,ye),de=[],he=[])),C=!0;x(Ie,ye),It.drawMarkers(k)}}return X&&(g.drawImage(this._preRenderCanvas,0,0,this.width,this.height),f.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&f.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&f.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),f.clearRect(A.x1,A.y1,A.width,A.height),this._eventManager.ghostCtx.restore()),f.restore(),{source:g,dest:this.plotArea.ctx,animationCallback:pt.xClipAnimation,easingFunction:pt.easing.linear,animationBase:0}}},te.prototype.renderWaterfall=function(c){var x=c.targetCanvasCtx||this.plotArea.ctx,g=X?this._preRenderCtx:x;if(!(0>=c.dataSeriesIndexes.length)){var f=this._eventManager.ghostCtx,v=null,k=this.plotArea,F=0,A,O,N,D,V=c.axisY.convertValueToPixel(c.axisY.logarithmic?c.axisY.viewportMinimum:0),F=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;O=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,.9*(this.plotArea.width/c.plotType.totalDataSeries))<<0;var I=c.axisX.dataInfo.minDiff;isFinite(I)||(I=.3*Math.abs(c.axisX.range)),I=this.options.dataPointWidth?this.dataPointWidth:.6*(k.width*(c.axisX.logarithmic?Math.log(I)/Math.log(c.axisX.range):Math.abs(I)/Math.abs(c.axisX.range))/c.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&F>O&&(F=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,O)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&O<F&&(O=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,F)),I<F&&(I=F),I>O&&(I=O),g.save(),X&&this._eventManager.ghostCtx.save(),g.beginPath(),g.rect(k.x1,k.y1,k.width,k.height),g.clip(),X&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(k.x1,k.y1,k.width,k.height),this._eventManager.ghostCtx.clip());for(var C=0;C<c.dataSeriesIndexes.length;C++){var W=c.dataSeriesIndexes[C],de=this.data[W],he=de.dataPoints,v=de._colorSet[0];de.risingColor=de.options.risingColor?de.options.risingColor:v,de.fallingColor=de.options.fallingColor?de.options.fallingColor:"#e40a0a";var H=typeof de.options.lineThickness=="number"?Math.round(de.lineThickness):1,ye=Math.round(H)%2===1?-.5:0;if(0<he.length)for(var Ce=!!(5<I&&de.bevelEnabled),He=!1,Ie=null,Se=null,F=0;F<he.length;F++)if(he[F].getTime?D=he[F].x.getTime():D=he[F].x,typeof he[F].y!="number"){if(0<F&&!He&&de.connectNullData)var tt=de.options.nullDataLineDashType||!he[F-1].lineDashType?de.nullDataLineDashType:he[F-1].lineDashType;He=!0}else{A=c.axisX.convertValueToPixel(D),O=de.dataPointEOs[F].cumulativeSum===0?V:c.axisY.convertValueToPixel(de.dataPointEOs[F].cumulativeSum),N=de.dataPointEOs[F].cumulativeSumYStartValue===0?V:c.axisY.convertValueToPixel(de.dataPointEOs[F].cumulativeSumYStartValue),A=c.axisX.reversed?A+c.plotType.totalDataSeries*I/2-(c.previousDataSeriesCount+C)*I<<0:A-c.plotType.totalDataSeries*I/2+(c.previousDataSeriesCount+C)*I<<0;var xt=c.axisX.reversed?A-I<<0:A+I<<0;O>N&&(v=O,O=N,N=v),c.axisY.reversed&&(v=O,O=N,N=v),v=de.dataPointIds[F],this._eventManager.objectMap[v]={id:v,objectType:"dataPoint",dataSeriesIndex:W,dataPointIndex:F,x1:A,y1:O,x2:xt,y2:N};var Ge=he[F].color?he[F].color:0<he[F].y?de.risingColor:de.fallingColor;li(g,A,O,xt,N,Ge,0,Ge,Ce,Ce,!1,!1,de.fillOpacity),v=d(v),X&&li(this._eventManager.ghostCtx,A,O,xt,N,v,0,null,!1,!1,!1,!1);var qe,Ge=A;qe=typeof he[F].isIntermediateSum<"u"&&he[F].isIntermediateSum===!0||typeof he[F].isCumulativeSum<"u"&&he[F].isCumulativeSum===!0?0<he[F].y?O:N:0<he[F].y?N:O,0<F&&Ie&&(!He||de.connectNullData)&&(He&&g.setLineDash&&g.setLineDash(S(tt,H)),g.beginPath(),g.moveTo(Ie,Se-ye),g.lineTo(Ge,qe-ye),0<H&&g.stroke(),X&&(f.beginPath(),f.moveTo(Ie,Se-ye),f.lineTo(Ge,qe-ye),0<H&&f.stroke())),He=!1,Ie=xt,Se=0<he[F].y?O:N,Ge=he[F].lineDashType?he[F].lineDashType:de.options.lineDashType?de.options.lineDashType:"shortDash",g.strokeStyle=he[F].lineColor?he[F].lineColor:de.options.lineColor?de.options.lineColor:"#9e9e9e",g.lineWidth=H,g.setLineDash&&(Ge=S(Ge,H),g.setLineDash(Ge)),(he[F].indexLabel||de.indexLabel||he[F].indexLabelFormatter||de.indexLabelFormatter)&&this._indexLabels.push({chartType:"waterfall",dataPoint:he[F],dataSeries:de,point:{x:A+(xt-A)/2,y:0<=he[F].y?O:N},direction:0>he[F].y===c.axisY.reversed?1:-1,bounds:{x1:A,y1:Math.min(O,N),x2:xt,y2:Math.max(O,N)},color:v})}}return X&&(x.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.globalCompositeOperation="source-atop",c.axisX.maskCanvas&&g.drawImage(c.axisX.maskCanvas,0,0,this.width,this.height),c.axisY.maskCanvas&&g.drawImage(c.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),g.clearRect(k.x1,k.y1,k.width,k.height),this._eventManager.ghostCtx.restore()),g.restore(),{source:x,dest:this.plotArea.ctx,animationCallback:pt.fadeInAnimation,easingFunction:pt.easing.easeInQuad,animationBase:0}}};var Pt=function(c,x,g,f,v,k,A,O,N){if(!(0>g)){if(typeof O>"u"&&(O=1),!X){var D=Number((A%(2*Math.PI)).toFixed(8));Number((k%(2*Math.PI)).toFixed(8))===D&&(A-=1e-4)}c.save(),c.globalAlpha=O,v==="pie"?(c.beginPath(),c.moveTo(x.x,x.y),c.arc(x.x,x.y,g,k,A,!1),c.fillStyle=f,c.strokeStyle="white",c.lineWidth=2,c.closePath(),c.fill()):v==="doughnut"&&(c.beginPath(),c.arc(x.x,x.y,g,k,A,!1),0<=N&&c.arc(x.x,x.y,N*g,A,k,!0),c.closePath(),c.fillStyle=f,c.strokeStyle="white",c.lineWidth=2,c.fill()),c.globalAlpha=1,c.restore()}};te.prototype.renderPie=function(c){function x(){if(D&&V){for(var qe=0,Ge=0,_t=0,ze=0,Pe=0;Pe<V.length;Pe++){var ct=V[Pe],wt=D.dataPointIds[Pe];C[Pe].id=wt,C[Pe].objectType="dataPoint",C[Pe].dataPointIndex=Pe,C[Pe].dataSeriesIndex=0;var Ne=C[Pe],wn={percent:null,total:null},Sn=null,wn=N.getPercentAndTotal(D,ct);(D.indexLabelFormatter||ct.indexLabelFormatter)&&(Sn={chart:N.options,dataSeries:D,dataPoint:ct,total:wn.total,percent:wn.percent}),wn=ct.indexLabelFormatter?ct.indexLabelFormatter(Sn):ct.indexLabel?N.replaceKeywordsWithValue(ct.indexLabel,ct,D,Pe):D.indexLabelFormatter?D.indexLabelFormatter(Sn):D.indexLabel?N.replaceKeywordsWithValue(D.indexLabel,ct,D,Pe):ct.label?ct.label:"",N._eventManager.objectMap[wt]=Ne,Ne.center={x:Ce.x,y:Ce.y},Ne.y=ct.y,Ne.radius=Se,Ne.percentInnerRadius=xt,Ne.indexLabelText=wn,Ne.indexLabelPlacement=D.indexLabelPlacement,Ne.indexLabelLineColor=ct.indexLabelLineColor?ct.indexLabelLineColor:D.options.indexLabelLineColor?D.options.indexLabelLineColor:ct.color?ct.color:D._colorSet[Pe%D._colorSet.length],Ne.indexLabelLineThickness=h(ct.indexLabelLineThickness)?D.indexLabelLineThickness:ct.indexLabelLineThickness,Ne.indexLabelLineDashType=ct.indexLabelLineDashType?ct.indexLabelLineDashType:D.indexLabelLineDashType,Ne.indexLabelFontColor=ct.indexLabelFontColor?ct.indexLabelFontColor:D.indexLabelFontColor,Ne.indexLabelFontStyle=ct.indexLabelFontStyle?ct.indexLabelFontStyle:D.indexLabelFontStyle,Ne.indexLabelFontWeight=ct.indexLabelFontWeight?ct.indexLabelFontWeight:D.indexLabelFontWeight,Ne.indexLabelFontSize=h(ct.indexLabelFontSize)?D.indexLabelFontSize:ct.indexLabelFontSize,Ne.indexLabelFontFamily=ct.indexLabelFontFamily?ct.indexLabelFontFamily:D.indexLabelFontFamily,Ne.indexLabelBackgroundColor=ct.indexLabelBackgroundColor?ct.indexLabelBackgroundColor:D.options.indexLabelBackgroundColor?D.options.indexLabelBackgroundColor:D.indexLabelBackgroundColor,Ne.indexLabelMaxWidth=ct.indexLabelMaxWidth?ct.indexLabelMaxWidth:D.indexLabelMaxWidth?D.indexLabelMaxWidth:.33*I.width,Ne.indexLabelWrap=typeof ct.indexLabelWrap<"u"?ct.indexLabelWrap:D.indexLabelWrap,Ne.startAngle=Pe===0?D.startAngle?D.startAngle/180*Math.PI:0:C[Pe-1].endAngle,Ne.startAngle=(Ne.startAngle+2*Math.PI)%(2*Math.PI),Ne.endAngle=Ne.startAngle+2*Math.PI/He*Math.abs(ct.y),ct=(Ne.endAngle+Ne.startAngle)/2,ct=(ct+2*Math.PI)%(2*Math.PI),Ne.midAngle=ct,Ne.midAngle>Math.PI/2-H&&Ne.midAngle<Math.PI/2+H?((qe===0||C[_t].midAngle>Ne.midAngle)&&(_t=Pe),qe++):Ne.midAngle>3*Math.PI/2-H&&Ne.midAngle<3*Math.PI/2+H&&((Ge===0||C[ze].midAngle>Ne.midAngle)&&(ze=Pe),Ge++),Ne.hemisphere=ct>Math.PI/2&&ct<=3*Math.PI/2?"left":"right",Ne.indexLabelTextBlock=new ue(N.plotArea.ctx,{fontSize:Ne.indexLabelFontSize,fontFamily:Ne.indexLabelFontFamily,fontColor:Ne.indexLabelFontColor,fontStyle:Ne.indexLabelFontStyle,fontWeight:Ne.indexLabelFontWeight,horizontalAlign:"left",backgroundColor:Ne.indexLabelBackgroundColor,maxWidth:Ne.indexLabelMaxWidth,maxHeight:Ne.indexLabelWrap?5*Ne.indexLabelFontSize:1.5*Ne.indexLabelFontSize,text:Ne.indexLabelText,padding:0,textBaseline:"top"}),Ne.indexLabelTextBlock.measureText()}for(wt=ct=0,wn=!1,Pe=0;Pe<V.length;Pe++)Ne=C[(_t+Pe)%V.length],1<qe&&Ne.midAngle>Math.PI/2-H&&Ne.midAngle<Math.PI/2+H&&(ct<=qe/2&&!wn?(Ne.hemisphere="right",ct++):(Ne.hemisphere="left",wn=!0));for(wn=!1,Pe=0;Pe<V.length;Pe++)Ne=C[(ze+Pe)%V.length],1<Ge&&Ne.midAngle>3*Math.PI/2-H&&Ne.midAngle<3*Math.PI/2+H&&(wt<=Ge/2&&!wn?(Ne.hemisphere="left",wt++):(Ne.hemisphere="right",wn=!0))}}function g(qe){var Ge=N.plotArea.ctx;for(Ge.clearRect(I.x1,I.y1,I.width,I.height),Ge.fillStyle=N.backgroundColor,Ge.fillRect(I.x1,I.y1,I.width,I.height),Ge=0;Ge<V.length;Ge++){var _t=C[Ge].startAngle,ze=C[Ge].endAngle;if(ze>_t){var Pe=.07*Se*Math.cos(C[Ge].midAngle),ct=.07*Se*Math.sin(C[Ge].midAngle),wt=!1;V[Ge].exploded?(1e-9<Math.abs(C[Ge].center.x-(Ce.x+Pe))||1e-9<Math.abs(C[Ge].center.y-(Ce.y+ct)))&&(C[Ge].center.x=Ce.x+Pe*qe,C[Ge].center.y=Ce.y+ct*qe,wt=!0):(0<Math.abs(C[Ge].center.x-Ce.x)||0<Math.abs(C[Ge].center.y-Ce.y))&&(C[Ge].center.x=Ce.x+Pe*(1-qe),C[Ge].center.y=Ce.y+ct*(1-qe),wt=!0),wt&&(Pe={},Pe.dataSeries=D,Pe.dataPoint=D.dataPoints[Ge],Pe.index=Ge,N.toolTip.highlightObjects([Pe])),Pt(N.plotArea.ctx,C[Ge].center,C[Ge].radius,V[Ge].color?V[Ge].color:D._colorSet[Ge%D._colorSet.length],D.type,_t,ze,D.fillOpacity,C[Ge].percentInnerRadius)}}for(qe=N.plotArea.ctx,qe.save(),qe.fillStyle="black",qe.strokeStyle="grey",qe.textBaseline="middle",qe.lineJoin="round",Ge=Ge=0;Ge<V.length;Ge++)_t=C[Ge],_t.indexLabelText&&(_t.indexLabelTextBlock.y-=_t.indexLabelTextBlock.height/2,ze=0,ze=_t.hemisphere==="left"?D.indexLabelPlacement!=="inside"?-(_t.indexLabelTextBlock.width+F):-_t.indexLabelTextBlock.width/2:D.indexLabelPlacement!=="inside"?F:-_t.indexLabelTextBlock.width/2,_t.indexLabelTextBlock.x+=ze,_t.indexLabelTextBlock.render(!0),_t.indexLabelTextBlock.x-=ze,_t.indexLabelTextBlock.y+=_t.indexLabelTextBlock.height/2,_t.indexLabelPlacement!=="inside"&&0<_t.indexLabelLineThickness&&(ze=_t.center.x+Se*Math.cos(_t.midAngle),Pe=_t.center.y+Se*Math.sin(_t.midAngle),qe.strokeStyle=_t.indexLabelLineColor,qe.lineWidth=_t.indexLabelLineThickness,qe.setLineDash&&qe.setLineDash(S(_t.indexLabelLineDashType,_t.indexLabelLineThickness)),qe.beginPath(),qe.moveTo(ze,Pe),qe.lineTo(_t.indexLabelTextBlock.x,_t.indexLabelTextBlock.y),qe.lineTo(_t.indexLabelTextBlock.x+(_t.hemisphere==="left"?-F:F),_t.indexLabelTextBlock.y),qe.stroke()),qe.lineJoin="miter");qe.save()}function f(qe,Ge){var _t=0,_t=qe.indexLabelTextBlock.y-qe.indexLabelTextBlock.height/2,ze=qe.indexLabelTextBlock.y+qe.indexLabelTextBlock.height/2,Pe=Ge.indexLabelTextBlock.y-Ge.indexLabelTextBlock.height/2,ct=Ge.indexLabelTextBlock.y+Ge.indexLabelTextBlock.height/2;return _t=Ge.indexLabelTextBlock.y>qe.indexLabelTextBlock.y?Pe-ze:_t-ct}function v(qe){for(var Ge=null,_t=1;_t<V.length;_t++)if(Ge=(qe+_t+C.length)%C.length,C[Ge].hemisphere!==C[qe].hemisphere){Ge=null;break}else{if(C[Ge].indexLabelText&&Ge!==qe&&(0>f(C[Ge],C[qe])||(C[qe].hemisphere==="right"?C[Ge].indexLabelTextBlock.y>=C[qe].indexLabelTextBlock.y:C[Ge].indexLabelTextBlock.y<=C[qe].indexLabelTextBlock.y)))break;Ge=null}return Ge}function k(qe,Ge,_t){if(_t=(_t||0)+1,1e3<_t)return 0;Ge=Ge||0;var ze=0,Pe=Ce.y-1*de,ct=Ce.y+1*de;if(0<=qe&&qe<V.length){var wt=C[qe];if(0>Ge&&wt.indexLabelTextBlock.y<Pe||0<Ge&&wt.indexLabelTextBlock.y>ct)return 0;var Ne=0,Sn=0,Sn=Ne=Ne=0;for(0>Ge?wt.indexLabelTextBlock.y-wt.indexLabelTextBlock.height/2>Pe&&wt.indexLabelTextBlock.y-wt.indexLabelTextBlock.height/2+Ge<Pe&&(Ge=-(Pe-(wt.indexLabelTextBlock.y-wt.indexLabelTextBlock.height/2+Ge))):wt.indexLabelTextBlock.y+wt.indexLabelTextBlock.height/2<Pe&&wt.indexLabelTextBlock.y+wt.indexLabelTextBlock.height/2+Ge>ct&&(Ge=wt.indexLabelTextBlock.y+wt.indexLabelTextBlock.height/2+Ge-ct),Ge=wt.indexLabelTextBlock.y+Ge,Pe=0,Pe=wt.hemisphere==="right"?Ce.x+Math.sqrt(Math.pow(de,2)-Math.pow(Ge-Ce.y,2)):Ce.x-Math.sqrt(Math.pow(de,2)-Math.pow(Ge-Ce.y,2)),Sn=Ce.x+Se*Math.cos(wt.midAngle),Ne=Ce.y+Se*Math.sin(wt.midAngle),Ne=Math.sqrt(Math.pow(Pe-Sn,2)+Math.pow(Ge-Ne,2)),Sn=Math.acos(Se/de),Ne=Math.acos((de*de+Se*Se-Ne*Ne)/(2*Se*de)),Ge=Ne<Sn?Ge-wt.indexLabelTextBlock.y:0,Pe=null,ct=1;ct<V.length;ct++)if(Pe=(qe-ct+C.length)%C.length,C[Pe].hemisphere!==C[qe].hemisphere){Pe=null;break}else{if(C[Pe].indexLabelText&&C[Pe].hemisphere===C[qe].hemisphere&&Pe!==qe&&(0>f(C[Pe],C[qe])||(C[qe].hemisphere==="right"?C[Pe].indexLabelTextBlock.y<=C[qe].indexLabelTextBlock.y:C[Pe].indexLabelTextBlock.y>=C[qe].indexLabelTextBlock.y)))break;Pe=null}Sn=Pe,Ne=v(qe),ct=Pe=0,0>Ge?(ct=wt.hemisphere==="right"?Sn:Ne,ze=Ge,ct!==null&&(Sn=-Ge,Ge=wt.indexLabelTextBlock.y-wt.indexLabelTextBlock.height/2-(C[ct].indexLabelTextBlock.y+C[ct].indexLabelTextBlock.height/2),Ge-Sn<W&&(Pe=-Sn,ct=k(ct,Pe,_t+1),+ct.toFixed(ye)>+Pe.toFixed(ye)&&(ze=Ge>W?-(Ge-W):-(Sn-(ct-Pe)))))):0<Ge&&(ct=wt.hemisphere==="right"?Ne:Sn,ze=Ge,ct!==null&&(Sn=Ge,Ge=C[ct].indexLabelTextBlock.y-C[ct].indexLabelTextBlock.height/2-(wt.indexLabelTextBlock.y+wt.indexLabelTextBlock.height/2),Ge-Sn<W&&(Pe=Sn,ct=k(ct,Pe,_t+1),+ct.toFixed(ye)<+Pe.toFixed(ye)&&(ze=Ge>W?Ge-W:Sn-(Pe-ct))))),ze&&(_t=wt.indexLabelTextBlock.y+ze,Ge=0,Ge=wt.hemisphere==="right"?Ce.x+Math.sqrt(Math.pow(de,2)-Math.pow(_t-Ce.y,2)):Ce.x-Math.sqrt(Math.pow(de,2)-Math.pow(_t-Ce.y,2)),wt.midAngle>Math.PI/2-H&&wt.midAngle<Math.PI/2+H?(Pe=(qe-1+C.length)%C.length,Pe=C[Pe],qe=C[(qe+1+C.length)%C.length],wt.hemisphere==="left"&&Pe.hemisphere==="right"&&Ge>Pe.indexLabelTextBlock.x?Ge=Pe.indexLabelTextBlock.x-15:wt.hemisphere==="right"&&qe.hemisphere==="left"&&Ge<qe.indexLabelTextBlock.x&&(Ge=qe.indexLabelTextBlock.x+15)):wt.midAngle>3*Math.PI/2-H&&wt.midAngle<3*Math.PI/2+H&&(Pe=(qe-1+C.length)%C.length,Pe=C[Pe],qe=C[(qe+1+C.length)%C.length],wt.hemisphere==="right"&&Pe.hemisphere==="left"&&Ge<Pe.indexLabelTextBlock.x?Ge=Pe.indexLabelTextBlock.x+15:wt.hemisphere==="left"&&qe.hemisphere==="right"&&Ge>qe.indexLabelTextBlock.x&&(Ge=qe.indexLabelTextBlock.x-15)),wt.indexLabelTextBlock.y=_t,wt.indexLabelTextBlock.x=Ge,wt.indexLabelAngle=Math.atan2(wt.indexLabelTextBlock.y-Ce.y,wt.indexLabelTextBlock.x-Ce.x))}return ze}function A(){var qe=N.plotArea.ctx;qe.fillStyle="grey",qe.strokeStyle="grey",qe.font="16px Arial",qe.textBaseline="middle";for(var ze=qe=0,Ge=0,_t=!0,ze=0;10>ze&&(1>ze||0<Ge);ze++){if((D.radius||!D.radius&&typeof D.innerRadius<"u"&&D.innerRadius!==null&&Se-Ge<=tt)&&(_t=!1),_t&&(Se-=Ge),Ge=0,D.indexLabelPlacement!=="inside"){for(de=Se*he,qe=0;qe<V.length;qe++){var Pe=C[qe];Pe.indexLabelTextBlock.x=Ce.x+de*Math.cos(Pe.midAngle),Pe.indexLabelTextBlock.y=Ce.y+de*Math.sin(Pe.midAngle),Pe.indexLabelAngle=Pe.midAngle,Pe.radius=Se,Pe.percentInnerRadius=xt}for(var ct,wt,qe=0;qe<V.length;qe++){var Pe=C[qe],Ne=v(qe);if(Ne!==null){ct=C[qe],wt=C[Ne];var Sn=0,Sn=f(ct,wt)-W;if(0>Sn){for(var ri=wt=0,wn=0;wn<V.length;wn++)wn!==qe&&C[wn].hemisphere===Pe.hemisphere&&(C[wn].indexLabelTextBlock.y<Pe.indexLabelTextBlock.y?wt++:ri++);wt=Sn/(wt+ri||1)*ri;var ri=-1*(Sn-wt),Gn=wn=0;Pe.hemisphere==="right"?(wn=k(qe,wt),ri=-1*(Sn-wn),Gn=k(Ne,ri),+Gn.toFixed(ye)<+ri.toFixed(ye)&&+wn.toFixed(ye)<=+wt.toFixed(ye)&&k(qe,-(ri-Gn))):(wn=k(Ne,wt),ri=-1*(Sn-wn),Gn=k(qe,ri),+Gn.toFixed(ye)<+ri.toFixed(ye)&&+wn.toFixed(ye)<=+wt.toFixed(ye)&&k(Ne,-(ri-Gn)))}}}}else for(qe=0;qe<V.length;qe++)Pe=C[qe],de=D.type==="pie"?.7*Se:.8*Se,Ne=Ce.x+de*Math.cos(Pe.midAngle),wt=Ce.y+de*Math.sin(Pe.midAngle),Pe.indexLabelTextBlock.x=Ne,Pe.indexLabelTextBlock.y=wt;for(qe=0;qe<V.length;qe++)Pe=C[qe],Ne=Pe.indexLabelTextBlock.measureText(),Ne.height!==0&&Ne.width!==0&&(Ne=Ne=0,Pe.hemisphere==="right"?(Ne=I.x2-(Pe.indexLabelTextBlock.x+Pe.indexLabelTextBlock.width+F),Ne*=-1):Ne=I.x1-(Pe.indexLabelTextBlock.x-Pe.indexLabelTextBlock.width-F),0<Ne&&(!_t&&Pe.indexLabelText&&(wt=Pe.hemisphere==="right"?I.x2-Pe.indexLabelTextBlock.x:Pe.indexLabelTextBlock.x-I.x1,.3*Pe.indexLabelTextBlock.maxWidth>wt?Pe.indexLabelText="":Pe.indexLabelTextBlock.maxWidth=.85*wt,.3*Pe.indexLabelTextBlock.maxWidth<wt&&(Pe.indexLabelTextBlock.x-=Pe.hemisphere==="right"?2:-2)),Math.abs(Pe.indexLabelTextBlock.y-Pe.indexLabelTextBlock.height/2-Ce.y)<Se||Math.abs(Pe.indexLabelTextBlock.y+Pe.indexLabelTextBlock.height/2-Ce.y)<Se)&&(Ne/=Math.abs(Math.cos(Pe.indexLabelAngle)),9<Ne&&(Ne*=.3),Ne>Ge&&(Ge=Ne)),Ne=Ne=0,0<Pe.indexLabelAngle&&Pe.indexLabelAngle<Math.PI?(Ne=I.y2-(Pe.indexLabelTextBlock.y+Pe.indexLabelTextBlock.height/2+5),Ne*=-1):Ne=I.y1-(Pe.indexLabelTextBlock.y-Pe.indexLabelTextBlock.height/2-5),0<Ne&&(!_t&&Pe.indexLabelText&&(wt=0<Pe.indexLabelAngle&&Pe.indexLabelAngle<Math.PI?-1:1,k(qe,Ne*wt)===0&&k(qe,2*wt)),Math.abs(Pe.indexLabelTextBlock.x-Ce.x)<Se&&(Ne/=Math.abs(Math.sin(Pe.indexLabelAngle)),9<Ne&&(Ne*=.3),Ne>Ge&&(Ge=Ne))));var $t=function(Vi,An,En){for(var Kt=[],Ai=0;Kt.push(C[An]),An!==En;An=(An+1+V.length)%V.length);for(Kt.sort(function(Qr,$i){return Qr.y-$i.y}),An=0;An<Kt.length&&(En=Kt[An],Ai<.7*Vi);An++)Ai+=En.indexLabelTextBlock.height,En.indexLabelTextBlock.text="",En.indexLabelText="",En.indexLabelTextBlock.measureText()};(function(){for(var Vi=-1,An=-1,En=0,Kt=!1,Ai=0;Ai<V.length;Ai++)if(Kt=!1,ct=C[Ai],ct.indexLabelText){var Qr=v(Ai);if(Qr!==null){var $i=C[Qr];Sn=0,Sn=f(ct,$i);var po;if(po=0>Sn){po=ct.indexLabelTextBlock.x;var Go=ct.indexLabelTextBlock.y-ct.indexLabelTextBlock.height/2,Mt=ct.indexLabelTextBlock.y+ct.indexLabelTextBlock.height/2,Ec=$i.indexLabelTextBlock.y-$i.indexLabelTextBlock.height/2,Ki=$i.indexLabelTextBlock.x+$i.indexLabelTextBlock.width,jl=$i.indexLabelTextBlock.y+$i.indexLabelTextBlock.height/2;po=!(ct.indexLabelTextBlock.x+ct.indexLabelTextBlock.width<$i.indexLabelTextBlock.x-F||po>Ki+F||Go>jl+F||Mt<Ec-F)}po?(0>Vi&&(Vi=Ai),Qr!==Vi&&(An=Qr,En+=-Sn),Ai%Math.max(V.length/10,3)===0&&(Kt=!0)):Kt=!0,Kt&&0<En&&0<=Vi&&0<=An&&($t(En,Vi,An),An=Vi=-1,En=0)}}0<En&&$t(En,Vi,An)})()}}function O(){if(N.plotArea.layoutManager.reset(),N.title&&(N.title.dockInsidePlotArea||N.title.horizontalAlign==="center"&&N.title.verticalAlign==="center")&&N.title.render(),N.subtitles)for(var qe=0;qe<N.subtitles.length;qe++){var Ge=N.subtitles[qe];(Ge.dockInsidePlotArea||Ge.horizontalAlign==="center"&&Ge.verticalAlign==="center")&&Ge.render()}N.legend&&(N.legend.dockInsidePlotArea||N.legend.horizontalAlign==="center"&&N.legend.verticalAlign==="center")&&(N.legend.setLayout(),N.legend.render())}var N=this;if(!(0>=c.dataSeriesIndexes.length)){var D=this.data[c.dataSeriesIndexes[0]],V=D.dataPoints,F=10,I=this.plotArea,C=D.dataPointEOs,W=2,de,he=1.3,H=20/180*Math.PI,ye=6,Ce={x:(I.x2+I.x1)/2,y:(I.y2+I.y1)/2},He=0;c=!1;for(var Ie=0;Ie<V.length;Ie++)He+=Math.abs(V[Ie].y),!c&&typeof V[Ie].indexLabel<"u"&&V[Ie].indexLabel!==null&&0<V[Ie].indexLabel.toString().length&&(c=!0),!c&&typeof V[Ie].label<"u"&&V[Ie].label!==null&&0<V[Ie].label.toString().length&&(c=!0);if(He!==0){c=c||typeof D.indexLabel<"u"&&D.indexLabel!==null&&0<D.indexLabel.toString().length;var Se=D.indexLabelPlacement!=="inside"&&c?.75*Math.min(I.width,I.height)/2:.92*Math.min(I.width,I.height)/2;D.radius&&(Se=bt(D.radius,Se));var tt=typeof D.innerRadius<"u"&&D.innerRadius!==null?bt(D.innerRadius,Se):.7*Se;D.radius=Se,D.type==="doughnut"&&(D.innerRadius=tt);var xt=Math.min(tt/Se,(Se-1)/Se);this.pieDoughnutClickHandler=function(qe){N.isAnimating||!h(qe.dataSeries.explodeOnClick)&&!qe.dataSeries.explodeOnClick||(qe=qe.dataPoint,qe.exploded=!qe.exploded,1<this.dataPoints.length&&N._animator.animate(0,500,function(Ge){g(Ge),O()}))},x(),A(),A(),A(),A(),this.disableToolTip=!0,this._animator.animate(0,this.animatedRender?this.animationDuration:0,function(qe){var Ge=N.plotArea.ctx;for(Ge.clearRect(I.x1,I.y1,I.width,I.height),Ge.fillStyle=N.backgroundColor,Ge.fillRect(I.x1,I.y1,I.width,I.height),qe=C[0].startAngle+2*Math.PI*qe,Ge=0;Ge<V.length;Ge++){var _t=Ge===0?C[Ge].startAngle:ze,ze=_t+(C[Ge].endAngle-C[Ge].startAngle),Pe=!1;ze>qe&&(ze=qe,Pe=!0);var ct=V[Ge].color?V[Ge].color:D._colorSet[Ge%D._colorSet.length];if(ze>_t&&Pt(N.plotArea.ctx,C[Ge].center,C[Ge].radius,ct,D.type,_t,ze,D.fillOpacity,C[Ge].percentInnerRadius),Pe)break}O()},function(){N.disableToolTip=!1,N._animator.animate(0,N.animatedRender?500:0,function(qe){g(qe),O()})})}}};var Qt=function(c,x,g,f){typeof g>"u"&&(g=1),0>=Math.round(x.y4-x.y1)||(c.save(),c.globalAlpha=g,c.beginPath(),c.moveTo(Math.round(x.x1),Math.round(x.y1)),c.lineTo(Math.round(x.x2),Math.round(x.y2)),c.lineTo(Math.round(x.x3),Math.round(x.y3)),c.lineTo(Math.round(x.x4),Math.round(x.y4)),x.x5!=="undefined"&&(c.lineTo(Math.round(x.x5),Math.round(x.y5)),c.lineTo(Math.round(x.x6),Math.round(x.y6))),c.closePath(),c.fillStyle=f||x.color,c.fill(),c.globalAplha=1,c.restore())};te.prototype.renderFunnel=function(c){function x(){for(var At=0,Ot=[],Jt=0;Jt<ye.length;Jt++){if(typeof ye[Jt].y>"u")return-1;ye[Jt].y=typeof ye[Jt].y=="number"?ye[Jt].y:0,At+=Math.abs(ye[Jt].y)}if(At===0)return-1;for(Jt=Ot[0]=0;Jt<ye.length;Jt++)Ot.push(Math.abs(ye[Jt].y)*tt/At);return Ot}function g(){var At=wn,Ot=ri,Jt=$t,ci=Vi,Ht,Dn;Ht=ze,Dn=Pe-wt,ci=Math.abs((Dn-Ht)*(Ot-At+(ci-Jt))/2),Jt=Vi-$t,Ht=Dn-Ht,Dn=Jt*(Dn-Pe),Dn=Math.abs(Dn),Dn=ci+Dn;for(var ci=[],kr=0,ki=0;ki<ye.length;ki++){if(typeof ye[ki].y>"u")return-1;ye[ki].y=typeof ye[ki].y=="number"?ye[ki].y:0,kr+=Math.abs(ye[ki].y)}if(kr===0)return-1;for(var pi=ci[0]=0,hn=0,Ei,Yi,Ot=Ot-At,pi=!1,ki=0;ki<ye.length;ki++)At=Math.abs(ye[ki].y)*Dn/kr,pi?Ei=Number(Jt.toFixed(3))==0?0:At/Jt:(Yi=$i*$i*Ot*Ot-4*Math.abs($i)*At,0>Yi?(Yi=Jt,pi=(Ot+Yi)*(Ht-hn)/2,At-=pi,Ei=Ht-hn,hn+=Ht-hn,Ei+=Yi==0?0:At/Yi,hn+=At/Yi,pi=!0):(Ei=(Math.abs($i)*Ot-Math.sqrt(Yi))/2,Yi=Ot-2*Ei/Math.abs($i),hn+=Ei,hn>Ht&&(hn-=Ei,Yi=Jt,pi=(Ot+Yi)*(Ht-hn)/2,At-=pi,Ei=Ht-hn,hn+=Ht-hn,Ei+=At/Yi,hn+=At/Yi,pi=!0),Ot=Yi)),ci.push(Ei);return ci}function f(){if(H&&ye){for(var At,Ot,Jt,ci,Ht,Dn,kr,ki,hn,Ei,Yi,pi,gn,bn,sn=[],di=[],Er={percent:null,total:null},$r=null,vn=0;vn<ye.length;vn++)bn=Kt[vn],bn=typeof bn.x5<"u"?(bn.y2+bn.y4)/2:(bn.y2+bn.y3)/2,bn=C(bn).x2+1,sn[vn]=_t-bn-Sn;bn=.5*Sn;for(var vn=0,fo=ye.length-1;vn<ye.length||0<=fo;vn++,fo--)Ot=H.reversed?ye[fo]:ye[vn],At=Ot.color?Ot.color:H.reversed?H._colorSet[(ye.length-1-vn)%H._colorSet.length]:H._colorSet[vn%H._colorSet.length],Jt=Ot.indexLabelPlacement||H.indexLabelPlacement||"outside",ci=Ot.indexLabelBackgroundColor||H.indexLabelBackgroundColor||(X?"transparent":null),Ht=Ot.indexLabelFontColor||H.indexLabelFontColor||"#979797",Dn=h(Ot.indexLabelFontSize)?H.indexLabelFontSize:Ot.indexLabelFontSize,kr=Ot.indexLabelFontStyle||H.indexLabelFontStyle||"normal",ki=Ot.indexLabelFontFamily||H.indexLabelFontFamily||"arial",hn=Ot.indexLabelFontWeight||H.indexLabelFontWeight||"normal",At=Ot.indexLabelLineColor||H.options.indexLabelLineColor||At,Ei=typeof Ot.indexLabelLineThickness=="number"?Ot.indexLabelLineThickness:typeof H.indexLabelLineThickness=="number"?H.indexLabelLineThickness:2,Yi=Ot.indexLabelLineDashType||H.indexLabelLineDashType||"solid",pi=typeof Ot.indexLabelWrap<"u"?Ot.indexLabelWrap:typeof H.indexLabelWrap<"u"?H.indexLabelWrap:!0,gn=H.dataPointIds[vn],he._eventManager.objectMap[gn]={id:gn,objectType:"dataPoint",dataPointIndex:vn,dataSeriesIndex:0,funnelSection:Kt[H.reversed?ye.length-1-vn:vn]},H.indexLabelPlacement==="inside"&&(sn[vn]=vn!==Qr?H.reversed?Kt[vn].x2-Kt[vn].x1:Kt[vn].x3-Kt[vn].x4:Kt[vn].x3-Kt[vn].x6,20>sn[vn]&&(sn[vn]=vn!==Qr&&H.reversed?Kt[vn].x3-Kt[vn].x4:Kt[vn].x2-Kt[vn].x1,sn[vn]/=2)),gn=Ot.indexLabelMaxWidth?Ot.indexLabelMaxWidth:H.options.indexLabelMaxWidth?H.indexLabelMaxWidth:sn[vn],(gn>sn[vn]||0>gn)&&(gn=sn[vn]),di[vn]=H.indexLabelPlacement==="inside"?Kt[vn].height:!1,Er=he.getPercentAndTotal(H,Ot),(H.indexLabelFormatter||Ot.indexLabelFormatter)&&($r={chart:he.options,dataSeries:H,dataPoint:Ot,total:Er.total,percent:Er.percent}),Ot=Ot.indexLabelFormatter?Ot.indexLabelFormatter($r):Ot.indexLabel?he.replaceKeywordsWithValue(Ot.indexLabel,Ot,H,vn):H.indexLabelFormatter?H.indexLabelFormatter($r):H.indexLabel?he.replaceKeywordsWithValue(H.indexLabel,Ot,H,vn):Ot.label?Ot.label:"",0>=Ei&&(Ei=0),1e3>gn&&1e3-gn<bn&&(gn+=1e3-gn),ct.roundRect||s(ct),Jt=new ue(ct,{fontSize:Dn,fontFamily:ki,fontColor:Ht,fontStyle:kr,fontWeight:hn,horizontalAlign:Jt,backgroundColor:ci,maxWidth:gn,maxHeight:di[vn]===!1?pi?4.28571429*Dn:1.5*Dn:di[vn],text:Ot,padding:Go}),Jt.measureText(),Mt.push({textBlock:Jt,id:H.reversed?fo:vn,isDirty:!1,lineColor:At,lineThickness:Ei,lineDashType:Yi,height:Jt.height<Jt.maxHeight?Jt.height:Jt.maxHeight,width:Jt.width<Jt.maxWidth?Jt.width:Jt.maxWidth})}}function v(){var At,Ot,Jt,ci,Ht,Dn=[];Ht=!1,Jt=0;for(var kr,ki=_t-ri-Sn/2,ki=H.options.indexLabelMaxWidth?H.indexLabelMaxWidth>ki?ki:H.indexLabelMaxWidth:ki,hn=Mt.length-1;0<=hn;hn--)kr=ye[Mt[hn].id],Jt=Mt[hn],ci=Jt.textBlock,Ot=(At=I(hn)<Kt.length?Mt[I(hn)]:null)?At.textBlock:null,Jt=Jt.height,At&&ci.y+Jt+Go>Ot.y&&(Ht=!0),Jt=kr.indexLabelMaxWidth||ki,(Jt>ki||0>Jt)&&(Jt=ki),Dn.push(Jt);if(Ht)for(hn=Mt.length-1;0<=hn;hn--)At=Kt[hn],Mt[hn].textBlock.maxWidth=Dn[Dn.length-(hn+1)],Mt[hn].textBlock.measureText(),Mt[hn].textBlock.x=_t-ki,Jt=Mt[hn].textBlock.height<Mt[hn].textBlock.maxHeight?Mt[hn].textBlock.height:Mt[hn].textBlock.maxHeight,Ht=Mt[hn].textBlock.width<Mt[hn].textBlock.maxWidth?Mt[hn].textBlock.width:Mt[hn].textBlock.maxWidth,Mt[hn].height=Jt,Mt[hn].width=Ht,Jt=typeof At.x5<"u"?(At.y2+At.y4)/2:(At.y2+At.y3)/2,Mt[hn].textBlock.y=Jt-Mt[hn].height/2,H.reversed?(Mt[hn].textBlock.y+Mt[hn].height>Gn+He&&(Mt[hn].textBlock.y=Gn+He-Mt[hn].height),Mt[hn].textBlock.y<En-He&&(Mt[hn].textBlock.y=En-He)):(Mt[hn].textBlock.y<Gn-He&&(Mt[hn].textBlock.y=Gn-He),Mt[hn].textBlock.y+Mt[hn].height>En+He&&(Mt[hn].textBlock.y=En+He-Mt[hn].height))}function k(){var At,Ot,Jt,ci;if(H.indexLabelPlacement!=="inside")for(var Ht=0;Ht<Kt.length;Ht++)Mt[Ht].textBlock.text.length==0?Mt[Ht].isDirty=!0:(At=Kt[Ht],Jt=typeof At.x5<"u"?(At.y2+At.y4)/2:(At.y2+At.y3)/2,Ot=H.reversed?typeof At.x5<"u"&&Jt>An?C(Jt).x2+1:(At.x2+At.x3)/2+1:typeof At.x5<"u"?Jt<An?C(Jt).x2+1:(At.x4+At.x3)/2+1:(At.x2+At.x3)/2+1,Mt[Ht].textBlock.x=Ot+Sn,Mt[Ht].textBlock.y=Jt-Mt[Ht].height/2,H.reversed?(Mt[Ht].textBlock.y+Mt[Ht].height>Gn+He&&(Mt[Ht].textBlock.y=Gn+He-Mt[Ht].height),Mt[Ht].textBlock.y<En-He&&(Mt[Ht].textBlock.y=En-He)):(Mt[Ht].textBlock.y<Gn-He&&(Mt[Ht].textBlock.y=Gn-He),Mt[Ht].textBlock.y+Mt[Ht].height>En+He&&(Mt[Ht].textBlock.y=En+He-Mt[Ht].height)));else for(Ht=0;Ht<Kt.length;Ht++)Mt[Ht].textBlock.text.length==0?Mt[Ht].isDirty=!0:(At=Kt[Ht],Ot=At.height,Jt=Mt[Ht].height,ci=Mt[Ht].width,Ot>=Jt?(Ot=Ht!=Qr?(At.x4+At.x3)/2-ci/2:(At.x5+At.x4)/2-ci/2,Jt=Ht!=Qr?(At.y1+At.y3)/2-Jt/2:(At.y1+At.y4)/2-Jt/2,Mt[Ht].textBlock.x=Ot,Mt[Ht].textBlock.y=Jt):Mt[Ht].isDirty=!0)}function A(){function At(gn,bn){var sn;if(0>gn||gn>=Mt.length)return 0;var di,Er=Mt[gn].textBlock;return 0>bn?(bn*=-1,di=F(gn),sn=O(di,gn),sn>=bn?(Er.y-=bn,bn):gn==0?(0<sn&&(Er.y-=sn),sn):(sn+=At(di,-(bn-sn)),0<sn&&(Er.y-=sn),sn)):(di=I(gn),sn=O(gn,di),sn>=bn?(Er.y+=bn,bn):gn==Kt.length-1?(0<sn&&(Er.y+=sn),sn):(sn+=At(di,bn-sn),0<sn&&(Er.y+=sn),sn))}function Ot(){var gn,bn,sn,di,Er=0,$r;di=(Pe-ze+2*He)/Ei,$r=Ei;for(var vn,fo=1;fo<$r;fo++){sn=fo*di;for(var Kr=Mt.length-1;0<=Kr;Kr--)!Mt[Kr].isDirty&&Mt[Kr].textBlock.y<sn&&Mt[Kr].textBlock.y+Mt[Kr].height>sn&&(vn=I(Kr),!(vn>=Mt.length-1)&&Mt[Kr].textBlock.y+Mt[Kr].height+Go>Mt[vn].textBlock.y&&(Mt[Kr].textBlock.y=Mt[Kr].textBlock.y+Mt[Kr].height-sn>sn-Mt[Kr].textBlock.y?sn+1:sn-Mt[Kr].height-1))}for(vn=Kt.length-1;0<vn;vn--)if(!Mt[vn].isDirty){if(sn=F(vn),0>sn&&(sn=0,Mt[sn].isDirty))break;if(Mt[vn].textBlock.y<Mt[sn].textBlock.y+Mt[sn].height){for(bn=bn||vn,di=vn,$r=0;Mt[di].textBlock.y<Mt[sn].textBlock.y+Mt[sn].height+Go;){if(gn=gn||Mt[di].textBlock.y+Mt[di].height,$r+=Mt[di].height,$r+=Go,di=sn,0>=di){di=0,$r+=Mt[di].height;break}if(sn=F(di),0>sn){di=0,$r+=Mt[di].height;break}}if(di!=vn){Er=Mt[di].textBlock.y,gn-=Er,gn=$r-gn,Er=Jt(gn,bn,di);break}}}return Er}function Jt(gn,bn,sn){var di=[],Er=0,$r=0;for(gn=Math.abs(gn);sn<=bn;sn++)di.push(Kt[sn]);for(di.sort(function(vn,fo){return vn.height-fo.height}),sn=0;sn<di.length&&(bn=di[sn],Er<gn);sn++)$r++,Er+=Mt[bn.id].height+Go,Mt[bn.id].textBlock.text="",Mt[bn.id].indexLabelText="",Mt[bn.id].isDirty=!0,Mt[bn.id].textBlock.measureText();return $r}for(var ci,Ht,Dn,kr,ki,hn,Ei=1,Yi=0;Yi<2*Ei;Yi++){for(var pi=Mt.length-1;0<=pi&&(0<=F(pi)&&F(pi),Dn=Mt[pi],kr=Dn.textBlock,hn=(ki=I(pi)<Kt.length?Mt[I(pi)]:null)?ki.textBlock:null,ci=+Dn.height.toFixed(6),Ht=+kr.y.toFixed(6),!(!Dn.isDirty&&ki&&Ht+ci+Go>+hn.y.toFixed(6)&&(ci=kr.y+ci+Go-hn.y,Ht=At(pi,-ci),Ht<ci&&(0<Ht&&(ci-=Ht),Ht=At(I(pi),ci),Ht!=ci))));pi--);Ot()}}function O(At,Ot){return(Ot<Kt.length?Mt[Ot].textBlock.y:H.reversed?Gn+He:En+He)-(0>At?H.reversed?En-He:Gn-He:Mt[At].textBlock.y+Mt[At].height+Go)}function N(At,Ot,Jt){var ci,Ht,Dn,kr=[],ki=He,hn=[];if(Ot!==-1&&(0<=Ki.indexOf(Ot)?(Ht=Ki.indexOf(Ot),Ki.splice(Ht,1)):(Ki.push(Ot),Ki=Ki.sort(function(pi,gn){return pi-gn}))),Ki.length===0)kr=jl;else{Ht=He*(Ki.length!=1||Ki[0]!=0&&Ki[0]!=Kt.length-1?2:1)/D();for(var Ei=0;Ei<Kt.length;Ei++){if(Ki.length==1&&Ki[0]==0){if(Ei===0){kr.push(jl[Ei]),ci=ki;continue}}else Ei===0&&(ci=-1*ki);kr.push(jl[Ei]+ci),(0<=Ki.indexOf(Ei)||Ei<Kt.length&&0<=Ki.indexOf(Ei+1))&&(ci+=Ht)}}Dn=function(){for(var pi=[],gn=0;gn<Kt.length;gn++)pi.push(kr[gn]-Kt[gn].y1);return pi}();var Yi={startTime:new Date().getTime(),duration:Jt||500,easingFunction:function(pi,gn,bn,sn){return pt.easing.easeOutQuart(pi,gn,bn,sn)},changeSection:function(pi){for(var gn,bn,sn=0;sn<Kt.length;sn++)gn=Dn[sn],bn=Kt[sn],gn*=pi,typeof hn[sn]>"u"&&(hn[sn]=0),0>hn&&(hn*=-1),bn.y1+=gn-hn[sn],bn.y2+=gn-hn[sn],bn.y3+=gn-hn[sn],bn.y4+=gn-hn[sn],bn.y5&&(bn.y5+=gn-hn[sn],bn.y6+=gn-hn[sn]),hn[sn]=gn}};At._animator.animate(0,Jt,function(pi){var gn=At.plotArea.ctx||At.ctx;Ec=!0,gn.clearRect(Ce.x1,Ce.y1,Ce.x2-Ce.x1,Ce.y2-Ce.y1),gn.fillStyle=At.backgroundColor,gn.fillRect(Ce.x1,Ce.y1,Ce.width,Ce.height),Yi.changeSection(pi,Ot);var bn={};for(bn.dataSeries=H,bn.dataPoint=H.reversed?H.dataPoints[ye.length-1-Ot]:H.dataPoints[Ot],bn.index=H.reversed?ye.length-1-Ot:Ot,At.toolTip.highlightObjects([bn]),bn=0;bn<Kt.length;bn++)Qt(gn,Kt[bn],H.fillOpacity);de(gn),qe&&(H.indexLabelPlacement!=="inside"?V(gn):k(),W(gn)),1<=pi&&(Ec=!1)},null,pt.easing.easeOutQuart)}function D(){for(var At=0,Ot=0;Ot<Kt.length-1;Ot++)(0<=Ki.indexOf(Ot)||0<=Ki.indexOf(Ot+1))&&At++;return At}function V(At){for(var Ot,Jt,ci,Ht,Dn=0;Dn<Kt.length;Dn++)Ht=Mt[Dn].lineThickness%2===1?.5:0,Jt=((Kt[Dn].y2+Kt[Dn].y4)/2<<0)+Ht,Ot=C(Jt).x2-1,ci=Mt[Dn].textBlock.x,Ht=(Mt[Dn].textBlock.y+Mt[Dn].height/2<<0)+Ht,Mt[Dn].isDirty||Mt[Dn].lineThickness==0||(At.strokeStyle=Mt[Dn].lineColor,At.lineWidth=Mt[Dn].lineThickness,At.setLineDash&&At.setLineDash(S(Mt[Dn].lineDashType,Mt[Dn].lineThickness)),At.beginPath(),At.moveTo(Ot,Jt),At.lineTo(ci,Ht),At.stroke())}function F(At){for(At-=1;-1<=At&&At!=-1&&Mt[At].isDirty;At--);return At}function I(At){for(At+=1;At<=Kt.length&&At!=Kt.length&&Mt[At].isDirty;At++);return At}function C(At){for(var Ot,Jt=0;Jt<ye.length;Jt++)if(Kt[Jt].y1<At&&Kt[Jt].y4>At){Ot=Kt[Jt];break}return Ot?(At=Ot.y6&&At>Ot.y6?Ot.x3+(Ot.x4-Ot.x3)/(Ot.y4-Ot.y3)*(At-Ot.y3):Ot.x2+(Ot.x3-Ot.x2)/(Ot.y3-Ot.y2)*(At-Ot.y2),{x1:At,x2:At}):-1}function W(At){for(var Ot=0;Ot<Kt.length;Ot++)Mt[Ot].isDirty||(At&&(Mt[Ot].textBlock.ctx=At),Mt[Ot].textBlock.render(!0))}function de(At){if(he.plotArea.layoutManager.reset(),At.roundRect||s(At),he.title&&(he.title.dockInsidePlotArea||he.title.horizontalAlign==="center"&&he.title.verticalAlign==="center")&&(he.title.ctx=At,he.title.render()),he.subtitles)for(var Ot=0;Ot<he.subtitles.length;Ot++){var Jt=he.subtitles[Ot];(Jt.dockInsidePlotArea||Jt.horizontalAlign==="center"&&Jt.verticalAlign==="center")&&(he.subtitles.ctx=At,Jt.render())}he.legend&&(he.legend.dockInsidePlotArea||he.legend.horizontalAlign==="center"&&he.legend.verticalAlign==="center")&&(he.legend.ctx=At,he.legend.setLayout(),he.legend.render()),le.fNg&&le.fNg(he)}var he=this;if(!(0>=c.dataSeriesIndexes.length)){for(var H=this.data[c.dataSeriesIndexes[0]],ye=H.dataPoints,Ce=this.plotArea,He=.025*Ce.width,Ie=.01*Ce.width,Se=0,tt=Ce.height-2*He,xt=Math.min(Ce.width-2*Ie,2.8*Ce.height),qe=!1,Ge=0;Ge<ye.length;Ge++)!qe&&typeof ye[Ge].indexLabel<"u"&&ye[Ge].indexLabel!==null&&0<ye[Ge].indexLabel.toString().length&&(qe=!0),!qe&&typeof ye[Ge].label<"u"&&ye[Ge].label!==null&&0<ye[Ge].label.toString().length&&(qe=!0),(!qe&&typeof H.indexLabelFormatter=="function"||typeof ye[Ge].indexLabelFormatter=="function")&&(qe=!0);qe=qe||typeof H.indexLabel<"u"&&H.indexLabel!==null&&0<H.indexLabel.toString().length,H.indexLabelPlacement!=="inside"&&qe||(Ie=(Ce.width-.75*xt)/2);var Ge=Ce.x1+Ie,_t=Ce.x2-Ie,ze=Ce.y1+He,Pe=Ce.y2-He,ct=c.targetCanvasCtx||this.plotArea.ctx||this.ctx;if(H.length!=0&&H.dataPoints&&H.visible&&ye.length!==0){var wt,Ne;c=75*xt/100;var Sn=30*(_t-c)/100;H.type==="funnel"?(wt=h(H.options.neckHeight)?.35*tt:H.neckHeight,Ne=h(H.options.neckWidth)?.25*c:H.neckWidth,typeof wt=="string"&&wt.match(/%$/)?(wt=parseInt(wt),wt=wt*tt/100):wt=parseInt(wt),typeof Ne=="string"&&Ne.match(/%$/)?(Ne=parseInt(Ne),Ne=Ne*c/100):Ne=parseInt(Ne),wt>tt?wt=tt:0>=wt&&(wt=0),Ne>c?Ne=c-.5:0>=Ne&&(Ne=0)):H.type==="pyramid"&&(Ne=wt=0,H.reversed=!H.reversed);var Ie=Ge+c/2,wn=Ge,ri=Ge+c,Gn=H.reversed?Pe:ze,$t=Ie-Ne/2,Vi=Ie+Ne/2,An=H.reversed?ze+wt:Pe-wt,En=H.reversed?ze:Pe;c=[];var Ie=[],Kt=[],xt=[],Ai=ze,Qr,$i=(An-Gn)/($t-wn),po=-$i,Ge=(H.valueRepresents?H.valueRepresents:"height")==="area"?g():x();if(Ge!==-1){if(H.reversed)for(xt.push(Ai),Ne=Ge.length-1;0<Ne;Ne--)Ai+=Ge[Ne],xt.push(Ai);else for(Ne=0;Ne<Ge.length;Ne++)Ai+=Ge[Ne],xt.push(Ai);if(H.reversed)for(Ne=0;Ne<Ge.length;Ne++)xt[Ne]<An?(c.push($t),Ie.push(Vi),Qr=Ne):(c.push((xt[Ne]-Gn+$i*wn)/$i),Ie.push((xt[Ne]-Gn+po*ri)/po));else for(Ne=0;Ne<Ge.length;Ne++)xt[Ne]<An?(c.push((xt[Ne]-Gn+$i*wn)/$i),Ie.push((xt[Ne]-Gn+po*ri)/po),Qr=Ne):(c.push($t),Ie.push(Vi));for(Ne=0;Ne<Ge.length-1;Ne++)Ai=H.reversed?ye[ye.length-1-Ne].color?ye[ye.length-1-Ne].color:H._colorSet[(ye.length-1-Ne)%H._colorSet.length]:ye[Ne].color?ye[Ne].color:H._colorSet[Ne%H._colorSet.length],Ne===Qr?Kt.push({x1:c[Ne],y1:xt[Ne],x2:Ie[Ne],y2:xt[Ne],x3:Vi,y3:An,x4:Ie[Ne+1],y4:xt[Ne+1],x5:c[Ne+1],y5:xt[Ne+1],x6:$t,y6:An,id:Ne,height:xt[Ne+1]-xt[Ne],color:Ai}):Kt.push({x1:c[Ne],y1:xt[Ne],x2:Ie[Ne],y2:xt[Ne],x3:Ie[Ne+1],y3:xt[Ne+1],x4:c[Ne+1],y4:xt[Ne+1],id:Ne,height:xt[Ne+1]-xt[Ne],color:Ai});var Go=2,Mt=[],Ec=!1,Ki=[],jl=[],Ge=!1;for(c=c=0,_(Ki),Ne=0;Ne<ye.length;Ne++)ye[Ne].exploded&&(Ge=!0,H.reversed?Ki.push(ye.length-1-Ne):Ki.push(Ne));if(ct.clearRect(Ce.x1,Ce.y1,Ce.width,Ce.height),ct.fillStyle=he.backgroundColor,ct.fillRect(Ce.x1,Ce.y1,Ce.width,Ce.height),qe&&H.visible&&(f(),k(),v(),H.indexLabelPlacement!=="inside")){for(A(),Ne=0;Ne<ye.length;Ne++)Mt[Ne].isDirty||(c=Mt[Ne].textBlock.x+Mt[Ne].width,c=(_t-c)/2,Ne==0&&(Se=c),Se>c&&(Se=c));for(Ne=0;Ne<Kt.length;Ne++)Kt[Ne].x1+=Se,Kt[Ne].x2+=Se,Kt[Ne].x3+=Se,Kt[Ne].x4+=Se,Kt[Ne].x5&&(Kt[Ne].x5+=Se,Kt[Ne].x6+=Se),Mt[Ne].textBlock.x+=Se}for(Ne=0;Ne<Kt.length;Ne++)Se=Kt[Ne],Qt(ct,Se,H.fillOpacity),jl.push(Se.y1);if(de(ct),qe&&H.visible&&(H.indexLabelPlacement==="inside"||he.animationEnabled||V(ct),he.animationEnabled||W()),!qe)for(Ne=0;Ne<ye.length;Ne++)Se=H.dataPointIds[Ne],c={id:Se,objectType:"dataPoint",dataPointIndex:Ne,dataSeriesIndex:0,funnelSection:Kt[H.reversed?ye.length-1-Ne:Ne]},he._eventManager.objectMap[Se]=c;return(!he.animationEnabled&&Ge||he.animationEnabled&&!he.animatedRender)&&N(he,-1,0),this.funnelPyramidClickHandler=function(Ht){var Dn=-1;!Ec&&!he.isAnimating&&(h(Ht.dataSeries.explodeOnClick)||Ht.dataSeries.explodeOnClick)&&(Dn=H.reversed?ye.length-1-Ht.dataPointIndex:Ht.dataPointIndex,0<=Dn)&&(Ht=Dn,(H.type==="funnel"||H.type==="pyramid")&&(H.reversed?ye[ye.length-1-Ht].exploded=!ye[ye.length-1-Ht].exploded:ye[Ht].exploded=!ye[Ht].exploded),N(he,Dn,500))},{source:ct,dest:this.plotArea.ctx,animationCallback:function(Ht,Dn){pt.fadeInAnimation(Ht,Dn),1<=Ht&&(N(he,-1,500),de(he.plotArea.ctx||he.ctx))},easingFunction:pt.easing.easeInQuad,animationBase:0}}}}},te.prototype.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(c){window.setTimeout(c,1e3/60)}}(),te.prototype.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,te.prototype.set=function(c,x,g){g=typeof g>"u"?!0:g,c==="options"?(this.options=x,g&&this.render()):te.base.set.call(this,c,x,g)},te.prototype.exportChart=function(c){c=typeof c>"u"?{}:c;var x=c.format?c.format:"png",g=c.fileName?c.fileName:this.exportFileName;if(c.toDataURL)return this.canvas.toDataURL("image/"+x);l(this.canvas,x,g)},te.prototype.print=function(){var c=this.exportChart({toDataURL:!0}),x=document.createElement("iframe");x.setAttribute("class","canvasjs-chart-print-frame"),x.setAttribute("style","position:absolute; width:100%; border: 0px; margin: 0px 0px 0px 0px; padding 0px 0px 0px 0px;"),x.style.height=this.height+"px",this._canvasJSContainer.appendChild(x);var g=this,f=x.contentWindow||x.contentDocument.document||x.contentDocument;f.document.open(),f.document.write(`<!DOCTYPE HTML>
<html><body style="margin: 0px 0px 0px 0px; padding: 0px 0px 0px 0px;"><img src="`+c+'"/><body/></html>'),f.document.close(),setTimeout(function(){f.focus(),f.print(),setTimeout(function(){g._canvasJSContainer.removeChild(x)},1e3)},500)},te.prototype.getPercentAndTotal=function(c,x){var g=null,f=null,v=null;if(0<=c.type.indexOf("stacked"))f=0,g=x.x.getTime?x.x.getTime():x.x,g in c.plotUnit.yTotals&&(f=c.plotUnit.yTotals[g],v=isNaN(x.y)?0:100*(x.y/f));else if(c.type==="pie"||c.type==="doughnut"||c.type==="funnel"||c.type==="pyramid"){for(g=f=0;g<c.dataPoints.length;g++)isNaN(c.dataPoints[g].y)||(f+=c.dataPoints[g].y);v=isNaN(x.y)?0:100*(x.y/f)}return{percent:v,total:f}},te.prototype.replaceKeywordsWithValue=function(c,x,g,f,v){var k=this;if(v=typeof v>"u"?0:v,(0<=g.type.indexOf("stacked")||g.type==="pie"||g.type==="doughnut"||g.type==="funnel"||g.type==="pyramid")&&(0<=c.indexOf("#percent")||0<=c.indexOf("#total"))){var N="#percent",O="#total",A=this.getPercentAndTotal(g,x),O=isNaN(A.total)?O:A.total,N=isNaN(A.percent)?N:A.percent;do{if(A="",g.percentFormatString)A=g.percentFormatString;else{var A="#,##0.",D=Math.max(Math.ceil(Math.log(1/Math.abs(N))/Math.LN10),2);(isNaN(D)||!isFinite(D))&&(D=2);for(var V=0;V<D;V++)A+="#";g.percentFormatString=A}c=c.replace("#percent",qt(N,A,k._cultureInfo)),c=c.replace("#total",qt(O,g.yValueFormatString?g.yValueFormatString:"#,##0.########",k._cultureInfo))}while(0<=c.indexOf("#percent")||0<=c.indexOf("#total"))}return c.replace(/\{.*?\}|"[^"]*"|'[^']*'/g,function(F){if(F[0]==='"'&&F[F.length-1]==='"'||F[0]==="'"&&F[F.length-1]==="'")return F.slice(1,F.length-1);F=r(F.slice(1,F.length-1)),F=F.replace("#index",v);var I=null;try{var C=F.match(/(.*?)\s*\[\s*(.*?)\s*\]/);C&&0<C.length&&(I=r(C[2]),F=r(C[1]))}catch{}if(C=null,F==="color")return g.type==="waterfall"?x.color?x.color:0<x.y?g.risingColor:g.fallingColor:g.type==="error"?g.color?g.color:g._colorSet[I%g._colorSet.length]:x.color?x.color:g.color?g.color:g._colorSet[f%g._colorSet.length];if(x.hasOwnProperty(F))C=x;else if(g.hasOwnProperty(F))C=g;else return"";if(C=C[F],I!==null&&(C=C[I]),F==="x")if(g.axisX.valueType==="dateTime"||g.xValueType==="dateTime"||x.x&&x.x.getTime){if(k.plotInfo.plotTypes[0].plotUnits[0].axisX&&!k.plotInfo.plotTypes[0].plotUnits[0].axisX.logarithmic)return Fi(C,x.xValueFormatString?x.xValueFormatString:g.xValueFormatString?g.xValueFormatString:g.xValueFormatString=k.axisX&&k.axisX.autoValueFormatString?k.axisX.autoValueFormatString:"DD MMM YY",k._cultureInfo)}else return qt(C,x.xValueFormatString?x.xValueFormatString:g.xValueFormatString?g.xValueFormatString:g.xValueFormatString="#,##0.########",k._cultureInfo);else return F==="y"?qt(C,x.yValueFormatString?x.yValueFormatString:g.yValueFormatString?g.yValueFormatString:g.yValueFormatString="#,##0.########",k._cultureInfo):F==="z"?qt(C,x.zValueFormatString?x.zValueFormatString:g.zValueFormatString?g.zValueFormatString:g.zValueFormatString="#,##0.########",k._cultureInfo):C})},t(Rt,me),Rt.prototype.setLayout=function(){var c=this.dockInsidePlotArea?this.chart.plotArea:this.chart,x=c.layoutManager.getFreeSpace(),g=null,f=0,v=0,k=0,A=0,O=this.markerMargin=this.chart.options.legend&&!h(this.chart.options.legend.markerMargin)?this.chart.options.legend.markerMargin:.3*this.fontSize;this.height=0;var N=[],D=[];this.verticalAlign==="top"||this.verticalAlign==="bottom"?(this.orientation="horizontal",g=this.verticalAlign,k=this.maxWidth=this.maxWidth!==null?this.maxWidth:x.width,A=this.maxHeight=this.maxHeight!==null?this.maxHeight:.5*x.height):this.verticalAlign==="center"&&(this.orientation="vertical",g=this.horizontalAlign,k=this.maxWidth=this.maxWidth!==null?this.maxWidth:.5*x.width,A=this.maxHeight=this.maxHeight!==null?this.maxHeight:x.height),this.errorMarkerColor=[];for(var V=0;V<this.dataSeries.length;V++){var F=this.dataSeries[V];if(F.dataPoints&&F.dataPoints.length)if(F.type!=="pie"&&F.type!=="doughnut"&&F.type!=="funnel"&&F.type!=="pyramid"){var I=F.legendMarkerType=F.legendMarkerType?F.legendMarkerType:F.type!=="line"&&F.type!=="stepLine"&&F.type!=="spline"&&F.type!=="scatter"&&F.type!=="bubble"||!F.markerType?F.type==="error"&&F._linkedSeries?F._linkedSeries.legendMarkerType?F._linkedSeries.legendMarkerType:Nt.getDefaultLegendMarker(F._linkedSeries.type):Nt.getDefaultLegendMarker(F.type):F.markerType,C=F.legendText?F.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries:F,dataPoint:null}):F.name,W=F.legendMarkerColor=F.legendMarkerColor?F.legendMarkerColor:F.markerColor?F.markerColor:F.type==="error"?h(F.whiskerColor)?F._colorSet[0]:F.whiskerColor:F._colorSet[0],de=F.markerSize||F.type!=="line"&&F.type!=="stepLine"&&F.type!=="spline"?.75*this.lineHeight:0,he=F.legendMarkerBorderColor?F.legendMarkerBorderColor:F.markerBorderColor,H=F.legendMarkerBorderThickness?F.legendMarkerBorderThickness:F.markerBorderThickness?Math.max(1,Math.round(.2*de)):0;F.type==="error"&&this.errorMarkerColor.push(W),C=this.chart.replaceKeywordsWithValue(C,F.dataPoints[0],F,V),I={markerType:I,markerColor:W,text:C,textBlock:null,chartType:F.type,markerSize:de,lineColor:F._colorSet[0],dataSeriesIndex:F.index,dataPointIndex:null,markerBorderColor:he,markerBorderThickness:H},N.push(I)}else for(var ye=0;ye<F.dataPoints.length;ye++){var Ce=F.dataPoints[ye],I=Ce.legendMarkerType?Ce.legendMarkerType:F.legendMarkerType?F.legendMarkerType:Nt.getDefaultLegendMarker(F.type),C=Ce.legendText?Ce.legendText:F.legendText?F.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries:F,dataPoint:Ce}):Ce.name?Ce.name:"DataPoint: "+(ye+1),W=Ce.legendMarkerColor?Ce.legendMarkerColor:F.legendMarkerColor?F.legendMarkerColor:Ce.color?Ce.color:F.color?F.color:F._colorSet[ye%F._colorSet.length],de=.75*this.lineHeight,he=Ce.legendMarkerBorderColor?Ce.legendMarkerBorderColor:F.legendMarkerBorderColor?F.legendMarkerBorderColor:Ce.markerBorderColor?Ce.markerBorderColor:F.markerBorderColor,H=Ce.legendMarkerBorderThickness?Ce.legendMarkerBorderThickness:F.legendMarkerBorderThickness?F.legendMarkerBorderThickness:Ce.markerBorderThickness||F.markerBorderThickness?Math.max(1,Math.round(.2*de)):0,C=this.chart.replaceKeywordsWithValue(C,Ce,F,ye),I={markerType:I,markerColor:W,text:C,textBlock:null,chartType:F.type,markerSize:de,dataSeriesIndex:V,dataPointIndex:ye,markerBorderColor:he,markerBorderThickness:H};(Ce.showInLegend||F.showInLegend&&Ce.showInLegend!==!1)&&N.push(I)}}if(this.reversed===!0&&N.reverse(),0<N.length){for(F=null,W=C=Ce=ye=0,Ce=this.itemWidth!==null?this.itemMaxWidth!==null?Math.min(this.itemWidth,this.itemMaxWidth,k):this.itemMaxWidth=Math.min(this.itemWidth,k):this.itemMaxWidth!==null?Math.min(this.itemMaxWidth,k):this.itemMaxWidth=k,de=de===0?.75*this.lineHeight:de,Ce-=de+O,V=0;V<N.length;V++)I=N[V],he=Ce,(I.chartType==="line"||I.chartType==="spline"||I.chartType==="stepLine")&&(he-=2*.1*this.lineHeight),0>=A||typeof A>"u"||0>=he||typeof he>"u"||(this.orientation==="horizontal"?(I.textBlock=new ue(this.ctx,{x:0,y:0,maxWidth:he,maxHeight:this.itemWrap?A:this.lineHeight,angle:0,text:I.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),I.textBlock.measureText(),this.itemWidth!==null&&(I.textBlock.width=this.itemWidth-(de+O+(I.chartType==="line"||I.chartType==="spline"||I.chartType==="stepLine"?2*.1*this.lineHeight:0))),(!F||F.width+Math.round(I.textBlock.width+de+O+(F.width===0?0:this.horizontalSpacing)+(I.chartType==="line"||I.chartType==="spline"||I.chartType==="stepLine"?2*.1*this.lineHeight:0))>k)&&(F={items:[],width:0},D.push(F),this.height+=C,C=0),C=Math.max(C,I.textBlock.height)):(I.textBlock=new ue(this.ctx,{x:0,y:0,maxWidth:Ce,maxHeight:this.itemWrap===!0?A:1.5*this.fontSize,angle:0,text:I.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),I.textBlock.measureText(),this.itemWidth!==null&&(I.textBlock.width=this.itemWidth-(de+O+(I.chartType==="line"||I.chartType==="spline"||I.chartType==="stepLine"?2*.1*this.lineHeight:0))),this.height<A-this.lineHeight?(F={items:[],width:0},D.push(F)):(F=D[ye],ye=(ye+1)%D.length),this.height+=I.textBlock.height),I.textBlock.x=F.width,I.textBlock.y=0,F.width+=Math.round(I.textBlock.width+de+O+(F.width===0?0:this.horizontalSpacing)+(I.chartType==="line"||I.chartType==="spline"||I.chartType==="stepLine"?2*.1*this.lineHeight:0)),F.items.push(I),this.width=Math.max(F.width,this.width),W=I.textBlock.width+(de+O+(I.chartType==="line"||I.chartType==="spline"||I.chartType==="stepLine"?2*.1*this.lineHeight:0)));this.itemWidth=W,this.height=this.itemWrap===!1?D.length*this.lineHeight:this.height+C,this.height=Math.min(A,this.height),this.width=Math.min(k,this.width)}for(this.verticalAlign==="top"?(v=this.horizontalAlign==="left"?x.x1:this.horizontalAlign==="right"?x.x2-this.width:x.x1+x.width/2-this.width/2,f=x.y1):this.verticalAlign==="center"?(v=this.horizontalAlign==="left"?x.x1:this.horizontalAlign==="right"?x.x2-this.width:x.x1+x.width/2-this.width/2,f=x.y1+x.height/2-this.height/2):this.verticalAlign==="bottom"&&(v=this.horizontalAlign==="left"?x.x1:this.horizontalAlign==="right"?x.x2-this.width:x.x1+x.width/2-this.width/2,f=x.y2-this.height),this.items=N,V=0;V<this.items.length;V++)I=N[V],I.id=++this.chart._eventManager.lastObjectId,this.chart._eventManager.objectMap[I.id]={id:I.id,objectType:"legendItem",legendItemIndex:V,dataSeriesIndex:I.dataSeriesIndex,dataPointIndex:I.dataPointIndex};this.markerSize=de,this.rows=D,0<N.length&&c.layoutManager.registerSpace(g,{width:this.width+2+2,height:this.height+5+5}),this.bounds={x1:v,y1:f,x2:v+this.width,y2:f+this.height}},Rt.prototype.render=function(){var c=this.bounds.x1,x=this.bounds.y1,g=this.markerMargin,f=this.maxWidth,v=this.maxHeight,k=this.markerSize,A=this.rows;(0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(c,x,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor);for(var O=0,N=0;N<A.length;N++){for(var D=A[N],V=0,F=0;F<D.items.length;F++){var I=D.items[F],C=I.textBlock.x+c+(F===0?.2*k:this.horizontalSpacing),W=x+O,de=C;if(this.chart.data[I.dataSeriesIndex].visible||(this.ctx.globalAlpha=.5),this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(c,x,f,Math.max(v-v%this.lineHeight,0)),this.ctx.clip(),(I.chartType==="line"||I.chartType==="stepLine"||I.chartType==="spline")&&(this.ctx.strokeStyle=I.lineColor,this.ctx.lineWidth=Math.ceil(this.lineHeight/8),this.ctx.beginPath(),this.ctx.moveTo(C-.1*this.lineHeight,W+this.lineHeight/2),this.ctx.lineTo(C+.85*this.lineHeight,W+this.lineHeight/2),this.ctx.stroke(),de-=.1*this.lineHeight),I.chartType==="error"){this.ctx.strokeStyle=this.errorMarkerColor[0],this.ctx.lineWidth=k/8,this.ctx.beginPath();var he=C-.08*this.lineHeight+.1*this.lineHeight,H=W+.15*this.lineHeight,ye=.7*this.lineHeight,Ce=ye+.02*this.lineHeight;this.ctx.moveTo(he,H),this.ctx.lineTo(he+ye,H),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(he+ye/2,H),this.ctx.lineTo(he+ye/2,H+Ce),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(he,H+Ce),this.ctx.lineTo(he+ye,H+Ce),this.ctx.stroke(),this.errorMarkerColor.shift()}It.drawMarker(C+k/2,W+this.lineHeight/2,this.ctx,I.markerType,I.chartType==="error"||I.chartType==="line"||I.chartType==="spline"?I.markerSize/2:I.markerSize,I.markerColor,I.markerBorderColor,I.markerBorderThickness),I.textBlock.x=C+g+k,(I.chartType==="line"||I.chartType==="stepLine"||I.chartType==="spline")&&(I.textBlock.x+=.1*this.lineHeight),I.textBlock.y=Math.round(W+this.lineHeight/2),I.textBlock.render(!0),this.ctx.restore(),V=0<F?Math.max(V,I.textBlock.height):I.textBlock.height,this.chart.data[I.dataSeriesIndex].visible||(this.ctx.globalAlpha=1),C=d(I.id),this.ghostCtx.fillStyle=C,this.ghostCtx.beginPath(),this.ghostCtx.fillRect(de,I.textBlock.y-this.lineHeight/2,I.textBlock.x+I.textBlock.width-de,I.textBlock.height),I.x1=this.chart._eventManager.objectMap[I.id].x1=de,I.y1=this.chart._eventManager.objectMap[I.id].y1=I.textBlock.y-this.lineHeight/2,I.x2=this.chart._eventManager.objectMap[I.id].x2=I.textBlock.x+I.textBlock.width,I.y2=this.chart._eventManager.objectMap[I.id].y2=I.textBlock.y+I.textBlock.height-this.lineHeight/2}O+=V}},t(Nt,me),Nt.prototype.getDefaultAxisPlacement=function(){var c=this.type;return c==="column"||c==="line"||c==="stepLine"||c==="spline"||c==="area"||c==="stepArea"||c==="splineArea"||c==="stackedColumn"||c==="stackedLine"||c==="bubble"||c==="scatter"||c==="stackedArea"||c==="stackedColumn100"||c==="stackedLine100"||c==="stackedArea100"||c==="candlestick"||c==="ohlc"||c==="rangeColumn"||c==="rangeArea"||c==="rangeSplineArea"||c==="boxAndWhisker"||c==="waterfall"?"normal":c==="bar"||c==="stackedBar"||c==="stackedBar100"||c==="rangeBar"?"xySwapped":c==="pie"||c==="doughnut"||c==="funnel"||c==="pyramid"?"none":(c!=="error"&&window.console.log("Unknown Chart Type: "+c),null)},Nt.getDefaultLegendMarker=function(c){return c==="column"||c==="stackedColumn"||c==="stackedLine"||c==="bar"||c==="stackedBar"||c==="stackedBar100"||c==="bubble"||c==="scatter"||c==="stackedColumn100"||c==="stackedLine100"||c==="stepArea"||c==="candlestick"||c==="ohlc"||c==="rangeColumn"||c==="rangeBar"||c==="rangeArea"||c==="rangeSplineArea"||c==="boxAndWhisker"||c==="waterfall"?"square":c==="line"||c==="stepLine"||c==="spline"||c==="pie"||c==="doughnut"?"circle":c==="area"||c==="splineArea"||c==="stackedArea"||c==="stackedArea100"||c==="funnel"||c==="pyramid"?"triangle":c==="error"?"none":(window.console.log("Unknown Chart Type: "+c),null)},Nt.prototype.getDataPointAtX=function(c,x){if(!this.dataPoints||this.dataPoints.length===0)return null;var g={dataPoint:null,distance:1/0,index:NaN},f=null,v=0,k=0,A=1,O=1/0,N=0,D=0,V=0;for(this.chart.plotInfo.axisPlacement!=="none"&&(this.axisX.logarithmic?(V=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x),V=1<V?Math.min(Math.max((this.dataPoints.length-1)/V*Math.log(c/this.dataPoints[0].x)>>0,0),this.dataPoints.length):0):(V=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,V=0<V?Math.min(Math.max((this.dataPoints.length-1)/V*(c-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0));;){if(k=0<A?V+v:V-v,0<=k&&k<this.dataPoints.length){var f=this.dataPoints[k],F=this.axisX.logarithmic?f.x>c?f.x/c:c/f.x:Math.abs(f.x-c);if(F<g.distance&&(g.dataPoint=f,g.distance=F,g.index=k),f=F,f<=O?O=f:0<A?N++:D++,1e3<N&&1e3<D)break}else if(0>V-v&&V+v>=this.dataPoints.length)break;A===-1?(v++,A=1):A=-1}return x||g.dataPoint.x!==c?x&&g.dataPoint!==null?g:null:g},Nt.prototype.getDataPointAtXY=function(c,x,g){if(!this.dataPoints||this.dataPoints.length===0||c<this.chart.plotArea.x1||c>this.chart.plotArea.x2||x<this.chart.plotArea.y1||x>this.chart.plotArea.y2)return null;g=g||!1;var f=[],v=0,k=0,A=1,O=!1,N=1/0,D=0,V=0,I=0;if(this.chart.plotInfo.axisPlacement!=="none")if(I=(this.chart.axisX[0]?this.chart.axisX[0]:this.chart.axisX2[0]).getXValueAt({x:c,y:x}),this.axisX.logarithmic)var F=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x),I=1<F?Math.min(Math.max((this.dataPoints.length-1)/F*Math.log(I/this.dataPoints[0].x)>>0,0),this.dataPoints.length):0;else F=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,I=0<F?Math.min(Math.max((this.dataPoints.length-1)/F*(I-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0;for(;;){if(k=0<A?I+v:I-v,0<=k&&k<this.dataPoints.length){var F=this.chart._eventManager.objectMap[this.dataPointIds[k]],C=this.dataPoints[k],W=null;if(F){switch(this.type){case"column":case"stackedColumn":case"stackedColumn100":case"bar":case"stackedBar":case"stackedBar100":case"rangeColumn":case"rangeBar":case"waterfall":case"error":c>=F.x1&&c<=F.x2&&x>=F.y1&&x<=F.y2&&(f.push({dataPoint:C,dataPointIndex:k,dataSeries:this,distance:Math.min(Math.abs(F.x1-c),Math.abs(F.x2-c),Math.abs(F.y1-x),Math.abs(F.y2-x))}),O=!0);break;case"line":case"stepLine":case"spline":case"area":case"stepArea":case"stackedArea":case"stackedArea100":case"splineArea":case"scatter":var de=z("markerSize",C,this)||4,he=g?20:de,W=Math.sqrt(Math.pow(F.x1-c,2)+Math.pow(F.y1-x,2));W<=he&&f.push({dataPoint:C,dataPointIndex:k,dataSeries:this,distance:W}),F=Math.abs(F.x1-c),F<=N?N=F:0<A?D++:V++,W<=de/2&&(O=!0);break;case"rangeArea":case"rangeSplineArea":de=z("markerSize",C,this)||4,he=g?20:de,W=Math.min(Math.sqrt(Math.pow(F.x1-c,2)+Math.pow(F.y1-x,2)),Math.sqrt(Math.pow(F.x1-c,2)+Math.pow(F.y2-x,2))),W<=he&&f.push({dataPoint:C,dataPointIndex:k,dataSeries:this,distance:W}),F=Math.abs(F.x1-c),F<=N?N=F:0<A?D++:V++,W<=de/2&&(O=!0);break;case"bubble":de=F.size,W=Math.sqrt(Math.pow(F.x1-c,2)+Math.pow(F.y1-x,2)),W<=de/2&&(f.push({dataPoint:C,dataPointIndex:k,dataSeries:this,distance:W}),O=!0);break;case"pie":case"doughnut":de=F.center,he=this.type==="doughnut"?F.percentInnerRadius*F.radius:0,W=Math.sqrt(Math.pow(de.x-c,2)+Math.pow(de.y-x,2)),W<F.radius&&W>he&&(W=Math.atan2(x-de.y,c-de.x),0>W&&(W+=2*Math.PI),W=Number(((180*(W/Math.PI)%360+360)%360).toFixed(12)),de=Number(((180*(F.startAngle/Math.PI)%360+360)%360).toFixed(12)),he=Number(((180*(F.endAngle/Math.PI)%360+360)%360).toFixed(12)),he===0&&1<F.endAngle&&(he=360),de>=he&&C.y!==0&&(he+=360,W<de&&(W+=360)),W>de&&W<he&&(f.push({dataPoint:C,dataPointIndex:k,dataSeries:this,distance:0}),O=!0));break;case"funnel":case"pyramid":W=F.funnelSection,x>W.y1&&x<W.y4&&(W.y6?x>W.y6?(k=W.x6+(W.x5-W.x6)/(W.y5-W.y6)*(x-W.y6),W=W.x3+(W.x4-W.x3)/(W.y4-W.y3)*(x-W.y3)):(k=W.x1+(W.x6-W.x1)/(W.y6-W.y1)*(x-W.y1),W=W.x2+(W.x3-W.x2)/(W.y3-W.y2)*(x-W.y2)):(k=W.x1+(W.x4-W.x1)/(W.y4-W.y1)*(x-W.y1),W=W.x2+(W.x3-W.x2)/(W.y3-W.y2)*(x-W.y2)),c>k&&c<W&&(f.push({dataPoint:C,dataPointIndex:F.dataPointIndex,dataSeries:this,distance:0}),O=!0));break;case"boxAndWhisker":(c>=F.x1-F.borderThickness/2&&c<=F.x2+F.borderThickness/2&&x>=F.y4-F.borderThickness/2&&x<=F.y1+F.borderThickness/2||Math.abs(F.x2-c+F.x1-c)<F.borderThickness&&x>=F.y1&&x<=F.y4)&&(f.push({dataPoint:C,dataPointIndex:k,dataSeries:this,distance:Math.min(Math.abs(F.x1-c),Math.abs(F.x2-c),Math.abs(F.y2-x),Math.abs(F.y3-x))}),O=!0);break;case"candlestick":(c>=F.x1-F.borderThickness/2&&c<=F.x2+F.borderThickness/2&&x>=F.y2-F.borderThickness/2&&x<=F.y3+F.borderThickness/2||Math.abs(F.x2-c+F.x1-c)<F.borderThickness&&x>=F.y1&&x<=F.y4)&&(f.push({dataPoint:C,dataPointIndex:k,dataSeries:this,distance:Math.min(Math.abs(F.x1-c),Math.abs(F.x2-c),Math.abs(F.y2-x),Math.abs(F.y3-x))}),O=!0);break;case"ohlc":(Math.abs(F.x2-c+F.x1-c)<F.borderThickness&&x>=F.y2&&x<=F.y3||c>=F.x1&&c<=(F.x2+F.x1)/2&&x>=F.y1-F.borderThickness/2&&x<=F.y1+F.borderThickness/2||c>=(F.x1+F.x2)/2&&c<=F.x2&&x>=F.y4-F.borderThickness/2&&x<=F.y4+F.borderThickness/2)&&(f.push({dataPoint:C,dataPointIndex:k,dataSeries:this,distance:Math.min(Math.abs(F.x1-c),Math.abs(F.x2-c),Math.abs(F.y2-x),Math.abs(F.y3-x))}),O=!0)}if(O||1e3<D&&1e3<V)break}}else if(0>I-v&&I+v>=this.dataPoints.length)break;A===-1?(v++,A=1):A=-1}for(c=null,x=0;x<f.length;x++)c?f[x].distance<=c.distance&&(c=f[x]):c=f[x];return c},Nt.prototype.getMarkerProperties=function(c,x,g,f){var v=this.dataPoints;return{x,y:g,ctx:f,type:v[c].markerType?v[c].markerType:this.markerType,size:v[c].markerSize?v[c].markerSize:this.markerSize,color:v[c].markerColor?v[c].markerColor:this.markerColor?this.markerColor:v[c].color?v[c].color:this.color?this.color:this._colorSet[c%this._colorSet.length],borderColor:v[c].markerBorderColor?v[c].markerBorderColor:this.markerBorderColor?this.markerBorderColor:null,borderThickness:v[c].markerBorderThickness?v[c].markerBorderThickness:this.markerBorderThickness?this.markerBorderThickness:null}},t(St,me),St.prototype.createExtraLabelsForLog=function(c){if(c=(c||0)+1,!(5<c)){var x=this.logLabelValues[0]||this.intervalStartPosition;if(Math.log(this.range)/Math.log(x/this.viewportMinimum)<this.noTicks-1){for(var g=St.getNiceNumber((x-this.viewportMinimum)/Math.min(Math.max(2,this.noTicks-this.logLabelValues.length),3),!0),f=Math.ceil(this.viewportMinimum/g)*g;f<x;f+=g)f<this.viewportMinimum||this.logLabelValues.push(f);this.logLabelValues.sort(a),this.createExtraLabelsForLog(c)}}},St.prototype.createLabels=function(){var c,x,g=0,A=0,f,v=0,k=0,A=0,A=this.interval,O=0,N,D=.6*this.chart.height,V;c=!1;var F=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],I=F.length?h(this.scaleBreaks.firstBreakIndex)?0:this.scaleBreaks.firstBreakIndex:0;if(this.type!=="axisX"||this.valueType!=="dateTime"||this.logarithmic){if(f=this.viewportMaximum,this.labels){c=Math.ceil(A);for(var A=Math.ceil(this.intervalStartPosition),C=!1,g=A;g<this.viewportMaximum;g+=c)if(this.labels[g])C=!0;else{C=!1;break}C&&(this.interval=c,this.intervalStartPosition=A)}if(this.logarithmic&&!this.equidistantInterval)for(this.logLabelValues||(this.logLabelValues=[],this.createExtraLabelsForLog()),A=0,C=I;A<this.logLabelValues.length;A++)if(g=this.logLabelValues[A],g<this.viewportMinimum)A++;else{for(;C<F.length&&g>F[C].endValue;C++);c=C<F.length&&g>=F[C].startValue&&g<=F[C].endValue,V=g,c||(c=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:V,label:this.labels[V]?this.labels[V]:null}):this.type==="axisX"&&this.labels[V]?this.labels[V]:qt(V,this.valueFormatString,this.chart._cultureInfo),c=new ue(this.ctx,{x:0,y:0,maxWidth:v,maxHeight:k,angle:this.labelAngle,text:this.prefix+c+this.suffix,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:V,textBlock:c,effectiveHeight:null}))}for(C=I,g=this.intervalStartPosition;g<=f;g=parseFloat(1e-12>this.interval?this.logarithmic&&this.equidistantInterval?g*Math.pow(this.logarithmBase,this.interval):g+this.interval:(this.logarithmic&&this.equidistantInterval?g*Math.pow(this.logarithmBase,this.interval):g+this.interval).toFixed(12))){for(;C<F.length&&g>F[C].endValue;C++);c=C<F.length&&g>=F[C].startValue&&g<=F[C].endValue,V=g,c||(c=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:V,label:this.labels[V]?this.labels[V]:null}):this.type==="axisX"&&this.labels[V]?this.labels[V]:qt(V,this.valueFormatString,this.chart._cultureInfo),c=new ue(this.ctx,{x:0,y:0,maxWidth:v,maxHeight:k,angle:this.labelAngle,text:this.prefix+c+this.suffix,horizontalAlign:"left",backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:V,textBlock:c,effectiveHeight:null}))}}else for(this.intervalStartPosition=this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval),f=e(new Date(this.viewportMaximum),this.interval,this.intervalType),C=I,g=this.intervalStartPosition;g<f;e(g,A,this.intervalType)){for(c=g.getTime();C<F.length&&c>F[C].endValue;C++);V=c,c=C<F.length&&c>=F[C].startValue&&c<=F[C].endValue,c||(c=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:new Date(V),label:this.labels[V]?this.labels[V]:null}):this.type==="axisX"&&this.labels[V]?this.labels[V]:Fi(V,this.valueFormatString,this.chart._cultureInfo),c=new ue(this.ctx,{x:0,y:0,maxWidth:v,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxHeight:k,angle:this.labelAngle,text:this.prefix+c+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:V,textBlock:c,effectiveHeight:null,breaksLabelType:void 0}))}for(this._position==="bottom"||this._position==="top"?(O=this.logarithmic&&!this.equidistantInterval&&2<=this._labels.length?this.lineCoordinates.width*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.width/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*vt[this.intervalType+"Duration"]*this.interval,v=typeof this.options.labelMaxWidth>"u"?.5*this.chart.width>>0:this.options.labelMaxWidth,this.chart.panEnabled||(k=typeof this.options.labelWrap>"u"||this.labelWrap?.8*this.chart.height>>0:1.5*this.labelFontSize)):(this._position==="left"||this._position==="right")&&(O=this.logarithmic&&!this.equidistantInterval&&2<=this._labels.length?this.lineCoordinates.height*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.height/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*vt[this.intervalType+"Duration"]*this.interval,this.chart.panEnabled||(v=typeof this.options.labelMaxWidth>"u"?.3*this.chart.width>>0:this.options.labelMaxWidth),k=typeof this.options.labelWrap>"u"||this.labelWrap?.3*this.chart.height>>0:1.5*this.labelFontSize),A=0;A<this._labels.length;A++){c=this._labels[A].textBlock,c.maxWidth=v,c.maxHeight=k;var W=c.measureText();N=W.height}if(f=[],I=F=0,this.labelAutoFit||this.options.labelAutoFit){if(h(this.labelAngle)||(this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>this.labelAngle?this.labelAngle-=180:270<=this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360)),this._position==="bottom"||this._position==="top")if(v=.9*O>>0,I=0,!this.chart.panEnabled&&1<=this._labels.length){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=v,this.sessionVariables.labelMaxHeight=k,this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,g=0;g<this._labels.length;g++)if(!this._labels[g].breaksLabelType){c=this._labels[g].textBlock;for(var de,C=c.text.split(" "),A=0;A<C.length;A++)V=C[A],this.ctx.font=c.fontStyle+" "+c.fontWeight+" "+c.fontSize+"px "+c.fontFamily,V=this.ctx.measureText(V),V.width>I&&(de=g,I=V.width)}for(g=0,g=this.intervalStartPosition<this.viewportMinimum?1:0;g<this._labels.length;g++)if(!this._labels[g].breaksLabelType){for(c=this._labels[g].textBlock,W=c.measureText(),C=g+1;C<this._labels.length;C++)if(!this._labels[C].breaksLabelType){x=this._labels[C].textBlock,x=x.measureText();break}if(f.push(c.height),this.sessionVariables.labelMaxHeight=Math.max.apply(Math,f),Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.sin(Math.PI/180*Math.abs(this.labelAngle)),A=v*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(k-c.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),h(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&this.options.labelAngle!==0){if(this.sessionVariables.labelMaxHeight=this.labelAngle===0?k:Math.min((A-v*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),A),V=(D-(N+c.fontSize/2)*Math.cos(Math.PI/180*Math.abs(-25)))/Math.sin(Math.PI/180*Math.abs(-25)),!h(this.options.labelWrap))this.labelWrap?h(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=Math.min(Math.max(v,I),V),this.sessionVariables.labelWrap=this.labelWrap,W.width+x.width>>0>2*v&&(this.sessionVariables.labelAngle=-25)):(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>v?-25:this.sessionVariables.labelAngle):h(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=k,this.sessionVariables.labelMaxWidth=v,W.width+x.width>>0>2*v&&(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=V)):(this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>v?-25:this.sessionVariables.labelAngle,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=k,this.sessionVariables.labelWrap=this.labelWrap);else if(h(this.options.labelWrap)){if(!h(this.options.labelMaxWidth))this.options.labelMaxWidth<v?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=A):(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=k);else if(!h(x)){if(A=W.width+x.width>>0,C=this.labelFontSize,I<v)A-2*v>F&&(F=A-2*v,A>=2*v&&A<2.2*v?(this.sessionVariables.labelMaxWidth=v,h(this.options.labelFontSize)&&12<C&&(C=Math.floor(12/13*C),c.measureText()),this.sessionVariables.labelFontSize=h(this.options.labelFontSize)?C:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):A>=2.2*v&&A<2.8*v?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=V,this.sessionVariables.labelFontSize=C):A>=2.8*v&&A<3.2*v?(this.sessionVariables.labelMaxWidth=Math.max(v,I),this.sessionVariables.labelWrap=!0,h(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),c.measureText()),this.sessionVariables.labelFontSize=h(this.options.labelFontSize)?C:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):A>=3.2*v&&A<3.6*v?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=V,this.sessionVariables.labelFontSize=this.labelFontSize):A>3.6*v&&A<5*v?(h(this.options.labelFontSize)&&12<C&&(C=Math.floor(12/13*C),c.measureText()),this.sessionVariables.labelFontSize=h(this.options.labelFontSize)?C:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=V):A>5*v&&(this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=v,this.sessionVariables.labelFontSize=C,this.sessionVariables.labelMaxHeight=k,this.sessionVariables.labelAngle=this.labelAngle));else if(de===g&&(de===0&&I+this._labels[de+1].textBlock.measureText().width-2*v>F||de===this._labels.length-1&&I+this._labels[de-1].textBlock.measureText().width-2*v>F||0<de&&de<this._labels.length-1&&I+this._labels[de+1].textBlock.measureText().width-2*v>F&&I+this._labels[de-1].textBlock.measureText().width-2*v>F))F=de===0?I+this._labels[de+1].textBlock.measureText().width-2*v:I+this._labels[de-1].textBlock.measureText().width-2*v,this.sessionVariables.labelFontSize=h(this.options.labelFontSize)?C:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=V;else if(F===0)for(this.sessionVariables.labelFontSize=h(this.options.labelFontSize)?C:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,A=0;A<this._labels.length;A++)c=this._labels[A].textBlock,c.maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(v,I),V),W=c.measureText(),A<this._labels.length-1&&(C=A+1,x=this._labels[C].textBlock,x.maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(v,I),V),x=x.measureText(),W.width+x.width>>0>2*v&&(this.sessionVariables.labelAngle=-25))}}}else this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxHeight=this.labelAngle===0?k:Math.min((A-v*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),A),V=this.labelAngle!=0?(D-(N+c.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)):v,this.sessionVariables.labelMaxHeight=k=this.labelWrap?(D-V*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)):1.5*this.labelFontSize,h(this.options.labelWrap)?h(this.options.labelWrap)&&(this.labelWrap&&!h(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:V,this.sessionVariables.labelMaxHeight=k):(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=V,this.sessionVariables.labelMaxHeight=A<.9*O?.9*O:A,this.sessionVariables.labelWrap=this.labelWrap)):(this.options.labelWrap?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:V):(h(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:V,this.sessionVariables.labelWrap=this.labelWrap),this.sessionVariables.labelMaxHeight=k)}for(A=0;A<this._labels.length;A++)c=this._labels[A].textBlock,c.maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,c.fontSize=this.sessionVariables.labelFontSize,c.angle=this.labelAngle=this.sessionVariables.labelAngle,c.wrap=this.labelWrap=this.sessionVariables.labelWrap,c.maxHeight=this.sessionVariables.labelMaxHeight,c.measureText()}else for(g=0;g<this._labels.length;g++)c=this._labels[g].textBlock,c.maxWidth=this.labelMaxWidth=h(this.options.labelMaxWidth)?this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,c.fontSize=this.labelFontSize=h(this.options.labelFontSize)?this.sessionVariables.labelFontSize:this.options.labelFontSize,c.angle=this.labelAngle=h(this.options.labelAngle)?this.sessionVariables.labelAngle:this.labelAngle,c.wrap=this.labelWrap=h(this.options.labelWrap)?this.sessionVariables.labelWrap:this.options.labelWrap,c.maxHeight=this.sessionVariables.labelMaxHeight,c.measureText();else if(this._position==="left"||this._position==="right")if(v=h(this.options.labelMaxWidth)?.3*this.chart.width>>0:this.options.labelMaxWidth,k=typeof this.options.labelWrap>"u"||this.labelWrap?.3*this.chart.height>>0:1.5*this.labelFontSize,!this.chart.panEnabled&&1<=this._labels.length){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=v,this.sessionVariables.labelMaxHeight=k,this.sessionVariables.labelAngle=h(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,g=0;g<this._labels.length;g++)if(!this._labels[g].breaksLabelType){for(c=this._labels[g].textBlock,W=c.measureText(),C=g+1;C<this._labels.length;C++)if(!this._labels[C].breaksLabelType){x=this._labels[C].textBlock,x=x.measureText();break}f.push(c.height),this.sessionVariables.labelMaxHeight=Math.max.apply(Math,f),A=v*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(k-c.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.sin(Math.PI/180*Math.abs(this.labelAngle)),h(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&this.options.labelAngle!==0?h(this.options.labelWrap)?h(this.options.labelWrap)&&(h(this.options.labelMaxWidth)?h(x)||(O=W.height+x.height>>0,O-2*k>I&&(I=O-2*k,O>=2*k&&O<2.4*k?(h(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),c.measureText()),this.sessionVariables.labelMaxHeight=k,this.sessionVariables.labelFontSize=h(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize):O>=2.4*k&&O<2.8*k?(this.sessionVariables.labelMaxHeight=A,this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelWrap=!0):O>=2.8*k&&O<3.2*k?(this.sessionVariables.labelMaxHeight=k,this.sessionVariables.labelWrap=!0,h(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),c.measureText()),this.sessionVariables.labelFontSize=h(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelAngle=h(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):O>=3.2*k&&O<3.6*k?(this.sessionVariables.labelMaxHeight=A,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelFontSize=this.labelFontSize):O>3.6*k&&O<10*k?(h(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),c.measureText()),this.sessionVariables.labelFontSize=h(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxWidth=v,this.sessionVariables.labelMaxHeight=k,this.sessionVariables.labelAngle=h(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):O>10*k&&O<50*k&&(h(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),c.measureText()),this.sessionVariables.labelFontSize=h(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxHeight=k,this.sessionVariables.labelMaxWidth=v,this.sessionVariables.labelAngle=h(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle))):(this.sessionVariables.labelMaxHeight=k,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth)):(this.sessionVariables.labelMaxWidth=this.labelWrap?this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth:this.labelMaxWidth?this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth:v,this.sessionVariables.labelMaxHeight=k):(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=this.labelAngle===0?v:Math.min((A-k*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)),k),h(this.options.labelWrap)?h(this.options.labelWrap)&&(this.labelWrap&&!h(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth>this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=A):(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:v,this.sessionVariables.labelMaxHeight=this.labelAngle===0?k:A,h(this.options.labelMaxWidth)&&(this.sessionVariables.labelAngle=this.labelAngle))):this.options.labelWrap?(this.sessionVariables.labelMaxHeight=this.labelAngle===0?k:A,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=v):(this.sessionVariables.labelMaxHeight=k,h(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap))}for(A=0;A<this._labels.length;A++)c=this._labels[A].textBlock,c.maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,c.fontSize=this.labelFontSize=this.sessionVariables.labelFontSize,c.angle=this.labelAngle=this.sessionVariables.labelAngle,c.wrap=this.labelWrap=this.sessionVariables.labelWrap,c.maxHeight=this.sessionVariables.labelMaxHeight,c.measureText()}else for(g=0;g<this._labels.length;g++)c=this._labels[g].textBlock,c.maxWidth=this.labelMaxWidth=h(this.options.labelMaxWidth)?this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,c.fontSize=this.labelFontSize=h(this.options.labelFontSize)?this.sessionVariables.labelFontSize:this.options.labelFontSize,c.angle=this.labelAngle=h(this.options.labelAngle)?this.sessionVariables.labelAngle:this.labelAngle,c.wrap=this.labelWrap=h(this.options.labelWrap)?this.sessionVariables.labelWrap:this.options.labelWrap,c.maxHeight=this.sessionVariables.labelMaxHeight,c.measureText()}for(g=0;g<this.stripLines.length;g++){var v=this.stripLines[g],he;v.labelPlacement==="outside"?(k=this.sessionVariables.labelMaxWidth,(this._position==="bottom"||this._position==="top")&&(he=h(v.options.labelWrap)?this.sessionVariables.labelMaxHeight:v.labelWrap?.8*this.chart.height>>0:1.5*this.labelFontSize),(this._position==="left"||this._position==="right")&&(he=h(v.options.labelWrap)?this.sessionVariables.labelMaxHeight:v.labelWrap?.8*this.chart.width>>0:1.5*this.labelFontSize),h(v.labelBackgroundColor)&&(v.labelBackgroundColor="#EEEEEE")):(k=this._position==="bottom"||this._position==="top"?.9*this.chart.width>>0:.9*this.chart.height>>0,he=h(v.options.labelWrap)||v.labelWrap?this._position==="bottom"||this._position==="top"?.8*this.chart.width>>0:.8*this.chart.height>>0:1.5*this.labelFontSize,h(v.labelBackgroundColor)&&(h(v.startValue)&&v.startValue!==0?v.labelBackgroundColor=X?"transparent":null:v.labelBackgroundColor="#EEEEEE")),c=new ue(this.ctx,{x:0,y:0,backgroundColor:v.labelBackgroundColor,borderColor:v.labelBorderColor,borderThickness:v.labelBorderThickness,cornerRadius:v.labelCornerRadius,maxWidth:v.options.labelMaxWidth?v.options.labelMaxWidth:k,maxHeight:he,angle:this.labelAngle,text:v.labelFormatter?v.labelFormatter({chart:this.chart,axis:this,stripLine:v}):v.label,horizontalAlign:"left",fontSize:v.labelPlacement==="outside"?v.options.labelFontSize?v.labelFontSize:this.labelFontSize:v.labelFontSize,fontFamily:v.labelPlacement==="outside"?v.options.labelFontFamily?v.labelFontFamily:this.labelFontFamily:v.labelFontFamily,fontWeight:v.labelPlacement==="outside"?v.options.labelFontWeight?v.labelFontWeight:this.labelFontWeight:v.labelFontWeight,fontColor:v.labelFontColor||v.color,fontStyle:v.labelPlacement==="outside"?v.options.labelFontStyle?v.labelFontStyle:this.fontWeight:v.labelFontStyle,textBaseline:"middle"}),this._stripLineLabels.push({position:v.value,textBlock:c,effectiveHeight:null,stripLine:v})}},St.prototype.createLabelsAndCalculateWidth=function(){var c=0,x=0;this._labels=[],this._stripLineLabels=[];var g=this.chart.isNavigator?0:5;if(this._position==="left"||this._position==="right"){for(this.createLabels(),x=0;x<this._labels.length;x++){var f=this._labels[x].textBlock,v=f.measureText(),k=0,k=this.labelAngle===0?v.width:v.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+(v.height-f.fontSize/2)*Math.sin(Math.PI/180*Math.abs(this.labelAngle));c<k&&(c=k),this._labels[x].effectiveWidth=k}for(x=0;x<this._stripLineLabels.length;x++)this._stripLineLabels[x].stripLine.labelPlacement==="outside"&&this._stripLineLabels[x].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[x].stripLine.value<=this.viewportMaximum&&(f=this._stripLineLabels[x].textBlock,v=f.measureText(),k=this.labelAngle===0?v.width:v.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+(v.height-f.fontSize/2)*Math.sin(Math.PI/180*Math.abs(this.labelAngle)),c<k&&(c=k),this._stripLineLabels[x].effectiveWidth=k)}return x=this.title?this._titleTextBlock.measureText().height+2:0,f=this.labelPlacement==="inside"?f=x+g:x+c+this.tickLength+g},St.prototype.createLabelsAndCalculateHeight=function(){var c=0;this._labels=[],this._stripLineLabels=[];var x,g=0,f=this.chart.isNavigator?0:5;if(this.createLabels(),this._position==="bottom"||this._position==="top"){for(g=0;g<this._labels.length;g++){x=this._labels[g].textBlock;var v=x.measureText(),k=0,k=this.labelAngle===0?v.height:v.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(v.height-x.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle));c<k&&(c=k),this._labels[g].effectiveHeight=k}for(g=0;g<this._stripLineLabels.length;g++)this._stripLineLabels[g].stripLine.labelPlacement==="outside"&&this._stripLineLabels[g].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[g].stripLine.value<=this.viewportMaximum&&(x=this._stripLineLabels[g].textBlock,v=x.measureText(),k=this.labelAngle===0?v.height:v.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(v.height-x.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),c<k&&(c=k),this._stripLineLabels[g].effectiveHeight=k)}return x=this.title?this._titleTextBlock.measureText().height+2:0,g=this.labelPlacement==="inside"?g=x+f:x+c+this.tickLength+f},St.setLayout=function(c,x,g,f,v,k){var A,O,N,D,V=c[0]?c[0].chart:x[0].chart,F=V.isNavigator?0:10,I=V._axes;if(c&&0<c.length)for(var C=0;C<c.length;C++)c[C]&&c[C].calculateAxisParameters();if(x&&0<x.length)for(C=0;C<x.length;C++)x[C].calculateAxisParameters();if(g&&0<g.length)for(C=0;C<g.length;C++)g[C].calculateAxisParameters();if(f&&0<f.length)for(C=0;C<f.length;C++)f[C].calculateAxisParameters();for(C=0;C<I.length;C++)if(I[C]&&I[C].scaleBreaks&&I[C].scaleBreaks._appliedBreaks.length)for(var W=I[C].scaleBreaks._appliedBreaks,de=0;de<W.length&&!(W[de].startValue>I[C].viewportMaximum);de++)W[de].endValue<I[C].viewportMinimum||(h(I[C].scaleBreaks.firstBreakIndex)&&(I[C].scaleBreaks.firstBreakIndex=de),W[de].startValue>=I[C].viewPortMinimum&&(I[C].scaleBreaks.lastBreakIndex=de));for(var he=de=0,H=0,ye=0,Ce=0,He=0,Ie=0,Se,tt,xt=O=0,qe,Ge,_t,W=qe=Ge=_t=!1,C=0;C<I.length;C++)I[C]&&I[C].title&&(I[C]._titleTextBlock=new ue(I[C].ctx,{text:I[C].title,horizontalAlign:"center",fontSize:I[C].titleFontSize,fontFamily:I[C].titleFontFamily,fontWeight:I[C].titleFontWeight,fontColor:I[C].titleFontColor,fontStyle:I[C].titleFontStyle,borderColor:I[C].titleBorderColor,borderThickness:I[C].titleBorderThickness,backgroundColor:I[C].titleBackgroundColor,cornerRadius:I[C].titleCornerRadius,textBaseline:"top"}));for(C=0;C<I.length;C++)if(I[C].title)switch(I[C]._position){case"left":I[C]._titleTextBlock.maxWidth=I[C].titleMaxWidth||k.height,I[C]._titleTextBlock.maxHeight=I[C].titleWrap?.8*k.width:1.5*I[C].titleFontSize,I[C]._titleTextBlock.angle=-90;break;case"right":I[C]._titleTextBlock.maxWidth=I[C].titleMaxWidth||k.height,I[C]._titleTextBlock.maxHeight=I[C].titleWrap?.8*k.width:1.5*I[C].titleFontSize,I[C]._titleTextBlock.angle=90;break;default:I[C]._titleTextBlock.maxWidth=I[C].titleMaxWidth||k.width,I[C]._titleTextBlock.maxHeight=I[C].titleWrap?.8*k.height:1.5*I[C].titleFontSize,I[C]._titleTextBlock.angle=0}if(v==="normal"){for(var ye=[],Ce=[],He=[],Ie=[],ze=[],Pe=[],ct=[],wt=[];4>de;){var Ne=0,Sn=0,wn=0,ri=0,Gn=v=0,$t=0,Vi=0,An=0,En=0,Kt=0,Ai=0;if(g&&0<g.length)for(He=[],C=Kt=0;C<g.length;C++)He.push(Math.ceil(g[C]?g[C].createLabelsAndCalculateWidth():0)),Kt+=He[C],$t+=g[C]&&!V.isNavigator?g[C].margin:0;else He.push(Math.ceil(g[0]?g[0].createLabelsAndCalculateWidth():0));if(ct.push(He),f&&0<f.length)for(Ie=[],C=Ai=0;C<f.length;C++)Ie.push(Math.ceil(f[C]?f[C].createLabelsAndCalculateWidth():0)),Ai+=Ie[C],Vi+=f[C]?f[C].margin:0;else Ie.push(Math.ceil(f[0]?f[0].createLabelsAndCalculateWidth():0));if(wt.push(Ie),A=Math.round(k.x1+Kt+$t),N=Math.round(k.x2-Ai-Vi>V.width-F?V.width-F:k.x2-Ai-Vi),c&&0<c.length)for(ye=[],C=An=0;C<c.length;C++)c[C]&&(c[C].lineCoordinates={}),c[C].lineCoordinates.width=Math.abs(N-A),c[C].title&&(c[C]._titleTextBlock.maxWidth=0<c[C].titleMaxWidth&&c[C].titleMaxWidth<c[C].lineCoordinates.width?c[C].titleMaxWidth:c[C].lineCoordinates.width),ye.push(Math.ceil(c[C]?c[C].createLabelsAndCalculateHeight():0)),An+=ye[C],v+=c[C]&&!V.isNavigator?c[C].margin:0;else ye.push(Math.ceil(c[0]?c[0].createLabelsAndCalculateHeight():0));if(ze.push(ye),x&&0<x.length)for(Ce=[],C=En=0;C<x.length;C++)x[C]&&(x[C].lineCoordinates={}),x[C].lineCoordinates.width=Math.abs(N-A),x[C].title&&(x[C]._titleTextBlock.maxWidth=0<x[C].titleMaxWidth&&x[C].titleMaxWidth<x[C].lineCoordinates.width?x[C].titleMaxWidth:x[C].lineCoordinates.width),Ce.push(Math.ceil(x[C]?x[C].createLabelsAndCalculateHeight():0)),En+=Ce[C],Gn+=x[C]&&!V.isNavigator?x[C].margin:0;else Ce.push(Math.ceil(x[0]?x[0].createLabelsAndCalculateHeight():0));if(Pe.push(Ce),c&&0<c.length)for(C=0;C<c.length;C++)c[C]&&(c[C].lineCoordinates.x1=A,N=Math.round(k.x2-Ai-Vi>V.width-F?V.width-F:k.x2-Ai-Vi),c[C]._labels&&1<c[C]._labels.length&&(O=D=0,D=c[C]._labels[1],O=c[C].valueType==="dateTime"?c[C]._labels[c[C]._labels.length-2]:c[C]._labels[c[C]._labels.length-1],he=D.textBlock.width*Math.cos(Math.PI/180*Math.abs(D.textBlock.angle))+(D.textBlock.height-O.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(D.textBlock.angle)),H=O.textBlock.width*Math.cos(Math.PI/180*Math.abs(O.textBlock.angle))+(O.textBlock.height-O.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(O.textBlock.angle))),!c[C]||!c[C].labelAutoFit||h(Se)||h(tt)||V.isNavigator||(O=0,0<c[C].labelAngle?tt+H>N&&(O+=0<c[C].labelAngle?tt+H-N-Ai:0):0>c[C].labelAngle?Se-he<A&&Se-he<c[C].viewportMinimum&&(xt=A-($t+c[C].tickLength+He+Se-he+c[C].labelFontSize/2)):c[C].labelAngle===0&&(tt+H>N&&(O=tt+H/2-N-Ai),Se-he<A&&Se-he<c[C].viewportMinimum&&(xt=A-$t-c[C].tickLength-He-Se+he/2)),c[C].viewportMaximum===c[C].maximum&&c[C].viewportMinimum===c[C].minimum&&0<c[C].labelAngle&&0<O?N-=O:c[C].viewportMaximum===c[C].maximum&&c[C].viewportMinimum===c[C].minimum&&0>c[C].labelAngle&&0<xt?A+=xt:c[C].viewportMaximum===c[C].maximum&&c[C].viewportMinimum===c[C].minimum&&c[C].labelAngle===0&&(0<xt&&(A+=xt),0<O&&(N-=O))),V.panEnabled?An=V.sessionVariables.axisX.height:V.sessionVariables.axisX.height=An,O=Math.round(k.y2-An-v+Ne),D=Math.round(k.y2),c[C].lineCoordinates.x2=N,c[C].lineCoordinates.width=N-A,c[C].lineCoordinates.y1=O,c[C].lineCoordinates.y2=O,c[C].bounds={x1:A,y1:O,x2:N,y2:D-(An+v-ye[C]-Ne),width:N-A,height:D-O}),Ne+=ye[C]+c[C].margin;if(x&&0<x.length)for(C=0;C<x.length;C++)x[C].lineCoordinates.x1=Math.round(k.x1+Kt+$t),x[C].lineCoordinates.x2=Math.round(k.x2-Ai-Vi>V.width-F?V.width-F:k.x2-Ai-Vi),x[C].lineCoordinates.width=Math.abs(N-A),x[C]._labels&&1<x[C]._labels.length&&(D=x[C]._labels[1],O=x[C].valueType==="dateTime"?x[C]._labels[x[C]._labels.length-2]:x[C]._labels[x[C]._labels.length-1],he=D.textBlock.width*Math.cos(Math.PI/180*Math.abs(D.textBlock.angle))+(D.textBlock.height-O.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(D.textBlock.angle)),H=O.textBlock.width*Math.cos(Math.PI/180*Math.abs(O.textBlock.angle))+(O.textBlock.height-O.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(O.textBlock.angle))),V.panEnabled?En=V.sessionVariables.axisX2.height:V.sessionVariables.axisX2.height=En,O=Math.round(k.y1),D=Math.round(k.y2+x[C].margin),x[C].lineCoordinates.y1=O+En+Gn-Sn,x[C].lineCoordinates.y2=O,x[C].bounds={x1:A,y1:O+(En+Gn-Ce[C]-Sn),x2:N,y2:D,width:N-A,height:D-O},Sn+=Ce[C]+x[C].margin;if(g&&0<g.length)for(C=0;C<g.length;C++)$t=V.isNavigator?0:10,g[C]&&(A=Math.round(c[0]?c[0].lineCoordinates.x1:x[0].lineCoordinates.x1),$t=g[C]._labels&&0<g[C]._labels.length?g[C]._labels[g[C]._labels.length-1].textBlock.height/2:F,O=Math.round(k.y1+En+Gn<Math.max($t,F)?Math.max($t,F):k.y1+En+Gn),N=Math.round(c[0]?c[0].lineCoordinates.x1:x[0].lineCoordinates.x1),$t=0<c.length?0:g[C]._labels&&0<g[C]._labels.length?g[C]._labels[0].textBlock.height/2:F,D=Math.round(k.y2-An-v-$t),g[C].lineCoordinates={x1:N-wn,y1:O,x2:N-wn,y2:D,height:Math.abs(D-O)},g[C].bounds={x1:A-(He[C]+wn),y1:O,x2:N,y2:D,width:N-A,height:D-O},g[C].title&&(g[C]._titleTextBlock.maxWidth=0<g[C].titleMaxWidth&&g[C].titleMaxWidth<g[C].lineCoordinates.height?g[C].titleMaxWidth:g[C].lineCoordinates.height),wn+=He[C]+g[C].margin);if(f&&0<f.length)for(C=0;C<f.length;C++)f[C]&&(A=Math.round(c[0]?c[0].lineCoordinates.x2:x[0].lineCoordinates.x2),N=Math.round(A),$t=f[C]._labels&&0<f[C]._labels.length?f[C]._labels[f[C]._labels.length-1].textBlock.height/2:0,O=Math.round(k.y1+En+Gn<Math.max($t,F)?Math.max($t,F):k.y1+En+Gn),$t=0<c.length?0:f[C]._labels&&0<f[C]._labels.length?f[C]._labels[0].textBlock.height/2:0,D=Math.round(k.y2-(An+v+$t)),f[C].lineCoordinates={x1:A+ri,y1:O,x2:A+ri,y2:D,height:Math.abs(D-O)},f[C].bounds={x1:A,y1:O,x2:N+(Ie[C]+ri),y2:D,width:N-A,height:D-O},f[C].title&&(f[C]._titleTextBlock.maxWidth=0<f[C].titleMaxWidth&&f[C].titleMaxWidth<f[C].lineCoordinates.height?f[C].titleMaxWidth:f[C].lineCoordinates.height),ri+=Ie[C]+f[C].margin);if(c&&0<c.length)for(C=0;C<c.length;C++)c[C]&&(c[C].calculateValueToPixelConversionParameters(),c[C].calculateBreaksSizeInValues(),c[C]._labels&&1<c[C]._labels.length&&(Se=(c[C].logarithmic?Math.log(c[C]._labels[1].position/c[C].viewportMinimum)/c[C].conversionParameters.lnLogarithmBase:c[C]._labels[1].position-c[C].viewportMinimum)*Math.abs(c[C].conversionParameters.pixelPerUnit)+c[C].lineCoordinates.x1,A=c[C]._labels[c[C]._labels.length-(c[C].valueType==="dateTime"?2:1)].position,A=c[C].getApparentDifference(c[C].viewportMinimum,A),tt=c[C].logarithmic?(1<A?Math.log(A)/c[C].conversionParameters.lnLogarithmBase*Math.abs(c[C].conversionParameters.pixelPerUnit):0)+c[C].lineCoordinates.x1:(0<A?A*Math.abs(c[C].conversionParameters.pixelPerUnit):0)+c[C].lineCoordinates.x1));if(x&&0<x.length)for(C=0;C<x.length;C++)x[C].calculateValueToPixelConversionParameters(),x[C].calculateBreaksSizeInValues(),x[C]._labels&&1<x[C]._labels.length&&(Se=(x[C].logarithmic?Math.log(x[C]._labels[1].position/x[C].viewportMinimum)/x[C].conversionParameters.lnLogarithmBase:x[C]._labels[1].position-x[C].viewportMinimum)*Math.abs(x[C].conversionParameters.pixelPerUnit)+x[C].lineCoordinates.x1,A=x[C]._labels[x[C]._labels.length-(x[C].valueType==="dateTime"?2:1)].position,A=x[C].getApparentDifference(x[C].viewportMinimum,A),tt=x[C].logarithmic?(1<A?Math.log(A)/x[C].conversionParameters.lnLogarithmBase*Math.abs(x[C].conversionParameters.pixelPerUnit):0)+x[C].lineCoordinates.x1:(0<A?A*Math.abs(x[C].conversionParameters.pixelPerUnit):0)+x[C].lineCoordinates.x1);for(C=0;C<I.length;C++)I[C].type==="axisY"&&(I[C].calculateValueToPixelConversionParameters(),I[C].calculateBreaksSizeInValues());if(0<de){if(c&&0<c.length)for(C=0;C<c.length;C++)W=ze[de-1][C]===ze[de][C];else W=!0;if(x&&0<x.length)for(C=0;C<x.length;C++)qe=Pe[de-1][C]===Pe[de][C];else qe=!0;if(g&&0<g.length)for(C=0;C<g.length;C++)Ge=ct[de-1][C]===ct[de][C];else Ge=!0;if(f&&0<f.length)for(C=0;C<f.length;C++)_t=wt[de-1][C]===wt[de][C];else _t=!0}if(W&&qe&&Ge&&_t)break;de++}if(c&&0<c.length)for(C=0;C<c.length;C++)c[C].calculateStripLinesThicknessInValues(),c[C].calculateBreaksInPixels();if(x&&0<x.length)for(C=0;C<x.length;C++)x[C].calculateStripLinesThicknessInValues(),x[C].calculateBreaksInPixels();if(g&&0<g.length)for(C=0;C<g.length;C++)g[C].calculateStripLinesThicknessInValues(),g[C].calculateBreaksInPixels();if(f&&0<f.length)for(C=0;C<f.length;C++)f[C].calculateStripLinesThicknessInValues(),f[C].calculateBreaksInPixels()}else{for(F=[],Se=[],xt=[],he=[],tt=[],H=[],ze=[],Pe=[];4>de;){if(An=ri=Sn=wn=Vi=$t=Gn=v=wt=ct=Ne=En=0,c&&0<c.length)for(xt=[],C=ri=0;C<c.length;C++)xt.push(Math.ceil(c[C]?c[C].createLabelsAndCalculateWidth():0)),ri+=xt[C],v+=c[C]&&!V.isNavigator?c[C].margin:0;else xt.push(Math.ceil(c[0]?c[0].createLabelsAndCalculateWidth():0));if(ze.push(xt),x&&0<x.length)for(he=[],C=An=0;C<x.length;C++)he.push(Math.ceil(x[C]?x[C].createLabelsAndCalculateWidth():0)),An+=he[C],Gn+=x[C]?x[C].margin:0;else he.push(Math.ceil(x[0]?x[0].createLabelsAndCalculateWidth():0));if(Pe.push(he),g&&0<g.length)for(C=0;C<g.length;C++)g[C].lineCoordinates={},A=Math.round(k.x1+ri+v),N=Math.round(k.x2-An-Gn>V.width-10?V.width-10:k.x2-An-Gn),g[C].labelAutoFit&&!h(ye)&&(0<!c.length&&(A=0>g[C].labelAngle?Math.max(A,ye):g[C].labelAngle===0?Math.max(A,ye/2):A),0<!x.length&&(N=0<g[C].labelAngle||g[C].labelAngle===0?N-Ce/2:N)),g[C].lineCoordinates.x1=A,g[C].lineCoordinates.x2=N,g[C].lineCoordinates.width=Math.abs(N-A),g[C].title&&(g[C]._titleTextBlock.maxWidth=0<g[C].titleMaxWidth&&g[C].titleMaxWidth<g[C].lineCoordinates.width?g[C].titleMaxWidth:g[C].lineCoordinates.width);if(f&&0<f.length)for(C=0;C<f.length;C++)f[C].lineCoordinates={},A=Math.round(k.x1+ri+v),N=Math.round(k.x2-An-Gn>f[C].chart.width-10?f[C].chart.width-10:k.x2-An-Gn),f[C]&&f[C].labelAutoFit&&!h(He)&&(0<!c.length&&(A=0<f[C].labelAngle?Math.max(A,He):f[C].labelAngle===0?Math.max(A,He/2):A),0<!x.length&&(N-=Ie/2)),f[C].lineCoordinates.x1=A,f[C].lineCoordinates.x2=N,f[C].lineCoordinates.width=Math.abs(N-A),f[C].title&&(f[C]._titleTextBlock.maxWidth=0<f[C].titleMaxWidth&&f[C].titleMaxWidth<f[C].lineCoordinates.width?f[C].titleMaxWidth:f[C].lineCoordinates.width);if(g&&0<g.length)for(F=[],C=wn=0;C<g.length;C++)F.push(Math.ceil(g[C]?g[C].createLabelsAndCalculateHeight():0)),wn+=F[C]+g[C].margin,$t+=g[C].margin;else F.push(Math.ceil(g[0]?g[0].createLabelsAndCalculateHeight():0));if(tt.push(F),f&&0<f.length)for(Se=[],C=Sn=0;C<f.length;C++)Se.push(Math.ceil(f[C]?f[C].createLabelsAndCalculateHeight():0)),Sn+=Se[C],Vi+=f[C].margin;else Se.push(Math.ceil(f[0]?f[0].createLabelsAndCalculateHeight():0));if(H.push(Se),g&&0<g.length)for(C=0;C<g.length;C++)0<g[C]._labels.length&&(D=g[C]._labels[0],O=g[C]._labels[g[C]._labels.length-1],ye=D.textBlock.width*Math.cos(Math.PI/180*Math.abs(D.textBlock.angle))+(D.textBlock.height-O.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(D.textBlock.angle)),Ce=O.textBlock.width*Math.cos(Math.PI/180*Math.abs(O.textBlock.angle))+(O.textBlock.height-O.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(O.textBlock.angle)));if(f&&0<f.length)for(C=0;C<f.length;C++)f[C]&&0<f[C]._labels.length&&(D=f[C]._labels[0],O=f[C]._labels[f[C]._labels.length-1],He=D.textBlock.width*Math.cos(Math.PI/180*Math.abs(D.textBlock.angle))+(D.textBlock.height-O.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(D.textBlock.angle)),Ie=O.textBlock.width*Math.cos(Math.PI/180*Math.abs(O.textBlock.angle))+(O.textBlock.height-O.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(O.textBlock.angle)));if(V.panEnabled)for(C=0;C<g.length;C++)F[C]=V.sessionVariables.axisY.height;else for(C=0;C<g.length;C++)V.sessionVariables.axisY.height=F[C];if(g&&0<g.length)for(C=g.length-1;0<=C;C--)O=Math.round(k.y2),D=Math.round(k.y2>g[C].chart.height-10?g[C].chart.height-10:k.y2),g[C].lineCoordinates.y1=O-(F[C]+g[C].margin+En),g[C].lineCoordinates.y2=O-(F[C]+g[C].margin+En),g[C].bounds={x1:A,y1:O-(F[C]+En+g[C].margin),x2:N,y2:D-(En+g[C].margin),width:N-A,height:F[C]},g[C].title&&(g[C]._titleTextBlock.maxWidth=0<g[C].titleMaxWidth&&g[C].titleMaxWidth<g[C].lineCoordinates.width?g[C].titleMaxWidth:g[C].lineCoordinates.width),En+=F[C]+g[C].margin;if(f&&0<f.length)for(C=f.length-1;0<=C;C--)f[C]&&(O=Math.round(k.y1),D=Math.round(k.y1+(Se[C]+f[C].margin+Ne)),f[C].lineCoordinates.y1=D,f[C].lineCoordinates.y2=D,f[C].bounds={x1:A,y1:O+(f[C].margin+Ne),x2:N,y2:D,width:N-A,height:Sn},f[C].title&&(f[C]._titleTextBlock.maxWidth=0<f[C].titleMaxWidth&&f[C].titleMaxWidth<f[C].lineCoordinates.width?f[C].titleMaxWidth:f[C].lineCoordinates.width),Ne+=Se[C]+f[C].margin);if(c&&0<c.length)for(C=0;C<c.length;C++){if($t=c[C]._labels&&0<c[C]._labels.length?c[C]._labels[0].textBlock.fontSize/2:0,A=Math.round(k.x1+v),O=f&&0<f.length?Math.round(f[0]?f[0].lineCoordinates.y2:k.y1<Math.max($t,10)?Math.max($t,10):k.y1):k.y1<Math.max($t,10)?Math.max($t,10):k.y1,N=Math.round(k.x1+ri+v),D=g&&0<g.length?Math.round(g[0]?g[0].lineCoordinates.y1:k.y2-wn>V.height-Math.max($t,10)?V.height-Math.max($t,10):k.y2-wn):k.y2>V.height-Math.max($t,10)?V.height-Math.max($t,10):k.y2,g&&0<g.length)for($t=0;$t<g.length;$t++)g[$t]&&g[$t].labelAutoFit&&(N=0>g[$t].labelAngle?Math.max(N,ye):g[$t].labelAngle===0?Math.max(N,ye/2):N,A=0>g[$t].labelAngle||g[$t].labelAngle===0?N-ri:A);if(f&&0<f.length)for($t=0;$t<f.length;$t++)f[$t]&&f[$t].labelAutoFit&&(N=f[$t].lineCoordinates.x1,A=N-ri);c[C].lineCoordinates={x1:N-ct,y1:O,x2:N-ct,y2:D,height:Math.abs(D-O)},c[C].bounds={x1:N-(xt[C]+ct),y1:O,x2:N,y2:D,width:N-A,height:D-O},c[C].title&&(c[C]._titleTextBlock.maxWidth=0<c[C].titleMaxWidth&&c[C].titleMaxWidth<c[C].lineCoordinates.height?c[C].titleMaxWidth:c[C].lineCoordinates.height),c[C].calculateValueToPixelConversionParameters(),c[C].calculateBreaksSizeInValues(),ct+=xt[C]+c[C].margin}if(x&&0<x.length)for(C=0;C<x.length;C++){if($t=x[C]._labels&&0<x[C]._labels.length?x[C]._labels[0].textBlock.fontSize/2:0,A=Math.round(k.x1-v),O=f&&0<f.length?Math.round(f[0]?f[0].lineCoordinates.y2:k.y1<Math.max($t,10)?Math.max($t,10):k.y1):k.y1<Math.max($t,10)?Math.max($t,10):k.y1,N=Math.round(k.x2-An-Gn),D=g&&0<g.length?Math.round(g[0]?g[0].lineCoordinates.y1:k.y2-wn>V.height-Math.max($t,10)?V.height-Math.max($t,10):k.y2-wn):k.y2>V.height-Math.max($t,10)?V.height-Math.max($t,10):k.y2,g&&0<g.length)for($t=0;$t<g.length;$t++)g[$t]&&g[$t].labelAutoFit&&(N=0>g[$t].labelAngle?Math.max(N,ye):g[$t].labelAngle===0?Math.max(N,ye/2):N,A=0>g[$t].labelAngle||g[$t].labelAngle===0?N-An:A);if(f&&0<f.length)for($t=0;$t<f.length;$t++)f[$t]&&f[$t].labelAutoFit&&(N=f[$t].lineCoordinates.x2,A=N-An);x[C].lineCoordinates={x1:N+wt,y1:O,x2:N+wt,y2:D,height:Math.abs(D-O)},x[C].bounds={x1:A,y1:O,x2:N+he[C]+wt,y2:D,width:N-A,height:D-O},x[C].title&&(x[C]._titleTextBlock.maxWidth=0<x[C].titleMaxWidth&&x[C].titleMaxWidth<x[C].lineCoordinates.height?x[C].titleMaxWidth:x[C].lineCoordinates.height),x[C].calculateValueToPixelConversionParameters(),x[C].calculateBreaksSizeInValues(),wt+=he[C]+x[C].margin}for(C=0;C<I.length;C++)I[C].type==="axisY"&&(I[C].calculateValueToPixelConversionParameters(),I[C].calculateBreaksSizeInValues());if(0<de){if(c&&0<c.length)for(C=0;C<c.length;C++)W=ze[de-1][C]===ze[de][C];else W=!0;if(x&&0<x.length)for(C=0;C<x.length;C++)qe=Pe[de-1][C]===Pe[de][C];else qe=!0;if(g&&0<g.length)for(C=0;C<g.length;C++)Ge=tt[de-1][C]===tt[de][C];else Ge=!0;if(f&&0<f.length)for(C=0;C<f.length;C++)_t=H[de-1][C]===H[de][C];else _t=!0}if(W&&qe&&Ge&&_t)break;de++}if(g&&0<g.length)for(C=0;C<g.length;C++)g[C].calculateStripLinesThicknessInValues(),g[C].calculateBreaksInPixels();if(f&&0<f.length)for(C=0;C<f.length;C++)f[C].calculateStripLinesThicknessInValues(),f[C].calculateBreaksInPixels();if(c&&0<c.length)for(C=0;C<c.length;C++)c[C].calculateStripLinesThicknessInValues(),c[C].calculateBreaksInPixels();if(x&&0<x.length)for(C=0;C<x.length;C++)x[C].calculateStripLinesThicknessInValues(),x[C].calculateBreaksInPixels()}},St.render=function(c,x,g,f,v){var k=c[0]?c[0].chart:x[0].chart;v=k.ctx;var A=k._axes;if(k.alignVerticalAxes&&k.alignVerticalAxes(),v.save(),v.beginPath(),c[0]&&v.rect(5,c[0].bounds.y1,c[0].chart.width-10,c[0].bounds.height),x[0]&&v.rect(5,x[x.length-1].bounds.y1,x[0].chart.width-10,x[0].bounds.height),v.clip(),c&&0<c.length)for(var O=0;O<c.length;O++)c[O].renderLabelsTicksAndTitle();if(x&&0<x.length)for(O=0;O<x.length;O++)x[O].renderLabelsTicksAndTitle();if(v.restore(),g&&0<g.length)for(O=0;O<g.length;O++)g[O].renderLabelsTicksAndTitle();if(f&&0<f.length)for(O=0;O<f.length;O++)f[O].renderLabelsTicksAndTitle();if(k.preparePlotArea(),k=k.plotArea,v.save(),v.beginPath(),v.rect(k.x1,k.y1,Math.abs(k.x2-k.x1),Math.abs(k.y2-k.y1)),v.clip(),c&&0<c.length)for(O=0;O<A.length;O++)A[O].renderStripLinesOfThicknessType("value");if(x&&0<x.length)for(O=0;O<x.length;O++)x[O].renderStripLinesOfThicknessType("value");if(g&&0<g.length)for(O=0;O<g.length;O++)g[O].renderStripLinesOfThicknessType("value");if(f&&0<f.length)for(O=0;O<f.length;O++)f[O].renderStripLinesOfThicknessType("value");if(c&&0<c.length)for(O=0;O<c.length;O++)c[O].renderInterlacedColors();if(x&&0<x.length)for(O=0;O<x.length;O++)x[O].renderInterlacedColors();if(g&&0<g.length)for(O=0;O<g.length;O++)g[O].renderInterlacedColors();if(f&&0<f.length)for(O=0;O<f.length;O++)f[O].renderInterlacedColors();if(v.restore(),c&&0<c.length)for(O=0;O<c.length;O++)c[O].renderGrid(),X&&(c[O].createMask(),c[O].renderBreaksBackground());if(x&&0<x.length)for(O=0;O<x.length;O++)x[O].renderGrid(),X&&(x[O].createMask(),x[O].renderBreaksBackground());if(g&&0<g.length)for(O=0;O<g.length;O++)g[O].renderGrid(),X&&(g[O].createMask(),g[O].renderBreaksBackground());if(f&&0<f.length)for(O=0;O<f.length;O++)f[O].renderGrid(),X&&(f[O].createMask(),f[O].renderBreaksBackground());if(c&&0<c.length)for(O=0;O<c.length;O++)c[O].renderAxisLine();if(x&&0<x.length)for(O=0;O<x.length;O++)x[O].renderAxisLine();if(g&&0<g.length)for(O=0;O<g.length;O++)g[O].renderAxisLine();if(f&&0<f.length)for(O=0;O<f.length;O++)f[O].renderAxisLine();if(c&&0<c.length)for(O=0;O<c.length;O++)c[O].renderStripLinesOfThicknessType("pixel");if(x&&0<x.length)for(O=0;O<x.length;O++)x[O].renderStripLinesOfThicknessType("pixel");if(g&&0<g.length)for(O=0;O<g.length;O++)g[O].renderStripLinesOfThicknessType("pixel");if(f&&0<f.length)for(O=0;O<f.length;O++)f[O].renderStripLinesOfThicknessType("pixel")},St.prototype.calculateStripLinesThicknessInValues=function(){for(var c=0;c<this.stripLines.length;c++)if(this.stripLines[c].startValue!==null&&this.stripLines[c].endValue!==null){var g=Math.min(this.stripLines[c].startValue,this.stripLines[c].endValue),x=Math.max(this.stripLines[c].startValue,this.stripLines[c].endValue),g=this.getApparentDifference(g,x);this.stripLines[c].value=this.logarithmic?this.stripLines[c].value*Math.sqrt(Math.log(this.stripLines[c].endValue/this.stripLines[c].startValue)/Math.log(g)):this.stripLines[c].value+(Math.abs(this.stripLines[c].endValue-this.stripLines[c].startValue)-g)/2,this.stripLines[c].thickness=g,this.stripLines[c]._thicknessType="value"}},St.prototype.calculateBreaksSizeInValues=function(){for(var c=this._position==="left"||this._position==="right"?this.lineCoordinates.height||this.chart.height:this.lineCoordinates.width||this.chart.width,x=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],g=this.conversionParameters.pixelPerUnit||c/(this.logarithmic?this.conversionParameters.maximum/this.conversionParameters.minimum:this.conversionParameters.maximum-this.conversionParameters.minimum),f=this.scaleBreaks&&!h(this.scaleBreaks.options.spacing),v,k=0;k<x.length;k++)v=f||!h(x[k].options.spacing),x[k].spacing=bt(x[k].spacing,c,8,v?.1*c:8,v?0:3)<<0,x[k].size=0>x[k].spacing?0:Math.abs(x[k].spacing/g),this.logarithmic&&(x[k].size=Math.pow(this.logarithmBase,x[k].size))},St.prototype.calculateBreaksInPixels=function(){if(!(this.scaleBreaks&&0>=this.scaleBreaks._appliedBreaks.length)){var c=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];c.length&&(this.scaleBreaks.firstBreakIndex=this.scaleBreaks.lastBreakIndex=null);for(var x=0;x<c.length&&!(c[x].startValue>this.conversionParameters.maximum);x++)c[x].endValue<this.conversionParameters.minimum||(h(this.scaleBreaks.firstBreakIndex)&&(this.scaleBreaks.firstBreakIndex=x),c[x].startValue>=this.conversionParameters.minimum&&(c[x].startPixel=this.convertValueToPixel(c[x].startValue),this.scaleBreaks.lastBreakIndex=x),c[x].endValue<=this.conversionParameters.maximum&&(c[x].endPixel=this.convertValueToPixel(c[x].endValue)))}},St.prototype.renderLabelsTicksAndTitle=function(){var c=this,x=!1,g=0,f=0,v=1,k=0;if(this.labelAngle!==0&&this.labelAngle!==360&&(v=1.2),typeof this.options.interval>"u"){if(this._position==="bottom"||this._position==="top")if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){for(var g=[],v=this.labelAngle!==0&&this.labelAngle!==360?1:1.2,A,O=this.viewportMaximum,N=this.lineCoordinates.width/Math.log(this.range),V=this._labels.length-1;0<=V&&(F=this._labels[V],!(F.position<this.viewportMinimum));V--)F.position>this.viewportMaximum||!(V===this._labels.length-1||A<Math.log(O/F.position)*N/v)||(g.push(F),O=F.position,A=F.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+F.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));this._labels=g}else{for(V=0;V<this._labels.length;V++)F=this._labels[V],F.position<this.viewportMinimum||(A=F.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+F.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle)),g+=A);g>this.lineCoordinates.width*v&&this.labelAutoFit&&(x=!0)}if(this._position==="left"||this._position==="right")if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){for(var g=[],D,O=this.viewportMaximum,N=this.lineCoordinates.height/Math.log(this.range),V=this._labels.length-1;0<=V&&(F=this._labels[V],!(F.position<this.viewportMinimum));V--)F.position>this.viewportMaximum||!(V===this._labels.length-1||D<Math.log(O/F.position)*N)||(g.push(F),O=F.position,D=F.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+F.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));this._labels=g}else{for(V=0;V<this._labels.length;V++)F=this._labels[V],F.position<this.viewportMinimum||(D=F.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+F.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle)),f+=D);f>this.lineCoordinates.height*v&&this.labelAutoFit&&(x=!0)}}this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit&&this._labels.sort(function(C,W){return C.position-W.position});var V=0,F,I;if(this._position==="bottom"){for(V=0;V<this._labels.length;V++)F=this._labels[V],F.position<this.viewportMinimum||F.position>this.viewportMaximum||x&&k++%2!==0&&this.labelAutoFit||(I=this.getPixelCoordinatesOnAxis(F.position),this.tickThickness&&this.labelPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,f=this.ctx.lineWidth%2===1?(I.x<<0)+.5:I.x<<0,this.ctx.beginPath(),this.ctx.moveTo(f,I.y<<0),this.ctx.lineTo(f,I.y+this.tickLength<<0),this.ctx.stroke()),F.textBlock.angle===0?(I.x-=F.textBlock.width/2,I.y=this.labelPlacement==="inside"?I.y-(this.tickLength+F.textBlock.fontSize/2):I.y+this.tickLength+F.textBlock.fontSize/2):(I.x=this.labelPlacement==="inside"?0>this.labelAngle?I.x:I.x-F.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):I.x-(0>this.labelAngle?F.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0),I.y=this.labelPlacement==="inside"?0>this.labelAngle?I.y-this.tickLength-5:I.y-this.tickLength-Math.abs(F.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+5):I.y+this.tickLength+Math.abs(0>this.labelAngle?F.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-5:5)),F.textBlock.x=I.x,F.textBlock.y=I.y);this.labelPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(V=0;V<c._labels.length;V++)if(F=c._labels[V],!(F.position<c.viewportMinimum||F.position>c.viewportMaximum||x&&k++%2!==0&&c.labelAutoFit)&&(I=c.getPixelCoordinatesOnAxis(F.position),c.tickThickness)){c.ctx.lineWidth=c.tickThickness,c.ctx.strokeStyle=c.tickColor;var C=c.ctx.lineWidth%2===1?(I.x<<0)+.5:I.x<<0;c.ctx.save(),c.ctx.beginPath(),c.ctx.moveTo(C,I.y<<0),c.ctx.lineTo(C,I.y-c.tickLength<<0),c.ctx.stroke(),c.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y2-this._titleTextBlock.height-3,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if(this._position==="top"){for(V=0;V<this._labels.length;V++)F=this._labels[V],F.position<this.viewportMinimum||F.position>this.viewportMaximum||x&&k++%2!==0&&this.labelAutoFit||(I=this.getPixelCoordinatesOnAxis(F.position),this.tickThickness&&this.labelPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,f=this.ctx.lineWidth%2===1?(I.x<<0)+.5:I.x<<0,this.ctx.beginPath(),this.ctx.moveTo(f,I.y<<0),this.ctx.lineTo(f,I.y-this.tickLength<<0),this.ctx.stroke()),F.textBlock.angle===0?(I.x-=F.textBlock.width/2,I.y=this.labelPlacement==="inside"?I.y+this.labelFontSize/2+this.tickLength+5:I.y-(this.tickLength+F.textBlock.height-F.textBlock.fontSize/2)):(I.x=this.labelPlacement==="inside"?0<this.labelAngle?I.x:I.x-F.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):I.x+(F.textBlock.height-this.tickLength-this.labelFontSize)*Math.sin(Math.PI/180*this.labelAngle)-(0<this.labelAngle?F.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0),I.y=this.labelPlacement==="inside"?0<this.labelAngle?I.y+this.tickLength+5:I.y-F.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+this.tickLength+5:I.y-(this.tickLength+((F.textBlock.height-F.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle)+(0<this.labelAngle?F.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0)))),F.textBlock.x=I.x,F.textBlock.y=I.y);this.labelPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(V=0;V<c._labels.length;V++)if(F=c._labels[V],!(F.position<c.viewportMinimum||F.position>c.viewportMaximum||x&&k++%2!==0&&c.labelAutoFit)&&(I=c.getPixelCoordinatesOnAxis(F.position),c.tickThickness)){c.ctx.lineWidth=c.tickThickness,c.ctx.strokeStyle=c.tickColor;var C=this.ctx.lineWidth%2===1?(I.x<<0)+.5:I.x<<0;c.ctx.save(),c.ctx.beginPath(),c.ctx.moveTo(C,I.y<<0),c.ctx.lineTo(C,I.y+c.tickLength<<0),c.ctx.stroke(),c.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y1+1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if(this._position==="left"){for(V=0;V<this._labels.length;V++)F=this._labels[V],F.position<this.viewportMinimum||F.position>this.viewportMaximum||x&&k++%2!==0&&this.labelAutoFit||(I=this.getPixelCoordinatesOnAxis(F.position),this.tickThickness&&this.labelPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,f=this.ctx.lineWidth%2===1?(I.y<<0)+.5:I.y<<0,this.ctx.beginPath(),this.ctx.moveTo(I.x<<0,f),this.ctx.lineTo(I.x-this.tickLength<<0,f),this.ctx.stroke()),this.labelAngle===0?(F.textBlock.y=I.y,F.textBlock.x=this.labelPlacement==="inside"?I.x+this.tickLength+5:I.x-F.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5):(F.textBlock.y=this.labelPlacement==="inside"?I.y:I.y-F.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),F.textBlock.x=this.labelPlacement==="inside"?I.x+this.tickLength+5:0<this.labelAngle?I.x-F.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:I.x-F.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(F.textBlock.height-F.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)-this.tickLength));this.labelPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(V=0;V<c._labels.length;V++)if(F=c._labels[V],!(F.position<c.viewportMinimum||F.position>c.viewportMaximum||x&&k++%2!==0&&c.labelAutoFit)&&(I=c.getPixelCoordinatesOnAxis(F.position),c.tickThickness)){c.ctx.lineWidth=c.tickThickness,c.ctx.strokeStyle=c.tickColor;var C=c.ctx.lineWidth%2===1?(I.y<<0)+.5:I.y<<0;c.ctx.save(),c.ctx.beginPath(),c.ctx.moveTo(I.x<<0,C),c.ctx.lineTo(I.x+c.tickLength<<0,C),c.ctx.stroke(),c.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.bounds.x1+1,this._titleTextBlock.y=this.lineCoordinates.height/2+this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if(this._position==="right"){for(V=0;V<this._labels.length;V++)F=this._labels[V],F.position<this.viewportMinimum||F.position>this.viewportMaximum||x&&k++%2!==0&&this.labelAutoFit||(I=this.getPixelCoordinatesOnAxis(F.position),this.tickThickness&&this.labelPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,f=this.ctx.lineWidth%2===1?(I.y<<0)+.5:I.y<<0,this.ctx.beginPath(),this.ctx.moveTo(I.x<<0,f),this.ctx.lineTo(I.x+this.tickLength<<0,f),this.ctx.stroke()),this.labelAngle===0?(F.textBlock.y=I.y,F.textBlock.x=this.labelPlacement==="inside"?I.x-F.textBlock.width-this.tickLength-5:I.x+this.tickLength+5):(F.textBlock.y=this.labelPlacement==="inside"?I.y-F.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0>this.labelAngle?I.y:I.y-(F.textBlock.height-F.textBlock.fontSize/2-5)*Math.cos(Math.PI/180*this.labelAngle),F.textBlock.x=this.labelPlacement==="inside"?I.x-F.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:0<this.labelAngle?I.x+(F.textBlock.height-F.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)+this.tickLength:I.x+this.tickLength+5));this.labelPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(V=0;V<c._labels.length;V++)if(F=c._labels[V],!(F.position<c.viewportMinimum||F.position>c.viewportMaximum||x&&k++%2!==0&&c.labelAutoFit)&&(I=c.getPixelCoordinatesOnAxis(F.position),c.tickThickness)){c.ctx.lineWidth=c.tickThickness,c.ctx.strokeStyle=c.tickColor;var C=c.ctx.lineWidth%2===1?(I.y<<0)+.5:I.y<<0;c.ctx.save(),c.ctx.beginPath(),c.ctx.moveTo(I.x<<0,C),c.ctx.lineTo(I.x-c.tickLength<<0,C),c.ctx.stroke(),c.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.bounds.x2-1,this._titleTextBlock.y=this.lineCoordinates.height/2-this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}if(k=0,this.labelPlacement==="inside")this.chart.addEventListener("dataAnimationIterationEnd",function(){for(V=0;V<c._labels.length;V++)F=c._labels[V],F.position<c.viewportMinimum||F.position>c.viewportMaximum||x&&k++%2!==0&&c.labelAutoFit||(c.ctx.save(),c.ctx.beginPath(),F.textBlock.render(!0),c.ctx.restore())},this);else for(V=0;V<this._labels.length;V++)F=this._labels[V],F.position<this.viewportMinimum||F.position>this.viewportMaximum||x&&k++%2!==0&&this.labelAutoFit||F.textBlock.render(!0)},St.prototype.renderInterlacedColors=function(){var c=this.chart.plotArea.ctx,x,g,f=this.chart.plotArea,v=0;if(x=!0,(this._position==="bottom"||this._position==="top")&&this.interlacedColor)for(c.fillStyle=this.interlacedColor,v=0;v<this._labels.length;v++)x?(x=this.getPixelCoordinatesOnAxis(this._labels[v].position),g=v+1>this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[v+1].position),c.fillRect(Math.min(g.x,x.x),f.y1,Math.abs(g.x-x.x),Math.abs(f.y1-f.y2)),x=!1):x=!0;else if((this._position==="left"||this._position==="right")&&this.interlacedColor)for(c.fillStyle=this.interlacedColor,v=0;v<this._labels.length;v++)x?(g=this.getPixelCoordinatesOnAxis(this._labels[v].position),x=v+1>this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[v+1].position),c.fillRect(f.x1,Math.min(g.y,x.y),Math.abs(f.x1-f.x2),Math.abs(x.y-g.y)),x=!1):x=!0;c.beginPath()},St.prototype.renderStripLinesOfThicknessType=function(c){if(this.stripLines&&0<this.stripLines.length&&c){for(var x=this,g,N=0,f=0,v=!1,O=!1,k=[],A=[],O=!1,N=0;N<this.stripLines.length;N++){var D=this.stripLines[N];D._thicknessType===c&&(c==="pixel"&&(D.value<this.viewportMinimum||D.value>this.viewportMaximum||h(D.value)||isNaN(this.range))||k.push(D))}for(N=0;N<this._stripLineLabels.length;N++)if(D=this.stripLines[N],g=this._stripLineLabels[N],!(g.position<this.viewportMinimum||g.position>this.viewportMaximum||isNaN(this.range))){if(c=this.getPixelCoordinatesOnAxis(g.position),g.stripLine.labelPlacement==="outside")if(D&&(this.ctx.strokeStyle=D.color,D._thicknessType==="pixel"&&(this.ctx.lineWidth=D.thickness)),this._position==="bottom"){var V=this.ctx.lineWidth%2===1?(c.x<<0)+.5:c.x<<0;this.ctx.beginPath(),this.ctx.moveTo(V,c.y<<0),this.ctx.lineTo(V,c.y+this.tickLength<<0),this.ctx.stroke(),this.labelAngle===0?(c.x-=g.textBlock.width/2,c.y+=this.tickLength+g.textBlock.fontSize/2):(c.x-=0>this.labelAngle?g.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,c.y+=this.tickLength+Math.abs(0>this.labelAngle?g.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-5:5))}else this._position==="top"?(V=this.ctx.lineWidth%2===1?(c.x<<0)+.5:c.x<<0,this.ctx.beginPath(),this.ctx.moveTo(V,c.y<<0),this.ctx.lineTo(V,c.y-this.tickLength<<0),this.ctx.stroke(),this.labelAngle===0?(c.x-=g.textBlock.width/2,c.y-=this.tickLength+g.textBlock.height):(c.x+=(g.textBlock.height-this.tickLength-this.labelFontSize/2)*Math.sin(Math.PI/180*this.labelAngle)-(0<this.labelAngle?g.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0),c.y-=this.tickLength+(g.textBlock.height*Math.cos(Math.PI/180*this.labelAngle)+(0<this.labelAngle?g.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0)))):this._position==="left"?(V=this.ctx.lineWidth%2===1?(c.y<<0)+.5:c.y<<0,this.ctx.beginPath(),this.ctx.moveTo(c.x<<0,V),this.ctx.lineTo(c.x-this.tickLength<<0,V),this.ctx.stroke(),this.labelAngle===0?c.x=c.x-g.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:(c.y-=g.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),c.x=0<this.labelAngle?c.x-g.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:c.x-g.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(g.textBlock.height-g.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)-this.tickLength)):this._position==="right"&&(V=this.ctx.lineWidth%2===1?(c.y<<0)+.5:c.y<<0,this.ctx.beginPath(),this.ctx.moveTo(c.x<<0,V),this.ctx.lineTo(c.x+this.tickLength<<0,V),this.ctx.stroke(),this.labelAngle===0?c.x=c.x+this.tickLength+5:(c.y=0>this.labelAngle?c.y:c.y-(g.textBlock.height-g.textBlock.fontSize/2-5)*Math.cos(Math.PI/180*this.labelAngle),c.x=0<this.labelAngle?c.x+(g.textBlock.height-g.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)+this.tickLength:c.x+this.tickLength+5));else g.textBlock.angle=-90,this._position==="bottom"?(g.textBlock.maxWidth=this.options.stripLines[N].labelMaxWidth?this.options.stripLines[N].labelMaxWidth:this.chart.plotArea.height-3,g.textBlock.measureText(),c.x-g.textBlock.height>this.chart.plotArea.x1?h(D.startValue)?c.x-=g.textBlock.height-g.textBlock.fontSize/2:c.x-=g.textBlock.height/2-g.textBlock.fontSize/2+3:(g.textBlock.angle=90,h(D.startValue)?c.x+=g.textBlock.height-g.textBlock.fontSize/2:c.x+=g.textBlock.height/2-g.textBlock.fontSize/2+3),c.y=g.textBlock.angle===-90?g.stripLine.labelAlign==="near"?this.chart.plotArea.y2-3:g.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1+g.textBlock.width)/2:this.chart.plotArea.y1+g.textBlock.width+3:g.stripLine.labelAlign==="near"?this.chart.plotArea.y2-g.textBlock.width-3:g.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1-g.textBlock.width)/2:this.chart.plotArea.y1+3):this._position==="top"?(g.textBlock.maxWidth=this.options.stripLines[N].labelMaxWidth?this.options.stripLines[N].labelMaxWidth:this.chart.plotArea.height-3,g.textBlock.measureText(),c.x-g.textBlock.height>this.chart.plotArea.x1?h(D.startValue)?c.x-=g.textBlock.height-g.textBlock.fontSize/2:c.x-=g.textBlock.height/2-g.textBlock.fontSize/2+3:(g.textBlock.angle=90,h(D.startValue)?c.x+=g.textBlock.height-g.textBlock.fontSize/2:c.x+=g.textBlock.height/2-g.textBlock.fontSize/2+3),c.y=g.textBlock.angle===-90?g.stripLine.labelAlign==="near"?this.chart.plotArea.y1+g.textBlock.width+3:g.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1+g.textBlock.width)/2:this.chart.plotArea.y2-3:g.stripLine.labelAlign==="near"?this.chart.plotArea.y1+3:g.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1-g.textBlock.width)/2:this.chart.plotArea.y2-g.textBlock.width-3):this._position==="left"?(g.textBlock.maxWidth=this.options.stripLines[N].labelMaxWidth?this.options.stripLines[N].labelMaxWidth:this.chart.plotArea.width-3,g.textBlock.angle=0,g.textBlock.measureText(),c.y-g.textBlock.height>this.chart.plotArea.y1?h(D.startValue)?c.y-=g.textBlock.height-g.textBlock.fontSize/2:c.y-=g.textBlock.height/2-g.textBlock.fontSize+3:c.y-g.textBlock.height<this.chart.plotArea.y2?c.y+=g.textBlock.fontSize/2+3:h(D.startValue)?c.y-=g.textBlock.height-g.textBlock.fontSize/2:c.y-=g.textBlock.height/2-g.textBlock.fontSize+3,c.x=g.stripLine.labelAlign==="near"?this.chart.plotArea.x1+3:g.stripLine.labelAlign==="center"?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-g.textBlock.width/2:this.chart.plotArea.x2-g.textBlock.width-3):this._position==="right"&&(g.textBlock.maxWidth=this.options.stripLines[N].labelMaxWidth?this.options.stripLines[N].labelMaxWidth:this.chart.plotArea.width-3,g.textBlock.angle=0,g.textBlock.measureText(),c.y-+g.textBlock.height>this.chart.plotArea.y1?h(D.startValue)?c.y-=g.textBlock.height-g.textBlock.fontSize/2:c.y-=g.textBlock.height/2-g.textBlock.fontSize/2-3:c.y-g.textBlock.height<this.chart.plotArea.y2?c.y+=g.textBlock.fontSize/2+3:h(D.startValue)?c.y-=g.textBlock.height-g.textBlock.fontSize/2:c.y-=g.textBlock.height/2-g.textBlock.fontSize/2+3,c.x=g.stripLine.labelAlign==="near"?this.chart.plotArea.x2-g.textBlock.width-3:g.stripLine.labelAlign==="center"?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-g.textBlock.width/2:this.chart.plotArea.x1+3);g.textBlock.x=c.x,g.textBlock.y=c.y,A.push(g)}if(!O){for(O=!1,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),N=0;N<k.length;N++)D=k[N],D.showOnTop?v||(v=!0,this.chart.addEventListener("dataAnimationIterationEnd",function(){for(this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),f=0;f<k.length;f++)D=k[f],D.showOnTop&&D.render();this.ctx.restore()},D)):D.render();for(N=0;N<A.length;N++)g=A[N],g.stripLine.showOnTop?O||(O=!0,this.chart.addEventListener("dataAnimationIterationEnd",function(){for(f=0;f<A.length;f++)g=A[f],g.stripLine.labelPlacement==="inside"&&g.stripLine.showOnTop&&(x.ctx.save(),x.ctx.beginPath(),x.ctx.rect(x.chart.plotArea.x1,x.chart.plotArea.y1,x.chart.plotArea.width,x.chart.plotArea.height),x.ctx.clip(),g.textBlock.render(!0),x.ctx.restore())},g.textBlock)):g.stripLine.labelPlacement==="inside"&&g.textBlock.render(!0);this.ctx.restore(),O=!0}if(O)for(O=!1,N=0;N<A.length;N++)g=A[N],g.stripLine.showOnTop?O||(O=!0,this.chart.addEventListener("dataAnimationIterationEnd",function(){for(f=0;f<A.length;f++)g=A[f],g.stripLine.labelPlacement==="outside"&&g.stripLine.showOnTop&&g.textBlock.render(!0)},g.textBlock)):g.stripLine.labelPlacement==="outside"&&g.textBlock.render(!0)}},St.prototype.renderBreaksBackground=function(){this.chart._breaksCanvas&&this.scaleBreaks&&0<this.scaleBreaks._appliedBreaks.length&&this.maskCanvas&&(this.chart._breaksCanvasCtx.save(),this.chart._breaksCanvasCtx.beginPath(),this.chart._breaksCanvasCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.chart._breaksCanvasCtx.clip(),this.chart._breaksCanvasCtx.drawImage(this.maskCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx.restore())},St.prototype.createMask=function(){if(this.scaleBreaks&&0<this.scaleBreaks._appliedBreaks.length){var c=this.scaleBreaks._appliedBreaks;X?(this.maskCanvas=q(this.chart.width,this.chart.height),this.maskCtx=this.maskCanvas.getContext("2d")):(this.maskCanvas=this.chart.plotArea.canvas,this.maskCtx=this.chart.plotArea.ctx),this.maskCtx.save(),this.maskCtx.beginPath(),this.maskCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.maskCtx.clip();for(var x=0;x<c.length;x++)c[x].endValue<this.viewportMinimum||c[x].startValue>this.viewportMaximum||isNaN(this.range)||c[x].render(this.maskCtx);this.maskCtx.restore()}},St.prototype.renderCrosshair=function(c,x){this.crosshair.render(c,x)},St.prototype.renderGrid=function(){if(this.gridThickness&&0<this.gridThickness){var c=this.chart.ctx;c.save();var x,g=this.chart.plotArea;if(c.lineWidth=this.gridThickness,c.strokeStyle=this.gridColor,c.setLineDash&&c.setLineDash(S(this.gridDashType,this.gridThickness)),this._position==="bottom"||this._position==="top")for(f=0;f<this._labels.length;f++)this._labels[f].position<this.viewportMinimum||this._labels[f].position>this.viewportMaximum||this._labels[f].breaksLabelType||(c.beginPath(),x=this.getPixelCoordinatesOnAxis(this._labels[f].position),x=c.lineWidth%2===1?(x.x<<0)+.5:x.x<<0,c.moveTo(x,g.y1<<0),c.lineTo(x,g.y2<<0),c.stroke());else if(this._position==="left"||this._position==="right")for(var f=0;f<this._labels.length;f++)this._labels[f].position<this.viewportMinimum||this._labels[f].position>this.viewportMaximum||this._labels[f].breaksLabelType||(c.beginPath(),x=this.getPixelCoordinatesOnAxis(this._labels[f].position),x=c.lineWidth%2===1?(x.y<<0)+.5:x.y<<0,c.moveTo(g.x1<<0,x),c.lineTo(g.x2<<0,x),c.stroke());c.restore()}},St.prototype.renderAxisLine=function(){var c=this.chart.ctx,x=X?this.chart._preRenderCtx:c,g=Math.ceil(this.tickThickness/(this.reversed?-2:2)),f=Math.ceil(this.tickThickness/(this.reversed?2:-2)),v,k;if(x.save(),this._position==="bottom"||this._position==="top"){if(this.lineThickness){this.reversed?(v=this.lineCoordinates.x2,k=this.lineCoordinates.x1):(v=this.lineCoordinates.x1,k=this.lineCoordinates.x2),x.lineWidth=this.lineThickness,x.strokeStyle=this.lineColor?this.lineColor:"black",x.setLineDash&&x.setLineDash(S(this.lineDashType,this.lineThickness));var A=this.lineThickness%2===1?(this.lineCoordinates.y1<<0)+.5:this.lineCoordinates.y1<<0;if(x.beginPath(),this.scaleBreaks&&!h(this.scaleBreaks.firstBreakIndex))if(h(this.scaleBreaks.lastBreakIndex))v=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+f;else for(var O=this.scaleBreaks.firstBreakIndex;O<=this.scaleBreaks.lastBreakIndex;O++)x.moveTo(v,A),x.lineTo(this.scaleBreaks._appliedBreaks[O].startPixel+g,A),v=this.scaleBreaks._appliedBreaks[O].endPixel+f;v&&(x.moveTo(v,A),x.lineTo(k,A)),x.stroke()}}else if((this._position==="left"||this._position==="right")&&this.lineThickness){if(this.reversed?(v=this.lineCoordinates.y1,k=this.lineCoordinates.y2):(v=this.lineCoordinates.y2,k=this.lineCoordinates.y1),x.lineWidth=this.lineThickness,x.strokeStyle=this.lineColor,x.setLineDash&&x.setLineDash(S(this.lineDashType,this.lineThickness)),A=this.lineThickness%2===1?(this.lineCoordinates.x1<<0)+.5:this.lineCoordinates.x1<<0,x.beginPath(),this.scaleBreaks&&!h(this.scaleBreaks.firstBreakIndex))if(h(this.scaleBreaks.lastBreakIndex))v=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+g;else for(O=this.scaleBreaks.firstBreakIndex;O<=this.scaleBreaks.lastBreakIndex;O++)x.moveTo(A,v),x.lineTo(A,this.scaleBreaks._appliedBreaks[O].startPixel+f),v=this.scaleBreaks._appliedBreaks[O].endPixel+g;v&&(x.moveTo(A,v),x.lineTo(A,k)),x.stroke()}X&&(c.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx&&this.chart._breaksCanvasCtx.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),x.clearRect(0,0,this.chart.width,this.chart.height)),x.restore()},St.prototype.getPixelCoordinatesOnAxis=function(c){var x={};return(this._position==="bottom"||this._position==="top")&&(x.x=this.convertValueToPixel(c),x.y=this.lineCoordinates.y1),(this._position==="left"||this._position==="right")&&(x.y=this.convertValueToPixel(c),x.x=this.lineCoordinates.x2),x},St.prototype.convertPixelToValue=function(c){if(typeof c>"u")return null;var g=0,v=0,x,g=!0,f=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],v=typeof c=="number"?c:this._position==="left"||this._position==="right"?c.y:c.x;if(this.logarithmic){if(c=x=Math.pow(this.logarithmBase,(v-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit),v<=this.conversionParameters.reference==(this._position==="left"||this._position==="right")!==this.reversed){for(v=0;v<f.length;v++)if(!(f[v].endValue<this.conversionParameters.minimum))if(g)if(f[v].startValue<this.conversionParameters.minimum){if(1<f[v].size&&this.conversionParameters.minimum*Math.pow(f[v].endValue/f[v].startValue,Math.log(x)/Math.log(f[v].size))<f[v].endValue){c=Math.pow(f[v].endValue/f[v].startValue,Math.log(x)/Math.log(f[v].size));break}else c*=f[v].endValue/this.conversionParameters.minimum/Math.pow(f[v].size,Math.log(f[v].endValue/this.conversionParameters.minimum)/Math.log(f[v].endValue/f[v].startValue)),x/=Math.pow(f[v].size,Math.log(f[v].endValue/this.conversionParameters.minimum)/Math.log(f[v].endValue/f[v].startValue));g=!1}else if(x>f[v].startValue/this.conversionParameters.minimum){if(x/=f[v].startValue/this.conversionParameters.minimum,x<f[v].size){c*=Math.pow(f[v].endValue/f[v].startValue,f[v].size===1?1:Math.log(x)/Math.log(f[v].size))/x;break}else c*=f[v].endValue/f[v].startValue/f[v].size;x/=f[v].size,g=!1}else break;else if(x>f[v].startValue/f[v-1].endValue){if(x/=f[v].startValue/f[v-1].endValue,x<f[v].size){c*=Math.pow(f[v].endValue/f[v].startValue,f[v].size===1?1:Math.log(x)/Math.log(f[v].size))/x;break}else c*=f[v].endValue/f[v].startValue/f[v].size;x/=f[v].size}else break}else for(v=f.length-1;0<=v;v--)if(!(f[v].startValue>this.conversionParameters.minimum))if(g)if(f[v].endValue>this.conversionParameters.minimum){if(1<f[v].size&&this.conversionParameters.minimum*Math.pow(f[v].endValue/f[v].startValue,Math.log(x)/Math.log(f[v].size))>f[v].startValue){c=Math.pow(f[v].endValue/f[v].startValue,Math.log(x)/Math.log(f[v].size));break}else c*=f[v].startValue/this.conversionParameters.minimum*Math.pow(f[v].size,Math.log(f[v].startValue/this.conversionParameters.minimum)/Math.log(f[v].endValue/f[v].startValue))*x,x*=Math.pow(f[v].size,Math.log(this.conversionParameters.minimum/f[v].startValue)/Math.log(f[v].endValue/f[v].startValue));g=!1}else if(x<f[v].endValue/this.conversionParameters.minimum){if(x/=f[v].endValue/this.conversionParameters.minimum,x>1/f[v].size){c*=Math.pow(f[v].endValue/f[v].startValue,1>=f[v].size?1:Math.log(x)/Math.log(f[v].size))*x;break}else c/=f[v].endValue/f[v].startValue/f[v].size;x*=f[v].size,g=!1}else break;else if(x<f[v].endValue/f[v+1].startValue){if(x/=f[v].endValue/f[v+1].startValue,x>1/f[v].size){c*=Math.pow(f[v].endValue/f[v].startValue,1>=f[v].size?1:Math.log(x)/Math.log(f[v].size))*x;break}else c/=f[v].endValue/f[v].startValue/f[v].size;x*=f[v].size}else break;g=c*this.viewportMinimum}else{if(c=x=(v-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit,v<=this.conversionParameters.reference==(this._position==="left"||this._position==="right")!==this.reversed){for(v=0;v<f.length;v++)if(!(f[v].endValue<this.conversionParameters.minimum))if(g)if(f[v].startValue<this.conversionParameters.minimum){if(f[v].size&&this.conversionParameters.minimum+x*(f[v].endValue-f[v].startValue)/f[v].size<f[v].endValue){c=0>=f[v].size?0:x*(f[v].endValue-f[v].startValue)/f[v].size;break}else c+=f[v].endValue-this.conversionParameters.minimum-f[v].size*(f[v].endValue-this.conversionParameters.minimum)/(f[v].endValue-f[v].startValue),x-=f[v].size*(f[v].endValue-this.conversionParameters.minimum)/(f[v].endValue-f[v].startValue);g=!1}else if(x>f[v].startValue-this.conversionParameters.minimum){if(x-=f[v].startValue-this.conversionParameters.minimum,x<f[v].size){c+=(f[v].endValue-f[v].startValue)*(f[v].size===0?1:x/f[v].size)-x;break}else c+=f[v].endValue-f[v].startValue-f[v].size;x-=f[v].size,g=!1}else break;else if(x>f[v].startValue-f[v-1].endValue){if(x-=f[v].startValue-f[v-1].endValue,x<f[v].size){c+=(f[v].endValue-f[v].startValue)*(f[v].size===0?1:x/f[v].size)-x;break}else c+=f[v].endValue-f[v].startValue-f[v].size;x-=f[v].size}else break}else for(v=f.length-1;0<=v;v--)if(!(f[v].startValue>this.conversionParameters.minimum))if(g)if(f[v].endValue>this.conversionParameters.minimum)if(f[v].size&&this.conversionParameters.minimum+x*(f[v].endValue-f[v].startValue)/f[v].size>f[v].startValue){c=0>=f[v].size?0:x*(f[v].endValue-f[v].startValue)/f[v].size;break}else c+=f[v].startValue-this.conversionParameters.minimum+f[v].size*(this.conversionParameters.minimum-f[v].startValue)/(f[v].endValue-f[v].startValue),x+=f[v].size*(this.conversionParameters.minimum-f[v].startValue)/(f[v].endValue-f[v].startValue),g=!1;else if(x<f[v].endValue-this.conversionParameters.minimum){if(x-=f[v].endValue-this.conversionParameters.minimum,x>-1*f[v].size){c+=(f[v].endValue-f[v].startValue)*(f[v].size===0?1:x/f[v].size)+x;break}else c-=f[v].endValue-f[v].startValue-f[v].size;x+=f[v].size,g=!1}else break;else if(x<f[v].endValue-f[v+1].startValue){if(x-=f[v].endValue-f[v+1].startValue,x>-1*f[v].size){c+=(f[v].endValue-f[v].startValue)*(f[v].size===0?1:x/f[v].size)+x;break}else c-=f[v].endValue-f[v].startValue-f[v].size;x+=f[v].size}else break;g=this.conversionParameters.minimum+c}return g},St.prototype.convertValueToPixel=function(c){return c=this.getApparentDifference(this.conversionParameters.minimum,c,c),this.logarithmic?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*Math.log(c/this.conversionParameters.minimum)/this.conversionParameters.lnLogarithmBase+.5<<0:this.type==="axisX"?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(c-this.conversionParameters.minimum)+.5<<0:this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(c-this.conversionParameters.minimum)+.5},St.prototype.getApparentDifference=function(c,x,g,f){var v=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];if(this.logarithmic){g=h(g)?x/c:g;for(var k=0;k<v.length&&!(x<v[k].startValue);k++)c>v[k].endValue||(c<=v[k].startValue&&x>=v[k].endValue?g=g/v[k].endValue*v[k].startValue*v[k].size:c>=v[k].startValue&&x>=v[k].endValue?g=g/v[k].endValue*c*Math.pow(v[k].size,Math.log(v[k].endValue/c)/Math.log(v[k].endValue/v[k].startValue)):c<=v[k].startValue&&x<=v[k].endValue?g=g/x*v[k].startValue*Math.pow(v[k].size,Math.log(x/v[k].startValue)/Math.log(v[k].endValue/v[k].startValue)):!f&&c>v[k].startValue&&x<v[k].endValue&&(g=c*Math.pow(v[k].size,Math.log(x/c)/Math.log(v[k].endValue/v[k].startValue))))}else for(g=h(g)?Math.abs(x-c):g,k=0;k<v.length&&!(x<v[k].startValue);k++)c>v[k].endValue||(c<=v[k].startValue&&x>=v[k].endValue?g=g-v[k].endValue+v[k].startValue+v[k].size:c>v[k].startValue&&x>=v[k].endValue?g=g-v[k].endValue+c+v[k].size*(v[k].endValue-c)/(v[k].endValue-v[k].startValue):c<=v[k].startValue&&x<v[k].endValue?g=g-x+v[k].startValue+v[k].size*(x-v[k].startValue)/(v[k].endValue-v[k].startValue):!f&&c>v[k].startValue&&x<v[k].endValue&&(g=c+v[k].size*(x-c)/(v[k].endValue-v[k].startValue)));return g},St.prototype.setViewPortRange=function(c,x){this.sessionVariables.newViewportMinimum=this.viewportMinimum=Math.min(c,x),this.sessionVariables.newViewportMaximum=this.viewportMaximum=Math.max(c,x)},St.prototype.getXValueAt=function(c){if(!c)return null;var x=null;return this._position==="left"?x=this.convertPixelToValue(c.y):this._position==="bottom"&&(x=this.convertPixelToValue(c.x)),x},St.prototype.calculateValueToPixelConversionParameters=function(c){c=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];var x={pixelPerUnit:null,minimum:null,reference:null},g=this.lineCoordinates.width,f=this.lineCoordinates.height,g=this._position==="bottom"||this._position==="top"?g:f,f=Math.abs(this.range);if(this.logarithmic)for(var v=0;v<c.length&&!(this.viewportMaximum<c[v].startValue);v++)this.viewportMinimum>c[v].endValue||(this.viewportMinimum>=c[v].startValue&&this.viewportMaximum<=c[v].endValue?g=0:this.viewportMinimum<=c[v].startValue&&this.viewportMaximum>=c[v].endValue?(f=f/c[v].endValue*c[v].startValue,g=0<c[v].spacing.toString().indexOf("%")?g*(1-parseFloat(c[v].spacing)/100):g-Math.min(c[v].spacing,.1*g)):this.viewportMinimum>c[v].startValue&&this.viewportMaximum>=c[v].endValue?(f=f/c[v].endValue*this.viewportMinimum,g=0<c[v].spacing.toString().indexOf("%")?g*(1-parseFloat(c[v].spacing)/100*Math.log(c[v].endValue/this.viewportMinimum)/Math.log(c[v].endValue/c[v].startValue)):g-Math.min(c[v].spacing,.1*g)*Math.log(c[v].endValue/this.viewportMinimum)/Math.log(c[v].endValue/c[v].startValue)):this.viewportMinimum<=c[v].startValue&&this.viewportMaximum<c[v].endValue&&(f=f/this.viewportMaximum*c[v].startValue,g=0<c[v].spacing.toString().indexOf("%")?g*(1-parseFloat(c[v].spacing)/100*Math.log(this.viewportMaximum/c[v].startValue)/Math.log(c[v].endValue/c[v].startValue)):g-Math.min(c[v].spacing,.1*g)*Math.log(this.viewportMaximum/c[v].startValue)/Math.log(c[v].endValue/c[v].startValue)));else for(v=0;v<c.length&&!(this.viewportMaximum<c[v].startValue);v++)this.viewportMinimum>c[v].endValue||(this.viewportMinimum>=c[v].startValue&&this.viewportMaximum<=c[v].endValue?g=0:this.viewportMinimum<=c[v].startValue&&this.viewportMaximum>=c[v].endValue?(f=f-c[v].endValue+c[v].startValue,g=0<c[v].spacing.toString().indexOf("%")?g*(1-parseFloat(c[v].spacing)/100):g-Math.min(c[v].spacing,.1*g)):this.viewportMinimum>c[v].startValue&&this.viewportMaximum>=c[v].endValue?(f=f-c[v].endValue+this.viewportMinimum,g=0<c[v].spacing.toString().indexOf("%")?g*(1-parseFloat(c[v].spacing)/100*(c[v].endValue-this.viewportMinimum)/(c[v].endValue-c[v].startValue)):g-Math.min(c[v].spacing,.1*g)*(c[v].endValue-this.viewportMinimum)/(c[v].endValue-c[v].startValue)):this.viewportMinimum<=c[v].startValue&&this.viewportMaximum<c[v].endValue&&(f=f-this.viewportMaximum+c[v].startValue,g=0<c[v].spacing.toString().indexOf("%")?g*(1-parseFloat(c[v].spacing)/100*(this.viewportMaximum-c[v].startValue)/(c[v].endValue-c[v].startValue)):g-Math.min(c[v].spacing,.1*g)*(this.viewportMaximum-c[v].startValue)/(c[v].endValue-c[v].startValue)));x.minimum=this.viewportMinimum,x.maximum=this.viewportMaximum,x.range=f,(this._position==="bottom"||this._position==="top")&&(this.logarithmic?(x.lnLogarithmBase=Math.log(this.logarithmBase),x.pixelPerUnit=(this.reversed?-1:1)*g*x.lnLogarithmBase/Math.log(Math.abs(f))):x.pixelPerUnit=(this.reversed?-1:1)*g/Math.abs(f),x.reference=this.reversed?this.lineCoordinates.x2:this.lineCoordinates.x1),(this._position==="left"||this._position==="right")&&(this.logarithmic?(x.lnLogarithmBase=Math.log(this.logarithmBase),x.pixelPerUnit=(this.reversed?1:-1)*g*x.lnLogarithmBase/Math.log(Math.abs(f))):x.pixelPerUnit=(this.reversed?1:-1)*g/Math.abs(f),x.reference=this.reversed?this.lineCoordinates.y1:this.lineCoordinates.y2),this.conversionParameters=x},St.prototype.calculateAxisParameters=function(){if(this.logarithmic)this.calculateLogarithmicAxisParameters();else{var g=this.chart.layoutManager.getFreeSpace(),c=!1,x=!1;this._position==="bottom"||this._position==="top"?(this.maxWidth=g.width,this.maxHeight=g.height):(this.maxWidth=g.height,this.maxHeight=g.width);var g=this.type==="axisX"?this.chart.plotInfo.axisPlacement==="xySwapped"?62:70:this.chart.plotInfo.axisPlacement==="xySwapped"?50:40,A=4;this.type==="axisX"&&(A=600>this.maxWidth?8:6);var g=Math.max(A,Math.floor(this.maxWidth/g)),f,v,k,A=0;if(!h(this.options.viewportMinimum)&&!h(this.options.viewportMaximum)&&this.options.viewportMinimum>=this.options.viewportMaximum&&(this.viewportMinimum=this.viewportMaximum=null),h(this.options.viewportMinimum)&&!h(this.sessionVariables.newViewportMinimum)&&!isNaN(this.sessionVariables.newViewportMinimum)?this.viewportMinimum=this.sessionVariables.newViewportMinimum:(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum),h(this.options.viewportMaximum)&&!h(this.sessionVariables.newViewportMaximum)&&!isNaN(this.sessionVariables.newViewportMaximum)?this.viewportMaximum=this.sessionVariables.newViewportMaximum:(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum),this.scaleBreaks){for(A=0;A<this.scaleBreaks._appliedBreaks.length;A++)if((!h(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[A].startValue||!h(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[A].startValue||!h(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[A].startValue)&&(!h(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[A].endValue||!h(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[A].endValue||!h(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[A].endValue)){this.scaleBreaks._appliedBreaks.splice(A,1);break}}if(this.type==="axisX"){if(this.dataSeries&&0<this.dataSeries.length)for(f=0;f<this.dataSeries.length;f++)this.dataSeries[f].xValueType==="dateTime"&&(x=!0);f=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,v=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,v-f===0&&(A=typeof this.options.interval>"u"?.4:this.options.interval,v+=A,f-=A),this.dataInfo.minDiff!==1/0?k=this.dataInfo.minDiff:1<v-f?k=.5*Math.abs(v-f):(k=1,x&&(c=!0))}else this.type==="axisY"&&(f=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,v=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,isFinite(f)||isFinite(v)?isFinite(f)?isFinite(v)||(v=f):f=v:(v=typeof this.options.interval>"u"?-1/0:this.options.interval,f=typeof this.options.interval<"u"||isFinite(this.dataInfo.minDiff)?0:1/0),f===0&&v===0?(v+=9,f=0):v-f===0?(A=Math.min(Math.abs(.01*Math.abs(v)),5),v+=A,f-=A):f>v?(A=Math.min(.01*Math.abs(this.getApparentDifference(v,f,null,!0)),5),0<=v?f=v-A:v=isFinite(f)?f+A:0):(A=Math.min(.01*Math.abs(this.getApparentDifference(f,v,null,!0)),.05),v!==0&&(v+=A),f!==0&&(f-=A)),k=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:1<v-f?.5*Math.abs(v-f):1,this.includeZero&&(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&0<f&&(f=0),this.includeZero&&(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&0>v&&(v=0));A=this.getApparentDifference(isNaN(this.viewportMinimum)||this.viewportMinimum===null?f:this.viewportMinimum,isNaN(this.viewportMaximum)||this.viewportMaximum===null?v:this.viewportMaximum,null,!0),this.type==="axisX"&&x?(this.intervalType||(A/1<=g?(this.interval=1,this.intervalType="millisecond"):A/2<=g?(this.interval=2,this.intervalType="millisecond"):A/5<=g?(this.interval=5,this.intervalType="millisecond"):A/10<=g?(this.interval=10,this.intervalType="millisecond"):A/20<=g?(this.interval=20,this.intervalType="millisecond"):A/50<=g?(this.interval=50,this.intervalType="millisecond"):A/100<=g?(this.interval=100,this.intervalType="millisecond"):A/200<=g?(this.interval=200,this.intervalType="millisecond"):A/250<=g?(this.interval=250,this.intervalType="millisecond"):A/300<=g?(this.interval=300,this.intervalType="millisecond"):A/400<=g?(this.interval=400,this.intervalType="millisecond"):A/500<=g?(this.interval=500,this.intervalType="millisecond"):A/(1*vt.secondDuration)<=g?(this.interval=1,this.intervalType="second"):A/(2*vt.secondDuration)<=g?(this.interval=2,this.intervalType="second"):A/(5*vt.secondDuration)<=g?(this.interval=5,this.intervalType="second"):A/(10*vt.secondDuration)<=g?(this.interval=10,this.intervalType="second"):A/(15*vt.secondDuration)<=g?(this.interval=15,this.intervalType="second"):A/(20*vt.secondDuration)<=g?(this.interval=20,this.intervalType="second"):A/(30*vt.secondDuration)<=g?(this.interval=30,this.intervalType="second"):A/(1*vt.minuteDuration)<=g?(this.interval=1,this.intervalType="minute"):A/(2*vt.minuteDuration)<=g?(this.interval=2,this.intervalType="minute"):A/(5*vt.minuteDuration)<=g?(this.interval=5,this.intervalType="minute"):A/(10*vt.minuteDuration)<=g?(this.interval=10,this.intervalType="minute"):A/(15*vt.minuteDuration)<=g?(this.interval=15,this.intervalType="minute"):A/(20*vt.minuteDuration)<=g?(this.interval=20,this.intervalType="minute"):A/(30*vt.minuteDuration)<=g?(this.interval=30,this.intervalType="minute"):A/(1*vt.hourDuration)<=g?(this.interval=1,this.intervalType="hour"):A/(2*vt.hourDuration)<=g?(this.interval=2,this.intervalType="hour"):A/(3*vt.hourDuration)<=g?(this.interval=3,this.intervalType="hour"):A/(6*vt.hourDuration)<=g?(this.interval=6,this.intervalType="hour"):A/(1*vt.dayDuration)<=g?(this.interval=1,this.intervalType="day"):A/(2*vt.dayDuration)<=g?(this.interval=2,this.intervalType="day"):A/(4*vt.dayDuration)<=g?(this.interval=4,this.intervalType="day"):A/(1*vt.weekDuration)<=g?(this.interval=1,this.intervalType="week"):A/(2*vt.weekDuration)<=g?(this.interval=2,this.intervalType="week"):A/(3*vt.weekDuration)<=g?(this.interval=3,this.intervalType="week"):A/(1*vt.monthDuration)<=g?(this.interval=1,this.intervalType="month"):A/(2*vt.monthDuration)<=g?(this.interval=2,this.intervalType="month"):A/(3*vt.monthDuration)<=g?(this.interval=3,this.intervalType="month"):A/(6*vt.monthDuration)<=g?(this.interval=6,this.intervalType="month"):(this.interval=A/(1*vt.yearDuration)<=g?1:A/(2*vt.yearDuration)<=g?2:A/(4*vt.yearDuration)<=g?4:Math.floor(St.getNiceNumber(A/(g-1),!0)/vt.yearDuration),this.intervalType="year")),(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=f-k/2),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=v+k/2),c?this.autoValueFormatString="MMM DD YYYY HH:mm":this.intervalType==="year"?this.autoValueFormatString="YYYY":this.intervalType==="month"?this.autoValueFormatString="MMM YYYY":this.intervalType==="week"?this.autoValueFormatString="MMM DD YYYY":this.intervalType==="day"?this.autoValueFormatString="MMM DD YYYY":this.intervalType==="hour"?this.autoValueFormatString="hh:mm TT":this.intervalType==="minute"?this.autoValueFormatString="hh:mm TT":this.intervalType==="second"?this.autoValueFormatString="hh:mm:ss TT":this.intervalType==="millisecond"&&(this.autoValueFormatString="fff'ms'"),this.valueFormatString||(this.valueFormatString=this.autoValueFormatString)):(this.intervalType="number",A=St.getNiceNumber(A,!1),this.interval=this.options&&0<this.options.interval?this.options.interval:St.getNiceNumber(A/(g-1),!0),(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.type==="axisX"?f-k/2:Math.floor(f/this.interval)*this.interval),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.type==="axisX"?v+k/2:Math.ceil(v/this.interval)*this.interval),this.viewportMaximum===0&&this.viewportMinimum===0&&(this.options.viewportMinimum===0?this.viewportMaximum+=10:this.options.viewportMaximum===0&&(this.viewportMinimum-=10),this.options&&typeof this.options.interval>"u"&&(this.interval=St.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(g-1),!0)))),(this.minimum===null||this.maximum===null)&&(this.type==="axisX"?(f=this.minimum!==null?this.minimum:this.dataInfo.min,v=this.maximum!==null?this.maximum:this.dataInfo.max,v-f===0&&(A=typeof this.options.interval>"u"?.4:this.options.interval,v+=A,f-=A),k=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:1<v-f?.5*Math.abs(v-f):1):this.type==="axisY"&&(f=this.minimum!==null?this.minimum:this.dataInfo.min,v=this.maximum!==null?this.maximum:this.dataInfo.max,isFinite(f)||isFinite(v)?f===0&&v===0?(v+=9,f=0):v-f===0?(A=Math.min(Math.abs(.01*Math.abs(v)),5),v+=A,f-=A):f>v?(A=Math.min(.01*Math.abs(this.getApparentDifference(v,f,null,!0)),5),0<=v?f=v-A:v=isFinite(f)?f+A:0):(A=Math.min(.01*Math.abs(this.getApparentDifference(f,v,null,!0)),.05),v!==0&&(v+=A),f!==0&&(f-=A)):(v=typeof this.options.interval>"u"?-1/0:this.options.interval,f=typeof this.options.interval<"u"||isFinite(this.dataInfo.minDiff)?0:1/0),k=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:1<v-f?.5*Math.abs(v-f):1,this.includeZero&&(this.minimum===null||isNaN(this.minimum))&&0<f&&(f=0),this.includeZero&&(this.maximum===null||isNaN(this.maximum))&&0>v&&(v=0)),Math.abs(this.getApparentDifference(f,v,null,!0)),this.type==="axisX"&&x?(this.valueType="dateTime",(this.minimum===null||isNaN(this.minimum))&&(this.minimum=f-k/2),(this.maximum===null||isNaN(this.maximum))&&(this.maximum=v+k/2)):(this.intervalType=this.valueType="number",this.minimum===null&&(this.minimum=this.type==="axisX"?f-k/2:Math.floor(f/this.interval)*this.interval,this.minimum=Math.min(this.minimum,this.sessionVariables.viewportMinimum===null||isNaN(this.sessionVariables.viewportMinimum)?1/0:this.sessionVariables.viewportMinimum)),this.maximum===null&&(this.maximum=this.type==="axisX"?v+k/2:Math.ceil(v/this.interval)*this.interval,this.maximum=Math.max(this.maximum,this.sessionVariables.viewportMaximum===null||isNaN(this.sessionVariables.viewportMaximum)?-1/0:this.sessionVariables.viewportMaximum)),this.maximum===0&&this.minimum===0&&(this.options.minimum===0?this.maximum+=10:this.options.maximum===0&&(this.minimum-=10)))),h(this.sessionVariables.newViewportMinimum)&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum)),h(this.sessionVariables.newViewportMaximum)&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum)),this.range=this.viewportMaximum-this.viewportMinimum,this.intervalStartPosition=this.type==="axisX"&&x?this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval):Math.floor((this.viewportMinimum+.2*this.interval)/this.interval)*this.interval,this.valueFormatString||(this.valueFormatString=St.generateValueFormatString(this.range,2))}},St.prototype.calculateLogarithmicAxisParameters=function(){var g=this.chart.layoutManager.getFreeSpace(),c=Math.log(this.logarithmBase),x;this._position==="bottom"||this._position==="top"?(this.maxWidth=g.width,this.maxHeight=g.height):(this.maxWidth=g.height,this.maxHeight=g.width);var g=this.type==="axisX"?500>this.maxWidth?7:Math.max(7,Math.floor(this.maxWidth/100)):Math.max(Math.floor(this.maxWidth/50),3),f,v,k,A;if(A=1,(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum),this.scaleBreaks){for(A=0;A<this.scaleBreaks._appliedBreaks.length;A++)if((!h(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[A].startValue||!h(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[A].startValue||!h(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[A].startValue)&&(!h(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[A].endValue||!h(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[A].endValue||!h(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[A].endValue)){this.scaleBreaks._appliedBreaks.splice(A,1);break}}this.type==="axisX"?(f=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,v=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,v/f===1&&(A=Math.pow(this.logarithmBase,typeof this.options.interval>"u"?.4:this.options.interval),v*=A,f/=A),k=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:v/f>this.logarithmBase?v/f*Math.pow(this.logarithmBase,.5):this.logarithmBase):this.type==="axisY"&&(f=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,v=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,0>=f&&!isFinite(v)?(v=typeof this.options.interval>"u"?0:this.options.interval,f=1):0>=f?f=v:isFinite(v)||(v=f),f===1&&v===1?(v*=this.logarithmBase-1/this.logarithmBase,f=1):v/f===1?(A=Math.min(v*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),v*=A,f/=A):f>v?(A=Math.min(f/v*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),1<=v?f=v/A:v=f*A):(A=Math.min(v/f*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),v!==1&&(v*=A),f!==1&&(f/=A)),k=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:v/f>this.logarithmBase?v/f*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&1<f&&(f=1),this.includeZero&&(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&1>v&&(v=1)),A=(isNaN(this.viewportMaximum)||this.viewportMaximum===null?v:this.viewportMaximum)/(isNaN(this.viewportMinimum)||this.viewportMinimum===null?f:this.viewportMinimum);var O=(isNaN(this.viewportMaximum)||this.viewportMaximum===null?v:this.viewportMaximum)-(isNaN(this.viewportMinimum)||this.viewportMinimum===null?f:this.viewportMinimum);if(this.intervalType="number",A=Math.pow(this.logarithmBase,St.getNiceNumber(Math.abs(Math.log(A)/c),!1)),this.options&&0<this.options.interval?this.interval=this.options.interval:(this.interval=St.getNiceExponent(Math.log(A)/c/(g-1),!0),x=St.getNiceNumber(O/(g-1),!0)),(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.type==="axisX"?f/Math.sqrt(k):Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(f)/c/this.interval))),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.type==="axisX"?v*Math.sqrt(k):Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(v)/c/this.interval))),this.viewportMaximum===1&&this.viewportMinimum===1&&(this.options.viewportMinimum===1?this.viewportMaximum*=this.logarithmBase-1/this.logarithmBase:this.options.viewportMaximum===1&&(this.viewportMinimum/=this.logarithmBase-1/this.logarithmBase),this.options&&typeof this.options.interval>"u"&&(this.interval=St.getNiceExponent(Math.ceil(Math.log(A)/c)/(g-1)),x=St.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(g-1),!0))),(this.minimum===null||this.maximum===null)&&(this.type==="axisX"?(f=this.minimum!==null?this.minimum:this.dataInfo.min,v=this.maximum!==null?this.maximum:this.dataInfo.max,v/f===1&&(A=Math.pow(this.logarithmBase,typeof this.options.interval>"u"?.4:this.options.interval),v*=A,f/=A),k=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:v/f>this.logarithmBase?v/f*Math.pow(this.logarithmBase,.5):this.logarithmBase):this.type==="axisY"&&(f=this.minimum!==null?this.minimum:this.dataInfo.min,v=this.maximum!==null?this.maximum:this.dataInfo.max,isFinite(f)||isFinite(v)?f===1&&v===1?(v*=this.logarithmBase,f/=this.logarithmBase):v/f===1?(A=Math.pow(this.logarithmBase,this.interval),v*=A,f/=A):f>v?(A=Math.min(.01*(f/v),5),1<=v?f=v/A:v=f*A):(A=Math.min(v/f*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),v!==1&&(v*=A),f!==1&&(f/=A)):(v=typeof this.options.interval>"u"?0:this.options.interval,f=1),k=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:v/f>this.logarithmBase?v/f*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(this.minimum===null||isNaN(this.minimum))&&1<f&&(f=1),this.includeZero&&(this.maximum===null||isNaN(this.maximum))&&1>v&&(v=1)),this.intervalType="number",this.minimum===null&&(this.minimum=this.type==="axisX"?f/Math.sqrt(k):Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(f)/c/this.interval)),this.minimum=Math.min(this.minimum,this.sessionVariables.viewportMinimum===null||isNaN(this.sessionVariables.viewportMinimum)?typeof this.sessionVariables.newViewportMinimum>"u"?1/0:this.sessionVariables.newViewportMinimum:this.sessionVariables.viewportMinimum)),this.maximum===null&&(this.maximum=this.type==="axisX"?v*Math.sqrt(k):Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(v)/c/this.interval)),this.maximum=Math.max(this.maximum,this.sessionVariables.viewportMaximum===null||isNaN(this.sessionVariables.viewportMaximum)?typeof this.sessionVariables.newViewportMaximum>"u"?0:this.sessionVariables.newViewportMaximum:this.sessionVariables.viewportMaximum)),this.maximum===1&&this.minimum===1&&(this.options.minimum===1?this.maximum*=this.logarithmBase-1/this.logarithmBase:this.options.maximum===1&&(this.minimum/=this.logarithmBase-1/this.logarithmBase))),this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum),this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum),this.viewportMinimum>this.viewportMaximum&&(!this.options.viewportMinimum&&!this.options.minimum||this.options.viewportMaximum||this.options.maximum?this.options.viewportMinimum||this.options.minimum||!this.options.viewportMaximum&&!this.options.maximum||(this.viewportMinimum=this.minimum=(this.options.viewportMaximum||this.options.maximum)/Math.pow(this.logarithmBase,2*Math.ceil(this.interval))):this.viewportMaximum=this.maximum=this.options.viewportMinimum||this.options.minimum),f=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(c*this.interval)+.2)*this.interval),this.range=this.viewportMaximum/this.viewportMinimum,this.noTicks=g,!this.options.interval&&this.range<Math.pow(this.logarithmBase,8>this.viewportMaximum||3>g?2:3)){for(c=Math.floor(this.viewportMinimum/x+.5)*x;c<this.viewportMinimum;)c+=x;this.equidistantInterval=!1,this.intervalStartPosition=c,this.interval=x}else this.options.interval||(x=Math.ceil(this.interval),this.range>this.interval&&(this.interval=x,f=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(c*this.interval)+.2)*this.interval))),this.equidistantInterval=!0,this.intervalStartPosition=f;if(!this.valueFormatString&&(this.valueFormatString="#,##0.##",1>this.viewportMinimum)&&(c=Math.floor(Math.abs(Math.log(this.viewportMinimum)/Math.LN10))+2,(isNaN(c)||!isFinite(c))&&(c=2),2<c))for(A=0;A<c-2;A++)this.valueFormatString+="#"},St.generateValueFormatString=function(c,x){var g="#,##0.",f=x;1>c&&(f+=Math.floor(Math.abs(Math.log(c)/Math.LN10)),isNaN(f)||!isFinite(f))&&(f=x);for(var v=0;v<f;v++)g+="#";return g},St.getNiceExponent=function(c,x){var g=Math.floor(Math.log(c)/Math.LN10),f=c/Math.pow(10,g),f=0>g?1>=f?1:5>=f?5:10:Math.max(Math.floor(f),1);return-20>g?Number(f*Math.pow(10,g)):Number((f*Math.pow(10,g)).toFixed(20))},St.getNiceNumber=function(c,x){var g=Math.floor(Math.log(c)/Math.LN10),f=c/Math.pow(10,g),f=x?1.5>f?1:3>f?2:7>f?5:10:1>=f?1:2>=f?2:5>=f?5:10;return-20>g?Number(f*Math.pow(10,g)):Number((f*Math.pow(10,g)).toFixed(20))},St.prototype.getLabelStartPoint=function(){var c=vt[this.intervalType+"Duration"]*this.interval,c=new Date(Math.floor(this.viewportMinimum/c)*c);return this.intervalType!=="millisecond"&&(this.intervalType==="second"?0<c.getMilliseconds()&&(c.setSeconds(c.getSeconds()+1),c.setMilliseconds(0)):this.intervalType==="minute"?(0<c.getSeconds()||0<c.getMilliseconds())&&(c.setMinutes(c.getMinutes()+1),c.setSeconds(0),c.setMilliseconds(0)):this.intervalType==="hour"?(0<c.getMinutes()||0<c.getSeconds()||0<c.getMilliseconds())&&(c.setHours(c.getHours()+1),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0)):this.intervalType==="day"?(0<c.getHours()||0<c.getMinutes()||0<c.getSeconds()||0<c.getMilliseconds())&&(c.setDate(c.getDate()+1),c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0)):this.intervalType==="week"?(0<c.getDay()||0<c.getHours()||0<c.getMinutes()||0<c.getSeconds()||0<c.getMilliseconds())&&(c.setDate(c.getDate()+(7-c.getDay())),c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0)):this.intervalType==="month"?(1<c.getDate()||0<c.getHours()||0<c.getMinutes()||0<c.getSeconds()||0<c.getMilliseconds())&&(c.setMonth(c.getMonth()+1),c.setDate(1),c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0)):this.intervalType==="year"&&(0<c.getMonth()||1<c.getDate()||0<c.getHours()||0<c.getMinutes()||0<c.getSeconds()||0<c.getMilliseconds())&&(c.setFullYear(c.getFullYear()+1),c.setMonth(0),c.setDate(1),c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0))),c},t(kn,me),t(rn,me),rn.prototype.createUserOptions=function(c){if(typeof c<"u"||this.options._isPlaceholder){var x=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.options._isPlaceholder||(_(this.parent[this.optionsName]),x=this.parent.options[this.optionsName].indexOf(this.options)),this.options=typeof c>"u"?{}:c,this.parent.options[this.optionsName][x]=this.options}},rn.prototype.render=function(c){if(this.spacing!==0||this.options.lineThickness!==0&&(typeof this.options.lineThickness<"u"||this.parent.lineThickness!==0)){var x=this.ctx,g=this.ctx.globalAlpha;this.ctx=c||this.ctx,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip();var f=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.startValue),v=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.endValue);this.ctx.strokeStyle=this.lineColor,this.ctx.fillStyle=this.color,this.ctx.beginPath(),this.ctx.globalAlpha=1,d(this.id);var k,A,O,N,D,V;c=Math.max(this.spacing,3);var F=Math.max(0,this.lineThickness);if(this.ctx.lineWidth=F,this.ctx.setLineDash&&this.ctx.setLineDash(S(this.lineDashType,F)),this.scaleBreaks.parent._position==="bottom"||this.scaleBreaks.parent._position==="top"){if(f=F%2===1?(f.x<<0)+.5:f.x<<0,A=F%2===1?(v.x<<0)+.5:v.x<<0,this.scaleBreaks.parent._position==="top"?(v=this.chart.plotArea.y1,O=this.chart.plotArea.y2+F/2+.5<<0):(v=this.chart.plotArea.y2,O=this.chart.plotArea.y1-F/2+.5<<0,c*=-1),this.bounds={x1:f-F/2,y1:v,x2:A+F/2,y2:O},this.ctx.moveTo(f,v),this.type==="straight"||this.scaleBreaks.parent._position==="top"&&0>=c||this.scaleBreaks.parent._position==="bottom"&&0<=c)this.ctx.lineTo(f,O),this.ctx.lineTo(A,O),this.ctx.lineTo(A,v);else if(this.type==="wavy"){N=f,D=v,k=.5,V=(O-D)/c/3;for(var I=0;I<V;I++)this.ctx.bezierCurveTo(N+k*c,D+c,N+k*c,D+2*c,N,D+3*c),D+=3*c,k*=-1;for(this.ctx.bezierCurveTo(N+k*c,D+c,N+k*c,D+2*c,N,D+3*c),N=A,k*=-1,this.ctx.lineTo(N,D),I=0;I<V;I++)this.ctx.bezierCurveTo(N+k*c,D-c,N+k*c,D-2*c,N,D-3*c),D-=3*c,k*=-1}else if(this.type==="zigzag"){for(k=-1,D=v+c,N=f+c,V=(O-D)/c/2,I=0;I<V;I++)this.ctx.lineTo(N,D),N+=2*k*c,D+=2*c,k*=-1;for(this.ctx.lineTo(N,D),N+=A-f,I=0;I<V+1;I++)this.ctx.lineTo(N,D),N+=2*k*c,D-=2*c,k*=-1;this.ctx.lineTo(N+k*c,D+c)}}else if(this.scaleBreaks.parent._position==="left"||this.scaleBreaks.parent._position==="right"){if(v=F%2===1?(v.y<<0)+.5:v.y<<0,O=F%2===1?(f.y<<0)+.5:f.y<<0,this.scaleBreaks.parent._position==="left"?(f=this.chart.plotArea.x1,A=this.chart.plotArea.x2+F/2+.5<<0):(f=this.chart.plotArea.x2,A=this.chart.plotArea.x1-F/2+.5<<0,c*=-1),this.bounds={x1:f,y1:v-F/2,x2:A,y2:O+F/2},this.ctx.moveTo(f,v),this.type==="straight"||this.scaleBreaks.parent._position==="left"&&0>=c||this.scaleBreaks.parent._position==="right"&&0<=c)this.ctx.lineTo(A,v),this.ctx.lineTo(A,O),this.ctx.lineTo(f,O);else if(this.type==="wavy"){for(N=f,D=v,k=.5,V=(A-N)/c/3,I=0;I<V;I++)this.ctx.bezierCurveTo(N+c,D+k*c,N+2*c,D+k*c,N+3*c,D),N+=3*c,k*=-1;for(this.ctx.bezierCurveTo(N+c,D+k*c,N+2*c,D+k*c,N+3*c,D),D=O,k*=-1,this.ctx.lineTo(N,D),I=0;I<V;I++)this.ctx.bezierCurveTo(N-c,D+k*c,N-2*c,D+k*c,N-3*c,D),N-=3*c,k*=-1}else if(this.type==="zigzag"){for(k=1,D=v-c,N=f+c,V=(A-N)/c/2,I=0;I<V;I++)this.ctx.lineTo(N,D),D+=2*k*c,N+=2*c,k*=-1;for(this.ctx.lineTo(N,D),D+=O-v,I=0;I<V+1;I++)this.ctx.lineTo(N,D),D+=2*k*c,N-=2*c,k*=-1;this.ctx.lineTo(N+c,D+k*c)}}0<F&&this.ctx.stroke(),this.ctx.closePath(),this.ctx.globalAlpha=this.fillOpacity,this.ctx.globalCompositeOperation="destination-over",this.ctx.fill(),this.ctx.restore(),this.ctx.globalAlpha=g,this.ctx=x}},t(rr,me),rr.prototype.createUserOptions=function(c){if(typeof c<"u"||this.options._isPlaceholder){var x=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.options._isPlaceholder||(_(this.parent.stripLines),x=this.parent.options.stripLines.indexOf(this.options)),this.options=typeof c>"u"?{}:c,this.parent.options.stripLines[x]=this.options}},rr.prototype.render=function(){this.ctx.save();var c=this.parent.getPixelCoordinatesOnAxis(this.value),x=Math.abs(this._thicknessType==="pixel"?this.thickness:this.parent.conversionParameters.pixelPerUnit*this.thickness);if(0<x){var g=this.opacity===null?1:this.opacity;this.ctx.strokeStyle=this.color,this.ctx.beginPath();var f=this.ctx.globalAlpha;this.ctx.globalAlpha=g,d(this.id);var v,k,A,O;this.ctx.lineWidth=x,this.ctx.setLineDash&&this.ctx.setLineDash(S(this.lineDashType,x)),this.parent._position==="bottom"||this.parent._position==="top"?(v=k=this.ctx.lineWidth%2===1?(c.x<<0)+.5:c.x<<0,A=this.chart.plotArea.y1,O=this.chart.plotArea.y2,this.bounds={x1:v-x/2,y1:A,x2:k+x/2,y2:O}):(this.parent._position==="left"||this.parent._position==="right")&&(A=O=this.ctx.lineWidth%2===1?(c.y<<0)+.5:c.y<<0,v=this.chart.plotArea.x1,k=this.chart.plotArea.x2,this.bounds={x1:v,y1:A-x/2,x2:k,y2:O+x/2}),this.ctx.moveTo(v,A),this.ctx.lineTo(k,O),this.ctx.stroke(),this.ctx.globalAlpha=f}this.ctx.restore()},t(Ye,me),Ye.prototype.render=function(c,x){var g,f,v,k,A=null,N=A=null,O="";if(!this.valueFormatString)if(this.parent.valueType==="dateTime")this.valueFormatString=this.parent.valueFormatString;else{var D=0,D=this.chart.plotInfo.axisPlacement==="xySwapped"?50<this.parent.range?0:500<this.chart.width&&25>this.parent.range?2:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(5>this.parent.range?2:10>this.parent.range?1:0):50<this.parent.range?0:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(5>this.parent.range?2:10>this.parent.range?1:0);this.valueFormatString=St.generateValueFormatString(this.parent.range,D)}var N=this.opacity===null?1:this.opacity,D=Math.abs(this._thicknessType==="pixel"?this.thickness:this.parent.conversionParameters.pixelPerUnit*this.thickness),V=this.chart.overlaidCanvasCtx,F=V.globalAlpha;if(V.globalAlpha=N,V.beginPath(),V.strokeStyle=this.color,V.lineWidth=D,V.save(),this.labelFontSize=h(this.options.labelFontSize)?this.parent.labelFontSize:this.labelFontSize,this.parent._position==="left"||this.parent._position==="right"?(this.labelMaxWidth=h(this.options.labelMaxWidth)?this.parent.bounds.x2-this.parent.bounds.x1:this.labelMaxWidth,this.labelMaxHeight=h(this.options.labelWrap)||this.labelWrap?3*this.chart.height:2*this.labelFontSize):(this.parent._position==="top"||this.parent._position==="bottom")&&(this.labelMaxWidth=h(this.options.labelMaxWidth)?3*this.chart.width:this.labelMaxWidth,this.labelMaxHeight=h(this.options.labelWrap)||this.labelWrap?this.parent.bounds.height:2*this.labelFontSize),0<D&&V.setLineDash&&V.setLineDash(S(this.lineDashType,D)),N=new ue(V,{x:0,y:0,padding:{top:2,right:3,bottom:2,left:4},backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxWidth:this.labelMaxWidth,maxHeight:this.labelMaxHeight,angle:this.labelAngle,text:O,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this.snapToDataPoint){var I=0,A=[];if(this.chart.plotInfo.axisPlacement==="xySwapped"){var C=null;this.parent._position==="bottom"||this.parent._position==="top"?I=this.parent.dataSeries[0].axisX.convertPixelToValue({y:x}):(this.parent._position==="left"||this.parent._position==="right")&&(I=this.parent.convertPixelToValue({y:x}));for(var W=0;W<this.parent.dataSeries.length;W++)(C=this.parent.dataSeries[W].getDataPointAtX(I,!0))&&0<=C.index&&(C.dataSeries=this.parent.dataSeries[W],C.dataPoint.y!==null&&A.push(C));if(C=null,A.length===0)return;if(A.sort(function(Ce,He){return Ce.distance-He.distance}),C=Math.abs(c-this.parent.convertValueToPixel(A[0].dataPoint.y)),W=0,A[0].dataSeries.type==="rangeBar"||A[0].dataSeries.type==="error")for(var C=Math.abs(c-this.parent.convertValueToPixel(A[W].dataPoint.y[0])),de=0,I=0;I<A.length;I++)if(A[I].dataPoint.y&&A[I].dataPoint.y.length)for(O=0;O<A[I].dataPoint.y.length;O++)de=Math.abs(c-this.parent.convertValueToPixel(A[I].dataPoint.y[O])),de<C&&(C=de,W=I);else de=Math.abs(c-this.parent.convertValueToPixel(A[I].dataPoint.y)),de<C&&(C=de,W=I);else if(A[0].dataSeries.type==="stackedBar")for(var C=Math.abs(c-this.parent.convertValueToPixel(A[0].dataPoint.y)),he=de=0,I=W=0;I<A.length;I++)if(A[I].dataPoint.y&&A[I].dataPoint.y.length)for(O=0;O<A[I].dataPoint.y.length;O++)de=Math.abs(c-this.parent.convertValueToPixel(A[I].dataPoint.y[O])),de<C&&(C=de,W=I);else he+=A[I].dataPoint.y,de=Math.abs(c-this.parent.convertValueToPixel(he)),de<C&&(C=de,W=I);else if(A[0].dataSeries.type==="stackedBar100")for(var C=Math.abs(c-this.parent.convertValueToPixel(A[0].dataPoint.y)),H=he=de=0,I=0;I<A.length;I++)if(A[I].dataPoint.y&&A[I].dataPoint.y.length)for(O=0;O<A[I].dataPoint.y.length;O++)de=Math.abs(c-this.parent.convertValueToPixel(A[I].dataPoint.y[O])),de<C&&(C=de,W=I);else he+=A[I].dataPoint.y,H=A[I].dataPoint.x.getTime?A[I].dataPoint.x.getTime():A[I].dataPoint.x,H=100*(he/A[I].dataSeries.plotUnit.dataPointYSums[H]),de=Math.abs(c-this.parent.convertValueToPixel(H)),de<C&&(C=de,W=I);else for(C=Math.abs(c-this.parent.convertValueToPixel(A[0].dataPoint.y)),I=W=de=0;I<A.length;I++)if(A[I].dataPoint.y&&A[I].dataPoint.y.length)for(O=0;O<A[I].dataPoint.y.length;O++)de=Math.abs(c-this.parent.convertValueToPixel(A[I].dataPoint.y[O])),de<C&&(C=de,W=I);else de=Math.abs(c-this.parent.convertValueToPixel(A[I].dataPoint.y)),de<C&&(C=de,W=I);if(O=A[W],this.parent._position==="bottom"||this.parent._position==="top"){if(g=0,this.parent.dataSeries[W].type==="rangeBar"||this.parent.dataSeries[W].type==="error"){for(C=Math.abs(c-this.parent.convertValueToPixel(O.dataPoint.y[0])),I=de=0;I<O.dataPoint.y.length;I++)de=Math.abs(c-this.parent.convertValueToPixel(O.dataPoint.y[I])),de<C&&(C=de,g=I);A=V.lineWidth%2===1?(this.parent.convertValueToPixel(O.dataPoint.y[g])<<0)+.5:this.parent.convertValueToPixel(O.dataPoint.y[g])<<0,N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.y[g]}):h(this.options.label)?qt(O.dataPoint.y[g],this.valueFormatString,this.chart._cultureInfo):this.label}else if(this.parent.dataSeries[W].type==="stackedBar"){for(C=Math.abs(c-this.parent.convertValueToPixel(A[0].dataPoint.y)),he=de=0,I=W;0<=I;I--)he+=A[I].dataPoint.y,de=Math.abs(c-this.parent.convertValueToPixel(he)),de<C&&(C=de,g=I);A=V.lineWidth%2===1?(this.parent.convertValueToPixel(he)<<0)+.5:this.parent.convertValueToPixel(he)<<0,N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.y}):h(this.options.label)?qt(O.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label}else if(this.parent.dataSeries[W].type==="stackedBar100"){for(C=Math.abs(c-this.parent.convertValueToPixel(A[0].dataPoint.y)),H=he=de=0,I=W;0<=I;I--)he+=A[I].dataPoint.y,H=A[I].dataPoint.x.getTime?A[I].dataPoint.x.getTime():A[I].dataPoint.x,H=100*(he/A[I].dataSeries.plotUnit.dataPointYSums[H]),de=Math.abs(c-this.parent.convertValueToPixel(H)),de<C&&(C=de,g=I);A=V.lineWidth%2===1?(this.parent.convertValueToPixel(H)<<0)+.5:this.parent.convertValueToPixel(H)<<0,N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:H}):h(this.options.label)?qt(H,this.valueFormatString,this.chart._cultureInfo):this.label}else A=V.lineWidth%2===1?(this.parent.convertValueToPixel(O.dataPoint.y)<<0)+.5:this.parent.convertValueToPixel(O.dataPoint.y)<<0,N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.y}):h(this.options.label)?qt(O.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label;g=f=A,v=this.chart.plotArea.y1,k=this.chart.plotArea.y2,this.bounds={x1:g-D/2,y1:v,x2:f+D/2,y2:k},N.x=g-N.measureText().width/2,N.x+N.width>this.chart.bounds.x2?N.x=this.chart.bounds.x2-N.width:N.x<this.chart.bounds.x1&&(N.x=this.chart.bounds.x1),N.y=this.parent.lineCoordinates.y2+N.fontSize/2+2}else if(this.parent._position==="left"||this.parent._position==="right"){if(v=k=A=V.lineWidth%2===1?(this.parent.convertValueToPixel(O.dataPoint.x)<<0)+.5:this.parent.convertValueToPixel(O.dataPoint.x)<<0,g=this.chart.plotArea.x1,f=this.chart.plotArea.x2,this.bounds={x1:g,y1:v-D/2,x2:f,y2:k+D/2},H=!1,this.parent.labels)for(A=Math.ceil(this.parent.interval),I=0;I<this.parent.viewportMaximum;I+=A)if(this.parent.labels[I])H=!0;else{H=!1;break}if(H){if(this.parent.type==="axisX")for(I=this.parent.convertPixelToValue({y:x}),C=null,W=0;W<this.parent.dataSeries.length;W++)(C=this.parent.dataSeries[W].getDataPointAtX(I,!0))&&0<=C.index&&(N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.x}):h(this.options.label)?C.dataPoint.label:this.label)}else this.parent.valueType==="dateTime"?N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.x}):h(this.options.label)?Fi(O.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:this.parent.valueType==="number"&&(N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.x}):h(this.options.label)?qt(O.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label);N.y=k+N.fontSize/2-N.measureText().height/2+2,N.y-N.fontSize/2<this.chart.bounds.y1?N.y=this.chart.bounds.y1+N.fontSize/2+2:N.y+N.measureText().height-N.fontSize/2>this.chart.bounds.y2&&(N.y=this.chart.bounds.y2-N.measureText().height+N.fontSize/2),this.parent._position==="left"?N.x=this.parent.lineCoordinates.x2-N.measureText().width:this.parent._position==="right"&&(N.x=this.parent.lineCoordinates.x2)}}else if(this.parent._position==="bottom"||this.parent._position==="top"){for(I=this.parent.convertPixelToValue({x:c}),W=0;W<this.parent.dataSeries.length;W++)(C=this.parent.dataSeries[W].getDataPointAtX(I,!0))&&0<=C.index&&(C.dataSeries=this.parent.dataSeries[W],C.dataPoint.y!==null&&A.push(C));if(A.length===0)return;if(A.sort(function(Ce,He){return Ce.distance-He.distance}),O=A[0],g=f=A=V.lineWidth%2===1?(this.parent.convertValueToPixel(O.dataPoint.x)<<0)+.5:this.parent.convertValueToPixel(O.dataPoint.x)<<0,v=this.chart.plotArea.y1,k=this.chart.plotArea.y2,this.bounds={x1:g-D/2,y1:v,x2:f+D/2,y2:k},H=!1,this.parent.labels)for(A=Math.ceil(this.parent.interval),I=0;I<this.parent.viewportMaximum;I+=A)if(this.parent.labels[I])H=!0;else{H=!1;break}if(H){if(this.parent.type==="axisX")for(I=this.parent.convertPixelToValue({x:c}),C=null,W=0;W<this.parent.dataSeries.length;W++)(C=this.parent.dataSeries[W].getDataPointAtX(I,!0))&&0<=C.index&&(N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.x}):h(this.options.label)?C.dataPoint.label:this.label)}else this.parent.valueType==="dateTime"?N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.x}):h(this.options.label)?Fi(O.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:this.parent.valueType==="number"&&(N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.x}):h(this.options.label)?qt(O.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label);N.x=g-N.measureText().width/2,N.x+N.width>this.chart.bounds.x2&&(N.x=this.chart.bounds.x2-N.width),N.x<this.chart.bounds.x1&&(N.x=this.chart.bounds.x1),this.parent._position==="bottom"?N.y=this.parent.lineCoordinates.y2+N.fontSize/2+2:this.parent._position==="top"&&(N.y=this.parent.lineCoordinates.y1-N.height+N.fontSize/2+2)}else if(this.parent._position==="left"||this.parent._position==="right"){for(!h(this.parent.dataSeries)&&0<this.parent.dataSeries.length&&(I=this.parent.dataSeries[0].axisX.convertPixelToValue({x:c})),W=0;W<this.parent.dataSeries.length;W++)(C=this.parent.dataSeries[W].getDataPointAtX(I,!0))&&0<=C.index&&(C.dataSeries=this.parent.dataSeries[W],C.dataPoint.y!==null&&A.push(C));if(A.length===0)return;if(A.sort(function(Ce,He){return Ce.distance-He.distance}),W=0,A[0].dataSeries.type==="rangeColumn"||A[0].dataSeries.type==="rangeArea"||A[0].dataSeries.type==="error"||A[0].dataSeries.type==="rangeSplineArea"||A[0].dataSeries.type==="candlestick"||A[0].dataSeries.type==="ohlc"||A[0].dataSeries.type==="boxAndWhisker")for(C=Math.abs(x-this.parent.convertValueToPixel(A[0].dataPoint.y[0])),I=de=0;I<A.length;I++)if(A[I].dataPoint.y&&A[I].dataPoint.y.length)for(O=0;O<A[I].dataPoint.y.length;O++)de=Math.abs(x-this.parent.convertValueToPixel(A[I].dataPoint.y[O])),de<C&&(C=de,W=I);else de=Math.abs(x-this.parent.convertValueToPixel(A[I].dataPoint.y)),de<C&&(C=de,W=I);else if(A[0].dataSeries.type==="stackedColumn"||A[0].dataSeries.type==="stackedArea")for(C=Math.abs(x-this.parent.convertValueToPixel(A[0].dataPoint.y)),I=he=de=0;I<A.length;I++)if(A[I].dataPoint.y&&A[I].dataPoint.y.length)for(O=0;O<A[I].dataPoint.y.length;O++)de=Math.abs(x-this.parent.convertValueToPixel(A[I].dataPoint.y[O])),de<C&&(C=de,W=I);else he+=A[I].dataPoint.y,de=Math.abs(x-this.parent.convertValueToPixel(he)),de<C&&(C=de,W=I);else if(A[0].dataSeries.type==="stackedColumn100"||A[0].dataSeries.type==="stackedArea100")for(C=Math.abs(x-this.parent.convertValueToPixel(A[0].dataPoint.y)),I=H=he=de=0;I<A.length;I++)if(A[I].dataPoint.y&&A[I].dataPoint.y.length)for(O=0;O<A[I].dataPoint.y.length;O++)de=Math.abs(x-this.parent.convertValueToPixel(A[I].dataPoint.y[O])),de<C&&(C=de,W=I);else he+=A[I].dataPoint.y,H=A[I].dataPoint.x.getTime?A[I].dataPoint.x.getTime():A[I].dataPoint.x,H=100*(he/A[I].dataSeries.plotUnit.dataPointYSums[H]),de=Math.abs(x-this.parent.convertValueToPixel(H)),de<C&&(C=de,W=I);else for(C=Math.abs(x-this.parent.convertValueToPixel(A[0].dataPoint.y)),I=de=0;I<A.length;I++)if(A[I].dataPoint.y&&A[I].dataPoint.y.length)for(O=0;O<A[I].dataPoint.y.length;O++)de=Math.abs(x-this.parent.convertValueToPixel(A[I].dataPoint.y[O])),de<C&&(C=de,W=I);else de=Math.abs(x-this.parent.convertValueToPixel(A[I].dataPoint.y)),de<C&&(C=de,W=I);if(O=A[W],g=0,this.parent.dataSeries[W].type==="rangeColumn"||this.parent.dataSeries[W].type==="rangeArea"||this.parent.dataSeries[W].type==="error"||this.parent.dataSeries[W].type==="rangeSplineArea"||this.parent.dataSeries[W].type==="candlestick"||this.parent.dataSeries[W].type==="ohlc"||this.parent.dataSeries[W].type==="boxAndWhisker"){for(C=Math.abs(x-this.parent.convertValueToPixel(O.dataPoint.y[0])),I=de=0;I<O.dataPoint.y.length;I++)de=Math.abs(x-this.parent.convertValueToPixel(O.dataPoint.y[I])),de<C&&(C=de,g=I);A=V.lineWidth%2===1?(this.parent.convertValueToPixel(O.dataPoint.y[g])<<0)+.5:this.parent.convertValueToPixel(O.dataPoint.y[g])<<0,N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.y[g]}):h(this.options.label)?qt(O.dataPoint.y[g],this.valueFormatString,this.chart._cultureInfo):this.label}else if(this.parent.dataSeries[W].type==="stackedColumn"||this.parent.dataSeries[W].type==="stackedArea"){for(C=Math.abs(x-this.parent.convertValueToPixel(A[0].dataPoint.y)),he=de=0,I=W;0<=I;I--)he+=A[I].dataPoint.y,de=Math.abs(x-this.parent.convertValueToPixel(he)),de<C&&(C=de,g=I);A=V.lineWidth%2===1?(this.parent.convertValueToPixel(he)<<0)+.5:this.parent.convertValueToPixel(he)<<0,N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.y}):h(this.options.label)?qt(O.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label}else if(this.parent.dataSeries[W].type==="stackedColumn100"||this.parent.dataSeries[W].type==="stackedArea100"){for(C=Math.abs(x-this.parent.convertValueToPixel(A[0].dataPoint.y)),he=de=0,I=W;0<=I;I--)he+=A[I].dataPoint.y,H=A[I].dataPoint.x.getTime?A[I].dataPoint.x.getTime():A[I].dataPoint.x,H=100*(he/A[I].dataSeries.plotUnit.dataPointYSums[H]),de=Math.abs(x-this.parent.convertValueToPixel(H)),de<C&&(C=de,g=I);A=V.lineWidth%2===1?(this.parent.convertValueToPixel(H)<<0)+.5:this.parent.convertValueToPixel(H)<<0,N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:H}):h(this.options.label)?qt(H,this.valueFormatString,this.chart._cultureInfo):this.label}else this.parent.dataSeries[W].type==="waterfall"?(A=V.lineWidth%2===1?(this.parent.convertValueToPixel(O.dataSeries.dataPointEOs[O.index].cumulativeSum)<<0)+.5:this.parent.convertValueToPixel(O.dataSeries.dataPointEOs[O.index].cumulativeSum)<<0,N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataSeries.dataPointEOs[O.index].cumulativeSum}):h(this.options.label)?qt(O.dataSeries.dataPointEOs[O.index].cumulativeSum,this.valueFormatString,this.chart._cultureInfo):this.label):(A=V.lineWidth%2===1?(this.parent.convertValueToPixel(O.dataPoint.y)<<0)+.5:this.parent.convertValueToPixel(O.dataPoint.y)<<0,N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:O.dataPoint.y}):h(this.options.label)?qt(O.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label);v=k=A,g=this.chart.plotArea.x1,f=this.chart.plotArea.x2,this.bounds={x1:g,y1:v-D/2,x2:f,y2:k+D/2},N.y=k+N.fontSize/2-N.measureText().height/2+2,N.y-N.fontSize/2<this.chart.bounds.y1?N.y=this.chart.bounds.y1+N.fontSize/2+2:N.y+N.measureText().height-N.fontSize/2>this.chart.bounds.y2&&(N.y=this.chart.bounds.y2-N.measureText().height+N.fontSize/2),this.parent._position==="left"?N.x=this.parent.lineCoordinates.x2-N.measureText().width:this.parent._position==="right"&&(N.x=this.parent.lineCoordinates.x2)}A=null,(this.parent._position==="bottom"||this.parent._position==="top")&&g>=this.parent.convertValueToPixel(this.parent.viewportMinimum)&&f<=this.parent.convertValueToPixel(this.parent.viewportMaximum)&&(0<D&&(V.moveTo(g,v),V.lineTo(f,k),V.stroke()),V.restore(),!h(N.text)&&(typeof N.text.valueOf()=="number"||0<N.text.length)&&N.render(!0)),(this.parent._position==="left"||this.parent._position==="right")&&k>=this.parent.convertValueToPixel(this.parent.viewportMaximum)&&v<=this.parent.convertValueToPixel(this.parent.viewportMinimum)&&(0<D&&(V.moveTo(g,v),V.lineTo(f,k),V.stroke()),V.restore(),!h(N.text)&&(typeof N.text.valueOf()=="number"||0<N.text.length)&&N.render(!0))}else{if(this.parent._position==="bottom"||this.parent._position==="top"?(g=f=A=V.lineWidth%2===1?(c<<0)+.5:c<<0,v=this.chart.plotArea.y1,k=this.chart.plotArea.y2,this.bounds={x1:g-D/2,y1:v,x2:f+D/2,y2:k}):(this.parent._position==="left"||this.parent._position==="right")&&(v=k=A=V.lineWidth%2===1?(x<<0)+.5:x<<0,g=this.chart.plotArea.x1,f=this.chart.plotArea.x2,this.bounds={x1:g,y1:v-D/2,x2:f,y2:k+D/2}),this.chart.plotInfo.axisPlacement==="xySwapped")if(this.parent._position==="left"||this.parent._position==="right"){if(H=!1,this.parent.labels)for(A=Math.ceil(this.parent.interval),I=0;I<this.parent.viewportMaximum;I+=A)if(this.parent.labels[I])H=!0;else{H=!1;break}if(H){if(this.parent.type==="axisX")for(I=this.parent.convertPixelToValue({y:x}),C=null,W=0;W<this.parent.dataSeries.length;W++)(C=this.parent.dataSeries[W].getDataPointAtX(I,!0))&&0<=C.index&&(N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(c)}):h(this.options.label)?C.dataPoint.label:this.label)}else this.parent.valueType==="dateTime"?N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(x)}):h(this.options.label)?Fi(this.parent.convertPixelToValue(x),this.valueFormatString,this.chart._cultureInfo):this.label:this.parent.valueType==="number"&&(N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(x)}):h(this.options.label)?qt(this.parent.convertPixelToValue(x),this.valueFormatString,this.chart._cultureInfo):this.label);N.y=x+N.fontSize/2-N.measureText().height/2+2,N.y-N.fontSize/2<this.chart.bounds.y1?N.y=this.chart.bounds.y1+N.fontSize/2+2:N.y+N.measureText().height-N.fontSize/2>this.chart.bounds.y2&&(N.y=this.chart.bounds.y2-N.measureText().height+N.fontSize/2),this.parent._position==="left"?N.x=this.parent.lineCoordinates.x1-N.measureText().width:this.parent._position==="right"&&(N.x=this.parent.lineCoordinates.x2)}else(this.parent._position==="bottom"||this.parent._position==="top")&&(N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(c)}):h(this.options.label)?qt(this.parent.convertPixelToValue(c),this.valueFormatString,this.chart._cultureInfo):this.label,N.x=g-N.measureText().width/2,N.x+N.width>this.chart.bounds.x2&&(N.x=this.chart.bounds.x2-N.width),N.x<this.chart.bounds.x1&&(N.x=this.chart.bounds.x1),this.parent._position==="bottom"&&(N.y=this.parent.lineCoordinates.y2+N.fontSize/2+2),this.parent._position==="top"&&(N.y=this.parent.lineCoordinates.y1-N.height+N.fontSize/2+2));else if(this.parent._position==="bottom"||this.parent._position==="top"){if(H=!1,O="",this.parent.labels)for(A=Math.ceil(this.parent.interval),I=0;I<this.parent.viewportMaximum;I+=A)if(this.parent.labels[I])H=!0;else{H=!1;break}if(H){if(this.parent.type==="axisX")for(I=this.parent.convertPixelToValue({x:c}),C=null,W=0;W<this.parent.dataSeries.length;W++)(C=this.parent.dataSeries[W].getDataPointAtX(I,!0))&&0<=C.index&&(N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(c)}):h(this.options.label)?C.dataPoint.label:this.label)}else this.parent.valueType==="dateTime"?N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(c)}):h(this.options.label)?Fi(this.parent.convertPixelToValue(c),this.valueFormatString,this.chart._cultureInfo):this.label:this.parent.valueType==="number"&&(N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:0<this.parent.dataSeries.length?this.parent.convertPixelToValue(c):""}):h(this.options.label)?qt(this.parent.convertPixelToValue(c),this.valueFormatString,this.chart._cultureInfo):this.label);N.x=g-N.measureText().width/2,N.x+N.width>this.chart.bounds.x2&&(N.x=this.chart.bounds.x2-N.width),N.x<this.chart.bounds.x1&&(N.x=this.chart.bounds.x1),this.parent._position==="bottom"?N.y=this.parent.lineCoordinates.y2+N.fontSize/2+2:this.parent._position==="top"&&(N.y=this.parent.lineCoordinates.y1-N.height+N.fontSize/2+2)}else(this.parent._position==="left"||this.parent._position==="right")&&(N.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(x)}):h(this.options.label)?qt(this.parent.convertPixelToValue(x),this.valueFormatString,this.chart._cultureInfo):this.label,N.y=x+N.fontSize/2-N.measureText().height/2+2,N.y-N.fontSize/2<this.chart.bounds.y1?N.y=this.chart.bounds.y1+N.fontSize/2+2:N.y+N.measureText().height-N.fontSize/2>this.chart.bounds.y2&&(N.y=this.chart.bounds.y2-N.measureText().height+N.fontSize/2),this.parent._position==="left"?N.x=this.parent.lineCoordinates.x2-N.measureText().width:this.parent._position==="right"&&(N.x=this.parent.lineCoordinates.x2));0<D&&(V.moveTo(g,v),V.lineTo(f,k),V.stroke()),V.restore(),!h(N.text)&&(typeof N.text.valueOf()=="number"||0<N.text.length)&&N.render(!0)}V.globalAlpha=F},t(rt,me),rt.prototype._initialize=function(){if(this.enabled){this.container=document.createElement("div"),this.container.setAttribute("class","canvasjs-chart-tooltip"),this.container.style.position="absolute",this.container.style.height="auto",this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)",this.container.style.zIndex="1000",this.container.style.pointerEvents="none",this.container.style.display="none";var c;c='<div style=" width: auto;height: auto;min-width: 50px;',c+="line-height: auto;",c+="margin: 0px 0px 0px 0px;",c+="padding: 5px;",c+="font-family: Calibri, Arial, Georgia, serif;",c+="font-weight: normal;",c+="font-style: "+(X?"italic;":"normal;"),c+="font-size: 14px;",c+="color: #000000;",c+="text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);",c+="text-align: left;",c+="border: 2px solid gray;",c+=X?"background: rgba(255,255,255,.9);":"background: rgb(255,255,255);",c+="text-indent: 0px;",c+="white-space: nowrap;",c+="border-radius: 5px;",c+="-moz-user-select:none;",c+="-khtml-user-select: none;",c+="-webkit-user-select: none;",c+="-ms-user-select: none;",c+="user-select: none;",X||(c+="filter: alpha(opacity = 90);",c+="filter: progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666');"),c+='} "> Sample Tooltip</div>',this.container.innerHTML=c,this.contentDiv=this.container.firstChild,this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.chart._canvasJSContainer.appendChild(this.container)}},rt.prototype.mouseMoveHandler=function(c,x){this._lastUpdated&&4>new Date().getTime()-this._lastUpdated||(this._lastUpdated=new Date().getTime(),this.chart.resetOverlayedCanvas(),this._updateToolTip(c,x))},rt.prototype._updateToolTip=function(c,x,g){if(g=typeof g>"u"?!0:g,this.container||this._initialize(),this.enabled||this.hide(),!this.chart.disableToolTip){if(typeof c>"u"||typeof x>"u"){if(isNaN(this._prevX)||isNaN(this._prevY))return;c=this._prevX,x=this._prevY}else this._prevX=c,this._prevY=x;var f=null,v=null,k=[],A=0;if(this.shared&&this.enabled&&this.chart.plotInfo.axisPlacement!=="none"){if(this.chart.plotInfo.axisPlacement==="xySwapped"){var O=[];if(this.chart.axisX)for(var N=0;N<this.chart.axisX.length;N++){for(var A=this.chart.axisX[N].convertPixelToValue({y:x}),D=null,f=0;f<this.chart.axisX[N].dataSeries.length;f++)(D=this.chart.axisX[N].dataSeries[f].getDataPointAtX(A,g))&&0<=D.index&&(D.dataSeries=this.chart.axisX[N].dataSeries[f],D.dataPoint.y!==null&&O.push(D));D=null}if(this.chart.axisX2)for(N=0;N<this.chart.axisX2.length;N++){for(A=this.chart.axisX2[N].convertPixelToValue({y:x}),D=null,f=0;f<this.chart.axisX2[N].dataSeries.length;f++)(D=this.chart.axisX2[N].dataSeries[f].getDataPointAtX(A,g))&&0<=D.index&&(D.dataSeries=this.chart.axisX2[N].dataSeries[f],D.dataPoint.y!==null&&O.push(D));D=null}}else{if(O=[],this.chart.axisX)for(N=0;N<this.chart.axisX.length;N++)for(A=this.chart.axisX[N].convertPixelToValue({x:c}),D=null,f=0;f<this.chart.axisX[N].dataSeries.length;f++)(D=this.chart.axisX[N].dataSeries[f].getDataPointAtX(A,g))&&0<=D.index&&(D.dataSeries=this.chart.axisX[N].dataSeries[f],D.dataPoint.y!==null&&O.push(D));if(this.chart.axisX2)for(N=0;N<this.chart.axisX2.length;N++)for(A=this.chart.axisX2[N].convertPixelToValue({x:c}),D=null,f=0;f<this.chart.axisX2[N].dataSeries.length;f++)(D=this.chart.axisX2[N].dataSeries[f].getDataPointAtX(A,g))&&0<=D.index&&(D.dataSeries=this.chart.axisX2[N].dataSeries[f],D.dataPoint.y!==null&&O.push(D))}if(O.length===0)return;for(O.sort(function(V,F){return V.distance-F.distance}),g=O[0],f=0;f<O.length;f++)O[f].dataPoint.x.valueOf()===g.dataPoint.x.valueOf()&&k.push(O[f]);O=null}else{if(D=this.chart.getDataPointAtXY(c,x,g))this.currentDataPointIndex=D.dataPointIndex,this.currentSeriesIndex=D.dataSeries.index;else if(X)if(D=R(c,x,this.chart._eventManager.ghostCtx),0<D&&typeof this.chart._eventManager.objectMap[D]<"u"){if(D=this.chart._eventManager.objectMap[D],D.objectType==="legendItem")return;this.currentSeriesIndex=D.dataSeriesIndex,this.currentDataPointIndex=0<=D.dataPointIndex?D.dataPointIndex:-1}else this.currentDataPointIndex=-1;else this.currentDataPointIndex=-1;if(0<=this.currentSeriesIndex){if(v=this.chart.data[this.currentSeriesIndex],D={},0<=this.currentDataPointIndex)f=v.dataPoints[this.currentDataPointIndex],D.dataSeries=v,D.dataPoint=f,D.index=this.currentDataPointIndex,D.distance=Math.abs(f.x-A),v.type==="waterfall"&&(D.cumulativeSumYStartValue=v.dataPointEOs[this.currentDataPointIndex].cumulativeSumYStartValue,D.cumulativeSum=v.dataPointEOs[this.currentDataPointIndex].cumulativeSum);else{if(!this.enabled||v.type!=="line"&&v.type!=="stepLine"&&v.type!=="spline"&&v.type!=="area"&&v.type!=="stepArea"&&v.type!=="splineArea"&&v.type!=="stackedArea"&&v.type!=="stackedArea100"&&v.type!=="rangeArea"&&v.type!=="rangeSplineArea"&&v.type!=="candlestick"&&v.type!=="ohlc"&&v.type!=="boxAndWhisker")return;A=v.axisX.convertPixelToValue({x:c}),D=v.getDataPointAtX(A,g),D.dataSeries=v,this.currentDataPointIndex=D.index,f=D.dataPoint}if(!h(D.dataPoint.y))if(D.dataSeries.axisY)if(0<D.dataPoint.y.length){for(f=g=0;f<D.dataPoint.y.length;f++)D.dataPoint.y[f]<D.dataSeries.axisY.viewportMinimum?g--:D.dataPoint.y[f]>D.dataSeries.axisY.viewportMaximum&&g++;g<D.dataPoint.y.length&&g>-D.dataPoint.y.length&&k.push(D)}else v.type==="column"||v.type==="bar"?0>D.dataPoint.y?0>D.dataSeries.axisY.viewportMinimum&&D.dataSeries.axisY.viewportMaximum>=D.dataPoint.y&&k.push(D):D.dataSeries.axisY.viewportMinimum<=D.dataPoint.y&&0<=D.dataSeries.axisY.viewportMaximum&&k.push(D):v.type==="bubble"?(g=this.chart._eventManager.objectMap[v.dataPointIds[D.index]].size/2,D.dataPoint.y>=D.dataSeries.axisY.viewportMinimum-g&&D.dataPoint.y<=D.dataSeries.axisY.viewportMaximum+g&&k.push(D)):v.type==="waterfall"?(g=0,D.cumulativeSumYStartValue<D.dataSeries.axisY.viewportMinimum?g--:D.cumulativeSumYStartValue>D.dataSeries.axisY.viewportMaximum&&g++,D.cumulativeSum<D.dataSeries.axisY.viewportMinimum?g--:D.cumulativeSum>D.dataSeries.axisY.viewportMaximum&&g++,2>g&&-2<g&&k.push(D)):(0<=D.dataSeries.type.indexOf("100")||v.type==="stackedColumn"||v.type==="stackedBar"||D.dataPoint.y>=D.dataSeries.axisY.viewportMinimum&&D.dataPoint.y<=D.dataSeries.axisY.viewportMaximum)&&k.push(D);else k.push(D)}}if(0<k.length&&(this.highlightObjects(k),this.enabled))if(g="",g=this.getToolTipInnerHTML({entries:k}),g!==null){this.contentDiv.innerHTML=g,g=!1,this.container.style.display==="none"&&(g=!0,this.container.style.display="block");try{this.contentDiv.style.background=this.backgroundColor?this.backgroundColor:X?"rgba(255,255,255,.9)":"rgb(255,255,255)",this.borderColor=k[0].dataSeries.type==="waterfall"?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:k[0].dataPoint.color?k[0].dataPoint.color:0<k[0].dataPoint.y?k[0].dataSeries.risingColor:k[0].dataSeries.fallingColor:k[0].dataSeries.type==="error"?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:k[0].dataSeries.color?k[0].dataSeries.color:k[0].dataSeries._colorSet[v.index%k[0].dataSeries._colorSet.length]:this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:k[0].dataPoint.color?k[0].dataPoint.color:k[0].dataSeries.color?k[0].dataSeries.color:k[0].dataSeries._colorSet[k[0].index%k[0].dataSeries._colorSet.length],this.contentDiv.style.borderWidth=this.borderThickness||this.borderThickness===0?this.borderThickness+"px":"2px",this.contentDiv.style.borderRadius=this.cornerRadius||this.cornerRadius===0?this.cornerRadius+"px":"5px",this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.contentDiv.style.fontSize=this.fontSize||this.fontSize===0?this.fontSize+"px":"14px",this.contentDiv.style.color=this.fontColor?this.fontColor:"#000000",this.contentDiv.style.fontFamily=this.fontFamily?this.fontFamily:"Calibri, Arial, Georgia, serif;",this.contentDiv.style.fontWeight=this.fontWeight?this.fontWeight:"normal",this.contentDiv.style.fontStyle=this.fontStyle?this.fontStyle:X?"italic":"normal"}catch{}k[0].dataSeries.type==="pie"||k[0].dataSeries.type==="doughnut"||k[0].dataSeries.type==="funnel"||k[0].dataSeries.type==="pyramid"||k[0].dataSeries.type==="bar"||k[0].dataSeries.type==="rangeBar"||k[0].dataSeries.type==="stackedBar"||k[0].dataSeries.type==="stackedBar100"?c=c-10-this.container.clientWidth:(c=k[0].dataSeries.axisX.convertValueToPixel(k[0].dataPoint.x)-this.container.clientWidth<<0,c-=10),0>c&&(c+=this.container.clientWidth+20),c+this.container.clientWidth>Math.max(this.chart.container.clientWidth,this.chart.width)&&(c=Math.max(0,Math.max(this.chart.container.clientWidth,this.chart.width)-this.container.clientWidth)),x=k.length!==1||this.shared||k[0].dataSeries.type!=="line"&&k[0].dataSeries.type!=="stepLine"&&k[0].dataSeries.type!=="spline"&&k[0].dataSeries.type!=="area"&&k[0].dataSeries.type!=="stepArea"&&k[0].dataSeries.type!=="splineArea"?k[0].dataSeries.type==="bar"||k[0].dataSeries.type==="rangeBar"||k[0].dataSeries.type==="stackedBar"||k[0].dataSeries.type==="stackedBar100"?k[0].dataSeries.axisX.convertValueToPixel(k[0].dataPoint.x):x:k[0].dataSeries.axisY.convertValueToPixel(k[0].dataPoint.y),x=-x+10,0<x+this.container.clientHeight+5&&(x-=x+this.container.clientHeight+5-0),this.fixMozTransitionDelay(c,x),!this.animationEnabled||g?this.disableAnimation():(this.enableAnimation(),this.container.style.MozTransition=this.mozContainerTransition),this.container.style.left=c+"px",this.container.style.bottom=x+"px"}else this.hide(!1)}},rt.prototype.highlightObjects=function(c){var x=this.chart.overlaidCanvasCtx;this.chart.resetOverlayedCanvas(),x.clearRect(0,0,this.chart.width,this.chart.height),x.save();var g=this.chart.plotArea,f=0;for(x.beginPath(),x.rect(g.x1,g.y1,g.x2-g.x1,g.y2-g.y1),x.clip(),g=0;g<c.length;g++){var v=c[g];if((v=this.chart._eventManager.objectMap[v.dataSeries.dataPointIds[v.index]])&&v.objectType&&v.objectType==="dataPoint"){var f=this.chart.data[v.dataSeriesIndex],k=f.dataPoints[v.dataPointIndex],A=v.dataPointIndex;k.highlightEnabled===!1||f.highlightEnabled!==!0&&k.highlightEnabled!==!0||(f.type==="line"||f.type==="stepLine"||f.type==="spline"||f.type==="scatter"||f.type==="area"||f.type==="stepArea"||f.type==="splineArea"||f.type==="stackedArea"||f.type==="stackedArea100"||f.type==="rangeArea"||f.type==="rangeSplineArea"?(k=f.getMarkerProperties(A,v.x1,v.y1,this.chart.overlaidCanvasCtx),k.size=Math.max(1.5*k.size<<0,10),k.borderColor=k.borderColor||"#FFFFFF",k.borderThickness=k.borderThickness||Math.ceil(.1*k.size),It.drawMarkers([k]),typeof v.y2<"u"&&(k=f.getMarkerProperties(A,v.x1,v.y2,this.chart.overlaidCanvasCtx),k.size=Math.max(1.5*k.size<<0,10),k.borderColor=k.borderColor||"#FFFFFF",k.borderThickness=k.borderThickness||Math.ceil(.1*k.size),It.drawMarkers([k]))):f.type==="bubble"?(k=f.getMarkerProperties(A,v.x1,v.y1,this.chart.overlaidCanvasCtx),k.size=v.size,k.color="white",k.borderColor="white",x.globalAlpha=.3,It.drawMarkers([k]),x.globalAlpha=1):f.type==="column"||f.type==="stackedColumn"||f.type==="stackedColumn100"||f.type==="bar"||f.type==="rangeBar"||f.type==="stackedBar"||f.type==="stackedBar100"||f.type==="rangeColumn"||f.type==="waterfall"?li(x,v.x1,v.y1,v.x2,v.y2,"white",0,null,!1,!1,!1,!1,.3):f.type==="pie"||f.type==="doughnut"?Pt(x,v.center,v.radius,"white",f.type,v.startAngle,v.endAngle,.3,v.percentInnerRadius):f.type==="funnel"||f.type==="pyramid"?Qt(x,v.funnelSection,.3,"white"):f.type==="candlestick"?(x.globalAlpha=1,x.strokeStyle=v.color,x.lineWidth=2*v.borderThickness,f=x.lineWidth%2===0?0:.5,x.beginPath(),x.moveTo(v.x3-f,Math.min(v.y2,v.y3)),x.lineTo(v.x3-f,Math.min(v.y1,v.y4)),x.stroke(),x.beginPath(),x.moveTo(v.x3-f,Math.max(v.y1,v.y4)),x.lineTo(v.x3-f,Math.max(v.y2,v.y3)),x.stroke(),li(x,v.x1,Math.min(v.y1,v.y4),v.x2,Math.max(v.y1,v.y4),"transparent",2*v.borderThickness,v.color,!1,!1,!1,!1),x.globalAlpha=1):f.type==="ohlc"?(x.globalAlpha=1,x.strokeStyle=v.color,x.lineWidth=2*v.borderThickness,f=x.lineWidth%2===0?0:.5,x.beginPath(),x.moveTo(v.x3-f,v.y2),x.lineTo(v.x3-f,v.y3),x.stroke(),x.beginPath(),x.moveTo(v.x3,v.y1),x.lineTo(v.x1,v.y1),x.stroke(),x.beginPath(),x.moveTo(v.x3,v.y4),x.lineTo(v.x2,v.y4),x.stroke(),x.globalAlpha=1):f.type==="boxAndWhisker"?(x.save(),x.globalAlpha=1,x.strokeStyle=v.stemColor,x.lineWidth=2*v.stemThickness,0<v.stemThickness&&(x.beginPath(),x.moveTo(v.x3,v.y2+v.borderThickness/2),x.lineTo(v.x3,v.y1+v.whiskerThickness/2),x.stroke(),x.beginPath(),x.moveTo(v.x3,v.y4-v.whiskerThickness/2),x.lineTo(v.x3,v.y3-v.borderThickness/2),x.stroke()),x.beginPath(),li(x,v.x1-v.borderThickness/2,Math.max(v.y2+v.borderThickness/2,v.y3+v.borderThickness/2),v.x2+v.borderThickness/2,Math.min(v.y2-v.borderThickness/2,v.y3-v.borderThickness/2),"transparent",v.borderThickness,v.color,!1,!1,!1,!1),x.globalAlpha=1,x.strokeStyle=v.whiskerColor,x.lineWidth=2*v.whiskerThickness,0<v.whiskerThickness&&(x.beginPath(),x.moveTo(Math.floor(v.x3-v.whiskerLength/2),v.y4),x.lineTo(Math.ceil(v.x3+v.whiskerLength/2),v.y4),x.stroke(),x.beginPath(),x.moveTo(Math.floor(v.x3-v.whiskerLength/2),v.y1),x.lineTo(Math.ceil(v.x3+v.whiskerLength/2),v.y1),x.stroke()),x.globalAlpha=1,x.strokeStyle=v.lineColor,x.lineWidth=2*v.lineThickness,0<v.lineThickness&&(x.beginPath(),x.moveTo(v.x1,v.y5),x.lineTo(v.x2,v.y5),x.stroke()),x.restore(),x.globalAlpha=1):f.type==="error"&&Qe(x,v.x1,v.y1,v.x2,v.y2,"white",v.whiskerProperties,v.stemProperties,v.isXYSwapped,.3))}}x.restore(),x.globalAlpha=1,x.beginPath()},rt.prototype.getToolTipInnerHTML=function(c){c=c.entries;for(var x=null,g=null,f=null,v=0,k="",A=!0,O=0;O<c.length;O++)if(c[O].dataSeries.toolTipContent||c[O].dataPoint.toolTipContent){A=!1;break}if(A&&(this.content&&typeof this.content=="function"||this.contentFormatter))c={chart:this.chart,toolTip:this.options,entries:c},x=this.contentFormatter?this.contentFormatter(c):this.content(c);else if(this.shared&&this.chart.plotInfo.axisPlacement!=="none"){for(var N=null,D="",O=0;O<c.length;O++)g=c[O].dataSeries,f=c[O].dataPoint,v=c[O].index,k="",O===0&&A&&!this.content&&(this.chart.axisX&&0<this.chart.axisX.length?D+=typeof this.chart.axisX[0].labels[f.x]<"u"?this.chart.axisX[0].labels[f.x]:"{x}":this.chart.axisX2&&0<this.chart.axisX2.length&&(D+=typeof this.chart.axisX2[0].labels[f.x]<"u"?this.chart.axisX2[0].labels[f.x]:"{x}"),D+="</br>",D=this.chart.replaceKeywordsWithValue(D,f,g,v)),f.toolTipContent===null||typeof f.toolTipContent>"u"&&g.options.toolTipContent===null||(g.type==="line"||g.type==="stepLine"||g.type==="spline"||g.type==="area"||g.type==="stepArea"||g.type==="splineArea"||g.type==="column"||g.type==="bar"||g.type==="scatter"||g.type==="stackedColumn"||g.type==="stackedColumn100"||g.type==="stackedBar"||g.type==="stackedBar100"||g.type==="stackedArea"||g.type==="stackedArea100"||g.type==="waterfall"?(this.chart.axisX&&1<this.chart.axisX.length&&(k+=N!=g.axisXIndex?g.axisX.title?g.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),k+=f.toolTipContent?f.toolTipContent:g.toolTipContent?g.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span style='"`+(this.options.fontColor?"":"'color:{color};'")+`"'>{name}:</span>&nbsp;&nbsp;{y}`,N=g.axisXIndex):g.type==="bubble"?(this.chart.axisX&&1<this.chart.axisX.length&&(k+=N!=g.axisXIndex?g.axisX.title?g.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),k+=f.toolTipContent?f.toolTipContent:g.toolTipContent?g.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span style='"`+(this.options.fontColor?"":"'color:{color};'")+`"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}`):g.type==="rangeColumn"||g.type==="rangeBar"||g.type==="rangeArea"||g.type==="rangeSplineArea"||g.type==="error"?(this.chart.axisX&&1<this.chart.axisX.length&&(k+=N!=g.axisXIndex?g.axisX.title?g.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),k+=f.toolTipContent?f.toolTipContent:g.toolTipContent?g.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span style='"`+(this.options.fontColor?"":"'color:{color};'")+`"'>{name}:</span>&nbsp;&nbsp;{y[0]},&nbsp;{y[1]}`):g.type==="candlestick"||g.type==="ohlc"?(this.chart.axisX&&1<this.chart.axisX.length&&(k+=N!=g.axisXIndex?g.axisX.title?g.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),k+=f.toolTipContent?f.toolTipContent:g.toolTipContent?g.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span style='"`+(this.options.fontColor?"":"'color:{color};'")+`"'>{name}:</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low:&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}`):g.type==="boxAndWhisker"&&(this.chart.axisX&&1<this.chart.axisX.length&&(k+=N!=g.axisXIndex?g.axisX.title?g.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),k+=f.toolTipContent?f.toolTipContent:g.toolTipContent?g.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span style='"`+(this.options.fontColor?"":"'color:{color};'")+`"'>{name}:</span><br/>Minimum: &nbsp;&nbsp;{y[0]}<br/>Q1: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}`),x===null&&(x=""),this.reversed===!0?(x=this.chart.replaceKeywordsWithValue(k,f,g,v)+x,O<c.length-1&&(x="</br>"+x)):(x+=this.chart.replaceKeywordsWithValue(k,f,g,v),O<c.length-1&&(x+="</br>")));x!==null&&(x=D+x)}else{if(g=c[0].dataSeries,f=c[0].dataPoint,v=c[0].index,f.toolTipContent===null||typeof f.toolTipContent>"u"&&g.options.toolTipContent===null)return null;g.type==="line"||g.type==="stepLine"||g.type==="spline"||g.type==="area"||g.type==="stepArea"||g.type==="splineArea"||g.type==="column"||g.type==="bar"||g.type==="scatter"||g.type==="stackedColumn"||g.type==="stackedColumn100"||g.type==="stackedBar"||g.type==="stackedBar100"||g.type==="stackedArea"||g.type==="stackedArea100"||g.type==="waterfall"?k=f.toolTipContent?f.toolTipContent:g.toolTipContent?g.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span style='"`+(this.options.fontColor?"":"'color:{color};'")+`"'>`+(f.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}":g.type==="bubble"?k=f.toolTipContent?f.toolTipContent:g.toolTipContent?g.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span style='"`+(this.options.fontColor?"":"'color:{color};'")+`"'>`+(f.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":g.type==="pie"||g.type==="doughnut"||g.type==="funnel"||g.type==="pyramid"?k=f.toolTipContent?f.toolTipContent:g.toolTipContent?g.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span style='"`+(this.options.fontColor?"":"'color:{color};'")+`"'>`+(f.name?"{name}:</span>&nbsp;&nbsp;":f.label?"{label}:</span>&nbsp;&nbsp;":"</span>")+"{y}":g.type==="rangeColumn"||g.type==="rangeBar"||g.type==="rangeArea"||g.type==="rangeSplineArea"||g.type==="error"?k=f.toolTipContent?f.toolTipContent:g.toolTipContent?g.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span style='"`+(this.options.fontColor?"":"'color:{color};'")+`"'>`+(f.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y[0]}, &nbsp;{y[1]}":g.type==="candlestick"||g.type==="ohlc"?k=f.toolTipContent?f.toolTipContent:g.toolTipContent?g.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span style='"`+(this.options.fontColor?"":"'color:{color};'")+`"'>`+(f.label?"{label}":"{x}")+"</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low: &nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}":g.type==="boxAndWhisker"&&(k=f.toolTipContent?f.toolTipContent:g.toolTipContent?g.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span style='"`+(this.options.fontColor?"":"'color:{color};'")+`"'>`+(f.label?"{label}":"{x}")+"</span><br/>Minimum: &nbsp;&nbsp;{y[0]}<br/>Q1: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}"),x===null&&(x=""),x+=this.chart.replaceKeywordsWithValue(k,f,g,v)}return x},rt.prototype.enableAnimation=function(){if(!this.container.style.WebkitTransition){var c=this.getContainerTransition(this.containerTransitionDuration);this.container.style.WebkitTransition=c,this.container.style.MsTransition=c,this.container.style.transition=c,this.container.style.MozTransition=this.mozContainerTransition}},rt.prototype.disableAnimation=function(){this.container.style.WebkitTransition&&(this.container.style.WebkitTransition="",this.container.style.MozTransition="",this.container.style.MsTransition="",this.container.style.transition="")},rt.prototype.hide=function(c){this.container&&(this.container.style.display="none",this.currentSeriesIndex=-1,this._prevY=this._prevX=NaN,(typeof c>"u"||c)&&this.chart.resetOverlayedCanvas())},rt.prototype.show=function(c,x,g){this._updateToolTip(c,x,typeof g>"u"?!1:g)},rt.prototype.fixMozTransitionDelay=function(c,x){if(20<this.chart._eventManager.lastObjectId)this.mozContainerTransition=this.getContainerTransition(0);else{var g=parseFloat(this.container.style.left),g=isNaN(g)?0:g,f=parseFloat(this.container.style.bottom),f=isNaN(f)?0:f;10<Math.sqrt(Math.pow(g-c,2)+Math.pow(f-x,2))?this.mozContainerTransition=this.getContainerTransition(.1):this.mozContainerTransition=this.getContainerTransition(0)}},rt.prototype.getContainerTransition=function(c){return"left "+c+"s ease-out 0s, bottom "+c+"s ease-out 0s"},dt.prototype.reset=function(){this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.eventObjects=[],X&&(this.ghostCtx.clearRect(0,0,this.chart.width,this.chart.height),this.ghostCtx.beginPath())},dt.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId},dt.prototype.mouseEventHandler=function(c){if(c.type==="mousemove"||c.type==="click"){var x=[],g=Qn(c),f=null;if((f=this.chart.getObjectAtXY(g.x,g.y,!1))&&typeof this.objectMap[f]<"u")if(f=this.objectMap[f],f.objectType==="dataPoint"){var v=this.chart.data[f.dataSeriesIndex],k=v.dataPoints[f.dataPointIndex],A=f.dataPointIndex;f.eventParameter={x:g.x,y:g.y,dataPoint:k,dataSeries:v.options,dataPointIndex:A,dataSeriesIndex:v.index,chart:this.chart},f.eventContext={context:k,userContext:k,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},x.push(f),f=this.objectMap[v.id],f.eventParameter={x:g.x,y:g.y,dataPoint:k,dataSeries:v.options,dataPointIndex:A,dataSeriesIndex:v.index,chart:this.chart},f.eventContext={context:v,userContext:v.options,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},x.push(this.objectMap[v.id])}else f.objectType==="legendItem"&&(v=this.chart.data[f.dataSeriesIndex],k=f.dataPointIndex!==null?v.dataPoints[f.dataPointIndex]:null,f.eventParameter={x:g.x,y:g.y,dataSeries:v.options,dataPoint:k,dataPointIndex:f.dataPointIndex,dataSeriesIndex:f.dataSeriesIndex,chart:this.chart},f.eventContext={context:this.chart.legend,userContext:this.chart.legend.options,mouseover:"itemmouseover",mousemove:"itemmousemove",mouseout:"itemmouseout",click:"itemclick"},x.push(f));for(v=[],g=0;g<this.mouseoveredObjectMaps.length;g++){for(k=!0,f=0;f<x.length;f++)if(x[f].id===this.mouseoveredObjectMaps[g].id){k=!1;break}k?this.fireEvent(this.mouseoveredObjectMaps[g],"mouseout",c):v.push(this.mouseoveredObjectMaps[g])}for(this.mouseoveredObjectMaps=v,g=0;g<x.length;g++){for(v=!1,f=0;f<this.mouseoveredObjectMaps.length;f++)if(x[g].id===this.mouseoveredObjectMaps[f].id){v=!0;break}v||(this.fireEvent(x[g],"mouseover",c),this.mouseoveredObjectMaps.push(x[g])),c.type==="click"?this.fireEvent(x[g],"click",c):c.type==="mousemove"&&this.fireEvent(x[g],"mousemove",c)}}},dt.prototype.fireEvent=function(c,x,g){if(c&&x){var f=c.eventParameter,v=c.eventContext,k=c.eventContext.userContext;k&&v&&k[v[x]]&&k[v[x]].call(k,f),x!=="mouseout"?k.cursor&&k.cursor!==g.target.style.cursor&&(g.target.style.cursor=k.cursor):(g.target.style.cursor=this.chart._defaultCursor,delete c.eventParameter,delete c.eventContext),x==="click"&&c.objectType==="dataPoint"&&this.chart.pieDoughnutClickHandler&&this.chart.pieDoughnutClickHandler.call(this.chart.data[c.dataSeriesIndex],f),x==="click"&&c.objectType==="dataPoint"&&this.chart.funnelPyramidClickHandler&&this.chart.funnelPyramidClickHandler.call(this.chart.data[c.dataSeriesIndex],f)}},Dt.prototype.animate=function(c,x,g,f,v){var k=this;for(this.chart.isAnimating=!0,v=v||pt.easing.linear,g&&this.animations.push({startTime:new Date().getTime()+(c||0),duration:x,animationCallback:g,onComplete:f}),c=[];0<this.animations.length;)x=this.animations.shift(),g=new Date().getTime(),f=0,x.startTime<=g&&(f=v(Math.min(g-x.startTime,x.duration),0,1,x.duration),f=Math.min(f,1),isNaN(f)||!isFinite(f))&&(f=1),1>f&&c.push(x),x.animationCallback(f),1<=f&&x.onComplete&&x.onComplete();this.animations=c,0<this.animations.length?this.animationRequestId=this.chart.requestAnimFrame.call(window,function(){k.animate.call(k)}):this.chart.isAnimating=!1},Dt.prototype.cancelAllAnimations=function(){this.animations=[],this.animationRequestId&&this.chart.cancelRequestAnimFrame.call(window,this.animationRequestId),this.animationRequestId=null,this.chart.isAnimating=!1};var pt={yScaleAnimation:function(c,x){if(c!==0){var g=x.dest,f=x.source.canvas,v=x.animationBase;g.drawImage(f,0,0,f.width,f.height,0,v-v*c,g.canvas.width/Wi,c*g.canvas.height/Wi)}},xScaleAnimation:function(c,x){if(c!==0){var g=x.dest,f=x.source.canvas,v=x.animationBase;g.drawImage(f,0,0,f.width,f.height,v-v*c,0,c*g.canvas.width/Wi,g.canvas.height/Wi)}},xClipAnimation:function(c,x){if(c!==0){var g=x.dest,f=x.source.canvas;g.save(),0<c&&g.drawImage(f,0,0,f.width*c,f.height,0,0,f.width*c/Wi,f.height/Wi),g.restore()}},fadeInAnimation:function(c,x){if(c!==0){var g=x.dest,f=x.source.canvas;g.save(),g.globalAlpha=c,g.drawImage(f,0,0,f.width,f.height,0,0,g.canvas.width/Wi,g.canvas.height/Wi),g.restore()}},easing:{linear:function(c,x,g,f){return g*c/f+x},easeOutQuad:function(c,x,g,f){return-g*(c/=f)*(c-2)+x},easeOutQuart:function(c,x,g,f){return-g*((c=c/f-1)*c*c*c-1)+x},easeInQuad:function(c,x,g,f){return g*(c/=f)*c+x},easeInQuart:function(c,x,g,f){return g*(c/=f)*c*c*c+x}}},It={drawMarker:function(c,x,g,f,v,k,A,O){if(g){var N=1;g.fillStyle=k||"#000000",g.strokeStyle=A||"#000000",g.lineWidth=O||0,g.setLineDash&&g.setLineDash(S("solid",O)),f==="circle"?(g.moveTo(c,x),g.beginPath(),g.arc(c,x,v/2,0,2*Math.PI,!1),k&&g.fill(),O&&(A?g.stroke():(N=g.globalAlpha,g.globalAlpha=.15,g.strokeStyle="black",g.stroke(),g.globalAlpha=N))):f==="square"?(g.beginPath(),g.rect(c-v/2,x-v/2,v,v),k&&g.fill(),O&&(A?g.stroke():(N=g.globalAlpha,g.globalAlpha=.15,g.strokeStyle="black",g.stroke(),g.globalAlpha=N))):f==="triangle"?(g.beginPath(),g.moveTo(c-v/2,x+v/2),g.lineTo(c+v/2,x+v/2),g.lineTo(c,x-v/2),g.closePath(),k&&g.fill(),O&&(A?g.stroke():(N=g.globalAlpha,g.globalAlpha=.15,g.strokeStyle="black",g.stroke(),g.globalAlpha=N)),g.beginPath()):f==="cross"&&(g.strokeStyle=k,g.lineWidth=v/4,g.beginPath(),g.moveTo(c-v/2,x-v/2),g.lineTo(c+v/2,x+v/2),g.stroke(),g.moveTo(c+v/2,x-v/2),g.lineTo(c-v/2,x+v/2),g.stroke())}},drawMarkers:function(c){for(var x=0;x<c.length;x++){var g=c[x];It.drawMarker(g.x,g.y,g.ctx,g.type,g.size,g.color,g.borderColor,g.borderThickness)}}};return te}(),Pi.Chart.version="v2.3.1 GA"})();document.createElement("canvas").getContext||function(){function t(){return this.context_||(this.context_=new w(this))}function n(xe,ke,Ve){var it=oe.call(arguments,2);return function(){return xe.apply(ke,it.concat(oe.call(arguments)))}}function e(xe){return String(xe).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function i(xe){xe.namespaces.g_vml_||xe.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),xe.namespaces.g_o_||xe.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),xe.styleSheets.ex_canvas_||(xe=xe.createStyleSheet(),xe.owningElement.id="ex_canvas_",xe.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}")}function r(xe){var ke=xe.srcElement;switch(xe.propertyName){case"width":ke.getContext().clearRect(),ke.style.width=ke.attributes.width.nodeValue+"px",ke.firstChild.style.width=ke.clientWidth+"px";break;case"height":ke.getContext().clearRect(),ke.style.height=ke.attributes.height.nodeValue+"px",ke.firstChild.style.height=ke.clientHeight+"px"}}function s(xe){xe=xe.srcElement,xe.firstChild&&(xe.firstChild.style.width=xe.clientWidth+"px",xe.firstChild.style.height=xe.clientHeight+"px")}function a(){return[[1,0,0],[0,1,0],[0,0,1]]}function l(xe,ke){for(var Ve=a(),it=0;3>it;it++)for(var Je=0;3>Je;Je++){for(var st=0,ot=0;3>ot;ot++)st+=xe[it][ot]*ke[ot][Je];Ve[it][Je]=st}return Ve}function d(xe,ke){ke.fillStyle=xe.fillStyle,ke.lineCap=xe.lineCap,ke.lineJoin=xe.lineJoin,ke.lineWidth=xe.lineWidth,ke.miterLimit=xe.miterLimit,ke.shadowBlur=xe.shadowBlur,ke.shadowColor=xe.shadowColor,ke.shadowOffsetX=xe.shadowOffsetX,ke.shadowOffsetY=xe.shadowOffsetY,ke.strokeStyle=xe.strokeStyle,ke.globalAlpha=xe.globalAlpha,ke.font=xe.font,ke.textAlign=xe.textAlign,ke.textBaseline=xe.textBaseline,ke.arcScaleX_=xe.arcScaleX_,ke.arcScaleY_=xe.arcScaleY_,ke.lineScale_=xe.lineScale_}function u(xe){var Ve=xe.indexOf("(",3),ke=xe.indexOf(")",Ve+1),Ve=xe.substring(Ve+1,ke).split(",");return(Ve.length!=4||xe.charAt(3)!="a")&&(Ve[3]=1),Ve}function h(xe,ke,Ve){return Math.min(Ve,Math.max(ke,xe))}function _(xe,ke,Ve){return 0>Ve&&Ve++,1<Ve&&Ve--,1>6*Ve?xe+6*(ke-xe)*Ve:1>2*Ve?ke:2>3*Ve?xe+6*(ke-xe)*(2/3-Ve):xe}function b(xe){if(xe in X)return X[xe];var ke,Ve=1;if(xe=String(xe),xe.charAt(0)=="#")ke=xe;else if(/^rgb/.test(xe)){Ve=u(xe),ke="#";for(var it,Je=0;3>Je;Je++)it=Ve[Je].indexOf("%")!=-1?Math.floor(255*(parseFloat(Ve[Je])/100)):+Ve[Je],ke+=Y[h(it,0,255)];Ve=+Ve[3]}else if(/^hsl/.test(xe)){if(Je=Ve=u(xe),ke=parseFloat(Je[0])/360%360,0>ke&&ke++,it=h(parseFloat(Je[1])/100,0,1),Je=h(parseFloat(Je[2])/100,0,1),it==0)it=Je=ke=Je;else{var st=.5>Je?Je*(1+it):Je+it-Je*it,ot=2*Je-st;it=_(ot,st,ke+1/3),Je=_(ot,st,ke),ke=_(ot,st,ke-1/3)}ke="#"+Y[Math.floor(255*it)]+Y[Math.floor(255*Je)]+Y[Math.floor(255*ke)],Ve=Ve[3]}else ke=le[xe]||xe;return X[xe]={color:ke,alpha:Ve}}function w(xe){this.m_=a(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.fillStyle=this.strokeStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*be,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=xe;var ke="width:"+xe.clientWidth+"px;height:"+xe.clientHeight+"px;overflow:hidden;position:absolute",Ve=xe.ownerDocument.createElement("div");Ve.style.cssText=ke,xe.appendChild(Ve),ke=Ve.cloneNode(!1),ke.style.backgroundColor="red",ke.style.filter="alpha(opacity=0)",xe.appendChild(ke),this.element_=Ve,this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function S(xe,ke,Ve,it){xe.currentPath_.push({type:"bezierCurveTo",cp1x:ke.x,cp1y:ke.y,cp2x:Ve.x,cp2y:Ve.y,x:it.x,y:it.y}),xe.currentX_=it.x,xe.currentY_=it.y}function L(xe,ke){var it=b(xe.strokeStyle),Ve=it.color,it=it.alpha*xe.globalAlpha,Je=xe.lineScale_*xe.lineWidth;1>Je&&(it*=Je),ke.push("<g_vml_:stroke",' opacity="',it,'"',' joinstyle="',xe.lineJoin,'"',' miterlimit="',xe.miterLimit,'"',' endcap="',Ze[xe.lineCap]||"square",'"',' weight="',Je,'px"',' color="',Ve,'" />')}function R(xe,ke,Ve,it){var Je=xe.fillStyle,st=xe.arcScaleX_,ot=xe.arcScaleY_,pn=it.x-Ve.x,tn=it.y-Ve.y;if(Je instanceof Q){var Tt=0,mt=it=0,Mn=0,vt=1;if(Je.type_=="gradient"){Tt=Je.x1_/st,Ve=Je.y1_/ot;var Nn=z(xe,Je.x0_/st,Je.y0_/ot),Tt=z(xe,Tt,Ve),Tt=180*Math.atan2(Tt.x-Nn.x,Tt.y-Nn.y)/Math.PI;0>Tt&&(Tt+=360),1e-6>Tt&&(Tt=0)}else Nn=z(xe,Je.x0_,Je.y0_),it=(Nn.x-Ve.x)/pn,mt=(Nn.y-Ve.y)/tn,pn/=st*be,tn/=ot*be,vt=se.max(pn,tn),Mn=2*Je.r0_/vt,vt=2*Je.r1_/vt-Mn;st=Je.colors_,st.sort(function(Br,Fi){return Br.offset-Fi.offset}),ot=st.length,Nn=st[0].color,Ve=st[ot-1].color,pn=st[0].alpha*xe.globalAlpha,xe=st[ot-1].alpha*xe.globalAlpha;for(var tn=[],ui=0;ui<ot;ui++){var Mr=st[ui];tn.push(Mr.offset*vt+Mn+" "+Mr.color)}ke.push('<g_vml_:fill type="',Je.type_,'"',' method="none" focus="100%"',' color="',Nn,'"',' color2="',Ve,'"',' colors="',tn.join(","),'"',' opacity="',xe,'"',' g_o_:opacity2="',pn,'"',' angle="',Tt,'"',' focusposition="',it,",",mt,'" />')}else Je instanceof q?pn&&tn&&ke.push("<g_vml_:fill",' position="',-Ve.x/pn*st*st,",",-Ve.y/tn*ot*ot,'"',' type="tile"',' src="',Je.src_,'" />'):(Je=b(xe.fillStyle),ke.push('<g_vml_:fill color="',Je.color,'" opacity="',Je.alpha*xe.globalAlpha,'" />'))}function z(xe,ke,Ve){return xe=xe.m_,{x:be*(ke*xe[0][0]+Ve*xe[1][0]+xe[2][0])-Z,y:be*(ke*xe[0][1]+Ve*xe[1][1]+xe[2][1])-Z}}function ne(xe,ke,Ve){isFinite(ke[0][0])&&isFinite(ke[0][1])&&isFinite(ke[1][0])&&isFinite(ke[1][1])&&isFinite(ke[2][0])&&isFinite(ke[2][1])&&(xe.m_=ke,Ve&&(xe.lineScale_=ue(K(ke[0][0]*ke[1][1]-ke[0][1]*ke[1][0]))))}function Q(xe){this.type_=xe,this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0,this.colors_=[]}function q(xe,ke){if(!xe||xe.nodeType!=1||xe.tagName!="IMG")throw new T("TYPE_MISMATCH_ERR");if(xe.readyState!="complete")throw new T("INVALID_STATE_ERR");switch(ke){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=ke;break;default:throw new T("SYNTAX_ERR")}this.src_=xe.src,this.width_=xe.width,this.height_=xe.height}function T(xe){this.code=this[xe],this.message=xe+": DOM Exception "+this.code}var se=Math,_e=se.round,Me=se.sin,me=se.cos,K=se.abs,ue=se.sqrt,be=10,Z=be/2;navigator.userAgent.match(/MSIE ([\d.]+)?/);var oe=Array.prototype.slice;i(document);var Ee={init:function(xe){xe=xe||document,xe.createElement("canvas"),xe.attachEvent("onreadystatechange",n(this.init_,this,xe))},init_:function(xe){xe=xe.getElementsByTagName("canvas");for(var ke=0;ke<xe.length;ke++)this.initElement(xe[ke])},initElement:function(xe){if(!xe.getContext){xe.getContext=t,i(xe.ownerDocument),xe.innerHTML="",xe.attachEvent("onpropertychange",r),xe.attachEvent("onresize",s);var ke=xe.attributes;ke.width&&ke.width.specified?xe.style.width=ke.width.nodeValue+"px":xe.width=xe.clientWidth,ke.height&&ke.height.specified?xe.style.height=ke.height.nodeValue+"px":xe.height=xe.clientHeight}return xe}};Ee.init();for(var Y=[],De=0;16>De;De++)for(var G=0;16>G;G++)Y[16*De+G]=De.toString(16)+G.toString(16);var le={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},X={},Ue={},Ze={butt:"flat",round:"round"},De=w.prototype;De.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},De.beginPath=function(){this.currentPath_=[]},De.moveTo=function(xe,ke){var Ve=z(this,xe,ke);this.currentPath_.push({type:"moveTo",x:Ve.x,y:Ve.y}),this.currentX_=Ve.x,this.currentY_=Ve.y},De.lineTo=function(xe,ke){var Ve=z(this,xe,ke);this.currentPath_.push({type:"lineTo",x:Ve.x,y:Ve.y}),this.currentX_=Ve.x,this.currentY_=Ve.y},De.bezierCurveTo=function(xe,ke,Ve,it,Je,st){Je=z(this,Je,st),xe=z(this,xe,ke),Ve=z(this,Ve,it),S(this,xe,Ve,Je)},De.quadraticCurveTo=function(xe,ke,Ve,it){xe=z(this,xe,ke),Ve=z(this,Ve,it),it={x:this.currentX_+2/3*(xe.x-this.currentX_),y:this.currentY_+2/3*(xe.y-this.currentY_)},S(this,it,{x:it.x+(Ve.x-this.currentX_)/3,y:it.y+(Ve.y-this.currentY_)/3},Ve)},De.arc=function(xe,ke,Ve,it,Je,st){Ve*=be;var ot=st?"at":"wa",pn=xe+me(it)*Ve-Z,tn=ke+Me(it)*Ve-Z;it=xe+me(Je)*Ve-Z,Je=ke+Me(Je)*Ve-Z,pn!=it||st||(pn+=.125),xe=z(this,xe,ke),pn=z(this,pn,tn),it=z(this,it,Je),this.currentPath_.push({type:ot,x:xe.x,y:xe.y,radius:Ve,xStart:pn.x,yStart:pn.y,xEnd:it.x,yEnd:it.y})},De.rect=function(xe,ke,Ve,it){this.moveTo(xe,ke),this.lineTo(xe+Ve,ke),this.lineTo(xe+Ve,ke+it),this.lineTo(xe,ke+it),this.closePath()},De.strokeRect=function(xe,ke,Ve,it){var Je=this.currentPath_;this.beginPath(),this.moveTo(xe,ke),this.lineTo(xe+Ve,ke),this.lineTo(xe+Ve,ke+it),this.lineTo(xe,ke+it),this.closePath(),this.stroke(),this.currentPath_=Je},De.fillRect=function(xe,ke,Ve,it){var Je=this.currentPath_;this.beginPath(),this.moveTo(xe,ke),this.lineTo(xe+Ve,ke),this.lineTo(xe+Ve,ke+it),this.lineTo(xe,ke+it),this.closePath(),this.fill(),this.currentPath_=Je},De.createLinearGradient=function(xe,ke,Ve,it){var Je=new Q("gradient");return Je.x0_=xe,Je.y0_=ke,Je.x1_=Ve,Je.y1_=it,Je},De.createRadialGradient=function(xe,ke,Ve,it,Je,st){var ot=new Q("gradientradial");return ot.x0_=xe,ot.y0_=ke,ot.r0_=Ve,ot.x1_=it,ot.y1_=Je,ot.r1_=st,ot},De.drawImage=function(xe,ke){var Ve,it,Je,st,ot,pn,tn,Tt;Je=xe.runtimeStyle.width,st=xe.runtimeStyle.height,xe.runtimeStyle.width="auto",xe.runtimeStyle.height="auto";var mt=xe.width,Mn=xe.height;if(xe.runtimeStyle.width=Je,xe.runtimeStyle.height=st,arguments.length==3)Ve=arguments[1],it=arguments[2],ot=pn=0,tn=Je=mt,Tt=st=Mn;else if(arguments.length==5)Ve=arguments[1],it=arguments[2],Je=arguments[3],st=arguments[4],ot=pn=0,tn=mt,Tt=Mn;else if(arguments.length==9)ot=arguments[1],pn=arguments[2],tn=arguments[3],Tt=arguments[4],Ve=arguments[5],it=arguments[6],Je=arguments[7],st=arguments[8];else throw Error("Invalid number of arguments");var vt=z(this,Ve,it),Nn=[];if(Nn.push(" <g_vml_:group",' coordsize="',10*be,",",10*be,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;"),this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var ui=[];ui.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",_e(vt.x/be),",","Dy=",_e(vt.y/be),"");var Mr=z(this,Ve+Je,it),Br=z(this,Ve,it+st);Ve=z(this,Ve+Je,it+st),vt.x=se.max(vt.x,Mr.x,Br.x,Ve.x),vt.y=se.max(vt.y,Mr.y,Br.y,Ve.y),Nn.push("padding:0 ",_e(vt.x/be),"px ",_e(vt.y/be),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",ui.join(""),", sizingmethod='clip');")}else Nn.push("top:",_e(vt.y/be),"px;left:",_e(vt.x/be),"px;");Nn.push(' ">','<g_vml_:image src="',xe.src,'"',' style="width:',be*Je,"px;"," height:",be*st,'px"',' cropleft="',ot/mt,'"',' croptop="',pn/Mn,'"',' cropright="',(mt-ot-tn)/mt,'"',' cropbottom="',(Mn-pn-Tt)/Mn,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",Nn.join(""))},De.stroke=function(xe){var ke=[];ke.push("<g_vml_:shape",' filled="',!!xe,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0,0"',' coordsize="',10*be,",",10*be,'"',' stroked="',!xe,'"',' path="');for(var Ve={x:null,y:null},it={x:null,y:null},Je=0;Je<this.currentPath_.length;Je++){var st=this.currentPath_[Je];switch(st.type){case"moveTo":ke.push(" m ",_e(st.x),",",_e(st.y));break;case"lineTo":ke.push(" l ",_e(st.x),",",_e(st.y));break;case"close":ke.push(" x "),st=null;break;case"bezierCurveTo":ke.push(" c ",_e(st.cp1x),",",_e(st.cp1y),",",_e(st.cp2x),",",_e(st.cp2y),",",_e(st.x),",",_e(st.y));break;case"at":case"wa":ke.push(" ",st.type," ",_e(st.x-this.arcScaleX_*st.radius),",",_e(st.y-this.arcScaleY_*st.radius)," ",_e(st.x+this.arcScaleX_*st.radius),",",_e(st.y+this.arcScaleY_*st.radius)," ",_e(st.xStart),",",_e(st.yStart)," ",_e(st.xEnd),",",_e(st.yEnd))}st&&((Ve.x==null||st.x<Ve.x)&&(Ve.x=st.x),(it.x==null||st.x>it.x)&&(it.x=st.x),(Ve.y==null||st.y<Ve.y)&&(Ve.y=st.y),(it.y==null||st.y>it.y)&&(it.y=st.y))}ke.push(' ">'),xe?R(this,ke,Ve,it):L(this,ke),ke.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",ke.join(""))},De.fill=function(){this.stroke(!0)},De.closePath=function(){this.currentPath_.push({type:"close"})},De.save=function(){var xe={};d(this,xe),this.aStack_.push(xe),this.mStack_.push(this.m_),this.m_=l(a(),this.m_)},De.restore=function(){this.aStack_.length&&(d(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},De.translate=function(xe,ke){ne(this,l([[1,0,0],[0,1,0],[xe,ke,1]],this.m_),!1)},De.rotate=function(xe){var ke=me(xe);xe=Me(xe),ne(this,l([[ke,xe,0],[-xe,ke,0],[0,0,1]],this.m_),!1)},De.scale=function(xe,ke){this.arcScaleX_*=xe,this.arcScaleY_*=ke,ne(this,l([[xe,0,0],[0,ke,0],[0,0,1]],this.m_),!0)},De.transform=function(xe,ke,Ve,it,Je,st){ne(this,l([[xe,ke,0],[Ve,it,0],[Je,st,1]],this.m_),!0)},De.setTransform=function(xe,ke,Ve,it,Je,st){ne(this,[[xe,ke,0],[Ve,it,0],[Je,st,1]],!0)},De.drawText_=function(xe,ke,Ve,it,Je){var st=this.m_;it=0;var ot=1e3,pn=0,tn=[],Tt;if(Tt=this.font,Ue[Tt])Tt=Ue[Tt];else{var mt=document.createElement("div").style;try{mt.font=Tt}catch{}Tt=Ue[Tt]={style:mt.fontStyle||"normal",variant:mt.fontVariant||"normal",weight:mt.fontWeight||"normal",size:mt.fontSize||10,family:mt.fontFamily||"sans-serif"}}var mt=Tt,Mn=this.element_;Tt={};for(var vt in mt)Tt[vt]=mt[vt];switch(vt=parseFloat(Mn.currentStyle.fontSize),Mn=parseFloat(mt.size),typeof mt.size=="number"?Tt.size=mt.size:mt.size.indexOf("px")!=-1?Tt.size=Mn:mt.size.indexOf("em")!=-1?Tt.size=vt*Mn:mt.size.indexOf("%")!=-1?Tt.size=vt/100*Mn:mt.size.indexOf("pt")!=-1?Tt.size=Mn/.75:Tt.size=vt,Tt.size*=.981,vt=Tt.style+" "+Tt.variant+" "+Tt.weight+" "+Tt.size+"px "+Tt.family,Mn=this.element_.currentStyle,mt=this.textAlign.toLowerCase(),mt){case"left":case"center":case"right":break;case"end":mt=Mn.direction=="ltr"?"right":"left";break;case"start":mt=Mn.direction=="rtl"?"right":"left";break;default:mt="left"}switch(this.textBaseline){case"hanging":case"top":pn=Tt.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":pn=-Tt.size/2.25}switch(mt){case"right":it=1e3,ot=.05;break;case"center":it=ot=500}ke=z(this,ke+0,Ve+pn),tn.push('<g_vml_:line from="',-it,' 0" to="',ot,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!Je,'" stroked="',!!Je,'" style="position:absolute;width:1px;height:1px;">'),Je?L(this,tn):R(this,tn,{x:-it,y:0},{x:ot,y:Tt.size}),Je=st[0][0].toFixed(3)+","+st[1][0].toFixed(3)+","+st[0][1].toFixed(3)+","+st[1][1].toFixed(3)+",0,0",ke=_e(ke.x/be)+","+_e(ke.y/be),tn.push('<g_vml_:skew on="t" matrix="',Je,'" ',' offset="',ke,'" origin="',it,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',e(xe),'" style="v-text-align:',mt,";font:",e(vt),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",tn.join(""))},De.fillText=function(xe,ke,Ve,it){this.drawText_(xe,ke,Ve,it,!1)},De.strokeText=function(xe,ke,Ve,it){this.drawText_(xe,ke,Ve,it,!0)},De.measureText=function(xe){this.textMeasureEl_||(this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild);var ke=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(ke.createTextNode(xe)),{width:this.textMeasureEl_.offsetWidth}},De.clip=function(){},De.arcTo=function(){},De.createPattern=function(xe,ke){return new q(xe,ke)},Q.prototype.addColorStop=function(xe,ke){ke=b(ke),this.colors_.push({offset:xe,color:ke.color,alpha:ke.alpha})},De=T.prototype=Error(),De.INDEX_SIZE_ERR=1,De.DOMSTRING_SIZE_ERR=2,De.HIERARCHY_REQUEST_ERR=3,De.WRONG_DOCUMENT_ERR=4,De.INVALID_CHARACTER_ERR=5,De.NO_DATA_ALLOWED_ERR=6,De.NO_MODIFICATION_ALLOWED_ERR=7,De.NOT_FOUND_ERR=8,De.NOT_SUPPORTED_ERR=9,De.INUSE_ATTRIBUTE_ERR=10,De.INVALID_STATE_ERR=11,De.SYNTAX_ERR=12,De.INVALID_MODIFICATION_ERR=13,De.NAMESPACE_ERR=14,De.INVALID_ACCESS_ERR=15,De.VALIDATION_ERR=16,De.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=Ee,CanvasRenderingContext2D=w,CanvasGradient=Q,CanvasPattern=q,DOMException=T}()});var Fy;function kf(){return Fy}function Ta(t){let n=Fy;return Fy=t,n}var a3=Symbol("NotFound");function Ud(t){return t===a3||t?.name==="\u0275NotFound"}function If(t,n){return Object.is(t,n)}var go=null,Ef=!1,By=1,AB=null,_o=Symbol("SIGNAL");function ni(t){let n=go;return go=t,n}function Of(){return go}var Fc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function qd(t){if(Ef)throw new Error("");if(go===null)return;go.consumerOnSignalRead(t);let n=go.producersTail;if(n!==void 0&&n.producer===t)return;let e,i=go.recomputing;if(i&&(e=n!==void 0?n.nextProducer:go.producers,e!==void 0&&e.producer===t)){go.producersTail=e,e.lastReadVersion=t.version;return}let r=t.consumersTail;if(r!==void 0&&r.consumer===go&&(!i||IB(r,go)))return;let s=Yd(go),a={producer:t,consumer:go,nextProducer:e,prevConsumer:r,lastReadVersion:t.version,nextConsumer:void 0};go.producersTail=a,n!==void 0?n.nextProducer=a:go.producers=a,s&&c3(t,a)}function l3(){By++}function Ff(t){if(!(Yd(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===By)){if(!t.producerMustRecompute(t)&&!zu(t)){Df(t);return}t.producerRecomputeValue(t),Df(t)}}function Ly(t){if(t.consumers===void 0)return;let n=Ef;Ef=!0;try{for(let e=t.consumers;e!==void 0;e=e.nextConsumer){let i=e.consumer;i.dirty||DB(i)}}finally{Ef=n}}function Ny(){return go?.consumerAllowSignalWrites!==!1}function DB(t){t.dirty=!0,Ly(t),t.consumerMarkedDirty?.(t)}function Df(t){t.dirty=!1,t.lastCleanEpoch=By}function Bc(t){return t&&(t.producersTail=void 0,t.recomputing=!0),ni(t)}function Hd(t,n){if(ni(n),!t)return;t.recomputing=!1;let e=t.producersTail,i=e!==void 0?e.nextProducer:t.producers;if(i!==void 0){if(Yd(t))do i=Vy(i);while(i!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function zu(t){for(let n=t.producers;n!==void 0;n=n.nextProducer){let e=n.producer,i=n.lastReadVersion;if(i!==e.version||(Ff(e),i!==e.version))return!0}return!1}function Bf(t){if(Yd(t)){let n=t.producers;for(;n!==void 0;)n=Vy(n)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function c3(t,n){let e=t.consumersTail,i=Yd(t);if(e!==void 0?(n.nextConsumer=e.nextConsumer,e.nextConsumer=n):(n.nextConsumer=void 0,t.consumers=n),n.prevConsumer=e,t.consumersTail=n,!i)for(let r=t.producers;r!==void 0;r=r.nextProducer)c3(r.producer,r)}function Vy(t){let n=t.producer,e=t.nextProducer,i=t.nextConsumer,r=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:n.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(n.consumers=i,!Yd(n)){let s=n.producers;for(;s!==void 0;)s=Vy(s)}return e}function Yd(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Lf(t){AB?.(t)}function IB(t,n){let e=n.producersTail;if(e!==void 0){let i=n.producers;do{if(i===t)return!0;if(i===e)break;i=i.nextProducer}while(i!==void 0)}return!1}function Nf(t,n){let e=Object.create(OB);e.computation=t,n!==void 0&&(e.equal=n);let i=()=>{if(Ff(e),qd(e),e.value===Wu)throw e.error;return e.value};return i[_o]=e,Lf(e),i}var Tf=Symbol("UNSET"),Af=Symbol("COMPUTING"),Wu=Symbol("ERRORED"),OB=_n(Et({},Fc),{value:Tf,dirty:!0,error:null,equal:If,kind:"computed",producerMustRecompute(t){return t.value===Tf||t.value===Af},producerRecomputeValue(t){if(t.value===Af)throw new Error("");let n=t.value;t.value=Af;let e=Bc(t),i,r=!1;try{i=t.computation(),ni(null),r=n!==Tf&&n!==Wu&&i!==Wu&&t.equal(n,i)}catch(s){i=Wu,t.error=s}finally{Hd(t,e)}if(r){t.value=n;return}t.value=i,t.version++}});function FB(){throw new Error}var d3=FB;function h3(t){d3(t)}function Ry(t){d3=t}var BB=null;function jy(t,n){let e=Object.create(Vf);e.value=t,n!==void 0&&(e.equal=n);let i=()=>u3(e);return i[_o]=e,Lf(e),[i,a=>Xd(e,a),a=>Gy(e,a)]}function u3(t){return qd(t),t.value}function Xd(t,n){Ny()||h3(t),t.equal(t.value,n)||(t.value=n,LB(t))}function Gy(t,n){Ny()||h3(t),Xd(t,n(t.value))}var Vf=_n(Et({},Fc),{equal:If,value:void 0,kind:"signal"});function LB(t){t.version++,l3(),Ly(t),BB?.(t)}function Fn(t){return typeof t=="function"}function Jd(t){let e=t(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Rf=Jd(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Uu(t,n){if(t){let e=t.indexOf(n);0<=e&&t.splice(e,1)}}var Ar=class t{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let s of e)s.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(Fn(i))try{i()}catch(s){n=s instanceof Rf?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{p3(s)}catch(a){n=n??[],a instanceof Rf?n=[...n,...a.errors]:n.push(a)}}if(n)throw new Rf(n)}}add(n){var e;if(n&&n!==this)if(this.closed)p3(n);else{if(n instanceof t){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(n)}}_hasParent(n){let{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){let{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&Uu(e,n)}remove(n){let{_finalizers:e}=this;e&&Uu(e,n),n instanceof t&&n._removeParent(this)}};Ar.EMPTY=(()=>{let t=new Ar;return t.closed=!0,t})();var Wy=Ar.EMPTY;function jf(t){return t instanceof Ar||t&&"closed"in t&&Fn(t.remove)&&Fn(t.add)&&Fn(t.unsubscribe)}function p3(t){Fn(t)?t():t.unsubscribe()}var Qs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Qd={setTimeout(t,n,...e){let{delegate:i}=Qd;return i?.setTimeout?i.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){let{delegate:n}=Qd;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Gf(t){Qd.setTimeout(()=>{let{onUnhandledError:n}=Qs;if(n)n(t);else throw t})}function qu(){}var f3=zy("C",void 0,void 0);function m3(t){return zy("E",void 0,t)}function g3(t){return zy("N",t,void 0)}function zy(t,n,e){return{kind:t,value:n,error:e}}var Lc=null;function $d(t){if(Qs.useDeprecatedSynchronousErrorHandling){let n=!Lc;if(n&&(Lc={errorThrown:!1,error:null}),t(),n){let{errorThrown:e,error:i}=Lc;if(Lc=null,e)throw i}}else t()}function _3(t){Qs.useDeprecatedSynchronousErrorHandling&&Lc&&(Lc.errorThrown=!0,Lc.error=t)}var Nc=class extends Ar{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,jf(n)&&n.add(this)):this.destination=RB}static create(n,e,i){return new Kd(n,e,i)}next(n){this.isStopped?qy(g3(n),this):this._next(n)}error(n){this.isStopped?qy(m3(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?qy(f3,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},NB=Function.prototype.bind;function Uy(t,n){return NB.call(t,n)}var Hy=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){Wf(i)}}error(n){let{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){Wf(i)}else Wf(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){Wf(e)}}},Kd=class extends Nc{constructor(n,e,i){super();let r;if(Fn(n)||!n)r={next:n??void 0,error:e??void 0,complete:i??void 0};else{let s;this&&Qs.useDeprecatedNextContext?(s=Object.create(n),s.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&Uy(n.next,s),error:n.error&&Uy(n.error,s),complete:n.complete&&Uy(n.complete,s)}):r=n}this.destination=new Hy(r)}};function Wf(t){Qs.useDeprecatedSynchronousErrorHandling?_3(t):Gf(t)}function VB(t){throw t}function qy(t,n){let{onStoppedNotification:e}=Qs;e&&Qd.setTimeout(()=>e(t,n))}var RB={closed:!0,next:qu,error:VB,complete:qu};var Zd=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ls(t){return t}function Yy(...t){return Xy(t)}function Xy(t){return t.length===0?ls:t.length===1?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}var $n=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){let s=GB(e)?e:new Kd(e,i,r);return $d(()=>{let{operator:a,source:l}=this;s.add(a?a.call(s,l):l?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=y3(i),new i((r,s)=>{let a=new Kd({next:l=>{try{e(l)}catch(d){s(d),a.unsubscribe()}},error:s,complete:r});this.subscribe(a)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[Zd](){return this}pipe(...e){return Xy(e)(this)}toPromise(e){return e=y3(e),new e((i,r)=>{let s;this.subscribe(a=>s=a,a=>r(a),()=>i(s))})}}return t.create=n=>new t(n),t})();function y3(t){var n;return(n=t??Qs.Promise)!==null&&n!==void 0?n:Promise}function jB(t){return t&&Fn(t.next)&&Fn(t.error)&&Fn(t.complete)}function GB(t){return t&&t instanceof Nc||jB(t)&&jf(t)}function Jy(t){return Fn(t?.lift)}function bi(t){return n=>{if(Jy(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function fi(t,n,e,i,r){return new Qy(t,n,e,i,r)}var Qy=class extends Nc{constructor(n,e,i,r,s,a){super(n),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=e?function(l){try{e(l)}catch(d){n.error(d)}}:super._next,this._error=r?function(l){try{r(l)}catch(d){n.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function eh(){return bi((t,n)=>{let e=null;t._refCount++;let i=fi(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){e=null;return}let r=t._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}var th=class extends $n{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Jy(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Ar;let e=this.getSubject();n.add(this.source.subscribe(fi(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Ar.EMPTY)}return n}refCount(){return eh()(this)}};var v3=Jd(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var yn=(()=>{class t extends $n{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new zf(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new v3}next(e){$d(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){$d(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){$d(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:s}=this;return i||r?Wy:(this.currentObservers=null,s.push(e),new Ar(()=>{this.currentObservers=null,Uu(s,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:s}=this;i?e.error(r):s&&e.complete()}asObservable(){let e=new $n;return e.source=this,e}}return t.create=(n,e)=>new zf(n,e),t})(),zf=class extends yn{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,n)}error(n){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,n)}complete(){var n,e;(e=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||e===void 0||e.call(n)}_subscribe(n){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(n))!==null&&i!==void 0?i:Wy}};var mi=class extends yn{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){let{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}};var Uo=new $n(t=>t.complete());function b3(t){return t&&Fn(t.schedule)}function x3(t){return t[t.length-1]}function Uf(t){return Fn(x3(t))?t.pop():void 0}function Ul(t){return b3(x3(t))?t.pop():void 0}function w3(t,n,e,i){function r(s){return s instanceof e?s:new e(function(a){a(s)})}return new(e||(e=Promise))(function(s,a){function l(h){try{u(i.next(h))}catch(_){a(_)}}function d(h){try{u(i.throw(h))}catch(_){a(_)}}function u(h){h.done?s(h.value):r(h.value).then(l,d)}u((i=i.apply(t,n||[])).next())})}function C3(t){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vc(t){return this instanceof Vc?(this.v=t,this):new Vc(t)}function M3(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(t,n||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(w){return function(S){return Promise.resolve(S).then(w,_)}}function l(w,S){i[w]&&(r[w]=function(L){return new Promise(function(R,z){s.push([w,L,R,z])>1||d(w,L)})},S&&(r[w]=S(r[w])))}function d(w,S){try{u(i[w](S))}catch(L){b(s[0][3],L)}}function u(w){w.value instanceof Vc?Promise.resolve(w.value.v).then(h,_):b(s[0][2],w)}function h(w){d("next",w)}function _(w){d("throw",w)}function b(w,S){w(S),s.shift(),s.length&&d(s[0][0],s[0][1])}}function S3(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],e;return n?n.call(t):(t=typeof C3=="function"?C3(t):t[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(s){e[s]=t[s]&&function(a){return new Promise(function(l,d){a=t[s](a),r(l,d,a.done,a.value)})}}function r(s,a,l,d){Promise.resolve(d).then(function(u){s({value:u,done:l})},a)}}var nh=t=>t&&typeof t.length=="number"&&typeof t!="function";function qf(t){return Fn(t?.then)}function Hf(t){return Fn(t[Zd])}function Yf(t){return Symbol.asyncIterator&&Fn(t?.[Symbol.asyncIterator])}function Xf(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function WB(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Jf=WB();function Qf(t){return Fn(t?.[Jf])}function $f(t){return M3(this,arguments,function*(){let e=t.getReader();try{for(;;){let{value:i,done:r}=yield Vc(e.read());if(r)return yield Vc(void 0);yield yield Vc(i)}}finally{e.releaseLock()}})}function Kf(t){return Fn(t?.getReader)}function ur(t){if(t instanceof $n)return t;if(t!=null){if(Hf(t))return zB(t);if(nh(t))return UB(t);if(qf(t))return qB(t);if(Yf(t))return P3(t);if(Qf(t))return HB(t);if(Kf(t))return YB(t)}throw Xf(t)}function zB(t){return new $n(n=>{let e=t[Zd]();if(Fn(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function UB(t){return new $n(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}function qB(t){return new $n(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,Gf)})}function HB(t){return new $n(n=>{for(let e of t)if(n.next(e),n.closed)return;n.complete()})}function P3(t){return new $n(n=>{XB(t,n).catch(e=>n.error(e))})}function YB(t){return P3($f(t))}function XB(t,n){var e,i,r,s;return w3(this,void 0,void 0,function*(){try{for(e=S3(t);i=yield e.next(),!i.done;){let a=i.value;if(n.next(a),n.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}n.complete()})}function qo(t,n,e,i=0,r=!1){let s=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function Zf(t,n=0){return bi((e,i)=>{e.subscribe(fi(i,r=>qo(i,t,()=>i.next(r),n),()=>qo(i,t,()=>i.complete(),n),r=>qo(i,t,()=>i.error(r),n)))})}function em(t,n=0){return bi((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function k3(t,n){return ur(t).pipe(em(n),Zf(n))}function E3(t,n){return ur(t).pipe(em(n),Zf(n))}function T3(t,n){return new $n(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}function A3(t,n){return new $n(e=>{let i;return qo(e,n,()=>{i=t[Jf](),qo(e,n,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(a){e.error(a);return}s?e.complete():e.next(r)},0,!0)}),()=>Fn(i?.return)&&i.return()})}function tm(t,n){if(!t)throw new Error("Iterable cannot be null");return new $n(e=>{qo(e,n,()=>{let i=t[Symbol.asyncIterator]();qo(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function D3(t,n){return tm($f(t),n)}function I3(t,n){if(t!=null){if(Hf(t))return k3(t,n);if(nh(t))return T3(t,n);if(qf(t))return E3(t,n);if(Yf(t))return tm(t,n);if(Qf(t))return A3(t,n);if(Kf(t))return D3(t,n)}throw Xf(t)}function er(t,n){return n?I3(t,n):ur(t)}function Bn(...t){let n=Ul(t);return er(t,n)}function ih(t,n){let e=Fn(t)?t:()=>t,i=r=>r.error(e());return new $n(n?r=>n.schedule(i,0,r):i)}function $y(t){return!!t&&(t instanceof $n||Fn(t.lift)&&Fn(t.subscribe))}var sl=Jd(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function fn(t,n){return bi((e,i)=>{let r=0;e.subscribe(fi(i,s=>{i.next(t.call(n,s,r++))}))})}var{isArray:JB}=Array;function QB(t,n){return JB(n)?t(...n):t(n)}function rh(t){return fn(n=>QB(t,n))}var{isArray:$B}=Array,{getPrototypeOf:KB,prototype:ZB,keys:eL}=Object;function nm(t){if(t.length===1){let n=t[0];if($B(n))return{args:n,keys:null};if(tL(n)){let e=eL(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}function tL(t){return t&&typeof t=="object"&&KB(t)===ZB}function im(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}function Hu(...t){let n=Ul(t),e=Uf(t),{args:i,keys:r}=nm(t);if(i.length===0)return er([],n);let s=new $n(nL(i,n,r?a=>im(r,a):ls));return e?s.pipe(rh(e)):s}function nL(t,n,e=ls){return i=>{O3(n,()=>{let{length:r}=t,s=new Array(r),a=r,l=r;for(let d=0;d<r;d++)O3(n,()=>{let u=er(t[d],n),h=!1;u.subscribe(fi(i,_=>{s[d]=_,h||(h=!0,l--),l||i.next(e(s.slice()))},()=>{--a||i.complete()}))},i)},i)}}function O3(t,n,e){t?qo(e,t,n):n()}function F3(t,n,e,i,r,s,a,l){let d=[],u=0,h=0,_=!1,b=()=>{_&&!d.length&&!u&&n.complete()},w=L=>u<i?S(L):d.push(L),S=L=>{s&&n.next(L),u++;let R=!1;ur(e(L,h++)).subscribe(fi(n,z=>{r?.(z),s?w(z):n.next(z)},()=>{R=!0},void 0,()=>{if(R)try{for(u--;d.length&&u<i;){let z=d.shift();a?qo(n,a,()=>S(z)):S(z)}b()}catch(z){n.error(z)}}))};return t.subscribe(fi(n,w,()=>{_=!0,b()})),()=>{l?.()}}function sr(t,n,e=1/0){return Fn(n)?sr((i,r)=>fn((s,a)=>n(i,s,r,a))(ur(t(i,r))),e):(typeof n=="number"&&(e=n),bi((i,r)=>F3(i,r,t,e)))}function oh(t=1/0){return sr(ls,t)}function B3(){return oh(1)}function sh(...t){return B3()(er(t,Ul(t)))}function Yu(t){return new $n(n=>{ur(t()).subscribe(n)})}function Ky(...t){let n=Uf(t),{args:e,keys:i}=nm(t),r=new $n(s=>{let{length:a}=e;if(!a){s.complete();return}let l=new Array(a),d=a,u=a;for(let h=0;h<a;h++){let _=!1;ur(e[h]).subscribe(fi(s,b=>{_||(_=!0,u--),l[h]=b},()=>d--,void 0,()=>{(!d||!_)&&(u||s.next(i?im(i,l):l),s.complete())}))}});return n?r.pipe(rh(n)):r}var iL=["addListener","removeListener"],rL=["addEventListener","removeEventListener"],oL=["on","off"];function Xu(t,n,e,i){if(Fn(e)&&(i=e,e=void 0),i)return Xu(t,n,e).pipe(rh(i));let[r,s]=lL(t)?rL.map(a=>l=>t[a](n,l,e)):sL(t)?iL.map(L3(t,n)):aL(t)?oL.map(L3(t,n)):[];if(!r&&nh(t))return sr(a=>Xu(a,n,e))(ur(t));if(!r)throw new TypeError("Invalid event target");return new $n(a=>{let l=(...d)=>a.next(1<d.length?d:d[0]);return r(l),()=>s(l)})}function L3(t,n){return e=>i=>t[e](n,i)}function sL(t){return Fn(t.addListener)&&Fn(t.removeListener)}function aL(t){return Fn(t.on)&&Fn(t.off)}function lL(t){return Fn(t.addEventListener)&&Fn(t.removeEventListener)}function yo(t,n){return bi((e,i)=>{let r=0;e.subscribe(fi(i,s=>t.call(n,s,r++)&&i.next(s)))})}function al(t){return bi((n,e)=>{let i=null,r=!1,s;i=n.subscribe(fi(e,void 0,void 0,a=>{s=ur(t(a,al(t)(n))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function N3(t,n,e,i,r){return(s,a)=>{let l=e,d=n,u=0;s.subscribe(fi(a,h=>{let _=u++;d=l?t(d,h,_):(l=!0,h),i&&a.next(d)},r&&(()=>{l&&a.next(d),a.complete()})))}}function Aa(t,n){return Fn(n)?sr(t,n,1):sr(t,1)}function ql(t){return bi((n,e)=>{let i=!1;n.subscribe(fi(e,r=>{i=!0,e.next(r)},()=>{i||e.next(t),e.complete()}))})}function ll(t){return t<=0?()=>Uo:bi((n,e)=>{let i=0;n.subscribe(fi(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}function rm(t=cL){return bi((n,e)=>{let i=!1;n.subscribe(fi(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(t())))})}function cL(){return new sl}function Hl(t){return bi((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}function cl(t,n){let e=arguments.length>=2;return i=>i.pipe(t?yo((r,s)=>t(r,s,i)):ls,ll(1),e?ql(n):rm(()=>new sl))}function ah(t){return t<=0?()=>Uo:bi((n,e)=>{let i=[];n.subscribe(fi(e,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function Zy(t,n){let e=arguments.length>=2;return i=>i.pipe(t?yo((r,s)=>t(r,s,i)):ls,ah(1),e?ql(n):rm(()=>new sl))}function ev(t,n){return bi(N3(t,n,arguments.length>=2,!0))}function tv(...t){let n=Ul(t);return bi((e,i)=>{(n?sh(t,e,n):sh(t,e)).subscribe(i)})}function To(t,n){return bi((e,i)=>{let r=null,s=0,a=!1,l=()=>a&&!r&&i.complete();e.subscribe(fi(i,d=>{r?.unsubscribe();let u=0,h=s++;ur(t(d,h)).subscribe(r=fi(i,_=>i.next(n?n(d,_,h,u++):_),()=>{r=null,l()}))},()=>{a=!0,l()}))})}function om(t){return bi((n,e)=>{ur(t).subscribe(fi(e,()=>e.complete(),qu)),!e.closed&&n.subscribe(e)})}function Wr(t,n,e){let i=Fn(t)||n||e?{next:t,error:n,complete:e}:t;return i?bi((r,s)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let l=!0;r.subscribe(fi(s,d=>{var u;(u=i.next)===null||u===void 0||u.call(i,d),s.next(d)},()=>{var d;l=!1,(d=i.complete)===null||d===void 0||d.call(i),s.complete()},d=>{var u;l=!1,(u=i.error)===null||u===void 0||u.call(i,d),s.error(d)},()=>{var d,u;l&&((d=i.unsubscribe)===null||d===void 0||d.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):ls}function V3(t){let n=ni(null);try{return t()}finally{ni(n)}}var pm="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Vt=class extends Error{code;constructor(n,e){super(Jl(n,e)),this.code=n}};function dL(t){return`NG0${Math.abs(t)}`}function Jl(t,n){return`${dL(t)}${n?": "+n:""}`}var Do=globalThis;function Li(t){for(let n in t)if(t[n]===Li)return n;throw Error("")}function G3(t,n){for(let e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function hl(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(hl).join(", ")}]`;if(t==null)return""+t;let n=t.overriddenName||t.name;if(n)return`${n}`;let e=t.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i>=0?e.slice(0,i):e}function fv(t,n){return t?n?`${t} ${n}`:t:n||""}var hL=Li({__forward_ref__:Li});function eo(t){return t.__forward_ref__=eo,t.toString=function(){return hl(this())},t}function Zr(t){return mv(t)?t():t}function mv(t){return typeof t=="function"&&t.hasOwnProperty(hL)&&t.__forward_ref__===eo}function W3(t,n){t==null&&gv(n,t,null,"!=")}function gv(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(i==null?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}function lt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function pr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Zu(t){return uL(t,fm)}function _v(t){return Zu(t)!==null}function uL(t,n){return t.hasOwnProperty(n)&&t[n]||null}function pL(t){let n=t?.[fm]??null;return n||null}function iv(t){return t&&t.hasOwnProperty(lm)?t[lm]:null}var fm=Li({\u0275prov:Li}),lm=Li({\u0275inj:Li}),an=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(n,e){this._desc=n,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=lt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function yv(t){return t&&!!t.\u0275providers}var vv=Li({\u0275cmp:Li}),bv=Li({\u0275dir:Li}),xv=Li({\u0275pipe:Li}),Cv=Li({\u0275mod:Li}),$u=Li({\u0275fac:Li}),zc=Li({__NG_ELEMENT_ID__:Li}),R3=Li({__NG_ENV_ID__:Li});function ws(t){return typeof t=="string"?t:t==null?"":String(t)}function hm(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ws(t)}var wv=Li({ngErrorCode:Li}),z3=Li({ngErrorMessage:Li}),Qu=Li({ngTokenPath:Li});function Mv(t,n){return U3("",-200,n)}function mm(t,n){throw new Vt(-201,!1)}function fL(t,n){t[Qu]??=[];let e=t[Qu],i;typeof n=="object"&&"multi"in n&&n?.multi===!0?(W3(n.provide,"Token with multi: true should have a provide property"),i=hm(n.provide)):i=hm(n),e[0]!==i&&t[Qu].unshift(i)}function mL(t,n){let e=t[Qu],i=t[wv],r=t[z3]||t.message;return t.message=_L(r,i,e,n),t}function U3(t,n,e){let i=new Vt(n,t);return i[wv]=n,i[z3]=t,e&&(i[Qu]=e),i}function gL(t){return t[wv]}function _L(t,n,e=[],i=null){let r="";e&&e.length>1&&(r=` Path: ${e.join(" -> ")}.`);let s=i?` Source: ${i}.`:"";return Jl(n,`${t}${s}${r}`)}var rv;function q3(){return rv}function Ao(t){let n=rv;return rv=t,n}function Sv(t,n,e){let i=Zu(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&8)return null;if(n!==void 0)return n;mm(t,"Injector")}var yL={},Rc=yL,ov="__NG_DI_FLAG__",sv=class{injector;constructor(n){this.injector=n}retrieve(n,e){let i=jc(e)||0;try{return this.injector.get(n,i&8?null:Rc,i)}catch(r){if(Ud(r))return r;throw r}}};function vL(t,n=0){let e=kf();if(e===void 0)throw new Vt(-203,!1);if(e===null)return Sv(t,void 0,n);{let i=bL(n),r=e.retrieve(t,i);if(Ud(r)){if(i.optional)return null;throw r}return r}}function ht(t,n=0){return(q3()||vL)(Zr(t),n)}function Ft(t,n){return ht(t,jc(n))}function jc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function bL(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function av(t){let n=[];for(let e=0;e<t.length;e++){let i=Zr(t[e]);if(Array.isArray(i)){if(i.length===0)throw new Vt(900,!1);let r,s=0;for(let a=0;a<i.length;a++){let l=i[a],d=xL(l);typeof d=="number"?d===-1?r=l.token:s|=d:r=l}n.push(ht(r,s))}else n.push(ht(i))}return n}function Pv(t,n){return t[ov]=n,t.prototype[ov]=n,t}function xL(t){return t[ov]}function Yl(t,n){let e=t.hasOwnProperty($u);return e?t[$u]:null}function H3(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=n[i];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}function Y3(t){return t.flat(Number.POSITIVE_INFINITY)}function gm(t,n){t.forEach(e=>Array.isArray(e)?gm(e,n):n(e))}function kv(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function e0(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function X3(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(r===1)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;){let s=r-2;t[r]=t[s],r--}t[n]=e,t[n+1]=i}}function J3(t,n,e){let i=ch(t,n);return i>=0?t[i|1]=e:(i=~i,X3(t,i,n,e)),i}function _m(t,n){let e=ch(t,n);if(e>=0)return t[e|1]}function ch(t,n){return CL(t,n,1)}function CL(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){let s=i+(r-i>>1),a=t[s<<e];if(n===a)return s<<e;a>n?r=s:i=s+1}return~(r<<e)}var Ql={},cs=[],$l=new an(""),Ev=new an("",-1),Tv=new an(""),Ku=class{get(n,e=Rc){if(e===Rc){let r=U3("",-201);throw r.name="\u0275NotFound",r}return e}};function Av(t){return t[Cv]||null}function pl(t){return t[vv]||null}function Dv(t){return t[bv]||null}function Q3(t){return t[xv]||null}function dh(t){return{\u0275providers:t}}function $3(...t){return{\u0275providers:Iv(!0,t),\u0275fromNgModule:!0}}function Iv(t,...n){let e=[],i=new Set,r,s=a=>{e.push(a)};return gm(n,a=>{let l=a;um(l,s,[],i)&&(r||=[],r.push(l))}),r!==void 0&&K3(r,s),e}function K3(t,n){for(let e=0;e<t.length;e++){let{ngModule:i,providers:r}=t[e];Ov(r,s=>{n(s,i)})}}function um(t,n,e,i){if(t=Zr(t),!t)return!1;let r=null,s=iv(t),a=!s&&pl(t);if(!s&&!a){let d=t.ngModule;if(s=iv(d),s)r=d;else return!1}else{if(a&&!a.standalone)return!1;r=t}let l=i.has(r);if(a){if(l)return!1;if(i.add(r),a.dependencies){let d=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let u of d)um(u,n,e,i)}}else if(s){if(s.imports!=null&&!l){i.add(r);let u;try{gm(s.imports,h=>{um(h,n,e,i)&&(u||=[],u.push(h))})}finally{}u!==void 0&&K3(u,n)}if(!l){let u=Yl(r)||(()=>new r);n({provide:r,useFactory:u,deps:cs},r),n({provide:Tv,useValue:r,multi:!0},r),n({provide:$l,useValue:()=>ht(r),multi:!0},r)}let d=s.providers;if(d!=null&&!l){let u=t;Ov(d,h=>{n(h,u)})}}else return!1;return r!==t&&t.providers!==void 0}function Ov(t,n){for(let e of t)yv(e)&&(e=e.\u0275providers),Array.isArray(e)?Ov(e,n):n(e)}var wL=Li({provide:String,useValue:Li});function Z3(t){return t!==null&&typeof t=="object"&&wL in t}function ML(t){return!!(t&&t.useExisting)}function SL(t){return!!(t&&t.useFactory)}function Gc(t){return typeof t=="function"}function eS(t){return!!t.useClass}var t0=new an(""),am={},j3={},nv;function n0(){return nv===void 0&&(nv=new Ku),nv}var _r=class{},Wc=class extends _r{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(n,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,cv(n,a=>this.processProvider(a)),this.records.set(Ev,lh(void 0,this)),r.has("environment")&&this.records.set(_r,lh(void 0,this));let s=this.records.get(t0);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Tv,cs,{self:!0}))}retrieve(n,e){let i=jc(e)||0;try{return this.get(n,Rc,i)}catch(r){if(Ud(r))return r;throw r}}destroy(){Ju(this),this._destroyed=!0;let n=ni(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ni(n)}}onDestroy(n){return Ju(this),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){Ju(this);let e=Ta(this),i=Ao(void 0),r;try{return n()}finally{Ta(e),Ao(i)}}get(n,e=Rc,i){if(Ju(this),n.hasOwnProperty(R3))return n[R3](this);let r=jc(i),s,a=Ta(this),l=Ao(void 0);try{if(!(r&4)){let u=this.records.get(n);if(u===void 0){let h=AL(n)&&Zu(n);h&&this.injectableDefInScope(h)?u=lh(lv(n),am):u=null,this.records.set(n,u)}if(u!=null)return this.hydrate(n,u,r)}let d=r&2?n0():this.parent;return e=r&8&&e===Rc?null:e,d.get(n,e)}catch(d){let u=gL(d);throw u===-200||u===-201?new Vt(u,null):d}finally{Ao(l),Ta(a)}}resolveInjectorInitializers(){let n=ni(null),e=Ta(this),i=Ao(void 0),r;try{let s=this.get($l,cs,{self:!0});for(let a of s)a()}finally{Ta(e),Ao(i),ni(n)}}toString(){let n=[],e=this.records;for(let i of e.keys())n.push(hl(i));return`R3Injector[${n.join(", ")}]`}processProvider(n){n=Zr(n);let e=Gc(n)?n:Zr(n&&n.provide),i=kL(n);if(!Gc(n)&&n.multi===!0){let r=this.records.get(e);r||(r=lh(void 0,am,!0),r.factory=()=>av(r.multi),this.records.set(e,r)),e=n,r.multi.push(n)}this.records.set(e,i)}hydrate(n,e,i){let r=ni(null);try{if(e.value===j3)throw Mv(hl(n));return e.value===am&&(e.value=j3,e.value=e.factory(void 0,i)),typeof e.value=="object"&&e.value&&TL(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{ni(r)}}injectableDefInScope(n){if(!n.providedIn)return!1;let e=Zr(n.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){let e=this._onDestroyHooks.indexOf(n);e!==-1&&this._onDestroyHooks.splice(e,1)}};function lv(t){let n=Zu(t),e=n!==null?n.factory:Yl(t);if(e!==null)return e;if(t instanceof an)throw new Vt(204,!1);if(t instanceof Function)return PL(t);throw new Vt(204,!1)}function PL(t){if(t.length>0)throw new Vt(204,!1);let e=pL(t);return e!==null?()=>e.factory(t):()=>new t}function kL(t){if(Z3(t))return lh(void 0,t.useValue);{let n=Fv(t);return lh(n,am)}}function Fv(t,n,e){let i;if(Gc(t)){let r=Zr(t);return Yl(r)||lv(r)}else if(Z3(t))i=()=>Zr(t.useValue);else if(SL(t))i=()=>t.useFactory(...av(t.deps||[]));else if(ML(t))i=(r,s)=>ht(Zr(t.useExisting),s!==void 0&&s&8?8:void 0);else{let r=Zr(t&&(t.useClass||t.provide));if(EL(t))i=()=>new r(...av(t.deps));else return Yl(r)||lv(r)}return i}function Ju(t){if(t.destroyed)throw new Vt(205,!1)}function lh(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function EL(t){return!!t.deps}function TL(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function AL(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function cv(t,n){for(let e of t)Array.isArray(e)?cv(e,n):e&&yv(e)?cv(e.\u0275providers,n):n(e)}function qr(t,n){let e;t instanceof Wc?(Ju(t),e=t):e=new sv(t);let i,r=Ta(e),s=Ao(void 0);try{return n()}finally{Ta(r),Ao(s)}}function Bv(){return q3()!==void 0||kf()!=null}var Ks=0,Vn=1,zn=2,zr=3,Ms=4,Ss=5,i0=6,hh=7,vo=8,Uc=9,Da=10,ar=11,uh=12,Lv=13,qc=14,Ps=15,Kl=16,Hc=17,Ia=18,r0=19,Nv=20,dl=21,ym=22,o0=23,ds=24,Yc=25,to=26,tS=1;var Zl=7,s0=8,Xc=9,Io=10;function Oa(t){return Array.isArray(t)&&typeof t[tS]=="object"}function Zs(t){return Array.isArray(t)&&t[tS]===!0}function Vv(t){return(t.flags&4)!==0}function ec(t){return t.componentOffset>-1}function ph(t){return(t.flags&1)===1}function Fa(t){return!!t.template}function fh(t){return(t[zn]&512)!==0}function Jc(t){return(t[zn]&256)===256}var Rv="svg",nS="math";function ks(t){for(;Array.isArray(t);)t=t[Ks];return t}function jv(t,n){return ks(n[t])}function ea(t,n){return ks(n[t.index])}function vm(t,n){return t.data[n]}function Gv(t,n){return t[n]}function Wv(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}function Es(t,n){let e=n[t];return Oa(e)?e:e[Ks]}function iS(t){return(t[zn]&4)===4}function bm(t){return(t[zn]&128)===128}function rS(t){return Zs(t[zr])}function a0(t,n){return n==null?null:t[n]}function zv(t){t[Hc]=0}function Uv(t){t[zn]&1024||(t[zn]|=1024,bm(t)&&mh(t))}function oS(t,n){for(;t>0;)n=n[qc],t--;return n}function l0(t){return!!(t[zn]&9216||t[ds]?.dirty)}function xm(t){t[Da].changeDetectionScheduler?.notify(8),t[zn]&64&&(t[zn]|=1024),l0(t)&&mh(t)}function mh(t){t[Da].changeDetectionScheduler?.notify(0);let n=Xl(t);for(;n!==null&&!(n[zn]&8192||(n[zn]|=8192,!bm(n)));)n=Xl(n)}function qv(t,n){if(Jc(t))throw new Vt(911,!1);t[dl]===null&&(t[dl]=[]),t[dl].push(n)}function sS(t,n){if(t[dl]===null)return;let e=t[dl].indexOf(n);e!==-1&&t[dl].splice(e,1)}function Xl(t){let n=t[zr];return Zs(n)?n[zr]:n}function Hv(t){return t[hh]??=[]}function Yv(t){return t.cleanup??=[]}function aS(t,n,e,i){let r=Hv(n);r.push(e),t.firstCreatePass&&Yv(t).push(i,r.length-1)}var Kn={lFrame:wS(null),bindingsEnabled:!0,skipHydrationRootTNode:null},c0=function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t}(c0||{}),DL=0,dv=!1;function lS(){return Kn.lFrame.elementDepthCount}function cS(){Kn.lFrame.elementDepthCount++}function dS(){Kn.lFrame.elementDepthCount--}function Cm(){return Kn.bindingsEnabled}function hS(){return Kn.skipHydrationRootTNode!==null}function uS(t){return Kn.skipHydrationRootTNode===t}function pS(){Kn.skipHydrationRootTNode=null}function Zn(){return Kn.lFrame.lView}function no(){return Kn.lFrame.tView}function pe(t){return Kn.lFrame.contextLView=t,t[vo]}function fe(t){return Kn.lFrame.contextLView=null,t}function io(){let t=Xv();for(;t!==null&&t.type===64;)t=t.parent;return t}function Xv(){return Kn.lFrame.currentTNode}function fS(){let t=Kn.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function gh(t,n){let e=Kn.lFrame;e.currentTNode=t,e.isParent=n}function Jv(){return Kn.lFrame.isParent}function mS(){Kn.lFrame.isParent=!1}function gS(){return Kn.lFrame.contextLView}function Qv(t){gv("Must never be called in production mode"),DL=t}function $v(){return dv}function Kv(t){let n=dv;return dv=t,n}function Qc(){let t=Kn.lFrame,n=t.bindingRootIndex;return n===-1&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Zv(){return Kn.lFrame.bindingIndex}function _S(t){return Kn.lFrame.bindingIndex=t}function _h(){return Kn.lFrame.bindingIndex++}function wm(t){let n=Kn.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function yS(){return Kn.lFrame.inI18n}function vS(t,n){let e=Kn.lFrame;e.bindingIndex=e.bindingRootIndex=t,Mm(n)}function bS(){return Kn.lFrame.currentDirectiveIndex}function Mm(t){Kn.lFrame.currentDirectiveIndex=t}function xS(t){let n=Kn.lFrame.currentDirectiveIndex;return n===-1?null:t[n]}function eb(){return Kn.lFrame.currentQueryIndex}function Sm(t){Kn.lFrame.currentQueryIndex=t}function IL(t){let n=t[Vn];return n.type===2?n.declTNode:n.type===1?t[Ss]:null}function tb(t,n,e){if(e&4){let r=n,s=t;for(;r=r.parent,r===null&&!(e&1);)if(r=IL(s),r===null||(s=s[qc],r.type&10))break;if(r===null)return!1;n=r,t=s}let i=Kn.lFrame=CS();return i.currentTNode=n,i.lView=t,!0}function Pm(t){let n=CS(),e=t[Vn];Kn.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function CS(){let t=Kn.lFrame,n=t===null?null:t.child;return n===null?wS(t):n}function wS(t){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=n),n}function MS(){let t=Kn.lFrame;return Kn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var nb=MS;function km(){let t=MS();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function SS(t){return(Kn.lFrame.contextLView=oS(t,Kn.lFrame.contextLView))[vo]}function fl(){return Kn.lFrame.selectedIndex}function tc(t){Kn.lFrame.selectedIndex=t}function Em(){let t=Kn.lFrame;return vm(t.tView,t.selectedIndex)}function ft(){Kn.lFrame.currentNamespace=Rv}function Ho(){OL()}function OL(){Kn.lFrame.currentNamespace=null}function PS(){return Kn.lFrame.currentNamespace}var kS=!0;function Tm(){return kS}function d0(t){kS=t}function hv(t,n=null,e=null,i){let r=ib(t,n,e,i);return r.resolveInjectorInitializers(),r}function ib(t,n=null,e=null,i,r=new Set){let s=[e||cs,$3(t)];return i=i||(typeof t=="object"?void 0:hl(t)),new Wc(s,n||n0(),i||null,r)}var Ur=class t{static THROW_IF_NOT_FOUND=Rc;static NULL=new Ku;static create(n,e){if(Array.isArray(n))return hv({name:""},e,n,"");{let i=n.name??"";return hv({name:i},n.parent,n.providers,i)}}static \u0275prov=lt({token:t,providedIn:"any",factory:()=>ht(Ev)});static __NG_ELEMENT_ID__=-1},ji=new an(""),ta=(()=>{class t{static __NG_ELEMENT_ID__=FL;static __NG_ENV_ID__=e=>e}return t})(),uv=class extends ta{_lView;constructor(n){super(),this._lView=n}get destroyed(){return Jc(this._lView)}onDestroy(n){let e=this._lView;return qv(e,n),()=>sS(e,n)}};function FL(){return new uv(Zn())}var $s=class{_console=console;handleError(n){this._console.error("ERROR",n)}},Oo=new an("",{providedIn:"root",factory:()=>{let t=Ft(_r),n;return e=>{t.destroyed&&!n?setTimeout(()=>{throw e}):(n??=t.get($s),n.handleError(e))}}}),ES={provide:$l,useValue:()=>void Ft($s),multi:!0};function rb(t){return typeof t=="function"&&t[_o]!==void 0}function ml(t,n){let[e,i,r]=jy(t,n?.equal),s=e,a=s[_o];return s.set=i,s.update=r,s.asReadonly=TS.bind(s),s}function TS(){let t=this[_o];if(t.readonlyFn===void 0){let n=()=>this();n[_o]=t,t.readonlyFn=n}return t.readonlyFn}function ob(t){return rb(t)&&typeof t.set=="function"}var ul=class{},Am=new an("",{providedIn:"root",factory:()=>!1});var sb=new an(""),ab=new an("");var Dm=(()=>{class t{view;node;constructor(e,i){this.view=e,this.node=i}static __NG_ELEMENT_ID__=BL}return t})();function BL(){return new Dm(Zn(),io())}var Ba=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new mi(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new $n(e=>{e.next(!1),e.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=lt({token:t,providedIn:"root",factory:()=>new t})}return t})(),h0=(()=>{class t{internalPendingTasks=Ft(Ba);scheduler=Ft(ul);errorHandler=Ft(Oo);add(){let e=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(e)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(e))}}run(e){let i=this.add();e().catch(this.errorHandler).finally(i)}static \u0275prov=lt({token:t,providedIn:"root",factory:()=>new t})}return t})();function u0(...t){}var lb=(()=>{class t{static \u0275prov=lt({token:t,providedIn:"root",factory:()=>new pv})}return t})(),pv=class{dirtyEffectCount=0;queues=new Map;add(n){this.enqueue(n),this.schedule(n)}schedule(n){n.dirty&&this.dirtyEffectCount++}remove(n){let e=n.zone,i=this.queues.get(e);i.has(n)&&(i.delete(n),n.dirty&&this.dirtyEffectCount--)}enqueue(n){let e=n.zone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(n)||i.add(n)}flush(){for(;this.dirtyEffectCount>0;){let n=!1;for(let[e,i]of this.queues)e===null?n||=this.flushQueue(i):n||=e.run(()=>this.flushQueue(i));n||(this.dirtyEffectCount=0)}}flushQueue(n){let e=!1;for(let i of n)i.dirty&&(this.dirtyEffectCount--,e=!0,i.run());return e}};function Ch(t){return{toString:t}.toString()}var Im="__parameters__";function GL(t){return function(...e){if(t){let i=t(...e);for(let r in i)this[r]=i[r]}}}function sP(t,n,e){return Ch(()=>{let i=GL(n);function r(...s){if(this instanceof r)return i.apply(this,s),this;let a=new r(...s);return l.annotation=a,l;function l(d,u,h){let _=d.hasOwnProperty(Im)?d[Im]:Object.defineProperty(d,Im,{value:[]})[Im];for(;_.length<=h;)_.push(null);return(_[h]=_[h]||[]).push(a),d}}return r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var Ub=Pv(sP("Optional"),8);var qb=Pv(sP("SkipSelf"),4);function aP(t){let n=Do.ng;if(n&&n.\u0275compilerFacade)return n.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function WL(t){return typeof t=="function"}var Gm=class{previousValue;currentValue;firstChange;constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function lP(t,n,e,i){n!==null?n.applyValueToInputSignal(n,i):t[e]=i}var yl=(()=>{let t=()=>cP;return t.ngInherit=!0,t})();function cP(t){return t.type.prototype.ngOnChanges&&(t.setInput=UL),zL}function zL(){let t=hP(this),n=t?.current;if(n){let e=t.previous;if(e===Ql)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function UL(t,n,e,i,r){let s=this.declaredInputs[i],a=hP(t)||qL(t,{previous:Ql,current:null}),l=a.current||(a.current={}),d=a.previous,u=d[s];l[s]=new Gm(u&&u.currentValue,e,d===Ql),lP(t,n,r,e)}var dP="__ngSimpleChanges__";function hP(t){return t[dP]||null}function qL(t,n){return t[dP]=n}var AS=[];var qi=function(t,n=null,e){for(let i=0;i<AS.length;i++){let r=AS[i];r(t,n,e)}};function HL(t,n,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=n.type.prototype;if(i){let a=cP(n);(e.preOrderHooks??=[]).push(t,a),(e.preOrderCheckHooks??=[]).push(t,a)}r&&(e.preOrderHooks??=[]).push(0-t,r),s&&((e.preOrderHooks??=[]).push(t,s),(e.preOrderCheckHooks??=[]).push(t,s))}function uP(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){let s=t.data[e].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:l,ngAfterViewInit:d,ngAfterViewChecked:u,ngOnDestroy:h}=s;a&&(t.contentHooks??=[]).push(-e,a),l&&((t.contentHooks??=[]).push(e,l),(t.contentCheckHooks??=[]).push(e,l)),d&&(t.viewHooks??=[]).push(-e,d),u&&((t.viewHooks??=[]).push(e,u),(t.viewCheckHooks??=[]).push(e,u)),h!=null&&(t.destroyHooks??=[]).push(e,h)}}function Nm(t,n,e){pP(t,n,3,e)}function Vm(t,n,e,i){(t[zn]&3)===e&&pP(t,n,e,i)}function cb(t,n){let e=t[zn];(e&3)===n&&(e&=16383,e+=1,t[zn]=e)}function pP(t,n,e,i){let r=i!==void 0?t[Hc]&65535:0,s=i??-1,a=n.length-1,l=0;for(let d=r;d<a;d++)if(typeof n[d+1]=="number"){if(l=n[d],i!=null&&l>=i)break}else n[d]<0&&(t[Hc]+=65536),(l<s||s==-1)&&(YL(t,e,n,d),t[Hc]=(t[Hc]&4294901760)+d+2),d++}function DS(t,n){qi(4,t,n);let e=ni(null);try{n.call(t)}finally{ni(e),qi(5,t,n)}}function YL(t,n,e,i){let r=e[i]<0,s=e[i+1],a=r?-e[i]:e[i],l=t[a];r?t[zn]>>14<t[Hc]>>16&&(t[zn]&3)===n&&(t[zn]+=16384,DS(l,s)):DS(l,s)}var vh=-1,Kc=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(n,e,i,r){this.factory=n,this.name=r,this.canSeeViewProviders=e,this.injectImpl=i}};function XL(t){return(t.flags&8)!==0}function JL(t){return(t.flags&16)!==0}function QL(t,n,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let s=e[i++],a=e[i++],l=e[i++];t.setAttribute(n,a,l,s)}else{let s=r,a=e[++i];$L(s)?t.setProperty(n,s,a):t.setAttribute(n,s,a),i++}}return i}function fP(t){return t===3||t===4||t===6}function $L(t){return t.charCodeAt(0)===64}function m0(t,n){if(!(n===null||n.length===0))if(t===null||t.length===0)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){let r=n[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?IS(t,e,r,null,n[++i]):IS(t,e,r,null,null))}}return t}function IS(t,n,e,i,r){let s=0,a=t.length;if(n===-1)a=-1;else for(;s<t.length;){let l=t[s++];if(typeof l=="number"){if(l===n){a=-1;break}else if(l>n){a=s-1;break}}}for(;s<t.length;){let l=t[s];if(typeof l=="number")break;if(l===e){r!==null&&(t[s+1]=r);return}s++,r!==null&&s++}a!==-1&&(t.splice(a,0,n),s=a+1),t.splice(s++,0,e),r!==null&&t.splice(s++,0,r)}function mP(t){return t!==vh}function Wm(t){return t&32767}function KL(t){return t>>16}function zm(t,n){let e=KL(t),i=n;for(;e>0;)i=i[qc],e--;return i}var vb=!0;function Um(t){let n=vb;return vb=t,n}var ZL=256,gP=ZL-1,_P=5,eN=0,La={};function tN(t,n,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(zc)&&(i=e[zc]),i==null&&(i=e[zc]=eN++);let r=i&gP,s=1<<r;n.data[t+(r>>_P)]|=s}function qm(t,n){let e=yP(t,n);if(e!==-1)return e;let i=n[Vn];i.firstCreatePass&&(t.injectorIndex=n.length,db(i.data,t),db(n,null),db(i.blueprint,null));let r=Hb(t,n),s=t.injectorIndex;if(mP(r)){let a=Wm(r),l=zm(r,n),d=l[Vn].data;for(let u=0;u<8;u++)n[s+u]=l[a+u]|d[a+u]}return n[s+8]=r,s}function db(t,n){t.push(0,0,0,0,0,0,0,0,n)}function yP(t,n){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||n[t.injectorIndex+8]===null?-1:t.injectorIndex}function Hb(t,n){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;r!==null;){if(i=wP(r),i===null)return vh;if(e++,r=r[qc],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return vh}function bb(t,n,e){tN(t,n,e)}function nN(t,n){if(n==="class")return t.classes;if(n==="style")return t.styles;let e=t.attrs;if(e){let i=e.length,r=0;for(;r<i;){let s=e[r];if(fP(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof e[r]=="string";)r++;else{if(s===n)return e[r+1];r=r+2}}}return null}function vP(t,n,e){if(e&8||t!==void 0)return t;mm(n,"NodeInjector")}function bP(t,n,e,i){if(e&8&&i===void 0&&(i=null),(e&3)===0){let r=t[Uc],s=Ao(void 0);try{return r?r.get(n,i,e&8):Sv(n,i,e&8)}finally{Ao(s)}}return vP(i,n,e)}function xP(t,n,e,i=0,r){if(t!==null){if(n[zn]&2048&&!(i&2)){let a=sN(t,n,e,i,La);if(a!==La)return a}let s=CP(t,n,e,i,La);if(s!==La)return s}return bP(n,e,i,r)}function CP(t,n,e,i,r){let s=rN(e);if(typeof s=="function"){if(!tb(n,t,i))return i&1?vP(r,e,i):bP(n,e,i,r);try{let a;if(a=s(i),a==null&&!(i&8))mm(e);else return a}finally{nb()}}else if(typeof s=="number"){let a=null,l=yP(t,n),d=vh,u=i&1?n[Ps][Ss]:null;for((l===-1||i&4)&&(d=l===-1?Hb(t,n):n[l+8],d===vh||!FS(i,!1)?l=-1:(a=n[Vn],l=Wm(d),n=zm(d,n)));l!==-1;){let h=n[Vn];if(OS(s,l,h.data)){let _=iN(l,n,e,a,i,u);if(_!==La)return _}d=n[l+8],d!==vh&&FS(i,n[Vn].data[l+8]===u)&&OS(s,l,n)?(a=h,l=Wm(d),n=zm(d,n)):l=-1}}return r}function iN(t,n,e,i,r,s){let a=n[Vn],l=a.data[t+8],d=i==null?ec(l)&&vb:i!=a&&(l.type&3)!==0,u=r&1&&s===l,h=Rm(l,a,e,d,u);return h!==null?g0(n,a,h,l,r):La}function Rm(t,n,e,i,r){let s=t.providerIndexes,a=n.data,l=s&1048575,d=t.directiveStart,u=t.directiveEnd,h=s>>20,_=i?l:l+h,b=r?l+h:u;for(let w=_;w<b;w++){let S=a[w];if(w<d&&e===S||w>=d&&S.type===e)return w}if(r){let w=a[d];if(w&&Fa(w)&&w.type===e)return d}return null}function g0(t,n,e,i,r){let s=t[e],a=n.data;if(s instanceof Kc){let l=s;if(l.resolving){let w=hm(a[e]);throw Mv(w)}let d=Um(l.canSeeViewProviders);l.resolving=!0;let u=a[e].type||a[e],h,_=l.injectImpl?Ao(l.injectImpl):null,b=tb(t,i,0);try{s=t[e]=l.factory(void 0,r,a,t,i),n.firstCreatePass&&e>=i.directiveStart&&HL(e,a[e],n)}finally{_!==null&&Ao(_),Um(d),l.resolving=!1,nb()}}return s}function rN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let n=t.hasOwnProperty(zc)?t[zc]:void 0;return typeof n=="number"?n>=0?n&gP:oN:n}function OS(t,n,e){let i=1<<t;return!!(e[n+(t>>_P)]&i)}function FS(t,n){return!(t&2)&&!(t&1&&n)}var $c=class{_tNode;_lView;constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return xP(this._tNode,this._lView,n,jc(i),e)}};function oN(){return new $c(io(),Zn())}function Fo(t){return Ch(()=>{let n=t.prototype.constructor,e=n[$u]||xb(n),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let s=r[$u]||xb(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function xb(t){return mv(t)?()=>{let n=xb(Zr(t));return n&&n()}:Yl(t)}function sN(t,n,e,i,r){let s=t,a=n;for(;s!==null&&a!==null&&a[zn]&2048&&!fh(a);){let l=CP(s,a,e,i|2,La);if(l!==La)return l;let d=s.parent;if(!d){let u=a[Nv];if(u){let h=u.get(e,La,i);if(h!==La)return h}d=wP(a),a=a[qc]}s=d}return r}function wP(t){let n=t[Vn],e=n.type;return e===2?n.declTNode:e===1?t[Ss]:null}function w0(t){return nN(io(),t)}function aN(){return wh(io(),Zn())}function wh(t,n){return new fr(ea(t,n))}var fr=(()=>{class t{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=aN}return t})();function lN(t){return t instanceof fr?t.nativeElement:t}function cN(){return this._results[Symbol.iterator]()}var Hm=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new yn}constructor(n=!1){this._emitDistinctChangesOnly=n}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){this.dirty=!1;let i=Y3(n);(this._changesDetected=!H3(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=cN};function MP(t){return(t.flags&128)===128}var Yb=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Yb||{}),SP=new Map,dN=0;function hN(){return dN++}function uN(t){SP.set(t[r0],t)}function Cb(t){SP.delete(t[r0])}var BS="__ngContext__";function bh(t,n){Oa(n)?(t[BS]=n[r0],uN(n)):t[BS]=n}function PP(t){return EP(t[uh])}function kP(t){return EP(t[Ms])}function EP(t){for(;t!==null&&!Zs(t);)t=t[Ms];return t}var wb;function Xb(t){wb=t}function TP(){if(wb!==void 0)return wb;if(typeof document<"u")return document;throw new Vt(210,!1)}var ig=new an("",{providedIn:"root",factory:()=>pN}),pN="ng",rg=new an(""),Mh=new an("",{providedIn:"platform",factory:()=>"unknown"});var og=new an(""),sg=new an("",{providedIn:"root",factory:()=>TP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var fN="h",mN="b";var AP=!1,DP=new an("",{providedIn:"root",factory:()=>AP});var gN=(t,n,e,i)=>{};function _N(t,n,e,i){gN(t,n,e,i)}function Jb(t){return(t.flags&32)===32}var yN=()=>null;function IP(t,n,e=!1){return yN(t,n,e)}function OP(t,n){let e=t.contentQueries;if(e!==null){let i=ni(null);try{for(let r=0;r<e.length;r+=2){let s=e[r],a=e[r+1];if(a!==-1){let l=t.data[a];Sm(s),l.contentQueries(2,n[a],a)}}}finally{ni(i)}}}function Mb(t,n,e){Sm(0);let i=ni(null);try{n(t,e)}finally{ni(i)}}function Qb(t,n,e){if(Vv(n)){let i=ni(null);try{let r=n.directiveStart,s=n.directiveEnd;for(let a=r;a<s;a++){let l=t.data[a];if(l.contentQueries){let d=e[a];l.contentQueries(1,d,a)}}}finally{ni(i)}}}var gl=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(gl||{}),Om;function vN(){if(Om===void 0&&(Om=null,Do.trustedTypes))try{Om=Do.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Om}function bN(t){return vN()?.createScriptURL(t)||t}var Fm;function xN(){if(Fm===void 0&&(Fm=null,Do.trustedTypes))try{Fm=Do.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Fm}function LS(t){return xN()?.createScriptURL(t)||t}var Ym=class{changingThisBreaksApplicationSecurity;constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pm})`}};function Sh(t){return t instanceof Ym?t.changingThisBreaksApplicationSecurity:t}function ag(t,n){let e=FP(t);if(e!=null&&e!==n){if(e==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${pm})`)}return e===n}function FP(t){return t instanceof Ym&&t.getTypeName()||null}var CN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function BP(t){return t=String(t),t.match(CN)?t:"unsafe:"+t}var M0=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(M0||{});function gt(t){let n=Kb();return n?n.sanitize(M0.STYLE,t)||"":ag(t,"Style")?Sh(t):ws(t)}function Hr(t){let n=Kb();return n?n.sanitize(M0.URL,t)||"":ag(t,"URL")?Sh(t):BP(ws(t))}function LP(t){let n=Kb();if(n)return LS(n.sanitize(M0.RESOURCE_URL,t)||"");if(ag(t,"ResourceURL"))return LS(Sh(t));throw new Vt(904,!1)}function S0(t){return bN(t[0])}function wN(t,n){return n==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||n==="href"&&(t==="base"||t==="link")?LP:Hr}function $b(t,n,e){return wN(n,e)(t)}function Kb(){let t=Zn();return t&&t[Da].sanitizer}var MN=/^>|^->|<!--|-->|--!>|<!-$/g,SN=/(<|>)/g,PN="\u200B$1\u200B";function kN(t){return t.replace(MN,n=>n.replace(SN,PN))}function P0(t){return t.ownerDocument.defaultView}function NP(t){return t instanceof Function?t():t}function EN(t,n,e){let i=t.length;for(;;){let r=t.indexOf(n,e);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let s=n.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}e=r+1}}var VP="ng-template";function TN(t,n,e,i){let r=0;if(i){for(;r<n.length&&typeof n[r]=="string";r+=2)if(n[r]==="class"&&EN(n[r+1].toLowerCase(),e,0)!==-1)return!0}else if(Zb(t))return!1;if(r=n.indexOf(1,r),r>-1){let s;for(;++r<n.length&&typeof(s=n[r])=="string";)if(s.toLowerCase()===e)return!0}return!1}function Zb(t){return t.type===4&&t.value!==VP}function AN(t,n,e){let i=t.type===4&&!e?VP:t.value;return n===i}function DN(t,n,e){let i=4,r=t.attrs,s=r!==null?FN(r):0,a=!1;for(let l=0;l<n.length;l++){let d=n[l];if(typeof d=="number"){if(!a&&!na(i)&&!na(d))return!1;if(a&&na(d))continue;a=!1,i=d|i&1;continue}if(!a)if(i&4){if(i=2|i&1,d!==""&&!AN(t,d,e)||d===""&&n.length===1){if(na(i))return!1;a=!0}}else if(i&8){if(r===null||!TN(t,r,d,e)){if(na(i))return!1;a=!0}}else{let u=n[++l],h=IN(d,r,Zb(t),e);if(h===-1){if(na(i))return!1;a=!0;continue}if(u!==""){let _;if(h>s?_="":_=r[h+1].toLowerCase(),i&2&&u!==_){if(na(i))return!1;a=!0}}}}return na(i)||a}function na(t){return(t&1)===0}function IN(t,n,e,i){if(n===null)return-1;let r=0;if(i||!e){let s=!1;for(;r<n.length;){let a=n[r];if(a===t)return r;if(a===3||a===6)s=!0;else if(a===1||a===2){let l=n[++r];for(;typeof l=="string";)l=n[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=s?1:2}return-1}else return BN(n,t)}function ON(t,n,e=!1){for(let i=0;i<n.length;i++)if(DN(t,n[i],e))return!0;return!1}function FN(t){for(let n=0;n<t.length;n++){let e=t[n];if(fP(e))return n}return t.length}function BN(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){let i=t[e];if(typeof i=="number")return-1;if(i===n)return e;e++}return-1}function NS(t,n){return t?":not("+n.trim()+")":n}function LN(t){let n=t[0],e=1,i=2,r="",s=!1;for(;e<t.length;){let a=t[e];if(typeof a=="string")if(i&2){let l=t[++e];r+="["+a+(l.length>0?'="'+l+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!na(a)&&(n+=NS(s,r),r=""),i=a,s=s||!na(i);e++}return r!==""&&(n+=NS(s,r)),n}function NN(t){return t.map(LN).join(",")}function VN(t){let n=[],e=[],i=1,r=2;for(;i<t.length;){let s=t[i];if(typeof s=="string")r===2?s!==""&&n.push(s,t[++i]):r===8&&e.push(s);else{if(!na(r))break;r=s}i++}return e.length&&n.push(1,...e),n}var Bo={};function RN(t,n){return t.createText(n)}function jN(t,n,e){t.setValue(n,e)}function GN(t,n){return t.createComment(kN(n))}function RP(t,n,e){return t.createElement(n,e)}function Xm(t,n,e,i,r){t.insertBefore(n,e,i,r)}function jP(t,n,e){t.appendChild(n,e)}function VS(t,n,e,i,r){i!==null?Xm(t,n,e,i,r):jP(t,n,e)}function WN(t,n,e){t.removeChild(null,n,e)}function zN(t,n,e){t.setAttribute(n,"style",e)}function UN(t,n,e){e===""?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function GP(t,n,e){let{mergedAttrs:i,classes:r,styles:s}=e;i!==null&&QL(t,n,i),r!==null&&UN(t,n,r),s!==null&&zN(t,n,s)}function e2(t,n,e,i,r,s,a,l,d,u,h){let _=to+i,b=_+r,w=qN(_,b),S=typeof u=="function"?u():u;return w[Vn]={type:t,blueprint:w,template:e,queries:null,viewQuery:l,declTNode:n,data:w.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:d,consts:S,incompleteFirstPass:!1,ssrId:h}}function qN(t,n){let e=[];for(let i=0;i<n;i++)e.push(i<t?null:Bo);return e}function HN(t){let n=t.tView;return n===null||n.incompleteFirstPass?t.tView=e2(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function t2(t,n,e,i,r,s,a,l,d,u,h){let _=n.blueprint.slice();return _[Ks]=r,_[zn]=i|4|128|8|64|1024,(u!==null||t&&t[zn]&2048)&&(_[zn]|=2048),zv(_),_[zr]=_[qc]=t,_[vo]=e,_[Da]=a||t&&t[Da],_[ar]=l||t&&t[ar],_[Uc]=d||t&&t[Uc]||null,_[Ss]=s,_[r0]=hN(),_[i0]=h,_[Nv]=u,_[Ps]=n.type==2?t[Ps]:_,_}function YN(t,n,e){let i=ea(n,t),r=HN(e),s=t[Da].rendererFactory,a=n2(t,t2(t,r,null,WP(e),i,n,null,s.createRenderer(i,e),null,null,null));return t[n.index]=a}function WP(t){let n=16;return t.signals?n=4096:t.onPush&&(n=64),n}function zP(t,n,e,i){if(e===0)return-1;let r=n.length;for(let s=0;s<e;s++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function n2(t,n){return t[uh]?t[Lv][Ms]=n:t[uh]=n,t[Lv]=n,n}function y(t=1){UP(no(),Zn(),fl()+t,!1)}function UP(t,n,e,i){if(!i)if((n[zn]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Nm(n,s,e)}else{let s=t.preOrderHooks;s!==null&&Vm(n,s,0,e)}tc(e)}var lg=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(lg||{});function Sb(t,n,e,i){let r=ni(null);try{let[s,a,l]=t.inputs[e],d=null;(a&lg.SignalBased)!==0&&(d=n[s][_o]),d!==null&&d.transformFn!==void 0?i=d.transformFn(i):l!==null&&(i=l.call(n,i)),t.setInput!==null?t.setInput(n,d,i,e,s):lP(n,d,s,i)}finally{ni(r)}}var ia=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ia||{}),XN;function i2(t,n){return XN(t,n)}function yh(t,n,e,i,r){if(i!=null){let s,a=!1;Zs(i)?s=i:Oa(i)&&(a=!0,i=i[Ks]);let l=ks(i);t===0&&e!==null?r==null?jP(n,e,l):Xm(n,e,l,r||null,!0):t===1&&e!==null?Xm(n,e,l,r||null,!0):t===2?WN(n,l,a):t===3&&n.destroyNode(l),s!=null&&sV(n,t,s,e,r)}}function JN(t,n){qP(t,n),n[Ks]=null,n[Ss]=null}function QN(t,n,e,i,r,s){i[Ks]=r,i[Ss]=n,cg(t,i,e,1,r,s)}function qP(t,n){n[Da].changeDetectionScheduler?.notify(9),cg(t,n,n[ar],2,null,null)}function $N(t){let n=t[uh];if(!n)return hb(t[Vn],t);for(;n;){let e=null;if(Oa(n))e=n[uh];else{let i=n[Io];i&&(e=i)}if(!e){for(;n&&!n[Ms]&&n!==t;)Oa(n)&&hb(n[Vn],n),n=n[zr];n===null&&(n=t),Oa(n)&&hb(n[Vn],n),e=n&&n[Ms]}n=e}}function r2(t,n){let e=t[Xc],i=e.indexOf(n);e.splice(i,1)}function HP(t,n){if(Jc(n))return;let e=n[ar];e.destroyNode&&cg(t,n,e,3,null,null),$N(n)}function hb(t,n){if(Jc(n))return;let e=ni(null);try{n[zn]&=-129,n[zn]|=256,n[ds]&&Bf(n[ds]),ZN(t,n),KN(t,n),n[Vn].type===1&&n[ar].destroy();let i=n[Kl];if(i!==null&&Zs(n[zr])){i!==n[zr]&&r2(i,n);let r=n[Ia];r!==null&&r.detachView(t)}Cb(n)}finally{ni(e)}}function KN(t,n){let e=t.cleanup,i=n[hh];if(e!==null)for(let a=0;a<e.length-1;a+=2)if(typeof e[a]=="string"){let l=e[a+3];l>=0?i[l]():i[-l].unsubscribe(),a+=2}else{let l=i[e[a+1]];e[a].call(l)}i!==null&&(n[hh]=null);let r=n[dl];if(r!==null){n[dl]=null;for(let a=0;a<r.length;a++){let l=r[a];l()}}let s=n[o0];if(s!==null){n[o0]=null;for(let a of s)a.destroy()}}function ZN(t,n){let e;if(t!=null&&(e=t.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=n[e[i]];if(!(r instanceof Kc)){let s=e[i+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){let l=r[s[a]],d=s[a+1];qi(4,l,d);try{d.call(l)}finally{qi(5,l,d)}}else{qi(4,r,s);try{s.call(r)}finally{qi(5,r,s)}}}}}function eV(t,n,e){return tV(t,n.parent,e)}function tV(t,n,e){let i=n;for(;i!==null&&i.type&168;)n=i,i=n.parent;if(i===null)return e[Ks];if(ec(i)){let{encapsulation:r}=t.data[i.directiveStart+i.componentOffset];if(r===gl.None||r===gl.Emulated)return null}return ea(i,e)}function nV(t,n,e){return rV(t,n,e)}function iV(t,n,e){return t.type&40?ea(t,e):null}var rV=iV,RS;function o2(t,n,e,i){let r=eV(t,i,n),s=n[ar],a=i.parent||n[Ss],l=nV(a,i,n);if(r!=null)if(Array.isArray(e))for(let d=0;d<e.length;d++)VS(s,r,e[d],l,!1);else VS(s,r,e,l,!1);RS!==void 0&&RS(s,i,n,e,r)}function p0(t,n){if(n!==null){let e=n.type;if(e&3)return ea(n,t);if(e&4)return Pb(-1,t[n.index]);if(e&8){let i=n.child;if(i!==null)return p0(t,i);{let r=t[n.index];return Zs(r)?Pb(-1,r):ks(r)}}else{if(e&128)return p0(t,n.next);if(e&32)return i2(n,t)()||ks(t[n.index]);{let i=YP(t,n);if(i!==null){if(Array.isArray(i))return i[0];let r=Xl(t[Ps]);return p0(r,i)}else return p0(t,n.next)}}}return null}function YP(t,n){if(n!==null){let i=t[Ps][Ss],r=n.projection;return i.projection[r]}return null}function Pb(t,n){let e=Io+t+1;if(e<n.length){let i=n[e],r=i[Vn].firstChild;if(r!==null)return p0(i,r)}return n[Zl]}function s2(t,n,e,i,r,s,a){for(;e!=null;){if(e.type===128){e=e.next;continue}let l=i[e.index],d=e.type;if(a&&n===0&&(l&&bh(ks(l),i),e.flags|=2),!Jb(e))if(d&8)s2(t,n,e.child,i,r,s,!1),yh(n,t,r,l,s);else if(d&32){let u=i2(e,i),h;for(;h=u();)yh(n,t,r,h,s);yh(n,t,r,l,s)}else d&16?oV(t,n,i,e,r,s):yh(n,t,r,l,s);e=a?e.projectionNext:e.next}}function cg(t,n,e,i,r,s){s2(e,i,t.firstChild,n,r,s,!1)}function oV(t,n,e,i,r,s){let a=e[Ps],d=a[Ss].projection[i.projection];if(Array.isArray(d))for(let u=0;u<d.length;u++){let h=d[u];yh(n,t,r,h,s)}else{let u=d,h=a[zr];MP(i)&&(u.flags|=128),s2(t,n,u,h,r,s,!0)}}function sV(t,n,e,i,r){let s=e[Zl],a=ks(e);s!==a&&yh(n,t,i,s,r);for(let l=Io;l<e.length;l++){let d=e[l];cg(d[Vn],d,t,n,i,s)}}function aV(t,n,e,i,r){if(n)r?t.addClass(e,i):t.removeClass(e,i);else{let s=i.indexOf("-")===-1?void 0:ia.DashCase;r==null?t.removeStyle(e,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ia.Important),t.setStyle(e,i,r,s))}}function XP(t,n,e,i,r){let s=fl(),a=i&2;try{tc(-1),a&&n.length>to&&UP(t,n,to,!1),qi(a?2:0,r,e),e(i,r)}finally{tc(s),qi(a?3:1,r,e)}}function dg(t,n,e){fV(t,n,e),(e.flags&64)===64&&mV(t,n,e)}function a2(t,n,e=ea){let i=n.localNames;if(i!==null){let r=n.index+1;for(let s=0;s<i.length;s+=2){let a=i[s+1],l=a===-1?e(n,t):t[a];t[r++]=l}}}function lV(t,n,e,i){let s=i.get(DP,AP)||e===gl.ShadowDom,a=t.selectRootElement(n,s);return cV(a),a}function cV(t){dV(t)}var dV=()=>null;function hV(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function JP(t,n,e,i,r,s){let a=n[Vn];if(c2(t,a,n,e,i)){ec(t)&&pV(n,t.index);return}t.type&3&&(e=hV(e)),uV(t,n,e,i,r,s)}function uV(t,n,e,i,r,s){if(t.type&3){let a=ea(t,n);i=s!=null?s(i,t.value||"",e):i,r.setProperty(a,e,i)}else t.type&12}function pV(t,n){let e=Es(n,t);e[zn]&16||(e[zn]|=64)}function fV(t,n,e){let i=e.directiveStart,r=e.directiveEnd;ec(e)&&YN(n,e,t.data[i+e.componentOffset]),t.firstCreatePass||qm(e,n);let s=e.initialInputs;for(let a=i;a<r;a++){let l=t.data[a],d=g0(n,t,a,e);if(bh(d,n),s!==null&&vV(n,a-i,d,l,e,s),Fa(l)){let u=Es(e.index,n);u[vo]=g0(n,t,a,e)}}}function mV(t,n,e){let i=e.directiveStart,r=e.directiveEnd,s=e.index,a=bS();try{tc(s);for(let l=i;l<r;l++){let d=t.data[l],u=n[l];Mm(l),(d.hostBindings!==null||d.hostVars!==0||d.hostAttrs!==null)&&gV(d,u)}}finally{tc(-1),Mm(a)}}function gV(t,n){t.hostBindings!==null&&t.hostBindings(1,n)}function l2(t,n){let e=t.directiveRegistry,i=null;if(e)for(let r=0;r<e.length;r++){let s=e[r];ON(n,s.selectors,!1)&&(i??=[],Fa(s)?i.unshift(s):i.push(s))}return i}function _V(t,n,e,i,r,s){let a=ea(t,n);yV(n[ar],a,s,t.value,e,i,r)}function yV(t,n,e,i,r,s,a){if(s==null)t.removeAttribute(n,r,e);else{let l=a==null?ws(s):a(s,i||"",r);t.setAttribute(n,r,l,e)}}function vV(t,n,e,i,r,s){let a=s[n];if(a!==null)for(let l=0;l<a.length;l+=2){let d=a[l],u=a[l+1];Sb(i,e,d,u)}}function QP(t,n,e,i,r){let s=to+e,a=n[Vn],l=r(a,n,t,i,e);n[s]=l,gh(t,!0);let d=t.type===2;return d?(GP(n[ar],l,t),(lS()===0||ph(t))&&bh(l,n),cS()):bh(l,n),Tm()&&(!d||!Jb(t))&&o2(a,n,l,t),t}function $P(t){let n=t;return Jv()?mS():(n=n.parent,gh(n,!1)),n}function bV(t,n){let e=t[Uc];if(!e)return;e.get(Oo,null)?.(n)}function c2(t,n,e,i,r){let s=t.inputs?.[i],a=t.hostDirectiveInputs?.[i],l=!1;if(a)for(let d=0;d<a.length;d+=2){let u=a[d],h=a[d+1],_=n.data[u];Sb(_,e[u],h,r),l=!0}if(s)for(let d of s){let u=e[d],h=n.data[d];Sb(h,u,i,r),l=!0}return l}function xV(t,n){let e=Es(n,t),i=e[Vn];CV(i,e);let r=e[Ks];r!==null&&e[i0]===null&&(e[i0]=IP(r,e[Uc])),qi(18),d2(i,e,e[vo]),qi(19,e[vo])}function CV(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}function d2(t,n,e){Pm(n);try{let i=t.viewQuery;i!==null&&Mb(1,i,e);let r=t.template;r!==null&&XP(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),n[Ia]?.finishViewCreation(t),t.staticContentQueries&&OP(t,n),t.staticViewQueries&&Mb(2,t.viewQuery,e);let s=t.components;s!==null&&wV(n,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[zn]&=-5,km()}}function wV(t,n){for(let e=0;e<n.length;e++)xV(t,n[e])}function MV(t,n,e,i){let r=ni(null);try{let s=n.tView,l=t[zn]&4096?4096:16,d=t2(t,s,e,l,null,n,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=t[n.index];d[Kl]=u;let h=t[Ia];return h!==null&&(d[Ia]=h.createEmbeddedView(s)),d2(s,d,e),d}finally{ni(r)}}function jS(t,n){return!n||n.firstChild===null||MP(t)}var GS=!1,SV=new an("");function _0(t,n,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let s=n[e.index];s!==null&&i.push(ks(s)),Zs(s)&&KP(s,i);let a=e.type;if(a&8)_0(t,n,e.child,i);else if(a&32){let l=i2(e,n),d;for(;d=l();)i.push(d)}else if(a&16){let l=YP(n,e);if(Array.isArray(l))i.push(...l);else{let d=Xl(n[Ps]);_0(d[Vn],d,l,i,!0)}}e=r?e.projectionNext:e.next}return i}function KP(t,n){for(let e=Io;e<t.length;e++){let i=t[e],r=i[Vn].firstChild;r!==null&&_0(i[Vn],i,r,n)}t[Zl]!==t[Ks]&&n.push(t[Zl])}function ZP(t){if(t[Yc]!==null){for(let n of t[Yc])n.impl.addSequence(n);t[Yc].length=0}}var ek=[];function PV(t){return t[ds]??kV(t)}function kV(t){let n=ek.pop()??Object.create(TV);return n.lView=t,n}function EV(t){t.lView[ds]!==t&&(t.lView=null,ek.push(t))}var TV=_n(Et({},Fc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{mh(t.lView)},consumerOnSignalRead(){this.lView[ds]=this}});function AV(t){let n=t[ds]??Object.create(DV);return n.lView=t,n}var DV=_n(Et({},Fc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let n=Xl(t.lView);for(;n&&!tk(n[Vn]);)n=Xl(n);n&&Uv(n)},consumerOnSignalRead(){this.lView[ds]=this}});function tk(t){return t.type!==2}function nk(t){if(t[o0]===null)return;let n=!0;for(;n;){let e=!1;for(let i of t[o0])i.dirty&&(e=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));n=e&&!!(t[zn]&8192)}}var IV=100;function h2(t,n=0){let i=t[Da].rendererFactory,r=!1;r||i.begin?.();try{OV(t,n)}finally{r||i.end?.()}}function OV(t,n){let e=$v();try{Kv(!0),kb(t,n);let i=0;for(;l0(t);){if(i===IV)throw new Vt(103,!1);i++,kb(t,1)}}finally{Kv(e)}}function ik(t,n){Qv(n?c0.Exhaustive:c0.OnlyDirtyViews);try{h2(t)}finally{Qv(c0.Off)}}function FV(t,n,e,i){if(Jc(n))return;let r=n[zn],s=!1,a=!1;Pm(n);let l=!0,d=null,u=null;s||(tk(t)?(u=PV(n),d=Bc(u)):Of()===null?(l=!1,u=AV(n),d=Bc(u)):n[ds]&&(Bf(n[ds]),n[ds]=null));try{zv(n),_S(t.bindingStartIndex),e!==null&&XP(t,n,e,2,i);let h=(r&3)===3;if(!s)if(h){let w=t.preOrderCheckHooks;w!==null&&Nm(n,w,null)}else{let w=t.preOrderHooks;w!==null&&Vm(n,w,0,null),cb(n,0)}if(a||BV(n),nk(n),rk(n,0),t.contentQueries!==null&&OP(t,n),!s)if(h){let w=t.contentCheckHooks;w!==null&&Nm(n,w)}else{let w=t.contentHooks;w!==null&&Vm(n,w,1),cb(n,1)}NV(t,n);let _=t.components;_!==null&&sk(n,_,0);let b=t.viewQuery;if(b!==null&&Mb(2,b,i),!s)if(h){let w=t.viewCheckHooks;w!==null&&Nm(n,w)}else{let w=t.viewHooks;w!==null&&Vm(n,w,2),cb(n,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),n[ym]){for(let w of n[ym])w();n[ym]=null}s||(ZP(n),n[zn]&=-73)}catch(h){throw s||mh(n),h}finally{u!==null&&(Hd(u,d),l&&EV(u)),km()}}function rk(t,n){for(let e=PP(t);e!==null;e=kP(e))for(let i=Io;i<e.length;i++){let r=e[i];ok(r,n)}}function BV(t){for(let n=PP(t);n!==null;n=kP(n)){if(!(n[zn]&2))continue;let e=n[Xc];for(let i=0;i<e.length;i++){let r=e[i];Uv(r)}}}function LV(t,n,e){qi(18);let i=Es(n,t);ok(i,e),qi(19,i[vo])}function ok(t,n){bm(t)&&kb(t,n)}function kb(t,n){let i=t[Vn],r=t[zn],s=t[ds],a=!!(n===0&&r&16);if(a||=!!(r&64&&n===0),a||=!!(r&1024),a||=!!(s?.dirty&&zu(s)),a||=!1,s&&(s.dirty=!1),t[zn]&=-9217,a)FV(i,t,i.template,t[vo]);else if(r&8192){let l=ni(null);try{nk(t),rk(t,1);let d=i.components;d!==null&&sk(t,d,1),ZP(t)}finally{ni(l)}}}function sk(t,n,e){for(let i=0;i<n.length;i++)LV(t,n[i],e)}function NV(t,n){let e=t.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)tc(~r);else{let s=r,a=e[++i],l=e[++i];vS(a,s);let d=n[s];qi(24,d),l(2,d),qi(25,d)}}}finally{tc(-1)}}function u2(t,n){let e=$v()?64:1088;for(t[Da].changeDetectionScheduler?.notify(n);t;){t[zn]|=e;let i=Xl(t);if(fh(t)&&!i)return t;t=i}return null}function ak(t,n,e,i){return[t,!0,0,n,null,i,null,e,null,null]}function VV(t,n,e,i=!0){let r=n[Vn];if(RV(r,n,t,e),i){let a=Pb(e,t),l=n[ar],d=l.parentNode(t[Zl]);d!==null&&QN(r,t[Ss],l,n,d,a)}let s=n[i0];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Eb(t,n){if(t.length<=Io)return;let e=Io+n,i=t[e];if(i){let r=i[Kl];r!==null&&r!==t&&r2(r,i),n>0&&(t[e-1][Ms]=i[Ms]);let s=e0(t,Io+n);JN(i[Vn],i);let a=s[Ia];a!==null&&a.detachView(s[Vn]),i[zr]=null,i[Ms]=null,i[zn]&=-129}return i}function RV(t,n,e,i){let r=Io+i,s=e.length;i>0&&(e[r-1][Ms]=n),i<s-Io?(n[Ms]=e[r],kv(e,Io+i,n)):(e.push(n),n[Ms]=null),n[zr]=e;let a=n[Kl];a!==null&&e!==a&&lk(a,n);let l=n[Ia];l!==null&&l.insertView(t),xm(n),n[zn]|=128}function lk(t,n){let e=t[Xc],i=n[zr];if(Oa(i))t[zn]|=2;else{let r=i[zr][Ps];n[Ps]!==r&&(t[zn]|=2)}e===null?t[Xc]=[n]:e.push(n)}var nc=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let n=this._lView,e=n[Vn];return _0(e,n,e.firstChild,[])}constructor(n,e){this._lView=n,this._cdRefInjectingView=e}get context(){return this._lView[vo]}set context(n){this._lView[vo]=n}get destroyed(){return Jc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[zr];if(Zs(n)){let e=n[s0],i=e?e.indexOf(this):-1;i>-1&&(Eb(n,i),e0(e,i))}this._attachedToViewContainer=!1}HP(this._lView[Vn],this._lView)}onDestroy(n){qv(this._lView,n)}markForCheck(){u2(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[zn]&=-129}reattach(){xm(this._lView),this._lView[zn]|=128}detectChanges(){this._lView[zn]|=1024,h2(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[Uc].get(SV,GS)}catch{this.exhaustive=GS}}attachToViewContainerRef(){if(this._appRef)throw new Vt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=fh(this._lView),e=this._lView[Kl];e!==null&&!n&&r2(e,this._lView),qP(this._lView[Vn],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Vt(902,!1);this._appRef=n;let e=fh(this._lView),i=this._lView[Kl];i!==null&&!e&&lk(i,this._lView),xm(this._lView)}};var ic=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=jV;constructor(e,i,r){this._declarationLView=e,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,i){return this.createEmbeddedViewImpl(e,i)}createEmbeddedViewImpl(e,i,r){let s=MV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:i,dehydratedView:r});return new nc(s)}}return t})();function jV(){return p2(io(),Zn())}function p2(t,n){return t.type&4?new ic(n,t,wh(t,n)):null}function f2(t,n,e,i,r){let s=t.data[n];if(s===null)s=GV(t,n,e,i,r),yS()&&(s.flags|=32);else if(s.type&64){s.type=e,s.value=i,s.attrs=r;let a=fS();s.injectorIndex=a===null?-1:a.injectorIndex}return gh(s,!0),s}function GV(t,n,e,i,r){let s=Xv(),a=Jv(),l=a?s:s&&s.parent,d=t.data[n]=zV(t,l,e,n,i,r);return WV(t,d,s,a),d}function WV(t,n,e,i){t.firstChild===null&&(t.firstChild=n),e!==null&&(i?e.child==null&&n.parent!==null&&(e.child=n):e.next===null&&(e.next=n,n.prev=e))}function zV(t,n,e,i,r,s){let a=n?n.injectorIndex:-1,l=0;return hS()&&(l|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var bfe=new RegExp(`^(\\d+)*(${mN}|${fN})*(.*)`);var UV=()=>null;function WS(t,n){return UV(t,n)}var ck=class{},hg=class{},Tb=class{resolveComponentFactory(n){throw new Vt(917,!1)}},vl=class{static NULL=new Tb},_l=class{},Ts=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>qV()}return t})();function qV(){let t=Zn(),n=io(),e=Es(n.index,t);return(Oa(e)?e:t)[ar]}var dk=(()=>{class t{static \u0275prov=lt({token:t,providedIn:"root",factory:()=>null})}return t})();var jm={},Ab=class{injector;parentInjector;constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,i){let r=this.injector.get(n,jm,i);return r!==jm||e===jm?r:this.parentInjector.get(n,e,i)}};function zS(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,s=0;if(n!==null)for(let a=0;a<n.length;a++){let l=n[a];if(typeof l=="number")s=l;else if(s==1)r=fv(r,l);else if(s==2){let d=l,u=n[++a];i=fv(i,d+": "+u+";")}}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}function Le(t,n=0){let e=Zn();if(e===null)return ht(t,n);let i=io();return xP(i,e,Zr(t),n)}function m2(){let t="invalid";throw new Error(t)}function hk(t,n,e,i,r){let s=i===null?null:{"":-1},a=r(t,e);if(a!==null){let l=a,d=null,u=null;for(let h of a)if(h.resolveHostDirectives!==null){[l,d,u]=h.resolveHostDirectives(a);break}XV(t,n,e,l,s,d,u)}s!==null&&i!==null&&HV(e,i,s)}function HV(t,n,e){let i=t.localNames=[];for(let r=0;r<n.length;r+=2){let s=e[n[r+1]];if(s==null)throw new Vt(-301,!1);i.push(n[r],s)}}function YV(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function XV(t,n,e,i,r,s,a){let l=i.length,d=!1;for(let b=0;b<l;b++){let w=i[b];!d&&Fa(w)&&(d=!0,YV(t,e,b)),bb(qm(e,n),t,w.type)}eR(e,t.data.length,l);for(let b=0;b<l;b++){let w=i[b];w.providersResolver&&w.providersResolver(w)}let u=!1,h=!1,_=zP(t,n,l,null);l>0&&(e.directiveToIndex=new Map);for(let b=0;b<l;b++){let w=i[b];if(e.mergedAttrs=m0(e.mergedAttrs,w.hostAttrs),QV(t,e,n,_,w),ZV(_,w,r),a!==null&&a.has(w)){let[L,R]=a.get(w);e.directiveToIndex.set(w.type,[_,L+e.directiveStart,R+e.directiveStart])}else(s===null||!s.has(w))&&e.directiveToIndex.set(w.type,_);w.contentQueries!==null&&(e.flags|=4),(w.hostBindings!==null||w.hostAttrs!==null||w.hostVars!==0)&&(e.flags|=64);let S=w.type.prototype;!u&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),u=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),h=!0),_++}JV(t,e,s)}function JV(t,n,e){for(let i=n.directiveStart;i<n.directiveEnd;i++){let r=t.data[i];if(e===null||!e.has(r))US(0,n,r,i),US(1,n,r,i),HS(n,i,!1);else{let s=e.get(r);qS(0,n,s,i),qS(1,n,s,i),HS(n,i,!0)}}}function US(t,n,e,i){let r=t===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let a;t===0?a=n.inputs??={}:a=n.outputs??={},a[s]??=[],a[s].push(i),uk(n,s)}}function qS(t,n,e,i){let r=t===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let a=r[s],l;t===0?l=n.hostDirectiveInputs??={}:l=n.hostDirectiveOutputs??={},l[a]??=[],l[a].push(i,s),uk(n,a)}}function uk(t,n){n==="class"?t.flags|=8:n==="style"&&(t.flags|=16)}function HS(t,n,e){let{attrs:i,inputs:r,hostDirectiveInputs:s}=t;if(i===null||!e&&r===null||e&&s===null||Zb(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let a=null,l=0;for(;l<i.length;){let d=i[l];if(d===0){l+=4;continue}else if(d===5){l+=2;continue}else if(typeof d=="number")break;if(!e&&r.hasOwnProperty(d)){let u=r[d];for(let h of u)if(h===n){a??=[],a.push(d,i[l+1]);break}}else if(e&&s.hasOwnProperty(d)){let u=s[d];for(let h=0;h<u.length;h+=2)if(u[h]===n){a??=[],a.push(u[h+1],i[l+1]);break}}l+=2}t.initialInputs??=[],t.initialInputs.push(a)}function QV(t,n,e,i,r){t.data[i]=r;let s=r.factory||(r.factory=Yl(r.type,!0)),a=new Kc(s,Fa(r),Le,null);t.blueprint[i]=a,e[i]=a,$V(t,n,i,zP(t,e,r.hostVars,Bo),r)}function $V(t,n,e,i,r){let s=r.hostBindings;if(s){let a=t.hostBindingOpCodes;a===null&&(a=t.hostBindingOpCodes=[]);let l=~n.index;KV(a)!=l&&a.push(l),a.push(e,i,s)}}function KV(t){let n=t.length;for(;n>0;){let e=t[--n];if(typeof e=="number"&&e<0)return e}return 0}function ZV(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;Fa(n)&&(e[""]=t)}}function eR(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function g2(t,n,e,i,r,s,a,l){let d=n[Vn],u=d.consts,h=a0(u,a),_=f2(d,t,e,i,h);return s&&hk(d,n,_,a0(u,l),r),_.mergedAttrs=m0(_.mergedAttrs,_.attrs),_.attrs!==null&&zS(_,_.attrs,!1),_.mergedAttrs!==null&&zS(_,_.mergedAttrs,!0),d.queries!==null&&d.queries.elementStart(d,_),_}function _2(t,n){uP(t,n),Vv(n)&&t.queries.elementEnd(n)}function y2(t){return ug(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function pk(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{let e=t[Symbol.iterator](),i;for(;!(i=e.next()).done;)n(i.value)}}function ug(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function k0(t,n,e){return t[n]=e}function fk(t,n){return t[n]}function ra(t,n,e){if(e===Bo)return!1;let i=t[n];return Object.is(i,e)?!1:(t[n]=e,!0)}function y0(t,n,e,i){let r=ra(t,n,e);return ra(t,n+1,i)||r}function mk(t,n,e,i,r){let s=y0(t,n,e,i);return ra(t,n+2,r)||s}function tR(t,n,e,i,r,s){let a=y0(t,n,e,i);return y0(t,n+2,r,s)||a}function ub(t,n,e){return function i(r){let s=ec(t)?Es(t.index,n):n;u2(s,5);let a=n[vo],l=YS(n,a,e,r),d=i.__ngNextListenerFn__;for(;d;)l=YS(n,a,d,r)&&l,d=d.__ngNextListenerFn__;return l}}function YS(t,n,e,i){let r=ni(null);try{return qi(6,n,e),e(i)!==!1}catch(s){return bV(t,s),!1}finally{qi(7,n,e),ni(r)}}function nR(t,n,e,i,r,s,a,l){let d=ph(t),u=!1,h=null;if(!i&&d&&(h=iR(n,e,s,t.index)),h!==null){let _=h.__ngLastListenerFn__||h;_.__ngNextListenerFn__=a,h.__ngLastListenerFn__=a,u=!0}else{let _=ea(t,e),b=i?i(_):_;_N(e,b,s,l);let w=r.listen(b,s,l),S=i?L=>i(ks(L[t.index])):t.index;gk(S,n,e,s,l,w,!1)}return u}function iR(t,n,e,i){let r=t.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let a=r[s];if(a===e&&r[s+1]===i){let l=n[hh],d=r[s+2];return l&&l.length>d?l[d]:null}typeof a=="string"&&(s+=2)}return null}function gk(t,n,e,i,r,s,a){let l=n.firstCreatePass?Yv(n):null,d=Hv(e),u=d.length;d.push(r,s),l&&l.push(i,t,u,(u+1)*(a?-1:1))}function XS(t,n,e,i,r,s){let a=n[e],l=n[Vn],u=l.data[e].outputs[i],_=a[u].subscribe(s);gk(t.index,l,n,r,s,_,!0)}var Db=Symbol("BINDING");var Jm=class extends vl{ngModule;constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let e=pl(n);return new Zc(e,this.ngModule)}};function rR(t){return Object.keys(t).map(n=>{let[e,i,r]=t[n],s={propName:e,templateName:n,isSignal:(i&lg.SignalBased)!==0};return r&&(s.transform=r),s})}function oR(t){return Object.keys(t).map(n=>({propName:t[n],templateName:n}))}function sR(t,n,e){let i=n instanceof _r?n:n?.injector;return i&&t.getStandaloneInjector!==null&&(i=t.getStandaloneInjector(i)||i),i?new Ab(e,i):e}function aR(t){let n=t.get(_l,null);if(n===null)throw new Vt(407,!1);let e=t.get(dk,null),i=t.get(ul,null);return{rendererFactory:n,sanitizer:e,changeDetectionScheduler:i,ngReflect:!1}}function lR(t,n){let e=(t.selectors[0][0]||"div").toLowerCase();return RP(n,e,e==="svg"?Rv:e==="math"?nS:null)}var Zc=class extends hg{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=rR(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=oR(this.componentDef.outputs),this.cachedOutputs}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=NN(n.selectors),this.ngContentSelectors=n.ngContentSelectors??[],this.isBoundToModule=!!e}create(n,e,i,r,s,a){qi(22);let l=ni(null);try{let d=this.componentDef,u=cR(i,d,a,s),h=sR(d,r||this.ngModule,n),_=aR(h),b=_.rendererFactory.createRenderer(null,d),w=i?lV(b,i,d.encapsulation,h):lR(d,b),S=a?.some(JS)||s?.some(z=>typeof z!="function"&&z.bindings.some(JS)),L=t2(null,u,null,512|WP(d),null,null,_,b,h,null,IP(w,h,!0));L[to]=w,Pm(L);let R=null;try{let z=g2(to,L,2,"#host",()=>u.directiveRegistry,!0,0);w&&(GP(b,w,z),bh(w,L)),dg(u,L,z),Qb(u,z,L),_2(u,z),e!==void 0&&hR(z,this.ngContentSelectors,e),R=Es(z.index,L),L[vo]=R[vo],d2(u,L,null)}catch(z){throw R!==null&&Cb(R),Cb(L),z}finally{qi(23),km()}return new Qm(this.componentType,L,!!S)}finally{ni(l)}}};function cR(t,n,e,i){let r=t?["ng-version","20.1.4"]:VN(n.selectors[0]),s=null,a=null,l=0;if(e)for(let h of e)l+=h[Db].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(a??=[]).push(h));if(i)for(let h=0;h<i.length;h++){let _=i[h];if(typeof _!="function")for(let b of _.bindings){l+=b[Db].requiredVars;let w=h+1;b.create&&(b.targetIdx=w,(s??=[]).push(b)),b.update&&(b.targetIdx=w,(a??=[]).push(b))}}let d=[n];if(i)for(let h of i){let _=typeof h=="function"?h:h.type,b=Dv(_);d.push(b)}return e2(0,null,dR(s,a),1,l,d,null,null,null,[r],null)}function dR(t,n){return!t&&!n?null:e=>{if(e&1&&t)for(let i of t)i.create();if(e&2&&n)for(let i of n)i.update()}}function JS(t){let n=t[Db].kind;return n==="input"||n==="twoWay"}var Qm=class extends ck{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(n,e,i){super(),this._rootLView=e,this._hasInputBindings=i,this._tNode=vm(e[Vn],to),this.location=wh(this._tNode,e),this.instance=Es(this._tNode.index,e)[vo],this.hostView=this.changeDetectorRef=new nc(e,void 0),this.componentType=n}setInput(n,e){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;let r=this._rootLView,s=c2(i,r[Vn],r,n,e);this.previousInputValues.set(n,e);let a=Es(i.index,r);u2(a,1)}get injector(){return new $c(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function hR(t,n,e){let i=t.projection=[];for(let r=0;r<n.length;r++){let s=e[r];i.push(s!=null&&s.length?Array.from(s):null)}}var hs=(()=>{class t{static __NG_ELEMENT_ID__=uR}return t})();function uR(){let t=io();return yk(t,Zn())}var pR=hs,_k=class extends pR{_lContainer;_hostTNode;_hostLView;constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return wh(this._hostTNode,this._hostLView)}get injector(){return new $c(this._hostTNode,this._hostLView)}get parentInjector(){let n=Hb(this._hostTNode,this._hostLView);if(mP(n)){let e=zm(n,this._hostLView),i=Wm(n),r=e[Vn].data[i+8];return new $c(r,e)}else return new $c(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let e=QS(this._lContainer);return e!==null&&e[n]||null}get length(){return this._lContainer.length-Io}createEmbeddedView(n,e,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let a=WS(this._lContainer,n.ssrId),l=n.createEmbeddedViewImpl(e||{},s,a);return this.insertImpl(l,r,jS(this._hostTNode,a)),l}createComponent(n,e,i,r,s,a,l){let d=n&&!WL(n),u;if(d)u=e;else{let R=e||{};u=R.index,i=R.injector,r=R.projectableNodes,s=R.environmentInjector||R.ngModuleRef,a=R.directives,l=R.bindings}let h=d?n:new Zc(pl(n)),_=i||this.parentInjector;if(!s&&h.ngModule==null){let z=(d?_:this.parentInjector).get(_r,null);z&&(s=z)}let b=pl(h.componentType??{}),w=WS(this._lContainer,b?.id??null),S=w?.firstChild??null,L=h.create(_,r,S,s,a,l);return this.insertImpl(L.hostView,u,jS(this._hostTNode,w)),L}insert(n,e){return this.insertImpl(n,e,!0)}insertImpl(n,e,i){let r=n._lView;if(rS(r)){let l=this.indexOf(n);if(l!==-1)this.detach(l);else{let d=r[zr],u=new _k(d,d[Ss],d[zr]);u.detach(u.indexOf(n))}}let s=this._adjustIndex(e),a=this._lContainer;return VV(a,r,s,i),n.attachToViewContainerRef(),kv(pb(a),s,n),n}move(n,e){return this.insert(n,e)}indexOf(n){let e=QS(this._lContainer);return e!==null?e.indexOf(n):-1}remove(n){let e=this._adjustIndex(n,-1),i=Eb(this._lContainer,e);i&&(e0(pb(this._lContainer),e),HP(i[Vn],i))}detach(n){let e=this._adjustIndex(n,-1),i=Eb(this._lContainer,e);return i&&e0(pb(this._lContainer),e)!=null?new nc(i):null}_adjustIndex(n,e=0){return n??this.length+e}};function QS(t){return t[s0]}function pb(t){return t[s0]||(t[s0]=[])}function yk(t,n){let e,i=n[t.index];return Zs(i)?e=i:(e=ak(i,n,null,t),n[t.index]=e,n2(n,e)),mR(e,n,t,i),new _k(e,t,n)}function fR(t,n){let e=t[ar],i=e.createComment(""),r=ea(n,t),s=e.parentNode(r);return Xm(e,s,i,e.nextSibling(r),!1),i}var mR=yR,gR=()=>!1;function _R(t,n,e){return gR(t,n,e)}function yR(t,n,e,i){if(t[Zl])return;let r;e.type&8?r=ks(i):r=fR(n,e),t[Zl]=r}var Ib=class t{queryList;matches=null;constructor(n){this.queryList=n}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Ob=class t{queries;constructor(n=[]){this.queries=n}createEmbeddedView(n){let e=n.queries;if(e!==null){let i=n.contentQueries!==null?n.contentQueries[0]:e.length,r=[];for(let s=0;s<i;s++){let a=e.getByIndex(s),l=this.queries[a.indexInDeclarationView];r.push(l.clone())}return new t(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)v2(n,e).matches!==null&&this.queries[e].setDirty()}},Fb=class{flags;read;predicate;constructor(n,e,i=null){this.flags=e,this.read=i,typeof n=="string"?this.predicate=PR(n):this.predicate=n}},Bb=class t{queries;constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,s=this.getByIndex(i).embeddedTView(n,r);s&&(s.indexInDeclarationView=i,e!==null?e.push(s):e=[s])}return e!==null?new t(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},Lb=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(n,e=-1){this.metadata=n,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new t(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=n.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(n,e,vR(e,s)),this.matchTNodeWithReadOption(n,e,Rm(e,n,s,!1,!1))}else i===ic?e.type&4&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Rm(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===fr||r===hs||r===ic&&e.type&4)this.addMatch(e.index,-2);else{let s=Rm(e,n,r,!1,!1);s!==null&&this.addMatch(e.index,s)}else this.addMatch(e.index,i)}}addMatch(n,e){this.matches===null?this.matches=[n,e]:this.matches.push(n,e)}};function vR(t,n){let e=t.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1]}return null}function bR(t,n){return t.type&11?wh(t,n):t.type&4?p2(t,n):null}function xR(t,n,e,i){return e===-1?bR(n,t):e===-2?CR(t,n,i):g0(t,t[Vn],e,n)}function CR(t,n,e){if(e===fr)return wh(n,t);if(e===ic)return p2(n,t);if(e===hs)return yk(n,t)}function vk(t,n,e,i){let r=n[Ia].queries[i];if(r.matches===null){let s=t.data,a=e.matches,l=[];for(let d=0;a!==null&&d<a.length;d+=2){let u=a[d];if(u<0)l.push(null);else{let h=s[u];l.push(xR(n,h,a[d+1],e.metadata.read))}}r.matches=l}return r.matches}function Nb(t,n,e,i){let r=t.queries.getByIndex(e),s=r.matches;if(s!==null){let a=vk(t,n,r,e);for(let l=0;l<s.length;l+=2){let d=s[l];if(d>0)i.push(a[l/2]);else{let u=s[l+1],h=n[-d];for(let _=Io;_<h.length;_++){let b=h[_];b[Kl]===b[zr]&&Nb(b[Vn],b,u,i)}if(h[Xc]!==null){let _=h[Xc];for(let b=0;b<_.length;b++){let w=_[b];Nb(w[Vn],w,u,i)}}}}}return i}function wR(t,n){return t[Ia].queries[n].queryList}function MR(t,n,e){let i=new Hm((e&4)===4);return aS(t,n,i,i.destroy),(n[Ia]??=new Ob).queries.push(new Ib(i))-1}function SR(t,n,e){let i=no();return i.firstCreatePass&&(kR(i,new Fb(t,n,e),-1),(n&2)===2&&(i.staticViewQueries=!0)),MR(i,Zn(),n)}function PR(t){return t.split(",").map(n=>n.trim())}function kR(t,n,e){t.queries===null&&(t.queries=new Bb),t.queries.track(new Lb(n,e))}function v2(t,n){return t.queries.getByIndex(n)}function ER(t,n){let e=t[Vn],i=v2(e,n);return i.crossesNgTemplate?Nb(e,t,n,[]):vk(e,t,i,n)}function bk(t){let n=[],e=new Map;function i(r){let s=e.get(r);if(!s){let a=t(r);e.set(r,s=a.then(AR))}return s}return $m.forEach((r,s)=>{let a=[];r.templateUrl&&a.push(i(r.templateUrl).then(u=>{r.template=u}));let l=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=l,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let u=r.styles.length,h=r.styleUrls;r.styleUrls.forEach((_,b)=>{l.push(""),a.push(i(_).then(w=>{l[u+b]=w,h.splice(h.indexOf(_),1),h.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&a.push(i(r.styleUrl).then(u=>{l.push(u),r.styleUrl=void 0}));let d=Promise.all(a).then(()=>DR(s));n.push(d)}),xk(),Promise.all(n).then(()=>{})}var $m=new Map,TR=new Set;function xk(){let t=$m;return $m=new Map,t}function Ck(){return $m.size===0}function AR(t){return typeof t=="string"?t:t.text()}function DR(t){TR.delete(t)}var $S=new Set;function nd(t){$S.has(t)||($S.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var ed=class{},pg=class{};var v0=class extends ed{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Jm(this);constructor(n,e,i,r=!0){super(),this.ngModuleType=n,this._parent=e;let s=Av(n);this._bootstrapComponents=NP(s.bootstrap),this._r3Injector=ib(n,e,[{provide:ed,useValue:this},{provide:vl,useValue:this.componentFactoryResolver},...i],hl(n),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},b0=class extends pg{moduleType;constructor(n){super(),this.moduleType=n}create(n){return new v0(this.moduleType,n,[])}};function wk(t,n,e){return new v0(t,n,e,!1)}var Km=class extends ed{injector;componentFactoryResolver=new Jm(this);instance=null;constructor(n){super();let e=new Wc([...n.providers,{provide:ed,useValue:this},{provide:vl,useValue:this.componentFactoryResolver}],n.parent||n0(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function Ph(t,n,e=null){return new Km({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}var IR=(()=>{class t{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=Iv(!1,e.type),r=i.length>0?Ph([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=lt({token:t,providedIn:"environment",factory:()=>new t(ht(_r))})}return t})();function zt(t){return Ch(()=>{let n=Mk(t),e=_n(Et({},n),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Yb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:n.standalone?r=>r.get(IR).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||gl.Emulated,styles:t.styles||cs,_:null,schemas:t.schemas||null,tView:null,id:""});n.standalone&&nd("NgStandalone"),Sk(e);let i=t.dependencies;return e.directiveDefs=KS(i,OR),e.pipeDefs=KS(i,Q3),e.id=LR(e),e})}function OR(t){return pl(t)||Dv(t)}function yr(t){return Ch(()=>({type:t.type,bootstrap:t.bootstrap||cs,declarations:t.declarations||cs,imports:t.imports||cs,exports:t.exports||cs,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function FR(t,n){if(t==null)return Ql;let e={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],s,a,l,d;Array.isArray(r)?(l=r[0],s=r[1],a=r[2]??s,d=r[3]||null):(s=r,a=r,l=lg.None,d=null),e[s]=[i,l,d],n[s]=a}return e}function BR(t){if(t==null)return Ql;let n={};for(let e in t)t.hasOwnProperty(e)&&(n[t[e]]=e);return n}function Di(t){return Ch(()=>{let n=Mk(t);return Sk(n),n})}function fg(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Mk(t){let n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputConfig:t.inputs||Ql,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||cs,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:FR(t.inputs,n),outputs:BR(t.outputs),debugInfo:null}}function Sk(t){t.features?.forEach(n=>n(t))}function KS(t,n){return t?()=>{let e=typeof t=="function"?t():t,i=[];for(let r of e){let s=n(r);s!==null&&i.push(s)}return i}:null}function LR(t){let n=0,e=typeof t.consts=="function"?"":t.consts,i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,e,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let s of i.join("|"))n=Math.imul(31,n)+s.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function NR(t){return Object.getPrototypeOf(t.prototype).constructor}function Yr(t){let n=NR(t.type),e=!0,i=[t];for(;n;){let r;if(Fa(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Vt(903,!1);r=n.\u0275dir}if(r){if(e){i.push(r);let a=t;a.inputs=fb(t.inputs),a.declaredInputs=fb(t.declaredInputs),a.outputs=fb(t.outputs);let l=r.hostBindings;l&&WR(t,l);let d=r.viewQuery,u=r.contentQueries;if(d&&jR(t,d),u&&GR(t,u),VR(t,r),G3(t.outputs,r.outputs),Fa(r)&&r.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let a=0;a<s.length;a++){let l=s[a];l&&l.ngInherit&&l(t),l===Yr&&(e=!1)}}n=Object.getPrototypeOf(n)}RR(i)}function VR(t,n){for(let e in n.inputs){if(!n.inputs.hasOwnProperty(e)||t.inputs.hasOwnProperty(e))continue;let i=n.inputs[e];i!==void 0&&(t.inputs[e]=i,t.declaredInputs[e]=n.declaredInputs[e])}}function RR(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=m0(r.hostAttrs,e=m0(e,r.hostAttrs))}}function fb(t){return t===Ql?{}:t===cs?[]:t}function jR(t,n){let e=t.viewQuery;e?t.viewQuery=(i,r)=>{n(i,r),e(i,r)}:t.viewQuery=n}function GR(t,n){let e=t.contentQueries;e?t.contentQueries=(i,r,s)=>{n(i,r,s),e(i,r,s)}:t.contentQueries=n}function WR(t,n){let e=t.hostBindings;e?t.hostBindings=(i,r)=>{n(i,r),e(i,r)}:t.hostBindings=n}function zR(t,n,e,i,r,s,a,l){if(e.firstCreatePass){t.mergedAttrs=m0(t.mergedAttrs,t.attrs);let h=t.tView=e2(2,t,r,s,a,e.directiveRegistry,e.pipeRegistry,null,e.schemas,e.consts,null);e.queries!==null&&(e.queries.template(e,t),h.queries=e.queries.embeddedTView(t))}l&&(t.flags|=l),gh(t,!1);let d=qR(e,n,t,i);Tm()&&o2(e,n,d,t),bh(d,n);let u=ak(d,n,d,t);n[i+to]=u,n2(n,u),_R(u,t,n)}function UR(t,n,e,i,r,s,a,l,d,u,h){let _=e+to,b;return n.firstCreatePass?(b=f2(n,_,4,a||null,l||null),Cm()&&hk(n,t,b,a0(n.consts,u),l2),uP(n,b)):b=n.data[_],zR(b,t,n,e,i,r,s,d),ph(b)&&dg(n,t,b),u!=null&&a2(t,b,h),b}function Wt(t,n,e,i,r,s,a,l){let d=Zn(),u=no(),h=a0(u.consts,s);return UR(d,u,t,n,e,i,r,h,void 0,a,l),Wt}var qR=HR;function HR(t,n,e,i){return d0(!0),n[ar].createComment("")}var mg=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(mg||{}),id=new an(""),Pk=!1,Vb=class extends yn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(n=!1){super(),this.__isAsync=n,Bv()&&(this.destroyRef=Ft(ta,{optional:!0})??void 0,this.pendingTasks=Ft(Ba,{optional:!0})??void 0)}emit(n){let e=ni(null);try{super.next(n)}finally{ni(e)}}subscribe(n,e,i){let r=n,s=e||(()=>null),a=i;if(n&&typeof n=="object"){let d=n;r=d.next?.bind(d),s=d.error?.bind(d),a=d.complete?.bind(d)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),a&&(a=this.wrapInTimeout(a)));let l=super.subscribe({next:r,error:s,complete:a});return n instanceof Ar&&n.add(l),l}wrapInTimeout(n){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{n(e)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Rn=Vb;function kk(t){let n,e;function i(){t=u0;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{t(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{t(),i()})),()=>i()}function ZS(t){return queueMicrotask(()=>t()),()=>{t=u0}}var b2="isAngularZone",Zm=b2+"_ID",YR=0,on=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Rn(!1);onMicrotaskEmpty=new Rn(!1);onStable=new Rn(!1);onError=new Rn(!1);constructor(n){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=Pk}=n;if(typeof Zone>"u")throw new Vt(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&i,a.shouldCoalesceRunChangeDetection=r,a.callbackScheduled=!1,a.scheduleInRootZone=s,QR(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(b2)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Vt(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Vt(909,!1)}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){let s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+r,n,XR,u0,u0);try{return s.runTask(a,e,i)}finally{s.cancelTask(a)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}},XR={};function x2(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function JR(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function n(){kk(()=>{t.callbackScheduled=!1,Rb(t),t.isCheckStableRunning=!0,x2(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{n()}):t._outer.run(()=>{n()}),Rb(t)}function QR(t){let n=()=>{JR(t)},e=YR++;t._inner=t._inner.fork({name:"angular",properties:{[b2]:!0,[Zm]:e,[Zm+e]:!0},onInvokeTask:(i,r,s,a,l,d)=>{if($R(d))return i.invokeTask(s,a,l,d);try{return eP(t),i.invokeTask(s,a,l,d)}finally{(t.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&n(),tP(t)}},onInvoke:(i,r,s,a,l,d,u)=>{try{return eP(t),i.invoke(s,a,l,d,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!KR(d)&&n(),tP(t)}},onHasTask:(i,r,s,a)=>{i.hasTask(s,a),r===s&&(a.change=="microTask"?(t._hasPendingMicrotasks=a.microTask,Rb(t),x2(t)):a.change=="macroTask"&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(i,r,s,a)=>(i.handleError(s,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}function Rb(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function eP(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function tP(t){t._nesting--,x2(t)}var x0=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Rn;onMicrotaskEmpty=new Rn;onStable=new Rn;onError=new Rn;run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}};function $R(t){return Ek(t,"__ignore_ng_zone__")}function KR(t){return Ek(t,"__scheduler_tick__")}function Ek(t,n){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[n]===!0}function Tk(t="zone.js",n){return t==="noop"?new x0:t==="zone.js"?new on(n):t}var C2=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=lt({token:t,providedIn:"root",factory:()=>new t})}return t})(),Ak=[0,1,2,3],Dk=(()=>{class t{ngZone=Ft(on);scheduler=Ft(ul);errorHandler=Ft($s,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Ft(id,{optional:!0})}execute(){let e=this.sequences.size>0;e&&qi(16),this.executing=!0;for(let i of Ak)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=r.hooks[i];return s(r.pipelinedValue)},r.snapshot))}catch(s){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&qi(17)}register(e){let{view:i}=e;i!==void 0?((i[Yc]??=[]).push(e),mh(i),i[zn]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,i){return i?i.run(mg.AFTER_NEXT_RENDER,e):e()}static \u0275prov=lt({token:t,providedIn:"root",factory:()=>new t})}return t})(),eg=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(n,e,i,r,s,a=null){this.impl=n,this.hooks=e,this.view=i,this.once=r,this.snapshot=a,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let n=this.view?.[Yc];n&&(this.view[Yc]=n.filter(e=>e!==this))}};function E0(t,n){let e=n?.injector??Ft(Ur);return nd("NgAfterNextRender"),ej(t,e,n,!0)}function ZR(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function ej(t,n,e,i){let r=n.get(C2);r.impl??=n.get(Dk);let s=n.get(id,null,{optional:!0}),a=e?.manualCleanup!==!0?n.get(ta):null,l=n.get(Dm,null,{optional:!0}),d=new eg(r.impl,ZR(t),l?.view,i,a,s?.snapshot(null));return r.impl.register(d),d}var w2=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var gg=new an(""),kh=new an(""),T0=(()=>{class t{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(e,i,r){this._ngZone=e,this.registry=i,Bv()&&(this._destroyRef=Ft(ta,{optional:!0})??void 0),M2||(Ik(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let e=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),i=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{on.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{e.unsubscribe(),i.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(e)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),e()},i)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,i,r){if(r&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static \u0275fac=function(i){return new(i||t)(ht(on),ht(A0),ht(kh))};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})(),A0=(()=>{class t{_applications=new Map;registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return M2?.findTestabilityInTree(this,e,i)??null}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Ik(t){M2=t}var M2;function bl(t){return!!t&&typeof t.then=="function"}function _g(t){return!!t&&typeof t.subscribe=="function"}var S2=new an("");function yg(t){return dh([{provide:S2,multi:!0,useValue:t}])}var P2=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i});appInits=Ft(S2,{optional:!0})??[];injector=Ft(Ur);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let s=qr(this.injector,r);if(bl(s))e.push(s);else if(_g(s)){let a=new Promise((l,d)=>{s.subscribe({complete:l,error:d})});e.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),vg=new an("");function Ok(){Ry(()=>{let t="";throw new Vt(600,t)})}function Fk(t){return t.isBoundToModule}var tj=10;function k2(t,n){return Array.isArray(n)?n.reduce(k2,t):Et(Et({},t),n)}var oa=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Ft(Oo);afterRenderManager=Ft(C2);zonelessEnabled=Ft(Am);rootEffectScheduler=Ft(lb);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new yn;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=Ft(Ba);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(fn(e=>!e))}constructor(){Ft(id,{optional:!0})}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}_injector=Ft(_r);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,i){return this.bootstrapImpl(e,i)}bootstrapImpl(e,i,r=Ur.NULL){return this._injector.get(on).run(()=>{qi(10);let a=e instanceof hg;if(!this._injector.get(P2).done){let S="";throw new Vt(405,S)}let d;a?d=e:d=this._injector.get(vl).resolveComponentFactory(e),this.componentTypes.push(d.componentType);let u=Fk(d)?void 0:this._injector.get(ed),h=i||d.selector,_=d.create(r,[],h,u),b=_.location.nativeElement,w=_.injector.get(gg,null);return w?.registerApplication(b),_.onDestroy(()=>{this.detachView(_.hostView),f0(this.components,_),w?.unregisterApplication(b)}),this._loadComponent(_),qi(11,_),_})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){qi(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(mg.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Vt(101,!1);let e=ni(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ni(e),this.afterTick.next(),qi(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(_l,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<tj;)qi(14),this.synchronizeOnce(),qi(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let e=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!l0(r))continue;let s=i&&!this.zonelessEnabled?0:1;h2(r,s),e=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}e||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>l0(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;f0(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(e),this._injector.get(vg,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>f0(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Vt(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function f0(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function ae(t,n,e,i){let r=Zn(),s=_h();if(ra(r,s,n)){let a=no(),l=Em();_V(l,r,t,n,e,i)}return ae}function E(t,n,e){let i=Zn(),r=_h();if(ra(i,r,n)){let s=no(),a=Em();JP(a,i,t,n,i[ar],e)}return E}function nP(t,n,e,i,r){c2(n,t,e,r?"class":"style",i)}function p(t,n,e,i){let r=Zn(),s=r[Vn],a=t+to,l=s.firstCreatePass?g2(a,r,2,n,l2,Cm(),e,i):s.data[a];if(QP(l,r,t,n,nj),ph(l)){let d=r[Vn];dg(d,r,l),Qb(d,l,r)}return i!=null&&a2(r,l),p}function m(){let t=no(),n=io(),e=$P(n);return t.firstCreatePass&&_2(t,e),uS(e)&&pS(),dS(),e.classesWithoutHost!=null&&XL(e)&&nP(t,e,Zn(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&JL(e)&&nP(t,e,Zn(),e.stylesWithoutHost,!1),m}function ie(t,n,e,i){return p(t,n,e,i),m(),ie}var nj=(t,n,e,i,r)=>(d0(!0),RP(n[ar],i,PS()));function us(t,n,e){let i=Zn(),r=i[Vn],s=t+to,a=r.firstCreatePass?g2(s,i,8,"ng-container",l2,Cm(),n,e):r.data[s];if(QP(a,i,t,"ng-container",ij),ph(a)){let l=i[Vn];dg(l,i,a),Qb(l,a,i)}return e!=null&&a2(i,a),us}function ps(){let t=no(),n=io(),e=$P(n);return t.firstCreatePass&&_2(t,e),ps}function Eh(t,n,e){return us(t,n,e),ps(),Eh}var ij=(t,n,e,i,r)=>(d0(!0),GN(n[ar],""));function mn(){return Zn()}var D0="en-US";var rj=D0;function Bk(t){typeof t=="string"&&(rj=t.toLowerCase().replace(/_/g,"-"))}function J(t,n,e){let i=Zn(),r=no(),s=io();return Lk(r,i,i[ar],s,t,n,e),J}function Lk(t,n,e,i,r,s,a){let l=!0,d=null;if((i.type&3||a)&&(d??=ub(i,n,s),nR(i,t,n,a,e,r,s,d)&&(l=!1)),l){let u=i.outputs?.[r],h=i.hostDirectiveOutputs?.[r];if(h&&h.length)for(let _=0;_<h.length;_+=2){let b=h[_],w=h[_+1];d??=ub(i,n,s),XS(i,n,b,w,r,d)}if(u&&u.length)for(let _ of u)d??=ub(i,n,s),XS(i,n,_,r,r,d)}}function ge(t=1){return SS(t)}function xl(t,n,e){SR(t,n,e)}function Na(t){let n=Zn(),e=no(),i=eb();Sm(i+1);let r=v2(e,i);if(t.dirty&&iS(n)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let s=ER(n,i);t.reset(s,lN),t.notifyOnChanges()}return!0}return!1}function Va(){return wR(Zn(),eb())}function rd(t){let n=gS();return Gv(n,to+t)}function Bm(t,n){return t<<17|n<<2}function td(t){return t>>17&32767}function oj(t){return(t&2)==2}function sj(t,n){return t&131071|n<<17}function jb(t){return t|2}function xh(t){return(t&131068)>>2}function mb(t,n){return t&-131069|n<<2}function aj(t){return(t&1)===1}function Gb(t){return t|1}function lj(t,n,e,i,r,s){let a=s?n.classBindings:n.styleBindings,l=td(a),d=xh(a);t[i]=e;let u=!1,h;if(Array.isArray(e)){let _=e;h=_[1],(h===null||ch(_,h)>0)&&(u=!0)}else h=e;if(r)if(d!==0){let b=td(t[l+1]);t[i+1]=Bm(b,l),b!==0&&(t[b+1]=mb(t[b+1],i)),t[l+1]=sj(t[l+1],i)}else t[i+1]=Bm(l,0),l!==0&&(t[l+1]=mb(t[l+1],i)),l=i;else t[i+1]=Bm(d,0),l===0?l=i:t[d+1]=mb(t[d+1],i),d=i;u&&(t[i+1]=jb(t[i+1])),iP(t,h,i,!0),iP(t,h,i,!1),cj(n,h,t,i,s),a=Bm(l,d),s?n.classBindings=a:n.styleBindings=a}function cj(t,n,e,i,r){let s=r?t.residualClasses:t.residualStyles;s!=null&&typeof n=="string"&&ch(s,n)>=0&&(e[i+1]=Gb(e[i+1]))}function iP(t,n,e,i){let r=t[e+1],s=n===null,a=i?td(r):xh(r),l=!1;for(;a!==0&&(l===!1||s);){let d=t[a],u=t[a+1];dj(d,n)&&(l=!0,t[a+1]=i?Gb(u):jb(u)),a=i?td(u):xh(u)}l&&(t[e+1]=i?jb(r):Gb(r))}function dj(t,n){return t===null||n==null||(Array.isArray(t)?t[1]:t)===n?!0:Array.isArray(t)&&typeof n=="string"?ch(t,n)>=0:!1}function cn(t,n,e){return Nk(t,n,e,!1),cn}function Xn(t,n){return Nk(t,n,null,!0),Xn}function Nk(t,n,e,i){let r=Zn(),s=no(),a=wm(2);if(s.firstUpdatePass&&uj(s,t,a,i),n!==Bo&&ra(r,a,n)){let l=s.data[fl()];_j(s,l,r,r[ar],t,r[a+1]=yj(n,e),i,a)}}function hj(t,n){return n>=t.expandoStartIndex}function uj(t,n,e,i){let r=t.data;if(r[e+1]===null){let s=r[fl()],a=hj(t,e);vj(s,i)&&n===null&&!a&&(n=!1),n=pj(r,s,n,i),lj(r,s,n,e,a,i)}}function pj(t,n,e,i){let r=xS(t),s=i?n.residualClasses:n.residualStyles;if(r===null)(i?n.classBindings:n.styleBindings)===0&&(e=gb(null,t,n,e,i),e=C0(e,n.attrs,i),s=null);else{let a=n.directiveStylingLast;if(a===-1||t[a]!==r)if(e=gb(r,t,n,e,i),s===null){let d=fj(t,n,i);d!==void 0&&Array.isArray(d)&&(d=gb(null,t,n,d[1],i),d=C0(d,n.attrs,i),mj(t,n,i,d))}else s=gj(t,n,i)}return s!==void 0&&(i?n.residualClasses=s:n.residualStyles=s),e}function fj(t,n,e){let i=e?n.classBindings:n.styleBindings;if(xh(i)!==0)return t[td(i)]}function mj(t,n,e,i){let r=e?n.classBindings:n.styleBindings;t[td(r)]=i}function gj(t,n,e){let i,r=n.directiveEnd;for(let s=1+n.directiveStylingLast;s<r;s++){let a=t[s].hostAttrs;i=C0(i,a,e)}return C0(i,n.attrs,e)}function gb(t,n,e,i,r){let s=null,a=e.directiveEnd,l=e.directiveStylingLast;for(l===-1?l=e.directiveStart:l++;l<a&&(s=n[l],i=C0(i,s.hostAttrs,r),s!==t);)l++;return t!==null&&(e.directiveStylingLast=l),i}function C0(t,n,e){let i=e?1:2,r=-1;if(n!==null)for(let s=0;s<n.length;s++){let a=n[s];typeof a=="number"?r=a:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),J3(t,a,e?!0:n[++s]))}return t===void 0?null:t}function _j(t,n,e,i,r,s,a,l){if(!(n.type&3))return;let d=t.data,u=d[l+1],h=aj(u)?rP(d,n,e,r,xh(u),a):void 0;if(!tg(h)){tg(s)||oj(u)&&(s=rP(d,null,e,r,l,a));let _=jv(fl(),e);aV(i,a,_,r,s)}}function rP(t,n,e,i,r,s){let a=n===null,l;for(;r>0;){let d=t[r],u=Array.isArray(d),h=u?d[1]:d,_=h===null,b=e[r+1];b===Bo&&(b=_?cs:void 0);let w=_?_m(b,i):h===i?b:void 0;if(u&&!tg(w)&&(w=_m(d,i)),tg(w)&&(l=w,a))return l;let S=t[r+1];r=a?td(S):xh(S)}if(n!==null){let d=s?n.residualClasses:n.residualStyles;d!=null&&(l=_m(d,i))}return l}function tg(t){return t!==void 0}function yj(t,n){return t==null||t===""||(typeof n=="string"?t=t+n:typeof t=="object"&&(t=hl(Sh(t)))),t}function vj(t,n){return(t.flags&(n?8:16))!==0}function P(t,n=""){let e=Zn(),i=no(),r=t+to,s=i.firstCreatePass?f2(i,r,1,n,null):i.data[r],a=bj(i,e,s,n,t);e[r]=a,Tm()&&o2(i,e,a,s),gh(s,!1)}var bj=(t,n,e,i,r)=>(d0(!0),RN(n[ar],i));function Vk(t,n,e,i=""){return ra(t,_h(),e)?n+ws(e)+i:Bo}function xj(t,n,e,i,r,s=""){let a=Zv(),l=y0(t,a,e,r);return wm(2),l?n+ws(e)+i+ws(r)+s:Bo}function Cj(t,n,e,i,r,s,a,l=""){let d=Zv(),u=mk(t,d,e,r,a);return wm(3),u?n+ws(e)+i+ws(r)+s+ws(a)+l:Bo}function Yt(t){return en("",t),Yt}function en(t,n,e){let i=Zn(),r=Vk(i,t,n,e);return r!==Bo&&E2(i,fl(),r),en}function Tn(t,n,e,i,r){let s=Zn(),a=xj(s,t,n,e,i,r);return a!==Bo&&E2(s,fl(),a),Tn}function I0(t,n,e,i,r,s,a){let l=Zn(),d=Cj(l,t,n,e,i,r,s,a);return d!==Bo&&E2(l,fl(),d),I0}function E2(t,n,e){let i=jv(n,t);jN(t[ar],i,e)}function Oe(t,n,e){ob(n)&&(n=n());let i=Zn(),r=_h();if(ra(i,r,n)){let s=no(),a=Em();JP(a,i,t,n,i[ar],e)}return Oe}function Be(t,n){let e=ob(t);return e&&t.set(n),e}function Fe(t,n){let e=Zn(),i=no(),r=io();return Lk(i,e,e[ar],r,t,n),Fe}function As(t){return ra(Zn(),_h(),t)?ws(t):Bo}function bg(t,n,e=""){return Vk(Zn(),t,n,e)}function wj(t,n,e){let i=no();if(i.firstCreatePass){let r=Fa(t);Wb(e,i.data,i.blueprint,r,!0),Wb(n,i.data,i.blueprint,r,!1)}}function Wb(t,n,e,i,r){if(t=Zr(t),Array.isArray(t))for(let s=0;s<t.length;s++)Wb(t[s],n,e,i,r);else{let s=no(),a=Zn(),l=io(),d=Gc(t)?t:Zr(t.provide),u=Fv(t),h=l.providerIndexes&1048575,_=l.directiveStart,b=l.providerIndexes>>20;if(Gc(t)||!t.multi){let w=new Kc(u,r,Le,null),S=yb(d,n,r?h:h+b,_);S===-1?(bb(qm(l,a),s,d),_b(s,t,n.length),n.push(d),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),e.push(w),a.push(w)):(e[S]=w,a[S]=w)}else{let w=yb(d,n,h+b,_),S=yb(d,n,h,h+b),L=w>=0&&e[w],R=S>=0&&e[S];if(r&&!R||!r&&!L){bb(qm(l,a),s,d);let z=Pj(r?Sj:Mj,e.length,r,i,u,t);!r&&R&&(e[S].providerFactory=z),_b(s,t,n.length,0),n.push(d),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),e.push(z),a.push(z)}else{let z=Rk(e[r?S:w],u,!r&&i);_b(s,t,w>-1?w:S,z)}!r&&i&&R&&e[S].componentProviders++}}}function _b(t,n,e,i){let r=Gc(n),s=eS(n);if(r||s){let d=(s?Zr(n.useClass):n).prototype.ngOnDestroy;if(d){let u=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){let h=u.indexOf(e);h===-1?u.push(e,[i,d]):u[h+1].push(i,d)}else u.push(e,d)}}}function Rk(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function yb(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function Mj(t,n,e,i,r){return zb(this.multi,[])}function Sj(t,n,e,i,r){let s=this.multi,a;if(this.providerFactory){let l=this.providerFactory.componentProviders,d=g0(i,i[Vn],this.providerFactory.index,r);a=d.slice(0,l),zb(s,a);for(let u=l;u<d.length;u++)a.push(d[u])}else a=[],zb(s,a);return a}function zb(t,n){for(let e=0;e<t.length;e++){let i=t[e];n.push(i())}return n}function Pj(t,n,e,i,r,s){let a=new Kc(t,e,Le,null);return a.multi=[],a.index=n,a.componentProviders=0,Rk(a,r,i&&!e),a}function Yo(t,n=[]){return e=>{e.providersResolver=(i,r)=>wj(i,r?r(t):t,n)}}function dn(t,n,e){let i=Qc()+t,r=Zn();return r[i]===Bo?k0(r,i,e?n.call(e):n()):fk(r,i)}function Ae(t,n,e,i){return jk(Zn(),Qc(),t,n,e,i)}function mr(t,n,e,i,r){return kj(Zn(),Qc(),t,n,e,i,r)}function ei(t,n,e,i,r,s){return Ej(Zn(),Qc(),t,n,e,i,r,s)}function T2(t,n,e,i,r,s,a,l){let d=Qc()+t,u=Zn(),h=tR(u,d,e,i,r,s);return ra(u,d+4,a)||h?k0(u,d+5,l?n.call(l,e,i,r,s,a):n(e,i,r,s,a)):fk(u,d+5)}function A2(t,n){let e=t[n];return e===Bo?void 0:e}function jk(t,n,e,i,r,s){let a=n+e;return ra(t,a,r)?k0(t,a+1,s?i.call(s,r):i(r)):A2(t,a+1)}function kj(t,n,e,i,r,s,a){let l=n+e;return y0(t,l,r,s)?k0(t,l+2,a?i.call(a,r,s):i(r,s)):A2(t,l+2)}function Ej(t,n,e,i,r,s,a,l){let d=n+e;return mk(t,d,r,s,a)?k0(t,d+3,l?i.call(l,r,s,a):i(r,s,a)):A2(t,d+3)}function O0(t,n){let e=no(),i,r=t+to;e.firstCreatePass?(i=Tj(n,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let s=i.factory||(i.factory=Yl(i.type,!0)),a,l=Ao(Le);try{let d=Um(!1),u=s();return Um(d),Wv(e,Zn(),r,u),u}finally{Ao(l)}}function Tj(t,n){if(n)for(let e=n.length-1;e>=0;e--){let i=n[e];if(t===i.name)return i}}function F0(t,n,e){let i=t+to,r=Zn(),s=Gv(r,i);return Aj(r,i)?jk(r,Qc(),n,s.transform,e,s):s.transform(e)}function Aj(t,n){return t[Vn].data[n].pure}var Lm=null;function Gk(t){Lm!==null&&(t.defaultEncapsulation!==Lm.defaultEncapsulation||t.preserveWhitespaces!==Lm.preserveWhitespaces)||(Lm=t)}var ng=class{ngModuleFactory;componentFactories;constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}},D2=(()=>{class t{compileModuleSync(e){return new b0(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=Av(e),s=NP(r.declarations).reduce((a,l)=>{let d=pl(l);return d&&a.push(new Zc(d)),a},[]);return new ng(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Wk=new an("");var Dj=(()=>{class t{zone=Ft(on);changeDetectionScheduler=Ft(ul);applicationRef=Ft(oa);applicationErrorHandler=Ft(Oo);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(e){this.applicationErrorHandler(e)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zk({ngZoneFactory:t,ignoreChangesOutsideZone:n,scheduleInRootZone:e}){return t??=()=>new on(_n(Et({},I2()),{scheduleInRootZone:e})),[{provide:on,useFactory:t},{provide:$l,multi:!0,useFactory:()=>{let i=Ft(Dj,{optional:!0});return()=>i.initialize()}},{provide:$l,multi:!0,useFactory:()=>{let i=Ft(Ij);return()=>{i.initialize()}}},n===!0?{provide:sb,useValue:!0}:[],{provide:ab,useValue:e??Pk},{provide:Oo,useFactory:()=>{let i=Ft(on),r=Ft(_r),s;return a=>{i.runOutsideAngular(()=>{r.destroyed&&!s?setTimeout(()=>{throw a}):(s??=r.get($s),s.handleError(a))})}}}]}function I2(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Ij=(()=>{class t{subscription=new Ar;initialized=!1;zone=Ft(on);pendingTasks=Ft(Ba);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{on.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{on.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Uk=(()=>{class t{applicationErrorHandler=Ft(Oo);appRef=Ft(oa);taskService=Ft(Ba);ngZone=Ft(on);zonelessEnabled=Ft(Am);tracing=Ft(id,{optional:!0});disableScheduling=Ft(sb,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ar;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Zm):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Ft(ab,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof x0||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let i=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?ZS:kk;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Zm+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(e),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ZS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Oj(){return typeof $localize<"u"&&$localize.locale||D0}var xg=new an("",{providedIn:"root",factory:()=>Ft(xg,{optional:!0,skipSelf:!0})||Oj()});function Xo(t){return V3(t)}function Th(t,n){return Nf(t,n?.equal)}var qk=class{[_o];constructor(n){this[_o]=n}destroy(){this[_o].destroy()}};var Zk=Symbol("InputSignalNode#UNSET"),Hj=_n(Et({},Vf),{transformFn:void 0,applyValueToInputSignal(t,n){Xd(t,n)}});function eE(t,n){let e=Object.create(Hj);e.value=t,e.transformFn=n?.transform;function i(){if(qd(e),e.value===Zk){let r=null;throw new Vt(-950,r)}return e.value}return i[_o]=e,i}var Cg=class{attributeName;constructor(n){this.attributeName=n}__NG_ELEMENT_ID__=()=>w0(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},Yj=new an("");Yj.__NG_ELEMENT_ID__=t=>{let n=io();if(n===null)throw new Vt(204,!1);if(n.type&2)return n.value;if(t&8)return null;throw new Vt(204,!1)};function Hk(t,n){return eE(t,n)}function Xj(t){return eE(Zk,t)}var tE=(Hk.required=Xj,Hk);function Jj(t,n,e){let i=new b0(e);return Promise.resolve(i)}function Yk(t){for(let n=t.length-1;n>=0;n--)if(t[n]!==void 0)return t[n]}var wg=new an(""),Qj=new an("");function B0(t){return!t.moduleRef}function $j(t){let n=B0(t)?t.r3Injector:t.moduleRef.injector,e=n.get(on);return e.run(()=>{B0(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let i=n.get(Oo),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:i})}),B0(t)){let s=()=>n.destroy(),a=t.platformInjector.get(wg);a.add(s),n.onDestroy(()=>{r.unsubscribe(),a.delete(s)})}else{let s=()=>t.moduleRef.destroy(),a=t.platformInjector.get(wg);a.add(s),t.moduleRef.onDestroy(()=>{f0(t.allPlatformModules,t.moduleRef),r.unsubscribe(),a.delete(s)})}return Zj(i,e,()=>{let s=n.get(Ba),a=s.add(),l=n.get(P2);return l.runInitializers(),l.donePromise.then(()=>{let d=n.get(xg,D0);if(Bk(d||D0),!n.get(Qj,!0))return B0(t)?n.get(oa):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(B0(t)){let h=n.get(oa);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return nE?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void s.remove(a))})})}var nE;function Xk(){nE=Kj}function Kj(t,n){let e=t.injector.get(oa);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(e);else throw new Vt(-403,!1);n.push(t)}function Zj(t,n,e){try{let i=e();return bl(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t(i)),i}}var iE=(()=>{class t{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(e){this._injector=e}bootstrapModuleFactory(e,i){let r=i?.scheduleInRootZone,s=()=>Tk(i?.ngZone,_n(Et({},I2({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:r})),a=i?.ignoreChangesOutsideZone,l=[zk({ngZoneFactory:s,ignoreChangesOutsideZone:a}),{provide:ul,useExisting:Uk},ES],d=wk(e.moduleType,this.injector,l);return Xk(),$j({moduleRef:d,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(e,i=[]){let r=k2({},i);return Xk(),Jj(this.injector,r,e).then(s=>this.bootstrapModuleFactory(s,r))}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Vt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let e=this._injector.get(wg,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(i){return new(i||t)(ht(Ur))};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),L0=null,rE=new an("");function eG(t){if(L0&&!L0.get(rE,!1))throw new Vt(400,!1);Ok(),L0=t;let n=t.get(iE);return iG(t),n}function j2(t,n,e=[]){let i=`Platform: ${n}`,r=new an(i);return(s=[])=>{let a=oE();if(!a||a.injector.get(rE,!1)){let l=[...e,...s,{provide:r,useValue:!0}];t?t(l):eG(tG(l,i))}return nG(r)}}function tG(t=[],n){return Ur.create({name:n,providers:[{provide:t0,useValue:"platform"},{provide:wg,useValue:new Set([()=>L0=null])},...t]})}function nG(t){let n=oE();if(!n)throw new Vt(401,!1);return n}function oE(){return L0?.get(iE)??null}function iG(t){let n=t.get(rg,null);qr(t,()=>{n?.forEach(e=>e())})}var sa=(()=>{class t{static __NG_ELEMENT_ID__=rG}return t})();function rG(t){return oG(io(),Zn(),(t&16)===16)}function oG(t,n,e){if(ec(t)&&!e){let i=Es(t.index,n);return new nc(i,i)}else if(t.type&175){let i=n[Ps];return new nc(i,n)}return null}var O2=class{constructor(){}supports(n){return y2(n)}create(n){return new F2(n)}},sG=(t,n)=>n,F2=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(n){this._trackByFn=n||sG}forEachItem(n){let e;for(e=this._itHead;e!==null;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){let a=!i||e&&e.currentIndex<Jk(i,r,s)?e:i,l=Jk(a,r,s),d=a.currentIndex;if(a===i)r--,i=i._nextRemoved;else if(e=e._next,a.previousIndex==null)r++;else{s||(s=[]);let u=l-r,h=d-r;if(u!=h){for(let b=0;b<u;b++){let w=b<s.length?s[b]:s[b]=0,S=w+b;h<=S&&S<u&&(s[b]=w+1)}let _=a.previousIndex;s[_]=h-u}}l!==d&&n(a,l,d)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)n(e)}diff(n){if(n==null&&(n=[]),!y2(n))throw new Vt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._itHead,i=!1,r,s,a;if(Array.isArray(n)){this.length=n.length;for(let l=0;l<this.length;l++)s=n[l],a=this._trackByFn(l,s),e===null||!Object.is(e.trackById,a)?(e=this._mismatch(e,s,a,l),i=!0):(i&&(e=this._verifyReinsertion(e,s,a,l)),Object.is(e.item,s)||this._addIdentityChange(e,s)),e=e._next}else r=0,pk(n,l=>{a=this._trackByFn(r,l),e===null||!Object.is(e.trackById,a)?(e=this._mismatch(e,l,a,r),i=!0):(i&&(e=this._verifyReinsertion(e,l,a,r)),Object.is(e.item,l)||this._addIdentityChange(e,l)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let s;return n===null?s=this._itTail:(s=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,s,r)):(n=this._linkedRecords===null?null:this._linkedRecords.get(i,r),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,s,r)):n=this._addAfter(new B2(e,i),s,r)),n}_verifyReinsertion(n,e,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?n=this._reinsertAfter(s,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;n!==null;){let e=n._next;this._addToRemovals(this._unlink(n)),n=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);let r=n._prevRemoved,s=n._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){let r=e===null?this._itHead:e._next;return n._next=r,n._prev=e,r===null?this._itTail=n:r._prev=n,e===null?this._itHead=n:e._next=n,this._linkedRecords===null&&(this._linkedRecords=new Mg),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);let e=n._prev,i=n._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Mg),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}},B2=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(n,e){this.item=n,this.trackById=e}},L2=class{_head=null;_tail=null;add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){let e=n._prevDup,i=n._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},Mg=class{map=new Map;put(n){let e=n.trackById,i=this.map.get(e);i||(i=new L2,this.map.set(e,i)),i.add(n)}get(n,e){let i=n,r=this.map.get(i);return r?r.get(n,e):null}remove(n){let e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Jk(t,n,e){let i=t.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}var N2=class{constructor(){}supports(n){return n instanceof Map||ug(n)}create(){return new V2}},V2=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(n){let e;for(e=this._mapHead;e!==null;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)n(e)}diff(n){if(!n)n=new Map;else if(!(n instanceof Map||ug(n)))throw new Vt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{let s=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){let i=n._prev;return e._next=n,e._prev=i,n._prev=e,i&&(i._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){let r=this._records.get(n);this._maybeAddToChanges(r,e);let s=r._prev,a=r._next;return s&&(s._next=a),a&&(a._prev=s),r._next=null,r._prev=null,r}let i=new R2(n);return this._records.set(n,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;n!==null;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;n!=null;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){this._additionsHead===null?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){this._changesHead===null?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(i=>e(n[i],i))}},R2=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(n){this.key=n}};function Qk(){return new G2([new O2])}var G2=(()=>{class t{factories;static \u0275prov=lt({token:t,providedIn:"root",factory:Qk});constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||Qk()),deps:[[t,new qb,new Ub]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new Vt(901,!1)}}return t})();function $k(){return new kg([new N2])}var kg=(()=>{class t{static \u0275prov=lt({token:t,providedIn:"root",factory:$k});factories;constructor(e){this.factories=e}static create(e,i){if(i){let r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||$k()),deps:[[t,new qb,new Ub]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i)return i;throw new Vt(901,!1)}}return t})();var sE=j2(null,"core",[]),aE=(()=>{class t{constructor(e){}static \u0275fac=function(i){return new(i||t)(ht(oa))};static \u0275mod=yr({type:t});static \u0275inj=pr({})}return t})();function rc(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function lE(t){let n=pl(t);if(!n)return null;let e=new Zc(n);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}var hE=null;function fs(){return hE}function W2(t){hE??=t}var V0=class{},R0=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:()=>Ft(uE),providedIn:"platform"})}return t})(),z2=new an(""),uE=(()=>{class t extends R0{_location;_history;_doc=Ft(ji);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fs().getBaseHref(this._doc)}onPopState(e){let i=fs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=fs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Eg(t,n){return t?n?t.endsWith("/")?n.startsWith("/")?t+n.slice(1):t+n:n.startsWith("/")?t+n:`${t}/${n}`:t:n}function cE(t){let n=t.search(/#|\?|$/);return t[n-1]==="/"?t.slice(0,n-1)+t.slice(n):t}function aa(t){return t&&t[0]!=="?"?`?${t}`:t}var la=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:()=>Ft(Tg),providedIn:"root"})}return t})(),Ah=new an(""),Tg=(()=>{class t extends la{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Ft(ji).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Eg(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+aa(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){let a=this.prepareExternalUrl(r+aa(s));this._platformLocation.pushState(e,i,a)}replaceState(e,i,r,s){let a=this.prepareExternalUrl(r+aa(s));this._platformLocation.replaceState(e,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||t)(ht(R0),ht(Ah,8))};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),oc=(()=>{class t{_subject=new yn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=cG(cE(dE(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+aa(i))}normalize(e){return t.stripTrailingSlash(lG(this._basePath,dE(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+aa(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+aa(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=aa;static joinWithSlash=Eg;static stripTrailingSlash=cE;static \u0275fac=function(i){return new(i||t)(ht(la))};static \u0275prov=lt({token:t,factory:()=>aG(),providedIn:"root"})}return t})();function aG(){return new oc(ht(la))}function lG(t,n){if(!t||!n.startsWith(t))return n;let e=n.substring(t.length);return e===""||["/",";","?","#"].includes(e[0])?e:n}function dE(t){return t.replace(/\/index.html$/,"")}function cG(t){if(new RegExp("^(https?:)?//").test(t)){let[,e]=t.split(/\/\/[^\/]+/);return e}return t}var Y2=(()=>{class t extends la{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=Eg(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let a=this.prepareExternalUrl(r+aa(s))||this._platformLocation.pathname;this._platformLocation.pushState(e,i,a)}replaceState(e,i,r,s){let a=this.prepareExternalUrl(r+aa(s))||this._platformLocation.pathname;this._platformLocation.replaceState(e,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||t)(ht(R0),ht(Ah,8))};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})();var U2=/\s+/,pE=[],lr=(()=>{class t{_ngEl;_renderer;initialClasses=pE;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(U2):pE}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(U2):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(U2).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||t)(Le(fr),Le(Ts))};static \u0275dir=Di({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var Ag=class{$implicit;ngForOf;index;count;constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},gi=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,s,a)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new Ag(r.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let l=i.get(s);i.move(l,a),fE(l,r)}});for(let r=0,s=i.length;r<s;r++){let l=i.get(r).context;l.index=r,l.count=s,l.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);fE(s,r)})}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||t)(Le(hs),Le(ic),Le(G2))};static \u0275dir=Di({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function fE(t,n){t.context.$implicit=n.item}var vr=(()=>{class t{_viewContainer;_context=new Dg;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){mE(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){mE(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||t)(Le(hs),Le(ic))};static \u0275dir=Di({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Dg=class{$implicit=null;ngIf=null};function mE(t,n){if(t&&!t.createEmbeddedView)throw new Vt(2020,!1)}var X2=(()=>{class t{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){let[r,s]=e.split("."),a=r.indexOf("-")===-1?void 0:ia.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,r,a)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static \u0275fac=function(i){return new(i||t)(Le(fr),Le(kg),Le(Ts))};static \u0275dir=Di({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return t})();function dG(t,n){return new Vt(2100,!1)}var q2=class{createSubscription(n,e,i){return Xo(()=>n.subscribe({next:e,error:i}))}dispose(n){Xo(()=>n.unsubscribe())}},H2=class{createSubscription(n,e,i){return n.then(r=>e?.(r),r=>i?.(r)),{unsubscribe:()=>{e=null,i=null}}}dispose(n){n.unsubscribe()}},hG=new H2,uG=new q2,J2=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=Ft(Oo);constructor(e){this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i),i=>this.applicationErrorHandler(i))}_selectStrategy(e){if(bl(e))return hG;if(_g(e))return uG;throw dG(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||t)(Le(sa,16))};static \u0275pipe=fg({name:"async",type:t,pure:!1})}return t})();function pG(t,n){return{key:t,value:n}}var Q2=(()=>{class t{differs;constructor(e){this.differs=e}differ;keyValues=[];compareFn=gE;transform(e,i=gE){if(!e||!(e instanceof Map)&&typeof e!="object")return null;this.differ??=this.differs.find(e).create();let r=this.differ.diff(e),s=i!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(a=>{this.keyValues.push(pG(a.key,a.currentValue))})),(r||s)&&(i&&this.keyValues.sort(i),this.compareFn=i),this.keyValues}static \u0275fac=function(i){return new(i||t)(Le(kg,16))};static \u0275pipe=fg({name:"keyvalue",type:t,pure:!1})}return t})();function gE(t,n){let e=t.key,i=n.key;if(e===i)return 0;if(e==null)return 1;if(i==null)return-1;if(typeof e=="string"&&typeof i=="string")return e<i?-1:1;if(typeof e=="number"&&typeof i=="number")return e-i;if(typeof e=="boolean"&&typeof i=="boolean")return e<i?-1:1;let r=String(e),s=String(i);return r==s?0:r<s?-1:1}var $2=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yr({type:t});static \u0275inj=pr({})}return t})();function j0(t,n){n=encodeURIComponent(n);for(let e of t.split(";")){let i=e.indexOf("="),[r,s]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(s)}return null}var od=class{};var _E="browser";var yE=(()=>{class t{static \u0275prov=lt({token:t,providedIn:"root",factory:()=>new K2(Ft(ji),window)})}return t})(),K2=class{document;window;offset=()=>[0,0];constructor(n,e){this.document=n,this.window=e}setOffset(n){Array.isArray(n)?this.offset=()=>n:this.offset=n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n,e){this.window.scrollTo(_n(Et({},e),{left:n[0],top:n[1]}))}scrollToAnchor(n,e){let i=mG(this.document,n);i&&(this.scrollToElement(i,e),i.focus())}setHistoryScrollRestoration(n){try{this.window.history.scrollRestoration=n}catch{console.warn(Jl(2400,!1))}}scrollToElement(n,e){let i=n.getBoundingClientRect(),r=i.left+this.window.pageXOffset,s=i.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(_n(Et({},e),{left:r-a[0],top:s-a[1]}))}};function mG(t,n){let e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let s=r.shadowRoot;if(s){let a=s.getElementById(n)||s.querySelector(`[name="${n}"]`);if(a)return a}r=i.nextNode()}}return null}var Og=new an(""),ix=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r,s){return this._findPluginFor(i).addEventListener(e,i,r,s)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new Vt(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||t)(ht(Og),ht(on))};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})(),G0=class{_doc;constructor(n){this._doc=n}manager},Z2="ng-app-id";function vE(t){for(let n of t)n.remove()}function bE(t,n){let e=n.createElement("style");return e.textContent=t,e}function gG(t,n,e,i){let r=t.head?.querySelectorAll(`style[${Z2}="${n}"],link[${Z2}="${n}"]`);if(r)for(let s of r)s.removeAttribute(Z2),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function tx(t,n){let e=n.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),e}var rx=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,gG(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,bE);i?.forEach(r=>this.addUsage(r,this.external,tx))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let s=i.get(e);s?s.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(vE(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])vE(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,bE(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,tx(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),e.appendChild(i)}static \u0275fac=function(i){return new(i||t)(ht(ji),ht(ig),ht(sg,8),ht(Mh))};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})(),ex={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ox=/%COMP%/g;var CE="%COMP%",_G=`_nghost-${CE}`,yG=`_ngcontent-${CE}`,vG=!0,bG=new an("",{providedIn:"root",factory:()=>vG});function xG(t){return yG.replace(ox,t)}function CG(t){return _G.replace(ox,t)}function wE(t,n){return n.map(e=>e.replace(ox,t))}var U0=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,s,a,l,d,u=null,h=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=d,this.nonce=u,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new W0(e,a,d,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(e,i);return r instanceof Ig?r.applyToHost(e):r instanceof z0&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let a=this.doc,l=this.ngZone,d=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,_=this.platformIsServer,b=this.tracingService;switch(i.encapsulation){case gl.Emulated:s=new Ig(d,u,i,this.appId,h,a,l,_,b);break;case gl.ShadowDom:return new nx(d,u,e,i,a,l,this.nonce,_,b);default:s=new z0(d,u,i,h,a,l,_,b);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||t)(ht(ix),ht(rx),ht(ig),ht(bG),ht(ji),ht(Mh),ht(on),ht(sg),ht(id,8))};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})(),W0=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,e,i,r,s){this.eventManager=n,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=s}destroy(){}destroyNode=null;createElement(n,e){return e?this.doc.createElementNS(ex[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(xE(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(xE(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){e.remove()}selectRootElement(n,e){let i=typeof n=="string"?this.doc.querySelector(n):n;if(!i)throw new Vt(-5104,!1);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;let s=ex[r];s?n.setAttributeNS(s,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){let r=ex[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(ia.DashCase|ia.Important)?n.style.setProperty(e,i,r&ia.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&ia.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n!=null&&(n[e]=i)}setValue(n,e){n.nodeValue=e}listen(n,e,i,r){if(typeof n=="string"&&(n=fs().getGlobalEventTarget(this.doc,n),!n))throw new Vt(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(n,e,s)),this.eventManager.addEventListener(n,e,s,r)}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;n(e)===!1&&e.preventDefault()}}};function xE(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var nx=class extends W0{sharedStylesHost;hostEl;shadowRoot;constructor(n,e,i,r,s,a,l,d,u){super(n,s,a,d,u),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=wE(r.id,h);for(let b of h){let w=document.createElement("style");l&&w.setAttribute("nonce",l),w.textContent=b,this.shadowRoot.appendChild(w)}let _=r.getExternalStyles?.();if(_)for(let b of _){let w=tx(b,s);l&&w.setAttribute("nonce",l),this.shadowRoot.appendChild(w)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},z0=class extends W0{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,e,i,r,s,a,l,d,u){super(n,s,a,l,d),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let h=i.styles;this.styles=u?wE(u,h):h,this.styleUrls=i.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ig=class extends z0{contentAttr;hostAttr;constructor(n,e,i,r,s,a,l,d,u){let h=r+"-"+i.id;super(n,e,i,s,a,l,d,u,h),this.contentAttr=xG(h),this.hostAttr=CG(h)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}};var Fg=class t extends V0{supportsDOMEvents=!0;static makeCurrent(){W2(new t)}onAndCancel(n,e,i,r){return n.addEventListener(e,i,r),()=>{n.removeEventListener(e,i,r)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=wG();return e==null?null:MG(e)}resetBaseElement(){q0=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return j0(document.cookie,n)}},q0=null;function wG(){return q0=q0||document.head.querySelector("base"),q0?q0.getAttribute("href"):null}function MG(t){return new URL(t,document.baseURI).pathname}var Bg=class{addToWindow(n){Do.getAngularTestability=(i,r=!0)=>{let s=n.findTestabilityInTree(i,r);if(s==null)throw new Vt(5103,!1);return s},Do.getAllAngularTestabilities=()=>n.getAllTestabilities(),Do.getAllAngularRootElements=()=>n.getAllRootElements();let e=i=>{let r=Do.getAllAngularTestabilities(),s=r.length,a=function(){s--,s==0&&i()};r.forEach(l=>{l.whenStable(a)})};Do.frameworkStabilizers||(Do.frameworkStabilizers=[]),Do.frameworkStabilizers.push(e)}findTestabilityInTree(n,e,i){if(e==null)return null;let r=n.getTestability(e);return r??(i?fs().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},SG=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})(),SE=(()=>{class t extends G0{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,s){return e.addEventListener(i,r,s),()=>this.removeEventListener(e,i,r,s)}removeEventListener(e,i,r,s){return e.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||t)(ht(ji))};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})(),ME=["alt","control","meta","shift"],PG={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kG={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},PE=(()=>{class t extends G0{constructor(e){super(e)}supports(e){return t.parseEventName(e)!=null}addEventListener(e,i,r,s){let a=t.parseEventName(i),l=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fs().onAndCancel(e,a.domEventName,l,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=t._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),ME.forEach(u=>{let h=i.indexOf(u);h>-1&&(i.splice(h,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let d={};return d.domEventName=r,d.fullKey=a,d}static matchEventFullKeyCode(e,i){let r=PG[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),ME.forEach(a=>{if(a!==r){let l=kG[a];l(e)&&(s+=a+".")}}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{t.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||t)(ht(ji))};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})();function EG(){Fg.makeCurrent()}function TG(){return new $s}function AG(){return Xb(document),document}var DG=[{provide:Mh,useValue:_E},{provide:rg,useValue:EG,multi:!0},{provide:ji,useFactory:AG}],sx=j2(sE,"browser",DG);var IG=[{provide:kh,useClass:Bg},{provide:gg,useClass:T0,deps:[on,A0,kh]},{provide:T0,useClass:T0,deps:[on,A0,kh]}],OG=[{provide:t0,useValue:"root"},{provide:$s,useFactory:TG},{provide:Og,useClass:SE,multi:!0,deps:[ji]},{provide:Og,useClass:PE,multi:!0,deps:[ji]},U0,rx,ix,{provide:_l,useExisting:U0},{provide:od,useClass:SG},[]],H0=(()=>{class t{constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275mod=yr({type:t});static \u0275inj=pr({providers:[...OG,...IG],imports:[$2,aE]})}return t})();var Oh=class{},Y0=class{},Un=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),s=e.slice(i+1).trim();this.addHeaderEntry(r,s)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new t;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(n.name,e);let r=(n.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let s=n.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let a=this.headers.get(e);if(!a)return;a=a.filter(l=>s.indexOf(l)===-1),a.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}break}}addHeaderEntry(n,e){let i=n.toLowerCase();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(n,e){let i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=n.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(n,r)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var Ng=class{encodeKey(n){return kE(n)}encodeValue(n){return kE(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function FG(t,n){let e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[a,l]=s==-1?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,s)),n.decodeValue(r.slice(s+1))],d=e.get(a)||[];d.push(l),e.set(a,d)}),e}var BG=/%(\d[a-f0-9])/gi,LG={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function kE(t){return encodeURIComponent(t).replace(BG,(n,e)=>LG[e]??n)}function Lg(t){return`${t}`}var Cl=class t{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new Ng,n.fromString){if(n.fromObject)throw new Vt(2805,!1);this.map=FG(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let i=n.fromObject[e],r=Array.isArray(i)?i.map(Lg):[Lg(i)];this.map.set(e,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(i=>{let r=n[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new t({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(Lg(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let i=this.map.get(n.param)||[],r=i.indexOf(Lg(n.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var Vg=class{map=new Map;set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function NG(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function EE(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function TE(t){return typeof Blob<"u"&&t instanceof Blob}function AE(t){return typeof FormData<"u"&&t instanceof FormData}function VG(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var DE="Content-Type",IE="Accept",FE="X-Request-URL",BE="text/plain",LE="application/json",RG=`${LE}, ${BE}, */*`,Dh=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(n,e,i,r){this.url=e,this.method=n.toUpperCase();let s;if(NG(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s){if(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,this.keepalive=!!s.keepalive,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),s.priority&&(this.priority=s.priority),s.cache&&(this.cache=s.cache),s.credentials&&(this.credentials=s.credentials),typeof s.timeout=="number"){if(s.timeout<1||!Number.isInteger(s.timeout))throw new Error("");this.timeout=s.timeout}s.mode&&(this.mode=s.mode),s.redirect&&(this.redirect=s.redirect),this.transferCache=s.transferCache}if(this.headers??=new Un,this.context??=new Vg,!this.params)this.params=new Cl,this.urlWithParams=e;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=e;else{let l=e.indexOf("?"),d=l===-1?"?":l<e.length-1?"&":"";this.urlWithParams=e+d+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||EE(this.body)||TE(this.body)||AE(this.body)||VG(this.body)?this.body:this.body instanceof Cl?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||AE(this.body)?null:TE(this.body)?this.body.type||null:EE(this.body)?null:typeof this.body=="string"?BE:this.body instanceof Cl?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?LE:null}clone(n={}){let e=n.method||this.method,i=n.url||this.url,r=n.responseType||this.responseType,s=n.keepalive??this.keepalive,a=n.priority||this.priority,l=n.cache||this.cache,d=n.mode||this.mode,u=n.redirect||this.redirect,h=n.credentials||this.credentials,_=n.transferCache??this.transferCache,b=n.timeout??this.timeout,w=n.body!==void 0?n.body:this.body,S=n.withCredentials??this.withCredentials,L=n.reportProgress??this.reportProgress,R=n.headers||this.headers,z=n.params||this.params,ne=n.context??this.context;return n.setHeaders!==void 0&&(R=Object.keys(n.setHeaders).reduce((Q,q)=>Q.set(q,n.setHeaders[q]),R)),n.setParams&&(z=Object.keys(n.setParams).reduce((Q,q)=>Q.set(q,n.setParams[q]),z)),new t(e,i,w,{params:z,headers:R,context:ne,reportProgress:L,responseType:r,withCredentials:S,transferCache:_,keepalive:s,cache:l,priority:a,timeout:b,mode:d,redirect:u,credentials:h})}},sd=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(sd||{}),Fh=class{headers;status;statusText;url;ok;type;constructor(n,e=200,i="OK"){this.headers=n.headers||new Un,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},Rg=class t extends Fh{constructor(n={}){super(n)}type=sd.ResponseHeader;clone(n={}){return new t({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},X0=class t extends Fh{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=sd.Response;clone(n={}){return new t({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Ih=class extends Fh{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},jG=200,GG=204;function ax(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect}}var Xi=(()=>{class t{handler;constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof Dh)s=e;else{let d;r.headers instanceof Un?d=r.headers:d=new Un(r.headers);let u;r.params&&(r.params instanceof Cl?u=r.params:u=new Cl({fromObject:r.params})),s=new Dh(e,i,r.body!==void 0?r.body:null,{headers:d,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials})}let a=Bn(s).pipe(Aa(d=>this.handler.handle(d)));if(e instanceof Dh||r.observe==="events")return a;let l=a.pipe(yo(d=>d instanceof X0));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(fn(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new Vt(2806,!1);return d.body}));case"blob":return l.pipe(fn(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new Vt(2807,!1);return d.body}));case"text":return l.pipe(fn(d=>{if(d.body!==null&&typeof d.body!="string")throw new Vt(2808,!1);return d.body}));case"json":default:return l.pipe(fn(d=>d.body))}case"response":return l;default:throw new Vt(2809,!1)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new Cl().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,ax(r,i))}post(e,i,r={}){return this.request("POST",e,ax(r,i))}put(e,i,r={}){return this.request("PUT",e,ax(r,i))}static \u0275fac=function(i){return new(i||t)(ht(Oh))};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})();var WG=new an("");function NE(t,n){return n(t)}function zG(t,n){return(e,i)=>n.intercept(e,{handle:r=>t(r,i)})}function UG(t,n,e){return(i,r)=>qr(e,()=>n(i,s=>t(s,r)))}var VE=new an(""),cx=new an(""),RE=new an(""),dx=new an("",{providedIn:"root",factory:()=>!0});function qG(){let t=null;return(n,e)=>{t===null&&(t=(Ft(VE,{optional:!0})??[]).reduceRight(zG,NE));let i=Ft(h0);if(Ft(dx)){let s=i.add();return t(n,e).pipe(Hl(s))}else return t(n,e)}}var jg=(()=>{class t extends Oh{backend;injector;chain=null;pendingTasks=Ft(h0);contributeToStability=Ft(dx);constructor(e,i){super(),this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(cx),...this.injector.get(RE,[])]));this.chain=i.reduceRight((r,s)=>UG(r,s,this.injector),NE)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(Hl(i))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||t)(ht(Y0),ht(_r))};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})();var HG=/^\)\]\}',?\n/,YG=RegExp(`^${FE}:`,"m");function XG(t){return"responseURL"in t&&t.responseURL?t.responseURL:YG.test(t.getAllResponseHeaders())?t.getResponseHeader(FE):null}var lx=(()=>{class t{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Vt(-2800,!1);let i=this.xhrFactory;return Bn(null).pipe(To(()=>new $n(s=>{let a=i.build();if(a.open(e.method,e.urlWithParams),e.withCredentials&&(a.withCredentials=!0),e.headers.forEach((R,z)=>a.setRequestHeader(R,z.join(","))),e.headers.has(IE)||a.setRequestHeader(IE,RG),!e.headers.has(DE)){let R=e.detectContentTypeHeader();R!==null&&a.setRequestHeader(DE,R)}if(e.timeout&&(a.timeout=e.timeout),e.responseType){let R=e.responseType.toLowerCase();a.responseType=R!=="json"?R:"text"}let l=e.serializeBody(),d=null,u=()=>{if(d!==null)return d;let R=a.statusText||"OK",z=new Un(a.getAllResponseHeaders()),ne=XG(a)||e.url;return d=new Rg({headers:z,status:a.status,statusText:R,url:ne}),d},h=()=>{let{headers:R,status:z,statusText:ne,url:Q}=u(),q=null;z!==GG&&(q=typeof a.response>"u"?a.responseText:a.response),z===0&&(z=q?jG:0);let T=z>=200&&z<300;if(e.responseType==="json"&&typeof q=="string"){let se=q;q=q.replace(HG,"");try{q=q!==""?JSON.parse(q):null}catch(_e){q=se,T&&(T=!1,q={error:_e,text:q})}}T?(s.next(new X0({body:q,headers:R,status:z,statusText:ne,url:Q||void 0})),s.complete()):s.error(new Ih({error:q,headers:R,status:z,statusText:ne,url:Q||void 0}))},_=R=>{let{url:z}=u(),ne=new Ih({error:R,status:a.status||0,statusText:a.statusText||"Unknown Error",url:z||void 0});s.error(ne)},b=_;e.timeout&&(b=R=>{let{url:z}=u(),ne=new Ih({error:new DOMException("Request timed out","TimeoutError"),status:a.status||0,statusText:a.statusText||"Request timeout",url:z||void 0});s.error(ne)});let w=!1,S=R=>{w||(s.next(u()),w=!0);let z={type:sd.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(z.total=R.total),e.responseType==="text"&&a.responseText&&(z.partialText=a.responseText),s.next(z)},L=R=>{let z={type:sd.UploadProgress,loaded:R.loaded};R.lengthComputable&&(z.total=R.total),s.next(z)};return a.addEventListener("load",h),a.addEventListener("error",_),a.addEventListener("timeout",b),a.addEventListener("abort",_),e.reportProgress&&(a.addEventListener("progress",S),l!==null&&a.upload&&a.upload.addEventListener("progress",L)),a.send(l),s.next({type:sd.Sent}),()=>{a.removeEventListener("error",_),a.removeEventListener("abort",_),a.removeEventListener("load",h),a.removeEventListener("timeout",b),e.reportProgress&&(a.removeEventListener("progress",S),l!==null&&a.upload&&a.upload.removeEventListener("progress",L)),a.readyState!==a.DONE&&a.abort()}})))}static \u0275fac=function(i){return new(i||t)(ht(od))};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})(),jE=new an(""),JG="XSRF-TOKEN",QG=new an("",{providedIn:"root",factory:()=>JG}),$G="X-XSRF-TOKEN",KG=new an("",{providedIn:"root",factory:()=>$G}),J0=class{},ZG=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,i){this.doc=e,this.cookieName=i}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=j0(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||t)(ht(ji),ht(QG))};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})();function eW(t,n){let e=t.url.toLowerCase();if(!Ft(jE)||t.method==="GET"||t.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(t);let i=Ft(J0).getToken(),r=Ft(KG);return i!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),n(t)}var hx=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(hx||{});function tW(t,n){return{\u0275kind:t,\u0275providers:n}}function ux(...t){let n=[Xi,lx,jg,{provide:Oh,useExisting:jg},{provide:Y0,useFactory:()=>Ft(WG,{optional:!0})??Ft(lx)},{provide:cx,useValue:eW,multi:!0},{provide:jE,useValue:!0},{provide:J0,useClass:ZG}];for(let e of t)n.push(...e.\u0275providers);return dh(n)}var OE=new an("");function px(){return tW(hx.LegacyInterceptors,[{provide:OE,useFactory:qG},{provide:cx,useExisting:OE,multi:!0}])}var GE=(()=>{class t{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||t)(ht(ji))};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var $E=(()=>{class t{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||t)(Le(Ts),Le(fr))};static \u0275dir=Di({type:t})}return t})(),Vh=(()=>{class t extends $E{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Fo(t)))(r||t)}})();static \u0275dir=Di({type:t,features:[Yr]})}return t})(),ad=new an(""),nW={provide:ad,useExisting:eo(()=>ro),multi:!0},ro=(()=>{class t extends Vh{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Fo(t)))(r||t)}})();static \u0275dir=Di({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&J("change",function(a){return r.onChange(a.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Yo([nW]),Yr]})}return t})(),iW={provide:ad,useExisting:eo(()=>Gi),multi:!0};function rW(){let t=fs()?fs().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var oW=new an(""),Gi=(()=>{class t extends $E{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!rW())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||t)(Le(Ts),Le(fr),Le(oW,8))};static \u0275dir=Di({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&J("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[Yo([iW]),Yr]})}return t})();function KE(t){return t==null||sW(t)===0}function sW(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var Rh=new an(""),ZE=new an("");function aW(t){return n=>{if(n.value==null||t==null)return null;let e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}function lW(t){return n=>{if(n.value==null||t==null)return null;let e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}function cW(t){return KE(t.value)?{required:!0}:null}function dW(t){if(!t)return fx;let n,e;return typeof t=="string"?(e="",t.charAt(0)!=="^"&&(e+="^"),e+=t,t.charAt(t.length-1)!=="$"&&(e+="$"),n=new RegExp(e)):(e=t.toString(),n=t),i=>{if(KE(i.value))return null;let r=i.value;return n.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function fx(t){return null}function e5(t){return t!=null}function t5(t){return bl(t)?er(t):t}function n5(t){let n={};return t.forEach(e=>{n=e!=null?Et(Et({},n),e):n}),Object.keys(n).length===0?null:n}function i5(t,n){return n.map(e=>e(t))}function hW(t){return!t.validate}function r5(t){return t.map(n=>hW(n)?n:e=>n.validate(e))}function uW(t){if(!t)return null;let n=t.filter(e5);return n.length==0?null:function(e){return n5(i5(e,n))}}function yx(t){return t!=null?uW(r5(t)):null}function pW(t){if(!t)return null;let n=t.filter(e5);return n.length==0?null:function(e){let i=i5(e,n).map(t5);return Ky(i).pipe(fn(n5))}}function vx(t){return t!=null?pW(r5(t)):null}function zE(t,n){return t===null?[n]:Array.isArray(t)?[...t,n]:[t,n]}function fW(t){return t._rawValidators}function mW(t){return t._rawAsyncValidators}function mx(t){return t?Array.isArray(t)?t:[t]:[]}function Wg(t,n){return Array.isArray(t)?t.includes(n):t===n}function UE(t,n){let e=mx(n);return mx(t).forEach(r=>{Wg(e,r)||e.push(r)}),e}function qE(t,n){return mx(n).filter(e=>!Wg(t,e))}var zg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=yx(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=vx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return this.control?this.control.hasError(n,e):!1}getError(n,e){return this.control?this.control.getError(n,e):null}},Nh=class extends zg{name;get formDirective(){return null}get path(){return null}},tp=class extends zg{_parent=null;name=null;valueAccessor=null},Ug=class{_cd;constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},gW={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},axe=_n(Et({},gW),{"[class.ng-submitted]":"isSubmitted"}),Ti=(()=>{class t extends Ug{constructor(e){super(e)}static \u0275fac=function(i){return new(i||t)(Le(tp,2))};static \u0275dir=Di({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Xn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Yr]})}return t})(),Xg=(()=>{class t extends Ug{constructor(e){super(e)}static \u0275fac=function(i){return new(i||t)(Le(Nh,10))};static \u0275dir=Di({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Xn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Yr]})}return t})();var Q0="VALID",Gg="INVALID",Bh="PENDING",$0="DISABLED",sc=class{},qg=class extends sc{value;source;constructor(n,e){super(),this.value=n,this.source=e}},Z0=class extends sc{pristine;source;constructor(n,e){super(),this.pristine=n,this.source=e}},ep=class extends sc{touched;source;constructor(n,e){super(),this.touched=n,this.source=e}},Lh=class extends sc{status;source;constructor(n,e){super(),this.status=n,this.source=e}},gx=class extends sc{source;constructor(n){super(),this.source=n}},_x=class extends sc{source;constructor(n){super(),this.source=n}};function o5(t){return(Jg(t)?t.validators:t)||null}function _W(t){return Array.isArray(t)?yx(t):t||null}function s5(t,n){return(Jg(n)?n.asyncValidators:t)||null}function yW(t){return Array.isArray(t)?vx(t):t||null}function Jg(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function vW(t,n,e){let i=t.controls;if(!(n?Object.keys(i):i).length)throw new Vt(1e3,"");if(!i[e])throw new Vt(1001,"")}function bW(t,n,e){t._forEachChild((i,r)=>{if(e[r]===void 0)throw new Vt(1002,"")})}var Hg=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(n,e){this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return Xo(this.statusReactive)}set status(n){Xo(()=>this.statusReactive.set(n))}_status=Th(()=>this.statusReactive());statusReactive=ml(void 0);get valid(){return this.status===Q0}get invalid(){return this.status===Gg}get pending(){return this.status==Bh}get disabled(){return this.status===$0}get enabled(){return this.status!==$0}errors;get pristine(){return Xo(this.pristineReactive)}set pristine(n){Xo(()=>this.pristineReactive.set(n))}_pristine=Th(()=>this.pristineReactive());pristineReactive=ml(!0);get dirty(){return!this.pristine}get touched(){return Xo(this.touchedReactive)}set touched(n){Xo(()=>this.touchedReactive.set(n))}_touched=Th(()=>this.touchedReactive());touchedReactive=ml(!1);get untouched(){return!this.touched}_events=new yn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(UE(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(UE(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(qE(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(qE(n,this._rawAsyncValidators))}hasValidator(n){return Wg(this._rawValidators,n)}hasAsyncValidator(n){return Wg(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let e=this.touched===!1;this.touched=!0;let i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(_n(Et({},n),{sourceControl:i})),e&&n.emitEvent!==!1&&this._events.next(new ep(!0,i))}markAllAsDirty(n={}){this.markAsDirty({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(n))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(n))}markAsUntouched(n={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=n.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:i})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,i),e&&n.emitEvent!==!1&&this._events.next(new ep(!1,i))}markAsDirty(n={}){let e=this.pristine===!0;this.pristine=!1;let i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(_n(Et({},n),{sourceControl:i})),e&&n.emitEvent!==!1&&this._events.next(new Z0(!1,i))}markAsPristine(n={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=n.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,i),e&&n.emitEvent!==!1&&this._events.next(new Z0(!0,i))}markAsPending(n={}){this.status=Bh;let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Lh(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(_n(Et({},n),{sourceControl:e}))}disable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=$0,this.errors=null,this._forEachChild(r=>{r.disable(_n(Et({},n),{onlySelf:!0}))}),this._updateValue();let i=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new qg(this.value,i)),this._events.next(new Lh(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(_n(Et({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=Q0,this._forEachChild(i=>{i.enable(_n(Et({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(_n(Et({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n,e){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Q0||this.status===Bh)&&this._runAsyncValidator(i,n.emitEvent)}let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new qg(this.value,e)),this._events.next(new Lh(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(_n(Et({},n),{sourceControl:e}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$0:Q0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,e){if(this.asyncValidator){this.status=Bh,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:n!==!1};let i=t5(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(n){let e=n;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(n,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,e,i){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||i)&&this._events.next(new Lh(this.status,e)),this._parent&&this._parent._updateControlsErrors(n,e,i)}_initObservables(){this.valueChanges=new Rn,this.statusChanges=new Rn}_calculateStatus(){return this._allControlsDisabled()?$0:this.errors?Gg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bh)?Bh:this._anyControlsHaveStatus(Gg)?Gg:Q0}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,e),r&&this._events.next(new Z0(this.pristine,e))}_updateTouched(n={},e){this.touched=this._anyControlsTouched(),this._events.next(new ep(this.touched,e)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,e)}_onDisabledChange=[];_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Jg(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let e=this._parent&&this._parent.dirty;return!n&&!!e&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=_W(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=yW(this._rawAsyncValidators)}},Yg=class extends Hg{constructor(n,e,i){super(o5(e),s5(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){bW(this,!0,n),Object.keys(n).forEach(i=>{vW(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(Object.keys(n).forEach(i=>{let r=this.controls[i];r&&r.patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,r)=>{i.reset(n?n[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&n(i))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(n,e){let i=n;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var bx=new an("",{providedIn:"root",factory:()=>xx}),xx="always";function xW(t,n){return[...n.path,t]}function a5(t,n,e=xx){l5(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||e==="always")&&n.valueAccessor.setDisabledState?.(t.disabled),wW(t,n),SW(t,n),MW(t,n),CW(t,n)}function HE(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function CW(t,n){if(n.valueAccessor.setDisabledState){let e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}function l5(t,n){let e=fW(t);n.validator!==null?t.setValidators(zE(e,n.validator)):typeof e=="function"&&t.setValidators([e]);let i=mW(t);n.asyncValidator!==null?t.setAsyncValidators(zE(i,n.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();HE(n._rawValidators,r),HE(n._rawAsyncValidators,r)}function wW(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&c5(t,n)})}function MW(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&c5(t,n),t.updateOn!=="submit"&&t.markAsTouched()})}function c5(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function SW(t,n){let e=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}function PW(t,n){t==null,l5(t,n)}function kW(t,n){if(!t.hasOwnProperty("model"))return!1;let e=t.model;return e.isFirstChange()?!0:!Object.is(n,e.currentValue)}function EW(t){return Object.getPrototypeOf(t.constructor)===Vh}function TW(t,n){t._syncPendingControls(),n.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function AW(t,n){if(!n)return null;Array.isArray(n);let e,i,r;return n.forEach(s=>{s.constructor===Gi?e=s:EW(s)?i=s:r=s}),r||i||e||null}var DW={provide:Nh,useExisting:eo(()=>np)},K0=Promise.resolve(),np=(()=>{class t extends Nh{callSetDisabledState;get submitted(){return Xo(this.submittedReactive)}_submitted=Th(()=>this.submittedReactive());submittedReactive=ml(!1);_directives=new Set;form;ngSubmit=new Rn;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new Yg({},yx(e),vx(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){K0.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),a5(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){K0.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){K0.then(()=>{let i=this._findContainer(e.path),r=new Yg({});PW(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){K0.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){K0.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),TW(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new gx(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1),this.form._events.next(new _x(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||t)(Le(Rh,10),Le(ZE,10),Le(bx,8))};static \u0275dir=Di({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&J("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Yo([DW]),Yr]})}return t})();function YE(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function XE(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var IW=class extends Hg{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(n=null,e,i){super(o5(e),s5(i,e)),this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jg(e)&&(e.nonNullable||e.initialValueIsDefault)&&(XE(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){YE(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){YE(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){XE(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var OW={provide:tp,useExisting:eo(()=>Mi)},JE=Promise.resolve(),Mi=(()=>{class t extends tp{_changeDetectorRef;callSetDisabledState;control=new IW;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Rn;constructor(e,i,r,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=AW(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),kW(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){a5(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){JE.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&rc(i);JE.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?xW(e,this._parent):[e]}static \u0275fac=function(i){return new(i||t)(Le(Nh,9),Le(Rh,10),Le(ZE,10),Le(ad,10),Le(sa,8),Le(bx,8))};static \u0275dir=Di({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Yo([OW]),Yr,yl]})}return t})();var d5=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=Di({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})(),FW={provide:ad,useExisting:eo(()=>Vr),multi:!0},Vr=(()=>{class t extends Vh{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Fo(t)))(r||t)}})();static \u0275dir=Di({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&J("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Yo([FW]),Yr]})}return t})();var BW={provide:ad,useExisting:eo(()=>ld),multi:!0},ld=(()=>{class t extends Vh{writeValue(e){this.setProperty("value",parseFloat(e))}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Fo(t)))(r||t)}})();static \u0275dir=Di({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(i,r){i&1&&J("change",function(a){return r.onChange(a.target.value)})("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Yo([BW]),Yr]})}return t})();var LW={provide:ad,useExisting:eo(()=>Jo),multi:!0};function h5(t,n){return t==null?`${n}`:(n&&typeof n=="object"&&(n="Object"),`${t}: ${n}`.slice(0,50))}function NW(t){return t.split(":")[0]}var Jo=(()=>{class t extends Vh{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;appRefInjector=Ft(oa).injector;destroyRef=Ft(ta);cdr=Ft(sa);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,E0({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(e){this.cdr.markForCheck(),this.value=e;let i=this._getOptionId(e),r=h5(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=NW(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Fo(t)))(r||t)}})();static \u0275dir=Di({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&J("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Yo([LW]),Yr]})}return t})(),bo=(()=>{class t{_element;_renderer;_select;id;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(h5(this.id,e)),this._select._writeValueAfterRender())}set value(e){this._setElementValue(e),this._select&&this._select._writeValueAfterRender()}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||t)(Le(fr),Le(Ts),Le(Jo,9))};static \u0275dir=Di({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),VW={provide:ad,useExisting:eo(()=>u5),multi:!0};function QE(t,n){return t==null?`${n}`:(typeof n=="string"&&(n=`'${n}'`),n&&typeof n=="object"&&(n="Object"),`${t}: ${n}`.slice(0,50))}function RW(t){return t.split(":")[0]}var u5=(()=>{class t extends Vh{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(r.indexOf(a.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let a=s;for(let l=0;l<a.length;l++){let d=a[l],u=this._getOptionValue(d.value);r.push(u)}}else{let a=i.options;for(let l=0;l<a.length;l++){let d=a[l];if(d.selected){let u=this._getOptionValue(d.value);r.push(u)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=RW(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Fo(t)))(r||t)}})();static \u0275dir=Di({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&J("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Yo([VW]),Yr]})}return t})(),xo=(()=>{class t{_element;_renderer;_select;id;_value;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(QE(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(QE(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||t)(Le(fr),Le(Ts),Le(u5,9))};static \u0275dir=Di({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();function p5(t){return typeof t=="number"?t:parseFloat(t)}var Qg=(()=>{class t{_validator=fx;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):fx,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||t)};static \u0275dir=Di({type:t,features:[yl]})}return t})(),jW={provide:Rh,useExisting:eo(()=>ms),multi:!0},ms=(()=>{class t extends Qg{max;inputName="max";normalizeInput=e=>p5(e);createValidator=e=>lW(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Fo(t)))(r||t)}})();static \u0275dir=Di({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&ae("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[Yo([jW]),Yr]})}return t})(),GW={provide:Rh,useExisting:eo(()=>Lo),multi:!0},Lo=(()=>{class t extends Qg{min;inputName="min";normalizeInput=e=>p5(e);createValidator=e=>aW(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Fo(t)))(r||t)}})();static \u0275dir=Di({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&ae("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[Yo([GW]),Yr]})}return t})(),WW={provide:Rh,useExisting:eo(()=>ip),multi:!0};var ip=(()=>{class t extends Qg{required;inputName="required";normalizeInput=rc;createValidator=e=>cW;enabled(e){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Fo(t)))(r||t)}})();static \u0275dir=Di({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&ae("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Yo([WW]),Yr]})}return t})();var zW={provide:Rh,useExisting:eo(()=>rp),multi:!0},rp=(()=>{class t extends Qg{pattern;inputName="pattern";normalizeInput=e=>e;createValidator=e=>dW(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Fo(t)))(r||t)}})();static \u0275dir=Di({type:t,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&ae("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},standalone:!1,features:[Yo([zW]),Yr]})}return t})();var UW=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yr({type:t});static \u0275inj=pr({})}return t})();var f5=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:bx,useValue:e.callSetDisabledState??xx}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=yr({type:t});static \u0275inj=pr({imports:[UW]})}return t})();var Zae=hr(Ko());var ti="primary",qp=Symbol("RouteTitle"),YC=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function wd(t){return new YC(t)}function WI(t,n,e){let i=e.path.split("/");if(i.length>t.length||e.pathMatch==="full"&&(n.hasChildren()||i.length<t.length))return null;let r={};for(let s=0;s<i.length;s++){let a=i[s],l=t[s];if(a[0]===":")r[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function DQ(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!qa(t[e],n[e]))return!1;return!0}function qa(t,n){let e=t?XC(t):void 0,i=n?XC(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!zI(t[r],n[r]))return!1;return!0}function XC(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function zI(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;let e=[...t].sort(),i=[...n].sort();return e.every((r,s)=>i[s]===r)}else return t===n}function UI(t){return t.length>0?t[t.length-1]:null}function Dl(t){return $y(t)?t:bl(t)?er(Promise.resolve(t)):Bn(t)}var IQ={exact:HI,subset:YI},qI={exact:OQ,subset:FQ,ignored:()=>!0};function BI(t,n,e){return IQ[e.paths](t.root,n.root,e.matrixParams)&&qI[e.queryParams](t.queryParams,n.queryParams)&&!(e.fragment==="exact"&&t.fragment!==n.fragment)}function OQ(t,n){return qa(t,n)}function HI(t,n,e){if(!xd(t.segments,n.segments)||!A_(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(let i in n.children)if(!t.children[i]||!HI(t.children[i],n.children[i],e))return!1;return!0}function FQ(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>zI(t[e],n[e]))}function YI(t,n,e){return XI(t,n,n.segments,e)}function XI(t,n,e,i){if(t.segments.length>e.length){let r=t.segments.slice(0,e.length);return!(!xd(r,e)||n.hasChildren()||!A_(r,e,i))}else if(t.segments.length===e.length){if(!xd(t.segments,e)||!A_(t.segments,e,i))return!1;for(let r in n.children)if(!t.children[r]||!YI(t.children[r],n.children[r],i))return!1;return!0}else{let r=e.slice(0,t.segments.length),s=e.slice(t.segments.length);return!xd(t.segments,r)||!A_(t.segments,r,i)||!t.children[ti]?!1:XI(t.children[ti],n,s,i)}}function A_(t,n,e){return n.every((i,r)=>qI[e](t[r].parameters,i.parameters))}var Ya=class{root;queryParams;fragment;_queryParamMap;constructor(n=new Ii([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=wd(this.queryParams),this._queryParamMap}toString(){return NQ.serialize(this)}},Ii=class{segments;children;parent=null;constructor(n,e){this.segments=n,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return D_(this)}},pc=class{path;parameters;_parameterMap;constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=wd(this.parameters),this._parameterMap}toString(){return QI(this)}};function BQ(t,n){return xd(t,n)&&t.every((e,i)=>qa(e.parameters,n[i].parameters))}function xd(t,n){return t.length!==n.length?!1:t.every((e,i)=>e.path===n[i].path)}function LQ(t,n){let e=[];return Object.entries(t.children).forEach(([i,r])=>{i===ti&&(e=e.concat(n(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==ti&&(e=e.concat(n(r,i)))}),e}var Md=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:()=>new fc,providedIn:"root"})}return t})(),fc=class{parse(n){let e=new QC(n);return new Ya(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${Op(n.root,!0)}`,i=jQ(n.queryParams),r=typeof n.fragment=="string"?`#${VQ(n.fragment)}`:"";return`${e}${i}${r}`}},NQ=new fc;function D_(t){return t.segments.map(n=>QI(n)).join("/")}function Op(t,n){if(!t.hasChildren())return D_(t);if(n){let e=t.children[ti]?Op(t.children[ti],!1):"",i=[];return Object.entries(t.children).forEach(([r,s])=>{r!==ti&&i.push(`${r}:${Op(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=LQ(t,(i,r)=>r===ti?[Op(t.children[ti],!1)]:[`${r}:${Op(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[ti]!=null?`${D_(t)}/${e[0]}`:`${D_(t)}/(${e.join("//")})`}}function JI(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function E_(t){return JI(t).replace(/%3B/gi,";")}function VQ(t){return encodeURI(t)}function JC(t){return JI(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function I_(t){return decodeURIComponent(t)}function LI(t){return I_(t.replace(/\+/g,"%20"))}function QI(t){return`${JC(t.path)}${RQ(t.parameters)}`}function RQ(t){return Object.entries(t).map(([n,e])=>`;${JC(n)}=${JC(e)}`).join("")}function jQ(t){let n=Object.entries(t).map(([e,i])=>Array.isArray(i)?i.map(r=>`${E_(e)}=${E_(r)}`).join("&"):`${E_(e)}=${E_(i)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var GQ=/^[^\/()?;#]+/;function zC(t){let n=t.match(GQ);return n?n[0]:""}var WQ=/^[^\/()?;=#]+/;function zQ(t){let n=t.match(WQ);return n?n[0]:""}var UQ=/^[^=?&#]+/;function qQ(t){let n=t.match(UQ);return n?n[0]:""}var HQ=/^[^&#]+/;function YQ(t){let n=t.match(HQ);return n?n[0]:""}var QC=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ii([],{}):new Ii([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[ti]=new Ii(n,e)),i}parseSegment(){let n=zC(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new Vt(4009,!1);return this.capture(n),new pc(I_(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=zQ(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=zC(this.remaining);r&&(i=r,this.capture(i))}n[I_(e)]=I_(i)}parseQueryParam(n){let e=qQ(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let a=YQ(this.remaining);a&&(i=a,this.capture(i))}let r=LI(e),s=LI(i);if(n.hasOwnProperty(r)){let a=n[r];Array.isArray(a)||(a=[a],n[r]=a),a.push(s)}else n[r]=s}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=zC(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Vt(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):n&&(s=ti);let a=this.parseChildren();e[s]=Object.keys(a).length===1?a[ti]:new Ii([],a),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new Vt(4011,!1)}};function $I(t){return t.segments.length>0?new Ii([],{[ti]:t}):t}function KI(t){let n={};for(let[i,r]of Object.entries(t.children)){let s=KI(r);if(i===ti&&s.segments.length===0&&s.hasChildren())for(let[a,l]of Object.entries(s.children))n[a]=l;else(s.segments.length>0||s.hasChildren())&&(n[i]=s)}let e=new Ii(t.segments,n);return XQ(e)}function XQ(t){if(t.numberOfChildren===1&&t.children[ti]){let n=t.children[ti];return new Ii(t.segments.concat(n.segments),n.children)}return t}function mc(t){return t instanceof Ya}function ZI(t,n,e=null,i=null){let r=eO(t);return tO(r,n,e,i)}function eO(t){let n;function e(s){let a={};for(let d of s.children){let u=e(d);a[d.outlet]=u}let l=new Ii(s.url,a);return s===t&&(n=l),l}let i=e(t.root),r=$I(i);return n??r}function tO(t,n,e,i){let r=t;for(;r.parent;)r=r.parent;if(n.length===0)return UC(r,r,r,e,i);let s=JQ(n);if(s.toRoot())return UC(r,r,new Ii([],{}),e,i);let a=QQ(s,r,t),l=a.processChildren?Bp(a.segmentGroup,a.index,s.commands):iO(a.segmentGroup,a.index,s.commands);return UC(r,a.segmentGroup,l,e,i)}function O_(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Np(t){return typeof t=="object"&&t!=null&&t.outlets}function UC(t,n,e,i,r){let s={};i&&Object.entries(i).forEach(([d,u])=>{s[d]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let a;t===n?a=e:a=nO(t,n,e);let l=$I(KI(a));return new Ya(l,s,r)}function nO(t,n,e){let i={};return Object.entries(t.children).forEach(([r,s])=>{s===n?i[r]=e:i[r]=nO(s,n,e)}),new Ii(t.segments,i)}var F_=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&O_(i[0]))throw new Vt(4003,!1);let r=i.find(Np);if(r&&r!==UI(i))throw new Vt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function JQ(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new F_(!0,0,t);let n=0,e=!1,i=t.reduce((r,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let l={};return Object.entries(s.outlets).forEach(([d,u])=>{l[d]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:l}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:a===0?(s.split("/").forEach((l,d)=>{d==0&&l==="."||(d==0&&l===""?e=!0:l===".."?n++:l!=""&&r.push(l))}),r):[...r,s]},[]);return new F_(e,n,i)}var nu=class{segmentGroup;processChildren;index;constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}};function QQ(t,n,e){if(t.isAbsolute)return new nu(n,!0,0);if(!e)return new nu(n,!1,NaN);if(e.parent===null)return new nu(e,!0,0);let i=O_(t.commands[0])?0:1,r=e.segments.length-1+i;return $Q(e,r,t.numberOfDoubleDots)}function $Q(t,n,e){let i=t,r=n,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Vt(4005,!1);r=i.segments.length}return new nu(i,!1,r-s)}function KQ(t){return Np(t[0])?t[0].outlets:{[ti]:t}}function iO(t,n,e){if(t??=new Ii([],{}),t.segments.length===0&&t.hasChildren())return Bp(t,n,e);let i=ZQ(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let s=new Ii(t.segments.slice(0,i.pathIndex),{});return s.children[ti]=new Ii(t.segments.slice(i.pathIndex),t.children),Bp(s,0,r)}else return i.match&&r.length===0?new Ii(t.segments,{}):i.match&&!t.hasChildren()?$C(t,n,e):i.match?Bp(t,0,r):$C(t,n,e)}function Bp(t,n,e){if(e.length===0)return new Ii(t.segments,{});{let i=KQ(e),r={};if(Object.keys(i).some(s=>s!==ti)&&t.children[ti]&&t.numberOfChildren===1&&t.children[ti].segments.length===0){let s=Bp(t.children[ti],n,e);return new Ii(t.segments,s.children)}return Object.entries(i).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[s]=iO(t.children[s],n,a))}),Object.entries(t.children).forEach(([s,a])=>{i[s]===void 0&&(r[s]=a)}),new Ii(t.segments,r)}}function ZQ(t,n,e){let i=0,r=n,s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return s;let a=t.segments[r],l=e[i];if(Np(l))break;let d=`${l}`,u=i<e.length-1?e[i+1]:null;if(r>0&&d===void 0)break;if(d&&u&&typeof u=="object"&&u.outlets===void 0){if(!VI(d,u,a))return s;i+=2}else{if(!VI(d,{},a))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function $C(t,n,e){let i=t.segments.slice(0,n),r=0;for(;r<e.length;){let s=e[r];if(Np(s)){let d=e$(s.outlets);return new Ii(i,d)}if(r===0&&O_(e[0])){let d=t.segments[n];i.push(new pc(d.path,NI(e[0]))),r++;continue}let a=Np(s)?s.outlets[ti]:`${s}`,l=r<e.length-1?e[r+1]:null;a&&l&&O_(l)?(i.push(new pc(a,NI(l))),r+=2):(i.push(new pc(a,{})),r++)}return new Ii(i,{})}function e$(t){let n={};return Object.entries(t).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(n[e]=$C(new Ii([],{}),0,i))}),n}function NI(t){let n={};return Object.entries(t).forEach(([e,i])=>n[e]=`${i}`),n}function VI(t,n,e){return t==e.path&&qa(n,e.parameters)}var iu="imperative",Gr=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Gr||{}),vs=class{id;url;constructor(n,e){this.id=n,this.url=e}},gc=class extends vs{type=Gr.NavigationStart;navigationTrigger;restoredState;constructor(n,e,i="imperative",r=null){super(n,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ls=class extends vs{urlAfterRedirects;type=Gr.NavigationEnd;constructor(n,e,i){super(n,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Vo=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(Vo||{}),ou=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ou||{}),Ha=class extends vs{reason;code;type=Gr.NavigationCancel;constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Xa=class extends vs{reason;code;type=Gr.NavigationSkipped;constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r}},su=class extends vs{error;target;type=Gr.NavigationError;constructor(n,e,i,r){super(n,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Vp=class extends vs{urlAfterRedirects;state;type=Gr.RoutesRecognized;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},B_=class extends vs{urlAfterRedirects;state;type=Gr.GuardsCheckStart;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},L_=class extends vs{urlAfterRedirects;state;shouldActivate;type=Gr.GuardsCheckEnd;constructor(n,e,i,r,s){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},N_=class extends vs{urlAfterRedirects;state;type=Gr.ResolveStart;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},V_=class extends vs{urlAfterRedirects;state;type=Gr.ResolveEnd;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},R_=class{route;type=Gr.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},j_=class{route;type=Gr.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},G_=class{snapshot;type=Gr.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},W_=class{snapshot;type=Gr.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},z_=class{snapshot;type=Gr.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},U_=class{snapshot;type=Gr.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},au=class{routerEvent;position;anchor;type=Gr.Scroll;constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},Rp=class{},lu=class{url;navigationBehaviorOptions;constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}};function t$(t){return!(t instanceof Rp)&&!(t instanceof lu)}function n$(t,n){return t.providers&&!t._injector&&(t._injector=Ph(t.providers,n,`Route: ${t.path}`)),t._injector??n}function xa(t){return t.outlet||ti}function i$(t,n){let e=t.filter(i=>xa(i)===n);return e.push(...t.filter(i=>xa(i)!==n)),e}function hu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var q_=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return hu(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new Sd(this.rootInjector)}},Sd=(()=>{class t{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new q_(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||t)(ht(_r))};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),H_=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=KC(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){let e=KC(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=ZC(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return ZC(n,this._root).map(e=>e.value)}};function KC(t,n){if(t===n.value)return n;for(let e of n.children){let i=KC(t,e);if(i)return i}return null}function ZC(t,n){if(t===n.value)return[n];for(let e of n.children){let i=ZC(t,e);if(i.length)return i.unshift(n),i}return[]}var ys=class{value;children;constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function tu(t){let n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}var jp=class extends H_{snapshot;constructor(n,e){super(n),this.snapshot=e,aw(this,n)}toString(){return this.snapshot.toString()}};function rO(t){let n=r$(t),e=new mi([new pc("",{})]),i=new mi({}),r=new mi({}),s=new mi({}),a=new mi(""),l=new Qi(e,i,s,a,r,ti,t,n.root);return l.snapshot=n.root,new jp(new ys(l,[]),n)}function r$(t){let n={},e={},i={},r="",s=new Cd([],n,i,r,e,ti,t,null,{});return new Gp("",new ys(s,[]))}var Qi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,e,i,r,s,a,l,d){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=a,this.component=l,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(fn(u=>u[qp]))??Bn(void 0),this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(fn(n=>wd(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(fn(n=>wd(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Y_(t,n,e="emptyOnly"){let i,{routeConfig:r}=t;return n!==null&&(e==="always"||r?.path===""||!n.component&&!n.routeConfig?.loadComponent)?i={params:Et(Et({},n.params),t.params),data:Et(Et({},n.data),t.data),resolve:Et(Et(Et(Et({},t.data),n.data),r?.data),t._resolvedData)}:i={params:Et({},t.params),data:Et({},t.data),resolve:Et(Et({},t.data),t._resolvedData??{})},r&&sO(r)&&(i.resolve[qp]=r.title),i}var Cd=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[qp]}constructor(n,e,i,r,s,a,l,d,u){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=a,this.component=l,this.routeConfig=d,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=wd(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=wd(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},Gp=class extends H_{url;constructor(n,e){super(e),this.url=n,aw(this,e)}toString(){return oO(this._root)}};function aw(t,n){n.value._routerState=t,n.children.forEach(e=>aw(t,e))}function oO(t){let n=t.children.length>0?` { ${t.children.map(oO).join(", ")} } `:"";return`${t.value}${n}`}function qC(t){if(t.snapshot){let n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,qa(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),qa(n.params,e.params)||t.paramsSubject.next(e.params),DQ(n.url,e.url)||t.urlSubject.next(e.url),qa(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function ew(t,n){let e=qa(t.params,n.params)&&BQ(t.url,n.url),i=!t.parent!=!n.parent;return e&&!i&&(!t.parent||ew(t.parent,n.parent))}function sO(t){return typeof t.title=="string"||t.title===null}var aO=new an(""),Hp=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ti;activateEvents=new Rn;deactivateEvents=new Rn;attachEvents=new Rn;detachEvents=new Rn;routerOutletData=tE(void 0);parentContexts=Ft(Sd);location=Ft(hs);changeDetector=Ft(sa);inputBinder=Ft(Yp,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Vt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Vt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Vt(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Vt(4013,!1);this._activatedRoute=e;let r=this.location,a=e.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new tw(e,l,r.injector,this.routerOutletData);this.activated=r.createComponent(a,{index:r.length,injector:d,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=Di({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[yl]})}return t})(),tw=class{route;childContexts;parent;outletData;constructor(n,e,i,r){this.route=n,this.childContexts=e,this.parent=i,this.outletData=r}get(n,e){return n===Qi?this.route:n===Sd?this.childContexts:n===aO?this.outletData:this.parent.get(n,e)}},Yp=new an(""),lw=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=Hu([i.queryParams,i.params,i.data]).pipe(To(([s,a,l],d)=>(l=Et(Et(Et({},s),a),l),d===0?Bn(l):Promise.resolve(l)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let a=lE(i.component);if(!a){this.unsubscribeFromRouteData(e);return}for(let{templateName:l}of a.inputs)e.activatedComponentRef.setInput(l,s[l])});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})(),cw=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=zt({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&ie(0,"router-outlet")},dependencies:[Hp],encapsulation:2})}return t})();function dw(t){let n=t.children&&t.children.map(dw),e=n?_n(Et({},t),{children:n}):Et({},t);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==ti&&(e.component=cw),e}function o$(t,n,e){let i=Wp(t,n._root,e?e._root:void 0);return new jp(i,n)}function Wp(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=n.value;let r=s$(t,n,e);return new ys(i,r)}else{if(t.shouldAttach(n.value)){let s=t.retrieve(n.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=n.value,a.children=n.children.map(l=>Wp(t,l)),a}}let i=a$(n.value),r=n.children.map(s=>Wp(t,s));return new ys(i,r)}}function s$(t,n,e){return n.children.map(i=>{for(let r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Wp(t,i,r);return Wp(t,i)})}function a$(t){return new Qi(new mi(t.url),new mi(t.params),new mi(t.queryParams),new mi(t.fragment),new mi(t.data),t.outlet,t.component,t)}var cu=class{redirectTo;navigationBehaviorOptions;constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}},lO="ngNavigationCancelingError";function X_(t,n){let{redirectTo:e,navigationBehaviorOptions:i}=mc(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=cO(!1,Vo.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function cO(t,n){let e=new Error(`NavigationCancelingError: ${t||""}`);return e[lO]=!0,e.cancellationCode=n,e}function l$(t){return dO(t)&&mc(t.url)}function dO(t){return!!t&&t[lO]}var c$=(t,n,e,i)=>fn(r=>(new nw(n,r.targetRouterState,r.currentRouterState,e,i).activate(t),r)),nw=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,e,i,r,s){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(n){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),qC(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){let r=tu(e);n.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,r[a],i),delete r[a]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(n,e,i){let r=n.value,s=e?e.value:null;if(r===s)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(n,e,a.children)}else this.deactivateChildRoutes(n,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,s=tu(n);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),l=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:a,route:n,contexts:l})}}deactivateRouteAndOutlet(n,e){let i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,s=tu(n);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,e,i){let r=tu(e);n.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new U_(s.value.snapshot))}),n.children.length&&this.forwardEvent(new W_(n.value.snapshot))}activateRoutes(n,e,i){let r=n.value,s=e?e.value:null;if(qC(r),r===s)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,a.children)}else this.activateChildRoutes(n,e,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),qC(l.route.value),this.activateChildRoutes(n,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(n,null,a.children)}else this.activateChildRoutes(n,null,i)}},J_=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},ru=class{component;route;constructor(n,e){this.component=n,this.route=e}};function d$(t,n,e){let i=t._root,r=n?n._root:null;return Fp(i,r,e,[i.value])}function h$(t){let n=t.routeConfig?t.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:t,guards:n}}function uu(t,n){let e=Symbol(),i=n.get(t,e);return i===e?typeof t=="function"&&!_v(t)?t:n.get(t):i}function Fp(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=tu(n);return t.children.forEach(a=>{u$(a,s[a.value.outlet],e,i.concat([a.value]),r),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,l])=>Lp(l,e.getContext(a),r)),r}function u$(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,a=n?n.value:null,l=e?e.getContext(t.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let d=p$(a,s,s.routeConfig.runGuardsAndResolvers);d?r.canActivateChecks.push(new J_(i)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?Fp(t,n,l?l.children:null,i,r):Fp(t,n,e,i,r),d&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new ru(l.outlet.component,a))}else a&&Lp(n,l,r),r.canActivateChecks.push(new J_(i)),s.component?Fp(t,null,l?l.children:null,i,r):Fp(t,null,e,i,r);return r}function p$(t,n,e){if(typeof e=="function")return e(t,n);switch(e){case"pathParamsChange":return!xd(t.url,n.url);case"pathParamsOrQueryParamsChange":return!xd(t.url,n.url)||!qa(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ew(t,n)||!qa(t.queryParams,n.queryParams);case"paramsChange":default:return!ew(t,n)}}function Lp(t,n,e){let i=tu(t),r=t.value;Object.entries(i).forEach(([s,a])=>{r.component?n?Lp(a,n.children.getContext(s),e):Lp(a,null,e):Lp(a,n,e)}),r.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new ru(n.outlet.component,r)):e.canDeactivateChecks.push(new ru(null,r)):e.canDeactivateChecks.push(new ru(null,r))}function Xp(t){return typeof t=="function"}function f$(t){return typeof t=="boolean"}function m$(t){return t&&Xp(t.canLoad)}function g$(t){return t&&Xp(t.canActivate)}function _$(t){return t&&Xp(t.canActivateChild)}function y$(t){return t&&Xp(t.canDeactivate)}function v$(t){return t&&Xp(t.canMatch)}function hO(t){return t instanceof sl||t?.name==="EmptyError"}var T_=Symbol("INITIAL_VALUE");function du(){return To(t=>Hu(t.map(n=>n.pipe(ll(1),tv(T_)))).pipe(fn(n=>{for(let e of n)if(e!==!0){if(e===T_)return T_;if(e===!1||b$(e))return e}return!0}),yo(n=>n!==T_),ll(1)))}function b$(t){return mc(t)||t instanceof cu}function x$(t,n){return sr(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:a}}=e;return a.length===0&&s.length===0?Bn(_n(Et({},e),{guardsResult:!0})):C$(a,i,r,t).pipe(sr(l=>l&&f$(l)?w$(i,s,t,n):Bn(l)),fn(l=>_n(Et({},e),{guardsResult:l})))})}function C$(t,n,e,i){return er(t).pipe(sr(r=>E$(r.component,r.route,e,n,i)),cl(r=>r!==!0,!0))}function w$(t,n,e,i){return er(n).pipe(Aa(r=>sh(S$(r.route.parent,i),M$(r.route,i),k$(t,r.path,e),P$(t,r.route,e))),cl(r=>r!==!0,!0))}function M$(t,n){return t!==null&&n&&n(new z_(t)),Bn(!0)}function S$(t,n){return t!==null&&n&&n(new G_(t)),Bn(!0)}function P$(t,n,e){let i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||i.length===0)return Bn(!0);let r=i.map(s=>Yu(()=>{let a=hu(n)??e,l=uu(s,a),d=g$(l)?l.canActivate(n,t):qr(a,()=>l(n,t));return Dl(d).pipe(cl())}));return Bn(r).pipe(du())}function k$(t,n,e){let i=n[n.length-1],s=n.slice(0,n.length-1).reverse().map(a=>h$(a)).filter(a=>a!==null).map(a=>Yu(()=>{let l=a.guards.map(d=>{let u=hu(a.node)??e,h=uu(d,u),_=_$(h)?h.canActivateChild(i,t):qr(u,()=>h(i,t));return Dl(_).pipe(cl())});return Bn(l).pipe(du())}));return Bn(s).pipe(du())}function E$(t,n,e,i,r){let s=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!s||s.length===0)return Bn(!0);let a=s.map(l=>{let d=hu(n)??r,u=uu(l,d),h=y$(u)?u.canDeactivate(t,n,e,i):qr(d,()=>u(t,n,e,i));return Dl(h).pipe(cl())});return Bn(a).pipe(du())}function T$(t,n,e,i){let r=n.canLoad;if(r===void 0||r.length===0)return Bn(!0);let s=r.map(a=>{let l=uu(a,t),d=m$(l)?l.canLoad(n,e):qr(t,()=>l(n,e));return Dl(d)});return Bn(s).pipe(du(),uO(i))}function uO(t){return Yy(Wr(n=>{if(typeof n!="boolean")throw X_(t,n)}),fn(n=>n===!0))}function A$(t,n,e,i){let r=n.canMatch;if(!r||r.length===0)return Bn(!0);let s=r.map(a=>{let l=uu(a,t),d=v$(l)?l.canMatch(n,e):qr(t,()=>l(n,e));return Dl(d)});return Bn(s).pipe(du(),uO(i))}var zp=class{segmentGroup;constructor(n){this.segmentGroup=n||null}},Up=class extends Error{urlTree;constructor(n){super(),this.urlTree=n}};function eu(t){return ih(new zp(t))}function D$(t){return ih(new Vt(4e3,!1))}function I$(t){return ih(cO(!1,Vo.GuardRejected))}var iw=class{urlSerializer;urlTree;constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Bn(i);if(r.numberOfChildren>1||!r.children[ti])return D$(`${n.redirectTo}`);r=r.children[ti]}}applyRedirectCommands(n,e,i,r,s){return O$(e,r,s).pipe(fn(a=>{if(a instanceof Ya)throw new Up(a);let l=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),n,i);if(a[0]==="/")throw new Up(l);return l}))}applyRedirectCreateUrlTree(n,e,i,r){let s=this.createSegmentGroup(n,e.root,i,r);return new Ya(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let i={};return Object.entries(n).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let l=s.substring(1);i[r]=e[l]}else i[r]=s}),i}createSegmentGroup(n,e,i,r){let s=this.createSegments(n,e.segments,i,r),a={};return Object.entries(e.children).forEach(([l,d])=>{a[l]=this.createSegmentGroup(n,d,i,r)}),new Ii(s,a)}createSegments(n,e,i,r){return e.map(s=>s.path[0]===":"?this.findPosParam(n,s,r):this.findOrReturn(s,i))}findPosParam(n,e,i){let r=i[e.path.substring(1)];if(!r)throw new Vt(4001,!1);return r}findOrReturn(n,e){let i=0;for(let r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}};function O$(t,n,e){if(typeof t=="string")return Bn(t);let i=t,{queryParams:r,fragment:s,routeConfig:a,url:l,outlet:d,params:u,data:h,title:_}=n;return Dl(qr(e,()=>i({params:u,data:h,queryParams:r,fragment:s,routeConfig:a,url:l,outlet:d,title:_})))}var rw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function F$(t,n,e,i,r){let s=pO(t,n,e);return s.matched?(i=n$(n,i),A$(i,n,e,r).pipe(fn(a=>a===!0?s:Et({},rw)))):Bn(s)}function pO(t,n,e){if(n.path==="**")return B$(e);if(n.path==="")return n.pathMatch==="full"&&(t.hasChildren()||e.length>0)?Et({},rw):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(n.matcher||WI)(e,t,n);if(!r)return Et({},rw);let s={};Object.entries(r.posParams??{}).forEach(([l,d])=>{s[l]=d.path});let a=r.consumed.length>0?Et(Et({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function B$(t){return{matched:!0,parameters:t.length>0?UI(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function RI(t,n,e,i){return e.length>0&&V$(t,e,i)?{segmentGroup:new Ii(n,N$(i,new Ii(e,t.children))),slicedSegments:[]}:e.length===0&&R$(t,e,i)?{segmentGroup:new Ii(t.segments,L$(t,e,i,t.children)),slicedSegments:e}:{segmentGroup:new Ii(t.segments,t.children),slicedSegments:e}}function L$(t,n,e,i){let r={};for(let s of e)if($_(t,n,s)&&!i[xa(s)]){let a=new Ii([],{});r[xa(s)]=a}return Et(Et({},i),r)}function N$(t,n){let e={};e[ti]=n;for(let i of t)if(i.path===""&&xa(i)!==ti){let r=new Ii([],{});e[xa(i)]=r}return e}function V$(t,n,e){return e.some(i=>$_(t,n,i)&&xa(i)!==ti)}function R$(t,n,e){return e.some(i=>$_(t,n,i))}function $_(t,n,e){return(t.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function j$(t,n,e){return n.length===0&&!t.children[e]}var ow=class{};function G$(t,n,e,i,r,s,a="emptyOnly"){return new sw(t,n,e,i,r,a,s).recognize()}var W$=31,sw=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,e,i,r,s,a,l){this.injector=n,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=l,this.applyRedirects=new iw(this.urlSerializer,this.urlTree)}noMatchError(n){return new Vt(4002,`'${n.segmentGroup}'`)}recognize(){let n=RI(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(fn(({children:e,rootSnapshot:i})=>{let r=new ys(i,e),s=new Gp("",r),a=ZI(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}))}match(n){let e=new Cd([],Object.freeze({}),Object.freeze(Et({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ti,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,ti,e).pipe(fn(i=>({children:i,rootSnapshot:e})),al(i=>{if(i instanceof Up)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof zp?this.noMatchError(i):i}))}processSegmentGroup(n,e,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(n,e,i,s):this.processSegment(n,e,i,i.segments,r,!0,s).pipe(fn(a=>a instanceof ys?[a]:[]))}processChildren(n,e,i,r){let s=[];for(let a of Object.keys(i.children))a==="primary"?s.unshift(a):s.push(a);return er(s).pipe(Aa(a=>{let l=i.children[a],d=i$(e,a);return this.processSegmentGroup(n,d,l,a,r)}),ev((a,l)=>(a.push(...l),a)),ql(null),Zy(),sr(a=>{if(a===null)return eu(i);let l=fO(a);return z$(l),Bn(l)}))}processSegment(n,e,i,r,s,a,l){return er(e).pipe(Aa(d=>this.processSegmentAgainstRoute(d._injector??n,e,d,i,r,s,a,l).pipe(al(u=>{if(u instanceof zp)return Bn(null);throw u}))),cl(d=>!!d),al(d=>{if(hO(d))return j$(i,r,s)?Bn(new ow):eu(i);throw d}))}processSegmentAgainstRoute(n,e,i,r,s,a,l,d){return xa(i)!==a&&(a===ti||!$_(r,s,i))?eu(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(n,r,i,s,a,d):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(n,r,e,i,s,a,d):eu(r)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,s,a,l){let{matched:d,parameters:u,consumedSegments:h,positionalParamSegments:_,remainingSegments:b}=pO(e,r,s);if(!d)return eu(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>W$&&(this.allowRedirects=!1));let w=new Cd(s,u,Object.freeze(Et({},this.urlTree.queryParams)),this.urlTree.fragment,jI(r),xa(r),r.component??r._loadedComponent??null,r,GI(r)),S=Y_(w,l,this.paramsInheritanceStrategy);return w.params=Object.freeze(S.params),w.data=Object.freeze(S.data),this.applyRedirects.applyRedirectCommands(h,r.redirectTo,_,w,n).pipe(To(R=>this.applyRedirects.lineralizeSegments(r,R)),sr(R=>this.processSegment(n,i,e,R.concat(b),a,!1,l)))}matchSegmentAgainstRoute(n,e,i,r,s,a){let l=F$(e,i,r,n,this.urlSerializer);return i.path==="**"&&(e.children={}),l.pipe(To(d=>d.matched?(n=i._injector??n,this.getChildConfig(n,i,r).pipe(To(({routes:u})=>{let h=i._loadedInjector??n,{parameters:_,consumedSegments:b,remainingSegments:w}=d,S=new Cd(b,_,Object.freeze(Et({},this.urlTree.queryParams)),this.urlTree.fragment,jI(i),xa(i),i.component??i._loadedComponent??null,i,GI(i)),L=Y_(S,a,this.paramsInheritanceStrategy);S.params=Object.freeze(L.params),S.data=Object.freeze(L.data);let{segmentGroup:R,slicedSegments:z}=RI(e,b,w,u);if(z.length===0&&R.hasChildren())return this.processChildren(h,u,R,S).pipe(fn(Q=>new ys(S,Q)));if(u.length===0&&z.length===0)return Bn(new ys(S,[]));let ne=xa(i)===s;return this.processSegment(h,u,R,z,ne?ti:s,!0,S).pipe(fn(Q=>new ys(S,Q instanceof ys?[Q]:[])))}))):eu(e)))}getChildConfig(n,e,i){return e.children?Bn({routes:e.children,injector:n}):e.loadChildren?e._loadedRoutes!==void 0?Bn({routes:e._loadedRoutes,injector:e._loadedInjector}):T$(n,e,i,this.urlSerializer).pipe(sr(r=>r?this.configLoader.loadChildren(n,e).pipe(Wr(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):I$(e))):Bn({routes:[],injector:n})}};function z$(t){t.sort((n,e)=>n.value.outlet===ti?-1:e.value.outlet===ti?1:n.value.outlet.localeCompare(e.value.outlet))}function U$(t){let n=t.value.routeConfig;return n&&n.path===""}function fO(t){let n=[],e=new Set;for(let i of t){if(!U$(i)){n.push(i);continue}let r=n.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):n.push(i)}for(let i of e){let r=fO(i.children);n.push(new ys(i.value,r))}return n.filter(i=>!e.has(i))}function jI(t){return t.data||{}}function GI(t){return t.resolve||{}}function q$(t,n,e,i,r,s){return sr(a=>G$(t,n,e,i,a.extractedUrl,r,s).pipe(fn(({state:l,tree:d})=>_n(Et({},a),{targetSnapshot:l,urlAfterRedirects:d}))))}function H$(t,n){return sr(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Bn(e);let s=new Set(r.map(d=>d.route)),a=new Set;for(let d of s)if(!a.has(d))for(let u of mO(d))a.add(u);let l=0;return er(a).pipe(Aa(d=>s.has(d)?Y$(d,i,t,n):(d.data=Y_(d,d.parent,t).resolve,Bn(void 0))),Wr(()=>l++),ah(1),sr(d=>l===a.size?Bn(e):Uo))})}function mO(t){let n=t.children.map(e=>mO(e)).flat();return[t,...n]}function Y$(t,n,e,i){let r=t.routeConfig,s=t._resolve;return r?.title!==void 0&&!sO(r)&&(s[qp]=r.title),Yu(()=>(t.data=Y_(t,t.parent,e).resolve,X$(s,t,n,i).pipe(fn(a=>(t._resolvedData=a,t.data=Et(Et({},t.data),a),null)))))}function X$(t,n,e,i){let r=XC(t);if(r.length===0)return Bn({});let s={};return er(r).pipe(sr(a=>J$(t[a],n,e,i).pipe(cl(),Wr(l=>{if(l instanceof cu)throw X_(new fc,l);s[a]=l}))),ah(1),fn(()=>s),al(a=>hO(a)?Uo:ih(a)))}function J$(t,n,e,i){let r=hu(n)??i,s=uu(t,r),a=s.resolve?s.resolve(n,e):qr(r,()=>s(n,e));return Dl(a)}function HC(t){return To(n=>{let e=t(n);return e?er(e).pipe(fn(()=>n)):Bn(n)})}var hw=(()=>{class t{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===ti);return i}getResolvedTitleForRoute(e){return e.data[qp]}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:()=>Ft(gO),providedIn:"root"})}return t})(),gO=(()=>{class t extends hw{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||t)(ht(GE))};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_c=new an("",{providedIn:"root",factory:()=>({})}),pu=new an(""),K_=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Ft(D2);loadComponent(e,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Bn(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Dl(qr(e,()=>i.loadComponent())).pipe(fn(yO),Wr(a=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=a}),Hl(()=>{this.componentLoaders.delete(i)})),s=new th(r,()=>new yn).pipe(eh());return this.componentLoaders.set(i,s),s}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Bn({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=_O(i,this.compiler,e,this.onLoadEndListener).pipe(Hl(()=>{this.childrenLoaders.delete(i)})),a=new th(s,()=>new yn).pipe(eh());return this.childrenLoaders.set(i,a),a}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _O(t,n,e,i){return Dl(qr(e,()=>t.loadChildren())).pipe(fn(yO),sr(r=>r instanceof pg||Array.isArray(r)?Bn(r):er(n.compileModuleAsync(r))),fn(r=>{i&&i(t);let s,a,l=!1;return Array.isArray(r)?(a=r,l=!0):(s=r.create(e).injector,a=s.get(pu,[],{optional:!0,self:!0}).flat()),{routes:a.map(dw),injector:s}}))}function Q$(t){return t&&typeof t=="object"&&"default"in t}function yO(t){return Q$(t)?t.default:t}var Z_=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:()=>Ft($$),providedIn:"root"})}return t})(),$$=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),uw=new an(""),pw=new an("");function vO(t,n,e){let i=t.get(pw),r=t.get(ji);if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s,a=new Promise(u=>{s=u}),l=r.startViewTransition(()=>(s(),K$(t)));l.ready.catch(u=>{});let{onViewTransitionCreated:d}=i;return d&&qr(t,()=>d({transition:l,from:n,to:e})),a}function K$(t){return new Promise(n=>{E0({read:()=>setTimeout(n)},{injector:t})})}var fw=new an(""),e1=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new yn;transitionAbortWithErrorSubject=new yn;configLoader=Ft(K_);environmentInjector=Ft(_r);destroyRef=Ft(ta);urlSerializer=Ft(Md);rootContexts=Ft(Sd);location=Ft(oc);inputBindingEnabled=Ft(Yp,{optional:!0})!==null;titleStrategy=Ft(hw);options=Ft(_c,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Ft(Z_);createViewTransition=Ft(uw,{optional:!0});navigationErrorHandler=Ft(fw,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Bn(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new R_(r)),i=r=>this.events.next(new j_(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(_n(Et({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))}setupNavigations(e){return this.transitions=new mi(null),this.transitions.pipe(yo(i=>i!==null),To(i=>{let r=!1;return Bn(i).pipe(To(s=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Vo.SupersededByNewNavigation),Uo;this.currentTransition=i,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?_n(Et({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>s.abortController.abort()};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&l!=="reload"){let d="";return this.events.next(new Xa(s.id,this.urlSerializer.serialize(s.rawUrl),d,ou.IgnoredSameUrlNavigation)),s.resolve(!1),Uo}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Bn(s).pipe(To(d=>(this.events.next(new gc(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?Uo:Promise.resolve(d))),q$(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Wr(d=>{i.targetSnapshot=d.targetSnapshot,i.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=_n(Et({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let u=new Vp(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:d,extractedUrl:u,source:h,restoredState:_,extras:b}=s,w=new gc(d,this.urlSerializer.serialize(u),h,_);this.events.next(w);let S=rO(this.rootComponentType).snapshot;return this.currentTransition=i=_n(Et({},s),{targetSnapshot:S,urlAfterRedirects:u,extras:_n(Et({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,Bn(i)}else{let d="";return this.events.next(new Xa(s.id,this.urlSerializer.serialize(s.extractedUrl),d,ou.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Uo}}),Wr(s=>{let a=new B_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),fn(s=>(this.currentTransition=i=_n(Et({},s),{guards:d$(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),i)),x$(this.environmentInjector,s=>this.events.next(s)),Wr(s=>{if(i.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw X_(this.urlSerializer,s.guardsResult);let a=new L_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),yo(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Vo.GuardRejected),!1)),HC(s=>{if(s.guards.canActivateChecks.length!==0)return Bn(s).pipe(Wr(a=>{let l=new N_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),To(a=>{let l=!1;return Bn(a).pipe(H$(this.paramsInheritanceStrategy,this.environmentInjector),Wr({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Vo.NoDataFromResolver)}}))}),Wr(a=>{let l=new V_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),HC(s=>{let a=l=>{let d=[];if(l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent){let u=hu(l)??this.environmentInjector;d.push(this.configLoader.loadComponent(u,l.routeConfig).pipe(Wr(h=>{l.component=h}),fn(()=>{})))}for(let u of l.children)d.push(...a(u));return d};return Hu(a(s.targetSnapshot.root)).pipe(ql(null),ll(1))}),HC(()=>this.afterPreactivation()),To(()=>{let{currentSnapshot:s,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return l?er(l).pipe(fn(()=>i)):Bn(i)}),fn(s=>{let a=o$(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=i=_n(Et({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),Wr(()=>{this.events.next(new Rp)}),c$(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),ll(1),om(new $n(s=>{let a=i.abortController.signal,l=()=>s.next();return a.addEventListener("abort",l),()=>a.removeEventListener("abort",l)}).pipe(yo(()=>!r&&!i.targetRouterState),Wr(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",Vo.Aborted)}))),Wr({next:s=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ls(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),om(this.transitionAbortWithErrorSubject.pipe(Wr(s=>{throw s}))),Hl(()=>{r||this.cancelNavigationTransition(i,"",Vo.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),al(s=>{if(this.destroyed)return i.resolve(!1),Uo;if(r=!0,dO(s))this.events.next(new Ha(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode)),l$(s)?this.events.next(new lu(s.url,s.navigationBehaviorOptions)):i.resolve(!1);else{let a=new su(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);try{let l=qr(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof cu){let{message:d,cancellationCode:u}=X_(this.urlSerializer,l);this.events.next(new Ha(i.id,this.urlSerializer.serialize(i.extractedUrl),d,u)),this.events.next(new lu(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return Uo}))}))}cancelNavigationTransition(e,i,r){let s=new Ha(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Z$(t){return t!==iu}var bO=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:()=>Ft(eK),providedIn:"root"})}return t})(),Q_=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},eK=(()=>{class t extends Q_{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Fo(t)))(r||t)}})();static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xO=(()=>{class t{urlSerializer=Ft(Md);options=Ft(_c,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Ft(oc);urlHandlingStrategy=Ft(Z_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ya;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let s=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,a=r??s;return a instanceof Ya?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=rO(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:()=>Ft(tK),providedIn:"root"})}return t})(),tK=(()=>{class t extends xO{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof gc?this.updateStateMemento():e instanceof Xa?this.commitTransition(i):e instanceof Vp?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Rp?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Ha&&e.code!==Vo.SupersededByNewNavigation&&e.code!==Vo.Redirect?this.restoreHistory(i):e instanceof su?this.restoreHistory(i,!0):e instanceof Ls&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:s,state:a}=i;if(this.location.isCurrentPathEqualTo(e)||s){let l=this.browserPageId,d=Et(Et({},a),this.generateNgRouterState(r,l));this.location.replaceState(e,"",d)}else{let l=Et(Et({},a),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",l)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===e.finalUrl&&s===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Fo(t)))(r||t)}})();static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function t1(t,n){t.events.pipe(yo(e=>e instanceof Ls||e instanceof Ha||e instanceof su||e instanceof Xa),fn(e=>e instanceof Ls||e instanceof Xa?0:(e instanceof Ha?e.code===Vo.Redirect||e.code===Vo.SupersededByNewNavigation:!1)?2:1),yo(e=>e!==2),ll(1)).subscribe(()=>{n()})}var nK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wr=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Ft(w2);stateManager=Ft(xO);options=Ft(_c,{optional:!0})||{};pendingTasks=Ft(Ba);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Ft(e1);urlSerializer=Ft(Md);location=Ft(oc);urlHandlingStrategy=Ft(Z_);injector=Ft(_r);_events=new yn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Ft(bO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Ft(pu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Ft(Yp,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ar;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Ha&&i.code!==Vo.Redirect&&i.code!==Vo.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ls)this.navigated=!0;else if(i instanceof lu){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),d=Et({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Z$(r.source)},a);this.scheduleNavigation(l,iu,null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}t$(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),iu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let s={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let d=Et({},r);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(s.state=d)}let l=this.parseUrl(e);this.scheduleNavigation(l,i,a,s).catch(d=>{this.disposed||this.injector.get(Oo)(d)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(dw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:d}=i,u=d?this.currentUrlTree.fragment:a,h=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":h=Et(Et({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let _;try{let b=r?r.snapshot:this.routerState.snapshot.root;_=eO(b)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),_=this.currentUrlTree.root}return tO(_,e,h,u??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=mc(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,iu,null,i)}navigate(e,i={skipLocationChange:!1}){return rK(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=Et({},nK):i===!1?r=Et({},iK):r=i,mc(e))return BI(this.currentUrlTree,e,r);let s=this.parseUrl(e);return BI(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(e,i,r,s,a){if(this.disposed)return Promise.resolve(!1);let l,d,u;a?(l=a.resolve,d=a.reject,u=a.promise):u=new Promise((_,b)=>{l=_,d=b});let h=this.pendingTasks.add();return t1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:l,reject:d,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(_=>Promise.reject(_))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function rK(t){for(let n=0;n<t.length;n++)if(t[n]==null)throw new Vt(4008,!1)}var Ns=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=ml(null);get href(){return Xo(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new yn;applicationErrorHandler=Ft(Oo);options=Ft(_c,{optional:!0});constructor(e,i,r,s,a,l){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=a,this.locationStrategy=l,this.reactiveHref.set(Ft(new Cg("href"),{optional:!0}));let d=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area"||!!(typeof customElements=="object"&&customElements.get(d)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,i=r=>r==="merge"||r==="preserve";e||=i(this.queryParamsHandling),e||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(r=>{r instanceof Ls&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(mc(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,s,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(e!==0||i||r||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,d)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,i){let r=this.renderer,s=this.el.nativeElement;i!==null?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:mc(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||t)(Le(wr),Le(Qi),w0("tabindex"),Le(Ts),Le(fr),Le(la))};static \u0275dir=Di({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&J("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&ae("href",r.reactiveHref(),$b)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",rc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",rc],replaceUrl:[2,"replaceUrl","replaceUrl",rc],routerLink:"routerLink"},features:[yl]})}return t})();var Jp=class{};var CO=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(e,i,r,s){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(yo(e=>e instanceof Ls),Aa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Ph(s.providers,e,`Route: ${s.path}`));let a=s._injector??e,l=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(l,s.children??s._loadedRoutes))}return er(r).pipe(oh())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=Bn(null);let s=r.pipe(sr(a=>a===null?Bn(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??e,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(e,i);return er([s,a]).pipe(oh())}else return s})}static \u0275fac=function(i){return new(i||t)(ht(wr),ht(_r),ht(Jp),ht(K_))};static \u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),wO=new an(""),oK=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=iu;restoredId=0;store={};constructor(e,i,r,s,a={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof gc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ls?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Xa&&e.code===ou.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof au&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>zl(this,null,function*(){yield new Promise(r=>{setTimeout(r),typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}),this.zone.run(()=>{this.transitions.events.next(new au(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){m2()};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})();function sK(t){return t.routerState.root}function Qp(t,n){return{\u0275kind:t,\u0275providers:n}}function aK(){let t=Ft(Ur);return n=>{let e=t.get(oa);if(n!==e.components[0])return;let i=t.get(wr),r=t.get(MO);t.get(gw)===1&&i.initialNavigation(),t.get(kO,null,{optional:!0})?.setUpPreloading(),t.get(wO,null,{optional:!0})?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var MO=new an("",{factory:()=>new yn}),gw=new an("",{providedIn:"root",factory:()=>1});function SO(){let t=[{provide:gw,useValue:0},yg(()=>{let n=Ft(Ur);return n.get(z2,Promise.resolve()).then(()=>new Promise(i=>{let r=n.get(wr),s=n.get(MO);t1(r,()=>{i(!0)}),n.get(e1).afterPreactivation=()=>(i(!0),s.closed?Bn(void 0):s),r.initialNavigation()}))})];return Qp(2,t)}function PO(){let t=[yg(()=>{Ft(wr).setUpLocationChangeListener()}),{provide:gw,useValue:2}];return Qp(3,t)}var kO=new an("");function EO(t){return Qp(0,[{provide:kO,useExisting:CO},{provide:Jp,useExisting:t}])}function TO(){return Qp(8,[lw,{provide:Yp,useExisting:lw}])}function AO(t){nd("NgRouterViewTransitions");let n=[{provide:uw,useValue:vO},{provide:pw,useValue:Et({skipNextTransition:!!t?.skipInitialTransition},t)}];return Qp(9,n)}var DO=[oc,{provide:Md,useClass:fc},wr,Sd,{provide:Qi,useFactory:sK,deps:[wr]},K_,[]],n1=(()=>{class t{constructor(){}static forRoot(e,i){return{ngModule:t,providers:[DO,[],{provide:pu,multi:!0,useValue:e},[],i?.errorHandler?{provide:fw,useValue:i.errorHandler}:[],{provide:_c,useValue:i||{}},i?.useHash?cK():dK(),lK(),i?.preloadingStrategy?EO(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?hK(i):[],i?.bindToComponentInputs?TO().\u0275providers:[],i?.enableViewTransitions?AO().\u0275providers:[],uK()]}}static forChild(e){return{ngModule:t,providers:[{provide:pu,multi:!0,useValue:e}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=yr({type:t});static \u0275inj=pr({})}return t})();function lK(){return{provide:wO,useFactory:()=>{let t=Ft(yE),n=Ft(on),e=Ft(_c),i=Ft(e1),r=Ft(Md);return e.scrollOffset&&t.setOffset(e.scrollOffset),new oK(r,i,t,n,e)}}}function cK(){return{provide:la,useClass:Y2}}function dK(){return{provide:la,useClass:Tg}}function hK(t){return[t.initialNavigation==="disabled"?PO().\u0275providers:[],t.initialNavigation==="enabledBlocking"?SO().\u0275providers:[]]}var mw=new an("");function uK(){return[{provide:mw,useFactory:aK},{provide:vg,multi:!0,useExisting:mw}]}var Si={A:65,ALT:18,APOSTROPHE:192,AT_SIGN:64,B:66,BACKSLASH:220,BACKSPACE:8,C:67,CAPS_LOCK:20,CLOSE_SQUARE_BRACKET:221,COMMA:188,CONTEXT_MENU:93,CONTROL:17,D:68,DASH:189,DELETE:46,DOWN_ARROW:40,E:69,EIGHT:56,END:35,ENTER:13,EQUALS:187,ESCAPE:27,F:70,F1:112,F10:121,F11:122,F12:123,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,FF_EQUALS:61,FF_MINUS:173,FF_MUTE:181,FF_SEMICOLON:59,FF_VOLUME_DOWN:182,FF_VOLUME_UP:183,FIRST_MEDIA:166,FIVE:53,FOUR:52,G:71,H:72,HOME:36,I:73,INSERT:45,J:74,K:75,L:76,LAST_MEDIA:183,LEFT_ARROW:37,M:77,MAC_ENTER:3,MAC_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,META:91,MUTE:173,N:78,NINE:57,NUM_CENTER:12,NUM_LOCK:144,NUMPAD_DIVIDE:111,NUMPAD_EIGHT:104,NUMPAD_FIVE:101,NUMPAD_FOUR:100,NUMPAD_MINUS:109,NUMPAD_MULTIPLY:106,NUMPAD_NINE:105,NUMPAD_ONE:97,NUMPAD_PERIOD:110,NUMPAD_PLUS:107,NUMPAD_SEVEN:103,NUMPAD_SIX:102,NUMPAD_THREE:99,NUMPAD_TWO:98,NUMPAD_ZERO:96,O:79,ONE:49,OPEN_SQUARE_BRACKET:219,P:80,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PLUS_SIGN:43,PRINT_SCREEN:44,Q:81,QUESTION_MARK:63,R:82,RIGHT_ARROW:39,S:83,SCROLL_LOCK:145,SEMICOLON:186,SEVEN:55,SHIFT:16,SINGLE_QUOTE:222,SIX:54,SLASH:191,SPACE:32,T:84,TAB:9,THREE:51,TILDE:192,TWO:50,U:85,UP_ARROW:38,V:86,VOLUME_DOWN:174,VOLUME_UP:175,W:87,X:88,Y:89,Z:90,ZERO:48},_w=class{constructor(n){this.listenOn=window,Object.assign(this,n)}},Pd=(()=>{class t{constructor(){this.bindings=new yn,this.bindings$=this.bindings.asObservable()}hasModifierKey(e,...i){return i.length?i.some(r=>e[r]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}hasKeycode(e,i){return i.some(r=>(e.keyCode||e.which)===r)}match(e,i=[],r){let{listenOn:s}=new _w(r);return new $n(a=>{Xu(s,"keydown").subscribe(d=>{this.hasKeycode(d,e)&&(!i.length||this.hasModifierKey(d,...i))&&a.next(d)})})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var d8=hr(Ko());var IO=["GLOBAL_set_tonality_and_mode","GLOBAL_set_only_mode","changeTonality","set_fretboard_scale","set_fretboard_key","set_fretboard_caged","set_fretboard_caged_all_off","toggle_fretboard_display_mode","toggle_fretboard_rotate","toggle_fretboard_rotate_180","toggle_fretboard_score_follow","toggle_fretboard_losanges","toggle_fretboard_chordtones","toggle_fretboard_string","toggle_braid_score_chords","toggle_simplified_braid","toggle_diatonic_scale_braid","toggle_one_tona_braid","toggle_one_tona_before_braid","toggle_one_tona_after_braid","toggle_roman_display_braid","set_piano_key","set_piano_scale","toggle_piano_display_mode","toggle_piano_score_follow","toggle_piano_losanges","toggle_piano_chordtones","toggle_fretboard","toggle_piano","toggle_video_card","global_toggle_letters_numbers","global_toggle_show_score_chords"];var Zo=class{constructor(n="",e="",i="",r="",s=""){this.c=n,this.n=e,this.a=i,this.l=r,this.n_lh=s,this.chord="",this.notes="",this.notes_lh="",this.analysis="",this.lyrics="",this.pos=0,this.audioRegion={start:null,end:null},this.chord=n,this.notes=e,this.analysis=i,this.lyrics=r,this.notes_lh=s}render(){let n="";return n+='"'+this.chord+'"',n+=" ",n+='"_'+this.analysis+'"',n+=" ",n+=this.notes,n+=" x ",n}render_lh(){let n="";return n+=this.notes_lh,n+=" x ",n}setChord(n){this.chord=n}setNotes(n){this.notes=n}setNotes_lh(n){this.notes_lh=n}setAnalysis(n){this.analysis=n}setLyrics(n){this.lyrics=n}getChord(){return this.chord}getNotes(){return this.notes}getNotes_lh(){return this.notes_lh}getAnalysis(){return this.analysis}getLyrics(){return this.lyrics}getAudioRegion(){return this.audioRegion}setAudioRegion(n){this.audioRegion.start=n.start,this.audioRegion.end=n.end}setPos(n){this.pos=n}getPos(){return this.pos}};var Ca=["2/4","3/4","4/4","5/4","6/4","12/8","3/4"],fu=[2,3,4,5,6,12,3];var bs=class{constructor(){this.idx=-1,this.id=-1,this.type="measure",this.eol=!1,this.collapse=!0,this.notes="",this.chords="",this.lyrics="",this.analysis="",this.notes_lh="",this.scale={full_scale:{empty:!0},caged_filter:[],caged_position:[]},this.meter=null,this.beats=[]}addScale(n){this.scale=n,this.scale.hasOwnProperty("caged_filter")||(this.scale.caged_filter=[]),this.scale.hasOwnProperty("caged_position")||(this.scale.caged_position=[])}getScale(){return this.scale}addBeat(n){this.beats.push(n),this.beats[this.beats.length-1].setPos(this.beats.length-1)}addNewBeat(){let n=new Zo;return this.beats.push(n),this.beats[this.beats.length-1].setPos(this.beats.length-1),n}removeLastBeat(){this.beats.pop()}render(){let n="";this.meter&&!this.eol&&(n+="\\"),this.meter&&this.eol&&(n+=`
`),!this.meter&&this.eol&&(n+=`
`);for(let e=0;e<this.beats.length;e++)n+=this.beats[e].render();return n+="|",n=="||"&&(n="| x |"),n}renderLeftHand(){let n="";this.meter&&!this.eol&&(n+=`\\
`),this.meter&&this.eol&&(n+=`
`),!this.meter&&this.eol&&(n+=`
`);for(let e=0;e<this.beats.length;e++)n+=this.beats[e].render_lh();return n+="|",n=="||"&&(n="| x |"),n}renderLyrics(){let n="";this.eol&&(n+=`
`);for(let e=0;e<this.beats.length;e++)n+=this.beats[e].getLyrics()+" ";return n+="|",n}setMeter(n){Ca.indexOf(n)<0&&(n="4/4"),this.meter=n}setBeats(n){this.beats=n}setIdx(n){this.idx=n}setId(n){this.id=n}getType(){return this.type}setAudioRegion(n){this.audioRegion=n}setAudioRegionStart(n){this.hasOwnProperty("audioRegion")&&(this.audioRegion.start=n)}setAudioRegionEnd(n){this.hasOwnProperty("audioRegion")&&(this.audioRegion.end=n)}removeAudioRegion(){delete this.audioRegion}getIdx(){return this.idx}getId(){return this.id}getAudioRegion(){return this.audioRegion}getAudioDuration(){return this.audioRegion?this.audioRegion.end-this.audioRegion.start:0}getBeat(n){let e=null;return n<this.beats.length&&(e=this.beats[n]),e}getBeats(){return this.beats}setEol(n){this.eol=n}getEol(){return this.eol}getMeter(){return this.meter}setBeatsFromMeter(){let n=null;if(this.meter!=null){let e=fu[Ca.indexOf(this.meter)],i=this.beats.length;if(this.beats.length){if(e>i)for(let s=0;s<e-i;s++)this.addNewBeat();else if(e<i)for(let s=0;s<i-e;s++)this.removeLastBeat()}let r=this.getAudioDuration()/this.beats.length;for(let s=0;s<this.beats.length;s++){let a="B_"+this.idx+"_"+(s+1),l=this.audioRegion.start+r*s,d=this.beats[s];if(d==null)debugger;d.setAudioRegion({start:l,end:l+r})}}return n}setFromLines(){let n=this.chords.split(" "),e=this.notes.split(" "),i=this.analysis.split(" "),r=this.lyrics.split(" "),s=this.notes_lh.split(" "),a=n.length,l=e.length,d=i.length,u=r.length,h=s.length,_=this.getBeats().length;for(let b=0;b<_;b++)this.beats[b].setChord(n[b]||" ");return n.length>this.beats.length?(this.chords=n.slice(0,_).join(" "),1):n.length<this.beats.length?-1:0}getChordsLine(){let n="";for(let e=0;e<this.beats.length;e++){let i=this.beats[e].getChord();i!=""&&i!=" "?(n+=i,n+=" "):i==" "&&(n+=" ")}return n[n.length-1]==" "&&(n=n.slice(0,-1)),n}getLyricsLine(){let n="";for(let e=0;e<this.beats.length;e++){let i=this.beats[e].getLyrics();i!=""&&(n+=i,n+=" ")}return n=n.slice(0,-1),n}getAnalysisLine(){let n="";for(let e=0;e<this.beats.length;e++){let i=this.beats[e].getAnalysis();i!=""&&(n+=i,n+=" ")}return n=n.slice(0,-1),n}setAnalysisLine(n){this.analysis=n;let e=n.split(" ");for(let i=0;i<e.length;i++)this.beats.length>i&&this.beats[i].setAnalysis(e[i])}getNotesLine(){let n="";for(let e=0;e<this.beats.length;e++){let i=this.beats[e].getNotes();i!=""&&(n+=i,n+=" ")}return n=n.slice(0,-1),n}getNotes_lhLine(){let n="";for(let e=0;e<this.beats.length;e++){let i=this.beats[e].getNotes_lh();i!=""&&(n+=i,n+=" ")}return n=n.slice(0,-1),n}getCollapse(){return this.collapse}setCollapse(n){this.collapse=n}};var r1=(t,n)=>Array(Math.abs(n)+1).join(t);function co(t,n,e){return function(...i){return console.warn(`${t} is deprecated. Use ${n}.`),e.apply(this,i)}}function o1(t){return t!==null&&typeof t=="object"&&typeof t.name=="string"}function s1(t){return t!==null&&typeof t=="object"&&typeof t.step=="number"&&typeof t.alt=="number"}var LO=[0,2,4,-1,1,3,5],NO=LO.map(t=>Math.floor(t*7/12));function VO(t){let{step:n,alt:e,oct:i,dir:r=1}=t,s=LO[n]+7*e;if(i===void 0)return[r*s];let a=i-NO[n]-4*e;return[r*s,r*a]}var fK=[3,0,4,1,5,2,6];function RO(t){let[n,e,i]=t,r=fK[mK(n)],s=Math.floor((n+1)/7);if(e===void 0)return{step:r,alt:s,dir:i};let a=e+4*s+NO[r];return{step:r,alt:s,oct:a,dir:i}}function mK(t){let n=(t+1)%7;return n<0?7+n:n}var jO={empty:!0,name:"",pc:"",acc:""},OO=new Map,gK=t=>"CDEFGAB".charAt(t),gu=t=>t<0?r1("b",-t):r1("#",t),$p=t=>t[0]==="b"?-t.length:t.length;function ii(t){let n=OO.get(t);if(n)return n;let e=typeof t=="string"?vK(t):s1(t)?ii(bK(t)):o1(t)?ii(t.name):jO;return OO.set(t,e),e}var _K=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function bw(t){let n=_K.exec(t);return[n[1].toUpperCase(),n[2].replace(/x/g,"##"),n[3],n[4]]}function a1(t){return ii(RO(t))}var yK=(t,n)=>(t%n+n)%n,yw=[0,2,4,5,7,9,11];function vK(t){let n=bw(t);if(n[0]===""||n[3]!=="")return jO;let e=n[0],i=n[1],r=n[2],s=(e.charCodeAt(0)+3)%7,a=$p(i),l=r.length?+r:void 0,d=VO({step:s,alt:a,oct:l}),u=e+i+r,h=e+i,_=(yw[s]+a+120)%12,b=l===void 0?yK(yw[s]+a,12)-12*99:yw[s]+a+12*(l+1),w=b>=0&&b<=127?b:null,S=l===void 0?null:Math.pow(2,(b-69)/12)*440;return{empty:!1,acc:i,alt:a,chroma:_,coord:d,freq:S,height:b,letter:e,midi:w,name:u,oct:l,pc:h,step:s}}function bK(t){let{step:n,alt:e,oct:i}=t,r=gK(n);if(!r)return"";let s=r+gu(e);return i||i===0?s+i:s}var vw={empty:!0,name:"",acc:""},xK="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",CK="(AA|A|P|M|m|d|dd)([-+]?\\d+)",wK=new RegExp("^"+xK+"|"+CK+"$");function MK(t){let n=wK.exec(`${t}`);return n===null?["",""]:n[1]?[n[1],n[2]]:[n[4],n[3]]}var FO={};function Ir(t){return typeof t=="string"?FO[t]||(FO[t]=SK(t)):s1(t)?Ir(kK(t)):o1(t)?Ir(t.name):vw}var BO=[0,2,4,5,7,9,11],GO="PMMPPMM";function SK(t){let n=MK(t);if(n[0]==="")return vw;let e=+n[0],i=n[1],r=(Math.abs(e)-1)%7,s=GO[r];if(s==="M"&&i==="P")return vw;let a=s==="M"?"majorable":"perfectable",l=""+e+i,d=e<0?-1:1,u=e===8||e===-8?e:d*(r+1),h=PK(a,i),_=Math.floor((Math.abs(e)-1)/7),b=d*(BO[r]+h+12*_),w=(d*(BO[r]+h)%12+12)%12,S=VO({step:r,alt:h,oct:_,dir:d});return{empty:!1,name:l,num:e,q:i,step:r,alt:h,dir:d,type:a,simple:u,semitones:b,chroma:w,coord:S,oct:_}}function l1(t,n){let[e,i=0]=t,r=e*7+i*12<0,s=n||r?[-e,-i,-1]:[e,i,1];return Ir(RO(s))}function PK(t,n){return n==="M"&&t==="majorable"||n==="P"&&t==="perfectable"?0:n==="m"&&t==="majorable"?-1:/^A+$/.test(n)?n.length:/^d+$/.test(n)?-1*(t==="perfectable"?n.length:n.length+1):0}function kK(t){let{step:n,alt:e,oct:i=0,dir:r}=t;if(!r)return"";let s=n+1+7*i,a=s===0?n+1:s,l=r<0?"-":"",d=GO[n]==="M"?"majorable":"perfectable";return l+a+EK(d,e)}function EK(t,n){return n===0?t==="majorable"?"M":"P":n===-1&&t==="majorable"?"m":n>0?r1("A",n):r1("d",t==="perfectable"?n:n+1)}function Or(t,n){let e=ii(t),i=Ir(n);if(e.empty||i.empty)return"";let r=e.coord,s=i.coord,a=r.length===1?[r[0]+s[0]]:[r[0]+s[0],r[1]+s[1]];return a1(a).name}function kd(t,n){let e=ii(t),i=ii(n);if(e.empty||i.empty)return"";let r=e.coord,s=i.coord,a=s[0]-r[0],l=r.length===2&&s.length===2?s[1]-r[1]:-Math.floor(a*7/12),d=i.height===e.height&&i.midi!==null&&e.midi!==null&&e.step>i.step;return l1([a,l],d).name}var WO=(t,n)=>Array(n+1).join(t),AK=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function zO(t){let n=AK.exec(t);return n?[n[1],n[2],n[3]]:["","",""]}function c1(t){let[n,e,i]=zO(t);if(e==="")return"";let r=4;for(let a=0;a<i.length;a++)r+=i.charAt(a)===","?-1:1;let s=n[0]==="_"?n.replace(/_/g,"b"):n[0]==="^"?n.replace(/\^/g,"#"):"";return e.charCodeAt(0)>96?e.toUpperCase()+s+(r+1):e+s+r}function UO(t){let n=ii(t);if(n.empty||!n.oct&&n.oct!==0)return"";let{letter:e,acc:i,oct:r}=n,s=i[0]==="b"?i.replace(/b/g,"_"):i.replace(/#/g,"^"),a=r>4?e.toLowerCase():e,l=r===5?"":r>4?WO("'",r-5):WO(",",4-r);return s+a+l}function DK(t,n){return UO(Or(c1(t),n))}function IK(t,n){return kd(c1(t),c1(n))}var Ro={abcToScientificNotation:c1,scientificToAbcNotation:UO,tokenize:zO,transpose:DK,distance:IK};function FK(t,n){let e=[];for(;n--;e[n]=n+t);return e}function BK(t,n){let e=[];for(;n--;e[n]=t-n);return e}function d1(t,n){return t<n?FK(t,n-t+1):BK(t,t-n+1)}function Ed(t,n){let e=n.length,i=(t%e+e)%e;return n.slice(i,e).concat(n.slice(0,i))}function xw(t){return t.filter(n=>n===0||n)}var Ja={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},YO=t=>Number(t).toString(2),qO=t=>parseInt(t,2),LK=/^[01]{12}$/;function XO(t){return LK.test(t)}var NK=t=>typeof t=="number"&&t>=0&&t<=4095,VK=t=>t&&XO(t.chroma),HO={[Ja.chroma]:Ja};function Qa(t){let n=XO(t)?t:NK(t)?YO(t):Array.isArray(t)?zK(t):VK(t)?t.chroma:Ja.chroma;return HO[n]=HO[n]||WK(n)}var e3e=co("Pcset.pcset","Pcset.get",Qa);var RK=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function jK(t){let n=[];for(let e=0;e<12;e++)t.charAt(e)==="1"&&n.push(RK[e]);return n}function h1(t,n=!0){let i=Qa(t).chroma.split("");return xw(i.map((r,s)=>{let a=Ed(s,i);return n&&a[0]==="0"?null:a.join("")}))}function Kp(t){let n=Qa(t).setNum;return e=>{let i=Qa(e).setNum;return n&&n!==i&&(i&n)===i}}function Zp(t){let n=Qa(t).setNum;return e=>{let i=Qa(e).setNum;return n&&n!==i&&(i|n)===i}}function GK(t){let n=t.split("");return n.map((e,i)=>Ed(i,n).join(""))}function WK(t){let n=qO(t),e=GK(t).map(qO).filter(s=>s>=2048).sort()[0],i=YO(e),r=jK(t);return{empty:!1,name:"",setNum:n,chroma:t,normalized:i,intervals:r}}function zK(t){if(t.length===0)return Ja.chroma;let n,e=[0,0,0,0,0,0,0,0,0,0,0,0];for(let i=0;i<t.length;i++)n=ii(t[i]),n.empty&&(n=Ir(t[i])),n.empty||(e[n.chroma]=1);return e.join("")}var UK=[["1P 3M 5P","major","M ^ "],["1P 3M 5P 7M","major seventh","maj7 \u0394 ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 \u03949 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth/ninth","6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 \u0394#4 \u0394#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -\u03947 m\u0394 -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim \xB0 o"],["1P 3m 5d 7d","diminished seventh","dim7 \xB07 o7"],["1P 3m 5d 7m","half-diminished","m7b5 \xF8 -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 \u03949#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],qK=_n(Et({},Ja),{name:"",quality:"Unknown",intervals:[],aliases:[]}),_u=[],Td={};function u1(t){return Td[t]||qK}var HK=co("ChordType.chordType","ChordType.get",u1);function YK(){return _u.map(t=>t.name).filter(t=>t)}function XK(){return _u.map(t=>t.aliases[0]).filter(t=>t)}function JK(){return Object.keys(Td)}function Il(){return _u.slice()}var QK=co("ChordType.entries","ChordType.all",Il);function $K(){_u=[],Td={}}function JO(t,n,e){let i=ZK(t),r=_n(Et({},Qa(t)),{name:e||"",quality:i,intervals:t,aliases:n});_u.push(r),r.name&&(Td[r.name]=r),Td[r.setNum]=r,Td[r.chroma]=r,r.aliases.forEach(s=>KK(r,s))}function KK(t,n){Td[n]=t}function ZK(t){let n=e=>t.indexOf(e)!==-1;return n("5A")?"Augmented":n("3M")?"Major":n("5d")?"Diminished":n("3m")?"Minor":"Unknown"}UK.forEach(([t,n,e])=>JO(t.split(" "),e.split(" "),n));_u.sort((t,n)=>t.setNum-n.setNum);var p1={names:YK,symbols:XK,get:u1,all:Il,add:JO,removeAll:$K,keys:JK,entries:QK,chordType:HK};var eZ=t=>{let n=t.reduce((e,i)=>{let r=ii(i).chroma;return r!==void 0&&(e[r]=e[r]||ii(i).name),e},{});return e=>n[e]};function Cw(t){let n=t.map(i=>ii(i).pc).filter(i=>i);return ii.length===0?[]:tZ(n,1).filter(i=>i.weight).sort((i,r)=>r.weight-i.weight).map(i=>i.name)}function tZ(t,n){let e=t[0],i=ii(e).chroma,r=eZ(t),s=h1(t,!1),a=[];return s.forEach((l,d)=>{Il().filter(h=>h.chroma===l).forEach(h=>{let _=h.aliases[0],b=r(d);d!==i?a.push({weight:.5*n,name:`${b}${_}/${e}`}):a.push({weight:1*n,name:`${b}${_}`})})}),a}var nZ=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 7m","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3m 4P 5P 6m 7m","aeolian","minor"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],iZ=_n(Et({},Ja),{intervals:[],aliases:[]}),f1=[],Ad={};function ww(){return f1.map(t=>t.name)}function yu(t){return Ad[t]||iZ}var rZ=co("ScaleDictionary.scaleType","ScaleType.get",yu);function Dd(){return f1.slice()}var oZ=co("ScaleDictionary.entries","ScaleType.all",Dd);function sZ(){return Object.keys(Ad)}function aZ(){f1=[],Ad={}}function QO(t,n,e=[]){let i=_n(Et({},Qa(t)),{name:n,intervals:t,aliases:e});return f1.push(i),Ad[i.name]=i,Ad[i.setNum]=i,Ad[i.chroma]=i,i.aliases.forEach(r=>lZ(i,r)),i}function lZ(t,n){Ad[n]=t}nZ.forEach(([t,n,...e])=>QO(t.split(" "),n,e));var m1={names:ww,get:yu,all:Dd,add:QO,removeAll:aZ,keys:sZ,entries:oZ,scaleType:rZ};var Mw={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]},cZ=/^(6|64|7|9|11|13)$/;function _1(t){let[n,e,i,r]=bw(t);return n===""?["",t]:n==="A"&&r==="ug"?["","aug"]:!r&&(i==="4"||i==="5")?[n+e,i]:cZ.test(i)?[n+e,i+r]:[n+e+i,r]}function ef(t){if(t==="")return Mw;if(Array.isArray(t)&&t.length===2)return g1(t[1],t[0]);{let[n,e]=_1(t),i=g1(e,n);return i.empty?g1(t):i}}function g1(t,n,e){let i=u1(t),r=ii(n||""),s=ii(e||"");if(i.empty||n&&r.empty||e&&s.empty)return Mw;let a=kd(r.pc,s.pc),l=i.intervals.indexOf(a)+1;if(!s.empty&&!l)return Mw;let d=Array.from(i.intervals);for(let b=1;b<l;b++){let w=d[0][0],S=d[0][1],L=parseInt(w,10)+7;d.push(`${L}${S}`),d.shift()}let u=r.empty?[]:d.map(b=>Or(r,b));t=i.aliases.indexOf(t)!==-1?t:i.aliases[0];let h=`${r.empty?"":r.pc}${t}${s.empty||l<=1?"":"/"+s.pc}`,_=`${n?r.pc+" ":""}${i.name}${l>1&&e?" over "+s.pc:""}`;return _n(Et({},i),{name:_,symbol:h,type:i.name,root:s.name,intervals:d,rootDegree:l,tonic:r.name,notes:u})}var dZ=co("Chord.chord","Chord.get",ef);function hZ(t,n){let[e,i]=_1(t);return e?Or(e,n)+i:t}function uZ(t){let n=ef(t),e=Zp(n.chroma);return Dd().filter(i=>e(i.chroma)).map(i=>i.name)}function pZ(t){let n=ef(t),e=Zp(n.chroma);return Il().filter(i=>e(i.chroma)).map(i=>n.tonic+i.aliases[0])}function fZ(t){let n=ef(t),e=Kp(n.chroma);return Il().filter(i=>e(i.chroma)).map(i=>n.tonic+i.aliases[0])}var qn={getChord:g1,get:ef,detect:Cw,chordScales:uZ,extended:pZ,reduced:fZ,tokenize:_1,transpose:hZ,chord:dZ};var mZ=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],gZ=[];mZ.forEach(([t,n,e])=>_Z(t,n,e));function _Z(t,n,e){gZ.push({empty:!1,dots:"",name:"",value:1/t,fraction:t<1?[1/t,1]:[1,t],shorthand:n,names:e})}function yZ(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var $O=Ir,vZ=t=>Ir(t).name,bZ=t=>Ir(t).semitones,xZ=t=>Ir(t).q,CZ=t=>Ir(t).num;function Sw(t){let n=Ir(t);return n.empty?"":n.simple+n.q}function wZ(t){let n=Ir(t);if(n.empty)return"";let e=(7-n.step)%7,i=n.type==="perfectable"?-n.alt:-(n.alt+1);return Ir({step:e,alt:i,oct:n.oct,dir:n.dir}).name}var MZ=[1,2,2,3,3,4,5,5,6,6,7,7],SZ="P m M m M P d P m M m M".split(" ");function PZ(t){let n=t<0?-1:1,e=Math.abs(t),i=e%12,r=Math.floor(e/12);return n*(MZ[i]+7*r)+SZ[i]}var kZ=kd,KO=ZO((t,n)=>[t[0]+n[0],t[1]+n[1]]),EZ=t=>n=>KO(t,n),TZ=ZO((t,n)=>[t[0]-n[0],t[1]-n[1]]);function Pw(t,n){let e=$O(t);if(e.empty)return"";let[i,r,s]=e.coord;return l1([i+n,r,s]).name}var Ni={names:yZ,get:$O,name:vZ,num:CZ,semitones:bZ,quality:xZ,fromSemitones:PZ,distance:kZ,invert:wZ,simplify:Sw,add:KO,addTo:EZ,substract:TZ,transposeFifths:Pw};function ZO(t){return(n,e)=>{let i=Ir(n).coord,r=Ir(e).coord;if(i&&r){let s=t(i,r);return l1(s).name}}}function e7(t){return+t>=0&&+t<=127}function t7(t){if(e7(t))return+t;let n=ii(t);return n.empty?null:n.midi}function AZ(t,n=440){return Math.pow(2,(t-69)/12)*n}var DZ=Math.log(2),IZ=Math.log(440);function y1(t){let n=12*(Math.log(t)-IZ)/DZ+69;return Math.round(n*100)/100}var OZ="C C# D D# E F F# G G# A A# B".split(" "),FZ="C Db D Eb E F Gb G Ab A Bb B".split(" ");function Ol(t,n={}){if(isNaN(t)||t===-1/0||t===1/0)return"";t=Math.round(t);let i=(n.sharps===!0?OZ:FZ)[t%12];if(n.pitchClass)return i;let r=Math.floor(t/12)-1;return i+r}var kw={isMidi:e7,toMidi:t7,midiToFreq:AZ,midiToNoteName:Ol,freqToMidi:y1};var BZ=["C","D","E","F","G","A","B"],n7=t=>t.name,i7=t=>t.map(ii).filter(n=>!n.empty);function LZ(t){return t===void 0?BZ.slice():Array.isArray(t)?i7(t).map(n7):[]}var Vs=ii,NZ=t=>Vs(t).name,VZ=t=>Vs(t).pc,RZ=t=>Vs(t).acc,jZ=t=>Vs(t).oct,GZ=t=>Vs(t).midi,WZ=t=>Vs(t).freq,zZ=t=>Vs(t).chroma;function Ew(t){return Ol(t)}function UZ(t){return Ol(y1(t))}function qZ(t){return Ol(y1(t),{sharps:!0})}function HZ(t){return Ol(t,{sharps:!0})}var Tw=Or,YZ=Or,r7=t=>n=>Tw(n,t),XZ=r7,o7=t=>n=>Tw(t,n),JZ=o7;function tf(t,n){let e=Vs(t);if(e.empty)return"";let[i,r]=e.coord;return(r===void 0?a1([i+n]):a1([i+n,r])).name}var QZ=tf,Aw=(t,n)=>t.height-n.height,$Z=(t,n)=>n.height-t.height;function s7(t,n){return n=n||Aw,i7(t).sort(n).map(n7)}function Dw(t){return s7(t,Aw).filter((n,e,i)=>e===0||n!==i[e-1])}var KZ=t=>{let n=Vs(t);return n.empty?"":Ol(n.midi||n.chroma,{sharps:n.alt>0,pitchClass:n.midi===null})};function Iw(t,n){let e=Vs(t);if(e.empty)return"";let i=Vs(n||Ol(e.midi||e.chroma,{sharps:e.alt<0,pitchClass:!0}));if(i.empty||i.chroma!==e.chroma)return"";if(e.oct===void 0)return i.pc;let r=e.chroma-e.alt,s=i.chroma-i.alt,a=r>11||s<0?-1:r<0||s>11?1:0,l=e.oct+a;return i.pc+l}var nn={names:LZ,get:Vs,name:NZ,pitchClass:VZ,accidentals:RZ,octave:jZ,midi:GZ,ascending:Aw,descending:$Z,sortedNames:s7,sortedUniqNames:Dw,fromMidi:Ew,fromMidiSharps:HZ,freq:WZ,fromFreq:UZ,fromFreqSharps:qZ,chroma:zZ,transpose:Tw,tr:YZ,transposeBy:r7,trBy:XZ,transposeFrom:o7,trFrom:JZ,transposeFifths:tf,trFifths:QZ,simplify:KZ,enharmonic:Iw};var l7={empty:!0,name:"",chordType:""},a7={};function yc(t){return typeof t=="string"?a7[t]||(a7[t]=nee(t)):typeof t=="number"?yc(Ow[t]||""):s1(t)?ZZ(t):o1(t)?yc(t.name):l7}var I3e=co("RomanNumeral.romanNumeral","RomanNumeral.get",yc);function ZZ(t){return yc(gu(t.alt)+Ow[t.step])}var eee=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function tee(t){return eee.exec(t)||["","","",""]}var c7="I II III IV V VI VII",Ow=c7.split(" "),O3e=c7.toLowerCase().split(" ");function nee(t){let[n,e,i,r]=tee(t);if(!i)return l7;let s=i.toUpperCase(),a=Ow.indexOf(s),l=$p(e),d=1;return{empty:!1,name:n,roman:i,interval:Ir({step:a,alt:l,dir:d}).name,acc:e,chordType:r,alt:l,step:a,major:i===s,oct:0,dir:d}}var wa=Object.freeze([]),h7={type:"major",tonic:"",alteration:0,keySignature:""},v1={tonic:"",grades:wa,intervals:wa,scale:wa,chords:wa,chordsHarmonicFunction:wa,chordScales:wa},iee=_n(Et(Et({},h7),v1),{type:"major",minorRelative:"",scale:wa,secondaryDominants:wa,secondaryDominantsMinorRelative:wa,substituteDominants:wa,substituteDominantsMinorRelative:wa}),ree=_n(Et({},h7),{type:"minor",relativeMajor:"",natural:v1,harmonic:v1,melodic:v1}),d7=(t,n,e="")=>n.map((i,r)=>`${t[r]}${e}${i}`);function b1(t,n,e,i){return r=>{let s=t.map(l=>yc(l).interval||""),a=s.map(l=>Or(r,l));return{tonic:r,grades:t,intervals:s,scale:a,chords:d7(a,n),chordsHarmonicFunction:e.slice(),chordScales:d7(a,i," ")}}}var u7=(t,n)=>{let e=ii(t),i=ii(n);return e.empty||i.empty?0:i.coord[0]-e.coord[0]},oee=b1("I II III IV V VI VII".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),see=b1("I II bIII IV V bVI bVII".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),aee=b1("I II bIII IV V bVI VII".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),lee=b1("I II bIII IV V VI VII".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function cee(t){let n=ii(t).pc;if(!n)return iee;let e=oee(n),i=u7("C",n),r=s=>{let a=yc(s);return a.empty?"":Or(t,a.interval)+a.chordType};return _n(Et({},e),{type:"major",minorRelative:Or(n,"-3m"),alteration:i,keySignature:gu(i),secondaryDominants:"- VI7 VII7 I7 II7 III7 -".split(" ").map(r),secondaryDominantsMinorRelative:"- IIIm7b5 IV#m7 Vm7 VIm7 VIIm7b5 -".split(" ").map(r),substituteDominants:"- bIII7 IV7 bV7 bVI7 bVII7 -".split(" ").map(r),substituteDominantsMinorRelative:"- IIIm7 Im7 IIbm7 VIm7 IVm7 -".split(" ").map(r)})}function dee(t){let n=ii(t).pc;if(!n)return ree;let e=u7("C",n)-3;return{type:"minor",tonic:n,relativeMajor:Or(n,"3m"),alteration:e,keySignature:gu(e),natural:see(n),harmonic:aee(n),melodic:lee(n)}}function hee(t){return typeof t=="number"?tf("C",t):typeof t=="string"&&/^b+|#+$/.test(t)?tf("C",$p(t)):null}var xi={majorKey:cee,majorTonicFromKeySignature:hee,minorKey:dee};var Bw=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],p7=_n(Et({},Ja),{name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]}),Lw=Bw.map(mee),Fw={};Lw.forEach(t=>{Fw[t.name]=t,t.aliases.forEach(n=>{Fw[n]=t})});function Id(t){return typeof t=="string"?Fw[t.toLowerCase()]||p7:t&&t.name?Id(t.name):p7}var uee=co("Mode.mode","Mode.get",Id);function f7(){return Lw.slice()}var pee=co("Mode.mode","Mode.all",f7);function fee(){return Lw.map(t=>t.name)}function mee(t){let[n,e,i,r,s,a,l]=t,d=l?[l]:[],u=Number(e).toString(2);return{empty:!1,intervals:yu(r).intervals,modeNum:n,chroma:u,normalized:u,name:r,setNum:e,alt:i,triad:s,seventh:a,aliases:d}}function gee(t,n){return Id(t).intervals.map(e=>Or(n,e))}function m7(t){return(n,e)=>{let i=Id(n);if(i.empty)return[];let r=Ed(i.modeNum,t),s=i.intervals.map(a=>Or(e,a));return r.map((a,l)=>s[l]+a)}}var _ee=m7(Bw.map(t=>t[4])),yee=m7(Bw.map(t=>t[5]));function g7(t,n){let e=Id(n),i=Id(t);return e.empty||i.empty?"":Sw(Pw("1P",i.alt-e.alt))}function vee(t,n,e){return Or(e,g7(t,n))}var Nw={get:Id,names:fee,all:f7,distance:g7,relativeTonic:vee,notes:gee,triads:_ee,seventhChords:yee,entries:pee,mode:uee};var bee={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function _7(t){if(typeof t!="string")return["",""];let n=t.indexOf(" "),e=ii(t.substring(0,n));if(e.empty){let r=ii(t);return r.empty?["",t]:[r.name,""]}let i=t.substring(e.name.length+1);return[e.name,i.length?i:""]}var xee=ww;function vc(t){let n=Array.isArray(t)?t:_7(t),e=ii(n[0]).name,i=yu(n[1]);if(i.empty)return bee;let r=i.name,s=e?i.intervals.map(l=>Or(e,l)):[],a=e?e+" "+r:r;return _n(Et({},i),{name:a,type:r,tonic:e,notes:s})}var Cee=co("Scale.scale","Scale.get",vc);function wee(t){let n=vc(t),e=Kp(n.chroma);return Il().filter(i=>e(i.chroma)).map(i=>i.aliases[0])}function Mee(t){let n=vc(t),e=Zp(n.chroma);return Dd().filter(i=>e(i.chroma)).map(i=>i.name)}function See(t){let n=Kp(vc(t).chroma);return Dd().filter(e=>n(e.chroma)).map(e=>e.name)}function y7(t){let n=t.map(r=>ii(r).pc).filter(r=>r),e=n[0],i=Dw(n);return Ed(i.indexOf(e),i)}function Pee(t){let n=vc(t);if(n.empty)return[];let e=n.tonic?n.notes:n.intervals;return h1(n.chroma).map((i,r)=>{let s=vc(i).name;return s?[e[r],s]:["",""]}).filter(i=>i[0])}function kee(t){let n=Array.isArray(t)?y7(t):vc(t).notes,e=n.map(i=>ii(i).chroma);return i=>{let r=typeof i=="number"?ii(Ew(i)):ii(i),s=r.height;if(s===void 0)return;let a=s%12,l=e.indexOf(a);if(l!==-1)return Iw(r.name,n[l])}}function Eee(t){let n=kee(t);return(e,i)=>{let r=ii(e).height,s=ii(i).height;return r===void 0||s===void 0?[]:d1(r,s).map(n).filter(a=>a)}}var Mo={get:vc,names:xee,extended:Mee,modeNames:Pee,reduced:See,scaleChords:wee,scaleNotes:y7,tokenize:_7,rangeOf:Eee,scale:Cee};var Ma=class{constructor(){this.idx=-1,this.type="part",this.title="New part",this.tonality="",this.meter="4/4",this.measures=[]}getIdx(){return this.idx}setIdx(n){this.idx=n}getType(){return this.type}getTitle(){return this.title}setTitle(n){this.title=n}getMeasures(){return this.measures}getMeasure(n){return this.measures[n]}setMeasures(n){this.measures=n}addMeasure(n){this.measures.push(n)}addMeasureAfter(n,e,i){e.setIdx(this.measures[n].getIdx()+1),this.measures.splice(n+1,0,e),i&&(this.measures_hash[i.id]=i)}addNewMeasure(){let n=new bs;return this.measures.push(n),n}deleteMeasure(n){this.measures.splice(n,1)}deleteMeasureById(n){for(let e=0;e<this.measures.length;e++)this.measures[e].getIdx()==n&&this.deleteMeasure(e)}getLastMeasure(){return this.measures.slice(-1)[0]}getTonality(){return this.tonality}setTonality(n){this.tonality=n}getMeter(){return this.meter}setMeter(n){Ca.indexOf(n)<0&&(n="4/4"),this.meter=n}setBeatsFromMeter(){for(let n of this.measures)n.setMeter(this.meter),n.setBeatsFromMeter()}check_meter(){if(Ca.indexOf(this.meter)<0){let n=this.meter;return this.meter="4/4",n}return 0}init_missing_measures_meters(){for(let n of this.measures)n.getMeter()==null&&(n.setMeter(this.meter),n.setBeatsFromMeter())}getMeasures_hash(){return this.measures_hash}setMeasures_hash(n){this.measures_hash=n}getMeasures_max_lines(){return this.measures_max_lines}renderWithLyrics(){let n="",e="",i={};for(let b=0;b<this.measures.length;b++)n+=this.measures[b].render(),e+=this.measures[b].renderLyrics(),i[this.measures[b].getId()]={id:this.measures[b].getId(),idx:b,part:this.idx,meas:b};let r=0,s="|:",a=n.split(`
`),l=e.split(`
`);for(var d=0;d<a.length;d++){let b=a[d],w=l[d];d==a.length-1&&(b=b.slice(0,-1),b+=":|"),s+=b+`
`;var u=(a[d].match(/\|/g)||[]).length;for(let S=0;S<u;S++){var h=this.measures[r].getId();d==0&&(i[h].part_first_line=!0),i[h].lig=d,i[h].pos=S,i[h].id=h,r++}}this.measures_max_lines=d,this.measures_hash=i,s.slice(-1)==`
`&&(s=s.slice(0,-1));let _="P:"+this.title+`
`;return _+="K:"+this.tonality+`
`,_+="M:"+this.meter+`
`,_+=`[V: V1]
`,_+=s,_}renderWithLeftHand(){let n="",e="",i={};for(let h=0;h<this.measures.length;h++)n+=this.measures[h].render(),e+=this.measures[h].renderLyrics(),i[this.measures[h].getIdx()]={idx:h,part:this.idx,meas:h};let r=0;this.measures.length&&(r=this.measures[0].getIdx());let s="|:",a=n.split(`
`),l=e.split(`
`);for(var d=0;d<a.length;d++){let h=a[d],_=l[d];d==a.length-1&&(h=h.slice(0,-1),h+=":|"),s+=h+`
`;let b=(a[d].match(/\|/g)||[]).length;for(let w=0;w<b;w++){let S=r+w;d==0&&(i[S].part_first_line=!0),i[S].lig=d,i[S].pos=w}r+=b}this.measures_max_lines=d,this.measures_hash=i,s.slice(-1)==`
`&&(s=s.slice(0,-1));let u="P:"+this.title+`
`;return u+="K:"+this.tonality+`
`,u+="M:"+this.meter+`
`,u+=`[V: V1]
`,u+=s,u}renderLeftHand(){let n="",e="",i={};for(let u=0;u<this.measures.length;u++)n+=this.measures[u].renderLeftHand(),i[this.measures[u].getIdx()]={idx:u,part:this.idx,meas:u};let r=0;this.measures.length&&(r=this.measures[0].getIdx());let s="|:",a=n.split(`
`);for(var l=0;l<a.length;l++){let u=a[l];l==a.length-1&&(u=u.slice(0,-1),u+=":|"),s+=u+`
`;let h=(a[l].match(/\|/g)||[]).length;for(let _=0;_<h;_++){let b=r+_;l==0&&(i[b].part_first_line=!0),i[b].lig=l,i[b].pos=_}r+=h}this.measures_max_lines=l,this.measures_hash=i,s.slice(-1)==`
`&&(s=s.slice(0,-1));let d=`P:
`;return d+="M:"+this.meter+`
`,d+=s,d}compute_analysis(){let n,e=this.tonality.indexOf("m")>=0,i,r;if(e){let a=xi.minorKey(this.tonality.replace("m",""));r=a.harmonic.scale,n=a.harmonic.grades}else{let a=xi.majorKey(this.tonality);r=a.scale,n=a.grades}let s="";for(let a of this.measures){let l=!1;s=a.getChordsLine();let d="",u=s.split(/(\s)/);for(let h of u){if(h=="")continue;let _=h.match(/([ABCDEFG][b#]{0,2})(.*)/);if(_==null){d+=" ";continue}let b=_[1],w=_[2];if(b==null)continue;console.log("root_tab => ",b);let S=[],L=n[r.indexOf(b)];if(w[0]=="m"){if(L==null){l=!0,console.warn("can't find chord with root : ",b," in tonality of ",this.tonality," : ",r," skipping measure");continue}L=L.toLowerCase(),w=w.slice(1)}else if(w.indexOf("dim")!=-1){if(L==null){l=!0,console.warn("can't find chord with root : ",b," in tonality of ",this.tonality," : ",r," skipping measure");continue}L=L.toLowerCase()}console.log("degrees_tab => ",S);let R=L+w;console.log("c_analysis =>",R),l?d+="  ":d+=R}a.setAnalysisLine(d),a.setBeatsFromMeter()}}};var Sa=class{constructor(){this.songId=-1,this.title="Score title",this.artist="unknown",this.album="unknown",this.transcription="",this.signature="4/4",this.tonality="C",this.style="unknown",this.listStyles=[],this.measures_per_line=4,this.price=0,this.img="",this.transpose=0,this.default_duration="1/8",this.clef="treble",this.clef_lh="bass",this.youtube_link="",this.youtube_videoId="",this.youtube_filePath="",this.renderedHeader="",this.renderedScore="",this.braid_param_roman=!1,this.braid_param_show_midi=!0,this.braid_param_show_score_chords=!0,this.braid_param_simplified_braid=!1,this.braid_param_emph_score_chords=!1,this.braid_param_emph_diatonic_scale=!1,this.braid_param_emph_one_tona=!1,this.braid_param_emph_before=!1,this.braid_param_emph_after=!1,console.log("info build !")}setPrice(n){this.price=n}getPrice(){return this.price}setImage(n){this.img=n}getImage(){return this.img}setMeasuresPerLine(n){this.measures_per_line=n}getMeasuresPerLine(){return this.measures_per_line}setTranspose(n){this.transpose=n}getTranspose(){return this.transpose}setAlbum(n){this.album=n}getAlbum(){return this.album}getSongId(){return this.songId}setSongId(n){this.songId=n}getTitle(){return this.title}setTitle(n){this.title=n}getArtist(){return this.artist}setArtist(n){this.artist=n}getTranscription(){return this.transcription}setTranscription(n){this.transcription=n}getSignature(){return this.signature}setSignature(n){this.signature=n}getDefault_duration(){return this.default_duration}setDefault_duration(n){this.default_duration=n}getClef(){return this.clef}getClef_lh(){return this.clef_lh}setClef(n){this.clef=n}setClef_lh(n){this.clef_lh=n}getTonality(){return this.tonality}setTonality(n){this.tonality=n}getStyle(){return this.style}getListStyles(){return this.listStyles}setStyle(n){this.style=n}setListStyles(n){this.listStyles=n}getYoutube_link(){return this.youtube_link}setYoutube_link(n){this.youtube_link=n}getYoutube_videoId(){return this.youtube_videoId}setYoutube_videoId(n){this.youtube_videoId=n}getYoutube_filePath(){return this.youtube_filePath}setYoutube_filePath(n){this.youtube_filePath=n}getRenderedHeader(){return this.renderedHeader}setRenderedHeader(n){this.renderedHeader=n}getRenderedScore(){return this.renderedScore}setRenderedScore(n){this.renderedScore=n}setBraid_param_roman(n){this.braid_param_roman=n}getBraid_param_roman(){return this.braid_param_roman}setBraid_param_show_midi(n){this.braid_param_show_midi=n}getBraid_param_show_midi(){return this.braid_param_show_midi}setBraid_param_show_score_chords(n){this.braid_param_show_score_chords=n}getBraid_param_show_score_chords(){return this.braid_param_show_score_chords}setBraid_param_simplified_braid(n){this.braid_param_simplified_braid=n}getBraid_param_simplified_braid(){return this.braid_param_simplified_braid}setBraid_param_emph_score_chords(n){this.braid_param_emph_score_chords=n}getBraid_param_emph_score_chords(){return this.braid_param_emph_score_chords}setBraid_param_emph_diatonic_scale(n){this.braid_param_emph_diatonic_scale=n}getBraid_param_emph_diatonic_scale(){return this.braid_param_emph_diatonic_scale}setBraid_param_emph_one_tona(n){this.braid_param_emph_one_tona=n}getBraid_param_emph_one_tona(){return this.braid_param_emph_one_tona}setBraid_param_emph_before(n){this.braid_param_emph_before=n}getBraid_param_emph_before(){return this.braid_param_emph_before}setBraid_param_emph_after(n){this.braid_param_emph_after=n}getBraid_param_emph_after(){return this.braid_param_emph_after}};var ai={production:!1,newScore:"/score/new_score",store:"/store",apiLoad2:"/loadSong2.php",apiLoad:"/loadSong.php",apiSave2:"/saveSong2.php",apiSave:"/saveSong.php",apiList:"/listSongs.php",apiDeleteSong:"/deleteSong.php",apiSearchAnalysis:"/searchAnalysis.php",apiGetChordsFromYoutube:"/api/getChords/getChordsFromYoutube.php",apiGetHarmtraceAnalysis:"/getHarmtraceAnalysis.php",apiCreateUser:"/createUser.php",apiSignIn:"/signIn.php",apiSendLink:"/api/passRecovery/sendLink",apiUserInfos:"/api/passRecovery/userInfos",apiUpdateUserPass:"/api/passRecovery/updateUserPass",apigetWavFromYoutube:"/getWavFromYoutube.php",wavfiles:"/shared/wavfiles/",serverAdress:"http://localhost:4200/",apiGetPaymentToken:"/api/payment/getToken_paypal.php",clientId_sand:"AZimGKLHyrnqLph1ieVp33nwhypiGIlkNGWXR-YpPaC4LqSZBOctlXFCCXyXcTA1P_Us1X8P4cOCPYZZ",clientId_prod:"AU9k8oJd9Ju8udnzQoEr2LEjgBbGWMRlnzWuEe4SZ6oTdmkd5vt35XgoZ63MURiko17yUtOxkI3S_pA4",apiDiscogs:"/api/discogs/discogs",apiSpotify:"/api/spotify/songInfos",apiSpotifyAnalysis:"/api/spotify/songFeatures",apiSpotifyContents:"/api/spotify/songContents",apiSpotifyReco:"/api/spotify/songReco",apiSpotifyTop:"/api/spotify/songTop"};var x7=new an("COOKIE_OPTIONS"),Vw=new an("COOKIE_WRITER");function w1(t){return t==null}function bc(t){return!w1(t)}function Aee(t){return typeof t=="string"}function C7(t,n){return n?{path:bc(n.path)?n.path:t.path,domain:bc(n.domain)?n.domain:t.domain,expires:bc(n.expires)?n.expires:t.expires,secure:bc(n.secure)?n.secure:t.secure,sameSite:bc(n.sameSite)?n.sameSite:t.sameSite,httpOnly:bc(n.httpOnly)?n.httpOnly:t.httpOnly,storeUnencoded:bc(n.storeUnencoded)?n.storeUnencoded:t.storeUnencoded}:t}function Dee(t){let n={},e="",i,r,s,a,l;if(t!==e)for(e=t,i=e.split(";"),n={},s=0;s<i.length;s++)r=i[s],a=r.indexOf("="),a>0&&(l=b7(r.substring(0,a).trim()),w1(n[l])&&(n[l]=b7(r.substring(a+1).trim())));return n}function Iee(t,n,e){let i=e?.expires,r;w1(n)?(i="Thu, 01 Jan 1970 00:00:00 GMT",r=""):r=n,Aee(i)&&(i=new Date(i));let s=e?.storeUnencoded?n:encodeURIComponent(r),a=encodeURIComponent(t)+"="+s;a+=e?.path?";path="+e.path:"",a+=e?.domain?";domain="+e.domain:"",a+=i?";expires="+i.toUTCString():"",a+=e?.sameSite?"; SameSite="+e.sameSite:"",a+=e?.secure?";secure":"",a+=e?.httpOnly?"; HttpOnly":"";let l=a.length+1;return l>4096&&console.log("Cookie '"+t+"' possibly not set or overflowed because it was too large ("+l+" > 4096 bytes)!"),a}function b7(t){try{return decodeURIComponent(t)}catch{return t}}var Rw=(()=>{class t{constructor(e={},i){this.injector=i,this.defaultOptions={path:this.injector.get(Ah,"/"),domain:void 0,expires:void 0,secure:!1,httpOnly:!1},this.options=C7(this.defaultOptions,e)}}return t.\u0275fac=function(e){return new(e||t)(ht(x7),ht(Ur))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),vu=(()=>{class t{constructor(e,i,r){this.document=e,this.optionsProvider=i,this.cookieWriterService=r,this.options=this.optionsProvider.options}hasKey(e){let i=this.get(e);return bc(i)}get(e){return this.getAll()?.[e]}getObject(e){let i=this.get(e);if(!w1(i))return i===""?{}:JSON.parse(i)}getAll(){let e=this.cookieWriterService.readAllAsString();return Dee(e)}put(e,i,r){let s=C7(this.options,r);this.cookieWriterService.write(e,i,s)}putObject(e,i,r){this.put(e,JSON.stringify(i),r)}remove(e,i){this.put(e,void 0,i)}removeAll(e){let i=this.getAll();Object.keys(i).forEach(r=>this.remove(r,e))}}return t.\u0275fac=function(e){return new(e||t)(ht(ji),ht(Rw),ht(Vw))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),Oee=(()=>{class t{constructor(e){this.document=e}readAllAsString(){return this.document.cookie||""}write(e,i,r){this.document.cookie=Iee(e,i,r)}}return t.\u0275fac=function(e){return new(e||t)(ht(ji))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function Fee(t,n,e){return new vu(t,n,e)}var w7=(()=>{class t{static withOptions(e={}){return{ngModule:t,providers:[{provide:x7,useValue:e},{provide:Vw,useClass:Oee},{provide:vu,useFactory:Fee,deps:[ji,Rw,Vw]}]}}static forRoot(e={}){return this.withOptions(e)}static forChild(e={}){return this.withOptions(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=yr({type:t}),t.\u0275inj=pr({providers:[Rw]}),t})();var es=(()=>{class t{constructor(e,i){this._http=e,this.cookieService=i,this.user_is_logged=new mi(!1);let r;r=this.cookieService.getObject("user"),r!=null&&r.user_pass!=null?(this.user_email=r.user_email,this.user_nick=r.user_nick,this.user_folder=r.user_folder,this.user_is_logged.next(!0),this.user_pass=r.user_pass):r!=null&&r.user_pass==null&&(this.user_email=r.user_email,this.user_nick=r.user_nick,this.user_folder=r.user_folder,this.user_is_logged.next(!1),this.user_pass=r.user_pass)}sign_up(e,i,r){let s={user_email:i,user_nick:r,user_pass:e};if(i==""||r==""||e=="")throw"userModel : create() => missing information";let a=new Un({"Content-Type":"application/json"});return this._http.post(ai.apiCreateUser,s,{responseType:"text",headers:a}).pipe(fn(l=>{try{return l=="creating user : email error"?"email error":l=="creating user : nick error"?"nick error":"signup complete"}catch{return"signup error"}}))}login(e){let i={user_email:this.user_email,user_nick:this.user_nick,user_pass:e},r=new Un({"Content-Type":"application/json"});return this._http.post(ai.apiSignIn,i,{responseType:"text",headers:r}).pipe(fn(s=>{try{let a=JSON.parse(s);if(a.hasOwnProperty("error"))switch(a.error){case"0":return"empty infos";case"-1":return"wrong email";default:return"login error"}else return this.user_nick=a.nick,this.user_email=a.email,this.user_folder=a.folder,this.user_pass=e,this.user_is_logged.next(!0),this.cookieService.putObject("user",{user_nick:this.user_nick,user_email:this.user_email,user_folder:this.user_folder,user_pass:this.user_pass}),"login ok"}catch{return"wrong pass"}}))}logout(){this.user_email="",this.user_nick="",this.user_pass="",this.user_is_logged.next(!1)}reset_password(){let e={user_email:this.user_email,adress:ai.serverAdress+"reset-password?key="},i=new Un({"Content-Type":"application/json"});return this._http.post(ai.apiSendLink,e,{responseType:"text",headers:i}).pipe(fn(r=>{try{let s=JSON.parse(r);if(s.hasOwnProperty("code"))switch(s.code){case"1":return this.cookieService.putObject("user",{user_nick:this.user_nick,user_email:this.user_email,user_folder:this.user_folder,user_pass:void 0}),"Thank you for sending e-mail.";break;case"0":return"Error while sending email.";case"-1":return"Unknown email adress.";default:return"Error while sending email."}}catch{return"Error while sending email."}}))}get_user_infos(e,i){let r={email_encrypt:e,pass_encrypt:i},s=new Un({"Content-Type":"application/json"});return this._http.post(ai.apiUserInfos,r,{responseType:"text",headers:s}).pipe(fn(a=>{try{if(a=="link error")return"link error";{let l=JSON.parse(a);return this.user_nick=l.nick,this.user_email=l.email,this.user_folder=l.folder,this.user_is_logged.next(!1),this.cookieService.putObject("user",{user_nick:this.user_nick,user_email:this.user_email,user_folder:this.user_folder,user_pass:void 0}),"get infos ok"}}catch{return"infos error"}}))}update_user_pass(e){let i={user_email:this.user_email,user_pass:e};if(this.user_email==""||e=="")throw"userModel : update() => missing information";let r=new Un({"Content-Type":"application/json"});return this._http.post(ai.apiUpdateUserPass,i,{responseType:"text",headers:r}).pipe(fn(s=>(s="User "+this.get_user_email()+" updated successfully.")?(this.user_is_logged.next(!1),"Updated"):"Error"))}is_logged(){return this.user_is_logged}getCookie(e){return this.cookieService.get(e)}addResults(e,i){let r=this.cookieService.getObject("results");r||(r={}),r.hasOwnProperty(e)||(r[e]=[]);let s=new Date,a=s.getUTCMonth()+1+"-"+s.getUTCDate()+"-"+s.getUTCFullYear();return r[e].length&&r[e][r[e].length-1].hasOwnProperty(a)?(console.log("MEAN OF ",r[e][r[e].length-1][a],"and ",i),r[e][r[e].length-1][a]=(r[e][r[e].length-1][a]+i)/2):r[e].push({[a]:i}),this.cookieService.putObject("results",r),r}clearAllResults(){this.cookieService.putObject("results",{})}clearResults(e){let i=this.cookieService.getObject("results");i[e]=[],this.cookieService.putObject("results",i)}getResults(){return this.cookieService.getObject("results")||this.cookieService.putObject("results",{}),this.cookieService.getObject("results")}get_folder(){return this.user_folder}get_nick(){return this.user_nick}set_user_nick(e){this.user_nick=e}get_user_email(){return this.user_email}set_user_email(e){this.user_email=e}get_user(){return{userNick:this.user_nick,user_email:this.user_email,user_folder:this.user_folder,user_pass:this.user_pass,is_logged:this.is_logged().getValue()}}static{this.\u0275fac=function(i){return new(i||t)(ht(Xi),ht(vu))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Hn=(()=>{class t{constructor(e,i,r){this._http=e,this.router=i,this.usr=r,this.infos=new Sa,this.hash_idx=0,this.parts=[],this.chordsInScore={}}ngOnDestroy(){this.chordsInScore={}}reset(){console.log("%c SONG MODEL : Reset()","color:red; font-size:20px;"),this.infos=new Sa,this.parts=[],delete this.measures_hash}save(){let e={infos:this.infos||"undefined",parts:this.parts||"undefined",chordsInScore:this.chordsInScore||"undefined",params:this.infos||"undefined",usr:this.usr.get_user()};for(let r=0;r<e.parts.length;r++)delete e.parts[r].measures_hash;console.log("songModel : save() => obj => ",e);let i=new Un({"Content-Type":"application/json"});return this._http.post(ai.apiSave2,e,{responseType:"text",headers:i}).pipe(fn(r=>(this.infos.getSongId()==-1&&r!="[512] wrong title"&&this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/score/"+r])),r)))}loadScoreFromJson(e,i,r=void 0,s=void 0){if(e.hasOwnProperty("id")&&this.infos.setSongId(e.id),e.hasOwnProperty("title")&&this.infos.setTitle(e.title),e.hasOwnProperty("artist")&&this.infos.setArtist(e.artist),e.hasOwnProperty("style")&&this.infos.setStyle(e.style),e.hasOwnProperty("tonality")&&this.infos.setTonality(e.tonality),e.hasOwnProperty("signature")&&this.infos.setSignature(e.signature),e.hasOwnProperty("album")&&this.infos.setAlbum(e.album),e.hasOwnProperty("clef")&&this.infos.setClef(e.clef),e.hasOwnProperty("youtube_link")&&this.infos.setYoutube_link(e.youtube_link),e.hasOwnProperty("youtube_filePath")&&this.infos.setYoutube_filePath(e.youtube_filePath),e.hasOwnProperty("youtube_videoId")&&this.infos.setYoutube_videoId(e.youtube_videoId),e.hasOwnProperty("transcription")&&this.infos.setTranscription(e.transcription),e.hasOwnProperty("price")&&this.infos.setPrice(e.price),e.hasOwnProperty("img")&&this.infos.setImage(e.img),s&&s.hasOwnProperty("braid_param_roman")&&this.infos.setBraid_param_roman(s.braid_param_roman),s&&s.hasOwnProperty("braid_param_show_midi")&&this.infos.setBraid_param_show_midi(s.braid_param_show_midi),s&&s.hasOwnProperty("braid_param_show_score_chords")&&this.infos.setBraid_param_show_score_chords(s.braid_param_show_score_chords),s&&s.hasOwnProperty("braid_param_simplified_braid")&&this.infos.setBraid_param_simplified_braid(s.braid_param_simplified_braid),s&&s.hasOwnProperty("braid_param_emph_score_chords")&&this.infos.setBraid_param_emph_score_chords(s.braid_param_emph_score_chords),s&&s.hasOwnProperty("braid_param_emph_diatonic_scale")&&this.infos.setBraid_param_emph_diatonic_scale(s.braid_param_emph_diatonic_scale),s&&s.hasOwnProperty("braid_param_emph_one_tona")&&this.infos.setBraid_param_emph_one_tona(s.braid_param_emph_one_tona),s&&s.hasOwnProperty("braid_param_emph_before")&&this.infos.setBraid_param_emph_before(s.braid_param_emph_before),s&&s.hasOwnProperty("braid_param_emph_after")&&this.infos.setBraid_param_emph_after(s.braid_param_emph_after),this.parts=[],i==null){console.warn("no parts found !");return}for(let a=0;a<i.length;a++){let l=new Ma;i[a].hasOwnProperty("title")&&l.setTitle(i[a].title),i[a].hasOwnProperty("tonality")&&l.setTonality(i[a].tonality),i[a].hasOwnProperty("meter")&&l.setMeter(i[a].meter);for(let d=0;d<i[a].measures.length;d++){let u=new bs;i[a].measures[d].hasOwnProperty("audioRegion")&&u.setAudioRegion(i[a].measures[d].audioRegion),i[a].measures[d].hasOwnProperty("eol")&&u.setEol(i[a].measures[d].eol),i[a].measures[d].hasOwnProperty("meter")&&u.setMeter(i[a].measures[d].meter),i[a].measures[d].hasOwnProperty("idx")&&u.setIdx(i[a].measures[d].idx),i[a].measures[d].hasOwnProperty("chords")&&(u.chords=i[a].measures[d].chords),i[a].measures[d].hasOwnProperty("analysis")&&(u.analysis=i[a].measures[d].analysis),i[a].measures[d].hasOwnProperty("lyrics")&&(u.lyrics=i[a].measures[d].lyrics),i[a].measures[d].hasOwnProperty("notes")&&(u.notes=i[a].measures[d].notes),i[a].measures[d].hasOwnProperty("notes_lh")&&(u.notes_lh=i[a].measures[d].notes_lh),i[a].measures[d].hasOwnProperty("scale")&&(i[a].measures[d].scale.full_scale.empty||(u.scale=i[a].measures[d].scale));let h=i[a].measures[d].beats;for(let _=0;_<h.length;_++){let b=new Zo;b.setChord(h[_].chord),b.setAnalysis(h[_].analysis),b.setNotes(h[_].notes),h[_].hasOwnProperty("notes_lh")&&b.setNotes_lh(h[_].notes_lh),b.setLyrics(h[_].lyrics),h[_].hasOwnProperty("audioRegion")?b.setAudioRegion(h[_].audioRegion):b.setAudioRegion({start:null,end:null}),u.addBeat(b)}l.addMeasure(u)}this.parts.push(l)}return r?this.setChordsInScore(r):this.chordsInScore={},this.reindex(),this}fetch(e=""){console.log("************************************fetching : "+e+" *******************************"),this.reset();let i={id:e},r=new Un({"Content-Type":"application/json"});return this._http.post(ai.apiLoad2,i,{responseType:"text",headers:r}).pipe(fn(s=>{s=s.replace("	","");let a=JSON.parse(s);return this.loadScoreFromJson(a.infos,a.parts,a.chordsInScore,a.params),this}))}renderHeader(e="both"){let i="";return i+=`%%stretchlast 1
`,i+=`%%staffsep       70
`,i+=`%%barnumbers   0
`,i+="T:"+this.infos.getTitle()+`
`,i+="A:"+this.infos.getArtist()+`
`,i+="Z:"+this.infos.getTranscription()+`
`,i+="M:"+this.infos.getSignature()+`
`,i+="L:"+this.infos.getDefault_duration()+`
`,(e=="G"||e=="both")&&(i+="V:V1 clef="+this.infos.getClef()+`
`),(e=="F"||e=="both")&&(i+="V:V2 clef="+this.infos.getClef_lh()+`
`),i+="K:"+this.infos.getTonality()+`
`,i}render(e=!0){let i;return e?i=this.renderWithLyrics():i=this.renderWithoutLyrics(),i}renderWithoutLyrics(){}renderWithLyrics(){let e=this.renderHeader(),i={},r="",s=0,a=0,l="";for(let u=0;u<this.parts.length;u++){l==this.parts[u].getTonality()?r+=this.parts[u].renderWithLyrics().replace(/K:[ABCDEFG][#b]?[m]?\n/,"")+`
`:(r+=this.parts[u].renderWithLyrics()+`
`,l=this.parts[u].getTonality());let h=this.parts[u].getMeasures_hash(),_=Object.getOwnPropertyNames(h);for(let b=0;b<_.length;b++)a++;s+=this.parts[u].getMeasures_max_lines(),i=Et(Et({},i),h)}this.measures_hash=i;let d=e+r;return this.infos.setRenderedHeader(e),this.infos.setRenderedScore(r),console.log("%c RENDER","color:green;font-size:20px;"),d}renderWithLeftHand(){debugger;let e=this.renderHeader(),i={},r="",s=0,a=0;for(let u=0;u<this.parts.length;u++){r+=this.parts[u].renderWithLeftHand()+`
`;let h=this.parts[u].getMeasures_hash(),_=Object.getOwnPropertyNames(h);for(let b=0;b<_.length;b++)h[_[b]].lig=h[_[b]].lig+s,h[_[b]].idx=a,a++;s+=this.parts[u].getMeasures_max_lines(),i=Et(Et({},i),h)}this.measures_hash=i;let l=this.renderLeftHand(),d=e+r+l;return this.infos.setRenderedHeader(e),this.infos.setRenderedScore(r+l),console.log("out => ",d),d}renderLeftHand(){let e={},i=`[V:V2]
`,r=0,s=0;for(let l=0;l<this.parts.length;l++)i+=this.parts[l].renderLeftHand()+`
`;let a=i;return console.log("out LH => ",a),a}getPrice(){return this.infos.getPrice()}setPrice(e){this.infos.setPrice(e)}getImage(){return this.infos.getImage()}setImage(e){this.infos.setImage(e)}getTranspose(){return this.infos.getTranspose()}setTranspose(e){this.infos.setTranspose(e)}getLastMeasureOfPart(e){return this.parts[e].getLastMeasure()}getTitle(){return this.infos.getTitle()}getArtist(){return this.infos.getArtist()}getStyle(){return this.infos.getStyle()}getListStyles(){return this.infos.getListStyles()}getAlbum(){return this.infos.getAlbum()}getTranscription(){return this.infos.getTranscription()}getSignature(){return this.infos.getSignature()}getDefault_duration(){return this.infos.getDefault_duration()}getClef(){return this.infos.getClef()}setClef(e){if(e!="treble"&&e!="bass")throw"songModel : setClef => bad assignement "+e;this.infos.setClef(e)}getTonality(){return this.infos.getTonality()}getInfos(){return this.infos}getChordsInScore(){return this.chordsInScore}getMeasures_hash(){return this.measures_hash}getYoutube(){let e=this.infos.getYoutube_link(),i=this.infos.getYoutube_filePath(),r=this.infos.getYoutube_videoId();return{link:e,filePath:i,videoId:r}}setYoutube(e){this.infos.setYoutube_link(e.link),this.infos.setYoutube_filePath(e.filePath),this.infos.setYoutube_videoId(e.videoId)}setTitle(e){this.infos.setTitle(e)}setArtist(e){this.infos.setArtist(e)}setStyle(e){this.infos.setStyle(e)}setListStyles(e){this.infos.setListStyles(e)}setAlbum(e){this.infos.setAlbum(e)}setTranscription(e){this.infos.setTranscription(e)}setSignature(e){this.infos.setSignature(e)}setDefault_duration(e){this.infos.setDefault_duration(e)}setTonality(e){this.infos.setTonality(e)}setChordsInScore(e){this.chordsInScore=e}addMeasureToPart(e,i){console.log("addMeasureToPart"),this.parts[e].addMeasure(i),this.reindex()}copyMeasure(e){let i=this.createNewMeasure();return i.setEol(e.getEol()),i.setIdx(e.getIdx()),i.setMeter(e.getMeter()),i.setCollapse(e.getCollapse()),e.hasOwnProperty("audioRegion")&&i.setAudioRegion(e.getAudioRegion().copy()),i.notes=e.notes,i.notes_lh=e.notes_lh,i.lyrics=e.lyrics,i.chords=e.chords,i.analysis=e.analysis,i.setBeatsFromMeter(),i}copyPart(e){let i=new Ma;i.setTitle(e.getTitle()),i.setTonality(e.getTonality()),i.setMeter(e.getMeter());let r=[],s=e.getMeasures();for(let a=0;a<s.length;a++)r.push(this.copyMeasure(s[a]));return i.setMeasures(r),i}insertMeasureInPart(e,i,r,s=!0){if(console.log("insertMeasureInPart "),s)this.parts[e].addMeasureAfter(i,r),this.reindex();else{let a=this.getPart(e).getMeasure(i).getIdx(),l={id:this.hash_idx,idx:a+1,part:e,meas:i+1};r.setId(l.id),this.measures_hash[this.hash_idx]=l,this.hash_idx++,r.setIdx(a+1),this.parts[e].addMeasureAfter(i,r,l)}}createNewMeasure(){return new bs}deleteMeasure(e,i){this.parts[e].deleteMeasure(i),this.parts[e].getMeasures().length||this.deletePart(e),this.reindex()}deleteMeasuresByIds(e){for(let i of e)for(let r=0;r<this.parts.length;r++)if(this.parts[r].getMeasures_hash().hasOwnProperty(i)){this.parts[r].deleteMeasureById(i),this.parts[r].getMeasures().length||this.deletePart(r);break}this.reindex()}addPart(e){return e.setTonality(this.infos.getTonality()),this.parts.push(e),this.reindex(),e}insertPartAfter(e,i){return i.setTonality(this.infos.getTonality()),this.parts.splice(e+1,0,i),this.reindex(),i}transformMeasureInPart(e){let i=this.measures_hash[e].part,r=this.measures_hash[e].meas,s=this.measures_hash[e].idx;if(r==0){this.transformPartInMeasure(i);return}let a=this.parts[i].getMeasures().splice(r),l=this.addNextPart(s,a[0].getAudioRegion().start,!1);a[0]&&a[0].setEol(!1);for(let d of a)l.addMeasure(d);this.reindex()}transformPartInMeasure(e){if(e==0){console.warn("Warning : transformPartInMeasure() => cant transform part 1 in measure...");return}let i=this.parts[e].getMeasures();this.parts.splice(e,1);let r=this.parts[e-1];i[0]&&i[0].setEol(!0);for(let s of i)r.addMeasure(s);this.reindex()}deletePart(e){this.parts.splice(e,1),this.reindex()}addNewPart(){let e=new Ma;return this.parts.push(e),this.reindex(),e}removePart(e){if(e>this.parts.length-1)throw"Songmodel : removePart() => cant remove idx : "+e;this.parts=this.parts.slice(e,1),this.reindex()}getParts(){return this.parts}getPart(e){return this.parts[e]}getMeasureByPosition(e){let i=this.measures_hash[e];return i==null?null:this.getPart(i.part).getMeasure(i.meas)}getPreviousMeasureById(e){let i=this.measures_hash[e].part,r=this.measures_hash[e].meas,s=null;return r-1<0?i-1<0?console.warn("getPreviousMeasureById() : no previous measure."):s=this.parts[i-1].getLastMeasure():s=this.parts[i].getMeasure(r-1),s}getNextMeasureById(e){let i=this.measures_hash[e].part,r=this.measures_hash[e].meas,s=null;return r+1>=this.parts[i].getMeasures().length?i+1>=this.parts.length?console.warn("getNextMeasureById() : no next measure."):s=this.parts[i+1].getMeasure(0):s=this.parts[i].getMeasure(r+1),s}getMeasureById(e){let i=this.measures_hash[e].part,r=this.measures_hash[e].meas;return this.parts[i].getMeasure(r)}getMeasureByIdx(e){let i=e;for(let r of this.parts){let s=r.getMeasures().length;if(i-=s,i<0)return r.getMeasure(s-Math.abs(i))}return null}getMeasureIdxById(e){let i=0,r=this.measures_hash[e];if(r.part==0)i=r.meas;else{for(let s=0;s<r.part;s++)i+=this.parts[s].getMeasures().length;i+=r.meas}return i-1}deleteLastPart(){this.parts=this.parts.slice(0,-1),this.reindex()}addAudioRegionAtTime(e,i,r){let s=this.addAudioRegion(e,i),a=s.end-s.start;return this.parts[e].getMeasure(i).setAudioRegionStart(r),this.parts[e].getMeasure(i).setAudioRegionEnd(r+a),s}addAudioRegion(e,i){if(this.parts[e].getMeasure(i).hasOwnProperty("audioRegion"))return console.warn("region already has audio region !"),this.parts[e].getMeasure(i).getAudioRegion();let r=0,s=3,a=!1,l=e,d=i;for(;l>=0;){for(;d>=0;){if(this.parts[l].getMeasure(d).hasOwnProperty("audioRegion")){let u=this.parts[l].getMeasure(d).getAudioRegion();r=u.end,s=r+(u.end-u.start),a=!0;break}d--}if(l--,l<0||a)break;d=this.parts[l].getMeasures().length-1}return this.parts[e].getMeasure(i).setAudioRegion({start:r,end:s}),{measure_nb:this.parts[e].getMeasure(i).getIdx(),start:r,end:s}}mNumberToPartIdx(e){let i=e;if(this.parts.length==1&&this.parts[0].getMeasures().length==0)return{part:-1,measure:-1};for(var r=0;r<this.parts.length;r++){let s=this.parts[r].getMeasures();if(i>s.length){i-=s.length;continue}else break}return{part:r,measure:i-1}}updateAudioRegion(e,i){let r=this.measures_hash[e],s=this.parts[r.part].getMeasure(r.meas);s.setAudioRegion(i),s.setBeatsFromMeter()}deleteRegion(e){let i=this.mNumberToPartIdx(e);this.parts[i.part].getMeasure(i.measure).removeAudioRegion()}reindex_part(e,i=0){this.parts[e].setIdx(e);let r={},s=this.parts[e].getMeasures();for(let a=0;a<s.length;a++)this.parts[e].getMeasure(a).setIdx(i),this.parts[e].getMeasure(a).setId(i),this.measures_hash[i]={id:i,idx:i,part:e,meas:a},r[i]={id:i,idx:i,part:e,meas:a},i++;return this.parts[e].setMeasures_hash(r),i}reindex(){console.log("%cREINDEX !","background-color:purple;");let e=0;this.measures_hash={};for(let i=0;i<this.parts.length;i++)e=this.reindex_part(i,e);this.hash_idx=e}addNextRegion(e,i,r=!0){let s=this.measures_hash[e];if((s.meas==-1||s.part==-1)&&(s={part:this.parts.length-1,measure:this.parts[this.parts.length-1].getMeasures().length-1},console.warn("Error, cant get next region !")),!this.parts.length){console.warn("Error, no part to add to. First add a part.");return}let a=new bs,l=new Zo;a.addBeat(l),this.insertMeasureInPart(s.part,s.meas,a,r);let d=this.getNextMeasureById(a.getId()),u=this.getPreviousMeasureById(a.getId()),h;d?h=d.getAudioRegion().start:u&&(h=i+u.getAudioDuration()),u.setAudioRegion({start:u.getAudioRegion().start,end:i}),a.setAudioRegion({start:i,end:h}),this.measures_hash[a.getId()].meas%this.infos.getMeasuresPerLine()==0&&a.setEol(!0);let _=a.getAudioRegion();return{id:a.getId(),start:i,end:h}}addNextPart(e,i,r=!0){let s=this.measures_hash[e];this.parts.length||(console.warn("warning songModel : part is empty"),s={part:0,measure:0}),(!s||s.measure==-1||s.part==-1)&&(console.warn("error songModel : cant get next region ! adding at the end..."),s={part:this.parts.length,measure:this.parts[this.parts.length].getMeasures().length});let a=new Ma;if(this.insertPartAfter(s.part,a),!r)return a;let l=a.addNewMeasure();l.addNewBeat(),this.reindex(),this.addAudioRegionAtTime(s.part+1,0,i);let d=l.getAudioRegion();return{id:l.getIdx(),start:d.start,end:d.end}}analyse_part(e=-1){if(e>=this.parts.length)throw"Song model error : analyse_parts() => invalid part number.";let i=!1;if(e==-1&&(i=!0),i){for(let r=0;r<this.parts.length;r++)this.parts[r].compute_analysis();console.log("COMPUTE ANALYSIS DONE")}}analyseScore(){let e=this.getParts();this.chordsInScore={};for(let i of e){let r=i.getMeasures();for(let s of r){let a=this.analyseChordLine(s.getChordsLine());for(let l of a)this.chordsInScore.hasOwnProperty(l.symbol)||(this.chordsInScore[l.symbol]=l)}}console.log(this.chordsInScore)}analyseChordLine(e){let i=[];if(!e||e=="")return[];let r=e.split(" ");for(let s of r)if(s.indexOf("/")!=-1){let a=s.split("/"),l=qn.get(a[0]);l.root=a[1],l.symbol+="/"+a[1],l.name+=" over "+a[1],l.empty?console.warn("Unknown chord : ",s):i.push(l)}else{let a=qn.get(s);a.empty?console.warn("Unknown chord : ",s):i.push(a)}return i}paste_only_chords(e,i){if(!e.length)throw"error paste_only_chords() a is empty.";if(!i.length)throw"error paste_only_chords() b is empty.";let r=i[0].getType()=="part",s=i[0].getType()=="measure",a=e[0].getType()=="part",l=e[0].getType()=="measure";if(!r&&!s)throw"error: paste_only_chords() => selection type unknown";if(!a&&!l)throw"error: paste_only_chords() => buffer type unknown";if(r&&!a||s&&!l)throw"error: paste_only_chords() => buffer and selection are not the same type";if(a&&r){let d=e[0],u=i[0];u.title=d.title,u.measures_max_lines=d.measures_max_lines,u.meter=d.meter,u.title=d.title,u.tonality=d.tonality;let h=d.getMeasures(),_=u.getMeasures();if(h.length!=_.length)throw"error: paste_only_chords() => selection and buffer dont have the same number of measures.";for(let b=0;b<h.length;b++)this.copy_measure_chords(h[b],_[b])}else if(l&&s){let d=[],u=this.getMeasures_hash(),h=u[i[0].getIdx()];for(let _=0;_<e.length;_++){if(h==null)throw"error paste_only_chords() => undefined hash";if(h.part!=u[i[0].getIdx()].part)debugger;let b=this.getPart(h.part).getMeasure(h.meas);d.push(b),h=u[b.getIdx()+1]}if(e.length!=d.length)throw"error: paste_only_chords() => selection and buffer dont have the same number of measures.";for(let _=0;_<e.length;_++)this.copy_measure_chords(e[_],d[_])}}copy_measure_chords(e,i){if(e.getType()!="measure"||i.getType()!="measure")throw"error: copy_measure_chords() => selection or buffer is not of type 'measure'.";i.chords=e.chords,i.collapse=e.collapse,i.eol=e.eol,i.lyrics=e.lyrics,i.analysis=e.analysis,i.setMeter(e.getMeter()),i.notes=e.notes,i.notes_lh=e.notes_lh,i.setBeats(e.getBeats())}get_last_measure_at_time(e){if(!this.parts.length)return;let i=this.parts[0].getMeasures()[0];for(let r=0;r<this.parts.length;r++){let s=this.parts[r].getMeasures();for(let a=0;a<s.length;i=s[a],a++){let l=s[a].getAudioRegion();if(l&&l.start>e)return i}}return i}get_next_beat_at_time(e,i){let r=this.measures_hash[i].meas,s=this.measures_hash[i].part,a={part:s,measure:r,beat:0},l=!1;for(let d=s;d<this.parts.length;d++,r=0){let u=this.parts[d].getMeasures();for(let h=r;h<u.length;h++){a={part:d,measure:h,beat:0};let _=u[h].getBeats();if(_[0].getAudioRegion().start)for(let b=0;b<_.length&&(e<_[b].getAudioRegion().end&&(a={part:d,measure:h,beat:b},l=!0),!l);b++);else e<u[h].getAudioRegion().end&&(a={part:d,measure:h,beat:0},l=!0);if(l)break}if(l)break}return{measure:this.parts[a.part].getMeasure(a.measure),beat:a.beat}}get_previous_beat_at_time(e,i){let r=this.measures_hash[i].meas,s=this.measures_hash[i].part,a={part:s,measure:r,beat:0},l=!1;for(let d=s;d>=0;d--,r=d==-1?this.parts[0].getMeasures().length-1:this.parts[d].getMeasures().length-1){let u=this.parts[d].getMeasures();for(let h=r;h>=0;h--){a={part:d,measure:h,beat:0};let _=u[h].getBeats();if(_[0].getAudioRegion().start)for(let b=_.length-1;b>0&&(e>_[b].getAudioRegion().start&&(a={part:d,measure:h,beat:b},l=!0),!l);b--);else e>u[h].getAudioRegion().start&&(a={part:d,measure:h,beat:0},l=!0);if(l)break}if(l)break}return{measure:this.parts[a.part].getMeasure(a.measure),beat:a.beat}}get_last_beat_at_time(e){if(!this.parts.length)return;let i=this.parts[0].getMeasures()[0];for(let r=0;r<this.parts.length;r++){let s=this.parts[r].getMeasures();for(let a=0;a<s.length;i=s[a],a++){let l=s[a].getAudioRegion();if(l&&l.start>e)return i}}return i}static{this.\u0275fac=function(i){return new(i||t)(ht(Xi),ht(wr),ht(es))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac})}}return t})();var yi=(()=>{class t{constructor(){this.subBeat_div=240,this.beatDiv=0,this.subBeat=0,this.beat=0,this.measure=0,this.nb_subbeat_per_beat=4,this.nb_beat_per_measure=4,this.bpms=6e4/40,this.bpm=40,this.clock_ms=0,this.state="stopped",this.subBeatChange=new yn,this.subBeatChange.next(this.subBeat),this.beatChange=new yn,this.beatChange.next({beat:this.beat,silent:!0,measure:this.measure}),this.measureChange=new yn,this.measureChange.next(this.measure),this.nb_beat_per_measureChange=new yn,this.nb_beat_per_measureChange.next(this.nb_beat_per_measure),this.nb_subbeat_per_beatChange=new yn,this.nb_subbeat_per_beatChange.next(this.nb_subbeat_per_beat),this.bpmChange=new yn,this.bpmChange.next(this.bpm),this.chrono=new Worker("./chrono.worker",{type:"module"}),this.chrono.postMessage({interval:6}),this.clockO=new $n(e=>{this.chrono.onmessage=({data:i})=>{this.clock_ms+=i,e.next(i)}}),this.clockO.subscribe(e=>{e==0?(this.beatDiv=0,this.beat==0&&this.subBeat==0?this.measureChange.next(this.measure):this.subBeat==0?this.beatChange.next({beat:this.beat,silent:!0,measure:this.measure}):this.subBeatChange.next(this.subBeat)):this.incMs(e)},e=>{console.log("Error : ",e)})}ngOnInit(){}ngOnDestroy(){this.stop(),this.clockO.unsubscribe()}play_pause(){if(this.state=="stopped"||this.state=="paused"){this.state="playing";var e=new AudioContext;this.chrono.postMessage("start")}else this.state=="playing"&&(this.chrono.postMessage("stop"),this.state="paused")}stop(e=1,i=!1){this.chrono.postMessage("stop"),this.clock_ms=0,i?this.reset_silent(e):this.reset(e),this.state="stopped"}setBeat(e,i){i||(i=!1),e<960&&e>=-1&&(this.beat=e),this.beatChange.next({beat:this.beat,silent:i,measure:this.measure})}getSubBeat(){return this.subBeat}getBeat(){return this.beat}incMs(e){this.incBeatDiv(this.ms_to_beat_div(e))}incBeatDiv(e=1){this.beatDiv+=e,this.beatDiv>=960/this.nb_subbeat_per_beat&&(this.beatDiv=0,this.incSubBeat(1))}incSubBeat(e=1){this.subBeat+=e,this.subBeat>=this.nb_subbeat_per_beat&&(this.subBeat=0,this.incBeat(1)),this.subBeatChange.next(this.subBeat)}incBeat(e){this.beat+=e,this.beat>=this.nb_beat_per_measure&&(this.beat=0,this.incMeasure(1)),this.beatChange.next({beat:this.beat,silent:!1,measure:this.measure})}refreshBeat(){this.beatChange.next({beat:this.beat,silent:!1,measure:this.measure})}incMeasure(e){this.measure+=e,this.measureChange.next(this.measure)}getMeasure(){return this.measure}setMeasure(e,i,r){this.measure=e,r||this.measureChange.next(this.measure)}setNb_beat_per_measure(e){this.nb_beat_per_measure=e,this.nb_beat_per_measureChange.next(this.nb_beat_per_measure)}setNb_subbeat_per_beat(e){this.nb_subbeat_per_beat=e,this.nb_subbeat_per_beatChange.next(this.nb_subbeat_per_beat)}getNb_subbeat_per_beat(){return this.nb_subbeat_per_beat}reset(e=1){this.subBeat=0,e==0?(this.beat=-1,this.measure=-1,this.subBeat=0):e==1&&(this.beat=0,this.measure=0,this.subBeat=0),this.subBeatChange.next(this.subBeat),this.beatChange.next({beat:this.beat,silent:!0,measure:this.measure}),this.measureChange.next(this.measure),this.clock_ms=0}reset_silent(e=1){this.subBeat=0,e==0?(this.beat=-1,this.measure=-1,this.subBeat=0):e==1&&(this.beat=0,this.measure=0,this.subBeat=0),this.clock_ms=0}ms_to_beat_div(e){return e*960/this.bpms}set_bpms(){this.bpms=6e4/this.bpm}set_bpm(e){this.bpm=e,this.set_bpms(),this.bpmChange.next(this.bpm)}getStatus(){return this.state}isPlaying(){return this.state=="playing"}setState(e="stopped"){this.state=e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var nr=(()=>{class t{constructor(e,i){this.sm=e,this.transport=i,this.selected_list=new yn,this.selected_Update$=this.selected_list.asObservable(),this.selection=new Array,this.scale=new yn,this.selection=[],this.selected_list.next(this.selection)}ngOnDestroy(){console.log("%c SELECTION MODEL : OnDestroy()","color:red; font-size:20px;"),this.reset()}reset(){this.selection=[],this.selected_list.next(this.selection)}getSelection(){return this.selection}setSelection(e,i){this.selection=e,e[0]==null&&(e=[]),this.selected_list.next(this.selection)}addSelection(e){this.selection.push(e),this.selected_list.next(this.selection)}removeFromSelection(e){for(let i=0;i<this.selection.length;i++)this.selection[i].id==e.id&&this.selection.splice(i,1);this.selected_list.next(this.selection)}add_or_remove_Selection(e){let i=!1;for(let r of this.selection)r.id==e.id&&(i=!0);i&&this.selection.length!=1?this.removeFromSelection(e):this.addSelection(e),console.log("is_already_selected => ",i)}select_previous_measure(){let e;return this.selection.length?(this.selection[0].getType()=="part"&&console.warn("cant select part for now"),e=this.sm.getPreviousMeasureById(this.selection[0].getId()),e&&(this.selection=[e],this.selected_list.next(this.selection),this.transport.setMeasure(this.selection[0].getIdx()),this.transport.setBeat(0))):(this.select_first_measure(),this.transport.setBeat(0)),e}select_next_measure(){let e;return this.selection.length?(this.selection[0].getType()=="part"&&console.warn("cant select part for now"),e=this.sm.getNextMeasureById(this.selection[0].getId()),e&&(this.selection=[e],this.selected_list.next(this.selection),this.transport.setMeasure(this.selection[0].getIdx()),this.transport.setBeat(0))):(this.select_first_measure(),this.transport.setBeat(0)),e}select_previous_part(){let e;if(!this.selection.length)this.select_first_measure();else{if(!this.sm.getMeasures_hash().hasOwnProperty(this.selection[0].getIdx()-1)){console.warn("error cant select previous part (1)");return}let i=this.sm.getMeasures_hash()[this.selection[0].id],r=this.sm.getPart(i.part-1);r==null&&(this.sm.getPart(i.part),console.warn("error cant select previous Part => getting current part begining."),r=this.sm.getPart(i.part)),e=r.getMeasure(0),this.selection=[e],this.selected_list.next(this.selection)}return e}select_next_part(){let e;if(!this.selection.length)this.select_first_measure();else{if(!this.sm.getMeasures_hash().hasOwnProperty(this.selection[0].getIdx())){console.warn("error cant select next part (2)");return}let i=this.sm.getMeasures_hash()[this.selection[0].id],r=this.sm.getPart(i.part+1);if(r==null){console.warn("error cant select next Part (2)");return}e=r.getMeasure(0),this.selection=[e],this.selected_list.next(this.selection)}return e}select_first_measure(){if(!this.sm.getPart(0)){console.warn("Error, no first measure to select.");return}let e=this.sm.getPart(0).getMeasure(0);return this.selection.push(e),this.selected_list.next(this.selection),e}select_part(e){this.selection=[this.sm.getPart(e).getMeasure(0)],this.selected_list.next(this.selection)}select_all_part(e){this.selection=this.sm.getPart(e).getMeasures(),this.selected_list.next(this.selection)}select_current_part(){if(!this.selection.length){console.warn("select_current_part() => no measure selected.");return}if(this.selection[0].getType()=="measure"){let e=this.sm.getMeasures_hash()[this.selection[0].id];this.select_all_part(e.part)}else this.selection[0].getType()=="part"}deleteSelection(){let e=this.sm.getMeasures_hash(),i;if(this.selection.length==0)return;let r=this.sm.getNextMeasureById(this.selection[this.selection.length-1].getId());r||(r=this.sm.getPreviousMeasureById(this.selection[0].getId()));for(let s=this.selection.length-1;s>=0;s--){i=e[this.selection[s].getId()];let a=i.meas,l=i.part;console.log("Deleting measure at part : ",l," measure :",a),this.sm.deleteMeasure(l,i.meas)}return this.setSelection([r]),r}getUpdateScale(){return this.scale.asObservable()}updateSelection(){this.selected_list.next(this.selection)}static{this.\u0275fac=function(i){return new(i||t)(ht(Hn),ht(yi))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ci=(()=>{class t{constructor(e){this.cookie=e,this.autoScroll=!0,this.follow=!0,this.minimalRendering=!1,this.displayMode="chords",this.editor_visible=!1,this.metro_visible=!1,this.metroVolume=.6,this.dico_visible=!1,this.options_visible=!1,this.chordsBrowse_visible=!1,this.tutorial_skipped=!1,this.midi_input_selected="",this.control_input_selected="",this.assigned_controls=[],this.circle_visible=!0,this.fifths_visible=!1,this.braid_visible=!0,this.midi_is_guitar=!1,this.display_fretboard=!1,this.display_piano=!1,this.display_audio=!0,this.display_chordstrip=!1,this.tonalityLockedToScore=!1,this.braid_is_roman=!1,this.tonality_button_always_open=!1,this.emphasis_chords=!1,this.emphasis_scale=!1,this.braid_simpler=!1,this.braid_one_tona=!1,this.midi_highlight_visible=!0,this.score_highlight_visible=!0,this.novaxe_notation_on=!1,this.browse_dislplay_list=!1,this.letters_Numbers_sync=!0,this.display_midi_chord=!1,this.displayNotesMode="numbers",this.global_show_score_chords=!0,this.displayNotesMode_SUBJ=new yn,this.displayNotesMode_SUBJ_update$=this.displayNotesMode_SUBJ.asObservable(),this.global_show_score_chords_SUBJ=new yn,this.global_show_score_chords_SUBJ$=this.global_show_score_chords_SUBJ.asObservable(),this.letters_numbers_sync_subj=new yn,this.letters_numbers_sync_update$=this.letters_numbers_sync_subj.asObservable(),this.loadFromCookie()||this.saveInCookie(),this.letters_numbers_sync_subj.next(this.letters_Numbers_sync)}isEditor_visible(){return this.editor_visible}isMetro_visible(){return this.metro_visible}isCircle_visible(){return this.circle_visible}isDico_visible(){return this.dico_visible}isOptions_visible(){return this.options_visible}isChordsBrowse_visible(){return this.chordsBrowse_visible}isFifths_visible(){return this.fifths_visible}isBraid_visible(){return this.braid_visible}isMidi_highlight_visible(){return this.midi_highlight_visible}isScore_highlight_visible(){return this.score_highlight_visible}is_midi_guitar(){return this.midi_is_guitar}set_midi_chord_display_visible(e){this.display_midi_chord=e}is_midi_chord_display_visible(){return this.display_midi_chord}is_fretboard_visible(){return this.display_fretboard}set_fretboard_visible(e){this.display_fretboard=e}is_piano_visible(){return this.display_piano}set_piano_visible(e){this.display_piano=e}is_audio_visible(){return this.display_audio}is_chordstrip_visible(){return this.display_chordstrip}set_audio_visible(e){this.display_audio=e}set_chordstrip_visible(e){this.display_chordstrip=e}setEditor_visible(e){this.editor_visible=e}setMetro_visible(e){this.metro_visible=e}setCircle_visible(e){this.circle_visible=e}setDico_visible(e){this.dico_visible=e}setOptions_visible(e){this.options_visible=e}setChordsBrowse_visible(e){this.chordsBrowse_visible=e}setFifths_visible(e){this.fifths_visible=e}setBraid_visible(e){this.braid_visible=e}setMidi_highlight_visible(e){this.midi_highlight_visible=e}setScore_highlight_visible(e){this.score_highlight_visible=e}set_midi_guitar(e){this.midi_is_guitar=e}set_browse_dislplay_list(e){this.browse_dislplay_list=e}set_letters_Numbers_sync(e){this.letters_Numbers_sync=e,this.letters_numbers_sync_subj.next(this.letters_Numbers_sync)}get_letters_Numbers_sync(){return this.letters_Numbers_sync}toggleChordsBrowse_visible(){return this.chordsBrowse_visible=!this.chordsBrowse_visible,this.chordsBrowse_visible}toggleEditor_visible(){return this.editor_visible=!this.editor_visible,this.editor_visible}toggleMetro_visible(){return this.metro_visible=!this.metro_visible,this.metro_visible}toggleCircle_visible(){return this.circle_visible=!this.circle_visible,this.circle_visible}toggleDico_visible(){return this.dico_visible=!this.dico_visible,this.dico_visible}toggleOptions_visible(){return this.options_visible=!this.options_visible,this.options_visible}is_tutorial_skipped(){return this.tutorial_skipped}toggleFifths_visible(){return this.fifths_visible=!this.fifths_visible,this.fifths_visible}toggleBraid_visible(){return this.braid_visible=!this.braid_visible,this.braid_visible}toggleNovaxeNotation(){return this.novaxe_notation_on=!this.novaxe_notation_on,this.novaxe_notation_on}getOptionsAsObject(){let e={};return e.autoScroll=this.autoScroll,e.follow=this.follow,e.minimalRendering=this.minimalRendering,e.displayMode=this.displayMode,e.tutorial_skipped=this.tutorial_skipped,e.midiInput=this.midi_input_selected,e.controlInput=this.control_input_selected,e.midiIsGuitar=this.midi_is_guitar,e.tonalityButtonAlwaysOpen=this.tonality_button_always_open,e.assignedControls=this.assigned_controls,e.display_piano=this.display_piano,e.display_fretboard=this.display_fretboard,e.novaxe_notation_on=this.novaxe_notation_on,e.browse_dislplay_list=this.browse_dislplay_list,e.letters_Numbers_sync=this.letters_Numbers_sync,e.displayNotesMode=this.displayNotesMode,e.global_show_score_chords=this.global_show_score_chords,e}setOptionsFromObject(e){e.hasOwnProperty("autoScroll")&&this.setAutoScroll(e.autoScroll),e.hasOwnProperty("follow")&&this.setFollow(e.follow),e.hasOwnProperty("minimalRendering")&&(this.minimalRendering=e.minimalRendering),e.hasOwnProperty("displayMode")&&(this.displayMode=e.displayMode),e.hasOwnProperty("tutorial_skipped")&&(this.tutorial_skipped=e.tutorial_skipped),e.hasOwnProperty("midiInput")&&(this.midi_input_selected=e.midiInput),e.hasOwnProperty("controlInput")&&(this.control_input_selected=e.controlInput),e.hasOwnProperty("midiIsGuitar")&&(this.midi_is_guitar=e.midiIsGuitar),e.hasOwnProperty("tonalityButtonAlwaysOpen")&&(this.tonality_button_always_open=e.tonalityButtonAlwaysOpen),e.hasOwnProperty("assignedControls")&&(this.assigned_controls=e.assignedControls),e.hasOwnProperty("display_piano")&&(this.display_piano=e.display_piano),e.hasOwnProperty("display_fretboard")&&(this.display_fretboard=e.display_fretboard),e.hasOwnProperty("novaxe_notation_on")&&(this.novaxe_notation_on=e.novaxe_notation_on),e.hasOwnProperty("browse_dislplay_list")&&(this.browse_dislplay_list=e.browse_dislplay_list),e.hasOwnProperty("letters_Number_sync")&&(this.letters_Numbers_sync=e.letters_Number_sync),e.hasOwnProperty("displayNotesMode")&&(this.displayNotesMode=e.displayNotesMode),e.hasOwnProperty("global_show_score_chords")&&(this.global_show_score_chords=e.global_show_score_chords)}loadFromCookie(){if(this.cookie.getObject("options"))this.setOptionsFromObject(this.cookie.getObject("options"));else return!1;return!0}saveInCookie(){this.cookie.putObject("options",this.getOptionsAsObject()),console.log("saved in cookie :)")}isAutoScroll(){return this.autoScroll}setAutoScroll(e){this.autoScroll=e}isFollowOn(){return this.follow}setFollow(e){this.follow=e}getDisplayNoteMode(){return this.displayNotesMode}setDisplayNoteMode(e){this.displayNotesMode=e}getGlobalShowScoreChords(){return this.global_show_score_chords}setGlobalShowScoreChords(e){this.global_show_score_chords=e}sendGlobalShowScoreChords(){this.global_show_score_chords_SUBJ.next(this.global_show_score_chords)}sendDisplayNoteMode(){this.displayNotesMode_SUBJ.next(this.displayNotesMode)}getDisplayMode(){return this.displayMode}setDisplayMode(e){this.displayMode=e}getMidiInputSelected(){return this.midi_input_selected}setMidiInputSelected(e){this.midi_input_selected=e}getControlInputSelected(){return this.control_input_selected}setControlInputSelected(e){this.control_input_selected=e}removeAssignedControl(e,i){try{this.assigned_controls[e].splice(i,1)}catch(r){console.warn("Bad value in removeAssignedControl !"),console.error(r)}}addAssignedControl(e,i,r){(!this.assigned_controls[e]||!this.assigned_controls[e].length)&&(this.assigned_controls[e]=[]),this.assigned_controls[e].push({number:e,control_name:i,control_action:r})}import_controls(e){this.assigned_controls=[];for(let i of e)if(i.length)for(let r of i)r.hasOwnProperty("number")&&r.hasOwnProperty("control_name")&&r.hasOwnProperty("control_action")&&(this.assigned_controls[r.number]||(this.assigned_controls[r.number]=[]),this.assigned_controls[r.number].push(r))}getAssignedControls(e=!0){return e?this.assigned_controls.filter(i=>i!=null):this.assigned_controls}isTonalityLockedToScore(){return this.tonalityLockedToScore}setTonalityLockedToScore(e){this.tonalityLockedToScore=e}is_braid_roman(){return this.braid_is_roman}set_braid_roman(e){this.braid_is_roman=e}set_tonality_button_always_open(e){return this.tonality_button_always_open=e,e}get_tonality_button_always_open(){return this.tonality_button_always_open}set_novaxe_notation_on(e){return this.novaxe_notation_on=e,e}get_novaxe_notation_on(){return this.novaxe_notation_on}set_emphasis_chords(e){this.emphasis_chords=e}set_emphasis_scale(e){this.emphasis_scale=e}set_braid_simpler(e){this.braid_simpler=e}get_braid_simpler(e){return this.braid_simpler}get_emphasis_chords(){return this.emphasis_chords}get_emphasis_scale(){return this.emphasis_scale}static{this.\u0275fac=function(i){return new(i||t)(ht(vu))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac})}}return t})();var Po=(()=>{class t{constructor(e){this.sm=e,this.abcString=new yn,this.abcString$=this.abcString.asObservable(),this.markerUpdate=new yn,this.markerUpdate$=this.markerUpdate.asObservable()}renderAbcString(e){this.abcString.next(e)}renderFromModel(){let e=this.sm.renderWithLyrics();this.renderAbcString(e)}renderFromModelWithLeftHand(){this.renderAbcString(this.sm.renderWithLeftHand())}renderMarker(e){this.markerUpdate.next(e)}changeCss(e,i){var r=$("#css-modifier-container");if(r.length==0){var r=$('<div id="css-modifier-container"></div>');r.hide(),r.appendTo($("body"))}let s=r.find('div[data-class="'+e+'"]');s.length==0&&(s=$('<div data-class="'+e+'"></div>'),s.appendTo(r)),s.html("<style>"+e+" {"+i+"}</style>")}static{this.\u0275fac=function(i){return new(i||t)(ht(Hn))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac})}}return t})();var V7=hr(S7()),R7=hr(P7()),j7=hr(k7()),G7=hr(E7());var Od=class{constructor(){this._vector=new Float32Array,this._position=0,this._frameCount=0}get vector(){return this._vector}get position(){return this._position}get startIndex(){return this._position*2}get frameCount(){return this._frameCount}get endIndex(){return(this._position+this._frameCount)*2}clear(){this.receive(this._frameCount),this.rewind()}put(n){this._frameCount+=n}putSamples(n,e,i=0){e=e||0;let r=e*2;i>=0||(i=(n.length-r)/2);let s=i*2;this.ensureCapacity(i+this._frameCount);let a=this.endIndex;this.vector.set(n.subarray(r,r+s),a),this._frameCount+=i}putBuffer(n,e,i=0){e=e||0,i>=0||(i=n.frameCount-e),this.putSamples(n.vector,n.position+e,i)}receive(n){(!(n>=0)||n>this._frameCount)&&(n=this.frameCount),this._frameCount-=n,this._position+=n}receiveSamples(n,e=0){let i=e*2,r=this.startIndex;n.set(this._vector.subarray(r,r+i)),this.receive(e)}extract(n,e=0,i=0){let r=this.startIndex+e*2,s=i*2;n.set(this._vector.subarray(r,r+s))}ensureCapacity(n=0){let e=parseInt(n*2);if(this._vector.length<e){let i=new Float32Array(e);i.set(this._vector.subarray(this.startIndex,this.endIndex)),this._vector=i,this._position=0}else this.rewind()}ensureAdditionalCapacity(n=0){this.ensureCapacity(this._frameCount+n)}rewind(){this._position>0&&(this._vector.set(this._vector.subarray(this.startIndex,this.endIndex)),this._position=0)}},M1=class{constructor(n){n?(this._inputBuffer=new Od,this._outputBuffer=new Od):this._inputBuffer=this._outputBuffer=null}get inputBuffer(){return this._inputBuffer}set inputBuffer(n){this._inputBuffer=n}get outputBuffer(){return this._outputBuffer}set outputBuffer(n){this._outputBuffer=n}clear(){this._inputBuffer.clear(),this._outputBuffer.clear()}},Uw=class t extends M1{constructor(n){super(n),this.reset(),this._rate=1}set rate(n){this._rate=n}reset(){this.slopeCount=0,this.prevSampleL=0,this.prevSampleR=0}clone(){let n=new t;return n.rate=this._rate,n}process(){let n=this._inputBuffer.frameCount;this._outputBuffer.ensureAdditionalCapacity(n/this._rate+1);let e=this.transpose(n);this._inputBuffer.receive(),this._outputBuffer.put(e)}transpose(n=0){if(n===0)return 0;let e=this._inputBuffer.vector,i=this._inputBuffer.startIndex,r=this._outputBuffer.vector,s=this._outputBuffer.endIndex,a=0,l=0;for(;this.slopeCount<1;)r[s+2*l]=(1-this.slopeCount)*this.prevSampleL+this.slopeCount*e[i],r[s+2*l+1]=(1-this.slopeCount)*this.prevSampleR+this.slopeCount*e[i+1],l=l+1,this.slopeCount+=this._rate;if(this.slopeCount-=1,n!==1)e:for(;;){for(;this.slopeCount>1;)if(this.slopeCount-=1,a=a+1,a>=n-1)break e;let d=i+2*a;r[s+2*l]=(1-this.slopeCount)*e[d]+this.slopeCount*e[d+2],r[s+2*l+1]=(1-this.slopeCount)*e[d+1]+this.slopeCount*e[d+3],l=l+1,this.slopeCount+=this._rate}return this.prevSampleL=e[i+2*n-2],this.prevSampleR=e[i+2*n-1],l}},qw=class{constructor(n){this._pipe=n}get pipe(){return this._pipe}get inputBuffer(){return this._pipe.inputBuffer}get outputBuffer(){return this._pipe.outputBuffer}fillInputBuffer(){throw new Error("fillInputBuffer() not overridden")}fillOutputBuffer(n=0){for(;this.outputBuffer.frameCount<n;){let e=16384-this.inputBuffer.frameCount;if(this.fillInputBuffer(e),this.inputBuffer.frameCount<8192*2)break;this._pipe.process()}}clear(){this._pipe.clear()}},D7=function(){},S1=class extends qw{constructor(n,e,i=D7){super(e),this.callback=i,this.sourceSound=n,this.historyBufferSize=22050,this._sourcePosition=0,this.outputBufferPosition=0,this._position=0}get position(){return this._position}set position(n){if(n>this._position)throw new RangeError("New position may not be greater than current position");let e=this.outputBufferPosition-(this._position-n);if(e<0)throw new RangeError("New position falls outside of history buffer");this.outputBufferPosition=e,this._position=n}get sourcePosition(){return this._sourcePosition}set sourcePosition(n){this.clear(),this._sourcePosition=n}onEnd(){this.callback()}fillInputBuffer(n=0){let e=new Float32Array(n*2),i=this.sourceSound.extract(e,n,this._sourcePosition);this._sourcePosition+=i,this.inputBuffer.putSamples(e,0,i)}extract(n,e=0){this.fillOutputBuffer(this.outputBufferPosition+e);let i=Math.min(e,this.outputBuffer.frameCount-this.outputBufferPosition);this.outputBuffer.extract(n,this.outputBufferPosition,i);let r=this.outputBufferPosition+i;return this.outputBufferPosition=Math.min(this.historyBufferSize,r),this.outputBuffer.receive(Math.max(r-this.historyBufferSize,0)),this._position+=i,i}handleSampleData(n){this.extract(n.data,4096)}clear(){super.clear(),this.outputBufferPosition=0}},Bee=0,Lee=Bee,Nee=0,Vee=Nee,Ree=8,T7=[[124,186,248,310,372,434,496,558,620,682,744,806,868,930,992,1054,1116,1178,1240,1302,1364,1426,1488,0],[-100,-75,-50,-25,25,50,75,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-20,-15,-10,-5,5,10,15,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-4,-3,-2,-1,1,2,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],k1=.5,I7=2,Yw=125,O7=50,F7=(O7-Yw)/(I7-k1),jee=Yw-F7*k1,Xw=25,B7=15,L7=(B7-Xw)/(I7-k1),Gee=Xw-L7*k1,Hw=class t extends M1{constructor(n){super(n),this._quickSeek=!0,this.midBufferDirty=!1,this.midBuffer=null,this.overlapLength=0,this.autoSeqSetting=!0,this.autoSeekSetting=!0,this._tempo=1,this.setParameters(44100,Lee,Vee,Ree)}clear(){super.clear(),this.clearMidBuffer()}clearMidBuffer(){this.midBufferDirty&&(this.midBufferDirty=!1,this.midBuffer=null)}setParameters(n,e,i,r){n>0&&(this.sampleRate=n),r>0&&(this.overlapMs=r),e>0?(this.sequenceMs=e,this.autoSeqSetting=!1):this.autoSeqSetting=!0,i>0?(this.seekWindowMs=i,this.autoSeekSetting=!1):this.autoSeekSetting=!0,this.calculateSequenceParameters(),this.calculateOverlapLength(this.overlapMs),this.tempo=this._tempo}set tempo(n){let e;this._tempo=n,this.calculateSequenceParameters(),this.nominalSkip=this._tempo*(this.seekWindowLength-this.overlapLength),this.skipFract=0,e=Math.floor(this.nominalSkip+.5),this.sampleReq=Math.max(e+this.overlapLength,this.seekWindowLength)+this.seekLength}get tempo(){return this._tempo}get inputChunkSize(){return this.sampleReq}get outputChunkSize(){return this.overlapLength+Math.max(0,this.seekWindowLength-2*this.overlapLength)}calculateOverlapLength(n=0){let e;e=this.sampleRate*n/1e3,e=e<16?16:e,e-=e%8,this.overlapLength=e,this.refMidBuffer=new Float32Array(this.overlapLength*2),this.midBuffer=new Float32Array(this.overlapLength*2)}checkLimits(n,e,i){return n<e?e:n>i?i:n}calculateSequenceParameters(){let n,e;this.autoSeqSetting&&(n=jee+F7*this._tempo,n=this.checkLimits(n,O7,Yw),this.sequenceMs=Math.floor(n+.5)),this.autoSeekSetting&&(e=Gee+L7*this._tempo,e=this.checkLimits(e,B7,Xw),this.seekWindowMs=Math.floor(e+.5)),this.seekWindowLength=Math.floor(this.sampleRate*this.sequenceMs/1e3),this.seekLength=Math.floor(this.sampleRate*this.seekWindowMs/1e3)}set quickSeek(n){this._quickSeek=n}clone(){let n=new t;return n.tempo=this._tempo,n.setParameters(this.sampleRate,this.sequenceMs,this.seekWindowMs,this.overlapMs),n}seekBestOverlapPosition(){return this._quickSeek?this.seekBestOverlapPositionStereoQuick():this.seekBestOverlapPositionStereo()}seekBestOverlapPositionStereo(){let n,e,i,r=0;for(this.preCalculateCorrelationReferenceStereo(),n=0,e=Number.MIN_VALUE;r<this.seekLength;r=r+1)i=this.calculateCrossCorrelationStereo(2*r,this.refMidBuffer),i>e&&(e=i,n=r);return n}seekBestOverlapPositionStereoQuick(){let n,e,i,r=0,s,a;for(this.preCalculateCorrelationReferenceStereo(),e=Number.MIN_VALUE,n=0,s=0,a=0;r<4;r=r+1){let l=0;for(;T7[r][l]&&(a=s+T7[r][l],!(a>=this.seekLength));)i=this.calculateCrossCorrelationStereo(2*a,this.refMidBuffer),i>e&&(e=i,n=a),l=l+1;s=n}return n}preCalculateCorrelationReferenceStereo(){let n=0,e,i;for(;n<this.overlapLength;n=n+1)i=n*(this.overlapLength-n),e=n*2,this.refMidBuffer[e]=this.midBuffer[e]*i,this.refMidBuffer[e+1]=this.midBuffer[e+1]*i}calculateCrossCorrelationStereo(n,e){let i=this._inputBuffer.vector;n+=this._inputBuffer.startIndex;let r=0,s=2,a=2*this.overlapLength,l;for(;s<a;s=s+2)l=s+n,r+=i[l]*e[s]+i[l+1]*e[s+1];return r}overlap(n){this.overlapStereo(2*n)}overlapStereo(n){let e=this._inputBuffer.vector;n+=this._inputBuffer.startIndex;let i=this._outputBuffer.vector,r=this._outputBuffer.endIndex,s=0,a,l,d=1/this.overlapLength,u,h,_;for(;s<this.overlapLength;s=s+1)l=(this.overlapLength-s)*d,u=s*d,a=2*s,h=a+n,_=a+r,i[_+0]=e[h+0]*u+this.midBuffer[a+0]*l,i[_+1]=e[h+1]*u+this.midBuffer[a+1]*l}process(){let n,e,i;if(this.midBuffer===null){if(this._inputBuffer.frameCount<this.overlapLength)return;this.midBuffer=new Float32Array(this.overlapLength*2),this._inputBuffer.receiveSamples(this.midBuffer,this.overlapLength)}for(;this._inputBuffer.frameCount>=this.sampleReq;){n=this.seekBestOverlapPosition(),this._outputBuffer.ensureAdditionalCapacity(this.overlapLength),this.overlap(Math.floor(n)),this._outputBuffer.put(this.overlapLength),e=this.seekWindowLength-2*this.overlapLength,e>0&&this._outputBuffer.putBuffer(this._inputBuffer,n+this.overlapLength,e);let r=this._inputBuffer.startIndex+2*(n+this.seekWindowLength-this.overlapLength);this.midBuffer.set(this._inputBuffer.vector.subarray(r,r+2*this.overlapLength)),this.skipFract+=this.nominalSkip,i=Math.floor(this.skipFract),this.skipFract-=i,this._inputBuffer.receive(i)}}},A7=function(t,n){return(t>n?t-n:n-t)>1e-10},P1=class t{constructor(){this.transposer=new Uw(!1),this.stretch=new Hw(!1),this._inputBuffer=new Od,this._intermediateBuffer=new Od,this._outputBuffer=new Od,this._rate=0,this._tempo=0,this.virtualPitch=1,this.virtualRate=1,this.virtualTempo=1,this.calculateEffectiveRateAndTempo()}clear(){this.transposer.clear(),this.stretch.clear()}clone(){let n=new t;return n.rate=this.rate,n.tempo=this.tempo,n}get rate(){return this._rate}set rate(n){this.virtualRate=n,this.calculateEffectiveRateAndTempo()}set rateChange(n){this._rate=1+.01*n}get tempo(){return this._tempo}set tempo(n){this.virtualTempo=n,this.calculateEffectiveRateAndTempo()}set tempoChange(n){this.tempo=1+.01*n}set pitch(n){this.virtualPitch=n,this.calculateEffectiveRateAndTempo()}set pitchOctaves(n){this.pitch=Math.exp(.69314718056*n),this.calculateEffectiveRateAndTempo()}set pitchSemitones(n){this.pitchOctaves=n/12}get inputBuffer(){return this._inputBuffer}get outputBuffer(){return this._outputBuffer}calculateEffectiveRateAndTempo(){let n=this._tempo,e=this._rate;this._tempo=this.virtualTempo/this.virtualPitch,this._rate=this.virtualRate*this.virtualPitch,A7(this._tempo,n)&&(this.stretch.tempo=this._tempo),A7(this._rate,e)&&(this.transposer.rate=this._rate),this._rate>1?this._outputBuffer!=this.transposer.outputBuffer&&(this.stretch.inputBuffer=this._inputBuffer,this.stretch.outputBuffer=this._intermediateBuffer,this.transposer.inputBuffer=this._intermediateBuffer,this.transposer.outputBuffer=this._outputBuffer):this._outputBuffer!=this.stretch.outputBuffer&&(this.transposer.inputBuffer=this._inputBuffer,this.transposer.outputBuffer=this._intermediateBuffer,this.stretch.inputBuffer=this._intermediateBuffer,this.stretch.outputBuffer=this._outputBuffer)}process(){this._rate>1?(this.stretch.process(),this.transposer.process()):(this.transposer.process(),this.stretch.process())}};var N7=function(t,n,e=D7,i=4096){let r=t.createScriptProcessor(i,2,2),s=new Float32Array(i*2);return r.onaudioprocess=a=>{let l=a.outputBuffer.getChannelData(0),d=a.outputBuffer.getChannelData(1),u=n.extract(s,i);e(n.sourcePosition),u===0&&n.onEnd();let h=0;for(;h<u;h++)l[h]=s[h*2],d[h]=s[h*2+1]},r};var E1=(()=>{class t{constructor(){this.createObjectStore=function(a){console.log("Creating objectStore"),a.createObjectStore("sounds")},this.ready=new yn;var e=window.indexedDB,i=window.IDBTransaction,r=2,s=e.open("sounds",r);s.onerror=function(a){console.log("Why didn't you allow my web app to use IndexedDB?!")},s.onsuccess=a=>{this.db=s.result,this.ready.next(!0),this.db.onerror=l=>{console.log("Error creating/accessing IndexedDB database")}},s.onupgradeneeded=a=>{this.createObjectStore(a.target.result)}}getSoundFile(e){console.log(`
getSoundFile-------------------
`+e);var i=new XMLHttpRequest,r;return i.open("GET","/shared/wavfiles/"+e,!0),i.responseType="blob",console.log(`opening : 
/shared/wavfiles/`+e),new Promise((a,l)=>{i.addEventListener("load",()=>{setTimeout(()=>{i.status===200&&(console.log("Sound retrieved"),r=i.response,this.putElephantInDb(r,e),a(r))},2e3)},!1),i.send()})}putElephantInDb(e,i){console.log("Putting elephants in IndexedDB");var r=this.db.transaction(["sounds"],"readwrite"),s=r.objectStore("sounds").put(e,i);r.objectStore("sounds").get(i).onsuccess=function(a){var l=a.target.result;console.log(l);var d=window.URL||window.webkitURL,u=d.createObjectURL(l);return console.log("soundURL => ",u),e}}getMp3Item(e){debugger}isStored(e){return this.db.transaction("sounds").objectStore("sounds").get(e)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Rs=(()=>{class t{constructor(e,i,r,s,a,l,d){this._http=e,this.sm=i,this.storage=r,this.sel=s,this.zone=a,this.tp=l,this.dm=d,this.waveform_containerId="#waveform",this.timeline_containerId="#waveform",this.file_path="",this.last_visited_region=1,this.db_ready_val=!1,this.repeat={active:!1,start:1,end:1},this.repeat_idxs={start:0,end:0,active:!1},this.drag="none",this.beat_regions=[],this.selection=[],this.ghost_on=!1,this.stretch_on=!0,this.measures_regions=[],this.lastCurrentRegion=null,this.init()}init(){this.downloaded=new yn,this.ready=new yn,this.db_ready=new yn,this.db_ready_sub=this.storage.ready.subscribe(e=>{this.db_ready_val=!0,this.db_ready.next(this.db_ready_val)}),this.selectionUpdate$=this.sel.selected_Update$.subscribe(e=>{if(this.selection=e,this.dislight_all(),!(!e||!e[0])){for(let i=0;i<e.length;i++)if(e[i].hasOwnProperty("type")&&e[i].type=="measure"){this.highlight(e[i].id);let r=this.sm.getMeasures_hash()[e[i].id];if(r==null)throw"error audioplayer.service : init() => cant find measure hash";let s=this.sm.getPart(r.part).getMeasure(r.meas);if(s==null)throw"error audioplayer.service : init() => cant find measure";if(!s.getAudioRegion()){console.warn("No region to select, is there any region left ?");return}}}})}createFromHtmlElements(e="",i=""){e==""||i==""||(this.waveform_containerId=e,this.timeline_containerId=i,this.ws=G7.default.create({container:this.waveform_containerId,waveColor:"white",progressColor:"black",skipLength:2,scrollParent:!0,autoCenter:!0,normalize:!0,hideScrollbar:!1,partialRender:!0,closeAudioContext:!0,audioRate:1,height:95,cursorColor:"#5c6a77",fillParent:!1,pixelRatio:1,minPxPerSec:30,plugins:[R7.default.create({showTime:!1,opacity:0,slop:1,height:95,customShowTimeStyle:{"background-color":"#000",color:"#fff",padding:"2px","margin-top":"60px","font-size":"10px"}}),V7.default.create({container:this.timeline_containerId}),j7.default.create({regions:this.measures_regions})]}),this.ws.on("ready",()=>{console.log("\u{1F3B5} WaveSurfer ready"),this.zoom_coef=20,this.ws.zoom(this.zoom_coef),this.ready.next(!0);var r=new P1(this.ws.backend.ac.sampleRate),s=this.ws.backend.buffer,a=s.numberOfChannels,l=s.getChannelData(0),d=a>1?s.getChannelData(1):l,u=s.length,h=null,_=0,b={extract:function(S,L,R){h!=null&&(_=h-R,h=null),R+=_;for(var z=0;z<L;z++)S[z*2]=l[z+R],S[z*2+1]=d[z+R];return Math.min(L,u-R)}},w;this.ws.on("play",()=>{if(h=~~(this.ws.backend.getPlayedPercents()*u),r.tempo=this.ws.getPlaybackRate(),r.tempo===1)this.ws.backend.disconnectFilters();else{if(!w){var S=new S1(b,r);w=N7(this.ws.backend.ac,S)}this.ws.backend.setFilter(w)}}),this.ws.on("pause",function(){w&&w.disconnect()}),this.ws.on("seek",()=>{}),this.ws.on("region-in",S=>{console.log("\u{1F3AF} Region entered:",S),this.updateTransportFromRegion(S)}),this.ws.on("region-out",S=>{console.log("\u{1F3AF} Region exited:",S),this.updateRepeat(this.repeat_idxs)}),this.ws.on("region-created",S=>{if(S.id=="repeat"){this.styleRepeaters(S);return}if(S.attributes.type=="part"){this.styleParts(S);return}else if(S.attributes.type=="measure"){this.styleMarkers(S);return}else if(S.attributes.type=="beat"){this.styleBeats(S);return}else if(S.attributes.type=="old"){if(S.attributes.meas==0&&S.attributes.beat==0){this.styleParts(S);return}else if(S.attributes.meas!=0&&S.attributes.beat==0){this.styleMarkers(S);return}else if(S.attributes.beat!=0){this.styleBeats(S);return}}}),this.ws.on("region-mouseenter",(S,L,R,z)=>{S.id=="repeat"||S.attributes.idx&&S.attributes.idx[0]=="B"||this.ws.isPlaying()}),this.ws.on("region-click",(S,L,R,z)=>{if(S.id!="repeat")if(S.attributes.type=="old"){let ne=this.sm.getMeasures_hash(),Q=ne[S.attributes.id].part,q=ne[S.attributes.id].meas,T=this.sm.getPart(Q).getMeasure(q);if(L.ctrlKey){this.sel.add_or_remove_Selection(T);return}this.sel.setSelection([T]);let se=T.getIdx();this.zone.run(()=>{this.tp.setMeasure(se),this.tp.setBeat(0)})}else{let Q=/([0-9]*).([0-9]*).([0-9]*)/gm.exec(S.id),q=Number(Q[1]),T=Number(Q[2]),se=Number(Q[3]),_e=this.sm.getPart(q).getMeasure(T);this.sel.setSelection([_e]);let Me=_e.getIdx();this.tp.setMeasure(Me),this.tp.setBeat(se)}}),this.ws.on("region-mouseleave",(S,L,R,z)=>{}),this.ws.on("error",S=>{console.error("\u274C WaveSurfer error:",S)}),this.ws.on("loading",S=>{}),this.ws.on("finish",()=>{}),this.ws.on("audioprocess",()=>{if(this.ws.isPlaying()){let S=this.getCurrentRegion();S&&S!==this.lastCurrentRegion&&(this.lastCurrentRegion=S,this.updateTransportFromRegion(S))}})}))}bindClick(e){this.ws.on("seek",i=>{this.ws.regions.list.hasOwnProperty("repeat")&&(this.ws.regions.list.repeat.firedIn=!1),e(i)})}load(e=""){e!=""&&(this.file_path=e,this.ws.load(this.file_path))}load_blob(e,i=""){this.file_path=i,this.ws.loadBlob(e)}getMp3(e){if(e==""||e==null)return;let i=new URL(e).searchParams.get("v");if(i=="")throw"waveForm Service : getMp3() => no v parameter in url !";this.storage.isStored(i+".mp3").onsuccess=r=>{if(r.target.result==null)this.getAudioFromYoutube(e);else{let s="/shared/wavfiles/"+new URL(e).searchParams.get("v")+".mp3";this.load_blob(r.target.result,s)}}}getAudioFromYoutube(e){if(e=="")return;let i=new URL(e).searchParams.get("v");if(i=="")throw"Youtube Service : changeVideo() => no v parameter in url !";let r={link:e,name:i};if(e==""||i=="")throw"youtube-audio.component : getAudioFromYoutube() => missing information";this.ready.next(!1),this.downloaded.next(!1);let s=new Un({"Content-Type":"application/json"});this._http.post(ai.apigetWavFromYoutube,r,{responseType:"text",headers:s}).pipe(fn(a=>(a=a.replace(/\n/g,""),this.storage.getSoundFile(a).then(l=>{this.load_blob(l),this.downloaded.next(!0)})))).subscribe(a=>{},a=>console.error("\u274C YouTube audio request error:",a),()=>{console.log("\u2705 Got audio from YouTube")})}getCurrentTime(){return this.ws.getCurrentTime()}getCurrentRegion(){let e=this.getCurrentTime();for(let i in this.ws.regions.list)if(this.ws.regions.list[i].start<=e&&this.ws.regions.list[i].end>e&&this.ws.regions.list[i].id!="repeat")return this.ws.regions.list[i];return null}selectNextBeatFromCursor(){if(!this.selection[0])return;let e=this.ws.backend.getCurrentTime(),i=this.sm.get_next_beat_at_time(e,this.selection[0].getId());console.log("next =>",i.measure.getIdx()," beat=>",i.beat),this.sel.setSelection([i.measure]),this.tp.setMeasure(i.measure.getIdx()),this.tp.setBeat(i.beat)}selectPreviousBeatFromCursor(){if(!this.selection[0])return;let e=this.ws.backend.getCurrentTime(),i=this.sm.get_previous_beat_at_time(e,this.selection[0].getId());console.log("prev =>",i.measure.getIdx()," beat=>",i.beat),this.sel.setSelection([i.measure]),this.tp.setMeasure(i.measure.getIdx()),this.tp.setBeat(i.beat)}selectLastMeasureFromCursor(){let e=this.sm.get_last_measure_at_time(this.ws.backend.getCurrentTime());e&&(this.tp.setMeasure(Number(e.getIdx())-1),this.sel.setSelection([e]))}selectLastBeatFromCursor(){debugger;let e=this.sm.get_last_beat_at_time(this.ws.backend.getCurrentTime());e&&(this.tp.setMeasure(Number(e.getIdx())-1),this.sel.setSelection([e]))}setCurrentTime(e){if(e>=this.ws.getDuration())this.ws.drawer.progress(1);else{let i=e/this.ws.getDuration();this.ws.drawer.progress(i),this.ws.backend.seekTo(e)}}getFilePath(){return this.file_path}destroy(){console.log("%c AudioPlayer : destroy()","color:red; font-size:20px;"),this.file_path="",this.ws.empty(),this.ws.destroy()}addRegion(e){if(!e)return;let i,r,s;try{if(e.hasOwnProperty("type")){let l=e.id.split(".");r={beat:e.beat,meas:e.measure,part:e.part,type:e.type,idx:e.idx,id:e.id,measure_id:e.measure_id}}else i=this.sm.getMeasures_hash()[e.id],i?r={beat:0,meas:i.meas,part:i.part,idx:e.id,id:e.id,type:"old"}:r={};s={attributes:r,id:e.id,idx:e.idx,start:e.start,end:e.end,minLength:.01,loop:!1,resize:!0,drag:!1,interaction:!0};let a;this.zone.runOutsideAngular(()=>{a=this.ws.addRegion(s)}),e.id=="repeat"&&(this.ws.regions.list.repeat.update({loop:!1}),this.ws.regions.list.repeat.update({drag:!1}),this.ws.regions.list.repeat.update({resize:!1}),this.ws.regions.list.repeat.update({interaction:!1}),this.ws.regions.list.repeat.update({color:"rgba(0, 0, 0, 0)"}))}catch{console.log(this.measures_regions),console.log(this.ws.regions.list)}}updateRegion(e){console.log("Updating regions  with => ",e);try{this.ws.regions.list[e.id].update(e)}catch{console.log(this.measures_regions),console.log(this.ws.regions.list),console.log(e)}}updateBeatRegion(e){let i=this.sm.getMeasures_hash()[e.idx],r=i.part,s=i.meas,a=e.getBeats(),l=a.length;try{for(let d=0;d<l;d++){let u=r+"."+s+"."+d;d==0?this.ws.regions.list[u].update(e.getAudioRegion()):this.ws.regions.list[u].update(a[d].getAudioRegion())}}catch{console.warn("audioplayer service => cant update beats of this region !")}}updateRepeatTime(e,i){this.updateRegion({id:"repeat",start:e,end:i})}updateRepeatMeasures(e,i){}updateRepeat(e){let i=0,r=1/0,s=this.sm.getMeasures_hash(),a=s[e.start].idx,l=s[e.end].idx;i=this.sm.getMeasureById(a).getAudioRegion().start,r=this.sm.getMeasureById(l).getAudioRegion().end,this.repeat_idxs.start=e.start,this.repeat_idxs.end=e.end;let d={start:i,end:r,loop:e.active};this.repeat=d,console.log("updateRegion",d),this.ws.regions.list.repeat.update(d),this.ws.regions.list.repeat.update({loop:e.active}),this.ws.regions.list.repeat.update({drag:!1}),this.ws.regions.list.repeat.update({resize:!1}),this.ws.regions.list.repeat.update({interaction:!1}),this.ws.regions.list.repeat.update({color:"rgba(0, 0, 0, 0)"})}deleteRegion(e){console.log("waveForm deleteRegion => ",e),this.ws.regions.list[e].remove()}dragToggle(e){let i=Object.getOwnPropertyNames(this.ws.regions.list);for(let r of i)r=="repeat"||r[0]=="B"||(this.ws.regions.list[r].isDragging=!0,this.ws.regions.list[r].drag=!0,this.ws.regions.list[r].update({drag:e}))}clearRegions(){this.ws.clearRegions()}clearRegions_Beats(){let e=Object.getOwnPropertyNames(this.ws.regions.list);for(let i of e)i[0]=="B"&&this.ws.regions.list[i].remove()}play(){console.warn("play"),this.ws.play(),this.tp.setState("playing")}pause(){console.warn("pause"),clearTimeout(this.random_timeout),this.ws.pause(),this.ws.regions.list.hasOwnProperty("repeat")&&(this.ws.regions.list.repeat.firedIn=!1),this.tp.setState("paused"),this.sm.reindex(),this.sm.getPart(0)&&this.sm.getPart(0).getMeasure(0).getBeat(0).getAudioRegion().start?(this.setBeatsRegions(),this.refreshRegions()):this.resetAllRegionsFromModel()}stop(){console.warn("stop"),clearTimeout(this.random_timeout),this.tp.setState("stopped"),this.ws.regions.list.hasOwnProperty("repeat")&&(this.ws.regions.list.repeat.firedIn=!1),this.ws.stop()}skip(e){this.setCurrentTime(this.ws.backend.getCurrentTime()+e),this.ws.backend.getCurrentTime()<0&&this.setCurrentTime(0),e<0?this.selectPreviousBeatFromCursor():this.selectNextBeatFromCursor(),this.getState()&&this.play()}align_cursor_on_selection(){let e=this.sel.getSelection();if(e.length&&e[0].type=="measure"){let i=e[0].getAudioRegion().start;this.setCurrentTime(i)}}isPlaying(){return this.ws.isPlaying()}playPause(){console.log("%c Player : playPause()","color:green; font-size:20px;"),clearTimeout(this.random_timeout),this.ws.isPlaying()?(this.ws.pause(),this.selectLastMeasureFromCursor()):(this.ws.play(this.ws.getCurrentTime()),this.ghost_on&&this.startGhosting()),setTimeout(()=>{this.ws.isPlaying()?this.tp.setState("playing"):this.tp.setState("paused")},10)}playMeasures(e){}playMeasure(e){let i=this.sm.getMeasures_hash()[e],s=this.sm.getPart(i.part).getMeasure(i.meas).getAudioRegion();if(!s){console.warn("Region undefined...");return}this.ws.play(s.start,s.end-.1)}setVolume(e){e>1||e<0||this.ws.setVolume(e)}toggleVolume(){this.ws.getVolume()==0?this.ws.setVolume(1):this.ws.setVolume(0)}randomVolumeToggle(){var e=5,i=10,r=Math.floor(Math.random()*(i-e+1)+e);this.toggleVolume(),this.random_timeout=setTimeout(()=>{this.randomVolumeToggle()},r*1e3)}startGhosting(){var e=Math.floor(Math.random()*6+5);this.random_timeout=setTimeout(()=>{this.randomVolumeToggle()},e*1e3)}switchGhost(e){if(!e)this.ghost_on=!1,clearTimeout(this.random_timeout),this.setVolume(1);else if(this.ws.isPlaying()){this.ghost_on=!0;var i=Math.floor(Math.random()*6+5);this.random_timeout=setTimeout(()=>{this.randomVolumeToggle()},i*1e3)}else this.ghost_on=!0}setPlaybackRate(e){(e<.5||e>2)&&(console.error("error setPlaybackRate : put 1"),e=1),this.ws.setPlaybackRate(e)}getState(){return this.ws.isPlaying()}styleMarkers(e){let i=document.createElement("span"),r=Number(e.attributes.meas)+1;i.innerText=String(r),$(i).addClass("measureId"),$(e.element).find(".wavesurfer-handle-start").append(i),$(e.element).addClass("region-"+e.id)}styleParts(e){let i=document.createElement("span");i.innerText=String(Number(e.attributes.part)+1),$(i).addClass("measureId"),$(e.element).find(".wavesurfer-handle-start").addClass("wavesurfer-part-start"),$(e.element).find(".wavesurfer-handle-start").append(i);let r=document.createElement("div");$(r).addClass("firstbeatDiv"),$(e.element).addClass("region-"+e.id)}styleRepeaters(e){let i=$(e.element).find(".wavesurfer-handle-start");$(i).addClass("loop-start");let r=$(e.element).find(".wavesurfer-handle-end");$(r).addClass("loop-end")}styleBeats(e){let i=document.createElement("span"),r=Number(e.attributes.beat)+1;i.innerText=""+r,console.log(r),$(e.element).find(".wavesurfer-handle-start").append(i),$(e.element.children[0]).addClass("beat"),$(e.element.children[1]).addClass("beat"),$(e.element).addClass("beat-region")}dislight_all(){$(".selected").removeClass("selected")}highlight(e){$(".region-"+e).addClass("selected")}getStretch(){return this.stretch_on}setStretch(e){this.stretch_on=e}stretchAll(){this.stretchUpdate(Object.getOwnPropertyNames(this.sm.getMeasures_hash()))}stretchUpdate(e){console.log("%c stretch","color:red;font-size:20px;"),console.log("measures => ",e);let i=this.sm.getMeasures_hash();var r=e[0];for(let s=0;s<e.length-1;s++,r=e[s]){let a=i[r],l=i[e[s+1]];if(!l){console.warn("Error, no next measure to stretch to... Is there a next measure ?");return}let d=this.sm.getPart(a.part).getMeasure(a.meas),u=this.sm.getPart(l.part).getMeasure(l.meas);if(d.getAudioRegion()&&u.getAudioRegion()){d.setAudioRegionEnd(u.getAudioRegion().start);let h=d.getAudioRegion();console.log("{measure_nb: m, start: r.start, end: r.end} => ",{measure_nb:r,start:h.start,end:h.end}),this.updateRegion({measure_nb:r,start:h.start,end:h.end})}}}follow(e){this.ws.drawer.params.autoCenter=e}refreshRegions(){}setMeasuresRegions(){this.ws.clearRegions(),this.measures_regions=[];let e=this.sm.getParts();for(let i=0;i<e.length;i++){let s=e[i].getMeasures();for(let a of s){let l=a.getBeats(),d=a.getIdx();console.log("beat_name =>",d),this.measures_regions.push({id:d,start:a.getAudioRegion().start,end:a.getAudioRegion().end})}}for(let i of this.measures_regions)this.addRegion(i)}setBeatsRegions(){let e=this.sm.getParts(),i=e[0].getMeasure(0).getAudioRegion().start||0,r=e[0].getMeasure(0).getAudioRegion().end||1/0,s={id:"repeat",type:"repeat",start:i,end:r,loop:!0};Object.keys(this.ws.regions.list).length&&(s={id:"repeat",type:"repeat",start:this.ws.regions.list.repeat.start,end:this.ws.regions.list.repeat.end,loop:this.ws.regions.list.repeat.loop}),this.beat_regions=[s],this.ws.clearRegions();let a=this.sm.getMeasures_hash();for(let l=0;l<e.length;l++){let u=e[l].getMeasures();for(let h of u){let _=h.getBeats(),b=a[h.getId()].part,w=a[h.getId()].meas,S=h.getId(),L=this.sm.getPart(b).getMeasure(w).getAudioRegion();h.getId()==this.repeat.start&&(i=L.start,s={id:"repeat",type:"repeat",start:i,end:r,loop:!0},this.beat_regions[0]=s),h.getId()==this.repeat.end&&(r=L.end,s={id:"repeat",type:"repeat",start:i,end:r,loop:!0},this.beat_regions[0]=s);for(let[R,z]of _.entries()){let ne=z.getPos(),Q={start:z.getAudioRegion().start,end:z.getAudioRegion().end,type:null,idx:h.getIdx(),measure_id:S,part:b,measure:w,beat:ne,id:b+"."+w+"."+ne};w==0&&ne==0?(Q.type="part",Q.end=h.getAudioRegion().end):ne==0?(Q.type="measure",Q.end=h.getAudioRegion().end):(Q.type="beat",Q.idx="B_"+Q.idx+"_"+R),this.beat_regions.push(Q)}}}this.updateRegion({id:"repeat",start:i,end:r});for(let l of this.beat_regions)console.log("br =>",l),this.addRegion(l)}resetAllRegionsFromModel(){if(console.log("resetAllRegionsFromModel"),this.clearRegions(),!this.sm.getParts().length){console.warn("resetAllRegionsFromModel() no regions left");return}let i=0,r=1/0;this.addRegion({id:"repeat",start:i,end:r});let s=this.sm.getMeasures_hash(),a=Object.keys(s);for(var l of a){let d=this.sm.getPart(s[l].part).getMeasure(s[l].meas).getAudioRegion();this.addRegion({id:l,measure_nb:s[l].meas,start:d.start,end:d.end}),l==this.repeat.start&&(i=d.start),l==this.repeat.end&&(r=d.end)}this.updateRegion({id:"repeat",start:i,end:r}),this.sel.getSelection().length&&this.sel.getSelection()[0].getType()=="measure"&&this.highlight(this.sel.getSelection()[0].idx)}updateTransportFromRegion(e){if(!(!e||e.id==="repeat"))try{let i=e.attributes;if(i){let r=i.meas||0,s=i.beat||0;console.log(`\u{1F3B5} Updating transport: measure=${r}, beat=${s}`),this.tp.setMeasure(r,!0),this.tp.setBeat(s,!0),this.tp.beatChange.next({beat:s,measure:r,silent:!1})}}catch(i){console.error("\u274C Error updating transport from region:",i)}}static{this.\u0275fac=function(i){return new(i||t)(ht(Xi),ht(Hn),ht(E1),ht(nr),ht(on),ht(yi),ht(Po))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();window.YT=window.YT||{};var xc=(()=>{class t{constructor(){this.playerState=-1,this.htmlId="player",this.videoLink="",this.videoId="",this.localPlayer=null,this.currentMediaSource=null,this.apiReady=new yn,this.ready=new yn,this.curPos=new yn}loadMedia(e){switch(console.log("\u{1F3AC} YoutubeService.loadMedia called with source:",e),this.currentMediaSource=e,e.type){case"youtube":console.log("\u{1F310} Loading YouTube media"),e.url&&this.createVideo(e.url);break;case"local-mp3":console.log("\u{1F3B5} Loading local MP3 media"),e.file&&this.loadLocalAudio(e.file);break;case"local-video":console.log("\u{1F3AC} Loading local video media"),e.file&&this.loadLocalVideo(e.file);break}}loadLocalAudio(e){console.log("\u{1F3B5} YoutubeService.loadLocalAudio called for:",e.name),this.destroy();let i=URL.createObjectURL(e);console.log("\u{1F517} Created audio URL:",i),this.localPlayer=new Audio(i),console.log("\u{1F3B5} Audio element created"),this.setupLocalPlayerEvents(),console.log("\u{1F3A7} Local player events set up");let r=document.getElementById(this.htmlId);r?(console.log("\u{1F4E6} Found container, updating DOM"),r.innerHTML="",r.appendChild(this.localPlayer),console.log("\u2705 Audio element added to DOM")):console.log("\u274C Container not found:",this.htmlId),this.ready.next(`local-audio:${e.name}`),console.log("\u2705 Local audio ready event sent")}loadLocalVideo(e){console.log("\u{1F3AC} YoutubeService.loadLocalVideo called for:",e.name),this.destroy();let i=URL.createObjectURL(e);console.log("\u{1F517} Created video URL:",i),this.localPlayer=document.createElement("video"),this.localPlayer.src=i,this.localPlayer.controls=!0,console.log("\u{1F3AC} Video element created"),this.setupLocalPlayerEvents(),console.log("\u{1F3A7} Local player events set up");let r=document.getElementById(this.htmlId);r?(console.log("\u{1F4E6} Found container, updating DOM"),r.innerHTML="",r.appendChild(this.localPlayer),console.log("\u2705 Video element added to DOM")):console.log("\u274C Container not found:",this.htmlId),this.ready.next(`local-video:${e.name}`),console.log("\u2705 Local video ready event sent")}setupLocalPlayerEvents(){if(console.log("\u{1F3A7} setupLocalPlayerEvents called"),!this.localPlayer){console.log("\u274C No local player to set up events for");return}this.localPlayer.addEventListener("play",()=>{console.log("\u25B6\uFE0F Local player play event"),this.playerState=1,this.curPos.next("play"),this.startPositionTracking()}),this.localPlayer.addEventListener("pause",()=>{console.log("\u23F8\uFE0F Local player pause event"),this.playerState=2,this.curPos.next("pause"),this.stopInterval()}),this.localPlayer.addEventListener("ended",()=>{console.log("\u23F9\uFE0F Local player ended event"),this.playerState=0,this.curPos.next("stop"),this.stopInterval()}),this.localPlayer.addEventListener("timeupdate",()=>{this.localPlayer&&this.curPos.next(this.localPlayer.currentTime)}),this.localPlayer.addEventListener("loadeddata",()=>{console.log("\u{1F4CA} Local player loadeddata event")}),this.localPlayer.addEventListener("canplay",()=>{console.log("\u{1F3B5} Local player canplay event")}),this.localPlayer.addEventListener("error",e=>{console.error("\u274C Local player error event:",e)}),console.log("\u2705 Local player events set up")}startPositionTracking(){console.log("\u23F1\uFE0F startPositionTracking called"),this.stopInterval(),this.interval=setInterval(()=>{this.localPlayer&&!this.localPlayer.paused&&this.curPos.next(this.localPlayer.currentTime)},100),console.log("\u2705 Position tracking started")}createVideo(e){if(console.log("\u{1F310} YoutubeService.createVideo called with link:",e),e){let i=new URL(e).searchParams.get("v");if(i=="")throw"Youtube Service : changeVideo() => no v parameter in url !";this.videoLink=e,this.videoId=i,console.log("\u{1F3AC} YouTube video ID:",this.videoId)}!window.YT||!window.YT.Player?(console.log("\u{1F50C} YouTube API not loaded, adding to DOM"),this.addApiToDom(),this.apiReady.subscribe(()=>{console.log("\u2705 YouTube API ready, creating player"),this.createYouTubePlayer()})):(console.log("\u2705 YouTube API already loaded, creating player"),this.createYouTubePlayer())}createYouTubePlayer(){this.yt_player=null,console.log("\u{1F3AC} Creating YouTube player for element:",this.htmlId);let e=document.getElementById(this.htmlId);if(!e){console.error("\u274C YouTube player element not found:",this.htmlId),console.log('\u{1F50D} Available elements with "player" in ID:'),document.querySelectorAll('[id*="player"]').forEach(r=>{console.log("  -",r.id,r.tagName,r.className)});return}let i=e.getBoundingClientRect();(i.width===0||i.height===0)&&(console.warn("\u26A0\uFE0F YouTube player element has zero dimensions, might be hidden:",this.htmlId),console.log("  - Element dimensions:",i.width,"x",i.height),console.log("  - Element display:",window.getComputedStyle(e).display),console.log("  - Element visibility:",window.getComputedStyle(e).visibility));try{this.yt_player=new window.YT.Player(this.htmlId,{height:"460",width:"640",videoId:this.videoId,playerVars:{autoplay:0,controls:0,cc_load_policy:0,iv_load_policy:3,modestbranding:1,disablekb:1,rel:0,showinfo:0,loop:1,playlist:this.videoId,fs:1,mute:1},events:{onReady:()=>{console.log("\u2705 YouTube player ready - ensuring muted state"),this.yt_player.mute(),this.yt_player.pauseVideo(),this.ready.next(this.videoLink)},onStateChange:r=>{console.log("\u{1F504} YouTube player state change:",r.data),this.yt_player&&this.yt_player.mute&&this.yt_player.mute(),this.onStateChange(r)}}}),console.log("\u2705 YouTube player created successfully")}catch(r){console.error("\u274C Error creating YouTube player:",r)}}checkAndCreatePlayer(){console.log("\u{1F50D} Checking if player element is now visible");let e=document.getElementById(this.htmlId);if(e){let i=e.getBoundingClientRect(),r=i.width>0&&i.height>0;console.log("\u{1F4CF} Player element dimensions:",i.width,"x",i.height,"Visible:",r),r&&!this.yt_player&&this.videoId&&(console.log("\u2705 Player element is now visible, creating YouTube player"),this.createYouTubePlayer())}else console.log("\u274C Player element still not found:",this.htmlId)}playMedia(){console.log("\u25B6\uFE0F playMedia called, current source:",this.currentMediaSource?.type),this.currentMediaSource?.type==="youtube"&&this.yt_player?(console.log("\u{1F310} YouTube media - only seeking for video display (no audio)"),this.yt_player.mute()):this.localPlayer?(console.log("\u{1F3B5} Playing local media"),this.localPlayer.play()):console.log("\u2139\uFE0F No media player available - no media has been loaded yet")}pauseMedia(){console.log("\u23F8\uFE0F pauseMedia called, current source:",this.currentMediaSource?.type),this.currentMediaSource?.type==="youtube"&&this.yt_player?(console.log("\u{1F310} YouTube media - only seeking for video display (no audio)"),this.yt_player.mute()):this.localPlayer&&(console.log("\u{1F3B5} Pausing local media"),this.localPlayer.pause())}stopMedia(){console.log("\u23F9\uFE0F stopMedia called, current source:",this.currentMediaSource?.type),this.currentMediaSource?.type==="youtube"&&this.yt_player?(console.log("\u{1F310} YouTube media - seeking to beginning for video display (no audio)"),this.yt_player.seekTo(0,!0),this.yt_player.mute()):this.localPlayer&&(console.log("\u{1F3B5} Stopping local media"),this.localPlayer.pause(),this.localPlayer.currentTime=0)}seekTo(e){this.currentMediaSource?.type==="youtube"&&this.yt_player?(console.log("\u{1F50D} Seeking YouTube to position:",e,"for video display"),this.yt_player.seekTo(e,!0),this.yt_player.mute()):this.localPlayer&&(this.localPlayer.currentTime=e)}getCurrentTime(){return this.currentMediaSource?.type==="youtube"&&this.yt_player?this.yt_player.getCurrentTime():this.localPlayer?this.localPlayer.currentTime:0}getDuration(){return this.currentMediaSource?.type==="youtube"&&this.yt_player?this.yt_player.getDuration():this.localPlayer&&this.localPlayer.duration||0}skip(e){let i=this.getCurrentTime()+e;console.log("t =>",i),this.seekTo(i)}isPlaying(){return this.currentMediaSource?.type==="youtube"&&this.yt_player?!1:this.localPlayer?!this.localPlayer.paused&&!this.localPlayer.ended:!1}handleFileUpload(e){console.log("\u{1F4C1} handleFileUpload called for:",e.name,e.type);let i=e.type;if(i.startsWith("audio/"))return console.log("\u{1F3B5} Detected audio file"),{type:"local-mp3",file:e};if(i.startsWith("video/"))return console.log("\u{1F3AC} Detected video file"),{type:"local-video",file:e};throw console.log("\u274C Unsupported file type:",i),new Error("Unsupported file type. Please upload audio or video files.")}handleYouTubeUrl(e){return console.log("\u{1F310} handleYouTubeUrl called for:",e),{type:"youtube",url:e}}addApiToDom(){if(console.log("\u{1F50C} addApiToDom called"),window.YT&&window.YT.Player){console.log("\u2705 YouTube API already loaded"),this.apiReady.next(!0);return}if($("#youtubeScript").length){console.log("\u2705 YouTube API script already exists, waiting for callback"),window.onYouTubeIframeAPIReady=()=>{console.log("\u2705 YouTube API ready callback (from existing script)"),this.apiReady.next(!0)};return}console.log("\u{1F4DC} Creating YouTube API script"),window.onYouTubeIframeAPIReady=()=>{console.log("\u2705 YouTube API ready callback"),this.apiReady.next(!0)};let e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",e.id="youtubeScript",document.body.appendChild(e),console.log("\u2705 YouTube API script added to DOM")}removeApiFromDom(){$("#youtubeScript").remove()}onStateChange(e){if(e.data==1)this.curPos.next(this.yt_player.getCurrentTime()),this.curPos.next("play");else if(e.data==0)this.curPos.next("stop");else if(e.data==2)this.curPos.next("pause");else if(e.data==5||e.data==-1)return}changeVideoUrl(e=""){if(e=="")return;let i=new URL(e).searchParams.get("v");if(i=="")throw"Youtube Service : changeVideo() => no v parameter in url !";if(this.videoLink=e,this.videoId=i,!this.hasOwnProperty("yt_player")||this.yt_player==null||this.yt_player.loadVideoById==null){this.addApiToDom(),console.warn("Youtube Service : changeVideo() => yt_player not instanciated !");return}this.yt_player.loadVideoById(this.videoId,5,"large"),this.ready.next(this.videoLink)}stopVideo(){console.log("\u23F9\uFE0F stopVideo - seeking to beginning for video display"),this.yt_player.seekTo(0,!0),this.yt_player.mute()}resumeVideo(){console.log("\u25B6\uFE0F resumeVideo - ensuring muted state for video display"),this.playerState=1,this.yt_player&&this.yt_player.mute&&this.yt_player.mute()}pauseVideo(){console.log("\u23F8\uFE0F pauseVideo - ensuring muted state for video display"),this.playerState=2,this.yt_player&&this.yt_player.mute&&this.yt_player.mute()}getPlayerState(){let e;try{e=this.yt_player.getPlayerState()}catch{console.error("Error YoutubeService : getPlayerState() => cant access youtube ?"),e=5}return e}stopInterval(){clearInterval(this.interval)}destroy(){console.log("\u{1F5D1}\uFE0F YoutubeService.destroy called"),this.yt_player&&(console.log("\u{1F310} Destroying YouTube player"),this.yt_player.destroy(),delete this.yt_player),this.localPlayer&&(console.log("\u{1F3B5} Destroying local player"),this.localPlayer.pause(),this.localPlayer.src="",this.localPlayer.load(),this.localPlayer=null),this.currentMediaSource?.file&&URL.revokeObjectURL(this.localPlayer?.src||""),this.stopInterval(),this.videoId="",this.videoLink="",this.currentMediaSource=null,console.log("\u2705 YoutubeService.destroy completed")}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var W7=(()=>{class t{constructor(e){this.sm=e,this.lineNb=0}render(e){if(!$("#"+e).length)throw"error MinimalRenderService => bad id";let i=document.getElementById(e);i.innerHTML="",i.style.height="",i.style.overflow="hidden",i.style.position="absolute";let r=document.createElement("span");r.innerHTML=this.sm.getTitle(),i.appendChild(r),r.style.fontSize="25px",r.style.marginLeft="20px";let s=document.createElement("span");s.innerHTML=this.sm.getArtist()!="unknown"||this.sm.getArtist()==""?" by <strong>"+this.sm.getArtist()+"</strong>":"",i.appendChild(s),s.style.fontSize="25px";let a=document.createElementNS("http://www.w3.org/1999/xhtml","div");a.innerHTML=this.sm.getTonality()!=""?"Key: "+this.sm.getTonality():"",i.appendChild(a),a.style.fontSize="20px",a.style.marginLeft="20px",a.style.marginBottom="20px",i=this.styliseContainer(i);let l=document.createElementNS("http://www.w3.org/1999/xhtml","div");this.lineNb=0;let d=this.sm.getParts();for(let[u,h]of d.entries()){let _=this.getPartNode(h);i.appendChild(_)}}getPartNode(e){let i=[],r=0,s=document.createElement("table"),a=document.createElement("tr");a.innerHTML="["+e.getTitle()+"]",s.appendChild(a);let l=document.createElement("span");l.innerHTML="("+e.getMeter()+")",s.appendChild(l);let d=document.createElement("span");d.innerHTML=e.getTonality()!=""?"Key: "+e.getTonality():"",s.appendChild(d),d.style.marginLeft="20px";let u=e.getMeasures(),h=document.createElement("tr");h.classList.add("abcjs-clef"),h.classList.add("abcjs-l"+this.lineNb);for(let[_,b]of u.entries()){b.getEol()&&(s.appendChild(h),h=document.createElement("tr"),this.lineNb++,h.classList.add("abcjs-clef"),h.classList.add("abcjs-l"+this.lineNb),r=0);let w=this.getMeasureNode(b,this.lineNb,r);for(let S of w)h.appendChild(S),r++}return s.appendChild(h),s.style.marginBottom="20px",s.style.borderSpacing="7px",s.style.borderCollapse="separate",s.style.marginLeft="10px",s.style.fontFamily="sans-serif",this.lineNb++,s}getMeasureNode(e,i,r){let s=[],a=e.getChordsLine(),l=e.getAnalysisLine(),d=a.split(" "),u=l.split(" "),h=document.createElement("td");h.style.borderLeft="2px solid";for(let _ of d){let b=document.createElement("span");b.innerHTML=_,b.style.marginLeft="10px",b.style.marginRight="10px",b.classList.add("abcjs-chord"),b.classList.add("abcjs-m"+r),b.classList.add("abcjs-l"+i),h.appendChild(b)}for(let _ of u){let b=document.createElement("span");b.innerHTML=_,b.style.marginLeft="10px",b.style.marginRight="10px",b.classList.add("abcjs-annotation"),b.classList.add("abcjs-m"+r),b.classList.add("abcjs-l"+i),h.appendChild(b)}return h.style.fontFamily="sans-serif",h.style.fontSize="1em",s.push(h),s}styliseContainer(e){return e.style.height="100%",e.style.width="100%",e.style.top="0px",e.style.position="absolute",e.style.overflow="scroll",e.style.paddingBottom="370px",e.style.paddingTop="100px",e}static{this.\u0275fac=function(i){return new(i||t)(ht(Hn))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var hi=(()=>{class t{constructor(e){this.zone=e,this.MIDI_AVAILABLE=!1,this.sustain=!1,this.plugged_inputs_tab=[],this.is_midi_guitar=!1,this.strings_midi_notes_values=[null,null,null,null,null,null],this.strings_midi_bend_values=[null,null,null,null,null,null],this.strings_midi_values=[null,null,null,null,null,null],this.notesTab=new Array,this.notesTabSubject=new mi([]),this.controlTabSubject=new mi([]),this.guitarNotesTabSubject=new mi([]),this.plugged_inputs$=new mi([]),this.chosen_input$=new mi([]),this.chosen_input_control$=new mi([]),this.MIDI_AVAILABLE$=new mi(!1),navigator.requestMIDIAccess?navigator.requestMIDIAccess({sysex:!1}).then(this.onMIDISuccess.bind(this),this.onMIDIFailure):console.warn("No MIDI support in your browser.")}isMidiGuitar(){return this.is_midi_guitar}onMIDISuccess(e){this.midi=e,this.getInputs(),this.MIDI_AVAILABLE=!0,this.MIDI_AVAILABLE$.next(this.MIDI_AVAILABLE)}bindMidiInput(e="Nord Stage 3 MIDI 1",i=!1){this.is_midi_guitar=i;var r=this.midi.inputs.values();this.plugged_inputs_tab=[];for(var s=r.next();s&&!s.done;s=r.next())this.midi_name==s.value.name&&(s.value.onmidimessage=null);r=this.midi.inputs.values();for(var s=r.next();s&&!s.done;s=r.next())this.plugged_inputs_tab.push(s),s.value.name==e&&(this.is_midi_guitar?s.value.onmidimessage=this._midiEventCallback_GR_Roland.bind(this):s.value.onmidimessage=this.onMIDIMessage.bind(this),this.midi_name=e,this.chosen_input=s,this.chosen_input$.next([this.chosen_input]))}bindControlInput(e=""){if(e){var i=this.midi.inputs.values();this.plugged_inputs_tab=[];for(var r=i.next();r&&!r.done;r=i.next())this.midiControl_name==r.value.name&&(r.value.onmidimessage=null);i=this.midi.inputs.values();for(var r=i.next();r&&!r.done;r=i.next())this.plugged_inputs_tab.push(r),r.value.name==e&&(this.midiControl_name=e,r.value.onmidimessage=this.onCONTROLMessage.bind(this),this.chosen_input_control=r,this.chosen_input_control$.next([this.chosen_input_control]))}}getInputs(){var e=this.midi.inputs.values();this.plugged_inputs_tab=[];for(var i=e.next();i&&!i.done;i=e.next())i.value.onmidimessage=null;e=this.midi.inputs.values();for(var i=e.next();i&&!i.done;i=e.next())this.plugged_inputs_tab.push(i);this.plugged_inputs$.next(this.plugged_inputs_tab)}onMIDIMessage(e){let i=e.data[0]&240;var r=[];i===144?(r=this.notesTab,r.push(e.data[1]),r=[...new Set(r)],r.sort(function(s,a){return s-a}),this.notesTab=r,this.refreshPianoNotes(r)):i==128?this.sustain==!0?(r=this.notesTab,r=r.filter(function(s,a,l){return s!=e.data[1]}),r=[...new Set(r)],r.sort(function(s,a){return s-a}),this.notesTab=r):(r=this.notesTab,r=r.filter(function(s,a,l){return s!=e.data[1]}),r=[...new Set(r)],r.sort(function(s,a){return s-a}),this.notesTab=r,this.refreshPianoNotes(r)):i==176&&(e.data[2]==0&&this.notesTab.length==0?(this.sustain=!1,this.notesTab=[],this.refreshPianoNotes([])):e.data[2]==127?this.sustain=!0:e.data[2]==0&&(this.sustain=!1))}emitDebugControlMessage(e){this.controlTabSubject.next(e)}onCONTROLMessage(e){let i=e.data[0]&240;var r=[];i===144?(console.warn("================== CONTROL: NOTE ON=================="),e.data[2]!=0&&this.controlTabSubject.next(e.data[1])):i==128&&console.warn("==================CONTROL: NOTE OFF==================")}clear_notesTabArray(){this.notesTab=[],this.notesTabSubject.next(this.notesTab)}refreshPianoNotes(e){this.notesTabSubject.next(e)}refreshGuitarNotes(e){this.notesTabSubject.next(e)}onMIDIFailure(e){this.MIDI_AVAILABLE=!1,this.MIDI_AVAILABLE$.next(this.MIDI_AVAILABLE),console.log(e);debugger}_midiEventCallback_GR_Roland(e){if(this.MIDI_AVAILABLE){this.getNotesTab_GR_Roland(e);for(let i=0;i<this.strings_midi_notes_values.length;i++)this.strings_midi_values[5-i]=this.strings_midi_notes_values[i],this.strings_midi_bend_values[i]!=null&&this.strings_midi_notes_values[i]!=null&&(this.strings_midi_values[5-i]+=this.strings_midi_bend_values[i]);this.refreshGuitarNotes(this.strings_midi_values)}}getNotesTab_GR_Roland(e){let i=e.data[0],r=e.data[1],s=e.data[2];if(i>=128&&i<=133){let a=i-128;this.strings_midi_notes_values[a]=null}else if(i>=144&&i<=149){let a=i-144;s>50&&(this.strings_midi_notes_values[a]=r)}else if(i>=224&&i<=229){let a=i-224;this.strings_midi_bend_values[a]=Math.round((s-63)/3)}}static{this.\u0275fac=function(i){return new(i||t)(ht(on))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Cc=(()=>{class t{constructor(e,i){this.midi=e,this.zone=i,this.cur_midi_chord=new mi({chords:[""],full_chord:null}),this.cur_abc_notes=new mi({l:"",r:""}),this.cur_guit_notes=new mi([null,null,null,null,null,null]),this.cur_piano_notes=new mi([]),this.prev_chords=[void 0],this.midi&&(this.midiNotesTab$=this.midi.notesTabSubject.subscribe(r=>{let s=this.detectMidi_as_chord(r);console.log("c =>",s),this.zone.run(()=>{this.cur_midi_chord.next(s)}),this.detectMidi_as_abc(r)}))}detectMidi_as_chord(e){let i=nn,r=qn,s=Ni,a=[...e];e=e.filter(w=>w);let l=e.map(nn.fromMidi),d=qn.detect(l);if(d[0]){d[0]=this.changeSpecificChords(d[0]);let S=/(?:\/([A-G][b#]{0,2}))?$/.exec(d[0]);if(S[1])var u=S[1],h=d[0].slice(0,S.index);else var u="",h=d[0]}let _=qn.get(h);if(_.empty||e.length<=2){_.tonic=l[0],_.root=l[0],_.full_notes=[...l];let w=/([A-G][b#]{0,2})(.?)/;for(let S=0;S<_.full_notes.length;S++){let L=_.full_notes[S].match(w);_.notes.indexOf(L[1])==-1&&_.notes.indexOf(nn.enharmonic(L[1]))!=-1&&(_.full_notes[S]=nn.enharmonic(L[1])+L[2])}return _.intervals=_.full_notes.map(S=>{let L=Ni.distance(_.tonic,S);return L=="6A"?"7m":L=="2A"?"3m":L=="4d"?"3M":L=="8A"?"9m":L=="4A"?"5d":L}),_.unfiltered_midi=a,_.midi_notes=e,_.full_notes=l,{chords:d,full_chord:_}}_.tonic=_.tonic.replace("69",""),u?_.root=u:(_.tonic=kw.midiToNoteName(e[0]),_.root=_.tonic),_.unfiltered_midi=a,_.midi_notes=e,_.full_notes=l;let b=/([A-G][b#]{0,3})(.?)/;for(let w=0;w<_.full_notes.length;w++){let S=_.full_notes[w].match(b),L;for(let R=0;R<_.notes.length;R++){let z=_.notes[R];if(nn.enharmonic(z)+S[2]==nn.enharmonic(_.full_notes[w])){L=z+S[2];break}else if(z+S[2]==nn.enharmonic(_.full_notes[w])){L=z.concat(S[2]);break}}L==null&&(_.notes.splice(w,0,S[1]),_.intervals.splice(w,0,Ni.distance(_.tonic,S[1])),L=S[1]+S[2]),_.full_notes[w]=L}return _.intervals=_.full_notes.map(w=>{let S=w.match(b);if(S==null)debugger;return _.intervals[_.notes.indexOf(S[1])]}),this.prev_chords=d,{chords:d,full_chord:_}}detectMidi_as_abc(e){e=e.filter(d=>d);let i=e.map(nn.fromMidi),r=[],s=[],a="",l="";e.map(d=>{d>=60?s.push(d):r.push(d)}),r=r.map(nn.fromMidiSharps),s=s.map(nn.fromMidiSharps),a=r.map(Ro.scientificToAbcNotation).join(""),l=s.map(Ro.scientificToAbcNotation).join(""),this.cur_abc_notes.next({l:a,r:l})}ngOnDestroy(){this.midiNotesTab$&&this.midiNotesTab$.unsubscribe()}changeSpecificChords(e){return e=="C6/G"&&(e="Am7/G"),e=="Db6/Ab"&&(e="Bbm7/Ab"),e}static{this.\u0275fac=function(i){return new(i||t)(ht(hi,8),ht(on))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var $a=(()=>{class CurTonalityModel{constructor(midi,zone,cm,transport,sm){this.midi=midi,this.zone=zone,this.cm=cm,this.transport=transport,this.sm=sm,this.current_tonality=new yn,this.current_tonality$=this.current_tonality.asObservable(),this.tonality="C",this.score_tona="C",this.score_mode="",this.part_tona="C",this.part_mode="",this.scale_tona="C",this.scale_mode="ionian",this.selected_tona="C",this.selected_mode="",this.is_locked_to_score=!0,this.refreshTonality(),this.midiControlUpdate$=this.midi.controlTabSubject.subscribe(data=>{let ctrl=this.cm.getAssignedControls(!1),o=ctrl[""+data],number,control_name,control_action;if(o&&o.length)for(let obj of o)number=obj.number,control_name=obj.control_name,control_action=obj.control_action,eval("this."+control_name)&&this.zone.run(()=>{eval("this."+control_name+'("'+control_action+'")')});else return}),this.beatChangeSub$=this.transport.beatChange.subscribe(t=>{let n=this.sm.getMeasures_hash(),e=this.sm.getMeasureByIdx(t.measure);if(!e||!Object.keys(n).length)return;this.part_tona=this.sm.getPart(n[e.getId()].part).getTonality();let i=this.part_tona[this.part_tona.length-1]=="m";this.part_mode=i?"minor":"",i&&(this.part_tona=this.part_tona.slice(0,this.part_tona.length-1)),this.scale_mode=e.scale.scale_type||null,this.scale_tona=e.scale.scale_tona||this.part_tona,this.score_tona=this.sm.getTonality(),i=this.score_tona[this.score_tona.length-1]=="m",this.score_mode=i?"minor":"",i&&(this.score_tona=this.score_tona.slice(0,this.score_tona.length-1)),this.refreshTonality()})}GLOBAL_set_tonality_and_mode(t){t=t.replace(" ","").split(","),!(t.length!=2||!/([ABCDEFG][#b]{0,2})(.*)/.exec(t[0]))&&["lydian","ionian","mixolydian","dorian","aeolian","phrygian","locrian","minor","m","major"].indexOf(t[1])!=-1&&(this.is_locked_to_score=!1,this.selected_tona=t[0].charAt(0).toUpperCase()+t[0].slice(1),this.selected_mode=t[1],this.refreshTonality())}GLOBAL_set_only_mode(t){t&&["lydian","ionian","mixolydian","dorian","aeolian","phrygian","locrian","minor","m","major"].indexOf(t)!=-1&&(this.is_locked_to_score&&(this.selected_tona=this.scale_tona||this.part_tona||this.score_tona),this.is_locked_to_score=!1,this.selected_mode=t,this.refreshTonality())}setTonality(t){t.hasOwnProperty("score_tona")?this.score_tona=t.score_tona:console.warn("curTonalityModel => setTonality : missing score_tona"),t.hasOwnProperty("selected_tona")?this.selected_tona=t.selected_tona:console.warn("curTonalityModel => setTonality : missing selected_tona"),t.hasOwnProperty("selected_mode")?this.selected_mode=t.selected_mode=="aeolian"?"minor":t.selected_mode:console.warn("curTonalityModel => setTonality : missing selected_mode"),t.hasOwnProperty("part_tona")?this.part_tona=t.part_tona:console.warn("curTonalityModel => setTonality : missing part_tona"),t.hasOwnProperty("scale_tona")?this.scale_tona=t.scale_tona:console.warn("curTonalityModel => setTonality : missing scale_tona"),t.hasOwnProperty("scale_mode")?this.scale_mode=t.scale_mode=="aeolian"?"minor":t.scale_mode:console.warn("curTonalityModel => setTonality : missing scale_mode"),t.hasOwnProperty("is_locked_to_score")?this.is_locked_to_score=t.is_locked_to_score:console.warn("curTonalityModel => setTonality : missing is_locked_to_score"),this.refreshTonality()}getTonality(){return{score_tona:this.score_tona,score_mode:this.score_mode,part_tona:this.part_tona,part_mode:this.part_mode,scale_tona:this.scale_tona,scale_mode:this.scale_mode,selected_tona:this.selected_tona,selected_mode:this.selected_mode,is_locked_to_score:this.is_locked_to_score}}refreshTonality(){this.current_tonality.next(this.getTonality())}static{this.\u0275fac=function(n){return new(n||CurTonalityModel)(ht(hi),ht(on),ht(Ci),ht(yi),ht(Hn))}}static{this.\u0275prov=lt({token:CurTonalityModel,factory:CurTonalityModel.\u0275fac})}}return CurTonalityModel})();var Za=hr($w());var Jn=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(Jn||{}),js="*";function Kw(t,n){return{type:Jn.Trigger,name:t,definitions:n,options:{}}}function Zw(t,n=null){return{type:Jn.Animate,styles:n,timings:t}}function U7(t,n=null){return{type:Jn.Sequence,steps:t,options:n}}function Bd(t){return{type:Jn.Style,styles:t,offset:null}}function eM(t){return{type:Jn.Keyframes,steps:t}}function tM(t,n,e=null){return{type:Jn.Transition,expr:t,animation:n,options:e}}var Ka=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(n=0,e=0){this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){let e=n=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Fd=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(n){this.players=n;let e=0,i=0,r=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++e==s&&this._onFinish()}),a.onDestroy(()=>{++i==s&&this._onDestroy()}),a.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((a,l)=>Math.max(a,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){let e=n*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){let n=this.players.reduce((e,i)=>e===null||i.totalTime>e.totalTime?i:e,null);return n!=null?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){let e=n=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},xu="!";var q7={zones:[{midi:0,originalPitch:6e3,keyRangeLow:42,keyRangeHigh:127,loopStart:0,loopEnd:.5,coarseTune:0,fineTune:-11,sampleRate:44100,ahdsr:!0,file:"SUQzBABAAAAAQwAAAAwBIAUFa2VyN1RQRTEAAAAJAAAAbGFsb3V0cmVUWFhYAAAACwAAAENvcHlyaWdodABUSVQyAAAABQAAAGtpY2v/+5DEAAAAAAAAAAAAAAAAAAAAAABYaW5nAAAADwAAABYAABdRACEhISEwMDAwMDw8PDxISEhISFRUVFRgYGBgYGxsbGx1dXV1dYGBgYGLi4uLi5eXl5ejo6Ojo62tra2tubm5ucLCwsLCzs7OztjY2NjY4eHh4erq6urq8fHx8fv7+/v7/////wAAAFBMQU1FMy45OXIEuQAAAAAAAAAANSAkBTtBAAHgAAAXUYMHqa0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+8DEAAAH8AF9NAAAI6IvLn87gNjX+TlZBo+UDDigIQfg+fPy4Pg+H+D4Pg4CDsEAQBBQDB8Hw/4nBwMf/LggCAY/8HAQBAEAwD4P/wQBAEAQBMHyADATETBIAiE2mBJcVSq2kXgqBZn50Rs0TR7uVBikSQOAtFoeKYcG8xBCUwNCYMAEvsYYAuAATMFQCS6rKmFjNxVWX8CjLJU0VCo+xVSlpSgTpOy7swFxMOc6AFLpVTR9wWcuLWya1L32k77OE5Ttctf+pVVpd16sBRKjmZp/pdu5FatLGcqZ9orC4GjVqZqSeGpc+16mrVaWz+6uWWWWNamvymrZ3jKr+8KbLuWNLS5dq5ZZbxtZ8s6iMRpa2Wv7WxrWt4//xmtTZ1qamxxq1qbL8o7Ka1DVvZ8yuzPMKoz4tPf/wo9rbwACXr9ttvawYLYpJv6AOGDYIoYLQQ5gnBGkQVIwAsEAJJXqbqlbxYzn0sARKnDoOg5HBYWg6y1lVSlpaLpNlJPWUmKci/bf5r5VK76lFhs25ub7C3GqflavtNdt/Xm2xf7hWn/nN///QASM2aHjXfexg1n7czYmJ1Mk8CAwFAixIRrGESNBQSZkiSTBVOnPkrg0D3dkFhcydggLXQwdfSOApQRypzdPtwfUVa+6UVewmxdyiw9ab5zUnCU4/XVPa+RQMXcEFz9x9bs4S+5U7WCet2UsIQc+q1yIbh7f3vYz2P+hlQAAhpl4j7/awA12JqzRZFhMYML4QAaCgAIYCkEIUzQwLsBC2AJbqsTgnXXZQ6NDZwjO61W46G6tJSyiQ0YlW/oG9MgTfediCoafR5ReSUZ7+vB7Ok8x8qdy9hz81tZ2R16zF+EC1qcEV951mx2+uv0AAkSZh3//+kQM3bXoxTQTDCJBpMFcAdW00gA7QaJDi4yrZdBqRrlRKAWWcgiJRG5DVW8SPAw3CqeAogU+JFlrPHg6dJckihVc0//7cMTPAA0IpTm95AAp7RxmvewkbdeRtV2JgqD+bg1ySZt5PftvqH+Prf59v9mj19/yf0WWglNBFqQseH0/1gAAQ4h1XyVtEA/CY0zeAO3MaMFAwtgGj83iZaAnxkAIVAkING5hqKqVzLnXp2DkgzH5QXXkUL9lyMuF8KimdFVTBrXX617/nsN5BRyFh7n4KNOMxVmvx22e6HsYrmTM2v/PMDYCFAYWI0CyTgsfHlXHjSpblahzKv6fd+eVr5//vpADRHmrmN//7GDWKoHMs8WMwiAVjAcBHMUBoC9RaZdxXhZNrijDPX0Y+/dR6oRBsbpdOxLkU0hK1lOaI70N0KQnNONhZqJKtlyt7Lgt+W1/JYn5SUUyJumPObVrxO58SzfWfNprbXKnAGscJxKlAaNHzsXsU1rPWqj/+2DE7wAOANU172DF6c+d5r3sGHwAAVWal3v3ujYNCj8wxawsj3GU40qMKLzBwoEAKaSCFIJIFqTFWgx4DIuUC4wmNiceOHOyKysu1cW4yEx1HNA05u5stXJTNZhplhXZb9rZJQzHSqt9Uzp/yfbEa8YSixUayLpfbcGBQiJx5J1jEgZDVMLqDc255IAAmkHAihf/////ouZdrvrW0Dk3Z9NCwc86pg+BU05oOGgJEgaVi050AzWW5w2hLbFBTQpA5VM4wACV1qBEtCLTdGkivaJpsHAq8ORuKl1whR1dDL5+S9TvvyqPF3njaYr3nIMc8asELbWly6A/Rsjb2Y25+HWU/+X/+2DE9QAQMLcr72mDYeIcZr3sGHxu6watAFJJm4h997YkDdopjM3sT0w7gKBUCU8hAiJChUaRCggNFSeaGmlF4JagsevBs1Jc4zIpSQCCwajw+HoDE6oSDETk9VSKWESpIJtqNYy4FGkF9zZ63zlZso9u1604V5dCfdt23mmRMeExZTpzQ2b6UJ01Co0shP9n/qAAJ2ypd/v7ogDG2yWMFMKQ4ZNMvHjAA8LgAABUegYAtOR9Zsj47T2zc5fkzuPteG7IULSktFSTklqyIIFGIRchkpZzSLINByClYvNeP9pm5z1rtkG+rpPIeLPBVh9oeaHjh0BHQS91SQASaMuqj/b+xA3/+2DE8AIQWNkx720hYcSYZj3tGD2B2kTKcFTOiaNURNSSAREBBkrSgMnqAQCOLWmtKVStpzQolRwU6A1AAAAmgTdA6LYw44BVbIdPGiH87jMz3cv/k9E/mb3hkkynp3i0G+FoIIvOY1/Iec+zrfdbzrOsieHOCI54Ki1p7/RtABRpupePvrpEDbwVdMwsMMFByBwFQaEiUGpHjiSE5B0rIpGrcu1/nBcCUQbAsvZBhYsFyLErMYguKsZI9eJNEcVOMLHkVaPbVdDvIU66S5SYmVbytzTPqruBiAUSjFQbJCFxM6ZFlCcN0AFQ6aKUqVqai2sAM3i7mJ//+sAMfOYgw0gejQz/+2DE7gAPMNUx72TD4aIX5n3tmDwx0kIi4VDIysaCoVe6MLZ10RxYXJ1ZUQGxycjci7Bh5VE0NJxPnJMwXZ1HJOL4TkrU1obkIe1sfmsrPWe1z8VFsd1F46jkEZlGWqqpU+TzsSGmf/6RT0Vo4ABKk3MPdvbEAbI+JplvDVmGKDIYGQEp1YZhmkhb1Acw1Y0CrDOdBrSIEd97HJq2QlAmDpqgwwqEUSH0/TjSJHqQcxA6KOakDUlk+UaYVjXOdzY+GQu+hI8R69fCUKjbb03rDfvv70f+/f0AAliJiH3/taAOQgqYznwDjKbPMoDWhBQOJSCIhE9AQCj8ziMqbq2LphcB0cv/+2DE9QAOgPE172jB4dAYJn3sIHR0oKMC5qicqIrUcDARMK6QIgThVKunt9y/B7w1o4bGWctAvYl8NNjkWH/5Qfw8p2XrrPXOX3bglm/7/1QA1aamIj/+6MA13YhDHaDQMI8B8OAgOLQcgHPBxCzaY6CCG2AP26bDYavRSjiD+hEeHJxmLjAb1A4wnDwPgWxIlZklR7Olpjx1WyyRPtVpwtxNy3G0K8NrI/VBYxh7Mhrsp3a9n5HvaN/VugAjd5p4b7/VsAwh82zD4CnPHgMQhMyiMANBIRKkVEJ4DwZZvc6R5Yk5pMIkwyaI1ialUPxEbaOizcrxiEcRFHMbZE8rmPRqRxb/+1DE+QANTKE172khqaqSpf3sGHWFbKti7J3s4xrraCE50bwR9nW1Ly/b8F/JBl62x2aW2IqkAAEWZiYvusQAOMTJ4y5xYDCuBjMEsDA4kzLCLwq6T5bkqVgzerGmKkmZauqAqWpHHvgamJCzsLIgYHNMILkA0McoYhLu1nqpsy87VVXlJ7VbGRiJ95v//8NPtNywuSOmhRYGe4z////b/p/OWM/9X0UAAVeaiY13sZAOqcNEzEAAzCNA0MDgAsD6CGhilIiy00wSJds3A78M//tgxOwADRijL+9kwemsl2Y97CB1rcBgkojL33GZOo774kID4KFY8OBrjSrqbNY8XKeKHDakwaJEH0Y1FiiskP33I+nipm5tHiI47iWswgJAoPLFmPNJQ3JNrXRV16Hfp//9H/r+oABEiad2+/tZAOIissyUwhzjgIxUBQoV2GBiG6gjWEb2uN1e9mLsQMyictvlP5JQlfha3hVbDjMkKyqyHEkiBG6LSa1NyX7LWJ4kSQio3lyd6v/au/CaB9XVebWJA6BQ0bABI4GXCcbazUuTL/V///7PoQAml5iYjfbVgAyd70jASCsNNBMKWMgXAoQyScAkBQiUBi9KvgFcFnka5A2O//tQxPoADVihL+9pIanDl+V97Jh8giMLIXEJVVDL311/TSNg/i84O7NQ2Oult1e5KUV6uDS8Gs2eztAo3d6no8EiIoEGkgbAJtpB9H7rv/////QAATPMQ7b/2EAGqbp6ZJgmJ5ZhqEJjxQGAmFBJEhgJYpa5erDpI7yR0GmRP0RsnFIlvKWbKyeSmVY4umQNxihJYkilR2SFEiSSi7WIsS9VA5S0txvrbrQGKvA9BQAtsQtNu75DRMWf/T7N//9P2su6zyoAA3eZmI33sQAN5P/7YMTpgA8wxyvvYQPhyRflfe2kPBrQyLQVjiJzQiAUNQWBRFEYoEqKJCtaabKZXHom7+41DkZD8KIJwSQTPC2scDnYZAhO+YVTRWWXJNBOKxMChFbaVr9uuhE89DDAoblRMLrqU59s///////b0//6QABeJmYf/+NAA4uR5jHGA0PWECHIkKT5V85ocbQnqLPS5VWGoFf9+4e1Tts2IGyRqM4JpLwJV+D6BDbot07LzMjNM+t8xrtrHjwKhQwLjWV30z8bc1wOh1p4OFfzP/t0dP/3//9WAusAN5iId43/sQANtJ6UxNQLTwGLtg4xH8xhizZhCFoGXxCMx6q/1WzNpcwFCv/7YMTrgA1Ery3vaSEhxBSlPe0kLMDonGGGUJazQbQZEyrP0xkTAMzEJdj0MQ2kkYipbLLOfLhNwREOwebPsOQTLrWGSgFAD9G7rGf///qp6Cv/Y7QAEbvDw8b7VoAGcDWMYJQThsVgEowjS5yAlkSs7fKhcqU09LP0VNDkSoaRRne6TolSnhM4+DwQ2jbUkarcpeWN9IznRzUXajpik7Te0QbNi4sJBPeDwq8BDUqEzR4jIWqRb1f9D/1dP68WF9f+3W2yADOIZnh//6yADIxoXMTAMc66DMLN1wyCSySpUAy7S/SgsYsMSxUzS7ZCeGWTFSTOSYUValUrgyheopSayUZS6P/7UMT1gAzomSvvaMHhnw/lPe0kPG0lttbu+tRy6WdCOrKAYcc0skNiymzBBSkZgyR/6Lrf9V3Zv/RQ2EfR6fj2AAk8Mzs1/0YABshRNGMmDgfEpskGUGWuQAsGEhWBJgpJG8VloJhuk1FUni/0CW9byILTBBp6gaE7hsRBaPNwyyRhU5Ob5vt9MrS37S8/zZXMHrVW7+n+wjvSmzxT/33rR5umYs6RRte59FUAFId3dn/3jAANnE5kFEin+YCnQgpK0IKT5Ij1F25OzTI+dXH/+2DE64ANhKEp72TBob6T5P3smDzZNPvy8mPPE5DZQgWbMt4mhpWUY3q0vGOOVb1HkUpKIYk3jA0qkxGtWAGNd07OL0dV9n+mt//Wlald6mwr/o1jpBQArNDq7Rv9DdOJJMXUA04wBFsocBydEkWDqCVke3KYEDM04SyLfU2CwgKtrOXnt3jTTGWbYSQrlmS5e57B6tzthpXW6hHJ5n3w91H1OeWmgyTEIeb01Wd03u9z/uI+Yd/swktS2UHev7i5GMSsMABZmYmYj/+wAA/Z9oxHEAyF1OjUhCoxhQmbAlezdXCSSKSEdBEMAjmoWqo1km2VshJEj/pWOw1rdvtdKeO8G2D/+1DE9YANhJsn72UhIagW5L3smCQSBAQBoOhIAmLEOHvKB08IDIr///p6/2///+z+5v3E0gBvDszxG/9ZABstSplcFpxEiiBjIomsiCrBoBjUtOedjJIqm6BHXee9VnLtghzYiLI3sK0fS4mIRVYABK5aKyWFf0J+r/////9VH/+qugb9dtdt80QAaX0RmEDA7KVwKagsXRWtFbimHM/C2JD/iadovdAGqxSkMAEFHDpghYj3ego0GUyIR403GcIXTlpSyLmY5fpTTd/Mbf97//tgxOeATLyHJ+9lISG4FiS97SQk9dqELoaPYt36r7rGBkFiFBlZ3v/jAABlOLIoP0HBBzkKWDNqL/BULeQs8CGZKIqEcNjN4DCOxiAbi+BQMIGxKBgo0ECXEAyJYSgi0Pg6w2CzAK4sFdpz1XnrPbT9aNrFr/7rquTebND5tyeqdyzFqgiFdmaHf/6MAA1JlXk2VnOrIlOhK5rlsEcMjEboYt1DOKJTfZ2IhZ6u7jFrIxfzYMeYdSQVEJBo1hQht/bWnv3t93////m9bv+jk9I0Akkct2YBmLAHPHYbt6kFKTa8yHb02xjdoOvUXdrZcyr9OZRq4xMWtdPdyhTE7k2aZ/Vk//tQxPWAC/x3Ke7lISE2kCU93AwkRTlrPd////////////7//3/TRfp/RVesiKtLozIjq9Q0swJVB2YGdneN94yACkO5RiZItAaNN1GNDqAShnmWUmKMOODGWmlClSLAK4PitcDEoOHBZgctlmi9BvxShzxWr/cy7/3V//1a6V/wh0LFtuwt+39bABFzKkUfJiWqE/LOu8c2iQ9T1z3ZD+qxuz9sVt00xZSHi5d0wvHuOhsX3Z9bdiskir//////+ltVfRWLjFx4qAzaFost2//7UMT8AAtIhyWuYGDhihDkvbwMFG/1kABGngwgWwTZ6uxXd3N7WOImWDEMHCExaSCAdeB19o9Wg1Nb4VpRBEF0NGj3JWLiMEiIbFHMBp5s7//////ut69dQUcPemNUkcMB4Z2ZnZt/o2ADIFq52sWdOYwYxaqP6WivliN3DICBBG4gFUGANwbBQZqh0O1ZPLkRLLygzsWCQVT8wPTMuKTNDIxMTqjA5QSomQJsYJoYXgsxW1lWtpcqQsAC5w0XaNNNFAVY9wuyNDrv/+z//2f/+0DE+wBJfI8n7OBgYV07I7UDCbkt9Mz2kmlUncNFSouYH1CiSgSsAABUSpxZqAYuZCyNCqw0rBpVyKgKRCQFEodCQFBgKgIkFQKIgUCqP/////////////1/49VMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7MMT5gAlIiyfsBGNhIZDkdYGYOFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7UMTzgAoIkSOsBGFB8pOj/YYZeFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xDE6oPHKCcRjGEgIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ=="}]};var B1=()=>[],L1=t=>({active:t});function Yee(t,n){if(t&1&&(ft(),p(0,"foreignObject",46),Ho(),p(1,"div",47),P(2),m()()),t&2){let e=ge();y(),E("@openClose",e.animation&&e.beat),y(),en(" ",e.beat+1," ")}}function Xee(t,n){if(t&1&&(ft(),p(0,"text",48),P(1),m()),t&2){let e=ge();y(),Tn("",e.beat+1," : ",e.subBeat+1)}}function Jee(t,n){if(t&1&&(ft(),p(0,"text",49),P(1),m()),t&2){let e=ge();y(),I0("",e.measure+1," : ",e.beat+1," : ",e.subBeat+1)}}function Qee(t,n){if(t&1&&(ft(),p(0,"text",50),P(1),m()),t&2){let e=ge();y(),en("",e.measure+1," ")}}function $ee(t,n){if(t&1){let e=mn();ft(),p(0,"circle",53),J("click",function(r){pe(e);let s=ge(2);return fe(s.toggleAccent(r))}),m()}if(t&2){let e=n.index,i=ge().index,r=ge();ae("transform",bg("rotate(",r.beat_angle*i+r.subBeat_angle*(e+1)," 90 90)")),E("ngClass",Ae(5,L1,e+1==r.subBeat&&i==r.beat)),ae("id_beat",i)("id_subbeat",e+1)}}function Kee(t,n){if(t&1){let e=mn();ft(),p(0,"g")(1,"circle",51),J("click",function(r){pe(e);let s=ge();return fe(s.toggleAccent(r))}),m(),Wt(2,$ee,1,7,"circle",52),m()}if(t&2){let e=n.index,i=ge();y(),ae("transform",bg("rotate(",i.beat_angle*e," 90 90)")),E("ngClass",Ae(5,L1,e==i.beat&&i.subBeat==0)),ae("id_beat",e),y(),E("ngForOf",dn(7,B1).constructor(i.nb_subbeat_per_beat-1))}}function Zee(t,n){if(t&1){let e=mn();p(0,"i",57),J("click",function(r){pe(e);let s=ge(2);return fe(s.toggleAccent(r))}),m()}if(t&2){let e=n.index,i=ge().index,r=ge();E("ngClass",Ae(3,L1,e==r.subBeat-1&&i==r.beat)),ae("id_beat",i)("id_subbeat",e+1)}}function ete(t,n){if(t&1){let e=mn();p(0,"span",54)(1,"i",55),J("click",function(r){pe(e);let s=ge();return fe(s.toggleAccent(r))}),m(),Wt(2,Zee,1,5,"i",56),m()}if(t&2){let e=n.index,i=ge();y(),E("ngClass",Ae(3,L1,e==i.beat&&i.subBeat==0)),ae("id_beat",e),y(),E("ngForOf",dn(5,B1).constructor(i.nb_subbeat_per_beat-1))}}function tte(t,n){if(t&1&&(p(0,"p",58),P(1),m()),t&2){let e=ge();y(),Tn("",e.beat+1," : ",e.subBeat+1)}}function nte(t,n){if(t&1&&(p(0,"p",59),P(1),m()),t&2){let e=ge();y(),I0("",e.measure+1," : ",e.beat+1," : ",e.subBeat+1)}}function ite(t,n){if(t&1&&(p(0,"p",60),P(1),m()),t&2){let e=ge();y(),en("",e.measure+1," ")}}function rte(t,n){if(t&1&&(p(0,"option",38),P(1),m()),t&2){let e=n.$implicit;E("ngValue",e.id),y(),Yt(e.name)}}var zPe=nM(),Ld=(()=>{class t{set metro_volume(e){this.volume=e}constructor(e,i,r,s){this.zone=e,this.transport=i,this.cm=r,this.sel=s,this.bpm=90,this.volume=.6,this.subBeat=0,this.beat=0,this.measure=0,this.nb_subbeat_per_beat=1,this.nb_beat_per_measure=4,this.beat_angle=0,this.subBeat_angle=0,this.accents=[],this.display="circle",this.count_display="measure",this.animation=!0,this.instrument4=q7,this.selected_tic_instrument="2",this.selected_measure_instrument="1",this.midiInputs=[],this.selectedMidiInput="None",this.midiNoteNumber=112,this.midi_increment=4,this.subBeatChangeSub=i.subBeatChange.subscribe(l=>{this.subBeat=l,this.beat=this.transport.getBeat(),this.play(this.selected_tic_instrument)}),this.beatChangeSub=i.beatChange.subscribe(l=>{this.zone.run(()=>{let d=l.beat,u=l.silent;this.beat=d,this.measure=l.measure,u||this.play(this.selected_tic_instrument)}),this.subBeat=this.transport.getSubBeat()}),this.measureChangeSub=i.measureChange.subscribe(l=>{this.measure=l,this.play(this.selected_measure_instrument)}),this.nb_beat_per_measureChangeSub=i.nb_beat_per_measureChange.subscribe(l=>{this.nb_beat_per_measure=l,this.initAccents()}),this.nb_subbeat_per_beatChangeSub=i.nb_subbeat_per_beatChange.subscribe(l=>{this.nb_subbeat_per_beat=l,this.initAccents()}),this.bpmChangeSub=i.bpmChange.subscribe(l=>{this.bpm=l}),i.set_bpm(this.bpm),this.beat_angle=90,this.subBeat_angle=90/4,this._audioContext=new AudioContext,this.output=this._audioContext.destination,this.selectionUpdate$=this.sel.selected_Update$.subscribe(l=>{let d=l[0];if(!(!d||d.getType()=="part")&&Ca.indexOf(d.meter)!=-1){let u=Ca.indexOf(d.meter);this.nb_beat_per_measure=fu[u],this.changeNb_beat_per_measure(this.nb_beat_per_measure)}}),navigator.requestMIDIAccess?navigator.requestMIDIAccess({sysex:!1}).then(this.onMIDISuccess.bind(this),this.onMIDIFailure):console.warn("No MIDI support in your browser."),this.initPlayer()}initPlayer(){let e=null;this.player=new WebAudioFontPlayer,this.player.loader.startLoad(this._audioContext,"https://surikov.github.io/webaudiofontdata/sound/12875_0_FluidR3_GM_sf2_file.js","_drum_75_0_FluidR3_GM_sf2_file"),this.player.loader.startLoad(this._audioContext,"https://surikov.github.io/webaudiofontdata/sound/12835_17_JCLive_sf2_file.js","_drum_35_17_JCLive_sf2_file"),this.player.loader.startLoad(this._audioContext,"https://surikov.github.io/webaudiofontdata/sound/12840_1_JCLive_sf2_file.js","_drum_40_1_JCLive_sf2_file"),this.player.loader.waitLoad(()=>{this.player.loader.decodeAfterLoading(this._audioContext,"_drum_75_0_FluidR3_GM_sf2_file"),this.player.loader.decodeAfterLoading(this._audioContext,"_drum_35_17_JCLive_sf2_file"),this.player.loader.decodeAfterLoading(this._audioContext,"_drum_40_1_JCLive_sf2_file"),this.instrument1=window._drum_75_0_FluidR3_GM_sf2_file,this.instrument2=window._drum_35_17_JCLive_sf2_file,this.instrument3=window._drum_40_1_JCLive_sf2_file})}ngOnInit(){this.initAccents(),this.changeNb_beat_per_measure(this.nb_subbeat_per_beat)}ngOnDestroy(){this.initAccents(),this.subBeatChangeSub.unsubscribe(),this.beatChangeSub.unsubscribe(),this.measureChangeSub.unsubscribe(),this.nb_beat_per_measureChangeSub.unsubscribe(),this.nb_subbeat_per_beatChangeSub.unsubscribe(),this.bpmChangeSub.unsubscribe(),this.selectionUpdate$.unsubscribe()}initAccents(){this.accents=new Array(this.nb_beat_per_measure);for(var e=0;e<this.nb_beat_per_measure;e++)this.accents[e]=new Array(this.nb_subbeat_per_beat);for(var e=0;e<this.nb_beat_per_measure;e++)for(var i=0;i<this.nb_subbeat_per_beat;i++)this.accents[e][i]=0}play(e=1,i=80){this.accents[this.beat]&&this.accents[this.beat][0]==1?this.player.queueWaveTable(this._audioContext,this.output,this["instrument"+e],0,i,1,this.volume*4):this.player.queueWaveTable(this._audioContext,this.output,this["instrument"+e],0,i,1,this.volume)}calcCircle(){this.beat_angle=360/this.nb_beat_per_measure,this.subBeat_angle=this.beat_angle/this.nb_subbeat_per_beat}toggleAccent(e){if(e.target.classList.contains("accent")){e.target.classList.remove("accent");var i=(0,Za.default)(document.getElementsByClassName("metro-beat")).filter((a,l)=>l.attributes.id_beat.nodeValue==Number(e.target.getAttribute("id_beat")));if(e.target.getAttribute("id_subbeat")==null||Number(e.target.getAttribute("id_subbeat"))==0)Array.from(i).forEach(a=>{(0,Za.default)(a).removeClass("accent")});else{var r=(0,Za.default)(document.getElementsByClassName("metro-subbeat")).filter((l,d)=>d.attributes.id_subbeat.nodeValue==Number(e.target.getAttribute("id_subbeat")));Array.from(r).forEach(l=>{l.getAttribute("id_beat")==e.target.getAttribute("id_beat")&&(0,Za.default)(l).removeClass("accent")})}this.accents[Number(e.target.getAttribute("id_beat"))][Number(e.target.getAttribute("id_subbeat"))]=0}else{e.target.classList.add("accent");var i=(0,Za.default)(document.getElementsByClassName(".metro-beat")).filter((s,a)=>a.attributes.id_beat.nodeValue==Number(e.target.getAttribute("id_beat")));if(e.target.getAttribute("id_subbeat")==null||Number(e.target.getAttribute("id_subbeat"))==0)Array.from(i).forEach(s=>{(0,Za.default)(s).addClass("accent")});else{var r=(0,Za.default)(document.getElementsByClassName("metro-subbeat")).filter((s,a)=>a.attributes.id_subbeat.nodeValue==Number(e.target.getAttribute("id_subbeat")));Array.from(r).forEach(s=>{s.getAttribute("id_beat")==e.target.getAttribute("id_beat")&&(0,Za.default)(s).addClass("accent")})}this.accents[Number(e.target.getAttribute("id_beat"))][Number(e.target.getAttribute("id_subbeat"))]=1}}onMIDISuccess(e){this.midi=e;for(var i=this.midi.inputs.values(),r=i.next();r&&!r.done;r=i.next())this.midiInputs.push(r.value),r.value.name.indexOf("Teensy")>-1&&(r.value.onmidimessage=s=>{this.onMIDIMessage(s)},this.selectedMidiInput=r.value.id)}changeMidiInput(){for(var e=this.midi.inputs.values(),i=e.next();i&&!i.done;i=e.next())this.selectedMidiInput==i.value.id?i.value.onmidimessage=r=>{this.onMIDIMessage(r)}:i.value.onmidimessage=null}setMeasure(e){this.measure=e}onMIDIMessage(e){let i=e.data[0],r=e.data[1],s=e.data[2];i===144&&s!=0&&r==this.midiNoteNumber&&this.transport.state!="playing"?this.zone.run(()=>{this.transport.incSubBeat(this.midi_increment)}):s==0}onMIDIFailure(e){console.log(e)}flip_card(e){event.preventDefault(),console.log("flip_card");let r="rotateY("+(e=="flipCard"?"180":"0")+"deg)";(0,Za.default)(".flip-card .flip-card-inner").css("transform",r)}changed(){}onDragStart(e){e.preventDefault()}onDrag(e){e.preventDefault()}onDragEnd(e){e.preventDefault()}changeNb_beat_per_measure(e){this.transport.setNb_beat_per_measure(e),this.calcCircle()}static{this.\u0275fac=function(i){return new(i||t)(Le(on),Le(yi),Le(Ci),Le(nr))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-metro"]],inputs:{metro_volume:"metro_volume"},standalone:!1,decls:120,vars:49,consts:[["draggable","true",2,"position","absolute","width","100%","height","100%",3,"dragstart","drag","dragover","drop","dragend"],[1,"flip-card"],["id","flipCard",1,"flip-card-inner"],[1,"flip-card-front"],["role","button",1,"metro-options",3,"click"],["title","Metronome options",1,"fas","fa-cog","p-2"],["viewBox","-25 -30 230 360","version","2.0","xmlns","http://www.w3.org/TR/SVG2",0,"xmlns","xlink","http://www.w3.org/1999/xlink",3,"contextmenu"],["height","100px","width","100px","x","40","y","47",4,"ngIf"],["x","90","y","98","style","font-size: 50px;text-anchor:middle;",4,"ngIf"],["x","90","y","98","style","font-size: 20px;text-anchor:middle;",4,"ngIf"],["x","90","y","98","style","font-size: 40px;text-anchor:middle;",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"line-display",3,"contextmenu","hidden"],["class","one-line",4,"ngFor","ngForOf"],["x","90","y","98","style","font-size: 100px;text-align:center;",4,"ngIf"],["x","90","y","98","style","font-size: 40px;text-align:center;",4,"ngIf"],["x","90","y","98","style","font-size: 80px;text-align:center;",4,"ngIf"],["id","flipCardBack",1,"flip-card-back",3,"contextmenu"],[1,"flip-card-back-wrapper"],["title","Back to Metronome",1,"fas","fa-share","p-2",2,"transform","rotate(180deg)"],[1,"main"],["for","nb_beats"],["id","nb_beats","type","number",1,"number",3,"ngModelChange","change","ngModel"],["for","nb_subdiv"],["type","number","min","1","id","nb_subdiv",1,"number",3,"ngModelChange","change","ngModel"],[1,"range-sub"],[1,"col-2"],[1,"slidecontainer"],["type","range","min","40","max","180","id","myRange",3,"ngModelChange","change","ngModel"],[2,"text-align","left"],[1,"d-flex","apply-btns"],[1,"wrapper"],[1,"title"],[1,"metro-selector",3,"change","ngModelChange","ngModel"],["value","None"],[3,"ngValue",4,"ngFor","ngForOf"],["type","number","min","0","max","127",1,"number",3,"ngModelChange","ngModel"],[1,"metro-selector",3,"ngModelChange","ngModel"],[3,"ngValue"],[1,"switch-titled","wrapper"],["title","On/Off","for","switch_metro_anim",1,"switch"],["type","checkbox","id","switch_metro_anim",1,"custom-control-input",3,"ngModelChange","ngModel"],[1,"slider","classic","round"],[1,"number"],[1,"letter"],["type","range","min","0.0001","max","0.8","step","0.01","id","myVolume_metro",3,"ngModelChange","ngModel"],["height","100px","width","100px","x","40","y","47"],[2,"font-weight","bold","font-size","50px","text-anchor","middle"],["x","90","y","98",2,"font-size","50px","text-anchor","middle"],["x","90","y","98",2,"font-size","20px","text-anchor","middle"],["x","90","y","98",2,"font-size","40px","text-anchor","middle"],["r","5","cx","90","cy","-15","id_subbeat","0","stroke","#343a40","stroke-width","1","fill","black",1,"metro-beat",3,"click","ngClass"],["r","3","cx","90","cy","-15","stroke","#343a40","stroke-width","1","fill","black","class","metro-subbeat",3,"ngClass","click",4,"ngFor","ngForOf"],["r","3","cx","90","cy","-15","stroke","#343a40","stroke-width","1","fill","black",1,"metro-subbeat",3,"click","ngClass"],[1,"one-line"],[1,"fa","fa-circle","metro-beat",3,"click","ngClass"],["class","fa fa-circle metro-subbeat",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"fa","fa-circle","metro-subbeat",3,"click","ngClass"],["x","90","y","98",2,"font-size","100px","text-align","center"],["x","90","y","98",2,"font-size","40px","text-align","center"],["x","90","y","98",2,"font-size","80px","text-align","center"]],template:function(i,r){i&1&&(p(0,"div",0),J("dragstart",function(a){return r.onDragStart(a)})("drag",function(a){return r.onDrag(a)})("dragover",function(a){return r.onDrag(a)})("drop",function(a){return r.onDragEnd(a)})("dragend",function(a){return r.onDragEnd(a)}),p(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),J("click",function(){return r.flip_card("flipCard")}),ie(5,"i",5),m(),ft(),p(6,"svg",6),J("contextmenu",function(){return r.flip_card("flipCard")}),Wt(7,Yee,3,2,"foreignObject",7)(8,Xee,2,2,"text",8)(9,Jee,2,3,"text",9)(10,Qee,2,1,"text",10)(11,Kee,3,8,"g",11),m(),Ho(),p(12,"span",12),J("contextmenu",function(){return r.flip_card("flipCard")}),Wt(13,ete,3,6,"span",13)(14,tte,2,2,"p",14)(15,nte,2,3,"p",15)(16,ite,2,1,"p",16),m()(),p(17,"div",17),J("contextmenu",function(){return r.flip_card("flipCardBack")}),p(18,"div",18)(19,"a",4),J("click",function(){return r.flip_card("flipCardBack")}),ie(20,"i",19),m(),p(21,"div",20)(22,"label",21),P(23,"Beats"),m(),p(24,"input",22),Fe("ngModelChange",function(a){return Be(r.nb_beat_per_measure,a)||(r.nb_beat_per_measure=a),a}),J("change",function(){return r.transport.setNb_beat_per_measure(r.nb_beat_per_measure),r.calcCircle()}),m(),p(25,"label",23),P(26,"SubBeats"),m(),p(27,"input",24),Fe("ngModelChange",function(a){return Be(r.nb_subbeat_per_beat,a)||(r.nb_subbeat_per_beat=a),a}),J("change",function(){return r.changeNb_beat_per_measure(r.nb_subbeat_per_beat)}),m()(),p(28,"div",25)(29,"span",26),P(30),m(),p(31,"div",27)(32,"input",28),Fe("ngModelChange",function(a){return Be(r.bpm,a)||(r.bpm=a),a}),J("change",function(){return r.transport.set_bpm(r.bpm)}),m()()(),p(33,"h6",29),P(34,"MIDI"),m(),p(35,"div",30)(36,"div",31)(37,"span",32),P(38,"Device"),m(),p(39,"select",33),J("change",function(){return r.changeMidiInput()}),Fe("ngModelChange",function(a){return Be(r.selectedMidiInput,a)||(r.selectedMidiInput=a),a}),p(40,"option",34),P(41,"None"),m(),Wt(42,rte,2,2,"option",35),m()(),p(43,"div",31)(44,"span",32),P(45,'"Trigger note" number'),m(),p(46,"input",36),Fe("ngModelChange",function(a){return Be(r.midiNoteNumber,a)||(r.midiNoteNumber=a),a}),m()(),p(47,"div",31)(48,"span",32),P(49,"Increment"),m(),p(50,"select",37),Fe("ngModelChange",function(a){return Be(r.midi_increment,a)||(r.midi_increment=a),a}),p(51,"option",38),P(52,"Beat (4th)"),m(),p(53,"option",38),P(54,"8th"),m(),p(55,"option",38),P(56,"16th"),m()()(),p(57,"h6"),P(58,"DISPLAY"),m(),p(59,"div",31)(60,"span",32),P(61,"Layout"),m(),p(62,"select",37),Fe("ngModelChange",function(a){return Be(r.display,a)||(r.display=a),a}),p(63,"option",38),P(64,"Line"),m(),p(65,"option",38),P(66,"Circle"),m()()(),p(67,"div",31)(68,"span",32),P(69,"Display count"),m(),p(70,"select",37),Fe("ngModelChange",function(a){return Be(r.count_display,a)||(r.count_display=a),a}),p(71,"option",38),P(72,"SubBeat"),m(),p(73,"option",38),P(74,"Beat"),m(),p(75,"option",38),P(76,"Measure"),m(),p(77,"option",38),P(78,"Measure only"),m()()(),p(79,"div",39)(80,"span",32),P(81,"Metronome animation"),m(),p(82,"label",40)(83,"input",41),Fe("ngModelChange",function(a){return Be(r.animation,a)||(r.animation=a),a}),m(),p(84,"span",42)(85,"span",43),P(86,"I"),m(),p(87,"span",44),P(88,"O"),m()()()(),p(89,"h6"),P(90,"SOUND"),m(),p(91,"div",31)(92,"span",32),P(93,"Tick sound"),m(),p(94,"select",37),Fe("ngModelChange",function(a){return Be(r.selected_tic_instrument,a)||(r.selected_tic_instrument=a),a}),p(95,"option",38),P(96,"1"),m(),p(97,"option",38),P(98,"2"),m(),p(99,"option",38),P(100,"3"),m(),p(101,"option",38),P(102,"4"),m()()(),p(103,"div",31)(104,"span",32),P(105,"Measure sound"),m(),p(106,"select",37),Fe("ngModelChange",function(a){return Be(r.selected_measure_instrument,a)||(r.selected_measure_instrument=a),a}),p(107,"option",38),P(108,"1"),m(),p(109,"option",38),P(110,"2"),m(),p(111,"option",38),P(112,"3"),m(),p(113,"option",38),P(114,"4"),m()()()(),p(115,"div",25)(116,"span",26),P(117,"Volume"),m(),p(118,"div",27)(119,"input",45),Fe("ngModelChange",function(a){return Be(r.cm.metroVolume,a)||(r.cm.metroVolume=a),a}),m()()()()()()()()),i&2&&(y(6),cn("visibility",r.display=="circle"?"visible":"hidden")("height",r.display=="circle"?"100%":"0%")("width",r.display=="circle"?"100%":"0%"),y(),E("ngIf",r.count_display=="beat"),y(),E("ngIf",r.count_display=="subBeat"),y(),E("ngIf",r.count_display=="measure"),y(),E("ngIf",r.count_display=="measure_only"),y(),E("ngForOf",dn(47,B1).constructor(r.nb_beat_per_measure)),y(),E("hidden",r.display=="circle"),y(),E("ngForOf",dn(48,B1).constructor(r.nb_beat_per_measure)),y(),E("ngIf",r.count_display=="subBeat"),y(),E("ngIf",r.count_display=="measure"),y(),E("ngIf",r.count_display=="measure_only"),y(8),Oe("ngModel",r.nb_beat_per_measure),y(3),Oe("ngModel",r.nb_subbeat_per_beat),y(3),en("Bpm: ",r.bpm),y(2),Oe("ngModel",r.bpm),y(7),Oe("ngModel",r.selectedMidiInput),y(3),E("ngForOf",r.midiInputs),y(4),Oe("ngModel",r.midiNoteNumber),y(4),Oe("ngModel",r.midi_increment),y(),E("ngValue",4),y(2),E("ngValue",2),y(2),E("ngValue",1),y(7),Oe("ngModel",r.display),y(),E("ngValue","line"),y(2),E("ngValue","circle"),y(5),Oe("ngModel",r.count_display),y(),E("ngValue","subBeat"),y(2),E("ngValue","beat"),y(2),E("ngValue","measure"),y(2),E("ngValue","measure_only"),y(6),Oe("ngModel",r.animation),y(11),Oe("ngModel",r.selected_tic_instrument),y(),E("ngValue","1"),y(2),E("ngValue","2"),y(2),E("ngValue","3"),y(2),E("ngValue","4"),y(5),Oe("ngModel",r.selected_measure_instrument),y(),E("ngValue","1"),y(2),E("ngValue","2"),y(2),E("ngValue","3"),y(2),E("ngValue","4"),y(6),Oe("ngModel",r.cm.metroVolume))},dependencies:[lr,gi,vr,bo,xo,Gi,Vr,ld,ro,Jo,Ti,Lo,ms,Mi],styles:['.line-display[_ngcontent-%COMP%]   .one-line[_ngcontent-%COMP%]   i.active[_ngcontent-%COMP%]{color:var(--red_nvx)}.line-display[_ngcontent-%COMP%]   .one-line[_ngcontent-%COMP%]   i.accent[_ngcontent-%COMP%]{color:var(--green_nvx)}.line-display[_ngcontent-%COMP%]   .one-line[_ngcontent-%COMP%]   i.accent.active[_ngcontent-%COMP%]{color:var(--red_nvx)}circle.active[_ngcontent-%COMP%]{stroke:var(--red_nvx);stroke-width:4px;stroke-opacity:.5}circle.accent[_ngcontent-%COMP%]{fill:var(--green_nvx)}.metro-beat[_ngcontent-%COMP%]{font-size:2em}input.number[_ngcontent-%COMP%]{width:80%}.flip-card[_ngcontent-%COMP%]{background-color:transparent;width:100%;height:100%;perspective:1000px;margin-left:auto;margin-right:auto}.flip-card-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;text-align:center;transition:transform .6s;transform-style:preserve-3d}.flip-card-front[_ngcontent-%COMP%], .flip-card-back[_ngcontent-%COMP%]{position:absolute;width:100%;height:auto;-webkit-backface-visibility:hidden;backface-visibility:hidden}.flip-card-front[_ngcontent-%COMP%]{padding:0 15px;color:#000}.line-display[_ngcontent-%COMP%]{width:100%;font-size:70%}.line-display[_ngcontent-%COMP%]   .one-line[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;margin:5px 0}a.metro-options[_ngcontent-%COMP%]{color:#fff;cursor:pointer;outline:none;height:1.5em;display:flex;justify-content:right;align-items:center;font-size:16px}a.metro-options[_ngcontent-%COMP%]:hover{text-decoration:none}.flip-card-back[_ngcontent-%COMP%]{transform:rotateY(180deg);border-radius:10px;overflow:hidden;font-size:10px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]{height:100%;padding:10px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;right:100px;border-radius:10px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;margin-right:10px;border-radius:10px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555;border-radius:10px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{font-size:14px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .range-sub[_ngcontent-%COMP%]{margin:15px 0 30px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .range-sub[_ngcontent-%COMP%]   .slidecontainer[_ngcontent-%COMP%]{width:100%}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .range-sub[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;box-shadow:-3px 7px 10px #00000040;border-radius:20px;border:1px solid var(--darkgray_nvx);height:10px;width:100%;margin-top:3px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .range-sub[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track{-webkit-appearance:none}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .range-sub[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{width:20px;height:20px;border-radius:20px;-webkit-appearance:none;cursor:ew-resize;background:linear-gradient(180deg,var(--gray_prim),var(--gray_nvx))!important;box-shadow:-20px 0 0 80px linear-gradient(180deg,var(--gray_prim),var(--gray_nvx))!important}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .range-sub[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]{font-size:12px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   input.number[_ngcontent-%COMP%]{border-radius:15px;border:none;width:40px;margin:0 10px 0 5px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   input.number[_ngcontent-%COMP%]{border-radius:15px;border:none;width:40px;margin:0}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-top:1rem}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:25px;height:14.8px;margin-bottom:0}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:var(--blue_nvx);-webkit-transition:.4s;transition:.4s}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before, .flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   .eighth[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   .sixteenth[_ngcontent-%COMP%]{position:absolute;content:"";height:13px;width:13px;left:.5px;top:.5px;background-color:#fff;-webkit-transition:.4s;transition:.4s}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:none;font-size:12px;position:absolute;top:0;color:#fff;z-index:0;font-family:nvxChord;line-height:1.4em}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider.classic[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;font-family:Roboto;font-size:11px;height:15px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{left:3px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   .letter[_ngcontent-%COMP%]{left:13.5px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider.classic[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{left:4px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider.classic[_ngcontent-%COMP%]   .letter[_ngcontent-%COMP%]{left:14px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .switch-titled.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin-bottom:2px;justify-content:flex-start}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .switch-titled.position[_ngcontent-%COMP%]{justify-content:center}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .switch-titled.position.options_menu[_ngcontent-%COMP%]{background-color:#343a40!important;position:unset;height:100%;right:100%;width:auto;min-width:0;color:#fff;padding-top:0}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .switch-titled.position.options_menu[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{vertical-align:text-bottom;margin-left:5px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .switch-titled.position.options_menu[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:after{width:15px;height:15px;top:-1px;left:0}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:10px;margin-left:1rem;width:120px;text-align:left}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:var(--green_nvx)}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px var(--green_nvx)}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{-webkit-transform:translateX(10px);-ms-transform:translateX(10px);transform:translate(10px)}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider.round[_ngcontent-%COMP%]{border-radius:34px;font-size:.5em}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider.round[_ngcontent-%COMP%]:before{border-radius:50%;z-index:1}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns.emphasis[_ngcontent-%COMP%]   .row-emph[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin:0}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns.emphasis[_ngcontent-%COMP%]   .row-emph[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:nth-child(1){margin-right:15px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns.emphasis[_ngcontent-%COMP%]   .row-emph[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:2px;margin-left:15px}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns.emphasis[_ngcontent-%COMP%]   .row-emph[_ngcontent-%COMP%]{width:100%;display:flex}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .metro-selector[_ngcontent-%COMP%]{border-radius:10px;font-size:12px;background:#343a40;color:#fff;border:1px solid #fff;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .metro-selector[_ngcontent-%COMP%]:focus-visible{outline:none}.flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;width:50%;margin-top:3px}@keyframes _ngcontent-%COMP%_changeLetter{0%{transform:scale(1)}50%{transform:scale(1.5)}to{transform:scale(2)}}.letter-changer[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_changeLetter .5s linear infinite alternate}#tempo-slider[_ngcontent-%COMP%]{position:relative;border-radius:100%;height:300px;width:300px;background:linear-gradient(90deg,#ff9a9e,#fad0c4)}.cs-handle-container[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:50%;height:2px;margin-top:-1px}.cs-handle[_ngcontent-%COMP%]{position:absolute;transform:translateY(-50%)}#tempo-slider[_ngcontent-%COMP%]   .cs-handle[_ngcontent-%COMP%]{height:30px;width:30px;right:-15px;cursor:default;border-radius:100%;background:linear-gradient(180deg,#fff,#efefef);box-shadow:#0000004d 0 1px 10px}#tempo-slider[_ngcontent-%COMP%]   .cs-handle[_ngcontent-%COMP%]:active{background:linear-gradient(180deg,#ebebeb,#dfdfdf)}'],data:{animation:[Kw("openClose",[tM("* => *",[Zw(50,eM([Bd({transform:"scale(1)",color:"blue"}),Bd({transform:"scale(2)",color:"inherit"})]))])])]}})}}return t})();var un=t=>({active:t}),Nd=(()=>{class t{set midi_chord(e){e.chords.length==0?this.display_chord({chords:[this._chord]}):(this._midi_chord=e.chords[0],this.display_chord({chords:[this._midi_chord]}))}set score_chord(e){e.length!=0&&(this._chord=e[0],this.display_chord({chords:[this._chord]}))}constructor(e,i){this.elRef=e,this.zone=i,this._fifths=["C","G","D","A","E","B","Gb","Db","Ab","Eb","Bb","F"],this._mfifths=["Am","Em","Bm","F#m","C#m","G#m","Ebm","Bbm","Fm","Cm","Gm","Dm"],this._fourths=["C","F","Bb","Eb","Ab","Db","Gb","B","E","A","D","G"],this._mfourths=["Am","Dm","Gm","Cm","Fm","Bbm","Ebm","G#m","C#m","F#m","Bm","Em"],this._afourths=[0,-1,-2,-3,-4,-5,6,5,4,3,2,1],this._afifths=[0,1,2,3,4,5,6,-5,-4,-3,-2,-1],this.selected_fifth="C",this.selected_mfifth="",this.extensions={},this._chord="C",this._midi_chord="C",this.last_visited_points=[],this.DELTA_TIME=500,this.NB_POINTS=4,this.last_trace_time=0,this.path=""}ngOnInit(){for(let e=0;e<this._fifths.length;e++)this.extensions[this._fifths[e]]=this.elRef.nativeElement.querySelector("#fifths_ext_"+this._fifths[e]);this.animation=window.requestAnimationFrame(()=>{this.chord_refresh()})}chord_refresh(){let e=performance.now();e-this.last_trace_time>this.DELTA_TIME&&(this.last_trace_time=e,this.retrace_visited_points())}ngOnDestroy(){}next_fifth(){if(this.selected_fifth!=""){let e=this._fifths.indexOf(this.selected_fifth);if(e<0){console.warn("fifth_circle next_fifth() error : invalid selected fifth");return}this.selected_fifth=this._fifths[(e+1)%12]}else{let e=this._mfifths.indexOf(this.selected_mfifth);if(e<0){console.warn("fifth_circle next_mfifth() error : invalid selected mfifth");return}this.selected_mfifth=this._mfifths[(e+1)%12]}}prev_fifth(){this.next_fourth()}prev_fourth(){this.next_fifth()}next_fourth(){if(this.selected_fifth!=""){let e=this._fifths.indexOf(this.selected_fifth);e--,e=e<0?11:e,this.selected_fifth=this._fifths[e]}else{let e=this._mfifths.indexOf(this.selected_mfifth);e--,e=e<0?11:e,this.selected_mfifth=this._mfifths[e]}}switch_to_minor(){let e=this._fifths.indexOf(this.selected_fifth);e<0||(this.selected_mfifth=this._mfifths[e],this.selected_fifth="")}switch_to_major(){let e=this._mfifths.indexOf(this.selected_mfifth);e<0||(this.selected_fifth=this._fifths[e],this.selected_mfifth="")}toggle_mode(){this.selected_fifth!=""?this.switch_to_minor():this.switch_to_major()}eventHandlerForChord(e){if(!e.notes.length){this.selected_fifth="",this.selected_mfifth="";return}e.quality=="minor"?(this.selected_mfifth=e.rootName+"m",this.selected_fifth=""):(this.selected_mfifth="",this.selected_fifth=e.rootName),this.extensions[e.rootName].innerHTML=e.name}display_chord(e){if(!e.chords.length){this.selected_fifth="",this.selected_mfifth="";return}let r=e.chords[0].match(/([ABCDEFG](#|b)*)(m+(?!a))*(\w*)/);if(r==null)return;let s=r[1],a=r[2],l=r[3],d=r[4];l=="m"?(this.selected_mfifth=s+"m",this.selected_fifth=""):(this.selected_mfifth="",this.selected_fifth=s),this.extensions.hasOwnProperty(s)&&(this.extensions[s].innerHTML=d)}retrace_visited_points(){let e=this.selected_fifth==""?this.selected_mfifth:this.selected_fifth;e!=""&&this.last_visited_points.unshift(e),this.last_visited_points.length>this.NB_POINTS&&(this.last_visited_points=this.last_visited_points.slice(0,this.NB_POINTS));let i="";for(let r=0;r<this.last_visited_points.length+1;r++){let s=this.last_visited_points[r%this.last_visited_points.length],a={};if(s=="C"||s=="Am")a={cx:"183",cy:"94"};else if(s=="G"||s=="Em")a={cx:"221",cy:"98.9"};else if(s=="D"||s=="Bm")a={cx:"259",cy:"140"};else if(s=="A"||s=="F#m"||s=="Gbm")a={cx:"272",cy:"183"};else if(s=="E"||s=="C#m"||s=="Dbm")a={cx:"262",cy:"232"};else if(s=="B"||s=="G#m"||s=="Abm")a={cx:"231",cy:"268"};else if(s=="Gb"||s=="Ebm")a={cx:"179",cy:"279"};else if(s=="Db"||s=="Bbm")a={cx:"145",cy:"268"};else if(s=="Ab"||s=="Fm")a={cx:"109",cy:"233"};else if(s=="Eb"||s=="Cm")a={cx:"97.8",cy:"181"};else if(s=="Bb"||s=="Gm")a={cx:"108",cy:"140"};else if(s=="F"||s=="Dm")a={cx:"138",cy:"104"};else continue;i=i+a.cx+","+a.cy+" "}this.zone.run(()=>{this.path=i})}static{this.\u0275fac=function(i){return new(i||t)(Le(fr),Le(on))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-fifth-circle"]],inputs:{midi_chord:"midi_chord",score_chord:"score_chord"},standalone:!1,decls:142,vars:213,consts:[["path_group",""],["id","thcircle"],[1,"wrapper"],["height","100%","width","100%","version","1.1","viewBox","-20 -20 410 410","xmlns","http://www.w3.org/2000/svg"],["id","triangle",2,"transform","translate(96px, 60px)"],["d","M 89.048118,125.60966 140.66796,-64.182915 c 0,0 -48.656768,-14.347508 -101.992068,-0.311902 9.980874,36.18067 50.372226,190.104477 50.372226,190.104477 z"],["transform","translate(0 -165)","cx","184","cy","354","r","160",1,"back-circle"],[0,"xlink","href","#triangle",1,"selection_background",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(30)",1,"selection_background",2,"transform-origin","185px 188px",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(60)",1,"selection_background",2,"transform-origin","185px 188px",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(90)",1,"selection_background",2,"transform-origin","185px 188px",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(120)",1,"selection_background",2,"transform-origin","185px 188px",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(150)",1,"selection_background",2,"transform-origin","185px 188px",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(180)",1,"selection_background",2,"transform-origin","185px 188px",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(210)",1,"selection_background",2,"transform-origin","185px 188px",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(240)",1,"selection_background",2,"transform-origin","185px 188px",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(270)",1,"selection_background",2,"transform-origin","185px 188px",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(300)",1,"selection_background",2,"transform-origin","185px 188px",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(330)",1,"selection_background",2,"transform-origin","185px 188px",3,"ngClass"],["id","path"],["cx","183","cy","98","r","1.85",1,"path_point",3,"ngClass"],["cx","229","cy","110.9","r","1.85",1,"path_point",3,"ngClass"],["cx","259","cy","145","r","1.85",1,"path_point",3,"ngClass"],["cx","272","cy","190","r","1.85",1,"path_point",3,"ngClass"],["cx","262","cy","232","r","1.85",1,"path_point",3,"ngClass"],["cx","231","cy","268","r","1.85",1,"path_point",3,"ngClass"],["cx","184","cy","279","r","1.85",1,"path_point",3,"ngClass"],["cx","135","cy","268","r","1.85",1,"path_point",3,"ngClass"],["cx","105","cy","233","r","1.85",1,"path_point",3,"ngClass"],["cx","93.8","cy","187","r","1.85",1,"path_point",3,"ngClass"],["cx","108","cy","143","r","1.85",1,"path_point",3,"ngClass"],["cx","138","cy","111","r","1.85",1,"path_point",3,"ngClass"],["transform","translate(0 -165)"],["id","major"],["x","176","y","188.36215",1,"fifths",3,"ngClass"],["x","260","y","210.36215",1,"fifths",3,"ngClass"],["x","328","y","275.36218",1,"fifths",3,"ngClass"],["x","350","y","365.36218",1,"fifths",3,"ngClass"],["x","330","y","450.36218",1,"fifths",3,"ngClass"],["x","263","y","520.36218",1,"fifths",3,"ngClass"],["x","170","y","542.36218",1,"fifths",3,"ngClass"],["x","80","y","520.36218",1,"fifths",3,"ngClass"],["x","15","y","448.36218",1,"fifths",3,"ngClass"],["x","-5","y","360.36218",1,"fifths",3,"ngClass"],["x","20","y","273.36218",1,"fifths",3,"ngClass"],["x","90","y","210.36215",1,"fifths",3,"ngClass"],["x","190","y","188.36215","id","fifths_ext_C",1,"fifths_ext",3,"ngClass"],["x","276","y","210.36215","id","fifths_ext_G",1,"fifths_ext",3,"ngClass"],["x","341","y","270.36218","id","fifths_ext_D",1,"fifths_ext",3,"ngClass"],["x","360","y","355.36218","id","fifths_ext_A",1,"fifths_ext",3,"ngClass"],["x","344","y","444.36218","id","fifths_ext_E",1,"fifths_ext",3,"ngClass"],["x","279","y","508.36218","id","fifths_ext_B",1,"fifths_ext",3,"ngClass"],["x","198","y","530.36218","id","fifths_ext_Gb",1,"fifths_ext",3,"ngClass"],["x","119","y","503.36218","id","fifths_ext_Db",1,"fifths_ext",3,"ngClass"],["x","50","y","444.36218","id","fifths_ext_Ab",1,"fifths_ext",3,"ngClass"],["x","24","y","355.36218","id","fifths_ext_Eb",1,"fifths_ext",3,"ngClass"],["x","52","y","273.36218","id","fifths_ext_Bb",1,"fifths_ext",3,"ngClass"],["x","100","y","209.36215","id","fifths_ext_F",1,"fifths_ext",3,"ngClass"],["id","minor"],["x","175.41632","y","220.34468",1,"fifths_m",3,"ngClass"],["x","175.41632","y","220.34468"],["x","105.00448","y","240.70085",1,"fifths_m",3,"ngClass"],["x","105.00448","y","240.70085"],["x","50.500919","y","292.64285",1,"fifths_m",3,"ngClass"],["x","50.500919","y","292.64285"],["x","30.585354","y","358.73105",1,"fifths_m",3,"ngClass"],["x","30.585354","y","358.73105"],["x","48.601101","y","427.13083",1,"fifths_m",3,"ngClass"],["x","48.601101","y","427.13083"],["x","98.86298","y","480.49033",1,"fifths_m",3,"ngClass"],["x","98.86298","y","480.49033"],["x","170.39803","y","502.32037",1,"fifths_m",3,"ngClass"],["x","170.39803","y","502.32037"],["x","240.19267","y","482.47498",1,"fifths_m",3,"ngClass"],["x","240.19267","y","482.47498"],["x","292.24832","y","430.80945",1,"fifths_m",3,"ngClass"],["x","292.24832","y","430.80945"],["x","315.58072","y","361.58005",1,"fifths_m",3,"ngClass"],["x","315.58072","y","361.58005"],["x","300.17484","y","292.56714",1,"fifths_m",3,"ngClass"],["x","300.17484","y","292.56714"],["x","246.66835","y","238.64746",1,"fifths_m",3,"ngClass"],["x","246.66835","y","238.64746"],["id","alter"],["x","125.66895","y","260.15071",3,"ngClass"],["x","125.66895","y","260.15071"],["x","79.568993","y","303.22482",3,"ngClass"],["x","79.568993","y","303.22482"],["x","63.265617","y","355.16306",3,"ngClass"],["x","63.265617","y","355.16306"],["x","73.656746","y","412.06149",3,"ngClass"],["x","73.656746","y","412.06149"],["x","120.36554","y","454.85345",3,"ngClass"],["x","120.36554","y","454.85345"],["x","174.23462","y","470.00009",3,"ngClass"],["x","174.23462","y","470.00009"],["x","236.70181","y","453.86963",3,"ngClass"],["x","236.70181","y","453.86963"],["x","275.71313","y","412.83527",3,"ngClass"],["x","275.71313","y","412.83527"],["x","290.86569","y","357.06415",3,"ngClass"],["x","290.86569","y","357.06415"],["x","278.18771","y","300.59937",3,"ngClass"],["x","278.18771","y","300.59937"],["x","238.54335","y","260.36159",3,"ngClass"],["x","238.54335","y","260.36159"]],template:function(i,r){i&1&&(p(0,"section",1)(1,"div",2),ft(),p(2,"svg",3)(3,"defs")(4,"g",4),ie(5,"path",5),m()(),ie(6,"circle",6)(7,"use",7)(8,"use",8)(9,"use",9)(10,"use",10)(11,"use",11)(12,"use",12)(13,"use",13)(14,"use",14)(15,"use",15)(16,"use",16)(17,"use",17)(18,"use",18),p(19,"g",19,0),ie(21,"circle",20)(22,"circle",21)(23,"circle",22)(24,"circle",23)(25,"circle",24)(26,"circle",25)(27,"circle",26)(28,"circle",27)(29,"circle",28)(30,"circle",29)(31,"circle",30)(32,"circle",31),m(),p(33,"g",32)(34,"g",33)(35,"text",34),P(36,"C"),m(),p(37,"text",35),P(38,"G"),m(),p(39,"text",36),P(40,"D"),m(),p(41,"text",37),P(42,"A"),m(),p(43,"text",38),P(44,"E"),m(),p(45,"text",39),P(46,"B"),m(),p(47,"text",40),P(48,"Gb"),m(),p(49,"text",41),P(50,"Db"),m(),p(51,"text",42),P(52,"Ab"),m(),p(53,"text",43),P(54,"Eb"),m(),p(55,"text",44),P(56,"Bb"),m(),p(57,"text",45),P(58,"F"),m(),ie(59,"text",46)(60,"text",47)(61,"text",48)(62,"text",49)(63,"text",50)(64,"text",51)(65,"text",52)(66,"text",53)(67,"text",54)(68,"text",55)(69,"text",56)(70,"text",57),m(),p(71,"g",58)(72,"text",59)(73,"tspan",60),P(74,"Am"),m()(),p(75,"text",61)(76,"tspan",62),P(77,"Dm"),m()(),p(78,"text",63)(79,"tspan",64),P(80,"Gm"),m()(),p(81,"text",65)(82,"tspan",66),P(83,"Cm"),m()(),p(84,"text",67)(85,"tspan",68),P(86,"Fm"),m()(),p(87,"text",69)(88,"tspan",70),P(89,"Bbm"),m()(),p(90,"text",71)(91,"tspan",72),P(92,"Ebm"),m()(),p(93,"text",73)(94,"tspan",74),P(95,"G#m"),m()(),p(96,"text",75)(97,"tspan",76),P(98,"C#m"),m()(),p(99,"text",77)(100,"tspan",78),P(101,"F#m"),m()(),p(102,"text",79)(103,"tspan",80),P(104,"Bm"),m()(),p(105,"text",81)(106,"tspan",82),P(107,"Em"),m()()(),p(108,"g",83)(109,"text",84)(110,"tspan",85),P(111,"b"),m()(),p(112,"text",86)(113,"tspan",87),P(114,"2 b"),m()(),p(115,"text",88)(116,"tspan",89),P(117,"3 b"),m()(),p(118,"text",90)(119,"tspan",91),P(120,"4 b"),m()(),p(121,"text",92)(122,"tspan",93),P(123,"5 b"),m()(),p(124,"text",94)(125,"tspan",95),P(126,"6 #"),m()(),p(127,"text",96)(128,"tspan",97),P(129,"5 #"),m()(),p(130,"text",98)(131,"tspan",99),P(132,"4 #"),m()(),p(133,"text",100)(134,"tspan",101),P(135,"3 #"),m()(),p(136,"text",102)(137,"tspan",103),P(138,"2 #"),m()(),p(139,"text",104)(140,"tspan",105),P(141,"#"),m()()()()()()()),i&2&&(y(7),E("ngClass",Ae(71,un,r.selected_fifth=="C"||r.selected_mfifth=="Am")),y(),E("ngClass",Ae(73,un,r.selected_fifth=="G"||r.selected_mfifth=="Em")),y(),E("ngClass",Ae(75,un,r.selected_fifth=="D"||r.selected_mfifth=="Bm")),y(),E("ngClass",Ae(77,un,r.selected_fifth=="A"||r.selected_mfifth=="F#m"||r.selected_mfifth=="Gbm")),y(),E("ngClass",Ae(79,un,r.selected_fifth=="E"||r.selected_mfifth=="C#m"||r.selected_mfifth=="Dbm")),y(),E("ngClass",Ae(81,un,r.selected_fifth=="B"||r.selected_mfifth=="G#m"||r.selected_mfifth=="Abm")),y(),E("ngClass",Ae(83,un,r.selected_fifth=="Gb"||r.selected_mfifth=="Ebm")),y(),E("ngClass",Ae(85,un,r.selected_fifth=="Db"||r.selected_mfifth=="Bbm")),y(),E("ngClass",Ae(87,un,r.selected_fifth=="Ab"||r.selected_mfifth=="Fm")),y(),E("ngClass",Ae(89,un,r.selected_fifth=="Eb"||r.selected_mfifth=="Cm")),y(),E("ngClass",Ae(91,un,r.selected_fifth=="Bb"||r.selected_mfifth=="Gm")),y(),E("ngClass",Ae(93,un,r.selected_fifth=="F"||r.selected_mfifth=="Dm")),y(3),E("ngClass",Ae(95,un,r.selected_fifth=="C"||r.selected_mfifth=="Am")),y(),E("ngClass",Ae(97,un,r.selected_fifth=="G"||r.selected_mfifth=="Em")),y(),E("ngClass",Ae(99,un,r.selected_fifth=="D"||r.selected_mfifth=="Bm")),y(),E("ngClass",Ae(101,un,r.selected_fifth=="A"||r.selected_mfifth=="F#m"||r.selected_mfifth=="Gbm")),y(),E("ngClass",Ae(103,un,r.selected_fifth=="E"||r.selected_mfifth=="C#m"||r.selected_mfifth=="Dbm")),y(),E("ngClass",Ae(105,un,r.selected_fifth=="B"||r.selected_mfifth=="G#m"||r.selected_mfifth=="Abm")),y(),E("ngClass",Ae(107,un,r.selected_fifth=="Gb"||r.selected_mfifth=="Ebm")),y(),E("ngClass",Ae(109,un,r.selected_fifth=="Db"||r.selected_mfifth=="Bbm")),y(),E("ngClass",Ae(111,un,r.selected_fifth=="Ab"||r.selected_mfifth=="Fm")),y(),E("ngClass",Ae(113,un,r.selected_fifth=="Eb"||r.selected_mfifth=="Cm")),y(),E("ngClass",Ae(115,un,r.selected_fifth=="Bb"||r.selected_mfifth=="Gm")),y(),E("ngClass",Ae(117,un,r.selected_fifth=="F"||r.selected_mfifth=="Dm")),y(3),E("ngClass",Ae(119,un,r.selected_fifth=="C")),y(2),E("ngClass",Ae(121,un,r.selected_fifth=="G")),y(2),E("ngClass",Ae(123,un,r.selected_fifth=="D")),y(2),E("ngClass",Ae(125,un,r.selected_fifth=="A")),y(2),E("ngClass",Ae(127,un,r.selected_fifth=="E")),y(2),E("ngClass",Ae(129,un,r.selected_fifth=="B")),y(2),E("ngClass",Ae(131,un,r.selected_fifth=="Gb")),y(2),E("ngClass",Ae(133,un,r.selected_fifth=="Db")),y(2),E("ngClass",Ae(135,un,r.selected_fifth=="Ab")),y(2),E("ngClass",Ae(137,un,r.selected_fifth=="Eb")),y(2),E("ngClass",Ae(139,un,r.selected_fifth=="Bb")),y(2),E("ngClass",Ae(141,un,r.selected_fifth=="F")),y(2),E("ngClass",Ae(143,un,r.selected_fifth=="C")),y(),E("ngClass",Ae(145,un,r.selected_fifth=="G")),y(),E("ngClass",Ae(147,un,r.selected_fifth=="D")),y(),E("ngClass",Ae(149,un,r.selected_fifth=="A")),y(),E("ngClass",Ae(151,un,r.selected_fifth=="E")),y(),E("ngClass",Ae(153,un,r.selected_fifth=="B")),y(),E("ngClass",Ae(155,un,r.selected_fifth=="Gb")),y(),E("ngClass",Ae(157,un,r.selected_fifth=="Db")),y(),E("ngClass",Ae(159,un,r.selected_fifth=="Ab")),y(),E("ngClass",Ae(161,un,r.selected_fifth=="Eb")),y(),E("ngClass",Ae(163,un,r.selected_fifth=="Bb")),y(),E("ngClass",Ae(165,un,r.selected_fifth=="F")),y(2),E("ngClass",Ae(167,un,r.selected_mfifth=="Am")),y(3),E("ngClass",Ae(169,un,r.selected_mfifth=="Dm")),y(3),E("ngClass",Ae(171,un,r.selected_mfifth=="Gm")),y(3),E("ngClass",Ae(173,un,r.selected_mfifth=="Cm")),y(3),E("ngClass",Ae(175,un,r.selected_mfifth=="Fm")),y(3),E("ngClass",Ae(177,un,r.selected_mfifth=="Bbm")),y(3),E("ngClass",Ae(179,un,r.selected_mfifth=="Ebm")),y(3),E("ngClass",Ae(181,un,r.selected_mfifth=="G#m")),y(3),E("ngClass",Ae(183,un,r.selected_mfifth=="C#m")),y(3),E("ngClass",Ae(185,un,r.selected_mfifth=="F#m")),y(3),E("ngClass",Ae(187,un,r.selected_mfifth=="Bm")),y(3),E("ngClass",Ae(189,un,r.selected_mfifth=="Em")),y(4),E("ngClass",Ae(191,un,r.selected_fifth=="F"||r.selected_mfifth=="Dm")),y(3),E("ngClass",Ae(193,un,r.selected_fifth=="Bb"||r.selected_mfifth=="Gm")),y(3),E("ngClass",Ae(195,un,r.selected_fifth=="Eb"||r.selected_mfifth=="Cm")),y(3),E("ngClass",Ae(197,un,r.selected_fifth=="Ab"||r.selected_mfifth=="Fm")),y(3),E("ngClass",Ae(199,un,r.selected_fifth=="Db"||r.selected_mfifth=="Bbm")),y(3),E("ngClass",Ae(201,un,r.selected_fifth=="Gb"||r.selected_mfifth=="Ebm")),y(3),E("ngClass",Ae(203,un,r.selected_fifth=="B"||r.selected_mfifth=="G#m")),y(3),E("ngClass",Ae(205,un,r.selected_fifth=="E"||r.selected_mfifth=="C#m")),y(3),E("ngClass",Ae(207,un,r.selected_fifth=="A"||r.selected_mfifth=="F#m")),y(3),E("ngClass",Ae(209,un,r.selected_fifth=="D"||r.selected_mfifth=="Bm")),y(3),E("ngClass",Ae(211,un,r.selected_fifth=="G"||r.selected_mfifth=="Em")))},dependencies:[lr],styles:['@font-face{font-family:nvxChord;src:url("./media/nvxFont.otf")}section#thcircle[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:block;position:relative;height:auto;width:85%;margin:auto}section#thcircle[_ngcontent-%COMP%]   .cObj[_ngcontent-%COMP%]{position:absolute}section#thcircle[_ngcontent-%COMP%]   .centerText[_ngcontent-%COMP%]{position:relative;width:30%;left:49%;top:37%}section#thcircle[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{fill:#b94041;stroke:#b94041}section#thcircle[_ngcontent-%COMP%]   .back-circle[_ngcontent-%COMP%]{fill:none;opacity:.522;stroke-width:.619;stroke:#000}section#thcircle[_ngcontent-%COMP%]   .fifths[_ngcontent-%COMP%]{font-family:nvxChord;font-feature-settings:normal;font-size:29.3px;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;letter-spacing:0px;line-height:0%;stroke-width:1px;word-spacing:0px}section#thcircle[_ngcontent-%COMP%]   .fifths_m[_ngcontent-%COMP%]{font-family:nvxChord;font-feature-settings:normal;font-size:23px;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25;stroke-width:.772px}section#thcircle[_ngcontent-%COMP%]   .fifths_ext[_ngcontent-%COMP%]{font-family:nvxChord;font-feature-settings:normal;font-size:25px;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;letter-spacing:0px;line-height:0%;stroke-width:1px;word-spacing:0px;opacity:0}section#thcircle[_ngcontent-%COMP%]   .fifths_ext.active[_ngcontent-%COMP%]{opacity:0}section#thcircle[_ngcontent-%COMP%]   .chord-font[_ngcontent-%COMP%]{font-family:nvxChord}section#thcircle[_ngcontent-%COMP%]   .metro[_ngcontent-%COMP%]{position:absolute;top:34.4vmin;left:28.6vmin;height:35vmin;width:auto}section#thcircle[_ngcontent-%COMP%]   .selection_background[_ngcontent-%COMP%]{opacity:0;fill:var(--blue_nvx);paint-order:markers fill stroke;stroke-linecap:round;stroke-linejoin:round;stroke-width:2;stroke:var(--green_nvx)}section#thcircle[_ngcontent-%COMP%]   .selection_background.active[_ngcontent-%COMP%]{opacity:.5}section#thcircle[_ngcontent-%COMP%]   .path_points[_ngcontent-%COMP%]{paint-order:markers fill stroke;stroke-linecap:round;stroke-linejoin:round;stroke-width:.0317;stroke:#b3b3b3}section#thcircle[_ngcontent-%COMP%]   .slices[_ngcontent-%COMP%]   .cut[_ngcontent-%COMP%]{fill:none;stroke:#000;stroke-width:.36500001;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1}section#thcircle[_ngcontent-%COMP%]   #alter[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{font-family:Lato;font-feature-settings:normal;font-size:10.2px;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;letter-spacing:0px;line-height:0%;stroke-width:.479px;word-spacing:0px}section#thcircle[_ngcontent-%COMP%]   #alter[_ngcontent-%COMP%]   tspan[_ngcontent-%COMP%]{font-family:Lato;font-feature-settings:normal;font-size:10.2px;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25;stroke-width:.479px}']})}}return t})();var R1=[["1P 3M 5P","major","M ^ "],["1P 3M 5P 7M","major seventh","maj7 \u0394 ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 \u03949 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth/ninth","69 6/9 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 \u0394#4 \u0394#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","mMa7 mMaj7 mM7 mMaj7 mM7 -\u03947 m\u0394 -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim \xB0 o"],["1P 3m 5d 7d","diminished seventh","dim7 \xB07 o7"],["1P 3m 5d 7m","half-diminished","m7b5 \xF8 -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 \u03949#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add13 67 7add6"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]];var j9=hr(R9());var Vd=(()=>{class t{constructor(){this.audioCtx=new AudioContext,j9.default.instrument(this.audioCtx,"acoustic_grand_piano").then(e=>{this.piano=e})}playNote(e){let i=this.audioCtx.currentTime,r={duration:.8},s={};this.piano.play(e,i,r,s)}playMidiNote(e){let i=this.audioCtx.currentTime,r={duration:.8},s={};this.piano.play(e,i,r,s)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();Object.defineProperty(Number.prototype,"mod",{value:function(t){return(this%t+t)%t}});Object.defineProperty(Array.prototype,"contains",{value:function(t){return this.indexOf(t)>-1}});Object.defineProperty(Array.prototype,"removeDoubles",{value:function(){return[...new Set(this)]}});Object.defineProperty(Array.prototype,"getIntervals",{value:function(){let t=this[0];return this.map((e,i,r)=>{let s=e-t,a=s.mod(12);return s>=12&&(a+=12),a})}});Object.defineProperty(Array.prototype,"sum",{value:function(){return this.map((n,e,i)=>{let r=n;for(var s=0;s<e;s++)r+=i[s];return r})}});Object.defineProperty(Array.prototype,"add",{value:function(t){return this.map((e,i,r)=>e+t)}});Object.defineProperty(Array.prototype,"rotate",{value:function(t){for(;this.length&&t<0;)t+=this.length;return this.push.apply(this,this.splice(0,t)),this}});Object.defineProperty(Array.prototype,"get_rand_in_array",{value:function(t=!0){return t?this[Math.floor(Math.random()*this.length)]:this.splice(Math.floor(Math.random()*this.length),1)}});Object.defineProperty(Object.prototype,"get_rand_in_obj",{value:function(){let t=[];for(let e of Object.keys(this))this[e]==!0&&t.push(e);let n=Math.floor(Math.random()*t.length);return t[n]}});Object.defineProperty(Object.prototype,"get_all_true_in_obj",{value:function(){let t=[];for(let n of Object.keys(this))this[n]==!0&&t.push(n);return t}});Object.defineProperty(Object.prototype,"copy",{value:function(){return JSON.parse(JSON.stringify(this))}});var Ll={chromatic:[{name:"chromatic",scale:[1,1,1,1,1,1,1,1,1,1,1,1],sharp:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],flat:["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"]}],major:[{name:"ionian",scale:[0,2,2,1,2,2,2,1],degreeFct:["maj","min","min","maj","maj","min","dim"]},{name:"dorian",scale:[0,2,1,2,2,2,1,2],degreeFct:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"phrygian",scale:[0,1,2,2,2,1,2,2],degreeFct:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"lydian",scale:[0,2,2,2,1,2,2,1],degreeFct:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"mixolidian",scale:[0,2,2,1,2,2,1,2],degreeFct:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"aeolian",scale:[0,2,1,2,2,1,2,2],degreeFct:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"locrian",scale:[0,1,2,2,1,2,2,2],degreeFct:["I","ii","iii","IV","V","vi","vii\xF8"]}],"melodic-minor":[{name:"melodic-minor",scale:[0,2,1,2,2,2,2,1],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"dorian b2",scale:[0,1,2,2,2,2,1,2],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"lydian-augmented",scale:[0,2,2,2,2,1,2,1],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"lydian-dominant",scale:[0,2,2,2,1,2,1,2],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"aeolian-dominant",scale:[0,2,2,1,2,1,2,2],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"half-diminished",scale:[0,2,1,2,1,2,2,2],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"altered",scale:[0,1,2,1,2,2,2,2],degree:["I","ii","iii","IV","V","vi","vii\xF8"]}],"harmonic-minor":[{name:"harmonic-minor",scale:[0,2,1,2,2,1,3,1],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"locrian-nat6",scale:[0,1,2,2,1,3,1,2],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"major-#5",scale:[0,2,2,1,3,1,2,1],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"dorian-#5",scale:[0,2,1,3,1,2,1,2],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"phrygian-dominant",scale:[0,1,3,1,2,1,2,2],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"lydian-sharp2",scale:[0,3,1,2,1,2,2,1],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"altered-dominant-bb7",scale:[0,1,2,1,2,2,1,3],degree:["I","ii","iii","IV","V","vi","vii\xF8"]}],"harmonic-major":[{name:"harmonic-major",scale:[0,2,2,1,2,1,3,1],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"dorian-b5",scale:[0,2,1,2,1,3,1,2],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"phrygian-b4",scale:[0,1,2,1,3,1,2,2],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"lydian-b3",scale:[0,2,1,3,1,2,2,1],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"mixolidian-b2",scale:[0,1,3,1,2,2,1,2],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"lydian-augmented-#2",scale:[0,3,1,2,2,1,2,1],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"locrian-bb7",scale:[0,1,2,2,1,2,1,3],degree:["I","ii","iii","IV","V","vi","vii\xF8"]}],diminished:[{name:"diminished",scale:[0,2,1,2,1,2,1,2,1],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"inv-diminished",scale:[0,1,2,1,2,1,2,1,2],degree:["I","ii","iii","IV","V","vi","vii\xF8"]}],"whole-tone":[{name:"whole-tone",scale:[0,2,1,2,1,2,1,2,1],degree:["I","ii","iii","IV","V","vi","vii\xF8"]}],augmented:[{name:"augmented",scale:[0,3,1,3,1,3,1],degree:["I","ii","iii","IV","V","vi","vii\xF8"]},{name:"inv-augmented",scale:[0,1,3,1,3,1,3],degree:["I","ii","iii","IV","V","vi","vii\xF8"]}],infos:{"major pentatonic":{quality:"major"},"ionian pentatonic":{quality:"major"},"mixolydian pentatonic":{quality:"major"},ritusen:{quality:"major"},egyptian:{quality:"major"},"neopolitan major pentatonic":{quality:"major"},"vietnamese 1":{quality:"major"},pelog:{quality:"major"},kumoijoshi:{quality:"major"},hirajoshi:{quality:"major"},iwato:{quality:"major"},"in-sen":{quality:"major"},"lydian pentatonic":{quality:"major"},"malkos raga":{quality:"major"},"locrian pentatonic":{quality:"minor"},"minor pentatonic":{quality:"minor"},"minor six pentatonic":{quality:"minor"},"flat three pentatonic":{quality:"major"},"flat six pentatonic":{quality:"major"},scriabin:{quality:"major"},"whole tone pentatonic":{quality:"major"},"lydian #5P pentatonic":{quality:"major"},"lydian dominant pentatonic":{quality:"major"},"minor #7M pentatonic":{quality:"minor"},"super locrian pentatonic":{quality:"minor"},"minor hexatonic":{quality:"minor"},augmented:{quality:"major"},"major blues":{quality:"major"},piongio:{quality:"major"},"prometheus neopolitan":{quality:"major"},prometheus:{quality:"major"},"mystery #1":{quality:"major"},"six tone symmetric":{quality:"major"},"whole tone":{quality:"major"},"messiaen's mode #5":{quality:"major"},"minor blues":{quality:"minor"},"locrian major":{quality:"major"},"double harmonic lydian":{quality:"major"},"harmonic minor":{quality:"minor"},altered:{quality:"major"},"locrian #2":{quality:"minor"},"mixolydian b6":{quality:"major"},"lydian dominant":{quality:"major"},lydian:{quality:"major"},"lydian augmented":{quality:"major"},"dorian b2":{quality:"minor"},"melodic minor":{quality:"minor"},locrian:{quality:"minor"},ultralocrian:{quality:"minor"},"locrian 6":{quality:"minor"},"augmented heptatonic":{quality:"major"},"dorian #4":{quality:"minor"},"lydian diminished":{quality:"major"},phrygian:{quality:"minor"},"leading whole tone":{quality:"major"},"lydian minor":{quality:"minor"},"phrygian dominant":{quality:"minor"},balinese:{quality:"major"},"neopolitan major":{quality:"major"},aeolian:{quality:"minor"},"harmonic major":{quality:"major"},"double harmonic major":{quality:"major"},dorian:{quality:"minor"},"hungarian minor":{quality:"minor"},"hungarian major":{quality:"major"},oriental:{quality:"major"},flamenco:{quality:"major"},"todi raga":{quality:"major"},mixolydian:{quality:"major"},persian:{quality:"major"},major:{quality:"major"},enigmatic:{quality:"major"},"major augmented":{quality:"major"},"lydian #9":{quality:"major"},"messiaen's mode #4":{quality:"major"},"purvi raga":{quality:"major"},"spanish heptatonic":{quality:"major"},bebop:{quality:"major"},"bebop minor":{quality:"minor"},"bebop major":{quality:"major"},"bebop locrian":{quality:"minor"},"minor bebop":{quality:"minor"},diminished:{quality:"major"},ichikosucho:{quality:"major"},"minor six diminished":{quality:"minor"},"half-whole diminished":{quality:"major"},"kafi raga":{quality:"major"},"messiaen's mode #6":{quality:"major"},"composite blues":{quality:"minor"},"messiaen's mode #3":{quality:"major"},"messiaen's mode #7":{quality:"major"},chromatic:{quality:"major"}}};var G9={"":{scale:[0,4,3]},m:{scale:[0,3,4]},m7:{scale:[0,3,4,3]},Maj:{scale:[0,4,3,4]},Maj7:{scale:[0,4,3,4]},"7":{scale:[0,4,3,3]},m7b5:{scale:[0,3,3,4]},minMaj7:{scale:[0,3,4,4]},dim7:{scale:[0,3,3,3]},aug:{scale:[0,4,4]},"Maj7#5":{scale:[0,4,4,3]},"7b5#5 ":{scale:[0,4,2,2,2]},"6#5":{scale:[0,4,4,1]},"7alt":{scale:[0,4,2,4,3]},"7alt2":{scale:[0,4,4,2,5]},"7b9":{scale:[0,3,4,3,3]},b9:{scale:[0,3,4,6]},"9":{scale:[0,3,4,3,4]},"7#9":{scale:[0,3,4,3,5]},"#9":{scale:[0,3,4,8]},Maj9:{scale:[0,4,3,4,3]},"7#11":{scale:[0,4,3,3,4,4]}};var jo={"#":["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"],b:["c","db","d","eb","e","f","gb","g","ab","a","bb","b"],isSharpTonality:{"#":["g","d","a","e","b","f#","c#"],b:["c","f","bb","eb","ab","db","gb","cb"]}};var wu=(()=>{class t{constructor(e){this.scale=Ll.major[0],this.scaleNotes=["c","d","e","f","g","a","b"],this.fifthsCycle={"#":["c","g","d","a","e","b","f#","c#","g#","d#","a#","f"],b:["c","f","bb","eb","ab","db","gb","b","e","a","d","g"]},this.getCagedPosition=function(i,r,s){let a=[2,3,4,5,6,14,15,16,17,18];switch(i){case"C":s=="major"?a=[1,2,3,12,13,14,15,24]:a=[1,2,3,4,12,13,14,15,16,24];break;case"A":a=[2,3,4,5,6,14,15,16,17,18];break;case"G":s=="major"?a=[4,5,6,7,8,16,17,18,19,20]:a=[5,6,7,8,9,17,18,19,20,21];break;case"E":s=="major"?a=[7,8,9,10,19,20,21,22]:a=[7,8,9,10,11,19,20,21,22,23];break;case"D":s=="major"?a=[9,10,11,12,13,1,21,22,23,24]:a=[10,11,12,13,1,22,23,24];break}let l=r[0].toLowerCase()+r.slice(1,r.length),d=jo["#"].indexOf(l);if(d==-1&&(d=jo.b.indexOf(l)),d==-1)return a;for(let u=0;u<a.length;u++)a[u]=(a[u]+d)%24;return a.indexOf(0)!=-1&&a.push(24),a},this.chordSubject=new mi({})}getDegreeFromRoot(e){debugger}getNotesName(e,i){return e=e.map((r,s,a)=>i[r]),e}getChordName2(e,i="c"){let r="",s=e[0]%12||0,a=this.getModNotes(e).removeDoubles(),l=a[0],d=jo.isSharpTonality["#"].indexOf(i);d==-1?d=jo.b:d=jo["#"];let u=d[(l-7).mod(12)]||"",h="normal",_=e.getIntervals(),b=_[_.indexOf(2)-1]==0,w=!_.contains(4)&&_.contains(2)&&b,S=!_.contains(4)&&_.contains(5),L=_.contains(4)&&!_.contains(10),R=_.contains(10),z=_.contains(3);if(z&&R){let ne=_.indexOf(3),Q=_.indexOf(4);Q!=-1&&Q<ne&&(z=!1)}if(L){h="";let ne=_.contains(11),Q=ne&&_.contains(2),q=!ne&&_.contains(2),T=ne&&_.contains(9),se=!ne&&_.contains(9),_e=se&&_.contains(2),Me=_.contains(6),me=ne&&_.contains(8),K=_.contains(8)&&_.contains(4)&&!_.contains(7);Me?r+="Maj11#":_e?r+="6/9":se?r+="6":me?r+="Maj13b":T?r+="Maj13":Q?r+="Maj9":K?(r+="+",h="7"):ne?r+="Maj":q&&!w&&(r+="add 9"),w&&!_e?(r+=" (sus2)",h="7"):S&&(r+=" (sus4)",h="7")}else if(R&&!z){h="7";let ne=!0,Q=_.contains(1)||_.contains(3);if(S||w){let q=_.contains(1),T=_.contains(9);q?r+="b9sus":T?r+="13":S?r+="11":w&&(r+="sus2")}else if(Q){h="7";let q=_.contains(1),T=_.contains(3),se=_.contains(9),_e=_.contains(8),Me=!1,me=!1,K=!1;q&&_e?Me=!0:q&&se||!se&&!_e&&q?me=!0:!se&&!_e&&T&&(K=!0),me?r+="79b":Me?r+="alt7":K?r+="79#":r+="alt?"}else{h="7";let q=_.contains(2),T=_.contains(9),se=_.contains(6),_e=_.contains(8)&&_.contains(10),Me=ne&&_.contains(5);se?r+="711#":T?r+="13":Me?r+="11":q?r+="9":_e?r+="+7":r+="7"}}else if(z){h="min";let ne=_.contains(6);if(ne){if(ne){h="dim";let Q=_.contains(9);_.contains(10)?r+="\xF8":Q?r+="\xB07":r+="\xB0"}}else{let Q=_.contains(10),q=_.contains(11),T=!Q&&_.contains(9),se=Q&&_.contains(2),_e=Q&&_.contains(5),Me=Q&&_.contains(9);q?r+="mMaj":T?r+="m6":Me?r+="m13":_e?r+="m11":se?r+="m9":Q?r+="m7":r+="m"}}else{h="";let ne=_.contains(11),Q=ne&&_.contains(2),q=!ne&&_.contains(2),T=ne&&_.contains(9),se=!ne&&_.contains(9),_e=se&&_.contains(2),Me=_.contains(6),me=ne&&_.contains(8)&&_.contains(2),K=_.contains(8)&&_.contains(4);Me?r+="Maj11#":_e?r+="6/9":se?r+="6":me?r+="Maj13b":T?r+="Maj13":Q?r+="Maj9":K?(r+="+",h="7"):ne?r+="Maj":q&&!w&&(r+="add 9"),w&&!_e?(r+=" (sus2)",h="7"):S&&(r+=" (sus4)",h="7")}return console.log("s => ",r),{root:s,name:r,cfunction:h,resolve:u,notes:a,intervals:_,rName:"",notesNames:[]}}getChordName3(e,i="c"){let r="",s=e[0]%12||0,a=this.getModNotes(e).removeDoubles(),l=a[0],d=jo.isSharpTonality["#"].indexOf(i);d==-1?d=jo.b:d=jo["#"];let u=d[(l-7).mod(12)]||"",h="normal",_=e.getIntervals(),b=_.contains(1),w=_.contains(2),S=_.contains(3),L=_.contains(4),R=_.contains(5),z=_.contains(6),ne=_.contains(6),Q=_.contains(7),q=_.contains(8),T=_.contains(8),se=_.contains(9),_e=_.contains(10),Me=_.contains(11),me=_.contains(12),K=_.contains(13),ue=_.contains(14),be=_.contains(15),Z=_.contains(15),oe=_.contains(16),Ee=_.contains(17),Y=_.contains(18),G=_.contains(19),le=_.contains(20),X=_.contains(21),Ue=_.contains(22),Ze=_.contains(23),De=_e||Me||Ue||Ze,xe=S||L,ke=ne&&S,Ve=q&&L,it=!1;ue&&be&&(be=!1,S=!0),b&&(r+="2b"),w&&!xe&&Q?r+="sus2":w&&(r+="2"),S&&(r+="m",it=!0),L&&(r+=""),R&&!xe&&Q?r+="sus4":R&&(r+="4"),ke&&(r+="o"),!ke&&!_e&&ne&&(r+="b5"),Ve&&(r+="+"),se&&(r+="6"),(_e||Ue)&&(r+="b7"),(Me||Ze)&&(r+="n7"),De&&K&&(r+="b9"),De&&ue&&(r+="9"),De&&be&&!S&&(r+="#9"),!De&&K&&(r+="addm2"),!De&&ue&&(r+="add2"),!De&&be&&L&&(r+="addb3"),!De&&be&&!S&&(r="m"+r,it=!0),De&&Ee&&(r+="11"),De&&Y&&(r+="#11"),!De&&Ee&&(r+="add4"),!De&&Y&&(r+="addb5"),De&&le&&(r+="b13"),De&&X&&(r+="13"),!ke&&_e&&ne&&(r+="b13"),!De&&le&&(r+="add#5"),!De&&X&&!se&&(r="6"+r),r=r.replace("mo","o"),r=r.replace("o7b","O"),r=r.replace("o6","o7bb"),r==""&&(L||oe)&&(Q||G)&&(r+="maj");var Je="major";return(it||ke)&&(Je="minor"),{root:s,name:r,cfunction:h,resolve:u,notes:a,intervals:_,rName:"",notesNames:[],quality:Je}}getRoot(e){return e[0]}getModNotes(e){return e.map((i,r,s)=>i%12)}getChord(e,i="c"){let r=this.getChordName3(e,i),s=jo.isSharpTonality["#"].indexOf(i);return s==-1?s=jo.b:s=jo["#"],r.rName=s[r.root].charAt(0).toUpperCase()+s[r.root].slice(1)||"",r.notesNames=this.getNotesName(r.notes,s),r.intervals=r.intervals.removeDoubles(),{root:r.root,rootName:r.rName,notes:r.notes,name:r.name,notesNames:r.notesNames,cfunction:r.cfunction,resolve:r.resolve,intervals:r.intervals,quality:r.quality}}getChordDegree(e,i){let r=Ll.major[1],s=i.sum().indexOf(e.root),a=r.degreeFct[s],l,d=[0];return e.dfunction=a,e}harmonizeScale(e,i="c"){let r=jo.isSharpTonality["#"].indexOf(i);r==-1?r=jo.b:r=jo["#"];let s=r.indexOf(i),a=e.scale.slice(1,e.scale.length),l={},d=[],u=0,h=0,_=[],b;for(var w=0;w<a.length;w++){for(var S=0;S<12;S+=2){for(var L=0;L<2;L++)u+=a[(L+w+S)%a.length];d.push(u),u=0}d.unshift(0),d=d.sum(),d=d.add(e.scale.sum()[w]+s),l=this.getChordName2(d,i),l.rName=r[l.root].toUpperCase()||"",l.degree=w,_.push(l),l=new Object,d=[]}return _}getScales(e){let i=e[0],r=e.slice(1);console.log(i);var s={root:"",ext:"",scales:[]};s.scales=[];let a=this.parseChordNameToNotes(i,r),l=Object.getOwnPropertyNames(Ll);for(let d of l){if(d=="chromatic")continue;let u=Ll[d];for(let h of u){let _=this.getScaleFromRoot(i,h);this.isChordInScale(a,_)==!0&&s.scales.push(_)}}return s.root=i,s.ext=r,s}parseChordNameToNotes(e,i){let r,s=G9[i];return r=this.getScaleFromRoot(e,s),r}isChordInScale(e,i){for(let r of e.notes)if(i.notes.indexOf(r)==-1)return!1;return!0}getScaleFromRoot(e,i){let r=Ll.chromatic[0].sharp,s=Ll.chromatic[0].sharp.indexOf(e);var a=[],l=s;for(let u of i.scale)l+=u,a.push(r[l%12]);let d={};return i.hasOwnProperty("name")?d={name:i.name,scale:i.scale,notes:a}:d={scale:i.scale,notes:a},d}keyToString(e){e==null&&(console.warn("musicUtil => keyToString(key) : didnt received key, taking default {fifths:0,mode:'major'}"),e={fifths:0,mode:"major"});var i;return e.fifths>=0?i=this.fifthsCycle["#"][e.fifths]:i=this.fifthsCycle.b[Math.abs(e.fifths)],i.length&&(i=i[0].toUpperCase()+i.slice(1,i.length).toLowerCase()),i}replace_double_alterations(e,i){let r=nn.simplify(e),s=[...i];for(let a=0;a<i.length;a++)for(let l=0;l<i[a].length;l++)s[a][l]==r&&(s[a][l]=e);return s}replace_double_alterations_piano(e,i){let r=nn.simplify(e),s=[...i];for(let a=0;a<i.length;a++)s[a]==r&&(s[a]=e);return s}get_scale_quality(e){let i="major";try{i=Ll.infos[e].quality}catch(r){console.log(r);let s=Ll,a=m1;console.log(e),console.log(a),console.log(s);debugger}return i}static{this.\u0275fac=function(i){return new(i||t)(ht(on))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Mne=t=>({disabled:t}),Sne=t=>({show:t}),Xt=t=>({active:t}),Pne=(t,n,e)=>({"p-misty":t,"p-summer":n,"p-fever":e}),kne=t=>({"p-summer":t});function Ene(t,n){if(t&1&&(p(0,"option",151),P(1),m()),t&2){let e=n.$implicit;E("value",e[2].split(" ")[0]),y(),Yt(e[1]||e[2].split(" ")[0])}}function Tne(t,n){if(t&1&&(ft(),p(0,"svg",152),ie(1,"path",153)(2,"path",154)(3,"path",155),p(4,"text",156),P(5),m()()),t&2){let e=n.$implicit,i=n.index,r=ge();cn("display",r.get_class_glow(i+21)?"block":"none"),ae("x",r.piano_x[i]+8)("y",r.piano_y[i]-1)("id","note_"+e+"_Glow"),y(),cn("filter",r.selected_anim=="Misty"||r.selected_anim=="Misty-time"?"url(#f2_piano) blur(12px)":""),y(),E("ngClass",ei(12,Pne,r.selected_anim=="Misty"||r.selected_anim=="Misty-time",r.selected_anim=="Summertime",r.selected_anim=="Fever")),ae("style",r.selected_anim=="Summertime"?"animation-duration:"+r.animationTime+"s;":"",gt),y(),E("ngClass",Ae(16,kne,r.selected_anim=="Misty-time")),ae("style",r.selected_anim=="Misty-time"?"animation-duration:"+r.animationTime+"s;":"",gt),y(2),Yt(r.display_mode?r.notes_active[i]:r.active_intervals[r.active_scale.indexOf(r.notes_active[i])])}}function Ane(t,n){if(t&1&&(ft(),ie(0,"image",157)),t&2){let e=n.$implicit,i=n.index,r=ge();cn("display",r.get_class_glow(i+21)&&(r.notes[e].display||!r.score_follow)&&r.activeBubbles?"block":"none"),ae("id","piano_glow_"+i)("x",r.piano_x[i]+9.25)("y",r.piano_y[i])("href","assets/img/chordEditor/"+r.notes[e].image+".png",null,"xlink")}}function Dne(t,n){if(t&1&&(ft(),ie(0,"image",158)),t&2){let e=n.$implicit,i=n.index,r=ge();cn("display",r.notes[e].display&&r.activeBubbles?"block":"none"),ae("x",r.piano_x[i]+9.25)("y",r.piano_y[i])("href","assets/img/chordEditor/"+r.notes[e].image+".png",null,"xlink")}}function Ine(t,n){if(t&1&&(ft(),ie(0,"svg",159)),t&2){let e=n.$implicit,i=n.index,r=ge();cn("display",r.active_scale.indexOf(r.notes_active[i])>-1&&r.activeLosanges?"block":"none"),E("text",r.display_mode?r.notes_active[i]:r.active_intervals[r.active_scale.indexOf(r.notes_active[i])]),ae("x",r.piano_x[i]+8)("y",r.piano_y[i]-1)("id","note_"+e+"_Diamond")}}var One=["piano-diamond",""],z9='select[_ngcontent-%COMP%]{margin:0 2.5px}.black_key[_ngcontent-%COMP%]{fill-rule:evenodd;fill:#000;stroke-linejoin:round}.white_key[_ngcontent-%COMP%]{fill-rule:evenodd;fill:#fff;stroke-linejoin:round;stroke-width:.722;stroke:#000}.active[_ngcontent-%COMP%]{fill:var(--gray_sec)}section#piano[_ngcontent-%COMP%]{background-color:#49525bdb;inset:0;margin:auto;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:30px}section#piano.modal[_ngcontent-%COMP%]{width:1450px;height:220px;overflow:hidden;bottom:auto;right:auto}section#piano[_ngcontent-%COMP%]   div#nvxPiano.modal-dialog[_ngcontent-%COMP%]{max-width:unset;pointer-events:all;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;margin:0}section#piano.modal.ui-draggable-dragging[_ngcontent-%COMP%]{-moz-transition:none;-o-transition:none;-webkit-transition:none;transition:none}section#piano.modal.nofly[_ngcontent-%COMP%]{top:58%;left:3%;-webkit-transition:opacity .3s linear;-moz-transition:opacity .3s linear;-o-transition:opacity .3s linear;transition:opacity .3s linear}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]{height:70px;display:flex;flex-direction:row;justify-content:center;align-items:center;margin:5px 0}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .diamond[_ngcontent-%COMP%]{fill:#fff;stroke:#000;opacity:1}section#piano[_ngcontent-%COMP%]   .finger[_ngcontent-%COMP%]{fill:#ff0;opacity:1;stroke-width:5;stroke:#ff0;overflow:visible;transform:scale(1.5)}section#piano[_ngcontent-%COMP%]   .p-misty[_ngcontent-%COMP%]{fill:#fff;fill-opacity:0;transform-origin:50% 50%;animation-duration:.5s;animation-name:_ngcontent-%COMP%_p-misty;animation-iteration-count:1;transform-origin:50%}@keyframes _ngcontent-%COMP%_p-misty{0%{stroke-width:5px;stroke-opacity:1;transform:scale(1.7) translate(1px,1px);filter:url(#f2_piano) blur(5px) drop-shadow(0px 0px 0px white)}to{stroke-width:0;stroke-opacity:0;transform:scale(1)}}section#piano[_ngcontent-%COMP%]   .p-summer[_ngcontent-%COMP%]{fill:#fff;fill-opacity:0;transform-origin:50% 50%;animation-name:_ngcontent-%COMP%_p-summer;animation-iteration-count:infinite}@keyframes _ngcontent-%COMP%_p-summer{0%{stroke-width:25px;stroke-opacity:1;transform:scale(.3)}to{stroke-width:0;stroke-opacity:0;transform:scale(2) translate(1px,1px)}}section#piano[_ngcontent-%COMP%]   .p-fever[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_p-fever 4s infinite;fill:transparent;stroke:#fffc00;stroke-width:10px;stroke-linejoin:bevel;stroke-linecap:round}@keyframes _ngcontent-%COMP%_p-fever{0%{filter:drop-shadow(-.75px 0px 6px #fffc00) drop-shadow(-.75px 0px 6px #fffc00);stroke:#fffc00}12.5%{filter:drop-shadow(-.75px 0px 6px #ffca00) drop-shadow(-.75px 0px 10px #ffca00);stroke:#ffca00}25%{filter:drop-shadow(-.75px 0px 6px #ffb200) drop-shadow(-.75px 0px 10px #ff9b00);stroke:#ffb200}37.5%{filter:drop-shadow(-.75px 0px 6px #ff9b00) drop-shadow(-.75px 0px 12px #ff7700);stroke:#ff9b00}50%{filter:drop-shadow(-.75px 0px 6px #ff7700) drop-shadow(-.75px 0px 10px #ff7700) drop-shadow(-.75px 0px 12px #ff5400);stroke:#f70}62.5%{filter:drop-shadow(-.75px 0px 6px #ff5400) drop-shadow(-.75px 0px 12px #ff5400) drop-shadow(-.75px 0px 14px #ff2500);stroke:#ff5400}75%{filter:drop-shadow(-.75px 0px 6px #ff2500) drop-shadow(-.75px 0px 12px #ff2500) drop-shadow(-.75px 0px 14px #ff2500) drop-shadow(-.75px 0px 16px #ff2500);stroke:#ff2500}80%{filter:drop-shadow(-.75px 0px 6px #ff5400) drop-shadow(-.75px 0px 12px #ff5400) drop-shadow(-.75px 0px 14px #ff2500);stroke:#ff5400}85%{filter:drop-shadow(-.75px 0px 6px #ff7700) drop-shadow(-.75px 0px 10px #ff7700) drop-shadow(-.75px 0px 12px #ff5400);stroke:#f70}90%{filter:drop-shadow(-.75px 0px 6px #ff9b00) drop-shadow(-.75px 0px 12px #ff7700);stroke:#ff9b00}95%{filter:drop-shadow(-.75px 0px 6px #ffb200) drop-shadow(-.75px 0px 10px #ff9b00);stroke:#ffb200}to{filter:drop-shadow(-.75px 0px 6px #ffca00) drop-shadow(-.75px 0px 10px #ffca00);stroke:#ffca00}}section#piano[_ngcontent-%COMP%]   .finger_anim_display[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;color:#fff;font-size:.65rem;margin-right:50px;margin-bottom:10px;display:flex;flex-direction:row;align-items:center}section#piano[_ngcontent-%COMP%]   .finger_anim_display[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}section#piano[_ngcontent-%COMP%]   .finger_anim_display[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#49525bdb;color:#fff;font-size:.65rem}section#piano[_ngcontent-%COMP%]   .glow-toggle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}section#piano[_ngcontent-%COMP%]   .glow-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 3px 0 10px;color:#30a348;text-shadow:0 0 6px #5ab16e}section#piano[_ngcontent-%COMP%]   .glow-toggle[_ngcontent-%COMP%]   .tgl-btn[_ngcontent-%COMP%]{margin-bottom:0}section#piano[_ngcontent-%COMP%]   .bubble_p.glow[_ngcontent-%COMP%]{filter:contrast(1.5) blur(1px);animation-duration:.3s;animation-name:_ngcontent-%COMP%_p-glow;animation-iteration-count:1;animation-fill-mode:forwards}@keyframes _ngcontent-%COMP%_p-glow{0%{transform:scale(1)}to{transform:scale(1.8)}}section#piano[_ngcontent-%COMP%]   .bubble_p[_ngcontent-%COMP%]{transform-box:fill-box;transform:scale(1.2);transform-origin:center;pointer-events:none}section#piano[_ngcontent-%COMP%]   .bubble_p.transp[_ngcontent-%COMP%]{opacity:.6}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:20px}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:0;width:20px;height:20px}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:.7em;align-items:center;display:inline-flex;margin-right:10px}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   div.double[_ngcontent-%COMP%]{margin-right:0}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   div.double.display[_ngcontent-%COMP%]{margin-right:25px}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:30px;height:30px}section#piano[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .double.display[_ngcontent-%COMP%]{margin-right:20px}section#piano[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .double[_ngcontent-%COMP%]   .display-num[_ngcontent-%COMP%]{margin-left:-25px;color:#fff;font-size:15px}section#piano[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .double[_ngcontent-%COMP%]   .display-let[_ngcontent-%COMP%]{margin-left:26px;color:#fff;font-size:15px}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]{display:none}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%], section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]:after, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]:before, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:after, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:before, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]{box-sizing:border-box}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]::-moz-selection, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]:after::-moz-selection, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]:before::-moz-selection, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]::-moz-selection, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:after::-moz-selection, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:before::-moz-selection, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]::-moz-selection{background:none}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]::selection, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]:after::selection, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]:before::selection, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]::selection, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:after::selection, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:before::selection, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]::selection{background:none}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]{outline:0;display:block;width:3.5em;height:1.6em;position:relative;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]:after, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]:before{position:relative;display:block;content:"";width:50%;height:100%}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]:after{left:0}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]:before{display:none}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl[_ngcontent-%COMP%]:checked + .tgl-btn[_ngcontent-%COMP%]:after{left:50%}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl-flat[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]{padding:2px;transition:all .2s ease;background:var(--gray_nvx);border:3px solid var(--light_prim);border-radius:2em;margin-left:auto}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl-flat[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]:after{transition:all .2s ease;background:var(--green_nvx);content:"";border-radius:1em}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl-flat[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]:after   .disabled[_ngcontent-%COMP%]{background:gray!important}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl-flat[_ngcontent-%COMP%]:checked + .tgl-btn[_ngcontent-%COMP%]{border:3px solid var(--green_nvx)}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl-flat[_ngcontent-%COMP%]:checked + .tgl-btn[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]{background:gray!important}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl-flat[_ngcontent-%COMP%]:checked + .tgl-btn[_ngcontent-%COMP%]:after{left:50%;background:var(--green_nvx)}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .tgl-flat[_ngcontent-%COMP%]:checked + .tgl-btn[_ngcontent-%COMP%]:after   .disabled[_ngcontent-%COMP%]{background:gray!important}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip][_ngcontent-%COMP%]{display:inline-block;position:absolute;cursor:help;padding:15px}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip][_ngcontent-%COMP%]:before{content:attr(data-tooltip);display:none;position:absolute;background:#000;color:#fff;padding:4px 8px;font-size:14px;line-height:1.4;min-width:100px;text-align:center;border-radius:4px}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=top][_ngcontent-%COMP%]:before, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=bottom][_ngcontent-%COMP%]:before{left:50%;-ms-transform:translateX(-50%);-moz-transform:translateX(-50%);-webkit-transform:translateX(-50%);transform:translate(-50%)}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=right][_ngcontent-%COMP%]:before, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=left][_ngcontent-%COMP%]:before{top:50%;-ms-transform:translateY(-50%);-moz-transform:translateY(-50%);-webkit-transform:translateY(-50%);transform:translateY(-50%)}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=top][_ngcontent-%COMP%]:before{bottom:70%;margin-bottom:6px}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=right][_ngcontent-%COMP%]:before{left:100%;margin-left:6px}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=bottom][_ngcontent-%COMP%]:before{top:65%;margin-top:6px}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=left][_ngcontent-%COMP%]:before{right:100%;margin-right:6px}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip][_ngcontent-%COMP%]:after{content:"";display:none;position:absolute;width:0;height:0;border-color:transparent;border-style:solid}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=top][_ngcontent-%COMP%]:after, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=bottom][_ngcontent-%COMP%]:after{left:50%;margin-left:-6px}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=right][_ngcontent-%COMP%]:after, section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=left][_ngcontent-%COMP%]:after{top:50%;margin-top:-6px}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=top][_ngcontent-%COMP%]:after{bottom:100%;border-width:6px 6px 0;border-top-color:#000}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=right][_ngcontent-%COMP%]:after{left:100%;border-width:6px 6px 6px 0;border-right-color:#000}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=bottom][_ngcontent-%COMP%]:after{top:100%;border-width:0 6px 6px;border-bottom-color:#000}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip-position=left][_ngcontent-%COMP%]:after{right:100%;border-width:6px 0 6px 6px;border-left-color:#000}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   [data-tooltip][_ngcontent-%COMP%]:hover:before{display:block;z-index:50;font-size:14px;border:1.5px solid #fff;border-radius:0;padding:2px;white-space:nowrap}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .chord-name[_ngcontent-%COMP%]{font-size:35px;position:absolute;color:#28a745;line-height:1.4em;filter:drop-shadow(2px 3px 1px black);left:55px}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%], section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]:focus-visible{outline:none}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:var(--light_prim);position:absolute;right:30px;z-index:9999}section#piano[_ngcontent-%COMP%]   div#nvxPiano[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:var(--yellow_nvx);cursor:pointer}.chords_notes_labels.piano[_ngcontent-%COMP%]{font-size:17px;font-family:nvxScale;fill:#000;stroke:none;text-anchor:middle}.bubble_p[_ngcontent-%COMP%]{transform-box:fill-box;transform:scale(1.2);transform-origin:center}.finger-diamond[_ngcontent-%COMP%]{stroke:none;fill:#000;filter:none;font-family:nvxScale;transform:translate(10px,24px);font-size:19px}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]{height:80px;width:100%;display:flex;flex-direction:row;justify-content:space-around;align-items:center}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin-right:10px}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:5px;width:30px;height:30px}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .floored[_ngcontent-%COMP%]{font-size:.7em;align-items:center;display:inline-flex;margin-right:5px;display:flex;flex-direction:row}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .floored[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{color:var(--light_prim);-webkit-appearance:none}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:after{width:20px;height:20px;inset:-5px 0 0 -5px;position:relative;background-color:var(--light_prim);content:"";display:block;visibility:visible;padding:0;border:2px solid var(--light_prim);border-radius:3px}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:after{width:20px;height:20px;inset:-5px 0 0 -5px;position:relative;background-color:var(--green_nvx);content:"";display:block;visibility:visible;border:2px solid var(--light_prim);border-radius:3px}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .switch-titled[_ngcontent-%COMP%]{width:100%;margin-bottom:2px}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{width:78px;height:19px}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{-webkit-transform:translateX(32px);-ms-transform:translateX(32px);transform:translate(32px)}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{height:11px;width:34px;left:0;top:0;border-radius:15px;border:2px solid var(--gray_nvx)}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider.classic[_ngcontent-%COMP%]   .letter[_ngcontent-%COMP%]{padding-left:2px}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider.classic[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{padding-left:4px}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider.classic[_ngcontent-%COMP%]{width:72px;color:var(--light_prim);font-size:.65rem;border-radius:15px;background-color:var(--gray_nvx);border:3px solid var(--green_nvx);line-height:.7rem;height:1.7em}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .chord-pos-related[_ngcontent-%COMP%], .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .score-pos-related[_ngcontent-%COMP%]{border-radius:0 15px;font-size:initial;position:relative}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .select-type[_ngcontent-%COMP%]{min-width:210px}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scale[_ngcontent-%COMP%]{align-items:center;margin-bottom:5px;position:relative}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .chord[_ngcontent-%COMP%]{align-items:center;position:relative}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .option-title[_ngcontent-%COMP%]{color:#fff;font-size:.75rem;font-weight:700;text-transform:uppercase}section#piano[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .rightbuttons[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end}section#piano[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:.75rem;height:auto}section#piano[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{font-size:.75rem;height:auto;background-color:#9ea6af}section#piano[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]{display:flex;align-items:center}section#piano[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:25px;height:14.8px;margin-bottom:0}section#piano[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}section#piano[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:5px 0 0;background-color:#fff;-webkit-transition:.4s;transition:.4s}section#piano[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:13px;width:13px;left:.5px;top:.5px;background-color:var(--green_nvx);-webkit-transition:.4s;transition:.4s}.disabled[_ngcontent-%COMP%]{opacity:.3}',U9=(()=>{class PianoComponent{set display(t){this.visible=t}set cur_chord(t){if(this.cm.display_piano)if(this.score_follow){this.unlight_all_glow();for(let n of t.full_chord.midi_notes)this.notes[n].glow=!0,this.notes[n].greyed=!0}else{this.lightsOff(),this._chordName=t.chords[0],this.light(t.full_chord.midi_notes,t.full_chord.intervals);for(let n of t.full_chord.midi_notes)this.notes[n].glow=!0,this.notes[n].greyed=!0;t.chords.length?(this.chord_tona=t.full_chord.tonic.replace(/[0-9]/g,""),this.chord_type=t.full_chord.aliases[0]):(this.chord_tona="",this.chord_type="")}}constructor(zone,elRef,sf,mu,sel,cm,cd,sm,midi,transport){this.zone=zone,this.elRef=elRef,this.sf=sf,this.mu=mu,this.sel=sel,this.cm=cm,this.cd=cd,this.sm=sm,this.midi=midi,this.transport=transport,this.displayChange=new Rn,this.visible=!1,this.notes=[],this.no_score_selected_scale={scale_tona:"E",scale_type:"major",full_scale:Mo.get("e major")},this.no_score_selected_chord={chord_tona:"D",chord_type:"minor",full_chord:qn.get("D minor")},this.cur_scale_full={empty:!0},this.cur_chord_full={empty:!0},this.piano_x=[114,128,139,164,179,189,204,214,239,253,264,278,289,303,314,339,354,364,379,389,414,428,439,453,464,478,489,514,529,539,554,564,589,604,614,628,639,653,664,689,705,714,730,739,764,779,789,804,814,828,839,864,880,889,905,914,939,954,964,979,989,1004,1014,1039,1055,1064,1080,1089,1114,1129,1139,1154,1164,1179,1189,1214,1230,1239,1255,1264,1289,1304,1314,1329,1339,1354,1364,1389],this.piano_y=[80,50,80,80,50,80,50,80,80,50,80,50,80,50,80,80,50,80,50,80,80,50,80,50,80,50,80,80,50,80,50,80,80,50,80,50,80,50,80,80,50,80,50,80,80,50,80,50,80,50,80,80,50,80,50,80,80,50,80,50,80,50,80,80,50,80,50,80,80,50,80,50,80,50,80,80,50,80,50,80,80,50,80,50,80,50,80,80],this.piano_midi=[21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108],this.notes_sharp=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C"],this.notes_flat=["A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C"],this.notes_active=this.notes_flat,this.active_scale=["C","D","E","F","G","A","B"],this.active_scale_quality="major",this._chordName="",this.active_intervals=["1","2","3","4","5","6","7"],this.activeBubbles=!0,this.activeLosanges=!1,this.score_follow=!0,this.cur_selection_measure=null,this.cur_selection_beat=null,this.animationTime=5,this.anim=["Misty","Summertime","Fever","Misty-time","Off"],this.selected_anim="Misty",this.glowingBubbles=!0,this.display_letters=!0,this.display_mode=!0,this.scale_tona="C",this.scale_type="major",this.chord_tona="C",this.chord_type="major",this.chord_follow_score=!0,this.scale_follow_score=!0,this.chords_list=R1,this.reverse=t=>[].reduceRight.call(t,(n,e)=>n+e),this.display_letters=this.cm.getDisplayNoteMode()=="letters",this.displayNotesMode_SUBJ_update$=this.cm.displayNotesMode_SUBJ_update$.subscribe(t=>{t=="letters"?this.display_mode=!1:this.display_mode=!0}),this.show_score_chords_SUBJ_update$=this.cm.global_show_score_chords_SUBJ$.subscribe(t=>{this.score_follow=t,this.lightsOff(),this.cur_selection_measure&&this.toggle_midi(),this.score_follow==!0&&(this.chord_tona=this.cur_chord_full.tonic,this.chord_type=this.cur_chord_full.aliases?this.cur_chord_full.aliases[0]:null)}),this.beat_selectionUpdate$=this.transport.beatChange.subscribe(t=>{let n=this.sm.getMeasureByIdx(t.measure);if(!n)return;this.cur_selection_measure=n;let e=t.beat;!n||n.getType()=="part"||(this.cur_selection_measure=n,this.cur_selection_beat=e,this.scale_follow_score&&this.refresh_from_selected_score_scale(this.cur_selection_measure),this.score_follow&&(this.chord_follow_score?(this.light_chord_from_score(n,e),this.chord_tona=this.cur_chord_full.tonic,this.chord_type=this.cur_chord_full.aliases?this.cur_chord_full.aliases[0]:null):(this.no_score_selected_chord.chord_tona=this.chord_tona,this.no_score_selected_chord.chord_type=this.chord_type,this.no_score_selected_chord.full_chord=qn.get(this.chord_tona+" "+this.chord_type),this.no_score_selected_chord.full_chord.midi_tab=[],this.no_score_selected_chord.full_chord.unfiltered_midi=[],this.light_chord(this.no_score_selected_chord.full_chord))))}),this.scaleUpdate$=this.sel.getUpdateScale().subscribe(()=>{this.refresh_scale()}),this.midiControlUpdate$=this.midi.controlTabSubject.subscribe(data=>{let ctrl=this.cm.getAssignedControls(!1),o=ctrl[""+data],number,control_name,control_action;if(o&&o.length)for(let obj of o)number=obj.number,control_name=obj.control_name,control_action=obj.control_action,this.zone.run(()=>{eval("this."+control_name)&&eval("this."+control_name+'("'+control_action+'")')});else return})}ngOnDestroy(){this.scaleUpdate$.unsubscribe(),this.midiControlUpdate$.unsubscribe()}ngOnInit(){this.lightsOff()}ngAfterViewInit(){$("#piano").draggable({handle:"#nvxPiano"})}change_animation_time(t){let n=this.sm.getMeasures_hash()[t.getIdx()].part,e=this.sm.getPart(n).getMeter(),i=Number(e.split("/")[0]);this.animationTime=(t.getAudioRegion().end-t.getAudioRegion().start)/i}onChange_animation(t){this.selected_anim=t}set_piano_key(t){this.scale_tona=t,this.scale_clicked()}set_piano_scale(t){this.scale_type=t.toLowerCase(),this.scale_type=="minor"&&(this.scale_type="aeolian"),this.scale_clicked()}set_scale_for_selected_measure(){if(this.cur_selection_measure&&this.cur_selection_measure.length){let t={scale_tona:this.scale_tona,scale_type:this.scale_type,full_scale:Mo.get(this.scale_tona+" "+this.scale_type.toLowerCase())};this.cur_selection_measure.addScale(t),console.log("adding scale =>",t,"in measure : ",this.cur_selection_measure)}}refresh_from_selected_score_scale(t){this.scale_follow_score&&(this.cur_selection_measure=t,!(!t||t.getType()=="part")&&this.zone.run(()=>{this.change_animation_time(t);let n=t.getScale();n.full_scale.empty||(this.scale_tona=n.scale_tona,this.scale_type=n.scale_type,this.refresh_scale())}))}lightsOff(){this.notes=new Array(108);for(let t=21;t<=108;t++)this.notes[t]={display:!1,greyed:!1,image:"none",glow:!1}}toggle_chord_follow_score(){this.lightsOff(),this.chord_follow_score?(this.light_chord_from_score(this.cur_selection_measure),this.chord_tona=this.cur_chord_full.tonic,this.chord_type=this.cur_chord_full.type):(this.chord_tona=this.no_score_selected_chord.chord_tona,this.chord_type=this.no_score_selected_chord.chord_type,this.no_score_selected_chord.full_chord=qn.get(this.chord_tona+" "+this.chord_type),this.no_score_selected_chord.full_chord.midi_tab=[],this.no_score_selected_chord.full_chord.unfiltered_midi=[],this.light_chord(this.no_score_selected_chord.full_chord))}toggle_scale_follow_score(){this.scale_follow_score?this.refresh_from_selected_score_scale(this.cur_selection_measure):(this.scale_tona=this.no_score_selected_scale.scale_tona,this.scale_type=this.no_score_selected_scale.scale_type,this.refresh_scale())}toggle_midi(){if(this.lightsOff(),!this.score_follow)this.chord_tona="",this.chord_type="";else{let t=this.sel.getSelection()[0];if(!t||t.getType()=="part")return;this.light_chord_from_score(this.cur_selection_measure,this.cur_selection_beat)}}light(t,n){n=n.map(e=>{let r=/([0-9]{1,2})(.*)/g.exec(e);if(!r)return;let s=Number(r[1]),a=r[2];for(;s>15;)s-=7;return s+a});for(let[e,i]of t.entries())this.notes[i].display=!0,this.notes[i].image=n[e]}light_chord_from_score(t,n){this.lightsOff();let e=null;if(!t.chords.replace(/\s/g,"").length){this.chord_tona="",this.chord_type="";return}let i=t.chords.split(" ");i.length&&(n!=null?n<i.length?e=i[n].split("/")[0]:e="":e=i[0].split("/")[0]),this._chordName=e!=""?e:this._chordName;let r;this._chordName&&(r=qn.get(this._chordName)),r!=null&&(this.cur_chord_full=r,this.zone.run(()=>{this.light_chord(r)}))}light_chord(t){let n=t.notes,e=[];for(let a=2;a<7;a++)e=e.concat(n.map(l=>l+a.toString()));e=e.map(nn.midi);let i=this.cd.detectMidi_as_chord(e),r=i.full_chord.midi_notes,s=i.full_chord.intervals;this.chord_tona=t.tonic,this.chord_type=t.type,this.lightsOff(),this.light(r,s)}play(t){let n=t.target.attributes.id.nodeValue,e=Number(n.replace("note_",""));this.sf.playMidiNote(e);let i=JSON.parse(JSON.stringify(this.notes[e]));this.light([e],["R"]),setTimeout(()=>{this.notes[e]=i},800)}scale_clicked(){this.scale_follow_score?(this.no_score_selected_scale.scale_tona=this.scale_tona,this.no_score_selected_scale.scale_type=this.scale_type):(this.no_score_selected_scale.scale_tona=this.scale_tona,this.no_score_selected_scale.scale_type=this.scale_type),this.refresh_scale()}chord_clicked(){this.chord_follow_score||(this.no_score_selected_chord.chord_tona=this.chord_tona,this.no_score_selected_chord.chord_type=this.chord_type,this.no_score_selected_chord.full_chord=qn.get(this.chord_tona+" "+this.chord_type),this.no_score_selected_chord.full_chord.midi_tab=[],this.no_score_selected_chord.full_chord.unfiltered_midi=[],this.light_chord(this.no_score_selected_chord.full_chord))}send_refresh_scale(){this.sel.updateSelection()}refresh_scale(){let t=Mo.get(this.scale_tona+" "+this.scale_type.toLowerCase());t.empty&&console.warn("refresh_scale() : NO SCALE FOUND !"),this.active_scale=[...t.notes],this.notes_active=[...this.notes_flat];for(let n of this.active_scale)if(n.indexOf("#")!=-1){this.notes_active=[...this.notes_sharp];break}for(let n of this.active_scale)(n.indexOf("bb")!=-1||n=="Cb"||n=="Fb")&&(this.notes_active=this.mu.replace_double_alterations_piano(n,this.notes_active));for(let n of this.active_scale)(n.indexOf("##")!=-1||n=="B#"||n=="E#")&&(this.notes_active=this.mu.replace_double_alterations_piano(n,this.notes_active));this.active_intervals=[...t.intervals],this.active_intervals=this.active_intervals.map(n=>{let e=n.replace("M","").replace("m","b").replace("P","").replace("d","b").replace("A","#");return this.reverse(e)}),this.active_scale_quality=this.mu.get_scale_quality(t.type)}close_piano(t=!1){t?this.visible=!this.visible:this.visible=!1,this.displayChange.emit(this.visible)}get_class_active(t){return this.notes[t].display}get_class_glow(t){return this.notes[t].glow}unlight_all_glow(){for(let t=21;t<=108;t++)this.notes[t]&&(this.notes[t].glow=!1,this.notes[t].greyed=!1)}toggle_piano_score_follow(){this.score_follow=!this.score_follow}toggle_piano_losanges(){this.activeLosanges=!this.activeLosanges}toggle_piano_chordtones(){this.activeBubbles=!this.activeBubbles}static{this.\u0275fac=function(n){return new(n||PianoComponent)(Le(on),Le(fr),Le(Vd),Le(wu),Le(nr),Le(Ci),Le(Cc),Le(Hn),Le(hi),Le(yi))}}static{this.\u0275cmp=zt({type:PianoComponent,selectors:[["app-piano"]],inputs:{display:"display",cur_chord:"cur_chord"},outputs:{displayChange:"displayChange"},standalone:!1,decls:425,vars:416,consts:[["id","piano","tabindex","-1","role","dialog",1,"modal","nofly",3,"contextmenu","hidden"],["id","nvxPiano","role","document",1,"modal-dialog"],[1,"menus"],[1,"d-flex","scaleandchords"],[1,"d-flex","scale"],[1,"option-title"],["src","assets/img/chordEditor/diamond.png","title","Scale"],[1,"floored"],["id","piano_scale_toggle","type","checkbox",1,"tgl","tgl-flat","ng-pristine","ng-untouched","ng-valid","ng-not-empty",3,"ngModelChange","ngModel"],["for","piano_scale_toggle",1,"tgl-btn"],[1,"apply-btns","score-pos-related"],[1,"switch-titled"],[1,"switch"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"slider","classic"],[1,"number"],[1,"letter"],["data-tooltip","Scale follows...","data-tooltip-position","bottom",2,"right","0px","padding","10px"],["id","tona",1,"w-auto","form-control",3,"ngModelChange","change","ngModel","disabled"],[3,"ngValue"],["name","scales_selector","id","scales",1,"w-auto","form-control","select-type",2,"text-transform","capitalize",3,"ngModelChange","change","ngModel","disabled"],["disabled",""],[1,"d-flex","chord"],["src","assets/img/chordEditor/1P.png","title","Chord"],["id","piano_chords_toggle","type","checkbox",1,"tgl","tgl-flat","ng-pristine","ng-untouched","ng-valid","ng-not-empty",3,"ngModelChange","ngModel"],["for","piano_chords_toggle",1,"tgl-btn"],[1,"apply-btns","chord-pos-related"],["type","checkbox",3,"ngModelChange","change","ngModel","disabled"],["data-tooltip","Chord tones follows...","data-tooltip-position","bottom",2,"right","0px","padding","10px"],["id","tona2",1,"w-auto","form-control",3,"ngModelChange","change","ngModel","disabled"],["value","Gb"],["name","scales_selector2","id","scales2",1,"w-auto","form-control","select-type",2,"text-transform","capitalize",3,"ngModelChange","change","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btns"],[1,"double","display",3,"ngClass"],["data-tooltip","Display degrees","data-tooltip-position","bottom",1,"display-num"],["id","display_piano","type","checkbox",1,"tgl","tgl-flat","ng-pristine","ng-untouched","ng-valid","ng-not-empty",3,"ngModelChange","ngModel","disabled"],["for","display_piano",1,"tgl-btn"],["data-tooltip","Display letters","data-tooltip-position","bottom",1,"display-let"],[1,"double"],["src","assets/img/fretboard/midi.png"],["data-tooltip","Midi","data-tooltip-position","bottom"],["id","follow_toggle","type","checkbox",1,"tgl","tgl-flat","ng-pristine","ng-untouched","ng-valid","ng-not-empty",3,"ngModelChange","change","ngModel"],["for","follow_toggle",1,"tgl-btn"],["src","assets/img/fretboard/score_icon.png"],["data-tooltip","Score","data-tooltip-position","bottom"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"contextmenu","click","ngClass"],["aria-hidden","true",1,"fa","fa-times"],[2,"height","70%","width","100%","overflow-x","scroll","overflow-y","hidden","white-space","nowrap"],["width","120%","height","100%","version","1.1","viewBox","100 60 1190 1","xmlns","http://www.w3.org/2000/svg",2,"background","#343a40 !important"],["id","f2_piano","color-interpolation-filters","sRGB"],["in","SourceAlpha","stdDeviation","4","result","imgBlur"],["in","imgBlur","surfaceScale","2","specularConstant",".75","specularExponent","20","lighting-color","#bbbbbb","result","imgSpecular"],["x","-5","y","-100","z","100"],["in","imgSpecular","in2","SourceAlpha","operator","in","result","imgMasked"],["in","SourceGraphic","in2","imgMasked","operator","arithmetic","k1","0","k2","1","k3","2","k4","0"],["transform","scale(0.9)"],["transform","translate(7.41)"],["id","note_21","d","m114 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_23","d","m139 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_24","d","m164 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_26","d","m189 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_28","d","m214 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_29","d","m239 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_31","d","m264 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_33","d","m289 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_35","d","m314 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_36","d","m339 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_38","d","m364 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_40","d","m389 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_41","d","m414 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_43","d","m439 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_45","d","m464 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_47","d","m489 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_48","d","m514 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_50","d","m539 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_52","d","m564 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_53","d","m589 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_55","d","m614 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_57","d","m639 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_59","d","m664 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_60","d","m689 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_62","d","m714 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_64","d","m739 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_65","d","m764 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_67","d","m789 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_69","d","m814 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_71","d","m839 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_72","d","m864 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_74","d","m889 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_76","d","m914 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_77","d","m939 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_79","d","m964 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_81","d","m989 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_83","d","m1014 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_84","d","m1039 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_86","d","m1064 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_88","d","m1089 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_89","d","m1114 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_91","d","m1139 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_93","d","m1164 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_95","d","m1189 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_96","d","m1214 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_98","d","m1239 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_100","d","m1264 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_101","d","m1289 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_103","d","m1314 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_105","d","m1339 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_107","d","m1364 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["id","note_108","d","m1389 10.5h24.5v96.7c-3.01 6.11-19.9 5.94-24.5 0z",1,"white_key",3,"click","ngClass"],["transform","matrix(1 0 0 1 -4.24 .000722)"],["id","note_22","d","m142 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_25","d","m193 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_27","d","m218 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_30","d","m267 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_32","d","m292 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_34","d","m317 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_37","d","m368 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_39","d","m393 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_42","d","m442 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_44","d","m467 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_46","d","m492 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_49","d","m543 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_51","d","m568 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_54","d","m618 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_56","d","m642 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_58","d","m667 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_61","d","m719 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_63","d","m744 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_66","d","m793 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_68","d","m818 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_70","d","m842 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_73","d","m894 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_75","d","m919 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_78","d","m968 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_80","d","m993 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_82","d","m1018 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_85","d","m1069 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_87","d","m1094 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_90","d","m1143 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_92","d","m1168 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_94","d","m1193 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_97","d","m1244 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_99","d","m1269 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_102","d","m1318 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_104","d","m1343 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["id","note_106","d","m1368 10.2h17.4v58c-2.14 3.66-14.2 3.56-17.4 0z",1,"black_key",3,"click","ngClass"],["width","25","height","25","viewBox","0 0 40 40","class","finger",3,"display",4,"ngFor","ngForOf"],["width","20","height","20","viewBox","0 0 40 40","class","bubble_p glow",3,"display",4,"ngFor","ngForOf"],["width","20","height","20","viewBox","0 0 40 40","alt","assets/img/chordEditor/none.png","class","bubble_p",3,"display",4,"ngFor","ngForOf"],["piano-diamond","","width","25","height","25","viewBox","0 0 40 40","class","diamond",3,"display","text",4,"ngFor","ngForOf"],[3,"value"],["width","25","height","25","viewBox","0 0 40 40",1,"finger"],["d","M 0.20267886,17.651493 17.802677,0.05149334 35.402678,17.651493 17.802677,35.251499 Z",2,"transform","scale(1)","transform-origin","50%"],["id","pulse_piano","d","M 0.20267886,17.651493 17.802677,0.05149334 35.402678,17.651493 17.802677,35.251499 Z",3,"ngClass"],["d","M 0.20267886,17.651493 17.802677,0.05149334 35.402678,17.651493 17.802677,35.251499 Z",3,"ngClass"],[1,"finger-diamond"],["width","20","height","20","viewBox","0 0 40 40",1,"bubble_p","glow"],["width","20","height","20","viewBox","0 0 40 40","alt","assets/img/chordEditor/none.png",1,"bubble_p"],["piano-diamond","","width","25","height","25","viewBox","0 0 40 40",1,"diamond",3,"text"]],template:function(n,e){n&1&&(p(0,"section",0),J("contextmenu",function(r){return e.close_piano(),r.preventDefault()}),p(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),ie(6,"img",6),m(),p(7,"div",7)(8,"input",8),Fe("ngModelChange",function(r){return Be(e.activeLosanges,r)||(e.activeLosanges=r),r}),m(),ie(9,"label",9),m(),p(10,"div",10)(11,"div",11)(12,"label",12)(13,"input",13),Fe("ngModelChange",function(r){return Be(e.scale_follow_score,r)||(e.scale_follow_score=r),r}),J("change",function(){return e.toggle_scale_follow_score()}),m(),p(14,"span",14)(15,"span",15),P(16,"Score"),m(),p(17,"span",16),P(18,"Preset"),m()()()(),ie(19,"span",17),m(),p(20,"select",18),Fe("ngModelChange",function(r){return Be(e.scale_tona,r)||(e.scale_tona=r),r}),J("change",function(){return e.scale_clicked()}),p(21,"option",19),P(22,"C#"),m(),p(23,"option",19),P(24,"F#"),m(),p(25,"option",19),P(26,"B"),m(),p(27,"option",19),P(28,"E"),m(),p(29,"option",19),P(30,"A"),m(),p(31,"option",19),P(32,"D"),m(),p(33,"option",19),P(34,"G"),m(),p(35,"option",19),P(36,"C"),m(),p(37,"option",19),P(38,"F"),m(),p(39,"option",19),P(40,"Bb"),m(),p(41,"option",19),P(42,"Eb"),m(),p(43,"option",19),P(44,"Ab"),m(),p(45,"option",19),P(46,"Db"),m(),p(47,"option",19),P(48,"Gb"),m()(),p(49,"select",20),Fe("ngModelChange",function(r){return Be(e.scale_type,r)||(e.scale_type=r),r}),J("change",function(){return e.scale_clicked()}),p(50,"option",19),P(51,"major"),m(),p(52,"option",19),P(53,"minor"),m(),p(54,"option",21),P(55,"_________"),m(),p(56,"option",19),P(57,"dorian"),m(),p(58,"option",19),P(59,"phrygian"),m(),p(60,"option",19),P(61,"lydian"),m(),p(62,"option",19),P(63,"mixolydian"),m(),p(64,"option",19),P(65,"aeolian"),m(),p(66,"option",19),P(67,"locrian"),m(),p(68,"option",21),P(69,"_________"),m(),p(70,"option",19),P(71,"major pentatonic"),m(),p(72,"option",19),P(73,"major blues"),m(),p(74,"option",19),P(75,"minor pentatonic"),m(),p(76,"option",19),P(77,"minor blues"),m(),p(78,"option",21),P(79,"_________"),m(),p(80,"option",19),P(81,"harmonic major"),m(),p(82,"option",19),P(83,"harmonic minor"),m(),p(84,"option",21),P(85,"_________"),m(),p(86,"option",19),P(87,"diminished"),m(),p(88,"option",19),P(89,"minor six diminished"),m(),p(90,"option",19),P(91,"half-whole diminished"),m(),p(92,"option",19),P(93,"composite blues"),m(),p(94,"option",21),P(95,"_________"),m(),p(96,"option",19),P(97,"bebop"),m(),p(98,"option",19),P(99,"bebop minor"),m(),p(100,"option",19),P(101,"bebop major"),m(),p(102,"option",19),P(103,"bebop locrian"),m(),p(104,"option",21),P(105,"_________"),m(),p(106,"option",19),P(107,"ionian pentatonic"),m(),p(108,"option",19),P(109,"mixolydian pentatonic"),m(),p(110,"option",19),P(111,"ritusen"),m(),p(112,"option",19),P(113,"egyptian"),m(),p(114,"option",19),P(115,"neopolitan major pentatonic"),m(),p(116,"option",19),P(117,"vietnamese 1"),m(),p(118,"option",19),P(119,"pelog"),m(),p(120,"option",19),P(121,"kumoijoshi"),m(),p(122,"option",19),P(123,"hirajoshi"),m(),p(124,"option",19),P(125,"iwato"),m(),p(126,"option",19),P(127,"in-sen"),m(),p(128,"option",19),P(129,"lydian pentatonic"),m(),p(130,"option",19),P(131,"malkos raga"),m(),p(132,"option",19),P(133,"locrian pentatonic"),m(),p(134,"option",19),P(135,"minor six pentatonic"),m(),p(136,"option",19),P(137,"flat three pentatonic"),m(),p(138,"option",19),P(139,"flat six pentatonic"),m(),p(140,"option",19),P(141,"scriabin"),m(),p(142,"option",19),P(143,"whole tone pentatonic"),m(),p(144,"option",19),P(145,"lydian #5P pentatonic"),m(),p(146,"option",19),P(147,"lydian dominant pentatonic"),m(),p(148,"option",19),P(149,"minor #7M pentatonic"),m(),p(150,"option",19),P(151,"super locrian pentatonic"),m(),p(152,"option",19),P(153,"minor hexatonic"),m(),p(154,"option",19),P(155,"augmented"),m(),p(156,"option",19),P(157,"piongio"),m(),p(158,"option",19),P(159,"prometheus neopolitan"),m(),p(160,"option",19),P(161,"prometheus"),m(),p(162,"option",19),P(163,"mystery #1"),m(),p(164,"option",19),P(165,"six tone symmetric"),m(),p(166,"option",19),P(167,"whole tone"),m(),p(168,"option",19),P(169,"messiaen's mode #5"),m(),p(170,"option",19),P(171,"locrian major"),m(),p(172,"option",19),P(173,"double harmonic lydian"),m(),p(174,"option",19),P(175,"altered"),m(),p(176,"option",19),P(177,"locrian #2"),m(),p(178,"option",19),P(179,"mixolydian b6"),m(),p(180,"option",19),P(181,"lydian dominant"),m(),p(182,"option",19),P(183,"lydian augmented"),m(),p(184,"option",19),P(185,"dorian b2"),m(),p(186,"option",19),P(187,"melodic minor"),m(),p(188,"option",19),P(189,"ultralocrian"),m(),p(190,"option",19),P(191,"locrian 6"),m(),p(192,"option",19),P(193,"augmented heptatonic"),m(),p(194,"option",19),P(195,"dorian #4"),m(),p(196,"option",19),P(197,"lydian diminished"),m(),p(198,"option",19),P(199,"leading whole tone"),m(),p(200,"option",19),P(201,"lydian minor"),m(),p(202,"option",19),P(203,"phrygian dominant"),m(),p(204,"option",19),P(205,"balinese"),m(),p(206,"option",19),P(207,"neopolitan major"),m(),p(208,"option",19),P(209,"double harmonic major"),m(),p(210,"option",19),P(211,"hungarian minor"),m(),p(212,"option",19),P(213,"hungarian major"),m(),p(214,"option",19),P(215,"oriental"),m(),p(216,"option",19),P(217,"flamenco"),m(),p(218,"option",19),P(219,"todi raga"),m(),p(220,"option",19),P(221,"persian"),m(),p(222,"option",19),P(223,"enigmatic"),m(),p(224,"option",19),P(225,"major augmented"),m(),p(226,"option",19),P(227,"lydian #9"),m(),p(228,"option",19),P(229,"purvi raga"),m(),p(230,"option",19),P(231,"spanish heptatonic"),m(),p(232,"option",19),P(233,"minor bebop"),m(),p(234,"option",19),P(235,"ichikosucho"),m(),p(236,"option",19),P(237,"kafi raga"),m(),p(238,"option",19),P(239,"messiaen's mode #6"),m(),p(240,"option",19),P(241,"messiaen's mode #4"),m(),p(242,"option",19),P(243,"messiaen's mode #3"),m(),p(244,"option",19),P(245,"messiaen's mode #7"),m(),p(246,"option",19),P(247,"chromatic"),m()()(),p(248,"div",22)(249,"span",5),ie(250,"img",23),m(),p(251,"div",7)(252,"input",24),Fe("ngModelChange",function(r){return Be(e.activeBubbles,r)||(e.activeBubbles=r),r}),m(),ie(253,"label",25),m(),p(254,"div",26)(255,"div",11)(256,"label",12)(257,"input",27),Fe("ngModelChange",function(r){return Be(e.chord_follow_score,r)||(e.chord_follow_score=r),r}),J("change",function(){return e.toggle_chord_follow_score()}),m(),p(258,"span",14)(259,"span",15),P(260,"Score"),m(),p(261,"span",16),P(262,"Preset"),m()()()(),ie(263,"span",28),m(),p(264,"select",29),Fe("ngModelChange",function(r){return Be(e.chord_tona,r)||(e.chord_tona=r),r}),J("change",function(){return e.chord_clicked()}),p(265,"option",19),P(266,"C#"),m(),p(267,"option",19),P(268,"Gb"),m(),p(269,"option",19),P(270,"F#"),m(),p(271,"option",19),P(272,"B"),m(),p(273,"option",19),P(274,"E"),m(),p(275,"option",19),P(276,"A"),m(),p(277,"option",19),P(278,"D"),m(),p(279,"option",19),P(280,"G"),m(),p(281,"option",19),P(282,"C"),m(),p(283,"option",19),P(284,"F"),m(),p(285,"option",19),P(286,"Bb"),m(),p(287,"option",19),P(288,"A#"),m(),p(289,"option",19),P(290,"Eb"),m(),p(291,"option",19),P(292,"D#"),m(),p(293,"option",19),P(294,"Ab"),m(),p(295,"option",19),P(296,"G#"),m(),p(297,"option",19),P(298,"Db"),m(),p(299,"option",30),P(300,"Gb"),m()(),p(301,"select",31),Fe("ngModelChange",function(r){return Be(e.chord_type,r)||(e.chord_type=r),r}),J("change",function(){return e.chord_clicked()}),Wt(302,Ene,2,2,"option",32),m()()(),p(303,"div",33)(304,"div",34)(305,"span",35),P(306,"1"),m(),p(307,"input",36),Fe("ngModelChange",function(r){return Be(e.display_mode,r)||(e.display_mode=r),r}),m(),ie(308,"label",37),p(309,"span",38),P(310,"A"),m()(),p(311,"div",39),ie(312,"img",40)(313,"span",41),p(314,"input",42),Fe("ngModelChange",function(r){return Be(e.score_follow,r)||(e.score_follow=r),r}),J("change",function(){return e.toggle_midi()}),m(),ie(315,"label",43),m(),p(316,"div"),ie(317,"img",44)(318,"span",45),m()(),p(319,"button",46),J("contextmenu",function(r){return e.close_piano(!0),r.preventDefault()})("click",function(){return e.close_piano(!0)}),ie(320,"span",47),m()(),p(321,"div",48),ft(),p(322,"svg",49)(323,"defs")(324,"filter",50),ie(325,"feGaussianBlur",51),p(326,"feSpecularLighting",52),ie(327,"fePointLight",53),m(),ie(328,"feComposite",54)(329,"feComposite",55),m()(),p(330,"g",56)(331,"g",57)(332,"path",58),J("click",function(r){return e.play(r)}),m(),p(333,"path",59),J("click",function(r){return e.play(r)}),m(),p(334,"path",60),J("click",function(r){return e.play(r)}),m(),p(335,"path",61),J("click",function(r){return e.play(r)}),m(),p(336,"path",62),J("click",function(r){return e.play(r)}),m(),p(337,"path",63),J("click",function(r){return e.play(r)}),m(),p(338,"path",64),J("click",function(r){return e.play(r)}),m(),p(339,"path",65),J("click",function(r){return e.play(r)}),m(),p(340,"path",66),J("click",function(r){return e.play(r)}),m(),p(341,"path",67),J("click",function(r){return e.play(r)}),m(),p(342,"path",68),J("click",function(r){return e.play(r)}),m(),p(343,"path",69),J("click",function(r){return e.play(r)}),m(),p(344,"path",70),J("click",function(r){return e.play(r)}),m(),p(345,"path",71),J("click",function(r){return e.play(r)}),m(),p(346,"path",72),J("click",function(r){return e.play(r)}),m(),p(347,"path",73),J("click",function(r){return e.play(r)}),m(),p(348,"path",74),J("click",function(r){return e.play(r)}),m(),p(349,"path",75),J("click",function(r){return e.play(r)}),m(),p(350,"path",76),J("click",function(r){return e.play(r)}),m(),p(351,"path",77),J("click",function(r){return e.play(r)}),m(),p(352,"path",78),J("click",function(r){return e.play(r)}),m(),p(353,"path",79),J("click",function(r){return e.play(r)}),m(),p(354,"path",80),J("click",function(r){return e.play(r)}),m(),p(355,"path",81),J("click",function(r){return e.play(r)}),m(),p(356,"path",82),J("click",function(r){return e.play(r)}),m(),p(357,"path",83),J("click",function(r){return e.play(r)}),m(),p(358,"path",84),J("click",function(r){return e.play(r)}),m(),p(359,"path",85),J("click",function(r){return e.play(r)}),m(),p(360,"path",86),J("click",function(r){return e.play(r)}),m(),p(361,"path",87),J("click",function(r){return e.play(r)}),m(),p(362,"path",88),J("click",function(r){return e.play(r)}),m(),p(363,"path",89),J("click",function(r){return e.play(r)}),m(),p(364,"path",90),J("click",function(r){return e.play(r)}),m(),p(365,"path",91),J("click",function(r){return e.play(r)}),m(),p(366,"path",92),J("click",function(r){return e.play(r)}),m(),p(367,"path",93),J("click",function(r){return e.play(r)}),m(),p(368,"path",94),J("click",function(r){return e.play(r)}),m(),p(369,"path",95),J("click",function(r){return e.play(r)}),m(),p(370,"path",96),J("click",function(r){return e.play(r)}),m(),p(371,"path",97),J("click",function(r){return e.play(r)}),m(),p(372,"path",98),J("click",function(r){return e.play(r)}),m(),p(373,"path",99),J("click",function(r){return e.play(r)}),m(),p(374,"path",100),J("click",function(r){return e.play(r)}),m(),p(375,"path",101),J("click",function(r){return e.play(r)}),m(),p(376,"path",102),J("click",function(r){return e.play(r)}),m(),p(377,"path",103),J("click",function(r){return e.play(r)}),m(),p(378,"path",104),J("click",function(r){return e.play(r)}),m(),p(379,"path",105),J("click",function(r){return e.play(r)}),m(),p(380,"path",106),J("click",function(r){return e.play(r)}),m(),p(381,"path",107),J("click",function(r){return e.play(r)}),m(),p(382,"path",108),J("click",function(r){return e.play(r)}),m(),p(383,"path",109),J("click",function(r){return e.play(r)}),m()(),p(384,"g",110)(385,"path",111),J("click",function(r){return e.play(r)}),m(),p(386,"path",112),J("click",function(r){return e.play(r)}),m(),p(387,"path",113),J("click",function(r){return e.play(r)}),m(),p(388,"path",114),J("click",function(r){return e.play(r)}),m(),p(389,"path",115),J("click",function(r){return e.play(r)}),m(),p(390,"path",116),J("click",function(r){return e.play(r)}),m(),p(391,"path",117),J("click",function(r){return e.play(r)}),m(),p(392,"path",118),J("click",function(r){return e.play(r)}),m(),p(393,"path",119),J("click",function(r){return e.play(r)}),m(),p(394,"path",120),J("click",function(r){return e.play(r)}),m(),p(395,"path",121),J("click",function(r){return e.play(r)}),m(),p(396,"path",122),J("click",function(r){return e.play(r)}),m(),p(397,"path",123),J("click",function(r){return e.play(r)}),m(),p(398,"path",124),J("click",function(r){return e.play(r)}),m(),p(399,"path",125),J("click",function(r){return e.play(r)}),m(),p(400,"path",126),J("click",function(r){return e.play(r)}),m(),p(401,"path",127),J("click",function(r){return e.play(r)}),m(),p(402,"path",128),J("click",function(r){return e.play(r)}),m(),p(403,"path",129),J("click",function(r){return e.play(r)}),m(),p(404,"path",130),J("click",function(r){return e.play(r)}),m(),p(405,"path",131),J("click",function(r){return e.play(r)}),m(),p(406,"path",132),J("click",function(r){return e.play(r)}),m(),p(407,"path",133),J("click",function(r){return e.play(r)}),m(),p(408,"path",134),J("click",function(r){return e.play(r)}),m(),p(409,"path",135),J("click",function(r){return e.play(r)}),m(),p(410,"path",136),J("click",function(r){return e.play(r)}),m(),p(411,"path",137),J("click",function(r){return e.play(r)}),m(),p(412,"path",138),J("click",function(r){return e.play(r)}),m(),p(413,"path",139),J("click",function(r){return e.play(r)}),m(),p(414,"path",140),J("click",function(r){return e.play(r)}),m(),p(415,"path",141),J("click",function(r){return e.play(r)}),m(),p(416,"path",142),J("click",function(r){return e.play(r)}),m(),p(417,"path",143),J("click",function(r){return e.play(r)}),m(),p(418,"path",144),J("click",function(r){return e.play(r)}),m(),p(419,"path",145),J("click",function(r){return e.play(r)}),m(),p(420,"path",146),J("click",function(r){return e.play(r)}),m()(),Wt(421,Tne,6,18,"svg",147)(422,Ane,1,6,"image",148)(423,Dne,1,5,"image",149)(424,Ine,1,6,"svg",150),m()()()()()),n&2&&(E("hidden",e.visible==!1),y(8),Oe("ngModel",e.activeLosanges),y(5),Oe("ngModel",e.scale_follow_score),y(7),Oe("ngModel",e.scale_tona),E("disabled",e.scale_follow_score),y(),E("ngValue","C#"),y(2),E("ngValue","F#"),y(2),E("ngValue","B"),y(2),E("ngValue","E"),y(2),E("ngValue","A"),y(2),E("ngValue","D"),y(2),E("ngValue","G"),y(2),E("ngValue","C"),y(2),E("ngValue","F"),y(2),E("ngValue","Bb"),y(2),E("ngValue","Eb"),y(2),E("ngValue","Ab"),y(2),E("ngValue","Db"),y(2),E("ngValue","Gb"),y(2),Oe("ngModel",e.scale_type),E("disabled",e.scale_follow_score),y(),E("ngValue","major"),y(2),E("ngValue","aeolian"),y(4),E("ngValue","dorian"),y(2),E("ngValue","phrygian"),y(2),E("ngValue","lydian"),y(2),E("ngValue","mixolydian"),y(2),E("ngValue","aeolian"),y(2),E("ngValue","locrian"),y(4),E("ngValue","major pentatonic"),y(2),E("ngValue","major blues"),y(2),E("ngValue","minor pentatonic"),y(2),E("ngValue","minor blues"),y(4),E("ngValue","harmonic major"),y(2),E("ngValue","harmonic minor"),y(4),E("ngValue","diminished"),y(2),E("ngValue","minor six diminished"),y(2),E("ngValue","half-whole diminished"),y(2),E("ngValue","composite blues"),y(4),E("ngValue","bebop"),y(2),E("ngValue","bebop minor"),y(2),E("ngValue","bebop major"),y(2),E("ngValue","bebop locrian"),y(4),E("ngValue","ionian pentatonic"),y(2),E("ngValue","mixolydian pentatonic"),y(2),E("ngValue","ritusen"),y(2),E("ngValue","egyptian"),y(2),E("ngValue","neopolitan major pentatonic"),y(2),E("ngValue","vietnamese 1"),y(2),E("ngValue","pelog"),y(2),E("ngValue","kumoijoshi"),y(2),E("ngValue","hirajoshi"),y(2),E("ngValue","iwato"),y(2),E("ngValue","in-sen"),y(2),E("ngValue","lydian pentatonic"),y(2),E("ngValue","malkos raga"),y(2),E("ngValue","locrian pentatonic"),y(2),E("ngValue","minor six pentatonic"),y(2),E("ngValue","flat three pentatonic"),y(2),E("ngValue","flat six pentatonic"),y(2),E("ngValue","scriabin"),y(2),E("ngValue","whole tone pentatonic"),y(2),E("ngValue","lydian #5P pentatonic"),y(2),E("ngValue","lydian dominant pentatonic"),y(2),E("ngValue","minor #7M pentatonic"),y(2),E("ngValue","super locrian pentatonic"),y(2),E("ngValue","minor hexatonic"),y(2),E("ngValue","augmented"),y(2),E("ngValue","piongio"),y(2),E("ngValue","prometheus neopolitan"),y(2),E("ngValue","prometheus"),y(2),E("ngValue","mystery #1"),y(2),E("ngValue","six tone symmetric"),y(2),E("ngValue","whole tone"),y(2),E("ngValue","messiaen's mode #5"),y(2),E("ngValue","locrian major"),y(2),E("ngValue","double harmonic lydian"),y(2),E("ngValue","altered"),y(2),E("ngValue","locrian #2"),y(2),E("ngValue","mixolydian b6"),y(2),E("ngValue","lydian dominant"),y(2),E("ngValue","lydian augmented"),y(2),E("ngValue","dorian b2"),y(2),E("ngValue","melodic minor"),y(2),E("ngValue","ultralocrian"),y(2),E("ngValue","locrian 6"),y(2),E("ngValue","augmented heptatonic"),y(2),E("ngValue","dorian #4"),y(2),E("ngValue","lydian diminished"),y(2),E("ngValue","leading whole tone"),y(2),E("ngValue","lydian minor"),y(2),E("ngValue","phrygian dominant"),y(2),E("ngValue","balinese"),y(2),E("ngValue","neopolitan major"),y(2),E("ngValue","double harmonic major"),y(2),E("ngValue","hungarian minor"),y(2),E("ngValue","hungarian major"),y(2),E("ngValue","oriental"),y(2),E("ngValue","flamenco"),y(2),E("ngValue","todi raga"),y(2),E("ngValue","persian"),y(2),E("ngValue","enigmatic"),y(2),E("ngValue","major augmented"),y(2),E("ngValue","lydian #9"),y(2),E("ngValue","purvi raga"),y(2),E("ngValue","spanish heptatonic"),y(2),E("ngValue","minor bebop"),y(2),E("ngValue","ichikosucho"),y(2),E("ngValue","kafi raga"),y(2),E("ngValue","messiaens mode #6"),y(2),E("ngValue","messiaens mode #4"),y(2),E("ngValue","messiaens mode #3"),y(2),E("ngValue","messiaens mode #7"),y(2),E("ngValue","chromatic"),y(6),Oe("ngModel",e.activeBubbles),y(5),Oe("ngModel",e.chord_follow_score),E("disabled",!e.score_follow),y(7),Oe("ngModel",e.chord_tona),E("disabled",e.chord_follow_score||!e.score_follow),y(),E("ngValue","C#"),y(2),E("ngValue","F#"),y(2),E("ngValue","F#"),y(2),E("ngValue","B"),y(2),E("ngValue","E"),y(2),E("ngValue","A"),y(2),E("ngValue","D"),y(2),E("ngValue","G"),y(2),E("ngValue","C"),y(2),E("ngValue","F"),y(2),E("ngValue","Bb"),y(2),E("ngValue","Bb"),y(2),E("ngValue","Eb"),y(2),E("ngValue","Eb"),y(2),E("ngValue","Ab"),y(2),E("ngValue","G#"),y(2),E("ngValue","Db"),y(4),E("disabled",e.chord_follow_score||!e.score_follow),Oe("ngModel",e.chord_type),y(),E("ngForOf",e.chords_list),y(2),E("ngClass",Ae(236,Mne,e.cm.letters_Numbers_sync)),y(3),Oe("ngModel",e.display_mode),E("disabled",e.cm.letters_Numbers_sync),y(7),Oe("ngModel",e.score_follow),y(5),E("ngClass",Ae(238,Sne,e.visible==!0)),y(13),E("ngClass",Ae(240,Xt,e.notes[21].greyed)),y(),E("ngClass",Ae(242,Xt,e.notes[23].greyed)),y(),E("ngClass",Ae(244,Xt,e.notes[24].greyed)),y(),E("ngClass",Ae(246,Xt,e.notes[26].greyed)),y(),E("ngClass",Ae(248,Xt,e.notes[28].greyed)),y(),E("ngClass",Ae(250,Xt,e.notes[29].greyed)),y(),E("ngClass",Ae(252,Xt,e.notes[31].greyed)),y(),E("ngClass",Ae(254,Xt,e.notes[33].greyed)),y(),E("ngClass",Ae(256,Xt,e.notes[35].greyed)),y(),E("ngClass",Ae(258,Xt,e.notes[36].greyed)),y(),E("ngClass",Ae(260,Xt,e.notes[38].greyed)),y(),E("ngClass",Ae(262,Xt,e.notes[40].greyed)),y(),E("ngClass",Ae(264,Xt,e.notes[41].greyed)),y(),E("ngClass",Ae(266,Xt,e.notes[43].greyed)),y(),E("ngClass",Ae(268,Xt,e.notes[45].greyed)),y(),E("ngClass",Ae(270,Xt,e.notes[47].greyed)),y(),E("ngClass",Ae(272,Xt,e.notes[48].greyed)),y(),E("ngClass",Ae(274,Xt,e.notes[50].greyed)),y(),E("ngClass",Ae(276,Xt,e.notes[52].greyed)),y(),E("ngClass",Ae(278,Xt,e.notes[53].greyed)),y(),E("ngClass",Ae(280,Xt,e.notes[55].greyed)),y(),E("ngClass",Ae(282,Xt,e.notes[57].greyed)),y(),E("ngClass",Ae(284,Xt,e.notes[59].greyed)),y(),E("ngClass",Ae(286,Xt,e.notes[60].greyed)),y(),E("ngClass",Ae(288,Xt,e.notes[62].greyed)),y(),E("ngClass",Ae(290,Xt,e.notes[64].greyed)),y(),E("ngClass",Ae(292,Xt,e.notes[65].greyed)),y(),E("ngClass",Ae(294,Xt,e.notes[67].greyed)),y(),E("ngClass",Ae(296,Xt,e.notes[69].greyed)),y(),E("ngClass",Ae(298,Xt,e.notes[71].greyed)),y(),E("ngClass",Ae(300,Xt,e.notes[72].greyed)),y(),E("ngClass",Ae(302,Xt,e.notes[74].greyed)),y(),E("ngClass",Ae(304,Xt,e.notes[76].greyed)),y(),E("ngClass",Ae(306,Xt,e.notes[77].greyed)),y(),E("ngClass",Ae(308,Xt,e.notes[79].greyed)),y(),E("ngClass",Ae(310,Xt,e.notes[81].greyed)),y(),E("ngClass",Ae(312,Xt,e.notes[83].greyed)),y(),E("ngClass",Ae(314,Xt,e.notes[84].greyed)),y(),E("ngClass",Ae(316,Xt,e.notes[86].greyed)),y(),E("ngClass",Ae(318,Xt,e.notes[88].greyed)),y(),E("ngClass",Ae(320,Xt,e.notes[89].greyed)),y(),E("ngClass",Ae(322,Xt,e.notes[91].greyed)),y(),E("ngClass",Ae(324,Xt,e.notes[93].greyed)),y(),E("ngClass",Ae(326,Xt,e.notes[95].greyed)),y(),E("ngClass",Ae(328,Xt,e.notes[96].greyed)),y(),E("ngClass",Ae(330,Xt,e.notes[98].greyed)),y(),E("ngClass",Ae(332,Xt,e.notes[100].greyed)),y(),E("ngClass",Ae(334,Xt,e.notes[101].greyed)),y(),E("ngClass",Ae(336,Xt,e.notes[103].greyed)),y(),E("ngClass",Ae(338,Xt,e.notes[105].greyed)),y(),E("ngClass",Ae(340,Xt,e.notes[107].greyed)),y(),E("ngClass",Ae(342,Xt,e.notes[108].greyed)),y(2),E("ngClass",Ae(344,Xt,e.notes[22].greyed)),y(),E("ngClass",Ae(346,Xt,e.notes[25].greyed)),y(),E("ngClass",Ae(348,Xt,e.notes[27].greyed)),y(),E("ngClass",Ae(350,Xt,e.notes[30].greyed)),y(),E("ngClass",Ae(352,Xt,e.notes[32].greyed)),y(),E("ngClass",Ae(354,Xt,e.notes[34].greyed)),y(),E("ngClass",Ae(356,Xt,e.notes[37].greyed)),y(),E("ngClass",Ae(358,Xt,e.notes[39].greyed)),y(),E("ngClass",Ae(360,Xt,e.notes[42].greyed)),y(),E("ngClass",Ae(362,Xt,e.notes[44].greyed)),y(),E("ngClass",Ae(364,Xt,e.notes[46].greyed)),y(),E("ngClass",Ae(366,Xt,e.notes[49].greyed)),y(),E("ngClass",Ae(368,Xt,e.notes[51].greyed)),y(),E("ngClass",Ae(370,Xt,e.notes[54].greyed)),y(),E("ngClass",Ae(372,Xt,e.notes[56].greyed)),y(),E("ngClass",Ae(374,Xt,e.notes[58].greyed)),y(),E("ngClass",Ae(376,Xt,e.notes[61].greyed)),y(),E("ngClass",Ae(378,Xt,e.notes[63].greyed)),y(),E("ngClass",Ae(380,Xt,e.notes[66].greyed)),y(),E("ngClass",Ae(382,Xt,e.notes[68].greyed)),y(),E("ngClass",Ae(384,Xt,e.notes[70].greyed)),y(),E("ngClass",Ae(386,Xt,e.notes[73].greyed)),y(),E("ngClass",Ae(388,Xt,e.notes[75].greyed)),y(),E("ngClass",Ae(390,Xt,e.notes[78].greyed)),y(),E("ngClass",Ae(392,Xt,e.notes[80].greyed)),y(),E("ngClass",Ae(394,Xt,e.notes[82].greyed)),y(),E("ngClass",Ae(396,Xt,e.notes[85].greyed)),y(),E("ngClass",Ae(398,Xt,e.notes[87].greyed)),y(),E("ngClass",Ae(400,Xt,e.notes[90].greyed)),y(),E("ngClass",Ae(402,Xt,e.notes[92].greyed)),y(),E("ngClass",Ae(404,Xt,e.notes[94].greyed)),y(),E("ngClass",Ae(406,Xt,e.notes[97].greyed)),y(),E("ngClass",Ae(408,Xt,e.notes[99].greyed)),y(),E("ngClass",Ae(410,Xt,e.notes[102].greyed)),y(),E("ngClass",Ae(412,Xt,e.notes[104].greyed)),y(),E("ngClass",Ae(414,Xt,e.notes[106].greyed)),y(),E("ngForOf",e.piano_midi),y(),E("ngForOf",e.piano_midi),y(),E("ngForOf",e.piano_midi),y(),E("ngForOf",e.piano_midi))},dependencies:()=>[lr,gi,bo,xo,ro,Jo,Ti,Mi,Fne],styles:[z9]})}}return PianoComponent})(),Fne=(()=>{class t{constructor(){this.x=0,this.y=0,this.text=""}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=zt({type:t,selectors:[["","piano-diamond",""]],inputs:{x:"x",y:"y",text:"text"},standalone:!1,attrs:One,decls:3,vars:1,consts:[["d","M 0.20267886,17.651493 17.802677,0.05149334 35.402678,17.651493 17.802677,35.251499 Z"],["x","45%","y","60%",1,"chords_notes_labels","piano"]],template:function(i,r){i&1&&(ft(),ie(0,"path",0),p(1,"text",1),P(2),m()),i&2&&(y(2),Yt(r.text))},styles:[z9]})}}return t})();var q9=(()=>{class t{constructor(e,i){this.ap=e,this.sm=i}setAllBeatsFromModel(){let e=this.sm.getParts(),i=0,r=0,s=1/0;for(let d=0;d<e.length;d++){let u=e[d];u.init_missing_measures_meters();let h=u.getMeasures();for(let _=0;_<h.length;_++){let b=h[_];if(i++,b.getAudioRegion()==null)continue;let S=fu[Ca.indexOf(b.getMeter())];var a=b.getAudioDuration(),l=a/S;b.setBeatsFromMeter()}}}static{this.\u0275fac=function(i){return new(i||t)(ht(Rs),ht(Hn))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Nne=(t,n)=>({show:t,show_mas:n}),Vne=t=>({zindexzero:t}),Mu=t=>({active:t});function Rne(t,n){if(t&1&&(p(0,"span",52),ie(1,"i",53),P(2),m()),t&2){let e=ge();y(2),en(" ",e.uploadedFileName," ")}}function jne(t,n){t&1&&(p(0,"span",54),ie(1,"i",55),P(2," YouTube Video "),m())}var H9=(()=>{class t{set display(e){this.visible=e}set cur_chord(e){this.change_displayed_chord(e)}constructor(e,i,r,s,a,l,d,u,h,_){this.yt=e,this.ap=i,this.sm=r,this.cm=s,this.zone=a,this.dm=l,this.tp=d,this.keys=u,this.sel=h,this.beatC=_,this.showVideoCard=new Rn,this.visible=!0,this.display_Y=!1,this.audio_loaded=!1,this.done=!1,this.videoId="",this.link="",this.file_path="",this.loading_wheel=!0,this.playerState=0,this.repeat={active:!1,start:0,end:0},this.edit=!0,this.drag=!1,this.playback_rate=1,this.volume=.65,this.m_volume=.6,this.timeline_hidden=!0,this.currentMediaSource=null,this.uploadedFileName="",this.showFileUpload=!1,this.ghost=!1,this.stretch=!0,this.follow=!1,this.center=!0,this.displayed_chord="",this.loadFromModel(!0)}ngOnInit(){console.log("\u{1F3AC} ngOnInit started"),this.init_bindings(),this.apReady_sub=this.ap.ready.subscribe(e=>{console.log("\u{1F3B5} AudioPlayer ready:",e),this.waveReady(e)}),this.dbReady_sub=this.ap.db_ready.subscribe(e=>{console.log("\u{1F5C4}\uFE0F Database ready:",e)}),this.apDownloading_sub=this.ap.downloaded.subscribe(e=>{console.log("\u2B07\uFE0F Audio download status:",e)}),this.ytReady_sub=this.yt.ready.subscribe(e=>{console.log("\u{1F310} YouTube ready:",e),this.videoReady(e)}),this.ytCurPos_sub=this.yt.curPos.subscribe(e=>{console.log("\u23F1\uFE0F YouTube current position:",e),this.zone.run(()=>{typeof e=="number"?this.playerState=1:e==="play"?this.playerState=1:e==="pause"?this.playerState=2:e==="stop"&&(this.playerState=0)})}),console.log("\u2705 ngOnInit completed")}ngAfterViewInit(){console.log("\u{1F3AC} ngAfterViewInit started"),this.yt.addApiToDom(),this.ap.createFromHtmlElements("#waveform","#wave-timeline"),this.set_volume(),console.log("\u2705 ngAfterViewInit completed")}ngOnDestroy(){console.log("\u{1F5D1}\uFE0F ngOnDestroy started"),this.stopTimeSynchronization(),this.binding$&&this.binding$.unsubscribe(),this.binding_shift$&&this.binding_shift$.unsubscribe(),this.apReady_sub&&this.apReady_sub.unsubscribe(),this.dbReady_sub&&this.dbReady_sub.unsubscribe(),this.apDownloading_sub&&this.apDownloading_sub.unsubscribe(),this.ytReady_sub&&this.ytReady_sub.unsubscribe(),this.ytCurPos_sub&&this.ytCurPos_sub.unsubscribe(),this.apiReady_sub&&this.apiReady_sub.unsubscribe(),this.markerUpdate_sub&&this.markerUpdate_sub.unsubscribe(),this.yt.destroy(),console.log("\u2705 ngOnDestroy completed")}onFileSelected(e){console.log("\u{1F4C1} File selected:",e.target.files[0]?.name);let i=e.target.files[0];i&&this.handleFileUpload(i),e.target.value=""}handleFileUpload(e){console.log("\u{1F680} Loading file:",e.name);try{this.loading_wheel=!0,this.uploadedFileName=e.name;let i=this.yt.handleFileUpload(e);this.currentMediaSource=i,this.yt.loadMedia(i),this.ap.load_blob(e,`local://${e.name}`),this.link=`local://${e.name}`,this.videoId="",this.showFileUpload=!1,console.log(`\u2705 Loaded ${i.type}: ${e.name}`)}catch(i){console.error("\u274C Error loading file:",i),alert(i.message||"Error loading file. Please try again."),this.loading_wheel=!1}}handleYouTubeUrl(e){console.log("\u{1F680} Loading YouTube URL:",e);try{this.loading_wheel=!0,this.uploadedFileName="";let i=this.yt.handleYouTubeUrl(e);this.currentMediaSource=i,this.yt.loadMedia(i),this.ap.getMp3(e),this.link=e,this.videoId=new URL(e).searchParams.get("v")||"",console.log(`\u2705 Loaded YouTube video: ${this.videoId}`)}catch(i){console.error("\u274C Error loading YouTube URL:",i),alert(i.message||"Error loading YouTube URL. Please check the URL and try again."),this.loading_wheel=!1}}toggleFileUpload(){this.showFileUpload=!this.showFileUpload,console.log("\u{1F4C1} File upload interface toggled:",this.showFileUpload)}clearCurrentMedia(){console.log("\u{1F5D1}\uFE0F Clearing current media"),this.currentMediaSource=null,this.uploadedFileName="",this.link="",this.videoId="",this.yt.destroy(),console.log("\u2705 Current media cleared")}loadFromModel(e){if(console.log("\u{1F4CB} loadFromModel called with data:",e),!e)return;let i=this.sm.getYoutube();console.log("\u{1F4CB} YouTube data from model:",i),this.file_path=i.filePath,this.link=i.link,this.videoId=i.videoId,console.log("\u{1F4CB} Loaded from model - file_path:",this.file_path,"link:",this.link,"videoId:",this.videoId),this.link&&this.link.trim()?(console.log("\u{1F310} Loading YouTube video from link:",this.link),this.yt.createVideo(this.link),this.yt.currentMediaSource={type:"youtube",url:this.link,videoId:this.videoId},console.log("\u{1F3B5} Loading audio from YouTube for WaveSurfer"),this.ap.getAudioFromYoutube(this.link),setTimeout(()=>{console.log("\u{1F3AC} Emitting showVideoCard event"),this.showVideoCard.emit()},200)):this.file_path&&this.file_path.trim()&&(console.log("\u{1F3B5} Loading audio file from path:",this.file_path),this.yt.currentMediaSource={type:"local-mp3",url:this.file_path},this.ap.load(this.file_path))}apiReady(e){console.log("\u{1F50C} apiReady called with data:",e),e!=!1&&(console.log("\u{1F50C} Creating video with link:",this.link),this.yt.createVideo(this.link))}videoReady(e){console.log("\u{1F4FA} videoReady called with data:",e),e!=!1&&(console.log("\u23F9\uFE0F Stopping video"),this.yt.stopVideo())}resetAllRegionsFromModel(){console.log("\u{1F504} resetAllRegionsFromModel called"),this.sm.getParts().length&&this.sm.getParts()[0].getMeasures().length&&this.sm.getParts()[0].getMeasure(0).getBeats().length&&this.sm.getParts()[0].getMeasure(0).getBeat(0).audioRegion.end?(console.log("\u{1F3B5} Setting beats regions"),this.ap.setBeatsRegions()):(console.log("\u{1F3B5} Resetting all regions from model"),this.ap.resetAllRegionsFromModel()),this.drag_toggle(!1)}waveReady(e){console.log("\u{1F30A} waveReady called with data:",e),e!=!1&&(this.zone.run(()=>{console.log("\u23F3 Setting loading_wheel to false"),this.loading_wheel=!1,console.log("\u2705 Setting audio_loaded to true"),this.audio_loaded=!0,this.file_path=this.ap.getFilePath(),console.log("\u{1F4C1} File path from audio player:",this.file_path),this.resetAllRegionsFromModel(),this.sm.getParts().length&&this.sm.getPart(0).getMeasure(0)&&this.sel.setSelection([this.sm.getPart(0).getMeasure(0)]),$(".youtube-audio-container").focus()}),this.sm.setYoutube({link:this.link,videoId:this.yt.videoId,filePath:this.file_path}),setTimeout(()=>{console.log("\u{1F517} Setting up audio synchronization"),this.setupAudioSynchronization()},1e3),this.stretch=this.ap.getStretch())}setupAudioSynchronization(){console.log("\u{1F517} Setting up audio synchronization"),this.ap.bindClick(()=>{let e=this.yt.getPlayerState();console.log("\u{1F3AE} WaveSurfer clicked, YouTube state:",e),this.link!=""&&(e==1&&!this.ap.isPlaying()?this.ap.play():e==2?this.yt.seekTo(this.ap.getCurrentTime()):e==1&&this.ap.isPlaying()?(this.ap.pause(),this.yt.seekTo(this.ap.getCurrentTime())):(e==1||e==3)&&(this.ap.pause(),this.yt.seekTo(this.ap.getCurrentTime())))}),this.ap.ws&&(this.ap.ws.on("play",()=>{console.log("\u{1F3B5} WaveSurfer play event"),this.yt.seekTo(this.ap.getCurrentTime())}),this.ap.ws.on("pause",()=>{console.log("\u23F8\uFE0F WaveSurfer pause event"),this.yt.seekTo(this.ap.getCurrentTime())}),this.ap.ws.on("seek",e=>{console.log("\u{1F50D} WaveSurfer seek event to:",e),this.yt.seekTo(e)})),this.startTimeSynchronization()}startTimeSynchronization(){console.log("\u23F1\uFE0F Starting time synchronization"),this.interval&&clearInterval(this.interval),this.interval=setInterval(()=>{if(this.ap.isPlaying()){let e=this.yt.getCurrentTime(),i=this.ap.getCurrentTime(),r=Math.abs(e-i);r>.5&&(console.log(`\u{1F504} Time sync needed: YouTube=${e.toFixed(2)}s, WaveSurfer=${i.toFixed(2)}s, diff=${r.toFixed(2)}s`),this.yt.seekTo(i))}},2e3)}stopTimeSynchronization(){this.interval&&(clearInterval(this.interval),this.interval=null,console.log("\u23F1\uFE0F Time synchronization stopped"))}stopAudio(){console.log("\u23F9\uFE0F Stopping audio"),this.ap.stop(),this.yt.seekTo(0)}resumeAudio(){console.log("\u25B6\uFE0F Resuming audio"),this.ap.play(),this.yt.seekTo(this.ap.getCurrentTime())}pauseAudio(){console.log("\u23F8\uFE0F Pausing audio"),this.ap.pause(),this.yt.seekTo(this.ap.getCurrentTime())}playPause(){console.log("\u{1F3AE} Play/Pause toggled"),this.ap.isPlaying()?this.pauseAudio():this.resumeAudio()}button_clicked(e){switch(console.log("\u{1F518} Button clicked:",e),e){case"play":this.playPause();break;case"stop":this.stopAudio();break;case"skip_forward":this.skip(10);break;case"skip_backward":this.skip(-10);break;default:console.log("Unknown button:",e)}}loadYouTubeUrl(){console.log("\u{1F517} Loading YouTube URL:",this.link),this.link&&this.link.trim()?this.handleYouTubeUrl(this.link.trim()):console.log("\u274C No URL provided")}addNextRegion(){console.log("this.tp.getMeasure()+1 => ",this.tp.getMeasure());let e;this.sel.getSelection()[0]&&(e=this.sm.addNextRegion(this.sel.getSelection()[0].getIdx(),this.ap.getCurrentTime(),!1)),console.log("next => ",e),e&&this.sm.getNextMeasureById(e.id)&&(e.measure_nb=e.id,this.dm.renderFromModel(),console.log("next => ",e),this.stretch&&this.ap.stretchUpdate([e.id,this.sm.getNextMeasureById(e.id).getId()])),this.ap.addRegion(e)}addPartAfter(e){console.log("addPartAfter !!!!!!!!!!!!!!");let i=new Zo,r=new bs;r.addBeat(i);let s=new Ma;s.addMeasure(r),r.setAudioRegion({start:this.ap.getCurrentTime(),end:this.ap.getCurrentTime()+1}),this.sm.insertPartAfter(e,s),this.dm.renderMarker({operation:"refresh"}),this.dm.renderFromModel()}addNextPart(){if(this.ap.getCurrentRegion()!=null&&!this.ap.getState())this.sm.transformMeasureInPart(this.ap.getCurrentRegion().id),this.dm.renderFromModel(),this.dm.renderMarker({operation:"refresh"});else{let e,i=this.sel.getSelection()[0];if(i?e=this.sm.addNextPart(i.getIdx(),this.ap.getCurrentTime()):(console.warn("No selection"),this.sm.getParts().length||this.addPartAfter(0)),e){this.dm.renderFromModel(),console.log("next => ",e),this.ap.addRegion(e);let r=this.sel.getSelection()[0].getIdx();this.stretch&&this.ap.stretchUpdate([r,this.sm.getNextMeasureById(r).getIdx()])}}}toggle_edit(){this.edit=!this.edit,this.hide_region_visibility()}hide_region_visibility(){this.edit?$("region.wavesurfer-region").show():$("region.wavesurfer-region").hide()}deleteSelectedRegion(){console.log("deleteSelectedRegion");let e=this.sel.getSelection();e.length&&(this.sm.deleteMeasuresByIds([e[0].getIdx()]),this.resetAllRegionsFromModel(),this.tp.reset(),this.dm.renderFromModel())}deleteSelectedPart(){console.log("deleteSelectedPart");let e=this.sel.getSelection();if(!e.length)return;let i=this.sm.getMeasures_hash();if(!Object.keys(i).length){console.warn("error : cant delete selected part. No parts left to delete ?");return}let r=i[e[0].getIdx()].part-1;console.log("p_nb => ",r),this.sm.deletePart(r),this.resetAllRegionsFromModel(),this.tp.reset(),this.dm.renderFromModel(),setTimeout(()=>{let s=r;this.sm.getPart(s)?this.sel.select_part(s):this.sm.getPart(s-1)?this.sel.select_part(s-1):this.sm.getParts().length&&this.sel.select_part(0)},100)}deleteRegion(e){this.ap.deleteRegion(e),this.tp.reset()}drag_toggle(e){this.drag=e,this.ap.dragToggle(this.drag),e==!0,$("region.wavesurfer-region").css("pointer-events","all")}keyPressed(e,i){e.stopPropagation(),!(!e.path||e.path[0].tagName=="INPUT")&&this.drag_toggle(i)}updateRepeat(){this.ap.updateRepeat({active:this.repeat.active,start:this.repeat.start,end:this.repeat.end})}setRepeatPart(){let e=this.tp.getMeasure(),i=this.sm.getMeasures_hash();if(i.hasOwnProperty(e)==!1)return;this.repeat.active=!0;let r=i[e].part,a=this.sm.getPart(r).getMeasures();for(let l=0;l<a.length;l++)if(a[l].getAudioRegion()!=null){this.repeat.start=a[l].getIdx();break}for(let l=a.length-1;l>=0;l--)if(a[l].getAudioRegion()!=null){this.repeat.end=a[l].getIdx();break}this.updateRepeat()}skip(e){this.yt.skip(e),this.ap.skip(e)}changePlaybackRate(e){this.playback_rate=e,this.ap.setPlaybackRate(this.playback_rate)}updateGhost(){this.ap.switchGhost(this.ghost)}updateStretch(){this.ap.setStretch(this.stretch)}toggleFollow(){this.follow=!this.follow,this.ap.follow(this.follow),this.cm.setFollow(this.follow)}toggleCenter(){this.center=!this.center,console.log("this.center => ",this.center),this.cm.setAutoScroll(this.center)}set_volume(){this.ap.setVolume(this.volume)}focus(e){e.target.focus()}init_bindings(){this.binding$=this.keys.match([Si.LEFT_ARROW,Si.RIGHT_ARROW,Si.UP_ARROW,Si.DOWN_ARROW,Si.M,Si.P,Si.DELETE,Si.SPACE,Si.TAB],[]).subscribe(e=>{let i=e;if(($(document.activeElement).parents(".song").length||$(document.activeElement).hasClass("song")||$(document.activeElement).parents("app-song").length||window.location.pathname.includes("/score/"))&&i.target.tagName!="INPUT")switch(i.stopPropagation(),i.preventDefault(),i.keyCode){case Si.LEFT_ARROW:this.skip(-1);break;case Si.RIGHT_ARROW:this.skip(1);break;case Si.UP_ARROW:if(i.shiftKey&&!i.ctrlKey){let a=this.sel.select_previous_part();if(!a)return;let l=a.getAudioRegion().start;this.ap.setCurrentTime(l),this.ap.isPlaying()&&this.ap.play()}else if(i.shiftKey&&i.ctrlKey){let a=this.sel.select_first_measure();if(!a)return;let l=a.getAudioRegion().start;this.ap.setCurrentTime(l),this.ap.isPlaying()&&this.ap.play()}else{let a;if(!this.sel.getSelection()[0]||(this.ap.getCurrentTime()>this.sel.getSelection()[0].getAudioRegion().start+.5?a=this.sel.getSelection()[0]:a=this.sel.select_previous_measure(),!a))return;let l=a.getAudioRegion().start;this.ap.setCurrentTime(l),this.yt.seekTo(l)}break;case Si.DOWN_ARROW:if(i.shiftKey){let a=this.sel.select_next_part();if(!a)return;let l=a.getAudioRegion().start;this.ap.pause(),this.ap.setCurrentTime(l),this.yt.seekTo(l),this.ap.isPlaying()&&this.ap.play()}else{let a=this.sel.select_next_measure();if(!a)return;let l=a.getAudioRegion().start;this.ap.setCurrentTime(l),this.yt.seekTo(l)}break;case Si.M:console.log("\u{1F3B5} M key pressed - adding next region"),this.addNextRegion();break;case Si.P:console.log("\u{1F3B5} P key pressed - adding next part"),this.addNextPart();break;case Si.DELETE:let s=this.sel.deleteSelection();if(this.dm.renderFromModel(),this.resetAllRegionsFromModel(),!s){this.sel.setSelection([]);return}setTimeout(()=>{this.ap.align_cursor_on_selection()},20);break;case Si.SPACE:if(i.shiftKey)if(this.ap.isPlaying())this.playPause();else{let a=this.sel.getSelection();a[0].getType()=="measure"&&this.ap.playMeasure(a[0].getIdx())}else this.playPause();break}})}show_volume(e){e?$(".vol").css("display","block"):$(".vol").css("display","none")}show_m_volume(e){e?$(".m-vol").css("display","block"):$(".m-vol").css("display","none")}changeVisibility(){this.visible=!this.visible}change_displayed_chord(e){if(!e.chords.length||e.full_chord.empty){this.displayed_chord=" ";return}this.displayed_chord=e.chords[0]}setAllMeasuresFromModel(){this.ap.setMeasuresRegions(),this.ap.refreshRegions()}setAllBeatsFromModel(){this.ap.clearRegions_Beats(),this.beatC.setAllBeatsFromModel(),this.ap.setBeatsRegions(),this.ap.refreshRegions()}static{this.\u0275fac=function(i){return new(i||t)(Le(xc),Le(Rs),Le(Hn),Le(Ci),Le(on),Le(Po),Le(yi),Le(Pd),Le(nr),Le(q9))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-youtube-audio"]],inputs:{display:"display",cur_chord:"cur_chord"},outputs:{showVideoCard:"showVideoCard"},standalone:!1,decls:66,vars:60,consts:[["id","yt-audio"],["tabindex","0",1,"youtube-audio-container",3,"mouseenter","keydown.shift","keyup.shift","contextmenu","ngClass","hidden"],["id","global-waveform",1,"waveform-container"],[1,"spining",3,"ngClass"],[1,"spinner3",3,"hidden"],[1,"double-bounce1"],["src","assets/img/music-placeholder-glow.png"],[1,"double-bounce2"],[1,"media-source-container",3,"hidden"],[1,"link_row"],[1,"file-upload-section"],["title","Upload local file",1,"btn","btn-secondary","file-upload-btn",3,"click"],[1,"fas","fa-upload"],[1,"file-upload-interface",3,"hidden"],["type","file","id","fileInput","accept","audio/*,video/*",2,"display","none",3,"change"],["for","fileInput",1,"btn","btn-success","file-input-label"],[1,"fas","fa-music"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-times"],[1,"current-media-display",3,"hidden"],[1,"media-info"],["class","file-name",4,"ngIf"],["class","youtube-info",4,"ngIf"],["title","Clear current media",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],["id","wave-timeline",3,"hidden"],["id","waveform",2,"touch-action","none"],[1,"top_row"],[1,"playerIcons"],["role","button","title","Stop audio",1,"fas","fa-stop","p-2",3,"click","ngClass"],["role","button","title","Pause audio",1,"fas","fa-pause","p-2",3,"click","ngClass"],["role","button","title","Play audio",1,"fas","fa-play","p-2",3,"click","ngClass"],["role","button","title","Audio follow",1,"p-2",3,"click"],["role","button","title","Center score",1,"p-2","fas","fa-indent",3,"click"],["role","button","title","Audio volume",1,"fas","fa-volume-up","p-2",3,"mouseover","mouseout"],[1,"vertical-slider-wrapper","vol",3,"mouseover","mouseout"],["type","range","min","0.0001","max","0.8","step","0.01","id","myVolume_audio",1,"slider",3,"change","input","ngModelChange","ngModel"],["role","button","title","Metronome volume",1,"p-2",3,"mouseover","mouseout"],["src","assets/img/metronome_ico.svg"],[1,"vertical-slider-wrapper","m-vol",3,"mouseover","mouseout"],["type","range","min","0.0001","max","0.8","step","0.01","id","metro_vol",1,"slider",3,"ngModelChange","ngModel"],[1,"displayed-chord",2,"width","0px","margin-right","20%"],[1,"center-col"],["type","number","min","0",3,"change","ngModelChange","ngModel"],[1,"fa","fa-undo",3,"click","ngClass"],["src","assets/img/loop_part.png","role","button",1,"p-2",3,"click"],["role","button",1,"fas","fa-arrows-alt","fa","p-2",3,"click"],["role","button",1,"p-2",3,"click"],[1,"fas","fa-ghost",3,"click","ngClass"],[1,"fas","fa-arrows-alt-h",3,"click","ngClass"],["id","beatC_button","role","button",1,"p-2",3,"click"],["id","beatM_button","role","button",1,"p-2",3,"click"],[1,"file-name"],[1,"fas","fa-file-audio"],[1,"youtube-info"],[1,"fab","fa-youtube"]],template:function(i,r){i&1&&(p(0,"section",0)(1,"div",1),J("mouseenter",function(a){return r.focus(a)})("keydown.shift",function(a){return r.keyPressed(a,!0)})("keyup.shift",function(a){return r.keyPressed(a,!1)})("contextmenu",function(a){return a.preventDefault()}),p(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),ie(6,"img",6),m(),p(7,"div",7),ie(8,"img",6),m()(),p(9,"div",8),ie(10,"div",9),p(11,"div",10)(12,"button",11),J("click",function(){return r.toggleFileUpload()}),ie(13,"i",12),P(14," Upload File "),m(),p(15,"div",13)(16,"input",14),J("change",function(a){return r.onFileSelected(a)}),m(),p(17,"label",15),ie(18,"i",16),P(19," Choose Audio/Video File "),m(),p(20,"button",17),J("click",function(){return r.toggleFileUpload()}),ie(21,"i",18),P(22," Cancel "),m()()(),p(23,"div",19)(24,"div",20),Wt(25,Rne,3,1,"span",21)(26,jne,3,0,"span",22),m(),p(27,"button",23),J("click",function(){return r.clearCurrentMedia()}),ie(28,"i",24),m()()()(),ie(29,"div",25)(30,"div",26),m()(),p(31,"span",27)(32,"span",28)(33,"i",29),J("click",function(){return r.stopAudio()}),m(),p(34,"i",30),J("click",function(){return r.pauseAudio()}),m(),p(35,"i",31),J("click",function(){return r.resumeAudio()}),m(),p(36,"i",32),J("click",function(){return r.toggleFollow()}),P(37,"f"),m(),p(38,"i",33),J("click",function(){return r.toggleCenter()}),m(),p(39,"i",34),J("mouseover",function(){return r.show_volume(!0)})("mouseout",function(){return r.show_volume(!1)}),p(40,"div",35),J("mouseover",function(){return r.show_volume(!0)})("mouseout",function(){return r.show_volume(!1)}),p(41,"input",36),J("change",function(){return r.set_volume()})("input",function(){return r.set_volume()}),Fe("ngModelChange",function(a){return Be(r.volume,a)||(r.volume=a),a}),m()()(),p(42,"i",37),J("mouseover",function(){return r.show_m_volume(!0)})("mouseout",function(){return r.show_m_volume(!1)}),ie(43,"img",38),p(44,"div",39),J("mouseover",function(){return r.show_m_volume(!0)})("mouseout",function(){return r.show_m_volume(!1)}),p(45,"input",40),Fe("ngModelChange",function(a){return Be(r.cm.metroVolume,a)||(r.cm.metroVolume=a),a}),m()()()(),p(46,"span",41),P(47),m(),p(48,"span",42)(49,"span"),P(50,"Repeat"),m(),p(51,"input",43),J("change",function(){return r.updateRepeat()}),Fe("ngModelChange",function(a){return Be(r.repeat.start,a)||(r.repeat.start=a),a}),m(),p(52,"input",43),J("change",function(){return r.updateRepeat()}),Fe("ngModelChange",function(a){return Be(r.repeat.end,a)||(r.repeat.end=a),a}),m(),p(53,"i",44),J("click",function(){return r.repeat.active=!r.repeat.active,r.updateRepeat()}),m(),p(54,"img",45),J("click",function(){return r.setRepeatPart()}),m(),p(55,"i",46),J("click",function(){return r.drag_toggle(!r.drag)}),m(),p(56,"i",47),J("click",function(){return r.addNextPart()}),P(57,"p"),m(),p(58,"i",47),J("click",function(){return r.addNextRegion()}),P(59,"m"),m(),p(60,"i",48),J("click",function(){return r.ghost=!r.ghost,r.updateGhost()}),m(),p(61,"i",49),J("click",function(){return r.stretch=!r.stretch,r.updateStretch()}),m()(),p(62,"i",50),J("click",function(){return r.setAllBeatsFromModel()}),P(63,"b"),m(),p(64,"i",51),J("click",function(){return r.setAllMeasuresFromModel()}),P(65,"m"),m()()()),i&2&&(y(),E("ngClass",mr(43,Nne,r.visible==!0&&r.display_Y==!1,r.visible==!0&&r.display_Y==!0))("hidden",r.visible==!1),y(2),E("ngClass",Ae(46,Vne,r.audio_loaded)),y(),E("hidden",!r.loading_wheel),y(5),E("hidden",r.audio_loaded),y(6),E("hidden",!r.showFileUpload),y(8),E("hidden",!r.uploadedFileName&&!r.videoId),y(2),E("ngIf",r.uploadedFileName),y(),E("ngIf",r.videoId),y(3),E("hidden",r.timeline_hidden),y(4),E("ngClass",Ae(48,Mu,r.playerState!=2&&r.playerState!=1)),y(),E("ngClass",Ae(50,Mu,r.playerState==2)),y(),E("ngClass",Ae(52,Mu,r.playerState==1)),y(),Xn("active",r.follow),y(2),Xn("active",r.center),y(3),Oe("ngModel",r.volume),y(4),Oe("ngModel",r.cm.metroVolume),y(),cn("font-family",r.cm.novaxe_notation_on?"nvxChord":"")("font-size",r.cm.novaxe_notation_on?"30px":"35px")("right",r.cm.novaxe_notation_on?"20px":"0")("bottom",r.cm.novaxe_notation_on?"5px":"0"),y(),en(" ",r.displayed_chord," "),y(4),Oe("ngModel",r.repeat.start),y(),Oe("ngModel",r.repeat.end),y(),E("ngClass",Ae(54,Mu,r.repeat.active==!0)),y(),Xn("inactive",r.edit==!1),y(),Xn("active",r.drag)("inactive",r.edit==!1),y(),Xn("inactive",r.edit==!1),y(2),Xn("inactive",r.edit==!1),y(2),E("ngClass",Ae(56,Mu,r.ghost==!0)),y(),E("ngClass",Ae(58,Mu,r.stretch==!0)))},dependencies:[lr,vr,Gi,Vr,ld,Ti,Lo,Mi],styles:[".debug[_ngcontent-%COMP%]{border:1px solid red}.edit[_ngcontent-%COMP%]{width:30%;height:90%}.edit[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:red}.top_row[_ngcontent-%COMP%]{display:flex;align-items:center;height:2.5em;background-color:#343a40!important;width:100%;height:199px;position:fixed;bottom:0;left:0;height:45px;color:#fff;overflow-x:overlay;overflow-y:hidden}.top_row.show[_ngcontent-%COMP%]{bottom:100px}.top_row.show_mas[_ngcontent-%COMP%]{bottom:600px}.top_row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:10px;color:#fff;display:flex;align-items:center}.top_row[_ngcontent-%COMP%]   i.active[_ngcontent-%COMP%]{color:#0bd44da6}.top_row[_ngcontent-%COMP%]   i.inactive[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}.top_row[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.fa-volume-up[_ngcontent-%COMP%]:hover{color:var(--green_nvx)!important}.center-col[_ngcontent-%COMP%]{height:35px;padding:2px;display:flex;color:#fff;-webkit-user-select:none;user-select:none;align-items:center}.center-col[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.center-col[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:.25rem;text-align:center;margin:0 2.5px;width:45px}.center-col[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:var(--green_nvx) auto 1px}.center-col[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:33px}.youtube-audio-container[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;display:flex;flex-direction:column;justify-content:center;align-items:center;outline:none;background-color:#343a40;position:fixed;width:100%;left:0;height:100px;bottom:45px}.youtube-audio-container[_ngcontent-%COMP%]   .link_row[_ngcontent-%COMP%]{width:50%;color:#000;display:flex;flex-direction:row;justify-content:left;align-items:center}.youtube-audio-container[_ngcontent-%COMP%]   .link_row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:18em;margin:5px}.youtube-audio-container[_ngcontent-%COMP%]   .link_row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px;min-width:70px}.youtube-audio-container.show[_ngcontent-%COMP%]{bottom:45px}.youtube-audio-container.show_mas[_ngcontent-%COMP%]{bottom:500px}.media-source-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;width:100%;max-width:600px;margin:0 auto;padding:10px}.file-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;width:100%}.file-upload-btn[_ngcontent-%COMP%]{background-color:#6c757d;border-color:#6c757d;color:#fff;padding:8px 16px;border-radius:4px;cursor:pointer;transition:all .3s ease}.file-upload-btn[_ngcontent-%COMP%]:hover{background-color:#5a6268;border-color:#545b62}.file-upload-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.file-upload-interface[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:10px;background-color:#ffffff1a;border-radius:6px;border:1px solid rgba(255,255,255,.2)}.file-input-label[_ngcontent-%COMP%]{background-color:#28a745;border-color:#28a745;color:#fff;padding:8px 16px;border-radius:4px;cursor:pointer;transition:all .3s ease}.file-input-label[_ngcontent-%COMP%]:hover{background-color:#218838;border-color:#1e7e34}.file-input-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.current-media-display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;max-width:500px;padding:8px 12px;background-color:#ffffff1a;border-radius:4px;border:1px solid rgba(255,255,255,.2);margin-top:10px}.media-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#fff;font-size:14px}.media-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%], .media-info[_ngcontent-%COMP%]   .youtube-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.media-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .media-info[_ngcontent-%COMP%]   .youtube-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.media-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{color:#17a2b8}.media-info[_ngcontent-%COMP%]   .youtube-info[_ngcontent-%COMP%]{color:#dc3545}.btn-outline-danger[_ngcontent-%COMP%]{color:#dc3545;border-color:#dc3545;background-color:transparent;padding:4px 8px;font-size:12px}.btn-outline-danger[_ngcontent-%COMP%]:hover{color:#fff;background-color:#dc3545;border-color:#dc3545}.playerIcons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;min-width:170px;-webkit-user-select:none;user-select:none;margin-right:5%;margin-left:10px}.youtube-video-container[_ngcontent-%COMP%]{background-color:#343a40a6;position:fixed;bottom:0;left:0;height:500px;width:100%;display:flex;align-items:center;justify-content:space-evenly}.yt_player[_ngcontent-%COMP%]{opacity:1}.waveform-container[_ngcontent-%COMP%]{height:105px;position:relative;left:0;width:100%}.spining[_ngcontent-%COMP%]{position:absolute;left:0;top:0;z-index:10;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.spining.zindexzero[_ngcontent-%COMP%]{z-index:0}.spinner1[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.spinner1[_ngcontent-%COMP%]{width:70px;height:70px;background-color:transparent;border-radius:100%;-webkit-animation:_ngcontent-%COMP%_sk-scaleout 1s infinite ease-in-out;animation:_ngcontent-%COMP%_sk-scaleout 1s infinite ease-in-out}@-webkit-keyframes _ngcontent-%COMP%_sk-scaleout{0%{-webkit-transform:scale(0)}to{-webkit-transform:scale(1);opacity:0}}@keyframes _ngcontent-%COMP%_sk-scaleout{0%{-webkit-transform:scale(0);transform:scale(0)}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.spinner2[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.spinner2[_ngcontent-%COMP%]{width:70px;height:70px;background-color:transparent;-webkit-animation:_ngcontent-%COMP%_sk-rotateplane 2s infinite ease-in-out;animation:_ngcontent-%COMP%_sk-rotateplane 2s infinite ease-in-out}@-webkit-keyframes _ngcontent-%COMP%_sk-rotateplane{0%{-webkit-transform:perspective(120px)}25%{-webkit-transform:perspective(120px) rotateY(90deg)}50%{-webkit-transform:perspective(120px) rotateY(180deg) rotateX(180deg)}75%{-webkit-transform:perspective(120px) rotateY(270deg)}to{-webkit-transform:perspective(120px) rotateY(360deg) rotateX(360deg)}}@keyframes _ngcontent-%COMP%_sk-rotateplane{0%{transform:perspective(120px) rotateX(0) rotateY(0);-webkit-transform:perspective(120px) rotateX(0deg) rotateY(0deg)}25%{transform:perspective(120px) rotateX(-90.1deg) rotateY(0);-webkit-transform:perspective(120px) rotateX(-90.1deg) rotateY(0deg)}50%{transform:perspective(120px) rotateX(-180deg) rotateY(-180deg);-webkit-transform:perspective(120px) rotateX(-180deg) rotateY(-180deg)}75%{transform:perspective(120px) rotateX(-270deg) rotateY(-270deg);-webkit-transform:perspective(120px) rotateX(-270deg) rotateY(-270deg)}to{transform:perspective(120px) rotateX(-360deg) rotateY(-360deg);-webkit-transform:perspective(120px) rotateX(-360deg) rotateY(-360deg)}}.spinner3[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.spinner3[_ngcontent-%COMP%]{width:70px;height:70px;position:relative}.double-bounce1[_ngcontent-%COMP%], .double-bounce2[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;background-color:transparent;opacity:.6;position:absolute;top:0;left:0;-webkit-animation:_ngcontent-%COMP%_sk-bounce 2s infinite ease-in-out;animation:_ngcontent-%COMP%_sk-bounce 2s infinite ease-in-out}.double-bounce2[_ngcontent-%COMP%]{-webkit-animation-delay:-1s;animation-delay:-1s}@-webkit-keyframes _ngcontent-%COMP%_sk-bounce{0%,to{-webkit-transform:scale(0)}50%{-webkit-transform:scale(1)}}@keyframes _ngcontent-%COMP%_sk-bounce{0%,to{transform:scale(0);-webkit-transform:scale(0)}50%{transform:scale(1);-webkit-transform:scale(1)}}.ytp-pause-overlay[_ngcontent-%COMP%]{display:none}#yt-audio[_ngcontent-%COMP%]     ::-webkit-scrollbar{height:10px}#yt-audio[_ngcontent-%COMP%]     ::-webkit-scrollbar-track{background:transparent!important}#yt-audio[_ngcontent-%COMP%]     ::-webkit-scrollbar-thumb{background:linear-gradient(180deg,var(--green_nvx),var(--darkgray_nvx))!important}#yt-audio[_ngcontent-%COMP%]     ::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,var(--green_nvx),var(--darkgray_nvx))!important}#yt-audio[_ngcontent-%COMP%]     .selected{background-color:var(--selection-transparent)!important}#yt-audio[_ngcontent-%COMP%]     .wavesurfer-handle{cursor:col-resize!important;position:absolute!important;width:12px!important;height:12px!important;background-color:var(--yellow_nvx)!important;max-width:12px!important}#yt-audio[_ngcontent-%COMP%]     .beat-region{background-color:transparent!important;-webkit-user-select:none;user-select:none}#yt-audio[_ngcontent-%COMP%]     .wavesurfer-handle-start{top:0!important;left:0!important;width:100%!important;border-top-right-radius:10px!important;border-bottom-right-radius:10px!important}#yt-audio[_ngcontent-%COMP%]     .wavesurfer-handle-start.beat{opacity:.5;top:31px!important;left:0!important;width:1px!important;height:100%!important;max-height:15%!important;background-color:#ff0!important;border-top-right-radius:0!important;border-bottom-right-radius:0!important}#yt-audio[_ngcontent-%COMP%]     .wavesurfer-part-start{background-color:var(--green_nvx)!important}#yt-audio[_ngcontent-%COMP%]     .wavesurfer-handle-end{top:unset!important;bottom:0!important;left:unset!important;right:0!important;border-top-left-radius:10px!important;border-bottom-left-radius:10px!important;height:20%!important}#yt-audio[_ngcontent-%COMP%]     .wavesurfer-handle-end.beat{opacity:0}#yt-audio[_ngcontent-%COMP%]     .loop-start{background-color:transparent!important;top:12px!important;width:0;height:0;border-top:10px solid transparent;border-bottom:10px solid transparent;border-left:10px solid var(--red_nvx)}#yt-audio[_ngcontent-%COMP%]     .loop-end{background-color:transparent!important;bottom:12px!important;width:0;height:0;border-top:10px solid transparent;border-bottom:10px solid transparent;border-right:10px solid var(--red_nvx)}#yt-audio[_ngcontent-%COMP%]     .measureId{top:0!important;position:absolute!important;color:#000!important;font-weight:700!important;font-size:50%!important}#yt-audio[_ngcontent-%COMP%]     .firstbeatDiv{height:100%!important;display:flex;flex-direction:column;justify-content:center}#yt-audio[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-width:unset!important}#yt-audio[_ngcontent-%COMP%]   .vertical-slider-wrapper[_ngcontent-%COMP%]{display:none;height:-58px;position:relative;padding:0;top:-170px;left:5px}#yt-audio[_ngcontent-%COMP%]   .vertical-slider-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90px;height:10px;margin:0;position:fixed;transform-origin:70px 90px;transform:rotate(-90deg)}#yt-audio[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;box-shadow:-3px 7px 10px #00000082;border-radius:20px;border:1px solid var(--darkgray_nvx);height:10px;width:10px}#yt-audio[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track{-webkit-appearance:none}#yt-audio[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{width:20px;height:20px;border-radius:20px;-webkit-appearance:none;cursor:ns-resize;background:linear-gradient(180deg,var(--gray_prim),var(--gray_nvx))!important;box-shadow:-20px 0 0 80px linear-gradient(180deg,var(--gray_prim),var(--gray_nvx))!important}#yt-audio[_ngcontent-%COMP%]   section#yt-audio[_ngcontent-%COMP%]   .displayed-chord[_ngcontent-%COMP%]{font-size:35px;bottom:0;color:#28a745;filter:drop-shadow(2px 3px 1px black);margin:0 10px;position:absolute;right:0}"]})}}return t})();var q1=(()=>{class t{constructor(e){this._http=e}getItemsEditor(e){let i=new Un({"Content-Type":"application/json"});return this._http.post(ai.apiDiscogs,e,{responseType:"text",headers:i}).pipe(fn(r=>{try{return r}catch{return"Discogs api error"}}))}static{this.\u0275fac=function(i){return new(i||t)(ht(Xi))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var wc=(()=>{class t{constructor(e){this._http=e}getItems(e){let i=new Un({"Content-Type":"application/json"});return this._http.post(ai.apiSpotify,e,{responseType:"text",headers:i}).pipe(fn(r=>{try{return JSON.parse(r)}catch{return"Spotify api error"}}))}getFeatures(e){let i=new Un({"Content-Type":"application/json"});return this._http.post(ai.apiSpotifyAnalysis,e,{responseType:"text",headers:i}).pipe(fn(r=>{try{return JSON.parse(r)}catch{return"Spotify api error"}}))}getInfos(e){let i=new Un({"Content-Type":"application/json"});return this._http.post(ai.apiSpotifyContents,e,{responseType:"text",headers:i}).pipe(fn(r=>{try{return JSON.parse(r)}catch{return"Spotify api error"}}))}getReco(e){let i=new Un({"Content-Type":"application/json"});return this._http.post(ai.apiSpotifyReco,e,{responseType:"text",headers:i}).pipe(fn(r=>{try{return JSON.parse(r)}catch{return"Spotify api error"}}))}getTop(e){let i=new Un({"Content-Type":"application/json"});return this._http.post(ai.apiSpotifyTop,e,{responseType:"text",headers:i}).pipe(fn(r=>{try{return JSON.parse(r)}catch{return"Spotify api error"}}))}static{this.\u0275fac=function(i){return new(i||t)(ht(Xi))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Y9=(()=>{class t{constructor(e){this.sel=e,this.scale_tona="C",this.scale_type="major",this.caged_position=[],this.scaleUpdate$=this.sel.getUpdateScale().subscribe(()=>{this.refresh_scale()})}ngOnInit(){}ngOnDestroy(){this.scaleUpdate$.unsubscribe()}refresh_scale(){let e=Mo.get(this.scale_tona+" "+(this.scale_type||"major").toLowerCase()),i={caged_position:[...this.caged_position],scale_tona:this.scale_tona,scale_type:this.scale_type,full_scale:e};this.measure.addScale(i)}set_caged_position(e){let i=this.caged_position.indexOf(e);i>-1?this.caged_position.splice(i,1):this.caged_position.push(e)}static{this.\u0275fac=function(i){return new(i||t)(Le(nr))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-scale-selector"]],inputs:{scale_tona:"scale_tona",scale_type:"scale_type",caged_position:"caged_position",measure:"measure"},standalone:!1,decls:245,vars:118,consts:[[1,"menus"],["id","tona",1,"w-auto","form-control",3,"ngModelChange","change","ngModel"],[3,"ngValue"],["value","Gb"],["name","scales_selector","id","scales",1,"w-auto","form-control",2,"text-transform","capitalize",3,"ngModelChange","change","ngModel"],["disabled",""],[1,"caged"],[1,"caged_btn",3,"click"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"select",1),Fe("ngModelChange",function(a){return Be(r.scale_tona,a)||(r.scale_tona=a),a}),J("change",function(){return r.refresh_scale()}),p(2,"option",2),P(3,"C#"),m(),p(4,"option",2),P(5,"F#"),m(),p(6,"option",2),P(7,"B"),m(),p(8,"option",2),P(9,"E"),m(),p(10,"option",2),P(11,"A"),m(),p(12,"option",2),P(13,"D"),m(),p(14,"option",2),P(15,"G"),m(),p(16,"option",2),P(17,"C"),m(),p(18,"option",2),P(19,"F"),m(),p(20,"option",2),P(21,"Bb"),m(),p(22,"option",2),P(23,"Eb"),m(),p(24,"option",2),P(25,"Ab"),m(),p(26,"option",2),P(27,"Db"),m(),p(28,"option",3),P(29,"Gb"),m()(),p(30,"select",4),Fe("ngModelChange",function(a){return Be(r.scale_type,a)||(r.scale_type=a),a}),J("change",function(){return r.refresh_scale()}),p(31,"option",2),P(32,"major"),m(),p(33,"option",2),P(34,"minor"),m(),p(35,"option",5),P(36,"_________"),m(),p(37,"option",2),P(38,"dorian"),m(),p(39,"option",2),P(40,"phrygian"),m(),p(41,"option",2),P(42,"lydian"),m(),p(43,"option",2),P(44,"mixolydian"),m(),p(45,"option",2),P(46,"aeolian"),m(),p(47,"option",2),P(48,"locrian"),m(),p(49,"option",5),P(50,"_________"),m(),p(51,"option",2),P(52,"major pentatonic"),m(),p(53,"option",2),P(54,"major blues"),m(),p(55,"option",2),P(56,"minor pentatonic"),m(),p(57,"option",2),P(58,"minor blues"),m(),p(59,"option",5),P(60,"_________"),m(),p(61,"option",2),P(62,"harmonic major"),m(),p(63,"option",2),P(64,"harmonic minor"),m(),p(65,"option",5),P(66,"_________"),m(),p(67,"option",2),P(68,"diminished"),m(),p(69,"option",2),P(70,"minor six diminished"),m(),p(71,"option",2),P(72,"half-whole diminished"),m(),p(73,"option",2),P(74,"composite blues"),m(),p(75,"option",5),P(76,"_________"),m(),p(77,"option",2),P(78,"bebop"),m(),p(79,"option",2),P(80,"bebop minor"),m(),p(81,"option",2),P(82,"bebop major"),m(),p(83,"option",2),P(84,"bebop locrian"),m(),p(85,"option",5),P(86,"_________"),m(),p(87,"option",2),P(88,"ionian pentatonic"),m(),p(89,"option",2),P(90,"mixolydian pentatonic"),m(),p(91,"option",2),P(92,"ritusen"),m(),p(93,"option",2),P(94,"egyptian"),m(),p(95,"option",2),P(96,"neopolitan major pentatonic"),m(),p(97,"option",2),P(98,"vietnamese 1"),m(),p(99,"option",2),P(100,"pelog"),m(),p(101,"option",2),P(102,"kumoijoshi"),m(),p(103,"option",2),P(104,"hirajoshi"),m(),p(105,"option",2),P(106,"iwato"),m(),p(107,"option",2),P(108,"in-sen"),m(),p(109,"option",2),P(110,"lydian pentatonic"),m(),p(111,"option",2),P(112,"malkos raga"),m(),p(113,"option",2),P(114,"locrian pentatonic"),m(),p(115,"option",2),P(116,"minor six pentatonic"),m(),p(117,"option",2),P(118,"flat three pentatonic"),m(),p(119,"option",2),P(120,"flat six pentatonic"),m(),p(121,"option",2),P(122,"scriabin"),m(),p(123,"option",2),P(124,"whole tone pentatonic"),m(),p(125,"option",2),P(126,"lydian #5P pentatonic"),m(),p(127,"option",2),P(128,"lydian dominant pentatonic"),m(),p(129,"option",2),P(130,"minor #7M pentatonic"),m(),p(131,"option",2),P(132,"super locrian pentatonic"),m(),p(133,"option",2),P(134,"minor hexatonic"),m(),p(135,"option",2),P(136,"augmented"),m(),p(137,"option",2),P(138,"piongio"),m(),p(139,"option",2),P(140,"prometheus neopolitan"),m(),p(141,"option",2),P(142,"prometheus"),m(),p(143,"option",2),P(144,"mystery #1"),m(),p(145,"option",2),P(146,"six tone symmetric"),m(),p(147,"option",2),P(148,"whole tone"),m(),p(149,"option",2),P(150,"messiaen's mode #5"),m(),p(151,"option",2),P(152,"locrian major"),m(),p(153,"option",2),P(154,"double harmonic lydian"),m(),p(155,"option",2),P(156,"altered"),m(),p(157,"option",2),P(158,"locrian #2"),m(),p(159,"option",2),P(160,"mixolydian b6"),m(),p(161,"option",2),P(162,"lydian dominant"),m(),p(163,"option",2),P(164,"lydian augmented"),m(),p(165,"option",2),P(166,"dorian b2"),m(),p(167,"option",2),P(168,"melodic minor"),m(),p(169,"option",2),P(170,"ultralocrian"),m(),p(171,"option",2),P(172,"locrian 6"),m(),p(173,"option",2),P(174,"augmented heptatonic"),m(),p(175,"option",2),P(176,"dorian #4"),m(),p(177,"option",2),P(178,"lydian diminished"),m(),p(179,"option",2),P(180,"leading whole tone"),m(),p(181,"option",2),P(182,"lydian minor"),m(),p(183,"option",2),P(184,"phrygian dominant"),m(),p(185,"option",2),P(186,"balinese"),m(),p(187,"option",2),P(188,"neopolitan major"),m(),p(189,"option",2),P(190,"double harmonic major"),m(),p(191,"option",2),P(192,"hungarian minor"),m(),p(193,"option",2),P(194,"hungarian major"),m(),p(195,"option",2),P(196,"oriental"),m(),p(197,"option",2),P(198,"flamenco"),m(),p(199,"option",2),P(200,"todi raga"),m(),p(201,"option",2),P(202,"persian"),m(),p(203,"option",2),P(204,"enigmatic"),m(),p(205,"option",2),P(206,"major augmented"),m(),p(207,"option",2),P(208,"lydian #9"),m(),p(209,"option",2),P(210,"purvi raga"),m(),p(211,"option",2),P(212,"spanish heptatonic"),m(),p(213,"option",2),P(214,"minor bebop"),m(),p(215,"option",2),P(216,"ichikosucho"),m(),p(217,"option",2),P(218,"kafi raga"),m(),p(219,"option",2),P(220,"messiaen's mode #6"),m(),p(221,"option",2),P(222,"messiaen's mode #4"),m(),p(223,"option",2),P(224,"messiaen's mode #3"),m(),p(225,"option",2),P(226,"messiaen's mode #7"),m(),p(227,"option",2),P(228,"chromatic"),m()(),p(229,"span",6)(230,"div",7),J("click",function(){return r.set_caged_position("C")}),p(231,"span"),P(232,"C"),m()(),p(233,"div",7),J("click",function(){return r.set_caged_position("A")}),p(234,"span"),P(235,"A"),m()(),p(236,"div",7),J("click",function(){return r.set_caged_position("G")}),p(237,"span"),P(238,"G"),m()(),p(239,"div",7),J("click",function(){return r.set_caged_position("E")}),p(240,"span"),P(241,"E"),m()(),p(242,"div",7),J("click",function(){return r.set_caged_position("D")}),p(243,"span"),P(244,"D"),m()()()()),i&2&&(y(),Oe("ngModel",r.scale_tona),y(),E("ngValue","C#"),y(2),E("ngValue","F#"),y(2),E("ngValue","B"),y(2),E("ngValue","E"),y(2),E("ngValue","A"),y(2),E("ngValue","D"),y(2),E("ngValue","G"),y(2),E("ngValue","C"),y(2),E("ngValue","F"),y(2),E("ngValue","Bb"),y(2),E("ngValue","Eb"),y(2),E("ngValue","Ab"),y(2),E("ngValue","Db"),y(4),Oe("ngModel",r.scale_type),y(),E("ngValue","major"),y(2),E("ngValue","aeolian"),y(4),E("ngValue","dorian"),y(2),E("ngValue","phrygian"),y(2),E("ngValue","lydian"),y(2),E("ngValue","mixolydian"),y(2),E("ngValue","aeolian"),y(2),E("ngValue","locrian"),y(4),E("ngValue","major pentatonic"),y(2),E("ngValue","major blues"),y(2),E("ngValue","minor pentatonic"),y(2),E("ngValue","minor blues"),y(4),E("ngValue","harmonic major"),y(2),E("ngValue","harmonic minor"),y(4),E("ngValue","diminished"),y(2),E("ngValue","minor six diminished"),y(2),E("ngValue","half-whole diminished"),y(2),E("ngValue","composite blues"),y(4),E("ngValue","bebop"),y(2),E("ngValue","bebop minor"),y(2),E("ngValue","bebop major"),y(2),E("ngValue","bebop locrian"),y(4),E("ngValue","ionian pentatonic"),y(2),E("ngValue","mixolydian pentatonic"),y(2),E("ngValue","ritusen"),y(2),E("ngValue","egyptian"),y(2),E("ngValue","neopolitan major pentatonic"),y(2),E("ngValue","vietnamese 1"),y(2),E("ngValue","pelog"),y(2),E("ngValue","kumoijoshi"),y(2),E("ngValue","hirajoshi"),y(2),E("ngValue","iwato"),y(2),E("ngValue","in-sen"),y(2),E("ngValue","lydian pentatonic"),y(2),E("ngValue","malkos raga"),y(2),E("ngValue","locrian pentatonic"),y(2),E("ngValue","minor six pentatonic"),y(2),E("ngValue","flat three pentatonic"),y(2),E("ngValue","flat six pentatonic"),y(2),E("ngValue","scriabin"),y(2),E("ngValue","whole tone pentatonic"),y(2),E("ngValue","lydian #5P pentatonic"),y(2),E("ngValue","lydian dominant pentatonic"),y(2),E("ngValue","minor #7M pentatonic"),y(2),E("ngValue","super locrian pentatonic"),y(2),E("ngValue","minor hexatonic"),y(2),E("ngValue","augmented"),y(2),E("ngValue","piongio"),y(2),E("ngValue","prometheus neopolitan"),y(2),E("ngValue","prometheus"),y(2),E("ngValue","mystery #1"),y(2),E("ngValue","six tone symmetric"),y(2),E("ngValue","whole tone"),y(2),E("ngValue","messiaen's mode #5"),y(2),E("ngValue","locrian major"),y(2),E("ngValue","double harmonic lydian"),y(2),E("ngValue","altered"),y(2),E("ngValue","locrian #2"),y(2),E("ngValue","mixolydian b6"),y(2),E("ngValue","lydian dominant"),y(2),E("ngValue","lydian augmented"),y(2),E("ngValue","dorian b2"),y(2),E("ngValue","melodic minor"),y(2),E("ngValue","ultralocrian"),y(2),E("ngValue","locrian 6"),y(2),E("ngValue","augmented heptatonic"),y(2),E("ngValue","dorian #4"),y(2),E("ngValue","lydian diminished"),y(2),E("ngValue","leading whole tone"),y(2),E("ngValue","lydian minor"),y(2),E("ngValue","phrygian dominant"),y(2),E("ngValue","balinese"),y(2),E("ngValue","neopolitan major"),y(2),E("ngValue","double harmonic major"),y(2),E("ngValue","hungarian minor"),y(2),E("ngValue","hungarian major"),y(2),E("ngValue","oriental"),y(2),E("ngValue","flamenco"),y(2),E("ngValue","todi raga"),y(2),E("ngValue","persian"),y(2),E("ngValue","enigmatic"),y(2),E("ngValue","major augmented"),y(2),E("ngValue","lydian #9"),y(2),E("ngValue","purvi raga"),y(2),E("ngValue","spanish heptatonic"),y(2),E("ngValue","minor bebop"),y(2),E("ngValue","ichikosucho"),y(2),E("ngValue","kafi raga"),y(2),E("ngValue","messiaens mode #6"),y(2),E("ngValue","messiaens mode #4"),y(2),E("ngValue","messiaens mode #3"),y(2),E("ngValue","messiaens mode #7"),y(2),E("ngValue","chromatic"),y(3),Xn("active",r.caged_position.indexOf("C")!=-1),y(3),Xn("active",r.caged_position.indexOf("A")!=-1),y(3),Xn("active",r.caged_position.indexOf("G")!=-1),y(3),Xn("active",r.caged_position.indexOf("E")!=-1),y(3),Xn("active",r.caged_position.indexOf("D")!=-1))},dependencies:[bo,xo,Jo,Ti,Mi],styles:[".menus[_ngcontent-%COMP%]{height:70px;display:flex;flex-direction:row;justify-content:center;align-items:center}.form-control[_ngcontent-%COMP%]{margin-right:5px}.caged[_ngcontent-%COMP%]{display:inline-flex;margin:20px}.caged[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:rotate(-45deg)}.round[_ngcontent-%COMP%]{fill:#fff;opacity:0}.step[_ngcontent-%COMP%]{fill:#000;text-anchor:middle;font-size:7px;font-weight:bolder;opacity:0;font-family:nvxChord;-webkit-user-select:none;user-select:none}.y-diamond[_ngcontent-%COMP%]{overflow:auto!important}.diamond[_ngcontent-%COMP%]{fill:#fff;stroke:#000;opacity:1}.finger[_ngcontent-%COMP%]{fill:#ff0;opacity:1;stroke-width:5;stroke:#ff0;overflow:visible;transform:scale(1.5)}.y-finger[_ngcontent-%COMP%]{overflow:visible}.finger_midi[_ngcontent-%COMP%]{fill:#ff0;opacity:0}.lh_finger[_ngcontent-%COMP%]{fill:#000;opacity:0}.bubble[_ngcontent-%COMP%]{transform-box:fill-box;transform:scale(1.2);transform-origin:center}.bubble.transp[_ngcontent-%COMP%]{opacity:.6}.caged_btn[_ngcontent-%COMP%]{transform:rotate(45deg);margin:10px;border:5px solid var(--green_nvx);color:var(--green_nvx);width:2em;height:2em;cursor:pointer;outline:none;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;background-color:var(--gray_nvx)}.caged_btn.active[_ngcontent-%COMP%], .caged_btn[_ngcontent-%COMP%]:hover{background-color:#28a74570}.btns[_ngcontent-%COMP%]{display:flex;flex-direction:row}.btns[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:5px;width:30px;height:30px}.btns[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:.7em;align-items:center;display:inline-flex;margin-right:10px}.btns[_ngcontent-%COMP%]   div.double[_ngcontent-%COMP%]{margin-right:0}.btns[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0}.btns[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:30px;height:30px}"]})}}return t})();function Une(t,n){if(t&1){let e=mn();p(0,"div",73),J("click",function(){let r=pe(e).index,s=ge().index,a=ge();return fe(a.selectMeasure(s,r))})("keydown.control.c",function(){pe(e);let r=ge(2);return fe(r.copySelection())})("keydown.control.v",function(){pe(e);let r=ge(2);return fe(r.paste_only_chords())})("keydown.delete",function(){let r=pe(e).$implicit,s=ge().$implicit,a=ge();return fe(a.deleteSelection(s,r))}),p(1,"span",74),J("click",function(){let r=pe(e).index,s=ge().index,a=ge();return fe(a.collapse_measure(s,r))}),p(2,"span",75),ie(3,"i",76),p(4,"div",77),P(5),m(),p(6,"i",78),J("click",function(){let r=pe(e).$implicit,s=ge().$implicit,a=ge();return fe(a.playMeasure(s,r))}),m()(),p(7,"div",79)(8,"input",80),J("keydown.shift.space",function(){let r=pe(e).$implicit,s=ge().$implicit,a=ge();return fe(a.playPauseMeasure(s,r))})("change",function(){let r=pe(e).$implicit,s=ge().$implicit,a=ge();return fe(a.render(s,r,"chords"))}),Fe("ngModelChange",function(r){let s=pe(e).$implicit;return Be(s.chords,r)||(s.chords=r),fe(r)}),J("focus",function(){let r=pe(e).index,s=ge().index,a=ge();return fe(a.selectMeasure(s,r))}),m()(),p(9,"i",81),J("click",function(){let r=pe(e).$implicit,s=ge().$implicit,a=ge();return fe(a.deleteSelection(s,r))}),m()(),p(10,"div",82)(11,"div",83)(12,"input",84),J("change",function(){let r=pe(e).$implicit,s=ge().$implicit,a=ge();return fe(a.render(s,r,"notes"))}),Fe("ngModelChange",function(r){let s=pe(e).$implicit;return Be(s.notes,r)||(s.notes=r),fe(r)}),m()(),p(13,"div",83)(14,"input",85),J("change",function(){let r=pe(e).$implicit,s=ge().$implicit,a=ge();return fe(a.render(s,r,"analysis"))}),Fe("ngModelChange",function(r){let s=pe(e).$implicit;return Be(s.analysis,r)||(s.analysis=r),fe(r)}),m()(),p(15,"div",83)(16,"label"),P(17,"Go to line"),m(),p(18,"input",86),J("change",function(){let r=pe(e).$implicit,s=ge().$implicit,a=ge();return fe(a.render(s,r,"eol"))}),Fe("ngModelChange",function(r){let s=pe(e).$implicit;return Be(s.eol,r)||(s.eol=r),fe(r)}),m()(),p(19,"div",83),ie(20,"app-scale-selector",87),m()()()}if(t&2){let e=n.$implicit,i=n.index,r=ge().index,s=ge();ae("id","measure_"+r+"_"+i),y(),ae("href","#measure_hidden_"+r+"_"+i)("aria-controls","measure_hidden_"+r+"_"+i),y(4),Yt(s.getMeasureIdxs(e)),y(3),Oe("ngModel",e.chords),ae("name","chords_row_"+i),y(2),ae("id","measure_hidden_"+r+"_"+i),y(2),Oe("ngModel",e.notes),ae("name","notes_row_"+i),y(2),Oe("ngModel",e.analysis),ae("name","analysis_row_"+i),y(2),ae("for","line_row_"+r+"_"+i),y(2),Oe("ngModel",e.eol),ae("name","gotoline_row_"+i),y(2),E("scale_tona",e.scale.scale_tona)("scale_type",e.scale.scale_type)("measure",e)("caged_position",e.scale.caged_position)}}function qne(t,n){if(t&1){let e=mn();p(0,"div",58),J("click",function(){let r=pe(e).index,s=ge();return fe(s.selectPart(r))})("keydown.control.c",function(){pe(e);let r=ge();return fe(r.copySelection())})("keydown.control.v",function(){pe(e);let r=ge();return fe(r.paste_only_chords())})("keydown.delete",function(){let r=pe(e).index,s=ge();return fe(s.deletePart(r))}),p(1,"div",59)(2,"span",60)(3,"a"),ie(4,"i",61),m()(),p(5,"span",62)(6,"input",63),J("change",function(){let r=pe(e).index,s=ge();return fe(s.render(r,0,"header"))}),Fe("ngModelChange",function(r){let s=pe(e).$implicit;return Be(s.title,r)||(s.title=r),fe(r)}),m()(),p(7,"span",64)(8,"span",65)(9,"input",66),J("change",function(){let r=pe(e).index,s=ge();return fe(s.render(r,0,"header"))}),Fe("ngModelChange",function(r){let s=pe(e).$implicit;return Be(s.tonality,r)||(s.tonality=r),fe(r)}),m()(),p(10,"span",67)(11,"input",68),J("change",function(){let r=pe(e).index,s=ge();return fe(s.change_signature_in_model_rerender(r))}),Fe("ngModelChange",function(r){let s=pe(e).$implicit;return Be(s.meter,r)||(s.meter=r),fe(r)}),m()(),p(12,"i",69),J("click",function(){let r=pe(e).index,s=ge();return fe(s.deletePart(r))}),m()()(),p(13,"div",70)(14,"div",71),Wt(15,Une,21,18,"div",72),m()()()}if(t&2){let e=n.$implicit,i=n.index;ae("id","part_"+i),y(2),ae("href","#collapseMeasures"+i)("aria-control","collapseMeasures"+i),y(4),Oe("ngModel",e.title),ae("id","part_"+i+"_title"),y(3),Oe("ngModel",e.tonality),ae("id","part_"+i+"_tonality"),y(2),Oe("ngModel",e.meter),ae("id","part_"+i+"_signature"),y(3),ae("id","collapseMeasures"+i),y(),E("ngForOf",e.getMeasures())}}var X9=(()=>{class t{constructor(e,i,r,s,a,l,d,u,h){this.sm=e,this.dm=i,this.sel=r,this.tp=s,this.player=a,this.keys=l,this.config=d,this.disc=u,this.spot=h,this.display=!0,this.parts=[],this.song={title:"Score title",artist:"",album:"",style:"",transcription:"",tonality:"C",default_duration:"1/8",signature:"4/4",clef:"treble",transpose:0,m_per_l:4,price:0},this.selected_measures_list=[],this.copyBuffer=[],this.selected_part_list=[],this.copyBuffer_part_list=[],this.display_mode="chords",this.image_upload_visible=!1,this.autoSearch=!1,this.i_img=0,this.modalAnalyse=!1,this.selectionUpdate$=this.sel.selected_Update$.subscribe(_=>{if(this.dislight_all(),!(!_||!_[0]))for(let b=0;b<_.length;b++)_[b].type=="part"?this.highlight_part(_[b].idx):_[b].type=="measure"&&this.highlight(this.sm.getMeasures_hash()[_[b].getId()].part,this.sm.getMeasures_hash()[_[b].getId()].meas)})}ngOnInit(){this.populate(),this.init_bindings(),this.apply_chords_display(),this.song.price>0&&(this.image_upload_visible=!0)}ngOnDestroy(){this.savePrefs(),this.selectionUpdate$.unsubscribe(),this.binding$.unsubscribe()}populate(){let e=this.sm.getInfos();this.song.title=e.getTitle(),this.song.artist=e.getArtist(),this.song.album=e.getAlbum(),this.song.transcription=e.getTranscription(),this.song.signature=e.getSignature(),this.song.default_duration=e.getDefault_duration(),this.song.clef=e.getClef(),this.song.tonality=e.getTonality(),this.song.transpose=e.getTranspose(),this.song.style=e.getStyle(),this.song.m_per_l=e.getMeasuresPerLine(),this.song.price=e.getPrice(),this.song.img=e.getImage(),this.parts=this.sm.getParts(),this.display_mode=this.config.getDisplayMode()}savePopup(e,i=""){let r,s;e?r=$("#saved_ok_mark"):r=$("#saved_pb_mark"),r.show(),$(".song").css("filter","blur(3px)"),setTimeout(()=>{r.hide(),$(".song").css("filter","none")},500),i!=""&&(i=="owner"?s=$("#saved_pb_owner"):i=="title"&&(s=$("#saved_pb_title")),s.show(),setTimeout(()=>{s.hide()},2e3))}savePrefs(){this.config.setDisplayMode(this.display_mode),this.config.saveInCookie()}save(){this.savePrefs(),this.sm.save().subscribe(e=>{e.includes("[512] wrong owner")?this.savePopup(!1,"owner"):e.includes("[512] wrong title")?this.savePopup(!1,"title"):e.includes("[2] id error")?this.savePopup(!1):this.savePopup(!0)},e=>{console.log("err  : "+e),this.savePopup(!1)},e=>{console.log("Saving Complete")})}switch_chords_display(e){e?this.display_mode=e:this.display_mode=="chords"?this.display_mode="analyse":this.display_mode=="analyse"?this.display_mode="both":this.display_mode=="both"&&(this.display_mode="chords"),this.apply_chords_display()}apply_chords_display(){this.display_mode=="analyse"?(this.changeCss(".abcjs-chord","display:none"),this.changeCss(".abcjs-annotation","-webkit-transform:translate(0px,-70px)")):this.display_mode=="chords"?this.changeCss(".abcjs-annotation","display:none"):this.display_mode=="both"&&(this.changeCss(".abcjs-chord","opacity:1"),this.changeCss(".abcjs-annotation","-webkit-transform:translate(0px,0px)"))}changeCss(e,i){var r=$("#css-modifier-container");if(r.length==0){var r=$('<div id="css-modifier-container"></div>');r.hide(),r.appendTo($("body"))}let s=r.find('div[data-class="'+e+'"]');s.length==0&&(s=$('<div data-class="'+e+'"></div>'),s.appendTo(r)),s.html("<style>"+e+" {"+i+"}</style>")}addMeasureToPart(e,i){let r=this.sm.getPart(e).getMeasures().length%this.song.m_per_l==0,s={collapse:!0},a=new bs,l=new Zo;a.addBeat(l);let d=this.sm.getPart(e)[i].getMeter();a.setMeter(d),a.setEol(r),this.sm.insertMeasureInPart(e,i,a),a.setAudioRegion({start:this.player.getCurrentTime(),end:this.player.getCurrentTime()+1}),this.dm.renderMarker({operation:"refresh"}),this.dm.renderFromModel()}hasAudioRegion(e){return!!e.hasOwnProperty("audioRegion")}addMarkerToSelection(e,i){if(this.selected_measures_list.length==0||this.selected_measures_list.length==1){this.selectMeasure(e.getIdx()-1,this.sm.getMeasures_hash()[i.getIdx()].meas),this.toggleMarker(e,i);return}var r,s,a=this.hasAudioRegion(i);for(let l=0;l<this.selected_measures_list.length;l++)s=this.sm.getPart(this.selected_measures_list[l].part-1),r=this.sm.getPart(s.getIdx()-1).getMeasure(this.selected_measures_list[l].meas),a?this.removeMarker(s,r):this.addMarker(s,r)}removeMarker(e,i){if(!this.hasAudioRegion(i))return;let r=this.sm.deleteRegion(i.idx);this.dm.renderMarker({operation:"remove",data:i.idx})}addMarker(e,i){if(this.hasAudioRegion(i))return;var r=this.sm.mNumberToPartIdx(i.idx);let s=this.sm.addAudioRegion(e.idx-1,r.measure);this.dm.renderMarker({operation:"add",data:s})}toggleMarker(e,i){var r=this.sm.mNumberToPartIdx(i.idx);if(this.hasAudioRegion(i)){let s=this.sm.deleteRegion(i.idx);this.dm.renderMarker({operation:"remove",data:i.idx})}else{let s=this.sm.addAudioRegion(e.idx-1,r.measure);this.dm.renderMarker({operation:"add",data:s})}}addPartAfter(e){let i=new Zo,r=new bs;r.addBeat(i);let s=new Ma;s.addMeasure(r),r.setAudioRegion({start:this.player.getCurrentTime(),end:this.player.getCurrentTime()+1}),this.sm.insertPartAfter(e,s),this.dm.renderMarker({operation:"refresh"}),this.dm.renderFromModel()}renderHeader(){this.sm.setTitle(this.song.title),this.sm.setArtist(this.song.artist),this.sm.setAlbum(this.song.album),this.sm.setTranscription(this.song.transcription),this.sm.setSignature(this.song.signature),this.sm.setPrice(this.song.price),this.sm.setImage(this.song.img),this.sm.setDefault_duration(this.song.default_duration),this.sm.setClef(this.song.clef),this.sm.setTonality(this.song.tonality),this.sm.setTranspose(this.song.transpose),this.sm.setStyle(this.song.style),this.dm.renderFromModel()}render(e,i,r){if(this.renderHeader(),r=="header")return;let s=i.setFromLines();s>0?alert("chord line : "+i.getChordsLine()+" is longer than nb beats. Cutting chord line"):s<0,r=="analysis"&&i.setAnalysisLine(i.analysis),this.dm.renderFromModel()}selectPart(e){let i;event.ctrlKey||(i=[],this.dislight_all()),i=[this.sm.getPart(e)];let r=this.sm.getPart(e).getMeasures(),s=this.sm.getMeasures_hash();for(let a=0;a<r.length;a++){let l=this.sm.getPart(s[r[a].getIdx()].part).getMeasure(s[r[a].getIdx()].meas);i.push(l)}this.sel.setSelection(i)}selectMeasure(e,i){let r;event.stopPropagation();let s=this.sm.getMeasures_hash(),a=this.sm.getPart(e).getMeasure(i).getId();r=s[a],this.sel.setSelection([this.sm.getMeasureById(r.id)])}select_next_measure(){let e=this.sel.select_next_measure();if(!e)return;let i=e.getAudioRegion().start;this.player.setCurrentTime(i),this.player.isPlaying()&&this.player.play()}get_measures_between(e,i){let r=e.getIdx(),s=[e],a=this.sm.getMeasures_hash();for(;r!=i.getIdx();){r++;let l=a[r],d=this.sm.getPart(l.part).getMeasure(l.meas);if(s.push(d),r>350)throw"error get_measures_between() => too many measures to select. 'while' problem ?"}return s}reorder(e,i){return e.getIdx()<i.getIdx()?-1:1}dislight_all(){$(".measure.active").removeClass("active"),$(".part.active").removeClass("active")}highlight(e,i){let r=$('[id^="collapseMeasures"].show').attr("id");r&&r!="collapseMeasures"+e&&(r=r.match(/collapseMeasures([0-9]+)/),r&&$("#collapseMeasures"+r[1]).collapse("hide")),$("#collapseMeasures"+e).collapse("show"),$("#measure_"+e+"_"+i)[0].scrollIntoView({behavior:"instant",block:"center"}),$("#measure_"+e+"_"+i).addClass("active"),document.activeElement.name&&document.activeElement.name.match(/^chords_row/)&&$("#measure_"+e+"_"+i).find("[name^='chords_row_']").focus()}highlight_part(e){$("#part_"+e).addClass("active")}addMeasure(){let e=$(".measure.active").last().attr("id");if(!this.sm.getParts().length)this.addPartAfter(0);else if(e==null){if(e=$(".part.active").attr("id"),!e){alert("Select a measure to add after !");debugger;return}let r=e.split("_")[1];this.addMeasureToPart(Number(r),Number(this.sm.getPart(Number(r)).getMeasures().length));return}else{let i=e.split("_"),r=i[1],s=i[2];this.addMeasureToPart(Number(r),Number(s))}}addPart(){let e=$(".part.active").attr("id"),i=0;if(!this.sm.getParts().length)this.addPartAfter(Number(i));else if(e==null){alert("Select a part to add after !");debugger;return}else{let s=e.split("_")[1];i=Number(s),this.addPartAfter(Number(i))}return this.dm.renderMarker({operation:"refresh"}),i}addNextPart(){if(this.player.getCurrentRegion()!=null)this.sm.transformMeasureInPart(this.player.getCurrentRegion().id),this.dm.renderFromModel();else{let e,i=this.sel.getSelection()[0];i?e=this.sm.addNextPart(i.getIdx(),this.player.getCurrentTime()):(console.warn("No selection"),this.sm.getParts().length||this.addPartAfter(0)),e&&(this.dm.renderFromModel(),this.player.addRegion(e))}}copyPart(){this.copySelection()}pastePart(){event.stopPropagation();let e=Number(this.addPart());this.sm.getPart(e+1).deleteMeasure(0);let i=this.sel.getSelection();for(let r=0;r<i.length;r++)i[r].part=Number(e)+2;this.pasteSelection()}deletePart(e){if(event.target.type!="text")if(event.stopPropagation(),this.sm.deletePart(e),this.dm.renderFromModel(),this.dm.renderMarker({operation:"refresh"}),e==0){let i=this.sm.getPart(0).getMeasures().length-1;this.sel.setSelection([this.sm.getPart(0).getMeasure(i)])}else{let i=this.sm.getPart(e-1).getMeasures().length-1;this.sel.setSelection([this.sm.getPart(e-1).getMeasure(i)])}}deleteMeasure(e,i,r=!0){if(event.target.type!="text")try{if(this.sm.getPart(e).getMeasure(i).hasOwnProperty("audioRegion")){let s=this.sm.getPart(e).getMeasure(i).getIdx();this.dm.renderMarker({operation:"remove",data:s})}this.sm.deleteMeasure(e,i)}catch{debugger}}deleteSelection(e,i){if(console.log("deleteSelection"),event.stopPropagation(),event.path[0].nodeName=="INPUT"&&this.sel.getSelection().length<=1)return;let r=i.getIdx(),s=e.getIdx(),a=this.sel.getSelection();if(a.length==0||a.length==1){this.selectMeasure(e.getIdx(),this.sm.getMeasures_hash()[i.getIdx()].meas),this.sm.deleteMeasuresByIds([a[0].idx]),this.dm.renderFromModel(),this.dm.renderMarker({operation:"refresh"});let u=r==1?r:r-1;if(!this.sm.getParts().length)return;this.selectMeasure(this.sm.getMeasures_hash()[u].part,this.sm.getMeasures_hash()[u].meas);return}let l=!1,d=[];for(let u=0;u<a.length;u++)d.push(a[u].idx+1);this.sm.deleteMeasuresByIds(d),this.dm.renderFromModel(),this.dm.renderMarker({operation:"refresh"}),this.sel.setSelection([])}copySelection(){if(console.clear(),event.stopPropagation(),event.path[0].tagName=="INPUT")return;let i,r,s;this.copyBuffer=[];let a=this.sel.getSelection();if(a.length)if(a[0].hasOwnProperty("type")&&a[0].getType()=="measure")for(let l=0;l<a.length;l++){let d=this.sm.copyMeasure(a[l]);this.copyBuffer.push(d)}else a[0].hasOwnProperty("type")&&a[0].getType()=="part"&&this.copyBuffer.push(this.sm.copyPart(a[0]))}pasteSelection(){if(event.path[0].tagName=="INPUT")return;event.stopPropagation();let i=this.sel.getSelection();if(this.copyBuffer[0].hasOwnProperty("type")&&this.copyBuffer[0].getType()=="part"){let r=this.sm.copyPart(this.copyBuffer[0]),s=$(".part.active").attr("id").split("_")[1];this.sm.insertPartAfter(s,r)}else{let r=i[0].part,s=i[0].meas;i[0].hasOwnProperty("type")&&i[0].type=="part"&&(r=i[0].getIdx(),s=i[0].getMeasures().length-1);debugger;for(let a=0;a<this.copyBuffer.length;a++){let l=this.sm.getPart(this.copyBuffer[a].part-1).getMeasure(this.copyBuffer[a].meas),d=this.sm.copyMeasure(l);d.setIdx(-1),this.sm.insertMeasureInPart(r-1,s,d),s++}}this.dm.renderFromModel(),this.dm.renderMarker({operation:"refresh"})}paste_only_chords(){if(event.path[0].tagName=="INPUT")return;event.stopPropagation();let i=this.copyBuffer,r=this.sel.getSelection();this.sm.paste_only_chords(i,r),this.dm.renderFromModel()}collapse_measure(e,i){event.stopPropagation(),event.preventDefault(),$("#measure_hidden_"+e+"_"+i).collapse("toggle")}playMeasure(e,i){event.preventDefault(),this.player.playMeasure(i.getIdx())}playPauseMeasure(e,i){event.preventDefault(),this.player.isPlaying()?this.player.playPause():this.player.playMeasure(i.getIdx())}analysePopup(){this.modalAnalyse=!0}analyse(){this.sm.analyse_part(),this.dm.renderFromModel(),this.switch_chords_display("both")}debug(){debugger}getMeasureIdxs(e){let i="",r=this.sm.getMeasures_hash();return Object.keys(r).length&&(i=r[e.getIdx()].meas+1),i}focusSelected(){if(!$(".editor_menu").hasClass("editor_visible"))return;let e=$(".active.measure").find(".measure_chords").find("input");e.length&&e.focus()}unfocus(e){e.target.blur(),e.preventDefault(),$("#editor")[0].focus()}init_bindings(){this.binding$=this.keys.match([Si.ENTER,Si.ESCAPE,Si.TAB,Si.A],[]).subscribe(e=>{let i=e;if($(document.activeElement).parents(".song").length||$(document.activeElement).hasClass("song"))switch(i.keyCode){case Si.ENTER:i.path&&i.path[0].placeholder=="Chords"&&this.select_next_measure(),setTimeout(()=>{this.focusSelected()},50);break;case Si.A:if(i.path[0].tagName=="INPUT")return;i.ctrlKey&&this.sel.select_current_part();break;case Si.ESCAPE:this.unfocus(i);break;case Si.TAB:if($(document.activeElement).parents("#score_infos").length)return;if(i.stopPropagation(),i.preventDefault(),i.shiftKey){let a;if(!this.sel.getSelection()[0]||(this.player.getCurrentTime()>this.sel.getSelection()[0].getAudioRegion().start+.5?a=this.sel.getSelection()[0]:a=this.sel.select_previous_measure(),!a))return;let l=a.getAudioRegion().start;this.player.setCurrentTime(l),this.player.isPlaying()&&this.player.play()}else this.select_next_measure();i.path[0].tagName=="INPUT"&&this.focusSelected();break}})}showImgUpload(e){e.target.value>0?this.image_upload_visible=!0:this.image_upload_visible=!1}getAlbumItems(){this.autoSearch=!0,this.i_img=0;var e=this.song.title,i=this.song.artist,r=this.song.album,s="editor";e!="Score title"&&e!=""&&e!=" "&&this.spot.getItems({title:e,artist:i,album:r,comp:s}).subscribe(a=>{this.items=a,(this.song.artist==""||this.song.artist==" "||this.song.artist=="unknown")&&this.getSongArtist(),(this.song.album==""||this.song.album==" "||this.song.album=="unknown")&&this.getSongAlbum();var l="";this.getAlbumImage(l)})}getSongStyle(){this.disc.getItemsEditor({title:this.song.title,artist:this.song.artist,album:this.song.album.split(" ")[0]}).subscribe(e=>{this.styles=JSON.parse(e);var i="";if(this.styles!=null){if(this.styles.results[0]!=null&&this.styles.results[0].hasOwnProperty("genre"))for(let[r,s]of Object.entries(this.styles.results[0].genre))i+=JSON.stringify(s).replace(/"/g,"")+" - ";if(this.styles.results[0]!=null&&this.styles.results[0].hasOwnProperty("style"))for(let[r,s]of Object.entries(this.styles.results[0].style))i+=JSON.stringify(s).replace(/"/g,"")+" - "}this.song.style=i,this.sm.setStyle(this.song.style)})}getSongArtist(){var e="";this.items.tracks.items[this.i_img].artists[0].hasOwnProperty("name")&&(e=this.items.tracks.items[this.i_img].artists[0].name),this.song.artist=e,this.sm.setArtist(this.song.artist)}getSongAlbum(){var e="";this.items.tracks.items[this.i_img].album.hasOwnProperty("name")&&(e=this.items.tracks.items[this.i_img].album.name),this.song.album=e,this.sm.setAlbum(this.song.album)}getAlbumImage(e){this.song.img==this.items.tracks.items[this.i_img].album.images[0].url?e!=""&&(e.currentTarget.id=="next"?this.i_img=this.i_img+1:e.currentTarget.id=="prev"&&(this.i_img=this.i_img-1),this.getSongArtist(),this.getSongAlbum(),this.song.img=this.items.tracks.items[this.i_img].album.images[0].url,this.sm.setImage(this.song.img),this.getSongStyle()):(this.getSongArtist(),this.getSongAlbum(),this.song.img=this.items.tracks.items[this.i_img].album.images[0].url,this.sm.setImage(this.song.img),this.getSongStyle())}change_signature_in_model_rerender(e){let i=this.sm.getPart(e),r=i.check_meter();r!==0&&alert("Unknown signature : "+r+". Changing to 4/4"),i.setBeatsFromMeter(),this.dm.renderFromModel()}static{this.\u0275fac=function(i){return new(i||t)(Le(Hn),Le(Po),Le(nr),Le(yi),Le(Rs),Le(Pd),Le(Ci),Le(q1),Le(wc))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-editor"]],standalone:!1,decls:88,vars:17,consts:[["id","editor","tabindex","2",3,"contextmenu"],[1,"main_col"],[1,"w-100","d-flex","icons"],["title","Copy",1,"fas","fa-copy","p-2",3,"click"],["title","Paste only chords",1,"fas","fa-paste","p-2",3,"click"],["title","Add part",1,"fas","fa-plus","p-2",2,"color","var(--green_nvx)",3,"click"],["title","Add measure",1,"fas","fa-plus","p-2",2,"color","var(--red_nvx)",3,"click"],["title","Analyse",1,"fas","fa-search","p-2",3,"click"],["title","Change display",1,"p-2","display",3,"click"],["title","Save",1,"fas","fa-save","p-2",3,"click"],["id","score_infos"],["data-toggle","collapse","href","#collapseScoreinfo","role","button","aria-expanded","false","aria-controls","collapseScoreinfo",1,"collapsible"],["id","collapseScoreinfo",1,"collapse"],[1,"card","card-body","content","score_infos"],[1,"box_informations"],["for","title"],["id","title","name","title","type","text",1,"form-control","input-xs",3,"change","ngModelChange","ngModel"],["for","artist"],["id","artist","name","artist","type","text",1,"form-control","input-xs",3,"change","ngModelChange","ngModel"],["for","album"],["id","album","name","album","type","text",1,"form-control","input-xs",3,"change","ngModelChange","ngModel"],["id","style","name","style","type","text",1,"form-control","input-xs",3,"change","ngModelChange","ngModel"],["for","tonality"],["id","tonality","name","tonality","type","text",1,"form-control","input-xs",3,"change","ngModelChange","ngModel"],["id","signature","name","signature","type","text",1,"form-control","input-xs",3,"change","ngModelChange","ngModel"],["for","default_dur"],["id","default_dur","name","default_dur","type","text",1,"form-control","input-xs",3,"change","ngModelChange","ngModel"],["for","clef"],["id","clef","name","clef","type","text",1,"form-control","input-xs",3,"change","ngModelChange","ngModel"],["for","transposition"],["id","transpose","name","transpose","type","number",1,"form-control","input-xs",3,"change","ngModelChange","ngModel"],["for","m_per_l"],["id","m_per_l","name","m_per_l","type","text",1,"form-control","input-xs",3,"change","ngModelChange","ngModel"],[1,"box_informations",2,"flex-direction","column"],[1,"d-flex",2,"flex-direction","row","width","100%"],["for","img"],["id","img","name","img","type","text","min","0",1,"form-control","input-xs",3,"change","ngModelChange","ngModel"],[1,"row","d-flex","w-100",2,"justify-content","center","padding","20px 20px 0","align-items","center"],["id","prev",2,"cursor","pointer",3,"click","hidden"],[1,"fas","fa-angle-left",2,"font-size","40px"],["onerror","this.src='../assets/img/empty_score.png'","alt","Album image",3,"src"],["id","next",2,"cursor","pointer",3,"click","hidden"],[1,"fas","fa-angle-right",2,"font-size","40px"],[1,"cutting"],["data-toggle","collapse",1,"collapsible"],["id","collapseScoreparts",1,"parts_container","collapse","show"],[1,"card","card-body","content"],["class","part","tabindex","0",3,"click","keydown.control.c","keydown.control.v","keydown.delete",4,"ngFor","ngForOf"],["id","analyse-modal","tabindex","-1","role","dialog","aria-labelledby","analyse-modal-label","aria-hidden","true",1,"fakebook-modal","modal",3,"hidden"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","analyse-modal-label",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["tabindex","0",1,"part",3,"click","keydown.control.c","keydown.control.v","keydown.delete"],[1,"part-container"],["data-toggle","collapse","data-parent","#collapseBigGroup","aria-expanded","true",1,"part-content","d-flex","collapsible","collapsed"],[1,"fas","collapsible","fa-angle-double-up","p-1"],[1,"title"],["placeholder","Title","name","title","type","text",1,"form-control","input-xs","title-input",3,"change","ngModelChange","ngModel"],[1,"ml-auto","d-flex"],[1,"key"],["placeholder","Key","name","title","type","text",1,"form-control","input-xs","ml-1","key-input",3,"change","ngModelChange","ngModel"],[1,"meter"],["placeholder","Meter","name","signature","type","text",1,"form-control","input-xs","ml-1","meter-input",3,"change","ngModelChange","ngModel"],[1,"ml-2","fas","fa-window-close","p-1",3,"click"],["id","collapseBigGroup"],[1,"collapse","card","card-body","content"],["class","measure","tabindex","1",3,"click","keydown.control.c","keydown.control.v","keydown.delete",4,"ngFor","ngForOf"],["tabindex","1",1,"measure",3,"click","keydown.control.c","keydown.control.v","keydown.delete"],["data-toggle","collapse","aria-expanded","false",1,"w100","measures","collapsed",3,"click"],[1,"measures-idx"],[1,"fas","collapsible","fa-angle-double-up"],[1,"idx"],[1,"fas","fa-play","m-1",3,"click"],[1,"measure_chords"],["placeholder","Chords","autocomplete","off","type","text",1,"form-control","input-sm",3,"keydown.shift.space","change","ngModelChange","focus","ngModel"],[1,"ml-2","fas","fa-window-close",3,"click"],[1,"collapse"],[1,"measure_row"],["placeholder","Notes","autocomplete","off","type","text",1,"form-control","input-sm",3,"change","ngModelChange","ngModel"],["placeholder","Analysis","autocomplete","off","type","text",1,"form-control","input-sm",3,"change","ngModelChange","ngModel"],["type","checkbox",1,"form-control","input-sm",3,"change","ngModelChange","ngModel"],[3,"scale_tona","scale_type","measure","caged_position"]],template:function(i,r){i&1&&(p(0,"section",0),J("contextmenu",function(a){return a.preventDefault()}),p(1,"div",1)(2,"div",2)(3,"i",3),J("click",function(){return r.copySelection()}),m(),p(4,"i",4),J("click",function(){return r.paste_only_chords()}),m(),p(5,"i",5),J("click",function(){return r.addNextPart()}),m(),p(6,"i",6),J("click",function(){return r.addMeasure()}),m(),p(7,"i",7),J("click",function(){return r.analysePopup()}),m(),p(8,"i",8),J("click",function(){return r.switch_chords_display()}),P(9,"I"),m(),p(10,"i",9),J("click",function(){return r.save()}),m()(),p(11,"div",10)(12,"a",11),P(13," Score informations "),m(),p(14,"div",12)(15,"div",13)(16,"span",14)(17,"label",15),P(18,"Title"),m(),p(19,"input",16),J("change",function(){return r.render(0,0,"header"),r.getAlbumItems()}),Fe("ngModelChange",function(a){return Be(r.song.title,a)||(r.song.title=a),a}),m()(),p(20,"span")(21,"label",17),P(22,"Artist"),m(),p(23,"input",18),J("change",function(){return r.render(0,0,"header"),r.getAlbumItems()}),Fe("ngModelChange",function(a){return Be(r.song.artist,a)||(r.song.artist=a),a}),m()(),p(24,"span",14)(25,"label",19),P(26,"Album"),m(),p(27,"input",20),J("change",function(){return r.render(0,0,"header")}),Fe("ngModelChange",function(a){return Be(r.song.album,a)||(r.song.album=a),a}),m()(),p(28,"span",14)(29,"label",19),P(30,"Style"),m(),p(31,"input",21),J("change",function(){return r.render(0,0,"header")}),Fe("ngModelChange",function(a){return Be(r.song.style,a)||(r.song.style=a),a}),m()(),p(32,"span")(33,"label",22),P(34,"Tonality"),m(),p(35,"input",23),J("change",function(){return r.render(0,0,"header")}),Fe("ngModelChange",function(a){return Be(r.song.tonality,a)||(r.song.tonality=a),a}),m()(),p(36,"span",14)(37,"label",22),P(38,"Signature"),m(),p(39,"input",24),J("change",function(){return r.render(0,0,"header")}),Fe("ngModelChange",function(a){return Be(r.song.signature,a)||(r.song.signature=a),a}),m()(),p(40,"span",14)(41,"label",25),P(42,"Default dur"),m(),p(43,"input",26),J("change",function(){return r.render(0,0,"header")}),Fe("ngModelChange",function(a){return Be(r.song.default_duration,a)||(r.song.default_duration=a),a}),m()(),p(44,"span",14)(45,"label",27),P(46,"Clef"),m(),p(47,"input",28),J("change",function(){return r.render(0,0,"header")}),Fe("ngModelChange",function(a){return Be(r.song.clef,a)||(r.song.clef=a),a}),m()(),p(48,"span")(49,"label",29),P(50,"Transposition"),m(),p(51,"input",30),J("change",function(){return r.render(0,0,"header")}),Fe("ngModelChange",function(a){return Be(r.song.transpose,a)||(r.song.transpose=a),a}),m()(),p(52,"span",14)(53,"label",31),P(54,"Measures per line"),m(),p(55,"input",32),J("change",function(){return r.render(0,0,"header")}),Fe("ngModelChange",function(a){return Be(r.song.m_per_l,a)||(r.song.m_per_l=a),a}),m()(),p(56,"span",33)(57,"div",34)(58,"label",35),P(59,"Cover image link"),m(),p(60,"input",36),J("change",function(){return r.render(0,0,"header")}),Fe("ngModelChange",function(a){return Be(r.song.img,a)||(r.song.img=a),a}),m()(),p(61,"div",37)(62,"a",38),J("click",function(a){return r.getAlbumImage(a)}),ie(63,"i",39),m(),ie(64,"img",40),p(65,"a",41),J("click",function(a){return r.getAlbumImage(a)}),ie(66,"i",42),m()()()()()(),p(67,"div",43)(68,"a",44),P(69,"Parts"),m(),p(70,"div",45)(71,"div",46),Wt(72,qne,16,11,"div",47),m()()()(),p(73,"div",48)(74,"div",49)(75,"div",50)(76,"div",51)(77,"h5",52),P(78,"Analyse"),m(),p(79,"button",53),J("click",function(){return r.modalAnalyse=!1}),p(80,"span",54),P(81,"\xD7"),m()()(),p(82,"div",55)(83,"pre"),P(84,"Analysing will replace your own analyse. You sure ?"),m()(),p(85,"div",56)(86,"button",57),J("click",function(){return r.modalAnalyse=!1,r.analyse()}),P(87,"Analyse"),m()()()()()()),i&2&&(y(19),Oe("ngModel",r.song.title),y(4),Oe("ngModel",r.song.artist),y(4),Oe("ngModel",r.song.album),y(4),Oe("ngModel",r.song.style),y(4),Oe("ngModel",r.song.tonality),y(4),Oe("ngModel",r.song.signature),y(4),Oe("ngModel",r.song.default_duration),y(4),Oe("ngModel",r.song.clef),y(4),Oe("ngModel",r.song.transpose),y(4),Oe("ngModel",r.song.m_per_l),y(5),Oe("ngModel",r.song.img),y(2),E("hidden",r.autoSearch==!1||r.i_img==0),y(2),E("src",As(!r.song.img||r.song.img.endsWith("/spacer.gif")?"../assets/img/empty_score.png":r.song.img),Hr),y(),E("hidden",r.autoSearch==!1||r.i_img==49),y(7),E("ngForOf",r.parts),y(),E("hidden",r.modalAnalyse==!1))},dependencies:[gi,Gi,Vr,ro,Ti,Mi,Y9],styles:['section#editor[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;background-color:#343a40!important;position:fixed;width:36vw;height:100%;top:0;color:#fff;min-width:271px;padding-top:70px}section#editor[_ngcontent-%COMP%]:focus{outline:none}section#editor[_ngcontent-%COMP%]   .parts_container[_ngcontent-%COMP%]{height:80vh;overflow:auto}section#editor[_ngcontent-%COMP%]   .parts_container[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}section#editor[_ngcontent-%COMP%]   .parts_container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}section#editor[_ngcontent-%COMP%]   .parts_container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#ff8a00,#e52e71)}section#editor[_ngcontent-%COMP%]   .parts_container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}section#editor[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}section#editor[_ngcontent-%COMP%]   i.active[_ngcontent-%COMP%]{color:red}section#editor[_ngcontent-%COMP%]   .main_col[_ngcontent-%COMP%]{position:absolute;width:100%}section#editor[_ngcontent-%COMP%]   .main_col[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]{font-family:cursive;font-weight:900;line-height:10px;font-size:1.2em}section#editor[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0;background-color:transparent;color:#fff;border:none;border-radius:0;height:1.6em}section#editor[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:.3rem}section#editor[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:1em;box-shadow:none}section#editor[_ngcontent-%COMP%]   .collapsible[_ngcontent-%COMP%]{color:#fff;cursor:pointer;margin-left:5px;border-bottom:1px solid white;text-align:left;outline:none;height:1.5em;display:flex}section#editor[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%], section#editor[_ngcontent-%COMP%]   .collapsible[_ngcontent-%COMP%]:hover{background-color:transparent;text-decoration:none}section#editor[_ngcontent-%COMP%]   .score_infos[_ngcontent-%COMP%]{padding:10px 0}section#editor[_ngcontent-%COMP%]   .score_infos[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}section#editor[_ngcontent-%COMP%]   .score_infos[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:45%;margin:0 5px 0 20px}section#editor[_ngcontent-%COMP%]   .part-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;overflow:auto}section#editor[_ngcontent-%COMP%]   .part-container[_ngcontent-%COMP%]   .part-content[_ngcontent-%COMP%]{border:none;height:1.7em;width:5em;justify-content:left}section#editor[_ngcontent-%COMP%]   .part-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%}section#editor[_ngcontent-%COMP%]   .part-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]{min-width:35%;font-weight:500}section#editor[_ngcontent-%COMP%]   .part-container[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]   .key-input[_ngcontent-%COMP%]{width:3em;text-align:center}section#editor[_ngcontent-%COMP%]   .part-container[_ngcontent-%COMP%]   .meter[_ngcontent-%COMP%]   .meter-input[_ngcontent-%COMP%]{width:4em;margin-left:auto}section#editor[_ngcontent-%COMP%]   .part.active[_ngcontent-%COMP%]{background-color:#37834c}section#editor[_ngcontent-%COMP%]   .part[_ngcontent-%COMP%]{padding:5px}section#editor[_ngcontent-%COMP%]   span.measures[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i.fa-angle-double-up[_ngcontent-%COMP%]:before{content:"\\f102"}section#editor[_ngcontent-%COMP%]   span.measures.collapsed[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i.fa-angle-double-up[_ngcontent-%COMP%]:before{content:"\\f103"}section#editor[_ngcontent-%COMP%]   span.part-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-angle-double-up[_ngcontent-%COMP%]:before{content:"\\f102"}section#editor[_ngcontent-%COMP%]   span.part-content.collapsed[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-angle-double-up[_ngcontent-%COMP%]:before{content:"\\f103"}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background-color:#343a40!important;border:none}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{border:none;align-items:center}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{border-left:1px solid white!important;padding:0 10px;display:flex;flex-direction:column;margin-top:5px;outline:none}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .measure.active[_ngcontent-%COMP%]{outline:none;background-color:var(--selection-transparent)}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measures-idx[_ngcontent-%COMP%]   .idx[_ngcontent-%COMP%]{padding:5px;width:3em}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:left;align-items:center}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:left;align-items:center}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measure_row[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:flex-start;align-items:flex-start;flex-direction:row}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measure_row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{justify-content:center;align-items:center;background-color:#343a40!important;position:fixed;height:100%;right:100%;width:36vw;min-width:271px;top:0;color:#fff;padding-top:75px;display:flex;flex-direction:column}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measure_row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:5px}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measure_row[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:1em;color:var(--light_prim)}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measure_row[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:after{width:15px;height:15px;inset:2px 0 0;position:relative;background-color:var(--light_prim);content:"";display:block;visibility:visible;padding:0;border:2px solid var(--light_prim);border-radius:3px}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measure_row[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:after{width:15px;height:15px;inset:2px 0 0;position:relative;background-color:var(--green_nvx);content:"";display:block;visibility:visible;border:2px solid var(--light_prim);border-radius:3px}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measure_row.show[_ngcontent-%COMP%]{display:flex}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measure_row.collapsing[_ngcontent-%COMP%]{display:flex}section#editor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]   .measure_chords[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;flex-grow:1}section#editor[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::selection{color:none;background:none}section#editor[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-moz-selection{color:none;background:none}section#editor[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{cursor:pointer}section#editor[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   i.fa-plus[_ngcontent-%COMP%]:hover{color:var(--light_prim)!important}section#editor[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:var(--green_nvx)!important}section#editor[_ngcontent-%COMP%]   app-scale-selector[_ngcontent-%COMP%]{width:100%;transform:scale(.7)}section#editor[_ngcontent-%COMP%]   .box_informations[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;max-height:150px;min-width:150px;min-height:150px;object-fit:cover}section#editor[_ngcontent-%COMP%]   .fakebook-modal[_ngcontent-%COMP%]{position:fixed;left:0;z-index:2050;display:flex;width:100%;height:100%;overflow:hidden;outline:0;min-width:600px;justify-content:center;align-items:center;background:#0000005c}section#editor[_ngcontent-%COMP%]   .fakebook-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{background:#2b399061}section#editor[_ngcontent-%COMP%]   .fakebook-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{min-width:600px;width:100%;height:auto}']})}}return t})();function Yne(t,n){if(t&1&&(p(0,"option",2),P(1),m()),t&2){let e=n.$implicit,i=ge();E("value",e.value.name)("selected",e.value.name===i.selected_midi),y(),Yt(e.value.name)}}var Su=(()=>{class t{set is_guitar(e){this.midi_is_ready&&(this.rebind_midi(),this.hasChanged.emit("changed"))}constructor(e,i,r){this.midi=e,this.zone=i,this.cm=r,this.midi_is_ready=!1,this.midi_ports=[],this.selected_midi="",this.hasChanged=new Rn,this.plugged_inputs$=this.midi.plugged_inputs$.subscribe(s=>{this.midi_ports=s}),this.midi_available$=this.midi.MIDI_AVAILABLE$.subscribe(s=>{s!=!1&&(this.midi_is_ready=!0,this.rebind_midi())}),this.chosen_input$=this.midi.chosen_input$.subscribe(s=>{s.length&&this.zone.run(()=>{this.cm.setMidiInputSelected(s[0].value.name),this.selected_midi=s[0].value.name})})}ngOnDestroy(){this.chosen_input$.unsubscribe(),this.midi_available$.unsubscribe(),this.plugged_inputs$.unsubscribe()}rebind_midi(){if(this.cm.getMidiInputSelected()!=""){let e=this.cm.is_midi_guitar();this.midi.bindMidiInput(this.cm.getMidiInputSelected(),e)}}change_midi_port(e){let i=this.cm.is_midi_guitar();this.midi.bindMidiInput(e.target.value,i),this.hasChanged.emit("changed")}static{this.\u0275fac=function(i){return new(i||t)(Le(hi),Le(on),Le(Ci))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-midi-selector"]],inputs:{is_guitar:"is_guitar"},outputs:{hasChanged:"hasChanged"},standalone:!1,decls:2,vars:1,consts:[["name","midi_ports","id","midi_ports",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"]],template:function(i,r){i&1&&(p(0,"select",0),J("change",function(a){return r.change_midi_port(a)}),Wt(1,Yne,2,3,"option",1),m()),i&2&&(y(),E("ngForOf",r.midi_ports))},dependencies:[gi,bo,xo],encapsulation:2})}}return t})();var Xne=["minipiano"],dM=(()=>{class t{constructor(){this.coordinates={C:-127.5,Cb:-127.5,"C#":-127.5,D:-127.5,"D#":-127.5,Db:-127.5,E:-127.5,Eb:-127.5,"E#":-127.5,F:-187,Fb:-127.5,"F#":-127.5,G:-207,Gb:-207.5,"G#":-207,A:-207,Ab:-217,"A#":-227,B:-247,Bb:-263,"B#":-263}}ngOnInit(){}ngAfterViewInit(){let e="green";for(let i=0;i<this.notes.length;i++){let r=this.notes[i],s=this.intervals[i];if(s=="1P"?e="green":s=="3M"?e="red":s=="3m"?e="darkred":s=="5P"?e="dodgerblue":s=="5d"?e="darkblue":s=="7M"?e="magenta":s=="7m"?e="darkmagenta":e="grey",r.indexOf("#")!=-1||r.indexOf("b")!=-1){let a=r.replaceAll("#","s");$(this.myId.nativeElement).find("[id*="+a+"]").css("fill",e)}else $(this.myId.nativeElement).find("#"+r).css("fill",e)}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=zt({type:t,selectors:[["app-piano-mini"]],viewQuery:function(i,r){if(i&1&&xl(Xne,5),i&2){let s;Na(s=Va())&&(r.myId=s.first)}},inputs:{notes:"notes",root:"root",intervals:"intervals"},standalone:!1,decls:42,vars:1,consts:[["minipiano",""],["width","100%","height","100%","version","1.1","viewBox","0 0 350.7 137.5","xmlns","http://www.w3.org/2000/svg"],["id","layer1"],["id","g943","transform","translate(123.6)"],["id","C","d","m4.338 10.57h24.46v130.5c-3.005 8.245-19.88 8.017-24.46 0z",2,"fill","#ffffff"],["id","D","d","m29.37 10.57h24.46v130.5c-3.005 8.245-19.88 8.017-24.46 0z",2,"fill","#ffffff"],["id","E","d","m54.39 10.57h24.46v130.5c-3.005 8.245-19.88 8.017-24.46 0z",2,"fill","#ffffff"],["id","F","d","m79.42 10.57h24.46v130.5c-3.005 8.245-19.88 8.017-24.46 0z",2,"fill","#ffffff"],["id","G","d","m104.5 10.57h24.46v130.5c-3.005 8.245-19.88 8.017-24.46 0z",2,"fill","#ffffff"],["id","A","d","m129.5 10.57h24.46v130.5c-3.005 8.245-19.88 8.017-24.46 0z",2,"fill","#ffffff"],["id","B","d","m154.5 10.57h24.46v130.5c-3.005 8.245-19.88 8.017-24.46 0z",2,"fill","#ffffff"],["id","Cs_Db","d","m20.42 10.84h17.44v90.18c-2.143 5.696-14.18 5.538-17.44 0z",2,"fill","#000000"],["id","Ds_Eb","d","m45.29 10.84h17.44v90.18c-2.143 5.696-14.18 5.538-17.44 0z",2,"fill","#000000"],["id","Fs_Gb","d","m94.51 10.84h17.44v90.18c-2.143 5.696-14.18 5.538-17.44 0z",2,"fill","#000000"],["id","Gs_Ab","d","m119.4 10.84h17.44v90.18c-2.143 5.696-14.18 5.538-17.44 0z",2,"fill","#000000"],["id","As_Bb","d","m144.2 10.84h17.44v90.18c-2.143 5.696-14.18 5.538-17.44 0z",2,"fill","#000000"],["id","g969","transform","translate(298.8)"],["id","g970","transform","translate(474)"]],template:function(i,r){i&1&&(ft(),p(0,"svg",1,0)(2,"g",2)(3,"g",3),ie(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7)(8,"path",8)(9,"path",9)(10,"path",10)(11,"path",11)(12,"path",12)(13,"path",13)(14,"path",14)(15,"path",15),m(),p(16,"g",16),ie(17,"path",4)(18,"path",5)(19,"path",6)(20,"path",7)(21,"path",8)(22,"path",9)(23,"path",10)(24,"path",11)(25,"path",12)(26,"path",13)(27,"path",14)(28,"path",15),m(),p(29,"g",17),ie(30,"path",4)(31,"path",5)(32,"path",6)(33,"path",7)(34,"path",8)(35,"path",9)(36,"path",10)(37,"path",11)(38,"path",12)(39,"path",13)(40,"path",14)(41,"path",15),m()()()),i&2&&(y(2),ae("transform","translate("+r.coordinates[r.root]+" -10.15)"))},encapsulation:2})}}return t})();var Jne=t=>[t];function Qne(t,n){if(t&1&&(p(0,"span",32),P(1),m()),t&2){let e=n.$implicit;y(),Yt(e)}}function $ne(t,n){if(t&1&&(p(0,"span",33),P(1),m()),t&2){let e=n.$implicit;y(),Yt(e)}}function Kne(t,n){if(t&1){let e=mn();p(0,"div",19)(1,"div",20)(2,"h6",21)(3,"i",22),J("click",function(){let r=pe(e).$implicit,s=ge();return fe(s.play(r))}),m(),P(4),m()(),p(5,"div",23),P(6),m(),p(7,"div",24),P(8),m(),ie(9,"app-piano-mini",25),p(10,"div",26)(11,"div",27)(12,"span",28),P(13,"Intervals :"),m(),p(14,"div",29),Wt(15,Qne,2,1,"span",30),m()(),p(16,"div",27)(17,"span",28),P(18,"Notes :"),m(),p(19,"div",29),Wt(20,$ne,2,1,"span",31),m()()()()}if(t&2){let e=n.$implicit,i=ge();ae("id","chord_dico_"+i.filter(e.value.symbol)),y(4),en(" ",e.value.symbol),y(2),en("Full Name : ",e.value.name),y(2),en("Type : ",e.value.type),y(),E("notes",e.value.notes)("root",e.value.root||e.value.tonic)("intervals",e.value.intervals),y(6),E("ngForOf",e.value.intervals),y(5),E("ngForOf",e.value.notes)}}var Q9=(()=>{class t{constructor(e,i){this.sm=e,this.sel=i,this.chords_in_score={},this.chords_in_score=e.getChordsInScore(),this.selectionUpdate$=this.sel.selected_Update$.subscribe(r=>{this.dislight_all()}),this.songId=e.getInfos().getSongId()}ngOnDestroy(){this.selectionUpdate$.unsubscribe()}dislight_all(){$("#dico.selected").removeClass("selected")}highlight(e){e.indexOf("/")!=-1&&(e=e.split("/")[0]),$("#chord_dico_"+this.filter(e)).addClass("selected")}scrollTo(e){e.indexOf("/")!=-1&&(e=e.split("/")[0]),$("#chord_dico_"+this.filter(e)).length?$("#chord_dico_"+this.filter(e))[0].scrollIntoView({behavior:"instant",block:"center"}):console.warn("dico.component: scrollTo() => chord not found",e)}filter(e){return e.replaceAll("#","s")}analyseScore_clicked(){this.analyseScore(),this.sm.setChordsInScore(this.chords_in_score)}analyseScore(){let e=this.sm.getParts();this.chords_in_score={};for(let i of e){let r=i.getMeasures();for(let s of r){let a=this.analyseChordLine(s.getChordsLine());for(let l of a)this.chords_in_score.hasOwnProperty(l.symbol)||(this.chords_in_score[l.symbol]=l)}}console.log(this.chords_in_score)}analyseChordLine(e){let i=[];if(!e||e=="")return[];let r=e.split(" ");for(let s of r)if(s.indexOf("/")!=-1){let a=s.split("/"),l=qn.get(a[0]);l.root=a[1],l.symbol+="/"+a[1],l.name+=" over "+a[1],l.empty?console.warn("Unknown chord : ",s):i.push(l)}else{let a=qn.get(s);a.empty?console.warn("Unknown chord : ",s):i.push(a)}return i}play(e){}add(){}static{this.\u0275fac=function(i){return new(i||t)(Le(Hn),Le(nr))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-dico"]],standalone:!1,decls:22,vars:6,consts:[["id","dico"],[1,"w-100","d-flex"],[1,"nav","nav-tabs"],[1,"active"],["data-toggle","tab","href","#piano-icon"],["title","Piano analysis",1,"fas","fa-piano"],[0,"xlink","href","assets/img/icons/piano_icon.svg#piano_icon"],["data-toggle","tab","href","#guitar-icon"],["title","Guitar analysis",1,"fas","fa-guitar","p-2"],[2,"margin-left","auto"],[1,"clickable-row",3,"click","routerLink"],["title","Stats page","aria-hidden","true",1,"fas","fa-chart-bar","p-2"],["title","Analyse",1,"fas","fa-search","p-2",3,"click"],[1,"tab-content"],["id","piano-icon",1,"tab-pane","fade","in","active","show"],[1,"main_col"],["class","card card-body",4,"ngFor","ngForOf"],["id","guitar-icon",1,"tab-pane","fade"],[2,"padding","10px"],[1,"card","card-body"],[1,"symbol"],[1,"m-0"],["title","Play",1,"fas","fa-play","p-2",3,"click"],[1,"name"],[1,"type"],[2,"position","absolute","top","0vw","right","10%","max-width","17vw","height","11vh",3,"notes","root","intervals"],[1,"under-piano"],[1,"row"],[1,"title"],[1,"content"],["class","interv",4,"ngFor","ngForOf"],["class","note",4,"ngFor","ngForOf"],[1,"interv"],[1,"note"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4),ft(),p(5,"svg",5),ie(6,"use",6),m()()(),Ho(),p(7,"li")(8,"a",7),ie(9,"i",8),m()()(),p(10,"span",9)(11,"a",10),J("click",function(a){return a.stopPropagation()}),ie(12,"i",11),m(),p(13,"i",12),J("click",function(){return r.analyseScore_clicked()}),m()()(),p(14,"div",13)(15,"div",14)(16,"div",15),Wt(17,Kne,21,9,"div",16),O0(18,"keyvalue"),m()(),p(19,"div",17)(20,"p",18),P(21,"Guitar analysis will be availiable soon"),m()()()()),i&2&&(y(11),E("routerLink",Ae(4,Jne,"/stats/"+r.songId)),y(6),E("ngForOf",F0(18,2,r.chords_in_score)))},dependencies:[gi,Ns,dM,Q2],styles:["#dico[_ngcontent-%COMP%]   .main_col[_ngcontent-%COMP%]{overflow-y:auto;max-height:88vh;padding-bottom:80%}#dico[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{color:#fff}#dico[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{cursor:pointer;color:#fff}#dico[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]:hover, #dico[_ngcontent-%COMP%]   .fa-piano[_ngcontent-%COMP%]:hover, #dico[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]:hover{color:var(--green_nvx);fill:var(--green_nvx)}#dico[_ngcontent-%COMP%]   .fa-piano[_ngcontent-%COMP%]{width:16px;height:16px;margin:6px;fill:#fff;cursor:pointer}.selected[_ngcontent-%COMP%]{color:var(--yellow_nvx)}.card[_ngcontent-%COMP%]{background-color:transparent;padding:5px;border-left:none}.card[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{margin-bottom:30px}.under-piano[_ngcontent-%COMP%]{flex-direction:column}.under-piano[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:nowrap;margin:0}.under-piano[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:40%}.under-piano[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:60%;margin-right:15px;display:flex;justify-content:space-evenly}.nav-tabs[_ngcontent-%COMP%]{border:none}"]})}}return t})();var eie=t=>({disabled:t}),tie=(t,n,e)=>({"p-misty":t,"p-summer":n,"p-fever":e}),nie=t=>({"p-summer":t});function iie(t,n){if(t&1&&(p(0,"option",90),P(1),m()),t&2){let e=n.$implicit;E("value",e[2].split(" ")[0]),y(),Yt(e[1]||e[2].split(" ")[0])}}function rie(t,n){if(t&1&&(p(0,"option",90),P(1),m()),t&2){let e=n.$implicit;E("value",e),y(),Yt(e)}}function oie(t,n){if(t&1&&(p(0,"option",90),P(1),m()),t&2){let e=n.$implicit;E("value",e),y(),Yt(e)}}function sie(t,n){t&1&&(ft(),ie(0,"image",91))}function aie(t,n){t&1&&(ft(),p(0,"svg",92)(1,"text",93)(2,"tspan",94),P(3,"3"),m()(),p(4,"text",95)(5,"tspan",96),P(6,"5"),m()(),p(7,"text",97)(8,"tspan",98),P(9,"7"),m()(),p(10,"text",99)(11,"tspan",100),P(12,"9"),m()(),p(13,"text",101)(14,"tspan",102),P(15,"12"),m()(),p(16,"text",103)(17,"tspan",104),P(18,"15"),m()(),p(19,"text",105)(20,"tspan",106),P(21,"17"),m()(),p(22,"text",107)(23,"tspan",108),P(24,"19"),m()(),p(25,"text",109)(26,"tspan",110),P(27,"21"),m()(),p(28,"text",111)(29,"tspan",112),P(30,"24"),m()(),p(31,"text",113)(32,"tspan",114),P(33,"12"),m()()())}function lie(t,n){t&1&&(ft(),ie(0,"image",115))}function cie(t,n){t&1&&(ft(),p(0,"svg",92)(1,"text",116)(2,"tspan",117),P(3,"3"),m()(),p(4,"text",118)(5,"tspan",119),P(6,"5"),m()(),p(7,"text",120)(8,"tspan",121),P(9,"7"),m()(),p(10,"text",122)(11,"tspan",123),P(12,"9"),m()(),p(13,"text",124)(14,"tspan",125),P(15,"12"),m()(),p(16,"text",126)(17,"tspan",127),P(18,"15"),m()(),p(19,"text",128)(20,"tspan",129),P(21,"17"),m()(),p(22,"text",130)(23,"tspan",131),P(24,"19"),m()(),p(25,"text",132)(26,"tspan",133),P(27,"21"),m()(),p(28,"text",134)(29,"tspan",135),P(30,"24"),m()(),p(31,"text",136)(32,"tspan",137),P(33,"12"),m()()())}function die(t,n){if(t&1&&(ft(),p(0,"svg",140),ie(1,"path",141)(2,"path",142)(3,"path",143),p(4,"text",144),P(5),m()()),t&2){let e=n.$implicit,i=n.index,r=ge().index,s=ge();cn("display",s.fb_struct[r][i].display_fing?"block":"none"),ae("id","string_"+r+"_Finger_"+i)("x",e),y(),cn("filter",s.selected_anim=="Misty"||s.selected_anim=="Misty-time"?"url(#f2) blur(1px)":""),y(),E("ngClass",ei(11,tie,s.selected_anim=="Misty"||s.selected_anim=="Misty-time",s.selected_anim=="Summertime",s.selected_anim=="Fever")),ae("style",s.selected_anim=="Summertime"?"animation-duration:"+s.animationTime+"s;":"",gt),y(),E("ngClass",Ae(15,nie,s.selected_anim=="Misty-time")),ae("style",s.selected_anim=="Misty-time"?"animation-duration:"+s.animationTime+"s;":"",gt),y(2),Yt(s.displayNotesMode?s.notes_active[r][i]:s.active_intervals[s.active_scale.indexOf(s.notes_active[r][i])])}}function hie(t,n){if(t&1&&(ft(),p(0,"svg",138),Wt(1,die,6,17,"svg",139),m()),t&2){let e=n.$implicit,i=n.index,r=ge();ae("id","FB_finger_string_"+i)("y",e),y(),E("ngForOf",r.selected_bg=="Classic"?r.xStringNotes:r.xStringNotes2)}}function uie(t,n){if(t&1&&(ft(),ie(0,"image",148)),t&2){let e=n.$implicit,i=n.index,r=ge().index,s=ge();cn("display",s.fb_struct[r][i].display_glow&&s.glowingBubbles&&(s.fb_struct[r][i].display_bub||s.fb_struct[r][i].display_midi)&&(s.caged_filter.indexOf(i)>-1||s.caged_filter.length==0||!s.score_follow)?"block":"none"),ae("id","string_"+r+"_Glow_"+i)("x",e)("href","assets/img/chordEditor/"+(s.fb_struct[r][i].display_midi?s.fb_struct[r][i].midi_img:s.fb_struct[r][i].bubble_img),null,"xlink")}}function pie(t,n){if(t&1&&(ft(),ie(0,"image",149)),t&2){let e=n.$implicit,i=n.index,r=ge().index,s=ge();cn("display",(s.fb_struct[r][i].display_bub||s.fb_struct[r][i].display_midi)&&(s.caged_filter.indexOf(i)>-1||s.caged_filter.length==0||!s.score_follow)?"block":"none"),ae("id","string_"+r+"_Bubble_"+i)("x",e)("href","assets/img/chordEditor/"+(s.fb_struct[r][i].display_midi?s.fb_struct[r][i].midi_img:s.fb_struct[r][i].bubble_img),null,"xlink")}}function fie(t,n){if(t&1&&(ft(),p(0,"svg",145),Wt(1,uie,1,5,"image",146)(2,pie,1,5,"image",147),m()),t&2){let e=n.$implicit,i=n.index,r=ge();cn("display",r.activeStrings[i]&&r.activeBubbles?"block":"none"),ae("id","FB_bubble_string_"+i)("y",e),y(),E("ngForOf",r.selected_bg=="Classic"?r.xStringNotes:r.xStringNotes2),y(),E("ngForOf",r.selected_bg=="Classic"?r.xStringNotes:r.xStringNotes2)}}function mie(t,n){if(t&1&&(ft(),ie(0,"svg",152)),t&2){let e=n.$implicit,i=n.index,r=ge().index,s=ge();cn("display",(s.fb_struct[r][i].display_los||s.active_scale.indexOf(s.notes_active[r][i])>-1)&&(s.caged_filter.indexOf(i)>-1||s.caged_filter.length==0)?"block":"none"),E("text",s.displayNotesMode?s.notes_active[r][i]:s.active_intervals[s.active_scale.indexOf(s.notes_active[r][i])]),ae("note",s.notes_active[r][i])("x",e)("id","string_"+r+"_Diamond_"+i)}}function gie(t,n){if(t&1&&(ft(),p(0,"svg",150),Wt(1,mie,1,6,"svg",151),m()),t&2){let e=n.$implicit,i=n.index,r=ge();cn("display",r.activeStrings[i]&&r.activeLosanges?"block":"none"),ae("id","FB_diamond_string_"+i)("y",e),y(),E("ngForOf",r.selected_bg=="Classic"?r.xStringNotes:r.xStringNotes2)}}function _ie(t,n){if(t&1){let e=mn();ft(),p(0,"circle",153),J("click",function(){let r=pe(e).index,s=ge();return fe(s.activeStrings[r]=!s.activeStrings[r])}),m()}if(t&2){let e=n.$implicit,i=n.index,r=ge();Xn("active",r.activeStrings[i]),ae("id","stringToggle_"+i)("cy",e+6.5)}}var yie=["fretboard-diamond",""],$9='section#fretboard[_ngcontent-%COMP%]{background-color:#49525bdb;bottom:0;left:0;right:0;margin:0;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:30px}section#fretboard[_ngcontent-%COMP%]   .bg-text[_ngcontent-%COMP%]{fill:#000;font-family:sans-serif;font-feature-settings:normal;font-size:5.1816px;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;letter-spacing:0px;line-height:125%;opacity:.392;stroke-width:.29897px;word-spacing:0px}section#fretboard[_ngcontent-%COMP%]   .bg-text[_ngcontent-%COMP%]   tspan[_ngcontent-%COMP%]{stroke-width:.29897px}section#fretboard.modal[_ngcontent-%COMP%]{width:1450px;height:385px;overflow:hidden;bottom:auto;right:auto}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard.modal-dialog[_ngcontent-%COMP%]{max-width:unset;pointer-events:all;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;margin:0}section#fretboard.modal.ui-draggable-dragging[_ngcontent-%COMP%]{-moz-transition:none;-o-transition:none;-webkit-transition:none;transition:none}section#fretboard.modal.nofly[_ngcontent-%COMP%]{top:18%;left:3%;-webkit-transition:opacity .3s linear;-moz-transition:opacity .3s linear;-o-transition:opacity .3s linear;transition:opacity .3s linear}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]{height:80px;width:100%;display:flex;flex-direction:row;justify-content:space-around;align-items:center}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:5px;width:30px;height:30px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .floored[_ngcontent-%COMP%]{font-size:.7em;align-items:center;display:inline-flex;margin-right:5px;display:flex;flex-direction:row}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .floored[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{color:var(--light_prim);-webkit-appearance:none}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:after{width:20px;height:20px;inset:-5px 0 0 -5px;position:relative;background-color:var(--light_prim);content:"";display:block;visibility:visible;padding:0;border:2px solid var(--light_prim);border-radius:3px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:after{width:20px;height:20px;inset:-5px 0 0 -5px;position:relative;background-color:var(--green_nvx);content:"";display:block;visibility:visible;border:2px solid var(--light_prim);border-radius:3px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .switch-titled[_ngcontent-%COMP%]{width:100%;margin-bottom:2px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{width:78px;height:19px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{-webkit-transform:translateX(32px);-ms-transform:translateX(32px);transform:translate(32px)}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{height:11px;width:34px;left:0;top:0;border-radius:15px;border:2px solid var(--gray_nvx)}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider.classic[_ngcontent-%COMP%]   .letter[_ngcontent-%COMP%]{padding-left:2px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider.classic[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{padding-left:4px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider.classic[_ngcontent-%COMP%]{width:72px;color:var(--light_prim);font-size:.65rem;border-radius:15px;background-color:var(--gray_nvx);border:3px solid var(--green_nvx);line-height:.7rem;height:1.6em}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .chord-pos-related[_ngcontent-%COMP%], section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .score-pos-related[_ngcontent-%COMP%]{border-radius:0 15px;font-size:initial;position:relative}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scaleandchords[_ngcontent-%COMP%]   .select-type[_ngcontent-%COMP%]{min-width:210px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .scale[_ngcontent-%COMP%]{align-items:center;margin-bottom:5px;position:relative}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .chord[_ngcontent-%COMP%]{align-items:center;position:relative}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .option-title[_ngcontent-%COMP%]{color:#fff;font-size:.75rem;font-weight:700;text-transform:uppercase}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .menus[_ngcontent-%COMP%]   .rightbuttons[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{margin-right:5px;font-size:.75rem;height:auto}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{margin-right:5px;font-size:.75rem;height:auto;background-color:#9ea6af}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .caged[_ngcontent-%COMP%]{display:inline-flex}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .caged[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:rotate(-45deg)}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .round[_ngcontent-%COMP%]{fill:#fff;opacity:0}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{fill:#000;text-anchor:middle;font-size:7px;font-weight:bolder;opacity:0;font-family:nvxChord;-webkit-user-select:none;user-select:none}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .y-diamond[_ngcontent-%COMP%]{overflow:auto!important}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .diamond[_ngcontent-%COMP%]{fill:#fff;stroke:#000;opacity:1}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .finger[_ngcontent-%COMP%]{fill:#ff0;opacity:1;stroke-width:5;stroke:#ff0;overflow:visible;transform:scale(1.5)}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .y-finger[_ngcontent-%COMP%]{overflow:visible}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .finger_midi[_ngcontent-%COMP%]{fill:#ff0;opacity:0}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .lh_finger[_ngcontent-%COMP%]{fill:#000;opacity:0}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .p-misty[_ngcontent-%COMP%]{fill:#fff;fill-opacity:0;transform-origin:50% 50%;animation-duration:.5s;animation-name:_ngcontent-%COMP%_p-misty;animation-iteration-count:1;transform-origin:50%}@keyframes _ngcontent-%COMP%_p-misty{0%{stroke-width:5px;stroke-opacity:1;transform:scale(1.7) translate(1px,1px);filter:url(#f2) blur(5px) drop-shadow(0px 0px 0px white)}to{stroke-width:0;stroke-opacity:0;transform:scale(1.2)}}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .p-summer[_ngcontent-%COMP%]{fill:#fff;fill-opacity:0;transform-origin:50% 50%;animation-name:_ngcontent-%COMP%_p-summer;animation-iteration-count:infinite}@keyframes _ngcontent-%COMP%_p-summer{0%{stroke-width:25px;stroke-opacity:1;transform:scale(.3)}to{stroke-width:0;stroke-opacity:0;transform:scale(2) translate(1px,1px)}}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .p-fever[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_p-fever 4s infinite;fill:transparent;stroke:#fffc00;stroke-width:10px;stroke-linejoin:bevel;stroke-linecap:round}@keyframes _ngcontent-%COMP%_p-fever{0%{filter:drop-shadow(-.75px 0px 6px #fffc00) drop-shadow(-.75px 0px 6px #fffc00);stroke:#fffc00}12.5%{filter:drop-shadow(-.75px 0px 6px #ffca00) drop-shadow(-.75px 0px 10px #ffca00);stroke:#ffca00}25%{filter:drop-shadow(-.75px 0px 6px #ffb200) drop-shadow(-.75px 0px 10px #ff9b00);stroke:#ffb200}37.5%{filter:drop-shadow(-.75px 0px 6px #ff9b00) drop-shadow(-.75px 0px 12px #ff7700);stroke:#ff9b00}50%{filter:drop-shadow(-.75px 0px 6px #ff7700) drop-shadow(-.75px 0px 10px #ff7700) drop-shadow(-.75px 0px 12px #ff5400);stroke:#f70}62.5%{filter:drop-shadow(-.75px 0px 6px #ff5400) drop-shadow(-.75px 0px 12px #ff5400) drop-shadow(-.75px 0px 14px #ff2500);stroke:#ff5400}75%{filter:drop-shadow(-.75px 0px 6px #ff2500) drop-shadow(-.75px 0px 12px #ff2500) drop-shadow(-.75px 0px 14px #ff2500) drop-shadow(-.75px 0px 16px #ff2500);stroke:#ff2500}80%{filter:drop-shadow(-.75px 0px 6px #ff5400) drop-shadow(-.75px 0px 12px #ff5400) drop-shadow(-.75px 0px 14px #ff2500);stroke:#ff5400}85%{filter:drop-shadow(-.75px 0px 6px #ff7700) drop-shadow(-.75px 0px 10px #ff7700) drop-shadow(-.75px 0px 12px #ff5400);stroke:#f70}90%{filter:drop-shadow(-.75px 0px 6px #ff9b00) drop-shadow(-.75px 0px 12px #ff7700);stroke:#ff9b00}95%{filter:drop-shadow(-.75px 0px 6px #ffb200) drop-shadow(-.75px 0px 10px #ff9b00);stroke:#ffb200}to{filter:drop-shadow(-.75px 0px 6px #ffca00) drop-shadow(-.75px 0px 10px #ffca00);stroke:#ffca00}}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .finger_anim_display[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;color:#fff;font-size:.75rem;margin-right:80px;margin-bottom:10px;display:flex;flex-direction:row;align-items:center}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .finger_anim_display[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .finger_anim_display[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#49525bdb;color:#fff;font-size:.75rem}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .glow-toggle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .glow-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:2.5px 3px 0 10px;color:#30a348;text-shadow:0 0 6px #5ab16e}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .glow-toggle[_ngcontent-%COMP%]   .tgl-btn[_ngcontent-%COMP%]{margin-bottom:0}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .bubble.glow[_ngcontent-%COMP%]{filter:contrast(1.5) blur(1px);animation-duration:.3s;animation-name:_ngcontent-%COMP%_p-glow;animation-iteration-count:1;animation-fill-mode:forwards}@keyframes _ngcontent-%COMP%_p-glow{0%{transform:scale(1)}to{transform:scale(1.8)}}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{transform-box:fill-box;transform:scale(1.2);transform-origin:center}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .bubble.transp[_ngcontent-%COMP%]{opacity:.6}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .finger-diamond[_ngcontent-%COMP%]{stroke:none;fill:#000;filter:none;font-family:nvxScale;transform:translate(10px,24px);font-size:19px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .caged_btn[_ngcontent-%COMP%]{transform:rotate(45deg);margin:10px;border:5px solid var(--green_nvx);color:var(--green_nvx);width:2em;height:2em;cursor:pointer;outline:none;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;background-color:var(--gray_nvx)}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .caged_btn.active[_ngcontent-%COMP%]{background-color:#28a74570}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .caged_btn[_ngcontent-%COMP%]:hover{background-color:#28a74570}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{display:flex;flex-direction:row}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]{display:flex;align-items:center}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:25px;height:14.8px;margin-bottom:0}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:5px 0 0;background-color:#fff;-webkit-transition:.4s;transition:.4s}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:13px;width:13px;left:.5px;top:.5px;background-color:var(--green_nvx);-webkit-transition:.4s;transition:.4s}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:0;width:20px;height:20px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:.7em;align-items:center;display:inline-flex;margin-right:10px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   div.double[_ngcontent-%COMP%]{margin-right:0}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .double.display[_ngcontent-%COMP%]{margin-right:25px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .double[_ngcontent-%COMP%]   .display-num[_ngcontent-%COMP%]{margin-left:-25px;color:#fff;font-size:15px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .double[_ngcontent-%COMP%]   .display-let[_ngcontent-%COMP%]{margin-left:26px;color:#fff;font-size:15px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .fas.hands[_ngcontent-%COMP%]{font-size:15px;padding:3px}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .fa-hand-point-right[_ngcontent-%COMP%]{color:var(--green_nvx)}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .fa-hand-point-left[_ngcontent-%COMP%]{color:var(--red_nvx)}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .stringToggle[_ngcontent-%COMP%]{fill:url(#closedEye)}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .stringToggle.active[_ngcontent-%COMP%]{fill:url(#openedEye)}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard[_ngcontent-%COMP%]   .chord-name[_ngcontent-%COMP%]{font-size:35px;position:absolute;bottom:0;color:#28a745;line-height:1.4em;filter:drop-shadow(2px 3px 1px black)}section#fretboard[_ngcontent-%COMP%]   div#nvxFretboard.modal-dialog[_ngcontent-%COMP%]   .fret-grid[_ngcontent-%COMP%]{width:95%;overflow:visible}.chords_notes_labels[_ngcontent-%COMP%]{font-size:17px;font-family:nvxScale;fill:#000;stroke:none;text-anchor:middle}.fa-font[_ngcontent-%COMP%]{font-size:1.2em;margin:0 3px;color:var(--light_prim)}.close[_ngcontent-%COMP%], .close[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]:focus-visible{outline:none}.close[_ngcontent-%COMP%]{color:var(--light_prim);position:absolute;right:30px;z-index:9999}.close[_ngcontent-%COMP%]:hover{color:var(--yellow_nvx);cursor:pointer}.tgl[_ngcontent-%COMP%]{display:none}.tgl[_ngcontent-%COMP%], .tgl[_ngcontent-%COMP%]:after, .tgl[_ngcontent-%COMP%]:before, .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:after, .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:before, .tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]{box-sizing:border-box}.tgl[_ngcontent-%COMP%]::-moz-selection, .tgl[_ngcontent-%COMP%]:after::-moz-selection, .tgl[_ngcontent-%COMP%]:before::-moz-selection, .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]::-moz-selection, .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:after::-moz-selection, .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:before::-moz-selection, .tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]::-moz-selection{background:none}.tgl[_ngcontent-%COMP%]::selection, .tgl[_ngcontent-%COMP%]:after::selection, .tgl[_ngcontent-%COMP%]:before::selection, .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]::selection, .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:after::selection, .tgl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:before::selection, .tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]::selection{background:none}.tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]{outline:0;display:block;width:3.5em;height:1.6em;position:relative;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]:after, .tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]:before{position:relative;display:block;content:"";width:50%;height:100%}.tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]:after{left:0}.tgl[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]:before{display:none}.tgl[_ngcontent-%COMP%]:checked + .tgl-btn[_ngcontent-%COMP%]:after{left:50%}.tgl-flat[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]{padding:2px;transition:all .2s ease;background:var(--gray_nvx);border:3px solid var(--light_prim);border-radius:2em;margin-left:auto}.tgl-flat[_ngcontent-%COMP%] + .tgl-btn[_ngcontent-%COMP%]:after{transition:all .2s ease;background:var(--green_nvx);content:"";border-radius:1em}.tgl-flat[_ngcontent-%COMP%]:checked + .tgl-btn[_ngcontent-%COMP%]{border:3px solid var(--green_nvx)}.tgl-flat[_ngcontent-%COMP%]:checked + .tgl-btn[_ngcontent-%COMP%]:after{left:50%;background:var(--green_nvx)}[data-tooltip][_ngcontent-%COMP%]{display:inline-block;position:absolute;cursor:help;padding:15px}[data-tooltip][_ngcontent-%COMP%]:before{content:attr(data-tooltip);display:none;position:absolute;background:#000;color:#fff;padding:4px 8px;font-size:14px;line-height:1.4;min-width:100px;text-align:center;border-radius:4px}[data-tooltip-position=top][_ngcontent-%COMP%]:before, [data-tooltip-position=bottom][_ngcontent-%COMP%]:before{left:50%;-ms-transform:translateX(-50%);-moz-transform:translateX(-50%);-webkit-transform:translateX(-50%);transform:translate(-50%)}[data-tooltip-position=right][_ngcontent-%COMP%]:before, [data-tooltip-position=left][_ngcontent-%COMP%]:before{top:50%;-ms-transform:translateY(-50%);-moz-transform:translateY(-50%);-webkit-transform:translateY(-50%);transform:translateY(-50%)}[data-tooltip-position=top][_ngcontent-%COMP%]:before{bottom:70%;margin-bottom:6px}[data-tooltip-position=right][_ngcontent-%COMP%]:before{left:100%;margin-left:6px}[data-tooltip-position=bottom][_ngcontent-%COMP%]:before{top:65%;margin-top:6px}[data-tooltip-position=left][_ngcontent-%COMP%]:before{right:100%;margin-right:6px}[data-tooltip][_ngcontent-%COMP%]:after{content:"";display:none;position:absolute;width:0;height:0;border-color:transparent;border-style:solid}[data-tooltip-position=top][_ngcontent-%COMP%]:after, [data-tooltip-position=bottom][_ngcontent-%COMP%]:after{left:50%;margin-left:-6px}[data-tooltip-position=right][_ngcontent-%COMP%]:after, [data-tooltip-position=left][_ngcontent-%COMP%]:after{top:50%;margin-top:-6px}[data-tooltip-position=top][_ngcontent-%COMP%]:after{bottom:100%;border-width:6px 6px 0;border-top-color:#000}[data-tooltip-position=right][_ngcontent-%COMP%]:after{left:100%;border-width:6px 6px 6px 0;border-right-color:#000}[data-tooltip-position=bottom][_ngcontent-%COMP%]:after{top:100%;border-width:0 6px 6px;border-bottom-color:#000}[data-tooltip-position=left][_ngcontent-%COMP%]:after{right:100%;border-width:6px 0 6px 6px;border-left-color:#000}[data-tooltip][_ngcontent-%COMP%]:hover:before{display:block;z-index:50;font-size:14px;border:1.5px solid #fff;border-radius:0;padding:2px;white-space:nowrap}.disabled[_ngcontent-%COMP%]{opacity:.3}.switch-toggle[_ngcontent-%COMP%]{float:left}.switch-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0}.switch-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{padding:7px;float:left;color:#fff;cursor:pointer}.switch-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background:green;border-radius:10px}',H1=(()=>{class FretboardComponent{set display(t){this.visible=t}set cur_chord(t){this.cm.display_fretboard&&(this.score_follow==!0?(this.unlight_all_glow(),this.unlight_finger_on_fretboard(),this.light_chord(t),this.lit_chord=t):(this.unlight_all_midi(),this.unlight_finger_on_fretboard(),this.light_chord(t),this.lit_chord=t,t.chords.length?(this.chord_tona=t.full_chord.tonic.replace(/[0-9]/g,""),this.chord_type=t.full_chord.aliases[0]):(this.chord_tona="",this.chord_type="")))}constructor(t,n,e,i,r,s,a,l){this.mu=t,this.sm=n,this.cd=e,this.sel=i,this.zone=r,this.midi=s,this.cm=a,this.transport=l,this.chords_list=R1,this._chordName="",this.lit_chord=null,this.cur_selection_measure=null,this.cur_selection_beat=null,this.cur_scale_full={empty:!0},this.cur_chord_full={empty:!0},this.no_score_selected_scale={scale_tona:"E",scale_type:"major",full_scale:Mo.get("e major")},this.no_score_selected_chord={chord_tona:"D",chord_type:"minor",full_chord:qn.get("D minor")},this.visible=!1,this.animationTime=5,this.anim=["Misty","Summertime","Fever","Misty-time","Off"],this.selected_anim="Misty-time",this.glowingBubbles=!0,this.displayNotesMode=!1,this.displayChange=new Rn,this.bg=["Classic","Dark"],this.selected_bg="Dark",this.xStringNotes=[-14,7,28,50.5,73,95.5,119,141.5,164,186.5,210,232.5,255,277.5,301,323.5,346,368.5,392,415.5,438,460.5,483,505.5,529.5],this.xStringNotes2=[-12,18,54,87,119,146.5,174,200,224,247,268,290.5,310,329,347.5,367,385.5,404,422.5,441.5,460,478.5,497,515.5,533.5],this.yStrings=[4.5,21.5,39,57,75,93],this.activeStrings=[!0,!0,!0,!0,!0,!0],this.activeBubbles=!0,this.activeLosanges=!0,this.score_follow=!0,this.rotated=!1,this.right_handed=!0,this.scale_tona="C",this.scale_type="major",this.chord_tona="C",this.chord_type="major",this.chord_follow_score=!0,this.scale_follow_score=!0,this.notes_sharp=[["E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F"],["B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C"],["G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],["D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#"],["A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#"],["E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F"]],this.notes_flat=[["E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb","E","F"],["B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C"],["G","Ab","A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab"],["D","Eb","E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb"],["A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb"],["E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","C","Db","D","Eb","E","F"]],this.notes_midi=[[64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88],[59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83],[55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79],[50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],[45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69],[40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64]],this.caged_position=[],this.caged_filter=[],this.notes_active=this.notes_flat,this.active_scale=["C","D","E","F","G","A","B"],this.active_scale_quality="major",this.active_intervals=["1","2","3","4","5","6","7"],this.fb_struct=[],this.reverse=d=>[].reduceRight.call(d,(u,h)=>u+h),this.displayNotesMode=this.cm.getDisplayNoteMode()!="letters",this.construct_fretboard()}ngOnInit(){this.displayNotesMode_SUBJ_update$=this.cm.displayNotesMode_SUBJ_update$.subscribe(t=>{t=="letters"?this.displayNotesMode=!1:this.displayNotesMode=!0}),this.show_score_chords_SUBJ_update$=this.cm.global_show_score_chords_SUBJ$.subscribe(t=>{if(this.score_follow=t,this.toggle_midi(t),t==!0&&this.cur_selection_measure){let n=this.cur_selection_beat||0;this.light_chord_from_measure(this.cur_selection_measure,n),this.chord_tona=this.cur_chord_full.tonic,this.chord_type=this.cur_chord_full.aliases?this.cur_chord_full.aliases[0]:null}this.unlight_finger_on_fretboard()}),this.beat_selectionUpdate$=this.transport.beatChange.subscribe(t=>{let n=this.sm.getMeasureByIdx(t.measure);if(!n)return;this.cur_selection_measure=n;let e=t.beat;this.cur_selection_beat=e,this.change_animation_time(n),this.scale_follow_score&&this.set_scale_from_measure(n),this.refresh_caged_position(),this.score_follow&&(this.chord_follow_score?(this.light_chord_from_measure(n,e),this.chord_tona=this.cur_chord_full.tonic,this.chord_type=this.cur_chord_full.aliases?this.cur_chord_full.aliases[0]:null):(this.no_score_selected_chord.chord_tona=this.chord_tona,this.no_score_selected_chord.full_chord=qn.get(this.chord_tona+" "+this.chord_type),this.no_score_selected_chord.full_chord.midi_tab=[],this.no_score_selected_chord.full_chord.unfiltered_midi=[],this.light_chord({chords:[this.no_score_selected_chord.full_chord.symbol],full_chord:this.no_score_selected_chord.full_chord})))}),this.midiControlUpdate$=this.midi.controlTabSubject.subscribe(data=>{let ctrl=this.cm.getAssignedControls(!1),o=ctrl[""+data],number,control_name,control_action;if(o&&o.length)for(let obj of o)number=obj.number,control_name=obj.control_name,control_action=obj.control_action,this.zone.run(()=>{eval("this."+control_name)&&eval("this."+control_name+'("'+control_action+'")')});else return})}ngAfterViewInit(){$("#fretboard").draggable({handle:"#nvxFretboard"})}ngOnDestroy(){this.beat_selectionUpdate$.unsubscribe(),this.midiControlUpdate$.unsubscribe()}light_los(t,n,e=null){this.fb_struct[t][n].display_los=!0,e&&setTimeout(()=>{this.unlight_los(t,n)},e)}unlight_los(t,n){this.fb_struct[t][n].display_los=!1}unlight_all_los(){for(let t of this.fb_struct)for(let n of t)n.display_los=!1}light_all_los(){for(let t of this.fb_struct)for(let n of t)n.display_los=!0}light_random_los(){let t=Math.floor(Math.random()*6),n=Math.floor(Math.random()*25);this.light_los(t,n)}light_finger(t,n){for(let e=0;e<25;e++)this.fb_struct[t][e].display_fing==!0&&this.unlight_finger(t,e);this.fb_struct[t][n].display_fing=!0,this.fb_struct[t][n].display_glow=!0}unlight_finger(t,n){this.fb_struct[t][n].display_fing=!1,this.fb_struct[t][n].display_glow=!1,this.fb_struct[t][n].display_midi=!1}unlight_finger_on_string(t){for(let n=0;n<this.fb_struct[t].length;n++)this.unlight_finger(t,n)}unlight_finger_on_fretboard(){for(let t=0;t<6;t++)this.unlight_finger_on_string(t)}light_random_fing(){let t=Math.floor(Math.random()*6),n=Math.floor(Math.random()*25);this.light_finger(t,n)}light_all_fing(){let t=[];for(let n=0;n<6;n++){let e=Math.floor(Math.random()*6),i=Math.floor(Math.random()*25);t.push([e,i])}for(let n=0;n<6;n++)this.light_finger(t[n][0],t[n][1])}light_bub(t,n,e="R",i=null){this.fb_struct[t][n].display_bub=!0,this.fb_struct[t][n].bubble_img=e+".png",i&&setTimeout(()=>{this.unlight_bub(t,n)},i)}light_midi(t,n,e="R",i=null){this.fb_struct[t][n].display_midi=!0,this.fb_struct[t][n].midi_img=e+".png",i&&setTimeout(()=>{this.unlight_bub(t,n)},i)}unlight_bub(t,n){this.fb_struct[t][n].display_bub=!1,this.fb_struct[t][n].display_glow=!1,this.fb_struct[t][n].display_midi=!1}unlight_midi(t,n){this.fb_struct[t][n].display_midi=!1,this.fb_struct[t][n].display_glow=!1}unlight_all_bub(){for(let t of this.fb_struct)for(let n of t)n.display_bub=!1,n.display_glow=!1,n.display_midi=!1}unlight_all_midi(){for(let t=this.previous_midi_tab.length-1;t>-1;t--){let n=this.notes_midi[5-t].indexOf(this.previous_midi_tab[t]);if(n<0)return;this.fb_struct[5-t][n].display_midi=!1,this.fb_struct[5-t][n].display_glow=!1}}unlight_all_glow(){for(let t of this.fb_struct)for(let n of t)n.display_glow=!1}light_all_bub(){for(let t of this.fb_struct)for(let n of t)n.display_bub=!0}construct_fretboard(){for(let t=0;t<6;t++)this.fb_struct.push(new Array(25));for(let t=0;t<6;t++)for(let n=0;n<25;n++)this.fb_struct[t][n]={string:t,fret:n,bubble_img:"R.png",midi_img:"R.png",text:n,display_los:!1,display_bub:!1,display_midi:!1,display_glow:!1,display_fing:!1}}rotateAll(t=!1){let n,e,i;if(this.right_handed&&!t)this.rotated?(n="-90",e=0,i=-23,$(document.getElementsByClassName("finger-diamond")).attr("style","transform:rotate(-90deg); transform-origin:25px 0px;")):(n="0",e=0,i=10,$(document.getElementsByClassName("finger-diamond")).attr("style","transform:rotate(0deg) translate(10px 24px)"));else if(!t)this.rotated?(n="90",e=0,i=-12):(n="0",e=0,i=23);else if(t){let s=$("#string_0_Diamond_0").children()[1].style.transform=="rotate(180deg)";n=s?"0":"180",s?$(document.getElementsByClassName("finger-diamond")).attr("style","transform:rotate(0deg); transform-origin:15px 30px;"):$(document.getElementsByClassName("finger-diamond")).attr("style","transform:rotate(180deg); transform-origin:13px 6px;"),e=0,i=23}let r=$("#string_0_Diamond_0").children()[1].style.transform=="rotate(180deg)";this.yStrings.forEach((s,a)=>{this.xStringNotes.forEach((l,d)=>{let u=$("#string_"+a+"_Bubble_"+d),h=$("#string_"+a+"_Diamond_"+d);this.right_handed?($(h.children()[1]).attr("style","transform:rotate("+n+"deg);transform-origin: 45% 45%;"),u.css("transform","rotateZ("+n+"deg) rotateY(0deg) scale(1.2)")):($(h.children()[1]).attr("style","transform:translate(-5px,"+e+"px) rotateZ("+n+"deg) rotateY(180deg); transform-origin:center;"),u.css("transform","rotateZ("+n+"deg) rotateY(180deg) scale(1.2)"))})})}set_scale(t){t.empty&&console.warn("set_scale() : NO SCALE FOUND !"),this.active_scale=[...t.notes],this.notes_active=[...this.notes_flat];for(let n of this.active_scale)if(n.indexOf("#")!=-1){this.notes_active=[...this.notes_sharp];break}for(let n of this.active_scale)(n.indexOf("bb")!=-1||n=="Cb"||n=="Fb")&&(this.notes_active=this.mu.replace_double_alterations(n,this.notes_active));for(let n of this.active_scale)(n.indexOf("##")!=-1||n=="B#"||n=="E#")&&(this.notes_active=this.mu.replace_double_alterations(n,this.notes_active));this.active_intervals=[...t.intervals],this.active_intervals=this.active_intervals.map(n=>{let e=n.replace("M","").replace("m","b").replace("P","").replace("d","b").replace("A","#");return this.reverse(e)}),this.active_scale_quality=this.mu.get_scale_quality(t.type),this.cur_scale_full=t}scale_clicked(){this.refresh_scale(),this.score_follow?(this.no_score_selected_scale.scale_tona=this.scale_tona,this.no_score_selected_scale.scale_type=this.scale_type,this.no_score_selected_scale.full_scale=this.cur_scale_full):(this.scale_tona=this.no_score_selected_scale.scale_tona,this.scale_type=this.no_score_selected_scale.scale_type,this.cur_scale_full=this.no_score_selected_scale.full_scale)}refresh_scale(){let t=Mo.get(this.scale_tona+" "+this.scale_type.toLowerCase());this.set_scale(t),this.refresh_caged_position()}send_refresh_scale(){this.sel.updateSelection()}set_scale_caged_for_selected_measure(){if(this.cur_selection_measure&&this.cur_selection_measure.length){let t={caged_position:[...this.caged_position],caged_filter:[...this.caged_filter],scale_tona:this.scale_tona,scale_type:this.scale_type,full_scale:this.cur_scale_full};this.cur_selection_measure[0].addScale(t)}}set_scale_from_measure(t){let n=t.getScale();n.full_scale.empty||(this.score_follow||(this.no_score_selected_scale=n),this.scale_tona=n.scale_tona,this.scale_type=n.scale_type,this.set_scale(n.full_scale)),n.caged_filter&&(this.caged_filter=[...n.caged_filter]),n.caged_position&&(this.caged_position=[...n.caged_position])}onlyUnique(t,n,e){return e.indexOf(t)===n}refresh_caged_position(){let t=[];if(this.caged_position.length)for(let n=0;n<this.caged_position.length;n++)t=t.concat(this.mu.getCagedPosition(this.caged_position[n],this.scale_tona,this.active_scale_quality)).filter(this.onlyUnique);this.caged_filter=t}set_caged_position(t){let n=this.caged_position.indexOf(t);n>-1?this.caged_position.splice(n,1):this.caged_position.push(t),this.refresh_caged_position(),this.scale_follow_score&&this.set_scale_caged_for_selected_measure()}chord_clicked(){this.unlight_all_bub(),this.chord_follow_score?(this.set_scale_caged_for_selected_measure(),this.send_refresh_scale()):(this.no_score_selected_chord.chord_tona=this.chord_tona,this.no_score_selected_chord.chord_type=this.chord_type,this.no_score_selected_chord.full_chord=qn.get(this.chord_tona+" "+this.chord_type),this.no_score_selected_chord.full_chord.midi_tab=[],this.no_score_selected_chord.full_chord.unfiltered_midi=[],this.light_chord({chords:[this.no_score_selected_chord.full_chord.symbol],full_chord:this.no_score_selected_chord.full_chord}))}light_chord(t){if(t)try{this._chordName=t.chords[0];let n=t.full_chord.unfiltered_midi;n.length==0&&(this.score_follow&&this.activeBubbles&&this.chord_follow_score?this.light_chord_from_selected_measure():this.chord_follow_score||this.light_tonaljs_chord(t.full_chord),this._chordName="",this.unlight_finger_on_fretboard(),this.lit_chord=null),n.length>6&&(console.warn("Guitar midi array > 6 ! Cutting some notes"),n=n.slice(0,6));for(let e=n.length-1;e>-1;e--)if(n[e]==null)this.unlight_finger_on_string(5-e);else{let i=this.notes_midi[5-e].indexOf(n[e]);if(i==-1){console.warn("%cWARING : ","color:red","note",n[e]," not found on string : ",5-e);continue}let r=t.full_chord.intervals[t.full_chord.midi_notes.indexOf(t.full_chord.unfiltered_midi[e])];this.activeBubbles&&this.score_follow!=!0&&this.light_midi(5-e,i,r),this.light_finger(5-e,i)}this.previous_midi_tab=n}catch{debugger}}toggle_midi(t){if(t.target&&(t.target.id=="toggle_midi_off"?this.score_follow=!0:t.target.id=="toggle_midi_on"?this.score_follow=!1:this.score_follow="both"),this.score_follow==!0)this.chord_tona="",this.chord_type="",this.transport.refreshBeat();else{this.score_follow==!1&&this.unlight_all_bub(),this.transport.refreshBeat();let n=this.sel.getSelection()[0];if(!n||n.getType()=="part")return;this.set_scale_from_measure(n),this.light_chord_from_selected_measure(),this.light_chord(this.lit_chord),this.refresh_caged_position()}}toggle_scale_follow_score(){if(!this.scale_follow_score)this.scale_tona=this.no_score_selected_scale.scale_tona,this.scale_type=this.no_score_selected_scale.scale_type,this.set_scale(this.no_score_selected_scale.full_scale);else{let t=this.sel.getSelection()[0];if(!t||t.getType()=="part")return;this.set_scale_from_measure(t),this.refresh_caged_position()}}toggle_chord_follow_score(){this.unlight_all_bub(),this.chord_follow_score?(this.light_chord_from_selected_measure(),this.light_chord(this.lit_chord),this.chord_tona=this.cur_chord_full.tonic,this.chord_type=this.cur_chord_full.type,this.refresh_caged_position()):(this.chord_tona=this.no_score_selected_chord.chord_tona,this.chord_type=this.no_score_selected_chord.chord_type,this.no_score_selected_chord.full_chord=qn.get(this.chord_tona+" "+this.chord_type),this.no_score_selected_chord.full_chord.midi_tab=[],this.no_score_selected_chord.full_chord.unfiltered_midi=[],this.light_chord({chords:[this.no_score_selected_chord.full_chord.symbol],full_chord:this.no_score_selected_chord.full_chord}))}light_chord_from_selected_measure(){this.unlight_finger_on_fretboard();let t=this.cur_selection_measure;if(!t)return;let n=t[0];n&&this.zone.run(()=>{this.light_chord_from_measure(n)})}light_chord_from_measure(t,n){this.unlight_all_bub();let e=null;if(!t.chords.replace(/\s/g,"").length)return;let i=t.chords.split(" ");i.length&&(n!=null?n<i.length?e=i[n].split("/")[0]:e="":e=i[0].split("/")[0]),this._chordName=e!=""?e:this._chordName;let r;this._chordName&&(r=qn.get(this._chordName)),r!=null&&(this.cur_chord_full=r,this.zone.run(()=>{this.light_tonaljs_chord(r)}))}light_tonaljs_chord(t){let n=t.notes,e=[];for(let s=2;s<7;s++)e=e.concat(n.map(a=>a+s.toString()));e=e.map(nn.midi);let i=this.cd.detectMidi_as_chord(e),r=i.full_chord.midi_notes;for(let s=0;s<r.length;s++)for(let a=0;a<6;a++){let l=this.notes_midi[a].indexOf(r[s]);l>-1&&this.light_bub(a,l,i.full_chord.intervals[s],null)}this.chord_tona=t.tonic,this.chord_type=t.type}change_animation_time(t){let n=this.sm.getMeasures_hash()[t.getIdx()].part,e=this.sm.getPart(n).getMeter(),i=Number(e.split("/")[0]);this.animationTime=(t.getAudioRegion().end-t.getAudioRegion().start)/i}onChange(t){this.selected_anim=t}onBgChange(t){this.selected_bg=t}set_fretboard_scale(t){this.scale_type=t.toLowerCase(),this.scale_type=="minor"&&(this.scale_type="aeolian"),this.scale_clicked()}set_fretboard_key(t){this.scale_tona=t,this.scale_clicked()}set_fretboard_caged(t){this.set_caged_position(t)}set_fretboard_caged_all_off(){this.caged_position=[],this.refresh_caged_position(),this.set_scale_caged_for_selected_measure()}toggle_fretboard_display_mode(){}toggle_fretboard_chordtones(t){this.activeBubbles=!this.activeBubbles}toggle_fretboard_losanges(t){this.activeLosanges=!this.activeLosanges}toggle_fretboard_score_follow(t){this.score_follow==!1?this.score_follow="both":this.score_follow=="both"?this.score_follow=!0:this.score_follow=!1,console.log("this.score_follow =>",this.score_follow),this.toggle_midi(this.score_follow)}toggle_fretboard_rotate(t){this.rotated=!this.rotated,this.rotateAll()}toggle_fretboard_rotate_180(t){this.rotateAll(!0)}toggle_fretboard_string(t){t>0&&t<7&&(this.activeStrings[t-1]=!this.activeStrings[t-1])}toggle_hand(){this.right_handed=!this.right_handed,this.rotate_hands()}rotate_hands(){this.right_handed?($("#fret-grid").css("transform","rotateY(0deg)"),$(document.getElementsByClassName("bg-text")).css({transform:"rotateY(0deg)","transform-origin":"center","transform-box":"fill-box"}),this.rotated?($(document.getElementsByClassName("bubble")).css("transform","rotateZ(-90deg) rotateY(0deg) scale(1.2)"),$(document.getElementsByClassName("chords_notes_labels fret")).css({transform:"rotateZ(-90deg) rotateY(0deg) translate(5px, 0px)","transform-origin":"center"}),$(document.getElementsByClassName("finger-diamond")).css("transform","rotateZ(-90deg) rotateY(0deg) translate(-23px, 22px)")):($(document.getElementsByClassName("bubble")).css("transform","rotateY(0deg) scale(1.2)"),$(document.getElementsByClassName("chords_notes_labels fret")).css({transform:"rotateY(0deg)","transform-origin":"center"}),$(document.getElementsByClassName("finger-diamond")).css("transform","rotateY(0deg) translate(10px, 23px)"))):($("#fret-grid").css("transform","rotateY(180deg)"),$(document.getElementsByClassName("bg-text")).css({transform:"rotateY(180deg)","transform-origin":"center","transform-box":"fill-box"}),this.rotated?($(document.getElementsByClassName("bubble")).css("transform","rotateZ(90deg) rotateY(180deg) scale(1.2)"),$(document.getElementsByClassName("chords_notes_labels fret")).css({transform:"rotateZ(90deg) rotateY(180deg) translate(5px, 5px)","transform-origin":"center"}),$(document.getElementsByClassName("finger-diamond")).css("transform","rotateZ(90deg) rotateY(180deg) translate(-23px, -12px)")):($(document.getElementsByClassName("bubble")).css("transform","rotateY(180deg) scale(1.2)"),$(document.getElementsByClassName("chords_notes_labels fret")).css({transform:"rotateY(180deg) translate(5px, 0px)","transform-origin":"center"}),$(document.getElementsByClassName("finger-diamond")).css("transform","rotateY(180deg) translate(-24px, 23px)")))}close_fretboard(t=!1){t?this.visible=!this.visible:this.visible=!1,this.displayChange.emit(this.visible)}static{this.\u0275fac=function(n){return new(n||FretboardComponent)(Le(wu),Le(Hn),Le(Cc),Le(nr),Le(on),Le(hi),Le(Ci),Le(yi))}}static{this.\u0275cmp=zt({type:FretboardComponent,selectors:[["app-fretboard"]],inputs:{display:"display",cur_chord:"cur_chord"},outputs:{displayChange:"displayChange"},standalone:!1,decls:380,vars:166,consts:[["id","fretboard","tabindex","-1","role","dialog",1,"modal","nofly",3,"contextmenu","hidden"],["id","nvxFretboard","role","document",1,"modal-dialog"],[1,"menus"],[1,"d-flex","scaleandchords"],[1,"d-flex","scale"],[1,"option-title"],["src","assets/img/chordEditor/diamond.png","title","Scale"],[1,"floored"],["id","scale_toggle","type","checkbox",1,"tgl","tgl-flat","ng-pristine","ng-untouched","ng-valid","ng-not-empty",3,"ngModelChange","ngModel"],["for","scale_toggle",1,"tgl-btn"],[1,"apply-btns","score-pos-related"],[1,"switch-titled"],[1,"switch"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"slider","classic"],[1,"number"],[1,"letter"],["data-tooltip","Scale follows...","data-tooltip-position","bottom",2,"right","0px","padding","10px"],["id","tona",1,"w-auto","form-control",3,"ngModelChange","change","ngModel","disabled"],[3,"ngValue"],["value","Gb"],["name","scale_selector","id","scales",1,"w-auto","form-control","select-type",2,"text-transform","capitalize",3,"ngModelChange","change","ngModel","disabled"],["disabled",""],[1,"d-flex","chord"],["src","assets/img/chordEditor/1P.png","title","Chord"],["id","chords_toggle","type","checkbox",1,"tgl","tgl-flat","ng-pristine","ng-untouched","ng-valid","ng-not-empty",3,"ngModelChange","ngModel"],["for","chords_toggle",1,"tgl-btn"],[1,"apply-btns","chord-pos-related"],["type","checkbox",3,"ngModelChange","change","ngModel","disabled"],["data-tooltip","Chord tones follows...","data-tooltip-position","bottom",2,"right","0px","padding","10px"],["id","tona2",1,"w-auto","form-control",3,"ngModelChange","change","ngModel","disabled"],["name","scales_selector2","id","scales2",1,"w-auto","form-control","select-type",2,"text-transform","capitalize",3,"ngModelChange","change","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],[1,"caged"],[1,"caged_btn",3,"click"],[1,"rightbuttons"],[1,"btns"],[1,"double","display",3,"ngClass"],["data-tooltip","Display degrees","data-tooltip-position","bottom",1,"display-num"],["id","display","type","checkbox",1,"tgl","tgl-flat","ng-pristine","ng-untouched","ng-valid","ng-not-empty",3,"ngModelChange","change","ngModel","disabled"],["for","display",1,"tgl-btn"],["data-tooltip","Display letters","data-tooltip-position","bottom",1,"display-let"],[1,"switch-toggle","switch-3","switch-candy"],["id","toggle_midi_on","name","state-d","type","radio",3,"change","checked"],["for","toggle_midi_on"],["src","assets/img/fretboard/midi.png"],["id","toggle_midi_both","name","state-d","type","radio",3,"change","checked"],["for","toggle_midi_both"],["id","toggle_midi_off","name","state-d","type","radio","checked","checked",3,"change","checked"],["for","toggle_midi_off"],["src","assets/img/fretboard/score_icon.png"],["aria-hidden","true",1,"fa","fa-font","fa-rotate-270"],["data-tooltip","Rotate","data-tooltip-position","bottom"],["id","rotate_toggle","type","checkbox",1,"tgl","tgl-flat","ng-pristine","ng-untouched","ng-valid","ng-not-empty",3,"change","ngModelChange","ngModel"],["for","rotate_toggle",1,"tgl-btn"],[1,"double"],[1,"fas","fa-hand-point-right","hands"],["data-tooltip","Right handed","data-tooltip-position","bottom"],["id","hand_toggle","type","checkbox",1,"tgl","tgl-flat","ng-pristine","ng-untouched","ng-valid","ng-not-empty",3,"change"],["for","hand_toggle",1,"tgl-btn"],[1,"fas","fa-hand-point-left","hands"],["data-tooltip","Left handed","data-tooltip-position","bottom"],[1,"finger_anim_display"],[1,"w-auto","form-control",2,"margin-right","15px",3,"ngModelChange","ngModel"],[1,"w-auto","form-control",3,"ngModelChange","ngModel"],[1,"glow-toggle"],["aria-hidden","true",1,"fa","fa-circle"],["data-tooltip","Glowing chords","data-tooltip-position","top"],["id","glow_toggle","type","checkbox",1,"tgl","tgl-flat","ng-pristine","ng-untouched","ng-valid","ng-not-empty",3,"ngModelChange","ngModel"],["for","glow_toggle",1,"tgl-btn"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"contextmenu","click"],["aria-hidden","true",1,"fa","fa-times"],["version","1.1","viewBox","-5 3 560 100","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","id","fret-grid",1,"fret-grid"],["id","openedEye","patternUnits","objectBoundingBox","width","10","height","10"],[0,"xlink","href","assets/img/eye_open.png","x","0","y","0","width","8","height","10"],["id","closedEye","patternUnits","objectBoundingBox","width","10","height","10"],[0,"xlink","href","assets/img/eye_closed.png","x","0","y","0","width","8","height","10"],["id","f2","color-interpolation-filters","sRGB"],["in","SourceAlpha","stdDeviation","4","result","imgBlur"],["in","imgBlur","surfaceScale","2","specularConstant",".75","specularExponent","20","lighting-color","#bbbbbb","result","imgSpecular"],["x","-5","y","-100","z","100"],["in","imgSpecular","in2","SourceAlpha","operator","in","result","imgMasked"],["in","SourceGraphic","in2","imgMasked","operator","arithmetic","k1","0","k2","1","k3","2","k4","0"],["width","550","height","110","y","0.4","id","bg-image",0,"xlink","href","assets/img/fretboard/fretboard_background_v3.svg#fretboard_background",4,"ngIf"],["version","1.1","viewBox","4 -6 538.4 97.7",4,"ngIf"],["width","550","height","110","y","0.4","id","bg-image",0,"xlink","href","assets/img/fretboard/fretboard_background_v4.svg#fretboard_background",4,"ngIf"],["class","y-finger",4,"ngFor","ngForOf"],["class","y-diamond rotate",3,"display",4,"ngFor","ngForOf"],["class","y-diamond",3,"display",4,"ngFor","ngForOf"],["class","stringToggle","r","5","cx","557",3,"active","click",4,"ngFor","ngForOf"],[3,"value"],["width","550","height","110","y","0.4","id","bg-image",0,"xlink","href","assets/img/fretboard/fretboard_background_v3.svg#fretboard_background"],["version","1.1","viewBox","4 -6 538.4 97.7"],["x","53.861782","y","50.286163",1,"bg-text"],["x","53.861782","y","50.286163"],["x","98.278229","y","50.052006",1,"bg-text"],["x","98.278229","y","50.052006"],["x","142.36052","y","50.088692",1,"bg-text"],["x","142.36052","y","50.088692"],["x","186.37064","y","50.086163",1,"bg-text"],["x","186.37064","y","50.086163"],["x","251.67676","y","66.922852",1,"bg-text"],["x","251.67676","y","66.922852"],["x","318.64386","y","49.967587",1,"bg-text"],["x","318.64386","y","49.967587"],["x","363.63882","y","49.982162",1,"bg-text"],["x","363.63882","y","49.982162"],["x","406.59961","y","49.979633",1,"bg-text"],["x","406.59961","y","49.979633"],["x","451.15027","y","50.122849",1,"bg-text"],["x","451.15027","y","50.122849"],["x","518.65778","y","50.016319",1,"bg-text"],["x","518.65778","y","50.016319"],["x","251.67676","y","31.222847",1,"bg-text"],["x","251.67676","y","31.222847"],["width","550","height","110","y","0.4","id","bg-image",0,"xlink","href","assets/img/fretboard/fretboard_background_v4.svg#fretboard_background"],["x","89.861782","y","50.286163",1,"bg-text"],["x","89.861782","y","50.286163"],["x","147.00000","y","50.052006",1,"bg-text"],["x","147.00000","y","50.052006"],["x","200.36052","y","50.088692",1,"bg-text"],["x","200.36052","y","50.088692"],["x","246.37064","y","50.086163",1,"bg-text"],["x","246.37064","y","50.086163"],["x","306.67676","y","66.922852",1,"bg-text"],["x","306.67676","y","66.922852"],["x","361.64386","y","49.967587",1,"bg-text"],["x","361.64386","y","49.967587"],["x","398.63882","y","49.982162",1,"bg-text"],["x","398.63882","y","49.982162"],["x","434.00000","y","49.979633",1,"bg-text"],["x","434.00000","y","49.979633"],["x","471.15027","y","50.122849",1,"bg-text"],["x","471.15027","y","50.122849"],["x","524.65778","y","50.016319",1,"bg-text"],["x","524.65778","y","50.016319"],["x","306.67676","y","31.222847",1,"bg-text"],["x","306.67676","y","31.222847"],[1,"y-finger"],["class","finger","viewBox","0 0 40 40","width","15","height","15",3,"display",4,"ngFor","ngForOf"],["viewBox","0 0 40 40","width","15","height","15",1,"finger"],["d","M 0.20267886,17.651493 17.802677,0.05149334 35.402678,17.651493 17.802677,35.251499 Z",2,"transform","scale(1.2)","transform-origin","50%"],["id","pulse","d","M 0.20267886,17.651493 17.802677,0.05149334 35.402678,17.651493 17.802677,35.251499 Z",3,"ngClass"],["d","M 0.20267886,17.651493 17.802677,0.05149334 35.402678,17.651493 17.802677,35.251499 Z",3,"ngClass"],[1,"finger-diamond"],[1,"y-diamond","rotate"],["width","13","height","13","viewBox","0 0 40 40","class","bubble glow",0,"xlink","href","",3,"display",4,"ngFor","ngForOf"],["width","13","height","13","viewBox","0 0 40 40","class","bubble",0,"xlink","href","",3,"display",4,"ngFor","ngForOf"],["width","13","height","13","viewBox","0 0 40 40",0,"xlink","href","",1,"bubble","glow"],["width","13","height","13","viewBox","0 0 40 40",0,"xlink","href","",1,"bubble"],[1,"y-diamond"],["fretboard-diamond","","width","15","height","15","viewBox","0 0 40 40","class","diamond",3,"text","display",4,"ngFor","ngForOf"],["fretboard-diamond","","width","15","height","15","viewBox","0 0 40 40",1,"diamond",3,"text"],["r","5","cx","557",1,"stringToggle",3,"click"]],template:function(n,e){n&1&&(p(0,"section",0),J("contextmenu",function(r){return e.close_fretboard(),r.preventDefault()}),p(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),ie(6,"img",6),m(),p(7,"div",7)(8,"input",8),Fe("ngModelChange",function(r){return Be(e.activeLosanges,r)||(e.activeLosanges=r),r}),m(),ie(9,"label",9),m(),p(10,"div",10)(11,"div",11)(12,"label",12)(13,"input",13),Fe("ngModelChange",function(r){return Be(e.scale_follow_score,r)||(e.scale_follow_score=r),r}),J("change",function(){return e.toggle_scale_follow_score()}),m(),p(14,"span",14)(15,"span",15),P(16,"Score"),m(),p(17,"span",16),P(18,"Preset"),m()()()(),ie(19,"span",17),m(),p(20,"select",18),Fe("ngModelChange",function(r){return Be(e.scale_tona,r)||(e.scale_tona=r),r}),J("change",function(){return e.scale_clicked()}),p(21,"option",19),P(22,"C#"),m(),p(23,"option",19),P(24,"F#"),m(),p(25,"option",19),P(26,"B"),m(),p(27,"option",19),P(28,"E"),m(),p(29,"option",19),P(30,"A"),m(),p(31,"option",19),P(32,"D"),m(),p(33,"option",19),P(34,"G"),m(),p(35,"option",19),P(36,"C"),m(),p(37,"option",19),P(38,"F"),m(),p(39,"option",19),P(40,"Bb"),m(),p(41,"option",19),P(42,"Eb"),m(),p(43,"option",19),P(44,"Ab"),m(),p(45,"option",19),P(46,"Db"),m(),p(47,"option",20),P(48,"Gb"),m()(),p(49,"select",21),Fe("ngModelChange",function(r){return Be(e.scale_type,r)||(e.scale_type=r),r}),J("change",function(){return e.scale_clicked()}),p(50,"option",19),P(51,"major"),m(),p(52,"option",19),P(53,"minor"),m(),p(54,"option",22),P(55,"_________"),m(),p(56,"option",19),P(57,"dorian"),m(),p(58,"option",19),P(59,"phrygian"),m(),p(60,"option",19),P(61,"lydian"),m(),p(62,"option",19),P(63,"mixolydian"),m(),p(64,"option",19),P(65,"aeolian"),m(),p(66,"option",19),P(67,"locrian"),m(),p(68,"option",22),P(69,"_________"),m(),p(70,"option",19),P(71,"major pentatonic"),m(),p(72,"option",19),P(73,"major blues"),m(),p(74,"option",19),P(75,"minor pentatonic"),m(),p(76,"option",19),P(77,"minor blues"),m(),p(78,"option",22),P(79,"_________"),m(),p(80,"option",19),P(81,"harmonic major"),m(),p(82,"option",19),P(83,"harmonic minor"),m(),p(84,"option",22),P(85,"_________"),m(),p(86,"option",19),P(87,"diminished"),m(),p(88,"option",19),P(89,"minor six diminished"),m(),p(90,"option",19),P(91,"half-whole diminished"),m(),p(92,"option",19),P(93,"composite blues"),m(),p(94,"option",22),P(95,"_________"),m(),p(96,"option",19),P(97,"bebop"),m(),p(98,"option",19),P(99,"bebop minor"),m(),p(100,"option",19),P(101,"bebop major"),m(),p(102,"option",19),P(103,"bebop locrian"),m(),p(104,"option",22),P(105,"_________"),m(),p(106,"option",19),P(107,"ionian pentatonic"),m(),p(108,"option",19),P(109,"mixolydian pentatonic"),m(),p(110,"option",19),P(111,"ritusen"),m(),p(112,"option",19),P(113,"egyptian"),m(),p(114,"option",19),P(115,"neopolitan major pentatonic"),m(),p(116,"option",19),P(117,"vietnamese 1"),m(),p(118,"option",19),P(119,"pelog"),m(),p(120,"option",19),P(121,"kumoijoshi"),m(),p(122,"option",19),P(123,"hirajoshi"),m(),p(124,"option",19),P(125,"iwato"),m(),p(126,"option",19),P(127,"in-sen"),m(),p(128,"option",19),P(129,"lydian pentatonic"),m(),p(130,"option",19),P(131,"malkos raga"),m(),p(132,"option",19),P(133,"locrian pentatonic"),m(),p(134,"option",19),P(135,"minor six pentatonic"),m(),p(136,"option",19),P(137,"flat three pentatonic"),m(),p(138,"option",19),P(139,"flat six pentatonic"),m(),p(140,"option",19),P(141,"scriabin"),m(),p(142,"option",19),P(143,"whole tone pentatonic"),m(),p(144,"option",19),P(145,"lydian #5P pentatonic"),m(),p(146,"option",19),P(147,"lydian dominant pentatonic"),m(),p(148,"option",19),P(149,"minor #7M pentatonic"),m(),p(150,"option",19),P(151,"super locrian pentatonic"),m(),p(152,"option",19),P(153,"minor hexatonic"),m(),p(154,"option",19),P(155,"augmented"),m(),p(156,"option",19),P(157,"piongio"),m(),p(158,"option",19),P(159,"prometheus neopolitan"),m(),p(160,"option",19),P(161,"prometheus"),m(),p(162,"option",19),P(163,"mystery #1"),m(),p(164,"option",19),P(165,"six tone symmetric"),m(),p(166,"option",19),P(167,"whole tone"),m(),p(168,"option",19),P(169,"messiaen's mode #5"),m(),p(170,"option",19),P(171,"locrian major"),m(),p(172,"option",19),P(173,"double harmonic lydian"),m(),p(174,"option",19),P(175,"altered"),m(),p(176,"option",19),P(177,"locrian #2"),m(),p(178,"option",19),P(179,"mixolydian b6"),m(),p(180,"option",19),P(181,"lydian dominant"),m(),p(182,"option",19),P(183,"lydian augmented"),m(),p(184,"option",19),P(185,"dorian b2"),m(),p(186,"option",19),P(187,"melodic minor"),m(),p(188,"option",19),P(189,"ultralocrian"),m(),p(190,"option",19),P(191,"locrian 6"),m(),p(192,"option",19),P(193,"augmented heptatonic"),m(),p(194,"option",19),P(195,"dorian #4"),m(),p(196,"option",19),P(197,"lydian diminished"),m(),p(198,"option",19),P(199,"leading whole tone"),m(),p(200,"option",19),P(201,"lydian minor"),m(),p(202,"option",19),P(203,"phrygian dominant"),m(),p(204,"option",19),P(205,"balinese"),m(),p(206,"option",19),P(207,"neopolitan major"),m(),p(208,"option",19),P(209,"double harmonic major"),m(),p(210,"option",19),P(211,"hungarian minor"),m(),p(212,"option",19),P(213,"hungarian major"),m(),p(214,"option",19),P(215,"oriental"),m(),p(216,"option",19),P(217,"flamenco"),m(),p(218,"option",19),P(219,"todi raga"),m(),p(220,"option",19),P(221,"persian"),m(),p(222,"option",19),P(223,"enigmatic"),m(),p(224,"option",19),P(225,"major augmented"),m(),p(226,"option",19),P(227,"lydian #9"),m(),p(228,"option",19),P(229,"purvi raga"),m(),p(230,"option",19),P(231,"spanish heptatonic"),m(),p(232,"option",19),P(233,"minor bebop"),m(),p(234,"option",19),P(235,"ichikosucho"),m(),p(236,"option",19),P(237,"kafi raga"),m(),p(238,"option",19),P(239,"chromatic"),m()()(),p(240,"div",23)(241,"span",5),ie(242,"img",24),m(),p(243,"div",7)(244,"input",25),Fe("ngModelChange",function(r){return Be(e.activeBubbles,r)||(e.activeBubbles=r),r}),m(),ie(245,"label",26),m(),p(246,"div",27)(247,"div",11)(248,"label",12)(249,"input",28),Fe("ngModelChange",function(r){return Be(e.chord_follow_score,r)||(e.chord_follow_score=r),r}),J("change",function(){return e.toggle_chord_follow_score()}),m(),p(250,"span",14)(251,"span",15),P(252,"Score"),m(),p(253,"span",16),P(254,"Preset"),m()()()(),ie(255,"span",29),m(),p(256,"select",30),Fe("ngModelChange",function(r){return Be(e.chord_tona,r)||(e.chord_tona=r),r}),J("change",function(){return e.chord_clicked()}),p(257,"option",19),P(258,"C#"),m(),p(259,"option",19),P(260,"Gb"),m(),p(261,"option",19),P(262,"F#"),m(),p(263,"option",19),P(264,"B"),m(),p(265,"option",19),P(266,"E"),m(),p(267,"option",19),P(268,"A"),m(),p(269,"option",19),P(270,"D"),m(),p(271,"option",19),P(272,"G"),m(),p(273,"option",19),P(274,"C"),m(),p(275,"option",19),P(276,"F"),m(),p(277,"option",19),P(278,"Bb"),m(),p(279,"option",19),P(280,"A#"),m(),p(281,"option",19),P(282,"Eb"),m(),p(283,"option",19),P(284,"D#"),m(),p(285,"option",19),P(286,"Ab"),m(),p(287,"option",19),P(288,"G#"),m(),p(289,"option",19),P(290,"Db"),m(),p(291,"option",20),P(292,"Gb"),m()(),p(293,"select",31),Fe("ngModelChange",function(r){return Be(e.chord_type,r)||(e.chord_type=r),r}),J("change",function(){return e.chord_clicked()}),Wt(294,iie,2,2,"option",32),m()()(),p(295,"span",33)(296,"div",34),J("click",function(){return e.set_caged_position("C")}),p(297,"span"),P(298,"C"),m()(),p(299,"div",34),J("click",function(){return e.set_caged_position("A")}),p(300,"span"),P(301,"A"),m()(),p(302,"div",34),J("click",function(){return e.set_caged_position("G")}),p(303,"span"),P(304,"G"),m()(),p(305,"div",34),J("click",function(){return e.set_caged_position("E")}),p(306,"span"),P(307,"E"),m()(),p(308,"div",34),J("click",function(){return e.set_caged_position("D")}),p(309,"span"),P(310,"D"),m()()(),p(311,"div",35)(312,"div",36)(313,"div",37)(314,"span",38),P(315,"1"),m(),p(316,"input",39),Fe("ngModelChange",function(r){return Be(e.displayNotesMode,r)||(e.displayNotesMode=r),r}),J("change",function(){return e.toggle_fretboard_display_mode()}),m(),ie(317,"label",40),p(318,"span",41),P(319,"A"),m()(),p(320,"div",42)(321,"input",43),J("change",function(r){return e.toggle_midi(r)}),m(),p(322,"label",44),ie(323,"img",45),m(),p(324,"input",46),J("change",function(r){return e.toggle_midi(r)}),m(),p(325,"label",47),P(326," both "),m(),p(327,"input",48),J("change",function(r){return e.toggle_midi(r)}),m(),p(328,"label",49),ie(329,"img",50),m()(),p(330,"div"),ie(331,"span",51)(332,"span",52),p(333,"input",53),J("change",function(){return e.rotateAll()}),Fe("ngModelChange",function(r){return Be(e.rotated,r)||(e.rotated=r),r}),m(),ie(334,"label",54),m(),p(335,"div",55),ie(336,"i",56)(337,"span",57),p(338,"input",58),J("change",function(){return e.toggle_hand()}),m(),ie(339,"label",59),m(),p(340,"div"),ie(341,"i",60)(342,"span",61),m()()(),p(343,"div",62)(344,"span"),P(345,"Skin"),m(),p(346,"select",63),J("ngModelChange",function(r){return e.onBgChange(r)}),Wt(347,rie,2,2,"option",32),m(),p(348,"span"),P(349,"Animation"),m(),p(350,"select",64),J("ngModelChange",function(r){return e.onChange(r)}),Wt(351,oie,2,2,"option",32),m(),p(352,"div",65),ie(353,"i",66)(354,"span",67),p(355,"input",68),Fe("ngModelChange",function(r){return Be(e.glowingBubbles,r)||(e.glowingBubbles=r),r}),m(),ie(356,"label",69),m()(),p(357,"button",70),J("contextmenu",function(r){return e.close_fretboard(!0),r.preventDefault()})("click",function(){return e.close_fretboard(!0)}),ie(358,"span",71),m()(),ft(),p(359,"svg",72)(360,"defs")(361,"pattern",73),ie(362,"image",74),m(),p(363,"pattern",75),ie(364,"image",76),m(),p(365,"filter",77),ie(366,"feGaussianBlur",78),p(367,"feSpecularLighting",79),ie(368,"fePointLight",80),m(),ie(369,"feComposite",81)(370,"feComposite",82),m()(),Wt(371,sie,1,0,"image",83)(372,aie,34,0,"svg",84)(373,lie,1,0,"image",85)(374,cie,34,0,"svg",84)(375,hie,2,3,"svg",86)(376,fie,3,6,"svg",87)(377,gie,2,5,"svg",88),p(378,"g"),Wt(379,_ie,1,4,"circle",89),m()()()()),n&2&&(E("hidden",e.visible==!1),y(8),Oe("ngModel",e.activeLosanges),y(5),Oe("ngModel",e.scale_follow_score),y(7),Oe("ngModel",e.scale_tona),E("disabled",e.scale_follow_score),y(),E("ngValue","C#"),y(2),E("ngValue","F#"),y(2),E("ngValue","B"),y(2),E("ngValue","E"),y(2),E("ngValue","A"),y(2),E("ngValue","D"),y(2),E("ngValue","G"),y(2),E("ngValue","C"),y(2),E("ngValue","F"),y(2),E("ngValue","Bb"),y(2),E("ngValue","Eb"),y(2),E("ngValue","Ab"),y(2),E("ngValue","Db"),y(4),Oe("ngModel",e.scale_type),E("disabled",e.scale_follow_score),y(),E("ngValue","major"),y(2),E("ngValue","aeolian"),y(4),E("ngValue","dorian"),y(2),E("ngValue","phrygian"),y(2),E("ngValue","lydian"),y(2),E("ngValue","mixolydian"),y(2),E("ngValue","aeolian"),y(2),E("ngValue","locrian"),y(4),E("ngValue","major pentatonic"),y(2),E("ngValue","major blues"),y(2),E("ngValue","minor pentatonic"),y(2),E("ngValue","minor blues"),y(4),E("ngValue","harmonic major"),y(2),E("ngValue","harmonic minor"),y(4),E("ngValue","diminished"),y(2),E("ngValue","minor six diminished"),y(2),E("ngValue","half-whole diminished"),y(2),E("ngValue","composite blues"),y(4),E("ngValue","bebop"),y(2),E("ngValue","bebop minor"),y(2),E("ngValue","bebop major"),y(2),E("ngValue","bebop locrian"),y(4),E("ngValue","ionian pentatonic"),y(2),E("ngValue","mixolydian pentatonic"),y(2),E("ngValue","ritusen"),y(2),E("ngValue","egyptian"),y(2),E("ngValue","neopolitan major pentatonic"),y(2),E("ngValue","vietnamese 1"),y(2),E("ngValue","pelog"),y(2),E("ngValue","kumoijoshi"),y(2),E("ngValue","hirajoshi"),y(2),E("ngValue","iwato"),y(2),E("ngValue","in-sen"),y(2),E("ngValue","lydian pentatonic"),y(2),E("ngValue","malkos raga"),y(2),E("ngValue","locrian pentatonic"),y(2),E("ngValue","minor six pentatonic"),y(2),E("ngValue","flat three pentatonic"),y(2),E("ngValue","flat six pentatonic"),y(2),E("ngValue","scriabin"),y(2),E("ngValue","whole tone pentatonic"),y(2),E("ngValue","lydian #5P pentatonic"),y(2),E("ngValue","lydian dominant pentatonic"),y(2),E("ngValue","minor #7M pentatonic"),y(2),E("ngValue","super locrian pentatonic"),y(2),E("ngValue","minor hexatonic"),y(2),E("ngValue","augmented"),y(2),E("ngValue","piongio"),y(2),E("ngValue","prometheus neopolitan"),y(2),E("ngValue","prometheus"),y(2),E("ngValue","mystery #1"),y(2),E("ngValue","six tone symmetric"),y(2),E("ngValue","whole tone"),y(2),E("ngValue","messiaen's mode #5"),y(2),E("ngValue","locrian major"),y(2),E("ngValue","double harmonic lydian"),y(2),E("ngValue","altered"),y(2),E("ngValue","locrian #2"),y(2),E("ngValue","mixolydian b6"),y(2),E("ngValue","lydian dominant"),y(2),E("ngValue","lydian augmented"),y(2),E("ngValue","dorian b2"),y(2),E("ngValue","melodic minor"),y(2),E("ngValue","ultralocrian"),y(2),E("ngValue","locrian 6"),y(2),E("ngValue","augmented heptatonic"),y(2),E("ngValue","dorian #4"),y(2),E("ngValue","lydian diminished"),y(2),E("ngValue","leading whole tone"),y(2),E("ngValue","lydian minor"),y(2),E("ngValue","phrygian dominant"),y(2),E("ngValue","balinese"),y(2),E("ngValue","neopolitan major"),y(2),E("ngValue","double harmonic major"),y(2),E("ngValue","hungarian minor"),y(2),E("ngValue","hungarian major"),y(2),E("ngValue","oriental"),y(2),E("ngValue","flamenco"),y(2),E("ngValue","todi raga"),y(2),E("ngValue","persian"),y(2),E("ngValue","enigmatic"),y(2),E("ngValue","major augmented"),y(2),E("ngValue","lydian #9"),y(2),E("ngValue","purvi raga"),y(2),E("ngValue","spanish heptatonic"),y(2),E("ngValue","minor bebop"),y(2),E("ngValue","ichikosucho"),y(2),E("ngValue","kafi raga"),y(2),E("ngValue","chromatic"),y(6),Oe("ngModel",e.activeBubbles),y(5),Oe("ngModel",e.chord_follow_score),E("disabled",!e.score_follow),y(7),Oe("ngModel",e.chord_tona),E("disabled",e.chord_follow_score||!e.score_follow),y(),E("ngValue","C#"),y(2),E("ngValue","F#"),y(2),E("ngValue","F#"),y(2),E("ngValue","B"),y(2),E("ngValue","E"),y(2),E("ngValue","A"),y(2),E("ngValue","D"),y(2),E("ngValue","G"),y(2),E("ngValue","C"),y(2),E("ngValue","F"),y(2),E("ngValue","Bb"),y(2),E("ngValue","Bb"),y(2),E("ngValue","Eb"),y(2),E("ngValue","Eb"),y(2),E("ngValue","Ab"),y(2),E("ngValue","G#"),y(2),E("ngValue","Db"),y(4),Oe("ngModel",e.chord_type),E("disabled",e.chord_follow_score||!e.score_follow),y(),E("ngForOf",e.chords_list),y(2),Xn("active",e.caged_position.indexOf("C")!=-1),y(3),Xn("active",e.caged_position.indexOf("A")!=-1),y(3),Xn("active",e.caged_position.indexOf("G")!=-1),y(3),Xn("active",e.caged_position.indexOf("E")!=-1),y(3),Xn("active",e.caged_position.indexOf("D")!=-1),y(5),E("ngClass",Ae(164,eie,e.cm.letters_Numbers_sync)),y(3),Oe("ngModel",e.displayNotesMode),E("disabled",e.cm.letters_Numbers_sync),y(5),E("checked",e.score_follow==!1),y(3),E("checked",e.score_follow=="both"),y(3),E("checked",e.score_follow==!0),y(6),Oe("ngModel",e.rotated),y(13),E("ngModel",e.selected_bg),y(),E("ngForOf",e.bg),y(3),E("ngModel",e.selected_anim),y(),E("ngForOf",e.anim),y(4),Oe("ngModel",e.glowingBubbles),y(16),E("ngIf",e.selected_bg=="Classic"),y(),E("ngIf",e.selected_bg=="Classic"),y(),E("ngIf",e.selected_bg=="Dark"),y(),E("ngIf",e.selected_bg=="Dark"),y(),E("ngForOf",e.yStrings),y(),E("ngForOf",e.yStrings),y(),E("ngForOf",e.yStrings),y(2),E("ngForOf",e.yStrings))},dependencies:()=>[lr,gi,vr,bo,xo,ro,Jo,Ti,Mi,vie],styles:[$9]})}}return FretboardComponent})(),vie=(()=>{class t{constructor(){this.x=0,this.y=0,this.text=""}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=zt({type:t,selectors:[["","fretboard-diamond",""]],inputs:{x:"x",y:"y",text:"text"},standalone:!1,attrs:yie,decls:3,vars:1,consts:[["d","M 0.20267886,17.651493 17.802677,0.05149334 35.402678,17.651493 17.802677,35.251499 Z"],["x","45%","y","60%",1,"chords_notes_labels","fret"]],template:function(i,r){i&1&&(ft(),ie(0,"path",0),p(1,"text",1),P(2),m()),i&2&&(y(2),Yt(r.text))},styles:[$9]})}}return t})();var Pu=(()=>{class t{constructor(e,i,r,s,a){this.midi=e,this.zone=i,this.cm=r,this.transport=s,this.sm=a,this.current_chord=new yn,this.current_chord$=this.current_chord.asObservable(),this.chord={},this.beatChangeSub$=this.transport.beatChange.subscribe(l=>{let d=this.sm.getMeasures_hash(),u=this.sm.getMeasureByIdx(l.measure);if(!u||!Object.keys(d).length)return;let h=this.sm.getPart(d[u.getId()].part).getTonality(),_=u.getBeat(l.beat).chord,w=/(\/[ABCDEFG][#b]{0,2})/.exec(_),S;w==null?S=null:(S=w[1].substring(1),_=_.replace(w[1],""));let R=/([ABCDEFG][#b]{0,2})(.*)/.exec(_);if(R==null){console.warn("Tonality-button component : no chord found ...");return}let z=R[1],ne=R[2],Q={root:z,bass:S,chordType:ne,scaleType:u.scale.scale_type||"",scaleTona:u.scale.scale_tona||h};(Q.root!=this.chord.root||Q.chordType!=this.chord.chordType||Q.scaleType!=this.chord.scaleType||Q.scaleTona!=this.chord.scaleTona)&&this.setChord(Q)})}setChord(e){this.chord=e,this.current_chord.next(e)}getChord(){return this.chord}refreshChord(){this.current_chord.next(this.getChord())}static{this.\u0275fac=function(i){return new(i||t)(ht(hi),ht(on),ht(Ci),ht(yi),ht(Hn))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac})}}return t})();var Gs=t=>({active:t}),Ws=t=>({"side-active":t}),_i=(t,n,e)=>({"active-tonality":t,"active-chord":n,"active-midi-chord":e}),ir=t=>({"active-tonality":t}),zs=(t,n)=>({"active-chord":t,"active-midi-chord":n}),bie=t=>({"bg-opacity":t}),e8=(()=>{class TonalityButtonComponent{set is_opened(t){t?this.showWheel():this.hideWheel()}set cur_chord_midi_chord(t){this.change_midi_chord(t)}constructor(cm,curTonality,midi,zone,curChordMod){this.cm=cm,this.curTonality=curTonality,this.midi=midi,this.zone=zone,this.curChordMod=curChordMod,this.maj_chords=["","M","maj7","5","maj9","maj11","maj13","6","Maj7","Maj9","M11","M13","maj9no5","M9sus4","Madd9","69"],this.min_chords=["m","m7","m#5","mMa7","m6","m9","m11","m7no5","m9no5","m11no5","madd9"],this.half_dim_chords=["m7b5"],this.seven_chords=["7","9","11","13","7no5","9no5","13no5","13sus4","7add13"],this.m69=["m69","m69"],this.german=["german"],this.sevenb5=["7b5"],this.dim_chords=["dim","o","m7b5"],this.dim7_chords=["dim7"],this.show_score_chords=!0,this._fifths=["C","G","D","A","E","B","Gb","Db","Ab","Eb","Bb","F"],this._fifths_sh=["C","G","D","A","E","B","F#","C#","G#","D#","A#","F"],this._mfifths=["Am","Em","Bm","F#m","C#m","G#m","Ebm","Bbm","Fm","Cm","Gm","Dm"],this._roman=["IV","I","V","II","VI","III","VII","Tri","","bVI","bIII","bVII"],this._diminished=["Bo","F#o","C#o","G#o","D#o","A#o","E#o","Fo","Co","Go","Do","Ao","Eo"],this.chords_F_positions={C:0,G:1,D:2,A:3,E:4,B:5,Gb:6,"F#":6,Db:7,Ab:8,Eb:9,Bb:10,F:11},this.chords_MF_positions={Am:0,Em:1,Bm:2,"F#m":3,"C#m":4,"G#m":5,Ebm:6,"D#m":6,Bbm:7,Fm:8,Cm:9,Gm:10,Dm:11},this.x_roman=[25,170,305,400,438,400,290,165,25,-75,-110,-70],this.y_roman=[125.36215,85.36215,125.36215,215.36218,360.36218,495.36218,600.36218,635.36218,600.36218,495.36218,360.36218,215.36218],this.selected_green="C",this.current_score_chord="",this.current_midi_chord="",this.selected_score_chord=null,this.score_tonality="C",this.selected_tonality=this.score_tonality,this.hide=!0,this.is_locked=!0,this.mode="",this.lock_closed=this.cm.isTonalityLockedToScore(),this.curTonality$=this.curTonality.current_tonality$.subscribe(t=>{if(this.is_locked=t.is_locked_to_score,this.score_tonality=t.scale_tona||t.part_tona||t.score_tona,this.selected_tonality=t.selected_tona,this.is_locked){let n=this.score_tonality==t.scale_tona?t.scale_mode:this.score_tonality==t.part_tona?t.part_mode:t.score_mode;this.COF_set_roman_mode(this.score_tonality,n)}else this.COF_set_roman_mode(this.selected_tonality,t.selected_mode);this.rotate_romans()}),this.chordChangeSub$=this.curChordMod.current_chord$.subscribe(t=>{this.is_locked&&(this.selected_score_chord=t,this.light_score())}),this.midiControlUpdate$=this.midi.controlTabSubject.subscribe(data=>{let ctrl=this.cm.getAssignedControls(!1),o=ctrl[""+data],number,control_name,control_action;if(o&&o.length)for(let obj of o)number=obj.number,control_name=obj.control_name,control_action=obj.control_action,eval("this."+control_name)&&this.zone.run(()=>{this.is_locked=!1,this.unlight_score(),eval("this."+control_name+'("'+control_action+'")')});else return})}ngOnInit(){}ngOnDestroy(){this.curTonality$.unsubscribe(),this.chordChangeSub$.unsubscribe(),this.midiControlUpdate$.unsubscribe()}changeTonality(t){let n={selected_tona:t.selected_tonality,selected_mode:t.selected_mode,is_locked_to_score:this.is_locked};this.curTonality.setTonality(n)}COF_set_roman_mode(t,n="ionian"){n||(n="major");let i={ionian:0,"":0,major:0,mixolydian:11,dorian:10,minor:9,aeolian:9,phrygian:8,locrian:7,lydian:1}[n];i==null&&(console.warn("COF_SET_ROMAN_MODE : wrong mode ! ('ionian'|'dorian'|'phrygian'|'lydian'|'mixolydian'|'aeolian'|'locrian'|'') : ",n),i=0);let r;this._fifths.indexOf(t)==-1?r=(this._fifths_sh.indexOf(t)+i)%12:r=(this._fifths.indexOf(t)+i)%12;let s;n=="minor"||n=="aeolian"?s=this._mfifths[r]:s=this._fifths[r],this.mode=n=="aeolian"?"minor":n,this.selected_green=t=="F#"&&n!="minor"?"Gb":s}light_off_tona(){var t=document.querySelectorAll(".active-tonality");[].forEach.call(t,function(n){n.classList.remove("active-tonality")})}light(t){$(t.currentTarget).addClass("active-tonality")}clickMe(t){this.light_off_tona();let n=$(t.currentTarget).text()!=""?$(t.currentTarget).text():$(t.currentTarget).next().text();(n=="Gb|F#"||n=="Ebm|D#m")&&(n=n.split(/[|]+/).pop()),this.is_locked=!1;let e=n[n.length-1]=="m",i=e?"minor":"major",r=n;e&&(r=n.slice(0,n.length-1)),this.changeTonality({selected_tonality:r,selected_mode:i})}toggle_lock_to_score(){this.is_locked=!this.is_locked,this.is_locked&&!this.cm.tonality_button_always_open?this.hide=!0:this.hide=!1,this.curTonality.setTonality({is_locked_to_score:this.is_locked})}showWheel(){this.hide=!1}hideWheel(){this.cm.tonality_button_always_open||(this.hide=!0)}rotate_romans(){let t;this.is_locked?t=this.score_tonality:t=this.selected_tonality,t=="C#"?t="Db":t=="G#"?t="Ab":t=="D#"&&(t="Eb"),t in this.chords_F_positions?this.rotation_times=this.chords_F_positions[t]:this.rotation_times=this.chords_MF_positions[t]+3,this.rotation_times&&(Object.keys(this.chords_F_positions).forEach(n=>{this.chords_F_positions[n]=this.chords_F_positions[n]-this.rotation_times}),Object.keys(this.chords_MF_positions).forEach(n=>{this.chords_MF_positions[n]=this.chords_MF_positions[n]-this.rotation_times}),this.x_roman.rotate(this.rotation_times),this.y_roman.rotate(this.rotation_times))}getSimplifiedChordType(t){let n="",e={idx:-1,col:""};return this.maj_chords.indexOf(t)!=-1?n="M":this.min_chords.indexOf(t)!=-1?n="m":this.half_dim_chords.indexOf(t)!=-1?n="m7b5":this.seven_chords.indexOf(t)!=-1?n="7":this.m69.indexOf(t)!=-1?n="m69":this.german.indexOf(t)!=-1?n="german":this.sevenb5.indexOf(t)!=-1?n="7b5":this.dim_chords.indexOf(t)!=-1?n="dim":this.dim7_chords.indexOf(t)!=-1&&(n="dim7"),n=n[0]=="m"&&n!="m7b5"?"m":n,n}change_midi_chord(t){if(!t.chords.length||t.full_chord.empty){this.unlight_midi();return}let n=t.full_chord.aliases[0],e=this.getSimplifiedChordType(n),i=t.full_chord.tonic.replace(/[0-9]$/,"");this.unlight_midi(),this.light_midi(i,e)}unlight_midi(){this.current_midi_chord=" "}light_midi(t,n){n=n[0]=="m"&&n!="m7b5"?"m":n,n=="M"||this.seven_chords.indexOf(n)!=-1?n="":this.min_chords.indexOf(n)!=-1?n="m":this.dim_chords.indexOf(n)!=-1&&(n="dim"),this.current_midi_chord=t+n}light_score(){if(!this.selected_score_chord)return;let t=this.selected_score_chord.chordType,n=this.selected_score_chord.root;t=="M"||this.seven_chords.indexOf(t)!=-1||this.maj_chords.indexOf(t)!=-1?t="":this.min_chords.indexOf(t)!=-1?t="m":this.dim_chords.indexOf(t)!=-1&&(t="dim"),this.show_score_chords?this.current_score_chord=n+t:this.unlight_score()}unlight_score(){this.current_score_chord=null}toggle_leave_open(){this.cm.set_tonality_button_always_open(!this.cm.get_tonality_button_always_open()),this.cm.get_tonality_button_always_open()&&this.showWheel()}static{this.\u0275fac=function(n){return new(n||TonalityButtonComponent)(Le(Ci),Le($a),Le(hi),Le(on),Le(Pu))}}static{this.\u0275cmp=zt({type:TonalityButtonComponent,selectors:[["app-tonality-button"]],inputs:{is_opened:"is_opened",cur_chord_midi_chord:"cur_chord_midi_chord"},standalone:!1,decls:232,vars:693,consts:[["id","tonality-btn"],["version","1.1","viewBox","-120 -120 615 615","xmlns","http://www.w3.org/2000/svg",2,"position","absolute","transform","scale(2) translate(-50px, -60px)",3,"mouseleave","contextmenu"],["id","triangle",2,"transform","translate(96px, 60px) scale(1.5)"],["d","M 89.048118,125.60966 140.66796,-64.182915 c 0,0 -48.656768,-14.347508 -101.992068,-0.311902 9.980874,36.18067 50.372226,190.104477 50.372226,190.104477 z"],["id","cutTriangle",2,"transform","translate(96px, 60px)"],["d","m 113.42817,35.268614 27.11212,-99.377094 c 0,0 -48.525828,-14.308899 -101.717598,-0.311062 9.954022,36.083305 26.422962,99.599306 26.422962,99.599306 0,0 23.813716,-7.330131 48.182516,0.08886 z"],["cx","185","cy","185","r","300",1,"back-circle",3,"mouseleave"],["cx","185","cy","185","r","250",1,"back-circle-maj"],["cx","185","cy","185","r","190",1,"back-circle-min"],["cx","185","cy","185","r","140",1,"back-circle-dim"],[0,"xlink","href","#triangle","transform","scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(30) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(60) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(90) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(119) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(149) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(180) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(210) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(241.5) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(271.5) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(300) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#triangle","transform","rotate(329) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#cutTriangle","transform","scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#cutTriangle","transform","rotate(30) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#cutTriangle","transform","rotate(60) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#cutTriangle","transform","rotate(90) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#cutTriangle","transform","rotate(119) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#cutTriangle","transform","rotate(149) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#cutTriangle","transform","rotate(180) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#cutTriangle","transform","rotate(210) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#cutTriangle","transform","rotate(241.5) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#cutTriangle","transform","rotate(271.5) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#cutTriangle","transform","rotate(300) scale(1.48)",1,"selection_background",3,"ngClass"],[0,"xlink","href","#cutTriangle","transform","rotate(329) scale(1.48)",1,"selection_background",3,"ngClass"],["transform","translate(0 -165)"],["id","roman"],[1,"roman"],["id","major"],["r","30",1,"dot",3,"click","ngClass"],[1,"fifths",3,"click","ngClass"],["id","minor"],["r","25",1,"dot",3,"click","ngClass"],[1,"fifths-m",3,"click","ngClass"],["r","25",1,"dot","double",3,"click","ngClass"],[1,"fifths-m","double",3,"click","ngClass"],["id","dim"],["r","25",1,"d","dot",3,"click","ngClass"],[1,"diminished",3,"ngClass"],[1,"diminished","double",3,"ngClass"],[1,"slices"],["d","M 99.054047,88.547724 78.974763,162.61375",1,"cut"],["d","M 116.26571,98.56954 61.763102,152.59193",1,"cut"],["d","m 126.3965,116.93104 -74.764192,17.2994",1,"cut"],["d","M 126.04743,135.62037 51.981389,115.54111",1,"cut"],["d","M 116.64861,152.20009 61.380206,98.961394",1,"cut"],["d","M 98.67108,162.71546 79.357734,88.446022",1,"cut"],[1,"main-button","pulse",3,"contextmenu","click","mouseover","ngClass"],[1,"tonality-letter",3,"hidden"],[1,"fas","fa-lock"],[1,"fas","fa-lock-open"],[1,"mode"]],template:function(n,e){n&1&&(p(0,"section",0),ft(),p(1,"svg",1),J("mouseleave",function(){return e.hideWheel()})("contextmenu",function(r){return r.preventDefault(),e.toggle_leave_open()}),p(2,"defs")(3,"g",2),ie(4,"path",3),m(),p(5,"g",4),ie(6,"path",5),m()(),p(7,"circle",6),J("mouseleave",function(){return e.hideWheel()}),m(),ie(8,"circle",7)(9,"circle",8)(10,"circle",9)(11,"use",10)(12,"use",11)(13,"use",12)(14,"use",13)(15,"use",14)(16,"use",15)(17,"use",16)(18,"use",17)(19,"use",18)(20,"use",19)(21,"use",20)(22,"use",21)(23,"use",22)(24,"use",23)(25,"use",24)(26,"use",25)(27,"use",26)(28,"use",27)(29,"use",28)(30,"use",29)(31,"use",30)(32,"use",31)(33,"use",32)(34,"use",33),p(35,"g",34)(36,"g",35)(37,"text",36),P(38,"IV"),m(),p(39,"text",36),P(40,"IV"),m(),p(41,"text",36),P(42,"I"),m(),p(43,"text",36),P(44,"I"),m(),p(45,"text",36),P(46,"V"),m(),p(47,"text",36),P(48,"V"),m(),p(49,"text",36),P(50,"II"),m(),p(51,"text",36),P(52,"II"),m(),p(53,"text",36),P(54,"VI"),m(),p(55,"text",36),P(56,"VI"),m(),p(57,"text",36),P(58,"III"),m(),p(59,"text",36),P(60,"III"),m(),p(61,"text",36),P(62,"VII"),m(),p(63,"text",36),P(64,"VII"),m(),p(65,"text",36),P(66,"Tri"),m(),p(67,"text",36),P(68,"Tri"),m(),p(69,"text",36),P(70,"bVI"),m(),p(71,"text",36),P(72,"bVI"),m(),p(73,"text",36),P(74,"bIII"),m(),p(75,"text",36),P(76,"bIII"),m(),p(77,"text",36),P(78,"bVII"),m(),p(79,"text",36),P(80,"bVII"),m()(),p(81,"g",37)(82,"circle",38),J("click",function(r){return e.clickMe(r)}),m(),p(83,"text",39),J("click",function(r){return e.clickMe(r)}),P(84,"C"),m(),p(85,"circle",38),J("click",function(r){return e.clickMe(r)}),m(),p(86,"text",39),J("click",function(r){return e.clickMe(r)}),P(87,"G"),m(),p(88,"circle",38),J("click",function(r){return e.clickMe(r)}),m(),p(89,"text",39),J("click",function(r){return e.clickMe(r)}),P(90,"D"),m(),p(91,"circle",38),J("click",function(r){return e.clickMe(r)}),m(),p(92,"text",39),J("click",function(r){return e.clickMe(r)}),P(93,"A"),m(),p(94,"circle",38),J("click",function(r){return e.clickMe(r)}),m(),p(95,"text",39),J("click",function(r){return e.clickMe(r)}),P(96,"E"),m(),p(97,"circle",38),J("click",function(r){return e.clickMe(r)}),m(),p(98,"text",39),J("click",function(r){return e.clickMe(r)}),P(99,"B"),m(),p(100,"circle",38),J("click",function(r){return e.clickMe(r)}),m(),p(101,"text",39),J("click",function(r){return e.clickMe(r)}),P(102,"Gb|F#"),m(),p(103,"circle",38),J("click",function(r){return e.clickMe(r)}),m(),p(104,"text",39),J("click",function(r){return e.clickMe(r)}),P(105,"Db"),m(),p(106,"circle",38),J("click",function(r){return e.clickMe(r)}),m(),p(107,"text",39),J("click",function(r){return e.clickMe(r)}),P(108,"Ab"),m(),p(109,"circle",38),J("click",function(r){return e.clickMe(r)}),m(),p(110,"text",39),J("click",function(r){return e.clickMe(r)}),P(111,"Eb"),m(),p(112,"circle",38),J("click",function(r){return e.clickMe(r)}),m(),p(113,"text",39),J("click",function(r){return e.clickMe(r)}),P(114,"Bb"),m(),p(115,"circle",38),J("click",function(r){return e.clickMe(r)}),m(),p(116,"text",39),J("click",function(r){return e.clickMe(r)}),P(117,"F"),m()(),p(118,"g",40)(119,"circle",41),J("click",function(r){return e.clickMe(r)}),m(),p(120,"text",42),J("click",function(r){return e.clickMe(r)}),p(121,"tspan"),P(122,"Am"),m()(),p(123,"circle",41),J("click",function(r){return e.clickMe(r)}),m(),p(124,"text",42),J("click",function(r){return e.clickMe(r)}),p(125,"tspan"),P(126,"Dm"),m()(),p(127,"circle",41),J("click",function(r){return e.clickMe(r)}),m(),p(128,"text",42),J("click",function(r){return e.clickMe(r)}),p(129,"tspan"),P(130,"Gm"),m()(),p(131,"circle",41),J("click",function(r){return e.clickMe(r)}),m(),p(132,"text",42),J("click",function(r){return e.clickMe(r)}),p(133,"tspan"),P(134,"Cm"),m()(),p(135,"circle",41),J("click",function(r){return e.clickMe(r)}),m(),p(136,"text",42),J("click",function(r){return e.clickMe(r)}),p(137,"tspan"),P(138,"Fm"),m()(),p(139,"circle",41),J("click",function(r){return e.clickMe(r)}),m(),p(140,"text",42),J("click",function(r){return e.clickMe(r)}),p(141,"tspan"),P(142,"Bbm"),m()(),p(143,"circle",43),J("click",function(r){return e.clickMe(r)}),m(),p(144,"text",44),J("click",function(r){return e.clickMe(r)}),p(145,"tspan"),P(146,"Ebm|D#m"),m()(),p(147,"circle",41),J("click",function(r){return e.clickMe(r)}),m(),p(148,"text",42),J("click",function(r){return e.clickMe(r)}),p(149,"tspan"),P(150,"G#m"),m()(),p(151,"circle",41),J("click",function(r){return e.clickMe(r)}),m(),p(152,"text",42),J("click",function(r){return e.clickMe(r)}),p(153,"tspan"),P(154,"C#m"),m()(),p(155,"circle",41),J("click",function(r){return e.clickMe(r)}),m(),p(156,"text",42),J("click",function(r){return e.clickMe(r)}),p(157,"tspan"),P(158,"F#m"),m()(),p(159,"circle",41),J("click",function(r){return e.clickMe(r)}),m(),p(160,"text",42),J("click",function(r){return e.clickMe(r)}),p(161,"tspan"),P(162,"Bm"),m()(),p(163,"circle",41),J("click",function(r){return e.clickMe(r)}),m(),p(164,"text",42),J("click",function(r){return e.clickMe(r)}),p(165,"tspan"),P(166,"Em"),m()()(),p(167,"g",45)(168,"circle",46),J("click",function(r){return e.clickMe(r)}),m(),p(169,"text",47)(170,"tspan"),P(171,"Bo"),m()(),p(172,"circle",46),J("click",function(r){return e.clickMe(r)}),m(),p(173,"text",47)(174,"tspan"),P(175,"Eo"),m()(),p(176,"circle",46),J("click",function(r){return e.clickMe(r)}),m(),p(177,"text",47)(178,"tspan"),P(179,"Ao"),m()(),p(180,"circle",46),J("click",function(r){return e.clickMe(r)}),m(),p(181,"text",47)(182,"tspan"),P(183,"Do"),m()(),p(184,"circle",46),J("click",function(r){return e.clickMe(r)}),m(),p(185,"text",47)(186,"tspan"),P(187,"Go"),m()(),p(188,"circle",46),J("click",function(r){return e.clickMe(r)}),m(),p(189,"text",47)(190,"tspan"),P(191,"Co"),m()(),p(192,"circle",46),J("click",function(r){return e.clickMe(r)}),m(),p(193,"text",48)(194,"tspan"),P(195,"Fo|E#o"),m()(),p(196,"circle",46),J("click",function(r){return e.clickMe(r)}),m(),p(197,"text",47)(198,"tspan"),P(199,"A#o"),m()(),p(200,"circle",46),J("click",function(r){return e.clickMe(r)}),m(),p(201,"text",47)(202,"tspan"),P(203,"D#o"),m()(),p(204,"circle",46),J("click",function(r){return e.clickMe(r)}),m(),p(205,"text",47)(206,"tspan"),P(207,"G#o"),m()(),p(208,"circle",46),J("click",function(r){return e.clickMe(r)}),m(),p(209,"text",47)(210,"tspan"),P(211,"C#o"),m()(),p(212,"circle",46),J("click",function(r){return e.clickMe(r)}),m(),p(213,"text",47)(214,"tspan"),P(215,"F#o"),m()()()(),p(216,"g",49),ie(217,"path",50)(218,"path",51)(219,"path",52)(220,"path",53)(221,"path",54)(222,"path",55),m()(),Ho(),p(223,"div",56),J("contextmenu",function(r){return r.preventDefault(),e.toggle_leave_open()})("click",function(r){return r.preventDefault(),e.toggle_lock_to_score()})("mouseover",function(){return e.showWheel()}),p(224,"span",57),P(225),ie(226,"i",58),m(),p(227,"span",57),P(228),ie(229,"i",59),m(),p(230,"span",60),P(231),m()()()),n&2&&(y(),ae("height",e.hide?"0%":"100%")("width",e.hide?"0%":"100%"),y(6),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("style",e.hide?"display:none;":"display:block;",gt),y(),E("ngClass",Ae(415,Gs,e.selected_green=="C"||e.selected_green=="Am")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 195px;",gt),y(),E("ngClass",Ae(417,Gs,e.selected_green=="G"||e.selected_green=="Em")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 190px 188px;",gt),y(),E("ngClass",Ae(419,Gs,e.selected_green=="D"||e.selected_green=="Bm")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(421,Gs,e.selected_green=="A"||e.selected_green=="F#m")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(423,Gs,e.selected_green=="E"||e.selected_green=="C#m")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(425,Gs,e.selected_green=="B"||e.selected_green=="G#m")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(427,Gs,e.selected_green=="F#"||e.selected_green=="D#m"||e.selected_green=="Gb"||e.selected_green=="Ebm")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(429,Gs,e.selected_green=="Db"||e.selected_green=="Bbm")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(431,Gs,e.selected_green=="Ab"||e.selected_green=="Fm")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(433,Gs,e.selected_green=="Eb"||e.selected_green=="Cm")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(435,Gs,e.selected_green=="Bb"||e.selected_green=="Gm")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(437,Gs,e.selected_green=="F"||e.selected_green=="Dm")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 178px 189px;",gt),y(),E("ngClass",Ae(439,Ws,e.selected_green=="F"||e.selected_green=="Dm"||e.selected_green=="G"||e.selected_green=="Em")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 195px;",gt),y(),E("ngClass",Ae(441,Ws,e.selected_green=="C"||e.selected_green=="Am"||e.selected_green=="D"||e.selected_green=="Bm")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 190px 188px;",gt),y(),E("ngClass",Ae(443,Ws,e.selected_green=="G"||e.selected_green=="Em"||e.selected_green=="A"||e.selected_green=="F#m")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(445,Ws,e.selected_green=="D"||e.selected_green=="Bm"||e.selected_green=="E"||e.selected_green=="C#m")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(447,Ws,e.selected_green=="A"||e.selected_green=="F#m"||e.selected_green=="B"||e.selected_green=="G#m")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(449,Ws,e.selected_green=="E"||e.selected_green=="C#m"||e.selected_green=="F#"||e.selected_green=="D#m"||e.selected_green=="Gb"||e.selected_green=="Ebm")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(451,Ws,e.selected_green=="B"||e.selected_green=="G#m"||e.selected_green=="Db"||e.selected_green=="Bbm")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(453,Ws,e.selected_green=="F#"||e.selected_green=="D#m"||e.selected_green=="Gb"||e.selected_green=="Ebm"||e.selected_green=="Ab"||e.selected_green=="Fm")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(455,Ws,e.selected_green=="Db"||e.selected_green=="Bbm"||e.selected_green=="Eb"||e.selected_green=="Cm")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(457,Ws,e.selected_green=="Ab"||e.selected_green=="Fm"||e.selected_green=="Bb"||e.selected_green=="Gm")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(459,Ws,e.selected_green=="Eb"||e.selected_green=="Cm"||e.selected_green=="F"||e.selected_green=="Dm")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 185px 188px;",gt),y(),E("ngClass",Ae(461,Ws,e.selected_green=="C"||e.selected_green=="Am"||e.selected_green=="Bb"||e.selected_green=="Gm")),ae("style",e.hide?"display:none;":"display:block;transform-origin: 178px 189px;",gt),y(3),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[0])("y",e.hide?"320":e.y_roman[0]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[0])("y",e.hide?"320":e.y_roman[0]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[1])("y",e.hide?"320":e.y_roman[1]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[1])("y",e.hide?"320":e.y_roman[1]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[2])("y",e.hide?"320":e.y_roman[2]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[2])("y",e.hide?"320":e.y_roman[2]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[3])("y",e.hide?"320":e.y_roman[3]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[3])("y",e.hide?"320":e.y_roman[3]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[4])("y",e.hide?"320":e.y_roman[4]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[4])("y",e.hide?"320":e.y_roman[4]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[5])("y",e.hide?"320":e.y_roman[5]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[5])("y",e.hide?"320":e.y_roman[5]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[6])("y",e.hide?"320":e.y_roman[6]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[6])("y",e.hide?"320":e.y_roman[6]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[7])("y",e.hide?"320":e.y_roman[7]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[7])("y",e.hide?"320":e.y_roman[7]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[9])("y",e.hide?"320":e.y_roman[9]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[9])("y",e.hide?"320":e.y_roman[9]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[10])("y",e.hide?"320":e.y_roman[10]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[10])("y",e.hide?"320":e.y_roman[10]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[11])("y",e.hide?"320":e.y_roman[11]),y(2),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":e.x_roman[11])("y",e.hide?"320":e.y_roman[11]),y(3),E("ngClass",ei(463,_i,e.selected_green=="C",e.current_score_chord=="C",e.current_midi_chord=="C")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"168")("cy",e.hide?"320":"148.36215"),y(),E("ngClass",Ae(467,ir,e.selected_green=="C")),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":"168")("y",e.hide?"320":"148.36215"),y(2),E("ngClass",ei(469,_i,e.selected_green=="G",e.current_score_chord=="G",e.current_midi_chord=="G")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"275")("cy",e.hide?"320":"175.36215"),y(),E("ngClass",Ae(473,ir,e.selected_green=="G")),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":"275")("y",e.hide?"320":"175.36215"),y(2),E("ngClass",ei(475,_i,e.selected_green=="D",e.current_score_chord=="D",e.current_midi_chord=="D")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"360")("cy",e.hide?"320":"261.36218"),y(),E("ngClass",Ae(479,ir,e.selected_green=="D")),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":"360")("y",e.hide?"320":"260.36218"),y(2),E("ngClass",ei(481,_i,e.selected_green=="A",e.current_score_chord=="A",e.current_midi_chord=="A")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"383")("cy",e.hide?"320":"368.36218"),y(),E("ngClass",Ae(485,ir,e.selected_green=="A")),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":"383")("y",e.hide?"320":"368.36218"),y(2),E("ngClass",ei(487,_i,e.selected_green=="E",e.current_score_chord=="E",e.current_midi_chord=="E")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"360")("cy",e.hide?"320":"475.36218"),y(),E("ngClass",Ae(491,ir,e.selected_green=="E")),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":"360")("y",e.hide?"320":"475.36218"),y(2),E("ngClass",ei(493,_i,e.selected_green=="B",e.current_score_chord=="B",e.current_midi_chord=="B")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"280")("cy",e.hide?"320":"560.36218"),y(),E("ngClass",Ae(497,ir,e.selected_green=="B")),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":"280")("y",e.hide?"320":"560.36218"),y(2),E("ngClass",ei(499,_i,e.selected_green=="F#"||e.selected_green=="Gb",e.current_score_chord=="F#"||e.current_score_chord=="Gb",e.current_midi_chord=="F#"||e.current_midi_chord=="Gb")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"165")("cy",e.hide?"320":"588.36218"),y(),E("ngClass",Ae(503,ir,e.selected_green=="F#"||e.selected_green=="Gb")),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":"138")("y",e.hide?"320":"588.36218"),y(2),E("ngClass",ei(505,_i,e.selected_green=="Db",e.current_score_chord=="Db",e.current_midi_chord=="Db")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"55")("cy",e.hide?"320":"555.36218"),y(),E("ngClass",Ae(509,ir,e.selected_green=="Db")),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":"55")("y",e.hide?"320":"555.36218"),y(2),E("ngClass",ei(511,_i,e.selected_green=="Ab",e.current_score_chord=="Ab",e.current_midi_chord=="Ab")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"-25")("cy",e.hide?"320":"478.36218"),y(),E("ngClass",Ae(515,ir,e.selected_green=="Ab")),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":"-28")("y",e.hide?"320":"475.36218"),y(2),E("ngClass",ei(517,_i,e.selected_green=="Eb",e.current_score_chord=="Eb",e.current_midi_chord=="Eb")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"-55")("cy",e.hide?"320":"368.36218"),y(),E("ngClass",Ae(521,ir,e.selected_green=="Eb")),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":"-55")("y",e.hide?"320":"368.36218"),y(2),E("ngClass",ei(523,_i,e.selected_green=="Bb",e.current_score_chord=="Bb",e.current_midi_chord=="Bb")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"-25")("cy",e.hide?"320":"260.36218"),y(),E("ngClass",Ae(527,ir,e.selected_green=="Bb")),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":"-25")("y",e.hide?"320":"260.36218"),y(2),E("ngClass",ei(529,_i,e.selected_green=="F",e.current_score_chord=="F",e.current_midi_chord=="F")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"58")("cy",e.hide?"320":"178.36215"),y(),E("ngClass",Ae(533,ir,e.selected_green=="F")),ae("style",e.hide?"display:none;":"display:block;",gt)("x",e.hide?"130":"62")("y",e.hide?"320":"180.36215"),y(3),E("ngClass",ei(535,_i,e.selected_green=="Am",e.current_score_chord=="Am",e.current_midi_chord=="Am")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"168.41632")("cy",e.hide?"320":"203.34468"),y(),E("ngClass",Ae(539,ir,e.selected_green=="Am")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"165.41632")("y",e.hide?"320":"195.34468"),y(2),E("ngClass",ei(541,_i,e.selected_green=="Dm",e.current_score_chord=="Dm",e.current_midi_chord=="Dm")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"87.00448")("cy",e.hide?"320":"225.70085"),y(),E("ngClass",Ae(545,ir,e.selected_green=="Dm")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"85.00448")("y",e.hide?"320":"220.70085"),y(2),E("ngClass",ei(547,_i,e.selected_green=="Gm",e.current_score_chord=="Gm",e.current_midi_chord=="Gm")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"23.500919")("cy",e.hide?"320":"285.64285"),y(),E("ngClass",Ae(551,ir,e.selected_green=="Gm")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"20.500919")("y",e.hide?"320":"280.64285"),y(2),E("ngClass",ei(553,_i,e.selected_green=="Cm",e.current_score_chord=="Cm",e.current_midi_chord=="Cm")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"0.585354")("cy",e.hide?"320":"370.73105"),y(),E("ngClass",Ae(557,ir,e.selected_green=="Cm")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"0.585354")("y",e.hide?"320":"365.73105"),y(2),E("ngClass",ei(559,_i,e.selected_green=="Fm",e.current_score_chord=="Fm",e.current_midi_chord=="Fm")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"125":"25.601101")("cy",e.hide?"320":"450.13083"),y(),E("ngClass",Ae(563,ir,e.selected_green=="Fm")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"125":"25.601101")("y",e.hide?"320":"445.13083"),y(2),E("ngClass",ei(565,_i,e.selected_green=="Bbm",e.current_score_chord=="Bbm",e.current_midi_chord=="Bbm")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"85.86298")("cy",e.hide?"320":"510.49033"),y(),E("ngClass",Ae(569,ir,e.selected_green=="Bbm")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"80.86298")("y",e.hide?"320":"505.49033"),y(2),E("ngClass",ei(571,_i,e.selected_green=="D#m"||e.selected_green=="Ebm",e.current_score_chord=="D#m"||e.current_score_chord=="Ebm",e.current_midi_chord=="D#m"||e.current_midi_chord=="Ebm")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"162.39803")("cy",e.hide?"320":"532.32037"),y(),E("ngClass",Ae(575,ir,e.selected_green=="D#m"||e.selected_green=="Ebm")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"155.39803")("y",e.hide?"320":"518.32037"),y(2),E("ngClass",ei(577,_i,e.selected_green=="G#m"||e.selected_green=="Abm",e.current_score_chord=="G#m"||e.current_score_chord=="Abm",e.current_midi_chord=="G#m"||e.current_midi_chord=="Abm")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"248.19267")("cy",e.hide?"320":"510.47498"),y(),E("ngClass",Ae(581,ir,e.selected_green=="G#m"||e.selected_green=="Abm")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"245.19267")("y",e.hide?"320":"505.47498"),y(2),E("ngClass",ei(583,_i,e.selected_green=="C#m"||e.selected_green=="Dbm",e.current_score_chord=="C#m"||e.current_score_chord=="Dbm",e.current_midi_chord=="C#m"||e.current_midi_chord=="Dbm")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"310.24832")("cy",e.hide?"320":"450.80945"),y(),E("ngClass",Ae(587,ir,e.selected_green=="C#m"||e.selected_green=="Dbm")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"305.24832")("y",e.hide?"320":"445.80945"),y(2),E("ngClass",ei(589,_i,e.selected_green=="F#m"||e.selected_green=="Gbm",e.current_score_chord=="F#m"||e.current_score_chord=="Gbm",e.current_midi_chord=="F#m"||e.current_midi_chord=="Gbm")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"330.58072")("cy",e.hide?"320":"370.58005"),y(),E("ngClass",Ae(593,ir,e.selected_green=="F#m"||e.selected_green=="Gbm")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"330.58072")("y",e.hide?"320":"365.58005"),y(2),E("ngClass",ei(595,_i,e.selected_green=="Bm",e.current_score_chord=="Bm",e.current_midi_chord=="Bm")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"310.17484")("cy",e.hide?"320":"285.56714"),y(),E("ngClass",Ae(599,ir,e.selected_green=="Bm")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"310.17484")("y",e.hide?"320":"280.56714"),y(2),E("ngClass",ei(601,_i,e.selected_green=="Em",e.current_score_chord=="Em",e.current_midi_chord=="Em")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"250.66835")("cy",e.hide?"320":"225.64746"),y(),E("ngClass",Ae(605,ir,e.selected_green=="Em")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"253.66835")("y",e.hide?"320":"215.64746"),y(3),E("ngClass",ei(607,_i,e.selected_green=="Bo",e.current_score_chord=="Bdim"||e.current_score_chord=="Bdim7"||e.current_score_chord=="Fdim7"||e.current_score_chord=="Ddim7"||e.current_score_chord=="G#dim7"||e.current_score_chord=="Abdim7",e.current_midi_chord=="Bdim"||e.current_midi_chord=="Bdim7"||e.current_midi_chord=="Fdim7"||e.current_midi_chord=="Ddim7"||e.current_midi_chord=="G#dim7"||e.current_midi_chord=="Abdim7")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"170.41632")("cy",e.hide?"320":"243.34468"),y(),E("ngClass",mr(611,zs,e.current_score_chord=="Bo",e.current_midi_chord=="Bo")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"170.41632")("y",e.hide?"320":"243.34468"),y(2),E("ngClass",ei(614,_i,e.selected_green=="Eo",e.current_score_chord=="Edim"||e.current_score_chord=="Edim7"||e.current_score_chord=="A#dim7"||e.current_score_chord=="C#dim7"||e.current_score_chord=="Gdim7"||e.current_score_chord=="Dbdim7"||e.current_score_chord=="Bbdim7",e.current_midi_chord=="Edim"||e.current_midi_chord=="Edim7"||e.current_midi_chord=="A#dim7"||e.current_midi_chord=="C#dim7"||e.current_midi_chord=="Gdim7"||e.current_midi_chord=="Dbdim7"||e.current_midi_chord=="Bbdim7")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"110.00448")("cy",e.hide?"320":"260.70085"),y(),E("ngClass",mr(618,zs,e.current_score_chord=="Eo",e.current_midi_chord=="Eo")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"110.00448")("y",e.hide?"320":"260.70085"),y(2),E("ngClass",ei(621,_i,e.selected_green=="Ao",e.current_score_chord=="Adim"||e.current_score_chord=="Adim7"||e.current_score_chord=="Cdim7"||e.current_score_chord=="Ebdim7"||e.current_score_chord=="Gbdim7",e.current_midi_chord=="Adim"||e.current_midi_chord=="Adim7"||e.current_midi_chord=="Cdim7"||e.current_midi_chord=="Ebdim7"||e.current_midi_chord=="Gbdim7")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"65.500919")("cy",e.hide?"320":"300.64285"),y(),E("ngClass",mr(625,zs,e.current_score_chord=="Ao",e.current_midi_chord=="Ao")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"65.500919")("y",e.hide?"320":"300.64285"),y(2),E("ngClass",ei(628,_i,e.selected_green=="Do",e.current_score_chord=="Ddim"||e.current_score_chord=="Ddim7"||e.current_score_chord=="G#dim7"||e.current_score_chord=="Bdim7"||e.current_score_chord=="Fdim7"||e.current_score_chord=="E#dim7"||e.current_score_chord=="Abdim7",e.current_midi_chord=="Ddim"||e.current_midi_chord=="Ddim7"||e.current_midi_chord=="G#dim7"||e.current_midi_chord=="Bdim7"||e.current_midi_chord=="Fdim7"||e.current_midi_chord=="E#dim7"||e.current_midi_chord=="Abdim7")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"55.585354")("cy",e.hide?"320":"360.73105"),y(),E("ngClass",mr(632,zs,e.current_score_chord=="Do",e.current_midi_chord=="Do")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"55.585354")("y",e.hide?"320":"360.73105"),y(2),E("ngClass",ei(635,_i,e.selected_green=="Go",e.current_score_chord=="Gdim"||e.current_score_chord=="Gdim7"||e.current_score_chord=="A#dim7"||e.current_score_chord=="Bbdim7"||e.current_score_chord=="C#dim7"||e.current_score_chord=="Edim7"||e.current_score_chord=="Dbdim7",e.current_midi_chord=="Gdim"||e.current_midi_chord=="Gdim7"||e.current_midi_chord=="A#dim7"||e.current_midi_chord=="Bbdim7"||e.current_midi_chord=="C#dim7"||e.current_midi_chord=="Edim7"||e.current_midi_chord=="Dbdim7")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"125":"65.601101")("cy",e.hide?"320":"420.13083"),y(),E("ngClass",mr(639,zs,e.current_score_chord=="Go",e.current_midi_chord=="Go")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"125":"65.601101")("y",e.hide?"320":"420.13083"),y(2),E("ngClass",ei(642,_i,e.selected_green=="Co",e.current_score_chord=="Cdim"||e.current_score_chord=="Cdim7"||e.current_score_chord=="Adim7"||e.current_score_chord=="Ebdim7"||e.current_score_chord=="Gbdim7",e.current_midi_chord=="Cdim"||e.current_midi_chord=="Cdim7"||e.current_midi_chord=="Adim7"||e.current_midi_chord=="Ebdim7"||e.current_midi_chord=="Gbdim7")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"110.86298")("cy",e.hide?"320":"465.49033"),y(),E("ngClass",mr(646,zs,e.current_score_chord=="Co",e.current_midi_chord=="Co")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"110.86298")("y",e.hide?"320":"465.49033"),y(2),E("ngClass",ei(649,_i,e.selected_green=="E#o"||e.selected_green=="Fo",e.current_score_chord=="Fdim"||e.current_score_chord=="E#dim"||e.current_score_chord=="Fdim7"||e.current_score_chord=="G#dim7"||e.current_score_chord=="Bdim7"||e.current_score_chord=="Ddim7"||e.current_score_chord=="E#dim7"||e.current_score_chord=="Abdim7",e.current_midi_chord=="Fdim"||e.current_midi_chord=="E#dim"||e.current_midi_chord=="Fdim7"||e.current_midi_chord=="G#dim7"||e.current_midi_chord=="Bdim7"||e.current_midi_chord=="Ddim7"||e.current_midi_chord=="E#dim7"||e.current_midi_chord=="Abdim7")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"160.39803")("cy",e.hide?"320":"475.32037"),y(),E("ngClass",mr(653,zs,e.current_score_chord=="E#o"||e.current_score_chord=="Fo",e.current_midi_chord=="E#o"||e.current_midi_chord=="Fo")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"160.39803")("y",e.hide?"320":"475.32037"),y(2),E("ngClass",ei(656,_i,e.selected_green=="A#o"||e.selected_green=="Bbo",e.current_score_chord=="A#dim"||e.current_score_chord=="Bbdim"||e.current_score_chord=="A#dim7"||e.current_score_chord=="Gdim7"||e.current_score_chord=="Bbdim7"||e.current_score_chord=="C#dim7"||e.current_score_chord=="Edim7"||e.current_score_chord=="Dbdim7",e.current_midi_chord=="A#dim"||e.current_midi_chord=="Bbdim"||e.current_midi_chord=="A#dim7"||e.current_midi_chord=="Gdim7"||e.current_midi_chord=="Bbdim7"||e.current_midi_chord=="C#dim7"||e.current_midi_chord=="Edim7"||e.current_midi_chord=="Dbdim7")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"230.19267")("cy",e.hide?"320":"465.47498"),y(),E("ngClass",mr(660,zs,e.current_score_chord=="A#o",e.current_midi_chord=="A#o"||e.current_midi_chord=="Bbo")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"230.19267")("y",e.hide?"320":"465.47498"),y(2),E("ngClass",ei(663,_i,e.selected_green=="D#o"||e.selected_green=="Ebo",e.current_score_chord=="D#dim"||e.current_score_chord=="Ebdim"||e.current_score_chord=="Cdim7"||e.current_score_chord=="Adim7"||e.current_score_chord=="Ebdim7"||e.current_score_chord=="Gbdim7",e.current_midi_chord=="D#dim"||e.current_midi_chord=="Ebdim"||e.current_midi_chord=="Cdim7"||e.current_midi_chord=="Adim7"||e.current_midi_chord=="Ebdim7"||e.current_midi_chord=="Gbdim7")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"272.24832")("cy",e.hide?"320":"425.80945"),y(),E("ngClass",mr(667,zs,e.current_score_chord=="D#o",e.current_midi_chord=="D#o")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"272.24832")("y",e.hide?"320":"425.80945"),y(2),E("ngClass",ei(670,_i,e.selected_green=="G#o"||e.selected_green=="Abo",e.current_score_chord=="G#dim"||e.current_score_chord=="Abdim"||e.current_score_chord=="Ddim7"||e.current_score_chord=="G#dim7"||e.current_score_chord=="Abdim7"||e.current_score_chord=="Bdim7"||e.current_score_chord=="Fdim7"||e.current_score_chord=="E#dim7",e.current_midi_chord=="G#dim"||e.current_midi_chord=="Abdim"||e.current_midi_chord=="Ddim7"||e.current_midi_chord=="G#dim7"||e.current_midi_chord=="Abdim7"||e.current_midi_chord=="Bdim7"||e.current_midi_chord=="Fdim7"||e.current_midi_chord=="E#dim7")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"285.58072")("cy",e.hide?"320":"365.58005"),y(),E("ngClass",mr(674,zs,e.current_score_chord=="G#o",e.current_midi_chord=="G#o")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"285.58072")("y",e.hide?"320":"365.58005"),y(2),E("ngClass",ei(677,_i,e.selected_green=="C#o"||e.selected_green=="Dbo",e.current_score_chord=="C#dim"||e.current_score_chord=="Dbdim"||e.current_score_chord=="Gdim7"||e.current_score_chord=="A#dim7"||e.current_score_chord=="Bbdim7"||e.current_score_chord=="C#dim7"||e.current_score_chord=="Edim7"||e.current_score_chord=="Dbdim7",e.current_midi_chord=="C#dim"||e.current_midi_chord=="Dbdim"||e.current_midi_chord=="Gdim7"||e.current_midi_chord=="A#dim7"||e.current_midi_chord=="Bbdim7"||e.current_midi_chord=="C#dim7"||e.current_midi_chord=="Edim7"||e.current_midi_chord=="Dbdim7")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"270.17484")("cy",e.hide?"320":"305.56714"),y(),E("ngClass",mr(681,zs,e.current_score_chord=="C#o",e.current_midi_chord=="C#o")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"270.17484")("y",e.hide?"320":"305.56714"),y(2),E("ngClass",ei(684,_i,e.selected_green=="F#o"||e.selected_green=="Gbo",e.current_score_chord=="F#dim"||e.current_score_chord=="Gbdim"||e.current_score_chord=="Cdim7"||e.current_score_chord=="Adim7"||e.current_score_chord=="Ebdim7"||e.current_score_chord=="Gbdim7"||e.current_score_chord=="D#dim7"||e.current_score_chord=="F#dim7",e.current_midi_chord=="F#dim"||e.current_midi_chord=="Gbdim"||e.current_midi_chord=="Cdim7"||e.current_midi_chord=="Adim7"||e.current_midi_chord=="Ebdim7"||e.current_midi_chord=="Gbdim7"||e.current_midi_chord=="D#dim7"||e.current_midi_chord=="F#dim7")),ae("style",e.hide?"display:none;":"display:block;",gt)("cx",e.hide?"130":"230.66835")("cy",e.hide?"320":"260.64746"),y(),E("ngClass",mr(688,zs,e.current_score_chord=="F#o",e.current_midi_chord=="F#o")),ae("style",e.hide?"display:none;":"display:block;",gt),y(),ae("x",e.hide?"130":"230.66835")("y",e.hide?"320":"260.64746"),y(2),ae("style",e.hide?"display:none;":"display:block;",gt),y(7),E("ngClass",Ae(691,bie,!e.hide)),y(),E("hidden",!e.is_locked),y(),Yt(e.score_tonality),y(2),E("hidden",e.is_locked),y(),Yt(e.selected_tonality),y(3),en(" ",e.mode," "))},dependencies:[lr],styles:['@font-face{font-family:nvxChord;src:url("./media/nvxFont.otf")}section#tonality-btn[_ngcontent-%COMP%]{width:200px;height:200px;display:flex;justify-content:center;align-items:center}section#tonality-btn[_ngcontent-%COMP%]   .back-circle[_ngcontent-%COMP%]{fill:#b4b4b4;stroke:#000;stroke-width:8px}section#tonality-btn[_ngcontent-%COMP%]   .back-circle-maj[_ngcontent-%COMP%]{fill:#ccc;stroke:#000;stroke-width:5px}section#tonality-btn[_ngcontent-%COMP%]   .back-circle-min[_ngcontent-%COMP%]{fill:#dedede;stroke:#000;stroke-width:4px}section#tonality-btn[_ngcontent-%COMP%]   .back-circle-dim[_ngcontent-%COMP%]{fill:#ebebeb;stroke:#000;stroke-width:3px}section#tonality-btn[_ngcontent-%COMP%]   .tona-buttons[_ngcontent-%COMP%]{position:absolute;height:20px;width:20px}section#tonality-btn[_ngcontent-%COMP%]   .main-button[_ngcontent-%COMP%]{background-color:#ffffff85;width:100px;height:100px;display:flex;border-radius:100px;justify-content:center;align-items:center;font-size:3em;z-index:9999;filter:drop-shadow(0px 20px 10px #000);-webkit-filter:drop-shadow(0px 20px 10px #000);opacity:1;cursor:pointer;border:2px solid;font:inherit;line-height:1;margin:.5em;position:relative}section#tonality-btn[_ngcontent-%COMP%]   .main-button[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{position:absolute;bottom:10px;font-size:10px;margin:auto;color:var(--blue_nvx);font-family:Arial,Helvetica,sans-serif}section#tonality-btn[_ngcontent-%COMP%]   .main-button[_ngcontent-%COMP%]:hover, section#tonality-btn[_ngcontent-%COMP%]   .main-button.bg-opacity[_ngcontent-%COMP%]{background-color:#fff;transform:translate(-102px,-121px)}section#tonality-btn[_ngcontent-%COMP%]   .main-button.pulse[_ngcontent-%COMP%]:active, section#tonality-btn[_ngcontent-%COMP%]   .main-button.pulse[_ngcontent-%COMP%]:focus{animation:_ngcontent-%COMP%_pulse .25s;box-shadow:0 0 0 2em #fff0}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 0 0 var(--active)}}.pulse[_ngcontent-%COMP%]{--color: #ffffff;--active: white}section#tonality-btn[_ngcontent-%COMP%]   .main-button[_ngcontent-%COMP%]{color:var(--color);transition:.2s}section#tonality-btn[_ngcontent-%COMP%]   .main-button[_ngcontent-%COMP%]:active, section#tonality-btn[_ngcontent-%COMP%]   .main-button[_ngcontent-%COMP%]:focus{border-color:var(--active);color:#fff}section#tonality-btn[_ngcontent-%COMP%]   .c-obj[_ngcontent-%COMP%]{position:absolute}section#tonality-btn[_ngcontent-%COMP%]   .centerText[_ngcontent-%COMP%]{position:relative;width:30%;left:49%;top:37%}section#tonality-btn[_ngcontent-%COMP%]   #major[_ngcontent-%COMP%], section#tonality-btn[_ngcontent-%COMP%]   #minor[_ngcontent-%COMP%]{cursor:pointer}section#tonality-btn[_ngcontent-%COMP%]   #roman[_ngcontent-%COMP%], section#tonality-btn[_ngcontent-%COMP%]   #dim[_ngcontent-%COMP%]{cursor:default}section#tonality-btn[_ngcontent-%COMP%]   .active-tonality[_ngcontent-%COMP%]{fill:#0023ff;stroke:#0023ff}section#tonality-btn[_ngcontent-%COMP%]   .dot.active-chord[_ngcontent-%COMP%]{fill:var(--lightblue_nvx);filter:drop-shadow(2px 4px 3px #0023ff) blur(6px) brightness(1.2);-webkit-filter:drop-shadow(2px 4px 3px #0023ff) blur(6px) brightness(1.2);stroke:#354ad2;stroke-width:10px}section#tonality-btn[_ngcontent-%COMP%]   .dot.active-midi-chord[_ngcontent-%COMP%]{fill:var(--yellow_nvx);filter:drop-shadow(2px 4px 3px #adab28) blur(6px) brightness(1.2);-webkit-filter:drop-shadow(2px 4px 3px #adab28) blur(6px) brightness(1.2);stroke:#adab28;stroke-width:10px}section#tonality-btn[_ngcontent-%COMP%]   .dot.active-chord.active-midi-chord[_ngcontent-%COMP%]{fill:var(--yellow_nvx);filter:drop-shadow(2px 4px 6px #ffb200) blur(2px) brightness(1);-webkit-filter:drop-shadow(2px 4px 6px #ffb200) blur(2px) brightness(1);stroke:#ffe100;stroke-width:10px}section#tonality-btn[_ngcontent-%COMP%]   .diminished.active-chord.active-midi-chord[_ngcontent-%COMP%], section#tonality-btn[_ngcontent-%COMP%]   .diminished.active-midi-chord[_ngcontent-%COMP%], section#tonality-btn[_ngcontent-%COMP%]   .diminished.active-chord[_ngcontent-%COMP%]{stroke-width:11px}section#tonality-btn[_ngcontent-%COMP%]   .roman.active-chord.active-midi-chord[_ngcontent-%COMP%], section#tonality-btn[_ngcontent-%COMP%]   .roman.active-midi-chord[_ngcontent-%COMP%], section#tonality-btn[_ngcontent-%COMP%]   .roman.active-chord[_ngcontent-%COMP%]{stroke-width:8px}section#tonality-btn[_ngcontent-%COMP%]{font-family:nvxChord;font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;letter-spacing:0px;line-height:0%;stroke-width:1px;word-spacing:0px}section#tonality-btn[_ngcontent-%COMP%]   .diminished[_ngcontent-%COMP%]{font-size:35px}section#tonality-btn[_ngcontent-%COMP%]   .diminished.double[_ngcontent-%COMP%]{font-size:25px}section#tonality-btn[_ngcontent-%COMP%]   .roman[_ngcontent-%COMP%]{font-size:25px}section#tonality-btn[_ngcontent-%COMP%]   .fifths[_ngcontent-%COMP%]{font-size:50px}section#tonality-btn[_ngcontent-%COMP%]   .fifths-m.double[_ngcontent-%COMP%]{transform:scale(.75) translate(42px,180px)}section#tonality-btn[_ngcontent-%COMP%]   .fifths-m[_ngcontent-%COMP%]{font-size:40px;line-height:1.25}section#tonality-btn[_ngcontent-%COMP%]   .tonality-letter[_ngcontent-%COMP%]{font-size:35px;font-family:nvxChord;line-height:1.2em;color:var(--blue_nvx);display:flex;padding-top:5px}section#tonality-btn[_ngcontent-%COMP%]   .tonality-letter[_ngcontent-%COMP%]::selection{background-color:transparent!important}section#tonality-btn[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{font-size:15px;vertical-align:super}section#tonality-btn[_ngcontent-%COMP%]   .slices[_ngcontent-%COMP%]{transform:scale(7.85) translate(-65.5px,-102px)}section#tonality-btn[_ngcontent-%COMP%]   .slices[_ngcontent-%COMP%]   .cut[_ngcontent-%COMP%]{fill:none;stroke:#000;stroke-width:.16500001;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1}section#tonality-btn[_ngcontent-%COMP%]   .selection_background[_ngcontent-%COMP%]{opacity:0;paint-order:markers fill stroke;stroke-linecap:round;stroke-linejoin:round;stroke-width:3;stroke-opacity:.8}section#tonality-btn[_ngcontent-%COMP%]   .selection_background.active[_ngcontent-%COMP%]{fill:var(--green_nvx);stroke:var(--green_nvx);opacity:.85;filter:drop-shadow(0px 0px 6px var(--green_nvx));-webkit-filter:drop-shadow(0px 0px 6px var(--green_nvx))}section#tonality-btn[_ngcontent-%COMP%]   .selection_background.side-active[_ngcontent-%COMP%]{fill:var(--green_nvx);stroke:var(--green_nvx);opacity:.65;filter:drop-shadow(0px 0px 6px var(--green_nvx));-webkit-filter:drop-shadow(0px 0px 6px var(--green_nvx))}section#tonality-btn[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{fill:transparent;transform:translate(18px,-19px);stroke:none}section#tonality-btn[_ngcontent-%COMP%]   .dot.d[_ngcontent-%COMP%]{transform:translate(15px,-11px)}']})}}return TonalityButtonComponent})();var jn={empty:{center_blues:[],center_major:[],center_minor:[],left_up:[],left_down:[],outer_left_up:[],outer_left_down:[],right_up:[],right_down:[],outer_right_up:[],outer_right_down:[]},roman:{center_major:["#V","#I","#IV","VII","III","VI","II","V","I","IV","bVII","bIII","bVI","bII","bV","bI","bIV"],center_minor_tonal:["#V","#I","#IV","VII","III","VI","II","V","I","IV","bVII","bIII","bVI","bII","#III","#VI","#II"],center_minor:["bI","bIV","VI","II","V","I","IV","bVII","bIII","bVI","bII","bV","VII","III","bbVII","bbIII","bbVI"],left_up:["VII","III","VI","II","V","I","IV","bVII","bIII","bVI","bII","bV","#V","#I","#IV"],left_down:["#ii","#v","#i","#iv","vii","iii","vi","ii","v","i","iv","vii","#vii","#iii","#vi"],outer_left_up:["#IV","VII","III","VI","II","V","I","IV","bVII","bIII","bVI","bII","#II","#V","#I"],outer_left_down:["#vi","#ii","#v","#i","#iv","vii","iii","vi","ii","v","i","iv","##iv","#vii","#iii"],right_up:["#V","#I","#IV","VII","III","VI","II","V","I","IV","bVII","bIII","","#III","#VI","#II"],right_down:["vii#","iii#","#vi","#ii","#v","#i","#iv","vii","iii","vi","ii","v","##v","##i","##iv"],outer_right_up:["#II","#V","#I","#IV","VII","III","VI","II","V","I","IV","bVII","#VII","#III","#VI"],outer_right_down:["##iv","#vii","#iii","#i","#ii","#v","#i","#iv","vii","iii","vi","ii","##ii","##v","##i"]},D:{center_major:["Bb","Eb","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb"],center_minor:["G","C","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb"],left_up:["Bb","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab"],left_down:["D","F##","B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C"],outer_left_up:["F","Bb","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb"],outer_left_down:["A","D","F##","B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G"],right_up:["G","B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F"],right_down:["B","D##","G##","C##","F##","B#","E#","A#","D#","G#","C#","F#","B","E","A#"],outer_right_up:["D","G","B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C"],outer_right_down:["F#","B","D##","G##","C##","F##","B#","E#","C#","D#","G#","C#","F#","B","E"]},A:{center_major:["F","Bb","Eb","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db"],center_minor:["D","G","C","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb"],left_up:["F","Bb","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb"],left_down:["A","D","F##","B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G"],outer_left_up:["C","F","Bb","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb"],outer_left_down:["E","A","D","F##","B#","E#","A#","D#","G#","C#","F#","B","E","A","D"],right_up:["D","G","B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C"],right_down:["F#","B","D##","G##","C##","F##","B#","E#","A#","D#","G#","C#","F#","B","E"],outer_right_up:["A","D","G","B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G"],outer_right_down:["C#","F#","B","D##","G##","C##","F##","B#","E#","C#","D#","G#","C#","F#","B"]},Ab:{center_major:["E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","A","D","G","C"],center_minor:["C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","F#","B","E","A"],left_up:["E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb","Cb","E","A","D"],left_down:["G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","G#","C#","F#"],outer_left_up:["B","E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb","B","E","A"],outer_left_down:["D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","D#","G#","C#"],right_up:["C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","C#","F#","B"],right_down:["E#","A#","D#","G#","C#","F#","B","E","A#","D","G","C","E#","A#","D#"],outer_right_up:["G#","C#","F#","B","E","A","D","G","C","F","Bb","Ebb","G#","C#","F#"],outer_right_down:["B#","E#","C#","D#","G#","C#","F#","B","E","A#","D","G","B#","E#","C#"]},B:{center_major:["G","C","F","Bb","Eb","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb"],center_minor:["E","A","D","G","C","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C"],left_up:["G","C","F","Bb","D#","G#","C#","F#","B","E","A","D","G","C","F"],left_down:["B","E","A","D","F##","B#","E#","A#","D#","G#","C#","F#","B","E","A"],outer_left_up:["D","G","C","F","Bb","D#","G#","C#","F#","B","E","A","D","G","C"],outer_left_down:["F#","B","E","A","D","F##","B#","E#","A#","D#","G#","C#","F#","B","E"],right_up:["E","A","D","G","B#","E#","A#","D#","G#","C#","F#","B","E","A","D"],right_down:["G#","C#","F#","B","D##","G##","C##","F##","B#","E#","A#","D#","G#","C#","F#"],outer_right_up:["B","E","A","D","G","B#","E#","A#","D#","G#","C#","F#","B","E","A"],outer_right_down:["D#","G#","C#","F#","B","D##","G##","C##","F##","B#","E#","C#","D#","G#","C#"]},Bb:{center_major:["F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","A","D"],center_minor:["D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","F#","B"],left_up:["F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb","Cb","E"],left_down:["A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","G#"],outer_left_up:["C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb","B"],outer_left_down:["E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","D#"],right_up:["D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","C#"],right_down:["F##","B#","E#","A#","D#","G#","C#","F#","B","E","A#","D","G","C","E#"],outer_right_up:["A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Ebb","G#"],outer_right_down:["C##","F##","B#","E#","C#","D#","G#","C#","F#","B","E","A#","D","G","B#"]},C:{center_major:["G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb"],center_minor:["E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db"],left_up:["G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb"],left_down:["B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb"],outer_left_up:["D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db"],outer_left_down:["F##","B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F"],right_up:["E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb"],right_down:["G##","C##","F##","B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G"],outer_right_up:["B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb"],outer_right_down:["D##","G##","C##","F##","B#","E#","C#","D#","G#","C#","F#","B","E","A","D"]},"C#":{center_major:["A","D","G","C","F","Bb","Eb","G#","C#","F#","B","E","A","D","G","C","F"],center_minor:["F#","B","E","A","D","G","C","E#","A#","D#","G#","C#","F#","B","E","A","D"],left_up:["A","D","G","C","F","Bb","D#","G#","C#","F#","B","E","A","D","G"],left_down:["C#","F#","B","E","A","D","F##","B#","E#","A#","D#","G#","C#","F#","B"],outer_left_up:["E","A","D","G","C","F","Bb","D#","G#","C#","F#","B","E","A","D"],outer_left_down:["G#","C#","F#","B","E","A","D","F##","B#","E#","A#","D#","G#","C#","F#"],right_up:["F#","B","E","A","D","G","B#","E#","A#","D#","G#","C#","F#","B","E"],right_down:["A#","D#","G#","C#","F#","B","D##","G##","C##","F##","B#","E#","A#","D#","G#"],outer_right_up:["C#","F#","B","E","A","D","G","B#","E#","A#","D#","G#","C#","F#","B"],outer_right_down:["E#","C#","D#","G#","C#","F#","B","D##","G##","C##","F##","B#","E#","C#","D#"]},Cb:{center_major:["G","C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","A","D","G","C","F","Bb","Eb"],center_minor:["E","A","D","G","C","F","Bb","Eb","Ab","Db","F#","B","E","A","D","G","C"],left_up:["G","C","F","Bb","Eb","Ab","Db","Gb","Cb","E","A","D","G","C","F"],left_down:["B","E","A","D","G","C","F","Bb","Eb","G#","C#","F#","B","E","A"],outer_left_up:["D","G","C","F","Bb","Eb","Ab","Db","Gb","B","E","A","D","G","C"],outer_left_down:["F#","B","E","A","D","G","C","F","Bb","D#","G#","C#","F#","B","E"],right_up:["E","A","D","G","C","F","Bb","Eb","Ab","C#","F#","B","E","A","D"],right_down:["G#","C#","F#","B","E","A#","D","G","C","E#","A#","D#","G#","C#","F#"],outer_right_up:["B","E","A","D","G","C","F","Bb","Ebb","G#","C#","F#","B","E","A"],outer_right_down:["D#","G#","C#","F#","B","E","A#","D","G","B#","E#","C#","D#","G#","C#"]},Db:{center_major:["A","D","G","C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","A","D","G","C","F"],center_minor:["F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","F#","B","E","A","D"],left_up:["A","D","G","C","F","Bb","Eb","Ab","Db","Gb","Cb","E","A","D","G"],left_down:["C#","F#","B","E","A","D","G","C","F","Bb","Eb","G#","C#","F#","B"],outer_left_up:["E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb","B","E","A","D"],outer_left_down:["G#","C#","F#","B","E","A","D","G","C","F","Bb","D#","G#","C#","F#"],right_up:["F#","B","E","A","D","G","C","F","Bb","Eb","Ab","C#","F#","B","E"],right_down:["A#","D#","G#","C#","F#","B","E","A#","D","G","C","E#","A#","D#","G#"],outer_right_up:["C#","F#","B","E","A","D","G","C","F","Bb","Ebb","G#","C#","F#","B"],outer_right_down:["E#","C#","D#","G#","C#","F#","B","E","A#","D","G","B#","E#","C#","D#"]},E:{center_major:["C","F","Bb","Eb","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab"],center_minor:["A","D","G","C","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F"],left_up:["C","F","Bb","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb"],left_down:["E","A","D","F##","B#","E#","A#","D#","G#","C#","F#","B","E","A","D"],outer_left_up:["G","C","F","Bb","D#","G#","C#","F#","B","E","A","D","G","C","F"],outer_left_down:["B","E","A","D","F##","B#","E#","A#","D#","G#","C#","F#","B","E","A"],right_up:["A","D","G","B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G"],right_down:["C#","F#","B","D##","G##","C##","F##","B#","E#","A#","D#","G#","C#","F#","B"],outer_right_up:["E","A","D","G","B#","E#","A#","D#","G#","C#","F#","B","E","A","D"],outer_right_down:["G#","C#","F#","B","D##","G##","C##","F##","B#","E#","C#","D#","G#","C#","F#"]},Eb:{center_major:["B","E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","A","D","G"],center_minor:["G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","F#","B","E"],left_up:["B","E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb","Cb","E","A"],left_down:["D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","G#","C#"],outer_left_up:["F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb","B","E"],outer_left_down:["A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","D#","G#"],right_up:["G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","C#","F#"],right_down:["B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","E#","A#"],outer_right_up:["D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Ebb","G#","C#"],outer_right_down:["F##","B#","E#","C#","D#","G#","C#","F#","B","E","A#","D","G","B#","E#"]},F:{center_major:["C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","A"],center_minor:["A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","F#"],left_up:["C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb","Cb"],left_down:["E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb"],outer_left_up:["G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb"],outer_left_down:["B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb"],right_up:["A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab"],right_down:["C##","F##","B#","E#","A#","D#","G#","C#","F#","B","E","A#","D","G","C"],outer_right_up:["E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Ebb"],outer_right_down:["G##","C##","F##","B#","E#","C#","D#","G#","C#","F#","B","E","A#","D","G"]},"F#":{center_major:["D","G","C","F","Bb","Eb","G#","C#","F#","B","E","A","D","G","C","F","Bb"],center_minor:["B","E","A","D","G","C","E#","A#","D#","G#","C#","F#","B","E","A","D","G"],left_up:["D","G","C","F","Bb","D#","G#","C#","F#","B","E","A","D","G","C"],left_down:["F#","B","E","A","D","F##","B#","E#","A#","D#","G#","C#","F#","B","E"],outer_left_up:["A","D","G","C","F","Bb","D#","G#","C#","F#","B","E","A","D","G"],outer_left_down:["C#","F#","B","E","A","D","F##","B#","E#","A#","D#","G#","C#","F#","B"],right_up:["B","E","A","D","G","B#","E#","A#","D#","G#","C#","F#","B","E","A"],right_down:["D#","G#","C#","F#","B","D##","G##","C##","F##","B#","E#","A#","D#","G#","C#"],outer_right_up:["F#","B","E","A","D","G","B#","E#","A#","D#","G#","C#","F#","B","E"],outer_right_down:["C#","D#","G#","C#","F#","B","D##","G##","C##","F##","B#","E#","C#","D#","G#"]},G:{center_major:["Eb","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db","Gb","Cb"],center_minor:["C","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab"],left_up:["D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab","Db"],left_down:["F##","B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F"],outer_left_up:["Bb","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb","Eb","Ab"],outer_left_down:["D","F##","B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C"],right_up:["B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F","Bb"],right_down:["D##","G##","C##","F##","B#","E#","A#","D#","G#","C#","F#","B","E","A#","D"],outer_right_up:["G","B#","E#","A#","D#","G#","C#","F#","B","E","A","D","G","C","F"],outer_right_down:["B","D##","G##","C##","F##","B#","E#","C#","D#","G#","C#","F#","B","E","A#"]},Gb:{center_major:["D","G","C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","A","D","G","C","F","Bb"],center_minor:["B","E","A","D","G","C","F","Bb","Eb","Ab","Db","F#","B","E","A","D","G"],left_up:["D","G","C","F","Bb","Eb","Ab","Db","Gb","Cb","E","A","D","G","C"],left_down:["F#","B","E","A","D","G","C","F","Bb","Eb","G#","C#","F#","B","E"],outer_left_up:["A","D","G","C","F","Bb","Eb","Ab","Db","Gb","B","E","A","D","G"],outer_left_down:["C#","F#","B","E","A","D","G","C","F","Bb","D#","G#","C#","F#","B"],right_up:["B","E","A","D","G","C","F","Bb","Eb","Ab","C#","F#","B","E","A"],right_down:["D#","G#","C#","F#","B","E","A#","D","G","C","E#","A#","D#","G#","C#"],outer_right_up:["F#","B","E","A","D","G","C","F","Bb","Ebb","G#","C#","F#","B","E"],outer_right_down:["C#","D#","G#","C#","F#","B","E","A#","D","G","B#","E#","C#","D#","G#"]}};var Y1={m7b5:",mb5b7",m9:",mb79","7b5":",b7b5",m13:",mb7913",M:"",m6:",m6",Maj7:",&",maj7:",&",m11:",mb7911",dim:",o","7":",b7",aug:",+",dim7:",obb7",maj9:",&9","9":",b79",m:",m",mmaj7:",m&",m7:",mb7","13":",b7913","11":",b7911",german:",obb3bb7",m69:",m69","m6/9":",m69","6/9":"69","5":"5","M7#5sus4":"&%4","7#5sus4":"b7%4",sus4:"4",M7sus4:"&4","7sus4":"b74","7no5":"b7no5",M7b6:"&b6","maj7#5":",&%","7#5":"b7%","7b13":"b7b13","6":"6","7add6":"b76","7b6":"b7b6",Mb5:"b5",M7b5:"&b5","maj#4":",#4","7#11":"b7#11","M6#11":"6#11","7#11b13":"b7#11b13","m#5":"m%",mb6M7:"m&6","m7#5":"mb7%",mMaj7b6:"m&b6",oM7:"o&",o7M7:"","4":"4",madd4:"m4",m7add11:"mb711","+add#9":"+#9","7#5#9":",b7%#9","7#9":",b7#9","13#9":"13#9","7#9b13":"b7#9b13","maj7#9#11":"&#9#11","7#9#11":"b7#9#11","13#9#11":"13#9#11","7#9#11b13":"b7#9#11b13",sus2:"2","M9#5sus4":"&94",sus24:"24",M9sus4:"&94","9sus4":"b794","13sus4":"b79134","9no5":"9no5","13no5":"b7913no5","M#5add9":"%9","maj9#5":"&9%","9#5":"b79%","9b13":"b79b13",Madd9:"9",maj13:"&913",M7add13:"&13",M9b5:"&9b5","9b5":"b79b5","13b5":"b7913b5","9#5#11":"b79%#11","maj9#11":"&9#11","9#11":"b79#11","69#11":"69#11","M13#11":"&9#1113","13#11":"#1113","9#11b13":"9#11b13","m9#5":"mb79%",madd9:"m9",mM9:"m&9",mMaj9b6:"m&9b6",m9b5:"mb79b5",m11A:"",b9sus:"b7b94","11b9":"b911","7sus4b9b13":"4b7b9b13",alt7:"b7%","7#5b9":"b7%b9",Maddb9:"b9",M7b9:"&b9","7b9":"b7b9","13b9":"b7b913","7b9b13":"b7b9b13","7#5b9#11":"%b7b9#11","7b9#11":"b7b9#11","13b9#11":"b7b9#1113","7b9b13#11":"b7b9#1113",mb6b9:"mb6b9","7b9#9":"b7b9#9"};function Mie(t,n){if(t&1&&(ft(),ie(0,"use",222)),t&2){let e=ge().index,i=ge();ae("class",(i.tonality_focused==i.center_left[e]||i.tonality_focused==i.center_right[e]+"m")&&!i.roman_mode_engaged||i.roman_mode_engaged&&i.roman_mode==i.center_modes[e]?"greenCircle active":"greenCircle")}}function Sie(t,n){if(t&1&&(ft(),p(0,"g"),Wt(1,Mie,1,1,"use",221),m()),t&2){let e=n.index,i=ge();cn("display",!i.si.braid_param_emph_one_tona||i.si.braid_param_emph_one_tona&&i.is_cur_tona(e)?"block":"none"),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"tona erase":"tona")("transform","translate(0 "+(e+1)*90+")")("id","whole_tona_background_"+e),y(),E("ngIf",e!=0&&e!=i.center_left_in_use.length-1)}}function Pie(t,n){if(t&1&&(ft(),ie(0,"use",231)),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona||i.si.braid_param_emph_one_tona&&(i.is_prev_tona(e)||i.is_cur_tona(e))?"block":"none"),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"rect-arrow erase":"rect-arrow")("id","rectV_"+e)}}function kie(t,n){if(t&1&&(ft(),ie(0,"use",232)),t&2){let e=ge(2);ae("class",e.si.braid_param_emph_score_chords||e.si.braid_param_emph_diatonic_scale?"rect-arrow erase":"rect-arrow")}}function Eie(t,n){if(t&1&&(ft(),ie(0,"use",233)),t&2){let e=ge(2);ae("class",e.si.braid_param_emph_score_chords||e.si.braid_param_emph_diatonic_scale?"rect-arrow erase":"rect-arrow")}}function Tie(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",234),m()),t&2){let e=ge().index,i=ge();ae("id","arrowsR_T_"+e)("class",i.get_arrow_class(i.right_up[e-1],i.chord_type.right.up,i.right_down[e-1],i.chord_type.right.down,i.center_left[e],i.chord_type.center.left,i.center_right[e],i.chord_type.center.right)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase":"arrows-2")}}function Aie(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",235),m()),t&2){let e=ge().index,i=ge();ae("id","arrowsL_T_"+e)("class",i.get_arrow_class(i.left_up[e-1],i.chord_type.left.up,i.left_down[e-1],i.chord_type.left.down,i.center_left[e],i.chord_type.center.left,i.center_right[e],i.chord_type.center.right)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase":"arrows-2")}}function Die(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",236),m()),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona||i.si.braid_param_emph_one_tona&&(i.is_prev_tona(e)||i.is_cur_tona(e))?"block":"none"),ae("id","arrows_T_"+e)("class",i.get_arrow_class(i.center_left[e],i.chord_type.center.left,i.center_right[e],i.chord_type.center.right,i.center_left[e+1],i.chord_type.center.left,i.center_right[e+1],i.chord_type.center.right)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase":"arrows-2")}}function Iie(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",237),m()),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona||i.si.braid_param_emph_one_tona&&(i.is_prev_tona(e)||i.is_cur_tona(e))?"block":"none"),ae("id","arrowsMidL_T_"+e)("class",i.get_arrow_class(i.left_up[e-1],i.chord_type.left.up,i.left_down[e-1],i.chord_type.left.down,i.left_up[e],i.chord_type.left.up,i.left_down[e],i.chord_type.left.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase":"arrows-2")}}function Oie(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",238),m()),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona||i.si.braid_param_emph_one_tona&&(i.is_prev_tona(e)||i.is_cur_tona(e))?"block":"none"),ae("id","arrowsMidR_T_"+e)("class",i.get_arrow_class(i.right_up[e-1],i.chord_type.right.up,i.right_down[e-1],i.chord_type.right.down,i.right_up[e],i.chord_type.right.up,i.right_down[e],i.chord_type.right.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase":"arrows-2")}}function Fie(t,n){if(t&1&&(ft(),p(0,"g",239),ie(1,"use",240),m()),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid||i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid&&i.is_cur_tona(e)?"block":"none"),ae("id","arrowsExtRL_T_"+e)("class",i.get_arrow_class(i.fifth_left_up[e-1],i.chord_type.fifth_left.up,i.fifth_left_down[e-1],i.chord_type.fifth_left.down,i.left_up[e-1],i.chord_type.left.up,i.left_down[e-1],i.chord_type.left.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase arrows-ext":"arrows-2 arrows-ext")}}function Bie(t,n){if(t&1&&(ft(),p(0,"g",241),ie(1,"use",242),m()),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid||i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid&&i.is_cur_tona(e)?"block":"none"),ae("id","arrowsExtLR_T_"+e)("class",i.get_arrow_class(i.fifth_right_up[e-1],i.chord_type.fifth_right.up,i.fifth_right_down[e-1],i.chord_type.fifth_right.down,i.right_up[e-1],i.chord_type.right.up,i.right_down[e-1],i.chord_type.right.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase arrows-ext":"arrows-2 arrows-ext")}}function Lie(t,n){if(t&1&&(ft(),p(0,"g",239),ie(1,"use",243),m()),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid||i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid&&(i.is_cur_tona(e)||i.is_prev_tona(e))?"block":"none"),ae("id","arrowsExtRR_T_"+e)("class",i.get_arrow_class(i.right_up[e-1],i.chord_type.right.up,i.right_down[e-1],i.chord_type.right.down,i.fifth_right_up[e],i.chord_type.fifth_right.up,i.fifth_right_down[e],i.chord_type.fifth_right.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase arrows-ext":"arrows-2 arrows-ext")}}function Nie(t,n){if(t&1&&(ft(),p(0,"g",241),ie(1,"use",244),m()),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid||i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid&&(i.is_prev_tona(e)||i.is_cur_tona(e))?"block":"none"),ae("id","arrowsExtLL_T_"+e)("class",i.get_arrow_class(i.left_up[e-1],i.chord_type.left.up,i.left_down[e-1],i.chord_type.left.down,i.fifth_left_up[e],i.chord_type.fifth_left.up,i.fifth_left_down[e],i.chord_type.fifth_left.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase arrows-ext":"arrows-2 arrows-ext")}}function Vie(t,n){if(t&1&&(ft(),p(0,"g",223),Wt(1,Pie,1,4,"use",224)(2,kie,1,1,"use",225)(3,Eie,1,1,"use",226)(4,Tie,2,3,"g",227)(5,Aie,2,3,"g",227)(6,Die,2,5,"g",228)(7,Iie,2,5,"g",228)(8,Oie,2,5,"g",228)(9,Fie,2,5,"g",229)(10,Bie,2,5,"g",230)(11,Lie,2,5,"g",229)(12,Nie,2,5,"g",230),m()),t&2){let e=n.index,i=ge();cn("display",!i.si.braid_param_emph_one_tona||i.si.braid_param_emph_one_tona&&(i.is_prev_tona(e)||i.is_cur_tona(e)||i.is_next_tona(e))?"block":"none"),ae("transform","translate(0 "+(e+1)*90+")")("id","whole_tona_intermediate_"+e),y(),E("ngIf",e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e!=i.center_left.length-1),y(),E("ngIf",e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e<i.center_left.length-2),y(),E("ngIf",e!=0&&e<i.center_left.length-2),y(),E("ngIf",e!=0&&e<i.center_left.length-1),y(),E("ngIf",e!=0&&e<i.center_left.length-1),y(),E("ngIf",e!=0&&e<i.center_left.length-2),y(),E("ngIf",e!=0&&e<i.center_left.length-2)}}function Rie(t,n){if(t&1&&(ft(),p(0,"text",256),P(1),m()),t&2){let e=ge().index,i=ge();y(),Tn("",i.center_right_in_use[e],"",i.Translate[i.chord_type.center.right])}}function jie(t,n){if(t&1&&(ft(),p(0,"text",257),P(1),m()),t&2){let e=ge().index,i=ge();y(),Yt(i.center_right_in_use[e].toLowerCase())}}function Gie(t,n){if(t&1){let e=mn();ft(),p(0,"g",258)(1,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(2,"use",259),p(3,"text",260),P(4),m()(),p(5,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(6,"use",261),p(7,"text",262),P(8),m()()()}if(t&2){let e=ge().index,i=ge();y(),ae("id","left_bubble_up_T_"+e),y(),ae("class",i.get_bubble_class(i.left_up[e-1],i.chord_type.left.up)),y(),ae("class",i.display_as_roman?"duo roman":"duo"),y(),Tn("",i.left_up_in_use[e-1],"",i.Translate[i.chord_type.left.up]),y(),ae("id","left_bubble_down_T_"+e),y(),ae("class",i.get_bubble_class(i.left_down[e-1],i.chord_type.left.down)),y(),ae("class",i.display_as_roman?"duo roman":"duo"),y(),Tn("",i.left_down_in_use[e-1],"",i.Translate[i.chord_type.left.down])}}function Wie(t,n){if(t&1){let e=mn();ft(),p(0,"g",263)(1,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(2,"use",259),p(3,"text",264),P(4),m()(),p(5,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(6,"use",261),p(7,"text",265),P(8),m()()()}if(t&2){let e=ge().index,i=ge();y(),ae("id","right_bubble_up_T_"+e),y(),ae("class",i.get_bubble_class(i.right_up[e-1],i.chord_type.right.up)),y(),ae("class",i.display_as_roman?"duo roman":"duo")("x",i.display_as_roman?"-22":"-20"),y(),Tn("",i.right_up_in_use[e-1],"",i.Translate[i.chord_type.right.up]),y(),ae("id","right_bubble_down_T_"+e),y(),ae("class",i.get_bubble_class(i.right_down[e-1],i.chord_type.right.down)),y(),ae("class",i.display_as_roman?"duo roman":"duo"),y(),Tn("",i.right_down_in_use[e-1],"",i.Translate[i.chord_type.right.down])}}function zie(t,n){if(t&1){let e=mn();ft(),p(0,"g",266)(1,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(2,"use",267),p(3,"text",268),P(4),m()(),p(5,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(6,"use",269),p(7,"text",270),P(8),m()()()}if(t&2){let e=ge().index,i=ge();cn("display",i.si.braid_param_simplified_braid||i.si.braid_param_emph_one_tona&&i.is_next_tona(e)&&!i.is_cur_tona(e)?"none":"block"),ae("id","outer_T_"+e),y(),ae("id","fifth_left_bubble_up_T_"+e),y(),ae("class",i.get_bubble_class(i.fifth_left_up[e],i.chord_type.fifth_left.up)),y(),ae("class",i.display_as_roman?"duo roman":"duo"),y(),Tn("",i.fifth_left_up_in_use[e],"",i.Translate[i.chord_type.fifth_left.up]),y(),ae("id","fifth_left_bubble_down_T_"+e),y(),ae("class",i.get_bubble_class(i.fifth_left_down[e],i.chord_type.fifth_left.down)),y(),ae("class",i.display_as_roman?"duo roman":"duo")("x",i.display_as_roman?"-5":"-3"),y(),Tn("",i.fifth_left_down_in_use[e],"",i.Translate[i.chord_type.fifth_left.down])}}function Uie(t,n){if(t&1){let e=mn();ft(),p(0,"g",271)(1,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(2,"use",267),p(3,"text",264),P(4),m()(),p(5,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(6,"use",269),p(7,"text",272),P(8),m()()()}if(t&2){let e=ge().index,i=ge();cn("display",i.si.braid_param_simplified_braid||i.si.braid_param_emph_one_tona&&i.is_next_tona(e)&&!i.is_cur_tona(e)?"none":"block"),y(),ae("id","fifth_right_bubble_up_T_"+e),y(),ae("class",i.get_bubble_class(i.fifth_right_up[e],i.chord_type.fifth_right.up)),y(),ae("class",i.display_as_roman?"duo roman":"duo")("x",i.display_as_roman?"-25":"-22"),y(),Tn("",i.fifth_right_up_in_use[e],"",i.Translate[i.chord_type.fifth_right.up]),y(),ae("id","fifth_right_bubble_down_T_"+e),y(),ae("class",i.get_bubble_class(i.fifth_right_down[e],i.chord_type.fifth_right.down)),y(),ae("class",i.display_as_roman?"duo roman":"duo")("x",i.display_as_roman?"-5":"-2"),y(),Tn("",i.fifth_right_down_in_use[e],"",i.Translate[i.chord_type.fifth_right.down])}}function qie(t,n){if(t&1){let e=mn();ft(),p(0,"g",223)(1,"g",245)(2,"g",246),J("click",function(r){pe(e);let s=ge();return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge();return fe(s.hoverMeNot(r))}),ie(3,"use",247),p(4,"text",248),P(5),m()(),p(6,"g",246),J("click",function(r){pe(e);let s=ge();return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge();return fe(s.hoverMeNot(r))}),ie(7,"use",249),Wt(8,Rie,2,2,"text",250)(9,jie,2,1,"text",251),m()(),Wt(10,Gie,9,10,"g",252)(11,Wie,9,11,"g",253)(12,zie,9,14,"g",254)(13,Uie,9,14,"g",255),m()}if(t&2){let e=n.index,i=ge();cn("display",!i.si.braid_param_emph_one_tona||i.si.braid_param_emph_one_tona&&(i.is_prev_tona(e)||i.is_cur_tona(e)||i.is_next_tona(e))?"block":"none"),ae("transform","translate(0 "+(e+1)*90+")")("id","whole_tona_"+e),y(),ae("id","center_bubble_T_"+e),y(),ae("id","center_bubble_left_T_"+e),y(),ae("class",i.get_bubble_class(i.center_left[e],i.chord_type.center.left)),y(),ae("class",i.display_as_roman?"left duo roman":"left duo")("x",i.display_as_roman?"0":"-5"),y(),Tn("",i.center_left_in_use[e],"",i.Translate[i.chord_type.center.left]),y(),ae("id","center_bubble_right_T_"+e),y(),ae("class",i.get_bubble_class(i.center_right[e],i.chord_type.center.right)),y(),E("ngIf",!i.display_as_roman),y(),E("ngIf",i.display_as_roman),y(),E("ngIf",e!=0&&e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e!=i.center_left.length-1),y(),E("ngIf",e!=i.center_left.length-2&&e!=i.center_left.length-1),y(),E("ngIf",e!=i.center_left.length-2&&e!=i.center_left.length-1)}}function Hie(t,n){if(t&1&&(ft(),ie(0,"use",274)),t&2){let e=ge().index,i=ge();ae("class",i.tonality_focused==i.center_up[e]||i.tonality_focused==i.center_right[e]+"m"||i.tonality_focused==i.center_right[e]+"b7"?"greenCircle active":"greenCircle")}}function Yie(t,n){if(t&1&&(ft(),p(0,"g"),Wt(1,Hie,1,1,"use",273),m()),t&2){let e=n.index,i=ge();cn("display",!i.si.braid_param_emph_one_tona||i.si.braid_param_emph_one_tona&&i.is_cur_tona(e)?"block":"none"),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"tona erase":"tona")("transform","translate(0 "+(e+1)*90+")"),y(),E("ngIf",e!=0&&e!=i.center_up.length-1)}}function Xie(t,n){if(t&1&&(ft(),ie(0,"use",279)),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona||i.si.braid_param_emph_one_tona&&(i.is_prev_tona(e)||i.is_cur_tona(e))?"block":"none"),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"rect-arrow erase":"rect-arrow")}}function Jie(t,n){if(t&1&&(ft(),ie(0,"use",280)),t&2){let e=ge(2);ae("class",e.si.braid_param_emph_score_chords||e.si.braid_param_emph_diatonic_scale?"rect-arrow erase":"rect-arrow")}}function Qie(t,n){if(t&1&&(ft(),ie(0,"use",281)),t&2){let e=ge(2);ae("class",e.si.braid_param_emph_score_chords||e.si.braid_param_emph_diatonic_scale?"rect-arrow erase":"rect-arrow")}}function $ie(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",282),m()),t&2){let e=ge().index,i=ge();ae("id","arrowsR_B_"+e)("class",i.get_arrow_class(i.right_up[e-1],i.chord_type.right.up,i.right_down[e-1],i.chord_type.right.down,i.center_left[e],i.chord_type.center.left,i.center_right[e],i.chord_type.center.right,i.center_up[e],i.chord_type.center.up)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase":"arrows-2")}}function Kie(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",283),m()),t&2){let e=ge().index,i=ge();ae("id","arrowsL_B_"+e)("class",i.get_arrow_class(i.left_up[e-1],i.chord_type.left.up,i.left_down[e-1],i.chord_type.left.down,i.center_left[e],i.chord_type.center.left,i.center_right[e],i.chord_type.center.right,i.center_up[e],i.chord_type.center.up)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase":"arrows-2")}}function Zie(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",284),m()),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona||i.si.braid_param_emph_one_tona&&(i.is_prev_tona(e)||i.is_cur_tona(e))?"block":"none"),ae("id","arrows_B_"+e)("class",i.get_arrow_class(i.center_left[e],i.chord_type.center.left,i.center_right[e],i.chord_type.center.right,i.center_left[e+1],i.chord_type.center.left,i.center_right[e+1],i.chord_type.center.right,i.center_up[e+1],i.chord_type.center.up,i.center_up[e],i.chord_type.center.up)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase":"arrows-2")}}function ere(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",285),m()),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona||i.si.braid_param_emph_one_tona&&(i.is_prev_tona(e)||i.is_cur_tona(e))?"block":"none"),ae("id","arrowsMidL_B_"+e)("class",i.get_arrow_class(i.left_up[e-1],i.chord_type.left.up,i.left_down[e-1],i.chord_type.left.down,i.left_up[e],i.chord_type.left.up,i.left_down[e],i.chord_type.left.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase":"arrows-2")}}function tre(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",286),m()),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona||i.si.braid_param_emph_one_tona&&(i.is_prev_tona(e)||i.is_cur_tona(e))?"block":"none"),ae("id","arrowsMidR_B_"+e)("class",i.get_arrow_class(i.right_up[e-1],i.chord_type.right.up,i.right_down[e-1],i.chord_type.right.down,i.right_up[e],i.chord_type.right.up,i.right_down[e],i.chord_type.right.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase":"arrows-2")}}function nre(t,n){if(t&1&&(ft(),p(0,"g",239),ie(1,"use",287),m()),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid||i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid&&i.is_cur_tona(e)?"block":"none"),ae("id","arrowsExtRL_B_"+e)("class",i.get_arrow_class(i.fifth_left_up[e-1],i.chord_type.fifth_left.up,i.fifth_left_down[e-1],i.chord_type.fifth_left.down,i.left_up[e-1],i.chord_type.left.up,i.left_down[e-1],i.chord_type.left.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase arrows-ext":"arrows-2 arrows-ext")}}function ire(t,n){if(t&1&&(ft(),p(0,"g",241),ie(1,"use",288),m()),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid||i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid&&i.is_cur_tona(e)?"block":"none"),ae("id","arrowsExtLR_B_"+e)("class",i.get_arrow_class(i.fifth_right_up[e-1],i.chord_type.fifth_right.up,i.fifth_right_down[e-1],i.chord_type.fifth_right.down,i.right_up[e-1],i.chord_type.right.up,i.right_down[e-1],i.chord_type.right.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase arrows-ext":"arrows-2 arrows-ext")}}function rre(t,n){if(t&1&&(ft(),p(0,"g",239),ie(1,"use",289),m()),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid||i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid&&(i.is_cur_tona(e)||i.is_prev_tona(e))?"block":"none"),ae("id","arrowsExtRR_B_"+e)("class",i.get_arrow_class(i.right_up[e-1],i.chord_type.right.up,i.right_down[e-1],i.chord_type.right.down,i.fifth_right_up[e],i.chord_type.fifth_right.up,i.fifth_right_down[e],i.chord_type.fifth_right.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase arrows-ext":"arrows-2 arrows-ext")}}function ore(t,n){if(t&1&&(ft(),p(0,"g",241),ie(1,"use",290),m()),t&2){let e=ge().index,i=ge();cn("display",!i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid||i.si.braid_param_emph_one_tona&&!i.si.braid_param_simplified_braid&&(i.is_prev_tona(e)||i.is_cur_tona(e))?"block":"none"),ae("id","arrowsExtLL_B_"+e)("class",i.get_arrow_class(i.left_up[e-1],i.chord_type.left.up,i.left_down[e-1],i.chord_type.left.down,i.fifth_left_up[e],i.chord_type.fifth_left.up,i.fifth_left_down[e],i.chord_type.fifth_left.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrows-2 erase arrows-ext":"arrows-2 arrows-ext")}}function sre(t,n){if(t&1&&(ft(),p(0,"g",275),Wt(1,Xie,1,3,"use",276)(2,Jie,1,1,"use",277)(3,Qie,1,1,"use",278)(4,$ie,2,3,"g",227)(5,Kie,2,3,"g",227)(6,Zie,2,5,"g",228)(7,ere,2,5,"g",228)(8,tre,2,5,"g",228)(9,nre,2,5,"g",229)(10,ire,2,5,"g",230)(11,rre,2,5,"g",229)(12,ore,2,5,"g",230),m()),t&2){let e=n.index,i=ge();cn("display",!i.si.braid_param_emph_one_tona||i.si.braid_param_emph_one_tona&&(i.is_prev_tona(e)||i.is_cur_tona(e)||i.is_next_tona(e))?"block":"none"),ae("transform","translate(0 "+(e+1)*90+")"),y(),E("ngIf",e!=i.center_up.length-1),y(),E("ngIf",e!=0&&e!=i.center_up.length-1),y(),E("ngIf",e!=0&&e!=i.center_up.length-1),y(),E("ngIf",e!=0&&e!=i.center_up.length-1),y(),E("ngIf",e!=0&&e!=i.center_up.length-1),y(),E("ngIf",e!=i.center_up.length-1),y(),E("ngIf",e!=0&&e<i.center_up.length-2),y(),E("ngIf",e!=0&&e<i.center_up.length-2),y(),E("ngIf",e!=0&&e<i.center_up.length-1),y(),E("ngIf",e!=0&&e<i.center_up.length-1),y(),E("ngIf",e!=0&&e<i.center_up.length-2),y(),E("ngIf",e!=0&&e<i.center_up.length-2)}}function are(t,n){if(t&1&&(ft(),p(0,"text",300),P(1),m()),t&2){let e=ge().index,i=ge();y(),Tn("",i.center_right_in_use[e],"",i.Translate[i.chord_type.center.right])}}function lre(t,n){if(t&1&&(ft(),p(0,"text",300),P(1),m()),t&2){let e=ge().index,i=ge();y(),Yt(i.center_right_in_use[e].toLowerCase())}}function cre(t,n){if(t&1){let e=mn();ft(),p(0,"g",301)(1,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(2,"use",302),p(3,"text",303),P(4),m()(),p(5,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(6,"use",304),p(7,"text",270),P(8),m()()()}if(t&2){let e=ge().index,i=ge();y(),ae("id","left_bubble_up_B_"+e),y(),ae("class",i.get_bubble_class(i.left_up[e-1],i.chord_type.left.up)),y(),ae("x",i.display_as_roman?"-23":"-19"),y(),Tn("",i.left_up_in_use[e-1],"",i.Translate[i.chord_type.left.up]),y(),ae("id","left_bubble_down_B_"+e),y(),ae("class",i.get_bubble_class(i.left_down[e-1],i.chord_type.left.down)),y(),ae("x",i.display_as_roman?"-5":"-3"),y(),Tn("",i.left_down_in_use[e-1],"",i.Translate[i.chord_type.left.down])}}function dre(t,n){if(t&1){let e=mn();ft(),p(0,"g",305)(1,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(2,"use",302),p(3,"text",306),P(4),m()(),p(5,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(6,"use",304),p(7,"text",307),P(8),m()()()}if(t&2){let e=ge().index,i=ge();y(),ae("id","right_bubble_up_B_"+e),y(),ae("class",i.get_bubble_class(i.right_up[e-1],i.chord_type.right.up)),y(2),Tn("",i.right_up_in_use[e-1],"",i.Translate[i.chord_type.right.up]),y(),ae("id","right_bubble_down_B_"+e),y(),ae("class",i.get_bubble_class(i.right_down[e-1],i.chord_type.right.down)),y(2),Tn("",i.right_down_in_use[e-1],"",i.Translate[i.chord_type.right.down])}}function hre(t,n){if(t&1){let e=mn();ft(),p(0,"g",266)(1,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(2,"use",308),p(3,"text",303),P(4),m()(),p(5,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(6,"use",309),p(7,"text",310),P(8),m()()()}if(t&2){let e=ge().index,i=ge();cn("display",i.si.braid_param_simplified_braid||i.si.braid_param_emph_one_tona&&i.is_next_tona(e)&&!i.is_cur_tona(e)?"none":"block"),ae("id","outer_B_"+e),y(),ae("id","fifth_left_bubble_up_B_"+e),y(),ae("class",i.get_bubble_class(i.fifth_left_up[e],i.chord_type.fifth_left.up)),y(),ae("x",i.display_as_roman?"-25":"-19"),y(),Tn("",i.fifth_left_up_in_use[e],"",i.Translate[i.chord_type.fifth_left.up]),y(),ae("id","fifth_left_bubble_down_B_"+e),y(),ae("class",i.get_bubble_class(i.fifth_left_down[e],i.chord_type.fifth_left.down)),y(2),Tn("",i.fifth_left_down_in_use[e],"",i.Translate[i.chord_type.fifth_left.down])}}function ure(t,n){if(t&1){let e=mn();ft(),p(0,"g",311)(1,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(2,"use",308),p(3,"text",303),P(4),m()(),p(5,"g",246),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge(2);return fe(s.hoverMeNot(r))}),ie(6,"use",309),p(7,"text",310),P(8),m()()()}if(t&2){let e=ge().index,i=ge();cn("display",i.si.braid_param_simplified_braid||i.si.braid_param_emph_one_tona&&i.is_next_tona(e)&&!i.is_cur_tona(e)?"none":"block"),y(),ae("id","fifth_right_bubble_up_B_"+e),y(),ae("class",i.get_bubble_class(i.fifth_right_up[e],i.chord_type.fifth_right.up)),y(),ae("x",i.display_as_roman?"-25":"-19"),y(),Tn("",i.fifth_right_up_in_use[e],"",i.Translate[i.chord_type.fifth_right.up]),y(),ae("id","fifth_right_bubble_down_B_"+e),y(),ae("class",i.get_bubble_class(i.fifth_right_down[e],i.chord_type.fifth_right.down)),y(2),Tn("",i.fifth_right_down_in_use[e],"",i.Translate[i.chord_type.fifth_right.down])}}function pre(t,n){if(t&1){let e=mn();ft(),p(0,"g",223)(1,"g",245)(2,"g",246),J("click",function(r){pe(e);let s=ge();return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge();return fe(s.hoverMeNot(r))}),ie(3,"use",291),p(4,"text",292),P(5),m()(),p(6,"g",246),J("click",function(r){pe(e);let s=ge();return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge();return fe(s.hoverMeNot(r))}),ie(7,"use",293),Wt(8,are,2,2,"text",294)(9,lre,2,1,"text",294),m(),p(10,"g",246),J("click",function(r){pe(e);let s=ge();return fe(s.hoverMe(r))})("mouseleave",function(r){pe(e);let s=ge();return fe(s.hoverMeNot(r))}),ie(11,"use",295),p(12,"text",296),P(13),m()()(),Wt(14,cre,9,10,"g",297)(15,dre,9,8,"g",298)(16,hre,9,12,"g",254)(17,ure,9,11,"g",299),m()}if(t&2){let e=n.index,i=ge();cn("display",!i.si.braid_param_emph_one_tona||i.si.braid_param_emph_one_tona&&(i.is_prev_tona(e)||i.is_cur_tona(e)||i.is_next_tona(e))?"block":"none"),ae("transform","translate(0 "+(e+1)*90+")"),y(),ae("id","center_bubble_B_"+e),y(),ae("id","center_bubble_up_B_"+e),y(),ae("class",i.get_bubble_class(i.center_up[e],i.chord_type.center.up)),y(),ae("class",i.display_as_roman?"center roman":"center"),y(),Tn("",i.center_up_in_use[e],"",i.Translate[i.chord_type.center.up]),y(),ae("id","center_bubble_right_B_"+e),y(),ae("class",i.get_bubble_class(i.center_right[e],i.chord_type.center.right)),y(),E("ngIf",!i.display_as_roman),y(),E("ngIf",i.display_as_roman),y(),ae("id","center_bubble_left_B_"+e),y(),ae("class",i.get_bubble_class(i.center_left[e],i.chord_type.center.left)),y(),ae("class",i.display_as_roman?"left roman":"left")("x",i.display_as_roman?"-4":"-7"),y(),Tn("",i.center_left_in_use[e],"",i.Translate[i.chord_type.center.left]),y(),E("ngIf",e!=0&&e!=i.center_up.length-1),y(),E("ngIf",e!=0&&e!=i.center_up.length-1),y(),E("ngIf",e!=i.center_up.length-2&&e!=i.center_up.length-1),y(),E("ngIf",e!=i.center_up.length-2&&e!=i.center_up.length-1)}}function fre(t,n){if(t&1&&(ft(),ie(0,"use",313)),t&2){let e=ge().index,i=ge();ae("class",i.tonality_focused==i.center_left[e]||i.tonality_focused==i.center_right[e]+"m"?"greenCircle active":"greenCircle")}}function mre(t,n){if(t&1&&(ft(),p(0,"g"),Wt(1,fre,1,1,"use",312),m()),t&2){let e=n.index,i=ge();ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"tona erase":"tona")("transform","translate(0 "+(e-1)*26.4+")"),y(),E("ngIf",e!=0&&e!=i.center_left.length-1)}}function gre(t,n){if(t&1){let e=mn();ft(),p(0,"g")(1,"g",322),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))}),ie(2,"use",323),p(3,"text",324),P(4),m()(),p(5,"g",325),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))}),ie(6,"use",326),p(7,"text",327),P(8),m()()()}if(t&2){let e=ge().index,i=ge();y(),ae("id","fifth_left_bubble_up_N1_"+e),y(),ae("class",i.get_bubble_class(i.fifth_left_up[e],i.chord_type.fifth_left.up,"fifths")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords")("x",i.display_as_roman?"29":"30.508127"),y(),Tn("",i.fifth_left_up_in_use[e],"",i.Translate[i.chord_type.fifth_left.up]),y(),ae("id","fifth_left_bubble_down_N1_"+e),y(),ae("class",i.get_bubble_class(i.fifth_left_down[e],i.chord_type.fifth_left.down,"fifths")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords")("x",(i.display_as_roman,"37.563381")),y(),Tn("",i.fifth_left_down_in_use[e],"",i.Translate[i.chord_type.fifth_left.down])}}function _re(t,n){if(t&1){let e=mn();ft(),p(0,"g")(1,"g",328),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))}),ie(2,"use",329),p(3,"text",330),P(4),m()(),p(5,"g",331),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))}),ie(6,"use",332),p(7,"text",333),P(8),m()()()}if(t&2){let e=ge().index,i=ge();y(),ae("id","fifth_right_bubble_up_N1_"+e),y(),ae("class",i.get_bubble_class(i.fifth_right_up[e],i.chord_type.fifth_right.up,"fifths")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords")("x",i.display_as_roman?"106.81116":"108.81116"),y(),Tn("",i.fifth_right_up_in_use[e],"",i.Translate[i.chord_type.fifth_right.up]),y(),ae("id","fifth_right_bubble_down_N1_"+e),y(),ae("class",i.get_bubble_class(i.fifth_right_down[e],i.chord_type.fifth_right.down,"fifths")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords")("x",(i.display_as_roman,"114.53078")),y(),Tn("",i.fifth_right_down_in_use[e],"",i.Translate[i.chord_type.fifth_right.down])}}function yre(t,n){if(t&1){let e=mn();ft(),p(0,"g",339),J("click",function(r){pe(e);let s=ge(3);return fe(s.hoverMe(r))}),ie(1,"use",340),p(2,"text",341),P(3),m()()}if(t&2){let e=ge(2).index,i=ge();ae("id","left_bubble_down_N1_"+e),y(),ae("class",i.get_bubble_class(i.left_down[e-1],i.chord_type.left.down,"sides")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords"),y(),Tn("",i.left_down_in_use[e-1],"",i.Translate[i.chord_type.left.down])}}function vre(t,n){if(t&1){let e=mn();ft(),p(0,"g",334)(1,"g",335),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))}),ie(2,"use",336),p(3,"text",337),P(4),m()(),Wt(5,yre,4,5,"g",338),m()}if(t&2){let e=ge().index,i=ge();y(),ae("id","left_bubble_up_N1_"+e),y(),ae("class",i.get_bubble_class(i.left_up[e-1],i.chord_type.left.up,"sides")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords")("x",i.display_as_roman?"42.6301":"44.6301"),y(),Tn("",i.left_up_in_use[e-1],"",i.Translate[i.chord_type.left.up]),y(),E("ngIf",e!=0&&e!=i.center_left.length-1)}}function bre(t,n){if(t&1){let e=mn();ft(),p(0,"g",346),J("click",function(r){pe(e);let s=ge(3);return fe(s.hoverMe(r))}),ie(1,"use",347),p(2,"text",348),P(3),m()()}if(t&2){let e=ge(2).index,i=ge();ae("id","right_bubble_down_N1_"+e),y(),ae("class",i.get_bubble_class(i.right_down[e-1],i.chord_type.right.down,"sides")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords"),y(),Tn("",i.right_down_in_use[e-1],"",i.Translate[i.chord_type.right.down])}}function xre(t,n){if(t&1){let e=mn();ft(),p(0,"g",334)(1,"g",342),J("click",function(r){pe(e);let s=ge(2);return fe(s.hoverMe(r))}),ie(2,"use",343),p(3,"text",344),P(4),m()(),Wt(5,bre,4,5,"g",345),m()}if(t&2){let e=ge().index,i=ge();y(),ae("id","right_bubble_up_N1_"+e),y(),ae("class",i.get_bubble_class(i.right_up[e-1],i.chord_type.right.up,"sides")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords")("x",i.display_as_roman?"95.488441":"96.488441"),y(),Tn("",i.right_up_in_use[e-1],"",i.Translate[i.chord_type.right.up]),y(),E("ngIf",e!=0&&e!=i.center_left.length-1)}}function Cre(t,n){if(t&1&&(ft(),p(0,"text",349),P(1),m()),t&2){let e=ge().index,i=ge();y(),Tn("",i.center_right_in_use[e],"",i.Translate[i.chord_type.center.right])}}function wre(t,n){if(t&1&&(ft(),p(0,"text",350),P(1),m()),t&2){let e=ge().index,i=ge();y(),Yt(i.center_right_in_use[e].toLowerCase())}}function Mre(t,n){if(t&1){let e=mn();ft(),p(0,"g",223),Wt(1,gre,9,12,"g",227)(2,_re,9,12,"g",227)(3,vre,6,7,"g",314)(4,xre,6,7,"g",314),p(5,"g",315),J("click",function(r){pe(e);let s=ge();return fe(s.hoverMe(r))}),ie(6,"use",316),p(7,"text",317),P(8),m()(),p(9,"g",318),J("click",function(r){pe(e);let s=ge();return fe(s.hoverMe(r))}),ie(10,"use",319),Wt(11,Cre,2,2,"text",320)(12,wre,2,1,"text",321),m()()}if(t&2){let e=n.index,i=ge();ae("transform","translate(0 "+e*26.4+")"),y(),E("ngIf",e!=i.center_left.length-2&&e!=i.center_left.length-1),y(),E("ngIf",e!=i.center_left.length-2&&e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e!=i.center_left.length-1),y(),ae("id","center_bubble_left_N1_"+e),y(),ae("class",i.get_bubble_class(i.center_left[e],i.chord_type.center.left,"center")),y(),ae("class",i.display_as_roman?"left duo roman braid-chords big":"left duo braid-chords big")("x",i.display_as_roman?"62.933678":"66.933678"),y(),Tn("",i.center_left_in_use[e],"",i.Translate[i.chord_type.center.left]),y(),ae("id","center_bubble_right_N1_"+e),y(),ae("class",i.get_bubble_class(i.center_right[e],i.chord_type.center.right,"center")),y(),E("ngIf",!i.display_as_roman),y(),E("ngIf",i.display_as_roman)}}function Sre(t,n){if(t&1&&(ft(),p(0,"g",334)(1,"g"),ie(2,"use",351),m(),p(3,"g"),ie(4,"use",352),m()()),t&2){let e=ge().index,i=ge();y(),ae("id","arrowsMidR_N1_"+e)("class",i.get_arrow_class(i.right_up[e-1],i.chord_type.right.up,i.right_down[e-1],i.chord_type.right.down,i.right_up[e],i.chord_type.right.up,i.right_down[e],i.chord_type.right.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrow big-arrow erase":"arrow big-arrow"),y(),ae("id","arrowsExtRL_N1_"+e)("class",i.get_arrow_class(i.right_up[e-1],i.chord_type.right.up,i.right_down[e-1],i.chord_type.right.down,i.fifth_right_up[e],i.chord_type.fifth_right.up,i.fifth_right_down[e],i.chord_type.fifth_right.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrow erase":"arrow")}}function Pre(t,n){if(t&1&&(ft(),p(0,"g",334),ie(1,"use",353),m()),t&2){let e=ge().index,i=ge();ae("id","arrowsR_N1_"+e)("class",i.get_arrow_class(i.right_up[e-1],i.chord_type.right.up,i.right_down[e-1],i.chord_type.right.down,i.center_left[e],i.chord_type.center.left,i.center_right[e],i.chord_type.center.right)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrow erase":"arrow")}}function kre(t,n){if(t&1&&(ft(),p(0,"g",334)(1,"g"),ie(2,"use",354),m(),p(3,"g"),ie(4,"use",355),m()()),t&2){let e=ge().index,i=ge();y(),ae("id","arrowsMidL_N1_"+e)("class",i.get_arrow_class(i.left_up[e-1],i.chord_type.left.up,i.left_down[e-1],i.chord_type.left.down,i.left_up[e],i.chord_type.left.up,i.left_down[e],i.chord_type.left.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrow big-arrow erase":"arrow big-arrow"),y(),ae("id","arrowsExtLR_N1_"+e)("class",i.get_arrow_class(i.left_up[e-1],i.chord_type.left.up,i.left_down[e-1],i.chord_type.left.down,i.fifth_left_up[e],i.chord_type.fifth_left.up,i.fifth_left_down[e],i.chord_type.fifth_left.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrow erase":"arrow")}}function Ere(t,n){if(t&1&&(ft(),p(0,"g",334),ie(1,"use",356),m()),t&2){let e=ge().index,i=ge();ae("id","arrowsL_N1_"+e)("class",i.get_arrow_class(i.left_up[e-1],i.chord_type.left.up,i.left_down[e-1],i.chord_type.left.down,i.center_left[e],i.chord_type.center.left,i.center_right[e],i.chord_type.center.right)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrow erase":"arrow")}}function Tre(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",357),m()),t&2){let e=ge().index,i=ge();ae("id","arrowsExtRR_N1_"+e)("class",i.get_arrow_class(i.fifth_right_up[e],i.chord_type.fifth_right.up,i.fifth_right_down[e],i.chord_type.fifth_right.down,i.right_up[e],i.chord_type.right.up,i.right_down[e],i.chord_type.right.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrow erase":"arrow")}}function Are(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",358),m()),t&2){let e=ge().index,i=ge();ae("id","arrowsExtLL_N1_"+e)("class",i.get_arrow_class(i.fifth_left_up[e],i.chord_type.fifth_left.up,i.fifth_left_down[e],i.chord_type.fifth_left.down,i.left_up[e],i.chord_type.left.up,i.left_down[e],i.chord_type.left.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrow erase":"arrow")}}function Dre(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",359),m()),t&2){let e=ge().index,i=ge();ae("id","arrows_N1_"+e)("class",i.get_arrow_class(i.center_left[e],i.chord_type.center.left,i.center_right[e],i.chord_type.center.right,i.center_left[e+1],i.chord_type.center.left,i.center_right[e+1],i.chord_type.center.right)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"arrow erase":"arrow")}}function Ire(t,n){if(t&1&&(ft(),p(0,"g",223),Wt(1,Sre,5,6,"g",314)(2,Pre,2,3,"g",314)(3,kre,5,6,"g",314)(4,Ere,2,3,"g",314)(5,Tre,2,3,"g",227)(6,Are,2,3,"g",227)(7,Dre,2,3,"g",227),m()),t&2){let e=n.index,i=ge();ae("transform","translate(0 "+e*26.4+")"),y(),E("ngIf",e!=0&&e!=i.center_left.length-1&&e!=i.center_left.length-2),y(),E("ngIf",e!=0&&e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e!=i.center_left.length-1&&e!=i.center_left.length-2),y(),E("ngIf",e!=0&&e!=i.center_left.length-1),y(),E("ngIf",e!=i.center_left.length-2&&e!=i.center_left.length-1),y(),E("ngIf",e!=i.center_left.length-2&&e!=i.center_left.length-1),y(),E("ngIf",e!=i.center_left.length-1)}}function Ore(t,n){if(t&1&&(ft(),p(0,"text",367),P(1),m()),t&2){let e=ge().index,i=ge();y(),Tn("",i.center_right_in_use[e],"",i.Translate[i.chord_type.center.right])}}function Fre(t,n){if(t&1&&(ft(),p(0,"text",368),P(1),m()),t&2){let e=ge().index,i=ge();y(),Yt(i.center_right_in_use[e].toLowerCase())}}function Bre(t,n){if(t&1){let e=mn();ft(),p(0,"g")(1,"g",369),J("click",function(r){pe(e);let s=ge(2);return fe(s.showMe(r))}),ie(2,"use",370),p(3,"text",371),P(4),m()(),p(5,"g",369),J("click",function(r){pe(e);let s=ge(2);return fe(s.showMe(r))}),ie(6,"use",372),p(7,"text",373),P(8),m()(),p(9,"g",369),J("click",function(r){pe(e);let s=ge(2);return fe(s.showMe(r))}),ie(10,"use",374),p(11,"text",375),P(12),m()(),p(13,"g",369),J("click",function(r){pe(e);let s=ge(2);return fe(s.showMe(r))}),ie(14,"use",376),p(15,"text",377),P(16),m()()()}if(t&2){let e=ge().index,i=ge();y(),ae("id","fifth_right_bubble_up_N2_"+e),y(),ae("class",i.get_bubble_class(i.fifth_right_up[e],i.chord_type.fifth_right.up,"fifths","up")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords")("x",i.display_as_roman?"104":"104.80918"),y(),Tn("",i.fifth_right_up_in_use[e],"",i.Translate[i.chord_type.fifth_right.up]),y(),ae("id","fifth_right_bubble_down_N2_"+e),y(),ae("class",i.get_bubble_class(i.fifth_right_down[e],i.chord_type.fifth_right.down,"fifths","down")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords")("x",(i.display_as_roman,"113.14061")),y(),Tn("",i.fifth_right_down_in_use[e],"",i.Translate[i.chord_type.fifth_right.down]),y(),ae("id","fifth_left_bubble_up_N2_"+e),y(),ae("class",i.get_bubble_class(i.fifth_left_up[e],i.chord_type.fifth_left.up,"fifths","up")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords")("x",i.display_as_roman?"28.5":"30"),y(),Tn("",i.fifth_left_up_in_use[e],"",i.Translate[i.chord_type.fifth_left.up]),y(),ae("id","fifth_left_bubble_down_N2_"+e),y(),ae("class",i.get_bubble_class(i.fifth_left_down[e],i.chord_type.fifth_left.down,"fifths","down")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords")("x",(i.display_as_roman,"38")),y(),Tn("",i.fifth_left_down_in_use[e],"",i.Translate[i.chord_type.fifth_left.down])}}function Lre(t,n){if(t&1){let e=mn();ft(),p(0,"g",378)(1,"g",379),J("click",function(r){pe(e);let s=ge(2);return fe(s.showMe(r))}),ie(2,"use",380),p(3,"text",381),P(4),m()(),p(5,"g",379),J("click",function(r){pe(e);let s=ge(2);return fe(s.showMe(r))}),ie(6,"use",382),p(7,"text",383),P(8),m()(),p(9,"g",379),J("click",function(r){pe(e);let s=ge(2);return fe(s.showMe(r))}),ie(10,"use",384),p(11,"text",385),P(12),m()(),p(13,"g",379),J("click",function(r){pe(e);let s=ge(2);return fe(s.showMe(r))}),ie(14,"use",386),p(15,"text",387),P(16),m()()()}if(t&2){let e=ge().index,i=ge();y(),ae("id","right_bubble_up_N2_"+e),y(),ae("class",i.get_bubble_class(i.right_up[e-1],i.chord_type.right.up,"sides","up")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords")("x",i.display_as_roman?"84.807625":"86.307625"),y(),Tn("",i.right_up_in_use[e-1],"",i.Translate[i.chord_type.right.up]),y(),ae("id","right_bubble_down_N2_"+e),y(),ae("class",i.get_bubble_class(i.right_down[e-1],i.chord_type.right.down,"sides","down")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords")("x",i.display_as_roman?"94.468475":"96.468475"),y(),Tn("",i.right_down_in_use[e-1],"",i.Translate[i.chord_type.right.down]),y(),ae("id","left_bubble_up_N2_"+e),y(),ae("class",i.get_bubble_class(i.left_up[e-1],i.chord_type.left.up,"sides","up")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords")("x",i.display_as_roman?"48.036549":"50.036549"),y(),Tn("",i.left_up_in_use[e-1],"",i.Translate[i.chord_type.left.up]),y(),ae("id","left_bubble_down_N2_"+e),y(),ae("class",i.get_bubble_class(i.left_down[e-1],i.chord_type.left.down,"sides","down")),y(),ae("class",i.display_as_roman?"duo roman braid-chords":"duo braid-chords"),y(),Tn("",i.left_down_in_use[e-1],"",i.Translate[i.chord_type.left.down])}}function Nre(t,n){if(t&1){let e=mn();ft(),p(0,"g",223)(1,"g",360),J("click",function(r){pe(e);let s=ge();return fe(s.showMe(r))}),ie(2,"use",361),p(3,"text",362),P(4),m()(),p(5,"g",360),J("click",function(r){pe(e);let s=ge();return fe(s.showMe(r))}),ie(6,"use",363),Wt(7,Ore,2,2,"text",364)(8,Fre,2,1,"text",365),m(),Wt(9,Bre,17,24,"g",227)(10,Lre,17,23,"g",366),m()}if(t&2){let e=n.index,i=ge();ae("transform","translate(0 "+e*21.25+")"),y(),ae("id","center_bubble_left_N2_"+e),y(),ae("class",i.get_bubble_class(i.center_left[e],i.chord_type.center.left,"center","up")),y(),ae("class",i.display_as_roman?"left duo roman braid-chords big":"left duo braid-chords big")("x",i.display_as_roman?"67.5":"69.257904"),y(),Tn("",i.center_left_in_use[e],"",i.Translate[i.chord_type.center.left]),y(),ae("id","center_bubble_right_N2_"+e),y(),ae("class",i.get_bubble_class(i.center_right[e],i.chord_type.center.right,"center","down")),y(),E("ngIf",!i.display_as_roman),y(),E("ngIf",i.display_as_roman),y(),E("ngIf",e!=i.center_left.length-2&&e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e!=i.center_left.length-1)}}function Vre(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",388),m()),t&2){let e=ge().index,i=ge();ae("id","skullL_"+e)("class",i.get_arrow_class(i.left_up[e-1],i.chord_type.left.up,i.left_down[e-1],i.chord_type.left.down,i.center_left[e],i.chord_type.center.left,i.center_right[e],i.chord_type.center.right)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"green-skull erase":"green-skull")}}function Rre(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",389),m()),t&2){let e=ge().index,i=ge();ae("id","skullR_"+e)("class",i.get_arrow_class(i.right_up[e-1],i.chord_type.right.up,i.right_down[e-1],i.chord_type.right.down,i.center_left[e],i.chord_type.center.left,i.center_right[e],i.chord_type.center.right)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"green-skull erase":"green-skull")}}function jre(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",390),m()),t&2){let e=ge().index,i=ge();ae("id","skullExtLL_"+e)("class",i.get_arrow_class(i.fifth_left_up[e-1],i.chord_type.fifth_left.up,i.fifth_left_down[e-1],i.chord_type.fifth_left.down,i.left_up[e-1],i.chord_type.left.up,i.left_down[e-1],i.chord_type.left.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"green-skull erase":"green-skull")}}function Gre(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",391),m()),t&2){let e=ge().index,i=ge();ae("id","skullExtRR_"+e)("class",i.get_arrow_class(i.fifth_right_up[e-1],i.chord_type.fifth_right.up,i.fifth_right_down[e-1],i.chord_type.fifth_right.down,i.right_up[e-1],i.chord_type.right.up,i.right_down[e-1],i.chord_type.right.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"green-skull erase":"green-skull")}}function Wre(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",392),m()),t&2){let e=ge().index,i=ge();ae("id","skullExtRL_"+e)("class",i.get_arrow_class(i.left_up[e-1],i.chord_type.left.up,i.left_down[e-1],i.chord_type.left.down,i.fifth_left_up[e],i.chord_type.fifth_left.up,i.fifth_left_down[e],i.chord_type.fifth_left.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"green-skull erase":"green-skull")}}function zre(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",393),m()),t&2){let e=ge().index,i=ge();ae("id","skullExtLR_"+e)("class",i.get_arrow_class(i.right_up[e-1],i.chord_type.right.up,i.right_down[e-1],i.chord_type.right.down,i.fifth_right_up[e],i.chord_type.fifth_right.up,i.fifth_right_down[e],i.chord_type.fifth_right.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"green-skull erase":"green-skull")}}function Ure(t,n){if(t&1&&(ft(),p(0,"g",223),Wt(1,Vre,2,3,"g",227)(2,Rre,2,3,"g",227)(3,jre,2,3,"g",227)(4,Gre,2,3,"g",227)(5,Wre,2,3,"g",227)(6,zre,2,3,"g",227),m()),t&2){let e=n.index,i=ge();ae("transform","translate(0 "+(e-1)*21.25+")"),y(),E("ngIf",e!=0&&e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e!=i.center_left.length-1&&e!=i.center_left.length-2),y(),E("ngIf",e!=0&&e!=i.center_left.length-1&&e!=i.center_left.length-2)}}function qre(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",398),m()),t&2){let e=ge().index,i=ge();ae("id","skull_"+e)("class",i.get_arrow_class(i.center_left[e-1],i.chord_type.center.left,i.center_right[e-1],i.chord_type.center.right,i.center_left[e],i.chord_type.center.left,i.center_right[e],i.chord_type.center.right)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"green-skull erase":"green-skull")}}function Hre(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",399),m()),t&2){let e=ge().index,i=ge();ae("id","skullMidL_"+e)("class",i.get_arrow_class(i.left_up[e-1],i.chord_type.left.up,i.left_down[e-1],i.chord_type.left.down,i.left_up[e],i.chord_type.left.up,i.left_down[e],i.chord_type.left.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"green-skull erase":"green-skull")}}function Yre(t,n){if(t&1&&(ft(),p(0,"g"),ie(1,"use",400),m()),t&2){let e=ge().index,i=ge();ae("id","skullMidR_"+e)("class",i.get_arrow_class(i.right_up[e-1],i.chord_type.right.up,i.right_down[e-1],i.chord_type.right.down,i.right_up[e],i.chord_type.right.up,i.right_down[e],i.chord_type.right.down)),y(),ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"green-skull erase":"green-skull")}}function Xre(t,n){if(t&1&&(ft(),ie(0,"use",401)),t&2){let e=ge(2);ae("class",e.si.braid_param_emph_score_chords||e.si.braid_param_emph_diatonic_scale?"black-skull erase":"black-skull")}}function Jre(t,n){if(t&1&&(ft(),ie(0,"use",402)),t&2){let e=ge(2);ae("class",e.si.braid_param_emph_score_chords||e.si.braid_param_emph_diatonic_scale?"black-skull erase":"black-skull")}}function Qre(t,n){if(t&1&&(ft(),ie(0,"use",403)),t&2){let e=ge(2);ae("class",e.si.braid_param_emph_score_chords||e.si.braid_param_emph_diatonic_scale?"black-skull erase":"black-skull")}}function $re(t,n){if(t&1&&(ft(),ie(0,"use",404)),t&2){let e=ge(2);ae("class",e.si.braid_param_emph_score_chords||e.si.braid_param_emph_diatonic_scale?"black-skull erase":"black-skull")}}function Kre(t,n){if(t&1&&(ft(),p(0,"g",223),Wt(1,qre,2,3,"g",227)(2,Hre,2,3,"g",227)(3,Yre,2,3,"g",227)(4,Xre,1,1,"use",394)(5,Jre,1,1,"use",395)(6,Qre,1,1,"use",396)(7,$re,1,1,"use",397),m()),t&2){let e=n.index,i=ge();ae("transform","translate(0 "+e*21.25+")"),y(),E("ngIf",e!=0),y(),E("ngIf",e!=0&&e!=i.center_left.length-1&&e!=i.center_left.length-2),y(),E("ngIf",e!=0&&e!=i.center_left.length-1&&e!=i.center_left.length-2),y(),E("ngIf",e!=i.center_left.length-2&&e!=i.center_left.length-1),y(),E("ngIf",e!=i.center_left.length-2&&e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e!=i.center_left.length-2&&e!=i.center_left.length-1),y(),E("ngIf",e!=0&&e!=i.center_left.length-2&&e!=i.center_left.length-1)}}function Zre(t,n){if(t&1&&(ft(),ie(0,"use",406)),t&2){let e=ge().index,i=ge();ae("class",i.tonality_focused==i.center_left[e]||i.tonality_focused==i.center_right[e]+"m"?"greenCircle active":"greenCircle")}}function eoe(t,n){if(t&1&&(ft(),p(0,"g"),Wt(1,Zre,1,1,"use",405),m()),t&2){let e=n.index,i=ge();ae("class",i.si.braid_param_emph_score_chords||i.si.braid_param_emph_diatonic_scale?"tona erase":"tona")("transform","translate(0 "+(e-1)*21.25+")"),y(),E("ngIf",e!=i.center_left.length)}}var t8=(()=>{class BraidComponent{set cur_chord(t){this.change_midi_chord(t)}set chordsInScore(t){this.find_chords_in_score(t)}set braidModel(t){this.braidType=t}set is_roman(t){this.switch_to_roman(t)}set one_tona_mode(t){switch(t){case 1:this.tonas_displayed=[7,8];break;case 2:this.tonas_displayed=[8];break;case 3:this.tonas_displayed=[8,9];break;case 4:this.tonas_displayed=[7,8,9];break;default:this.tonas_displayed=[8];break}}set zoom_val(t){$(".braid-svg").css("transform","scale("+t+")");let n=t.toString(),e;switch(n){case"0.4":e=-760;break;case"0.5":e=-630;break;case"0.6":e=-510;break;case"0.7":e=-380;break;case"0.8":e=-260;break;case"0.9":e=-140;break;case"1":e=0;break;case"1.1":e=110;break;case"1.2":e=240;break;case"1.3":e=360;break;case"1.4":e=490;break;case"1.5":e=620;break;case"1.6":e=740;break;case"1.7":e=860;break;case"1.8":e=990;break;case"1.9":e=1110;break;case"2":e=1250;break;default:e=0;break}$(".braid-svg").css("top",e+"px")}constructor(sel,zone,cm,curTonality,sm,si,midi,transport,curChordMod){this.sel=sel,this.zone=zone,this.cm=cm,this.curTonality=curTonality,this.sm=sm,this.si=si,this.midi=midi,this.transport=transport,this.curChordMod=curChordMod,this._chord=[],this._midi_chord=[],this.tonic=[],this.cur_score_chord="",this.maj_chords=["","M","maj7","5","maj9","maj11","maj13","6","Maj7","Maj9","M11","M13","maj9no5","M9sus4","Madd9","sus2","69"],this.min_chords=["m","m7","m#5","mMa7","m6","m9","m11","m7no5","m9no5","m11no5","madd9"],this.half_dim_chords=["m7b5"],this.seven_chords=["7","9","11","13","7no5","9no5","13no5","13sus4","7add13"],this.m69=["m69"],this.german=["german"],this.sevenb5=["7b5"],this.dim_chords=["dim"],this.dim_seven_chords=["dim7"],this.score_follow=!0,this.display_as_roman=!1,this.tonality_focused="",this.chords_in_score=[],this.chords_in_emphasis=["Am"],this.tonas_displayed=[8],this.askChordsInScore=new Rn,this.chord_type_notes={fifth_left:{up:"7b5",down:"german"},left:{up:"7",down:"m7b5"},center:{up:"7",left:"M",right:"m"},right:{up:"7",down:"dim"},fifth_right:{up:"7b5",down:"german"}},this.chord_type_roman={fifth_left:{up:"7b5",down:"german"},left:{up:"7",down:"m7b5"},center:{up:"7",left:"M",right:"m"},right:{up:"7",down:"dim"},fifth_right:{up:"7b5",down:"german"}},this.chord_type=this.chord_type_notes,this.fifth_left_up=jn.C.outer_left_up,this.fifth_left_down=jn.C.outer_left_down,this.left_up=jn.C.left_up,this.left_down=jn.C.left_down,this.center_up=jn.C.center_minor,this.center_right=jn.C.center_minor,this.center_left=jn.C.center_major,this.right_up=jn.C.right_up,this.right_down=jn.C.right_down,this.fifth_right_up=jn.C.outer_right_up,this.fifth_right_down=jn.C.outer_right_down,this.fifth_left_up_roman=[...jn.roman.outer_left_up].rotate(-3),this.fifth_left_down_roman=[...jn.roman.outer_left_down].rotate(-3),this.left_up_roman=[...jn.roman.left_up].rotate(-3),this.left_down_roman=[...jn.roman.left_down].rotate(-3),this.center_up_roman=jn.roman.center_major,this.center_left_roman=[...jn.roman.center_major],this.center_right_roman=[...jn.roman.center_minor_tonal].rotate(-3),this.center_modes=["none","none","none","none","none","none","none","lydian","ionian","mixolydian","dorian","aeolian","phrygian","locrian","none","none","none"],this.roman_mode="ionian",this.roman_mode_engaged=!1,this.right_up_roman=[...jn.roman.right_up].rotate(-3),this.right_down_roman=[...jn.roman.right_down].rotate(-3),this.fifth_right_up_roman=[...jn.roman.outer_right_up].rotate(-3),this.fifth_right_down_roman=[...jn.roman.outer_right_down].rotate(-3),this.fifth_left_up_in_use=this.fifth_left_up,this.fifth_left_down_in_use=this.fifth_left_down,this.left_up_in_use=this.left_up,this.left_down_in_use=this.left_down,this.center_up_in_use=this.center_up,this.center_left_in_use=this.center_left,this.center_right_in_use=this.center_right,this.right_up_in_use=this.right_up,this.right_down_in_use=this.right_down,this.fifth_right_up_in_use=this.fifth_right_up,this.fifth_right_down_in_use=this.fifth_right_down,this.Translate=Y1,this.displayNotesMode_SUBJ_update$=this.cm.displayNotesMode_SUBJ_update$.subscribe(t=>{this.zone.run(()=>{t=="letters"?this.si.braid_param_roman=!0:this.si.braid_param_roman=!1})}),this.show_score_chords_SUBJ_update$=this.cm.global_show_score_chords_SUBJ$.subscribe(t=>{this.askChordsInScore.next("find"),this.si.braid_param_show_score_chords=t}),this.chordChangeSub$=this.curChordMod.current_chord$.subscribe(t=>{t.root&&(this.cur_score_chord=t.root+t.chordType,console.log("Braid received chord =>",this.cur_score_chord),this.change_score_chord(this.cur_score_chord))}),this.curTonality$=this.curTonality.current_tonality$.subscribe(t=>{this.change_tonality(t)}),this.midiControlUpdate$=this.midi.controlTabSubject.subscribe(data=>{let ctrl=this.cm.getAssignedControls(!1),o=ctrl[""+data],number,control_name,control_action;if(o&&o.length)for(let obj of o)number=obj.number,control_name=obj.control_name,control_action=obj.control_action,this.zone.run(()=>{eval("this."+control_name)&&eval("this."+control_name+'("'+control_action+'")')});else return})}ngOnInit(){}reset(){this.display_as_roman=!1}ngAfterViewInit(){$(".braid-svg").draggable({axis:"x"})}ngOnDestroy(){this.curTonality$.unsubscribe(),this.midiControlUpdate$.unsubscribe(),this.chordChangeSub$.unsubscribe(),this.show_score_chords_SUBJ_update$.unsubscribe(),this.displayNotesMode_SUBJ_update$.unsubscribe()}change_tonality(t){let n,e="ionian";if(t.is_locked_to_score==!0){let i=t.scale_tona||t.part_tona||t.score_tona;e=i==t.scale_tona?t.scale_mode:i==t.part_tona?t.part_mode:t.score_mode,n=i!=this.tonality_focused;let r=this.get_mode_rotation(i,e);this.tonality_focused=r[0],this.score_follow=!0,this.rotate_arrays_for_tona(i,e),this.add_emphasis_diatonic_scale(i,e)}else{n=t.selected_tona!=this.tonality_focused;let i=t.selected_tona;e=t.selected_mode;let r=this.get_mode_rotation(i,e);this.tonality_focused=r[0],this.score_follow=!1,e=t.selected_mode,this.rotate_arrays_for_tona(t.selected_tona,e),this.add_emphasis_diatonic_scale(t.selected_tona,e)}this.focus_tonality(this.tonality_focused,e)}hoverMe(t){$(t.currentTarget).addClass("zoom")}showMe(t){let n=$(t.currentTarget).text(),e=$("#zoomed");e.children().text(n),e.stop(!1,!0).fadeIn(0,function(){e.addClass("zoom")}),e.stop(!1,!0).fadeOut(5e3,function(){e.removeClass("zoom")})}hoverMeNot(t){$(t.currentTarget).removeClass("zoom")}unlight_score(){this._chord=[]}unlight_midi(){this._midi_chord=[]}light_score(t,n){console.log("lighting : tonic ",t," chordType : ",n),this._chord.push(t+n);let e=nn.enharmonic(t);if(e!=t&&this._chord.push(e+n),t=="B"){let i="Cb",r=n;this._chord.push(i+r)}else if(t=="E"){let i="Fb",r=n;this._chord.push(i+r)}else if(t=="F"){let i="E#",r=n;this._chord.push(i+r)}if(n=="german"){let i=nn.transpose(t,"2M");this._chord.push(i+"7")}console.log("this._chord =>",this._chord)}light_midi(t,n){this._midi_chord.push(t+n);let e=nn.enharmonic(t);if(e!=t&&this._midi_chord.push(e+n),t=="B"){let i="Cb",r=n;this._midi_chord.push(i+r)}else if(t=="E"){let i="Fb",r=n;this._midi_chord.push(i+r)}else if(t=="F"){let i="E#",r=n;this._midi_chord.push(i+r)}else if(t=="C"){let i="B#",r=n;this._midi_chord.push(i+r)}if(n=="german"){let i=nn.transpose(t,"2M");this._midi_chord.push(i+"7")}}focusBubble(t){let n=t.idx,e=t.col,i;switch(this.braidType){case"tonal":i="T_";break;case"blues":i="B_";break;case"new1":i="N1_";break;case"new2":i="N2_";break;default:i="T_"}n!=-1&&(e=="center_right"?setTimeout(()=>{$("#center_bubble_right_"+i+n)[0].scrollIntoView({behavior:"smooth",block:"center"})},1):e=="center_left"?setTimeout(()=>{$("#center_bubble_left_"+i+n)[0].scrollIntoView({behavior:"smooth",block:"center"})},1):e=="center_up"&&setTimeout(()=>{$("#center_bubble_up_"+i+n)[0].scrollIntoView({behavior:"smooth",block:"center"})},1))}change_score_chord(t){let n=/([A-G][b#]{0,2})(.*)/,e=t.split("/")[0].match(n);if(e==null)return;let i=e[1],r=e[2];if(this.unlight_score(),this.maj_chords.indexOf(r)!=-1)r="M";else if(this.min_chords.indexOf(r)!=-1)r="m";else if(this.half_dim_chords.indexOf(r)!=-1)r="m7b5";else if(this.seven_chords.indexOf(r)!=-1)r="7";else if(this.m69.indexOf(r)!=-1)r="m69";else if(this.german.indexOf(r)!=-1)r="german";else if(this.sevenb5.indexOf(r)!=-1)r="7b5";else if(this.dim_chords.indexOf(r)!=-1)r="dim";else if(this.dim_seven_chords.indexOf(r)!=-1){r="dim7";let s=nn.transpose(i,"3m"),a=[s];for(let l=0;l<2;l++)s=nn.simplify(nn.transpose(s,"3m")),a.push(s);for(let l=0;l<a.length;l++)this.light_score(a[l],r)}this.light_score(i,r)}change_midi_chord(t){if(!t.chords.length||t.full_chord.empty){this.unlight_midi();return}this.unlight_midi();let n=t.full_chord.aliases[0],e=t.full_chord.tonic.replace(/[0-9]$/,""),i={idx:-1,col:""};if(this.maj_chords.indexOf(n)!=-1)n="M";else if(this.min_chords.indexOf(n)!=-1)n="m";else if(this.half_dim_chords.indexOf(n)!=-1)n="m7b5";else if(this.seven_chords.indexOf(n)!=-1)n="7";else if(this.m69.indexOf(n)!=-1)n="m69";else if(this.german.indexOf(n)!=-1)n="german";else if(this.sevenb5.indexOf(n)!=-1)n="7b5";else if(this.dim_chords.indexOf(n)!=-1)n="dim";else if(this.dim_seven_chords.indexOf(n)!=-1){n="dim7";let r=nn.transpose(e,"3m"),s=[r];for(let a=0;a<2;a++)r=nn.simplify(nn.transpose(r,"3m")),s.push(r);for(let a=0;a<s.length;a++)this.light_midi(s[a],n)}this.light_midi(e,n)}focus_tonality(t,n){if(!t)return;let e;this.roman_mode=="aeolian"||this.roman_mode=="minor"||this.roman_mode=="m"?e={idx:this.center_left.indexOf(t),col:"center_right"}:this.braidType=="blues"?e={idx:this.center_up.indexOf(t),col:"center_up"}:e={idx:this.center_left.indexOf(t),col:"center_left"},this.focusBubble(e)}switch_to_roman(t){var n;this.braidType!="blues"?n=3:n=6,this.display_as_roman=t,t?this.roman_mode=="minor"||this.roman_mode=="aeolian"?(this.fifth_left_up_in_use=this.fifth_left_up_roman,this.fifth_left_down_in_use=this.fifth_left_down_roman,this.left_up_in_use=this.left_up_roman,this.left_down_in_use=this.left_down_roman,this.center_up_in_use=this.center_up_roman,this.center_right_in_use=this.center_right_roman,this.center_left_in_use=this.center_left_roman,this.right_up_in_use=this.right_up_roman,this.right_down_in_use=this.right_down_roman,this.fifth_right_up_in_use=this.fifth_right_up_roman,this.fifth_right_down_in_use=this.fifth_right_down_roman,this.chord_type=this.chord_type_roman):(this.fifth_left_up_in_use=this.fifth_left_up_roman,this.fifth_left_down_in_use=this.fifth_left_down_roman,this.left_up_in_use=this.left_up_roman,this.left_down_in_use=this.left_down_roman,this.center_up_in_use=this.center_up_roman,this.center_right_in_use=this.center_right_roman,this.center_left_in_use=this.center_left_roman,this.right_up_in_use=this.right_up_roman,this.right_down_in_use=this.right_down_roman,this.fifth_right_up_in_use=this.fifth_right_up_roman,this.fifth_right_down_in_use=this.fifth_right_down_roman,this.chord_type=this.chord_type_roman):(this.fifth_left_up_in_use=this.fifth_left_up,this.fifth_left_down_in_use=this.fifth_left_down,this.left_up_in_use=this.left_up,this.left_down_in_use=this.left_down,this.center_up_in_use=this.center_up,this.center_right_in_use=this.center_right,this.center_left_in_use=this.center_left,this.right_up_in_use=this.right_up,this.right_down_in_use=this.right_down,this.fifth_right_up_in_use=this.fifth_right_up,this.fifth_right_down_in_use=this.fifth_right_down,this.chord_type=this.chord_type_notes)}rotate_arrays_for_tona(t,n="ionian"){t&&(this.fifth_left_up=this.braidType!="blues"?jn[t].outer_left_up:[...jn[t].outer_left_up].rotate(3),this.fifth_left_down=this.braidType!="blues"?jn[t].outer_left_down:[...jn[t].outer_left_down].rotate(3),this.left_up=this.braidType!="blues"?jn[t].left_up:[...jn[t].left_up].rotate(3),this.left_down=this.braidType!="blues"?jn[t].left_down:[...jn[t].left_down].rotate(3),this.center_up=this.braidType!="blues"?jn[t].center_minor:[...jn[t].center_major],this.center_left=this.braidType!="blues"?jn[t].center_major:[...jn[t].center_major].rotate(3),this.center_right=this.braidType!="blues"?jn[t].center_minor:[...jn[t].center_major],this.right_up=this.braidType!="blues"?jn[t].right_up:[...jn[t].right_up].rotate(3),this.right_down=this.braidType!="blues"?jn[t].right_down:[...jn[t].right_down].rotate(3),this.fifth_right_up=this.braidType!="blues"?jn[t].outer_right_up:[...jn[t].outer_right_up].rotate(3),this.fifth_right_down=this.braidType!="blues"?jn[t].outer_right_down:[...jn[t].outer_right_down].rotate(3),this.switch_to_roman(this.display_as_roman))}debug_rotate_jsons(){}svg_loaded(){this.score_follow&&this.focus_tonality(this.tonality_focused,"ionian")}find_chords_in_score(t){if(t){this.chords_in_score=[];for(let n=0;n<t.length;n++){let e=/([A-G][b#]{0,2})(.*)/,i=t[n].split("/")[0].match(e);if(i==null)return;let r=i[1],s=i[2],a="";this.maj_chords.indexOf(s)!=-1?a="M":this.min_chords.indexOf(s)!=-1?a="m":this.half_dim_chords.indexOf(s)!=-1?a="m7b5":this.seven_chords.indexOf(s)!=-1?a="7":this.m69.indexOf(s)!=-1?a="m69":this.german.indexOf(s)!=-1?a="german":this.sevenb5.indexOf(s)!=-1?a="7b5":this.dim_chords.indexOf(s)!=-1?a="dim":this.dim_seven_chords.indexOf(s)!=-1&&(a="dim7"),this.chords_in_score.push(r+a);let l=nn.enharmonic(r);if(l!=r&&this.chords_in_score.push(l+a),r=="B"){let d="Cb",u=a;this.chords_in_score.push(d+u)}else if(r=="E"){let d="Fb",u=a;this.chords_in_score.push(d+u)}else if(r=="F"){let d="E#",u=a;this.chords_in_score.push(d+u)}if(a=="german"){let d=nn.transpose(r,"2M");this.chords_in_score.push(d+"7")}}console.log("chords_in_score--- ",this.chords_in_score)}}get_bubble_class(t,n="",e="medBubble",i=""){let r=e+" "+i+" ",s,a,l,d;if(n=="dim"?(s=this._chord.indexOf(t+"dim7")!=-1||this._chord.indexOf(t+n)!=-1,a=this.chords_in_score.indexOf(t+"dim7")!=-1||this.chords_in_score.indexOf(t+n)!=-1,l=this.chords_in_emphasis.indexOf(t+"dim7")!=-1||this.chords_in_emphasis.indexOf(t+n)!=-1,d=this._midi_chord.indexOf(t+"dim7")!=-1||this._midi_chord.indexOf(t+n)!=-1):(s=this._chord.indexOf(t+n)!=-1,a=this.chords_in_score.indexOf(t+n)!=-1,l=this.chords_in_emphasis.indexOf(t+n)!=-1,d=this._midi_chord.indexOf(t+n)!=-1),this.si.getBraid_param_show_midi()?s&&d?r+="midi_active_green ":s&&this.si.getBraid_param_show_score_chords()?r+="active ":d&&(r+="midi_active "):s&&this.si.getBraid_param_show_score_chords()&&(r+="active "),a&&this.si.braid_param_emph_score_chords||l&&this.si.braid_param_emph_diatonic_scale?r+="erasenot":(!a&&this.si.braid_param_emph_score_chords||!l&&this.si.braid_param_emph_diatonic_scale)&&(r+="erase"),r=="active")debugger;return r}get_arrow_class(t,n,e,i,r,s,a,l,d="",u="",h="",_=""){let b="";var w,S,L,R;if(h==""&&_=="")var w=this._chord.indexOf(t+n)!=-1||this._chord.indexOf(e+i)!=-1,S=this._midi_chord.indexOf(t+n)!=-1||this._midi_chord.indexOf(e+i)!=-1;else var w=this._chord.indexOf(t+n)!=-1||this._chord.indexOf(e+i)!=-1||this._chord.indexOf(h+_)!=-1,S=this._midi_chord.indexOf(t+n)!=-1||this._midi_chord.indexOf(e+i)!=-1||this._midi_chord.indexOf(h+_)!=-1;return d==""&&u==""?(L=this._chord.indexOf(r+s)!=-1||this._chord.indexOf(a+l)!=-1,R=this._midi_chord.indexOf(r+s)!=-1||this._midi_chord.indexOf(a+l)!=-1):(L=this._chord.indexOf(r+s)!=-1||this._chord.indexOf(a+l)!=-1||this._chord.indexOf(d+u)!=-1,R=this._midi_chord.indexOf(r+s)!=-1||this._midi_chord.indexOf(a+l)!=-1||this._midi_chord.indexOf(d+u)!=-1),this.si.getBraid_param_show_midi()?w&&S?b+="midi_active_green ":w&&this.si.getBraid_param_show_score_chords()?b+="active ":S?b+="midi_active ":L&&R?b+="midi_activeSecond_green ":L&&this.si.getBraid_param_show_score_chords()?b+="activeSecond ":R&&(b+="midi_activeSecond "):w&&this.si.getBraid_param_show_score_chords()?b+="active ":L&&this.si.getBraid_param_show_score_chords()&&(b+="activeSecond "),b}toggle_braid_score_chords(){this.askChordsInScore.next("find"),this.zone.run(()=>{this.si.braid_param_emph_score_chords=!this.si.braid_param_emph_score_chords})}toggle_diatonic_scale_braid(){this.zone.run(()=>{this.si.braid_param_emph_diatonic_scale=!this.si.braid_param_emph_diatonic_scale})}toggle_simplified_braid(){this.zone.run(()=>{this.si.braid_param_simplified_braid=!this.si.braid_param_simplified_braid})}toggle_one_tona_braid(){this.zone.run(()=>{this.si.braid_param_emph_one_tona=!this.si.braid_param_emph_one_tona})}add_emphasis_diatonic_scale(t="C",n="major"){let e=xi,i=qn,r=Nw,s=p1;n||(n="major");let a;if(n=="ionian"||n=="dorian"||n=="phrygian"||n=="lydian"||n=="mixolydian"||n=="aeolian"||n=="locrian"){a=r.triads(n,t).map((u,h)=>{let b=/([ABCDEFG][#b]{0,2})(.*)/.exec(u);return b&&b[2]==""?u+"M":u});let d={ionian:0,dorian:1,phrygian:2,lydian:3,mixolydian:4,aeolian:5,locrian:6,"":0}[n];a=a.rotate(-d),a.push(a[4].slice(0,-1)+"7"),a.push(a[6].replace("dim","m7b5").replace("M","7"))}else{if(n=="major"?a=r.triads(n,t).map((l,d)=>d==0||d==3||d==4?l+"M":l):a=r.triads(n,t).map((l,d)=>d==2||d==5||d==6?l+"M":d==4?l.slice(0,-1)+"M":l),!a.length){console.warn("Braid : no diatonic chords found...");return}a.push(a[4].slice(0,-1)+"7"),a.push(a[6].replace("dim","m7b5").replace("M","7")),n=="minor"&&(a.push(a[1].replace("dim","m7b5")),a.push(r.notes("ionian",t).slice(-1)[0]+"dim"))}this.chords_in_emphasis=[];for(let l of a)this.add_emphasis_chord(l);console.log("this.chords_in_emphasis =>",this.chords_in_emphasis)}add_emphasis_chord(t="C"){this.chords_in_emphasis.indexOf(t)==-1&&this.chords_in_emphasis.push(t)}remove_emphasis_chord(t=""){let n=this.chords_in_emphasis.indexOf(t);n!=-1&&this.chords_in_emphasis.splice(n,1)}toggle_outer_bubbles(){$(".smallBubble.outer").toggle(),$(".arrows-ext").toggle()}remove_all_tonas(){for(let t=0;t<=16;t++)t==7||t==8||t==9||($("#whole_tona_"+t).hide(),$("#whole_tona_background_"+t).hide(),$("#whole_tona_intermediate_"+t).hide());$("#whole_tona_background_7").hide(),$("#whole_tona_background_9").hide(),$("#rectV_9").hide(),$("#arrows_T_9").hide(),$("#arrowsMidL_T_9").hide(),$("#arrowsMidR_T_9").hide()}show_all_tonas(){return new Promise(t=>{let n=0,e=()=>{n++,n==40&&t("resolved")};for(let i=0;i<15;i++)i==7||i==8||i==9||($("#whole_tona_"+i).show("fast",e),$("#whole_tona_background_"+i).show("fast",e),$("#whole_tona_intermediate_"+i).show("fast",e));$("#rectV_9").show("fast",e),$("#arrows_T_9").show("fast",e),$("#arrowsMidL_T_9").show("fast",e),$("#arrowsMidR_T_9").show("fast",e)})}debug(){return zl(this,null,function*(){this.show_all_tonas().then(()=>{let t={tonality:"C",is_locked_to_score:!0,score_tonality:"D"};this.change_tonality(t),setTimeout(()=>{this.remove_all_tonas()},1)})})}is_prev_tona(t){return this.tonas_displayed.indexOf(t+1)!=-1}is_next_tona(t){return this.tonas_displayed.indexOf(t-1)!=-1}is_cur_tona(t){return this.tonas_displayed.indexOf(t)!=-1}COF_set_roman_mode(t="ionian"){t==""?this.roman_mode_engaged=!1:this.roman_mode_engaged=!0,["ionian","dorian","phrygian","lydian","mixolydian","aeolian","locrian",""].indexOf(t)==-1&&(console.warn("COF_SET_ROMAN_MODE : wrong mode ! ('ionian'|'dorian'|'phrygian'|'lydian'|'mixolydian'|'aeolian'|'locrian'|'') : ",t),t="ionian"),this.roman_mode=t,this.add_emphasis_diatonic_scale(this.tonality_focused,t==""?"major":t)}get_mode_rotation(t,n="ionian"){n||(n="major");let i={ionian:0,"":0,major:0,mixolydian:11,dorian:10,minor:9,aeolian:9,phrygian:8,locrian:7,lydian:1}[n];i==null&&(console.warn("COF_SET_ROMAN_MODE : wrong mode ! ('ionian'|'dorian'|'phrygian'|'lydian'|'mixolydian'|'aeolian'|'locrian'|'') : ",n),i=0);let r=["C","G","D","A","E","B","Gb","Db","Ab","Eb","Bb","F"],s=["C","G","D","A","E","B","F#","C#","G#","D#","A#","F"],a=["A","E","B","F#","C#","G#","Eb","Bb","F","C","G","D"];t=="C#"?t="Db":t=="G#"?t="Ab":t=="D#"?t="Eb":t=="A#"?t="Bb":t=="F#"&&(t="Gb");let l,d;r.indexOf(t)==-1?(l=(s.indexOf(t)+i)%12,d=s[l]):(l=(r.indexOf(t)+i)%12,d=r[l]);let u=n=="aeolian"?"minor":n,h=d=="Gb"?"F#":d;return this.roman_mode=u,[h,u]}static{this.\u0275fac=function(n){return new(n||BraidComponent)(Le(nr),Le(on),Le(Ci),Le($a),Le(Hn),Le(Sa),Le(hi),Le(yi),Le(Pu))}}static{this.\u0275cmp=zt({type:BraidComponent,selectors:[["app-braid"]],inputs:{cur_chord:"cur_chord",chordsInScore:"chordsInScore",braidModel:"braidModel",is_roman:"is_roman",one_tona_mode:"one_tona_mode",zoom_val:"zoom_val"},outputs:{askChordsInScore:"askChordsInScore"},standalone:!1,decls:299,vars:17,consts:[["id","braid-tonal",3,"hidden"],[1,"braid",2,"width","100%","height","100%"],["id","braid-tonal-svg","version","1.1","width","100%","viewBox","-10 40 320 1600","xmlns","http://www.w3.org/2000/svg",1,"braid-svg",3,"load"],["id","greenGradient","x1","0.5","x2","0.8","y1","0.1","y2","0.8"],["offset","0%","stop-color","#00a450"],["offset","100%","stop-color","#416c63"],["id","greyGradient","x1","0.1","y1","0.1","x2","1","y2","1"],["offset","0%","stop-color","#7f8899"],["offset","100%","stop-color","#58595b"],["id","greyGradient0","x1","0.1","y1","0.1","x2","1","y2","1"],["offset","0%","stop-color","#6d7481"],["offset","100%","stop-color","#545659"],["id","greyGradient1","x1","0.1","y1","0.1","x2","1","y2","1"],["offset","0%","stop-color","#6a717f"],["offset","100%","stop-color","#505255"],["id","greyGradient2","x1","0.1","y1","0.1","x2","1","y2","1"],["offset","0%","stop-color","#5f6472"],["offset","100%","stop-color","#494c4f"],["id","greyGradient3","x1","0.1","y1","0.1","x2","1","y2","1"],["offset","0%","stop-color","#5e636e"],["offset","100%","stop-color","#46494c"],["id","greyGradient4","x1","0.1","y1","0.1","x2","1","y2","1"],["offset","0%","stop-color","#5d646f"],["offset","100%","stop-color","#4b4c4e"],["id","greyGradient5","x1","0.1","y1","0.1","x2","1","y2","1"],["offset","0%","stop-color","#5c626d"],["offset","100%","stop-color","#4a4b4d"],["id","greyGradient6","x1","0.1","y1","0.1","x2","1","y2","1"],["offset","0%","stop-color","#585d65"],["offset","100%","stop-color","#434446"],["id","greyGradient7","x1","0.1","y1","0.1","x2","1","y2","1"],["offset","0%","stop-color","#575d69"],["offset","100%","stop-color","#404245"],["id","greyGradient8","x1","0.1","y1","0.1","x2","1","y2","1"],["offset","0%","stop-color","#4f555f"],["offset","100%","stop-color","#3a3d41"],["id","greyGradient9","x1","0.1","y1","0.1","x2","1","y2","1"],["offset","0%","stop-color","#434a51"],["offset","100%","stop-color","#3a3f45"],["id","eraseGradient","x1","0.1","y1","0.1","x2","1","y2","1"],["offset","0%","stop-color","#343a40"],["offset","100%","stop-color","#343a40"],["id","greenOrangeGradient","x1","0.1","y1","0.1","x2","1","y2","1"],["offset","0%","stop-color","#979da2ff"],["offset","100%","stop-color","#f1ded7ff"],["id","f1"],["in","SourceGraphic","stdDeviation","3"],["id","f2"],["in","SourceAlpha","stdDeviation","4","result","imgBlur"],["in","imgBlur","surfaceScale","2","specularConstant",".75","specularExponent","20","lighting-color","#bbbbbb","result","imgSpecular"],["x","-5","y","-100","z","100"],["in","imgSpecular","in2","SourceAlpha","operator","in","result","imgMasked"],["in","SourceGraphic","in2","imgMasked","operator","arithmetic","k1","0","k2","1","k3","2","k4","0"],["id","leftCommaXL",2,"transform","scale(1.5) translate(-33px, -203px)"],["d","m 32.734375,179.20618 c 0,0 12.113735,-0.82137 8.401424,13.54174 -2.342291,6.20927 -8.707643,9.85526 -9.083293,10.09833 -0.68501,0.48614 -8.461794,5.67897 -9.257288,11.5789 -0.352227,3.65595 -0.689274,10.31176 10.020883,11.82129 -9.013122,0.002 -23.157482,-6.89426 -23.144332,-23.81622 0.01445,-18.60061 15.886974,-23.24613 23.062606,-23.22404 z"],["id","rightCommaXL",2,"transform","scale(1.5) translate(-33px, -203px)"],["d","m 33.024778,226.20487 c 0,0 -13.443364,-0.0489 -9.683064,-13.47923 1.243181,-4.30995 6.111411,-8.15928 9.392661,-10.28428 3.21875,-2.125 6.102754,-5.36321 7.859805,-8.419 4.860534,-14.74796 -6.999423,-14.84859 -6.999423,-14.84859 6.473148,0 21.785508,5.24551 22.271648,23.5419 0.48613,18.29638 -16.172921,23.52203 -22.841627,23.4892 z"],["id","leftArrow"],["d","m-21.4 6.82c3.4-2.29 9.5 2.32 13.9-.5-5.07-3.38-9.5-8.43-14-13.2.027 4.38-.438 9.39.09 13.7z"],["d","m-21.5-6.87c.996.215 2 .223 3 .0117.961-.203 1.88-.664 2.81-1.06.949-.406 1.91-.695 2.91-.648 1.01.043 2 .402 2.95.898 1.87.969 3.67 2.34 5.35 3.9 1.74 1.62 3.36 3.49 5.09 5.14 1.54 1.47 3.15 2.73 4.73 4.1.16.137.961-.106 1.12.0312-1.53 1.27-3.74 2.67-5.51 2.9-1.82.238-3.75.137-5.52-.551-1.19-.457-2.34-1.12-3.46-1.86-.91-.606-1.78-1.28-2.67-1.97l-1.49-1.34-2.02-1.95-1.74-1.75-1.74-1.84-1.95-2.11-1.87-1.89"],["d","m-6.82-5.8c.059.0508.426-.227.496-.266.176-.0977.352-.195.527-.293.367-.207.734-.41 1.1-.609.762-.41 1.54-.789 2.32-1.06.781-.27 1.59-.426 2.4-.438 1.23-.0195 2.44.473 3.56 1.22.324.223.648.461.957.719.547.449 1.09.953 1.7 1.16.289.0977.586.0937.879.121.141.0156.5.16.508-.188v-.453c.01-.34 0-.684 0-1.03v-3.84l1.65 1.34v5.32s-14 .004-14.1.004c-.047 0-.145-.125-.184-.16-.152-.133-.309-.27-.461-.402-.355-.309-.707-.617-1.06-.926-.082-.0742-.168-.144-.254-.219z"],["d","m5.88 5.35s1.09.0664 1.75.0664h1.65v5.18l11.8-9.93-11.8-10.1v5.49l-13.8-.168-.098.215 4.64 4.69s1.28 1.27 2.69 2.5 2.41 1.95 2.41 1.95z"],["id","leftCommaSM",2,"transform","scale(1.2) translate(-35px, -200px)"],["id","rightCommaSM",2,"transform","scale(1.2) translate(-35px, -200px)"],["id","rightArrow","transform","scale(-1 1)"],["id","circle",2,"transform","translate(-150px, -160px)"],["cx","150.45","cy","161.55","r","84.076797","d","M 234.52679,161.55 A 84.076797,84.076797 0 0 1 150.45,245.6268 84.076797,84.076797 0 0 1 66.373199,161.55 84.076797,84.076797 0 0 1 150.45,77.473206 84.076797,84.076797 0 0 1 234.52679,161.55 Z"],["id","rectHleft"],["d","m-22.4-9.55s22.9 9.15 44.7 0c-2.41 5.55-2.64 13.9-.624 19.1-.158.158-19.8-8.2-44.7 0 3.17-4.85 3.33-12.9.002-19.1z"],["id","rectHright","transform","rotate(180)"],["id","rectV"],["d","m-17-26s19.6 25.5 0 52c.631-.631 18.1-8.98 33.1-.312-.315 0-19.6-25.8 0-51.4 0-.315-16.6 9.22-33.1-.312z"],["id","arrow"],["d","m5.46-8.1-5.75 7.18-5.78-7.19v7.14l5.77 9.14 5.72-8.97z"],["id","arrowL","transform","rotate(-90)"],["id","arrowR","transform","rotate(90)"],["transform","translate(150 0) scale(0.9)"],[3,"display",4,"ngFor","ngForOf"],["class","tona simpleShape",3,"display",4,"ngFor","ngForOf"],["id","braid-blues",3,"hidden"],["id","braid_blues_svg","version","1.1","width","100%","viewBox","-10 50 320 1600","xmlns","http://www.w3.org/2000/svg",1,"braid-svg",3,"load"],["id","greenGradientBlues","x1","0.5","x2","0.8","y1","0.1","y2","0.8"],["id","greyGradientBlues","x1","0.1","y1","0.1","x2","1","y2","1"],["id","greyGradient0Blues","x1","0.1","y1","0.1","x2","1","y2","1"],["id","greyGradient1Blues","x1","0.1","y1","0.1","x2","1","y2","1"],["id","greyGradient2Blues","x1","0.1","y1","0.1","x2","1","y2","1"],["id","greyGradient3Blues","x1","0.1","y1","0.1","x2","1","y2","1"],["id","greyGradient4Blues","x1","0.1","y1","0.1","x2","1","y2","1"],["id","greyGradient5Blues","x1","0.1","y1","0.1","x2","1","y2","1"],["id","greyGradient6Blues","x1","0.1","y1","0.1","x2","1","y2","1"],["id","greyGradient7Blues","x1","0.1","y1","0.1","x2","1","y2","1"],["id","greyGradient8Blues","x1","0.1","y1","0.1","x2","1","y2","1"],["id","greyGradient9Blues","x1","0.1","y1","0.1","x2","1","y2","1"],["id","eraseGradientBlues","x1","0.1","y1","0.1","x2","1","y2","1"],["id","greenOrangeGradientBlues","x1","0.1","y1","0.1","x2","1","y2","1"],["id","f1Blues"],["id","f2Blues"],["id","centerCommaXLBlues",2,"transform","translate(-151px, -80px)"],["d","M 134.75245,51.925521 C 122.79293,57.699114 106.50542,80.34136 126.91778,104.45123 106.86566,80.816497 127.72661,58.591246 149.9981,81.281364 178.31376,66.941328 162.42857,38.10778 134.75245,51.925521 Z"],["id","leftCommaXLBlues",2,"transform","translate(-151px, -80px)"],["d","m 126.79203,104.3306 c 24.47774,21.62735 56.18127,2.69932 55.99164,-24.07104 0.0349,31.87926 -32.1397,32.7236 -32.79432,0.873722 -22.52574,-22.479653 -42.63979,-0.91969 -23.19732,23.197318 z"],["id","rightCommaXLBlues",2,"transform","translate(-151px, -80px)"],["d","m 134.61687,52.080563 c 24.72127,-11.894162 47.05093,5.884524 48.00186,28.260797 0.0349,31.87926 -32.13968,32.72361 -32.9113,0.901177 28.31566,-14.340036 13.6367,-42.983346 -15.09056,-29.161974 z"],["id","leftArrowBlues"],["id","leftCommaSMBlues",2,"transform","scale(1.2) translate(-35px, -200px)"],["id","rightCommaSMBlues",2,"transform","scale(1.2) translate(-35px, -200px)"],["id","rightArrowBlues","transform","scale(-1 1)"],["id","circleBlues",2,"transform","translate(-150px, -160px)"],["id","rectHleftBlues"],["id","rectHrightBlues","transform","rotate(180)"],["id","rectVBlues"],["id","arrowBlues"],["id","arrowLBlues","transform","rotate(-90)"],["id","arrowRBlues","transform","rotate(90)"],["class","tona",3,"display",4,"ngFor","ngForOf"],["id","braid1",3,"hidden"],[1,"braid",2,"width","100%","height","100%","margin-top","50px"],["version","1.1","width","100%","viewBox","26 -115 100 480","xmlns","http://www.w3.org/2000/svg",1,"braid-svg"],["id","darkGlowN1","filterUnits","userSpaceOnUse","x","-50%","y","-50%","width","200%","height","200%"],["in","SourceGraphic","stdDeviation","5","result","blur5"],["in","SourceGraphic","stdDeviation","10","result","blur10"],["result","blur-merged"],["in","blur10"],["result","darkGlow","in","blur-merged","type","matrix","values",`1 0 0 0 0
                                       0 0.06 0 0 0
                                       0 0 0.44 0 0
                                       0 0 0 1 0`],["in","darkGlow"],["in","blur5"],["in","SourceGraphic"],["id","fifth_left_up"],["d","m 30.138448,-75.129942 c -3.554333,-4.043042 -3.594285,-9.911651 0.302154,-13.80809 3.89644,-3.896434 9.813925,-3.856501 13.808102,-0.302152 z"],["id","fifth_left_down"],["d","m 44.855261,-88.633627 c 3.554333,4.043045 3.594285,9.911651 -0.302154,13.808088 -3.89644,3.896437 -9.813925,3.856503 -13.808075,0.302157 z"],["id","fifth_right_up"],["d","m 107.75844,-75.129937 c -3.55433,-4.043045 -3.59426,-9.911651 0.30216,-13.808087 3.89644,-3.896437 9.81392,-3.856504 13.8081,-0.302157 z"],["id","fifth_right_down"],["d","m 122.47526,-88.633621 c 3.55435,4.043042 3.59428,9.911651 -0.30216,13.80809 -3.89644,3.896434 -9.8139,3.856501 -13.80807,0.302152 z"],["id","left_up"],["d","m 43.309168,-61.936732 c -3.554333,-4.043043 -3.594285,-9.911652 0.302154,-13.808091 3.89644,-3.896434 9.813925,-3.856501 13.808077,-0.302152 z"],["id","left_down"],["d","m 117.23606,142.82796 c 13.4337,15.2808 13.5847,37.46136 -1.142,52.18805 -14.7267,14.72669 -37.092005,14.57576 -52.188105,1.14201 z","transform","matrix(0.26458333,0,0,0.26458333,27.007275,-113.23032)"],["id","right_up"],["d","m 94.597643,-61.970461 c -3.554333,-4.043045 -3.594285,-9.911652 0.302155,-13.808088 3.896439,-3.896437 9.813922,-3.856504 13.808072,-0.302157 z"],["id","right_down"],["d","m 109.31446,-75.474146 c 3.55433,4.043042 3.59428,9.911651 -0.30216,13.808091 -3.89644,3.896434 -9.813923,3.8565 -13.808099,0.302151 z"],["id","center_left"],["d","m 63.443088,-83.238024 c -6.224746,-7.08062 -6.294702,-17.358366 0.529167,-24.182236 6.823869,-6.82387 17.187201,-6.75393 24.182229,-0.52917 z"],["id","center_right"],["d","m 89.574317,-106.52961 c 6.224773,7.080624 6.294702,17.358371 -0.529167,24.18224 -6.823842,6.823866 -17.187174,6.753928  -24.182228,0.529166 z"],["id","big-arrow_R"],["d","m 103.0931,-58.373141 h -2.43062 l 1.26666,2.345065 z"],["d","m 103.0931,-56.435238 h -2.43062 l 1.26666,2.345066 z"],["d","m 103.0931,-54.49735 h -2.43062 l 1.26666,2.345066 z"],["id","arrow_R0"],["d","m 93.313753,-67.491112 v -2.430631 l -2.345082,1.266671 z","d","m 108.61746,-62.836096 -1.71657,1.720882 2.55485,0.759322 z"],["id","arrow_R1"],["d","m 93.313753,-67.491112 v -2.430631 l -2.345082,1.266671 z"],["id","big-arrow_L"],["d","m 52.119952,-58.373147 h -2.430621 l 1.266666,2.345066 z"],["d","m 52.119952,-56.435243 h -2.430621 l 1.266666,2.345066 z"],["d","m 52.119952,-54.497355 h -2.430621 l 1.266666,2.345065 z"],["id","arrow_L0"],["d","m 59.667431,-69.919767 v 2.430632 l 2.345055,-1.266672 z"],["id","arrow_L1"],["d","m 45.27,-61.28064 -1.718654,-1.71876 -0.762609,2.553853 z"],["id","arrow_FR"],["d","m 110.14353,-75.256148 -1.71868,-1.71876 -0.76258,2.553854 z"],["id","arrow_FL"],["d","m 43.884452,-76.52582 -1.716564,1.720882 2.554843,0.759322 z"],["id","arrow_C"],["d","m 77.545248,-85.452539 h -2.430622 l 1.266667,2.345066 z"],["id","circleN1"],["cx","81.927818","cy","-55.48246","rx","23.623093","ry","24.518995","transform","translate(-5.4 -13.5)"],[4,"ngFor","ngForOf"],["class","tona simpleShape",4,"ngFor","ngForOf"],["id","braid2",3,"hidden"],["id","darkGlowN2"],["operator","dilate","radius","5","in","SourceAlpha","result","OUTLINE_10"],["stdDeviation","4","in","SourceAlpha","result","LIGHTING-EFFECTS_10"],["surfaceScale","5","specularConstant","0.8","specularExponent","7.5","lighting-color","#white","in","LIGHTING-EFFECTS_10","result","LIGHTING-EFFECTS_20"],["x","-250","y","-50","z","300"],["operator","in","in","LIGHTING-EFFECTS_20","in2","SourceAlpha","result","LIGHTING-EFFECTS_30"],["in","SourceGraphic","in2","LIGHTING-EFFECTS_30","operator","arithmetic","k1","1","k2","1","k3","1","k4","0","result","LIGHTING-EFFECTS_40"],["in","LIGHTING-EFFECTS_40","result","COLOR-EFFECTS_10"],["type","gamma","offset","-0.3","amplitude","1.1","exponent","4.84"],["type","gamma","offset","13.3","amplitude","0.1","exponent","1.84"],["type","gamma","offset","-0.3","amplitude","3.1","exponent","4.84"],["in","OUTLINE_20"],["in","COLOR-EFFECTS_10"],["id","center_leftN2"],["d","m 82.149815,-114.61615 -12.138189,0.0488 -6.025002,10.53625 6.111294,10.485627 z"],["id","center_rightN2"],["d","m 81.99968,-114.61615 -12.051894,21.070651 12.138184,-0.04878 6.02501,-10.536271 z"],["id","fifth_right_upN2"],["d","m 119.08842,-93.380713 -12.13819,0.04878 -6.025,10.536249 6.1113,10.485637 z"],["id","fifth_right_downN2"],["d","m 119.35203,-93.380715 -12.05189,21.070654 12.13817,-0.04878 6.02501,-10.536279 z"],["id","fifth_left_upN2"],["d","m 44.631518,-93.336748 -12.138189,0.04879 -6.025002,10.536248 6.111294,10.485638 z"],["id","fifth_left_downN2"],["d","m 44.926221,-93.283668 -12.051896,21.070656 12.138178,-0.04879 6.025012,-10.536278 z"],["id","right_upN2"],["d","m 100.40764,-82.670082 -12.138196,0.04878 -6.025002,10.536282 6.111294,10.485637 z"],["id","right_downN2"],["d","m 100.67125,-82.670082 -12.051903,21.070693 12.138183,-0.04879 6.02502,-10.536283 z"],["id","left_upN2"],["d","m 63.462427,-82.670082 -12.138188,0.04878 -6.025002,10.536282 6.111294,10.485637 z"],["id","left_downN2"],["d","m 63.726037,-82.670082 -12.051896,21.070693 12.13818,-0.04879 6.025011,-10.536283 z"],["id","skull_FL"],["d","m 45.299237,-50.483132 -12.805909,-0.117298 -6.025002,-10.614611 6.111295,-11.051031 12.719616,0.181046"],["id","skull_FR"],["d","m 106.78255,-72.184462 12.65576,-0.174379 6.02501,10.675454 -6.0184,11.077754 -12.66237,0.02306"],["id","skull_CLU"],["d","m 69.97888,-72.35401 -6.166559,10.705826 z"],["id","skull_CRU"],["d","M 88.110977,-61.538048 82.117059,-72.40279 Z"],["id","skull_CD"],["d","M 82.848286,-93.28955 H 69.472219"],["id","circleN2"],["_ngcontent-lox-c51","","cx","76","cy","-61.5","rx","12","ry","12"],["id","zoomed"],[1,"chord-zoomed"],["class","braidBack",0,"xlink","href","#circle",4,"ngIf"],[0,"xlink","href","#circle",1,"braidBack"],[1,"tona","simpleShape"],[0,"xlink","href","#rectV","transform","translate(0 45)",3,"display",4,"ngIf"],[0,"xlink","href","#rectHright","transform","translate(50 0)",4,"ngIf"],[0,"xlink","href","#rectHleft","transform","translate(-50 0)",4,"ngIf"],[4,"ngIf"],[3,"display",4,"ngIf"],["transform","rotate(-30)",3,"display",4,"ngIf"],["transform","rotate(30)",3,"display",4,"ngIf"],[0,"xlink","href","#rectV","transform","translate(0 45)"],[0,"xlink","href","#rectHright","transform","translate(50 0)"],[0,"xlink","href","#rectHleft","transform","translate(-50 0)"],[0,"xlink","href","#arrowR","transform","translate(45 0)"],[0,"xlink","href","#arrowL","transform","translate(-46 0)"],[0,"xlink","href","#arrow","transform","translate(0 45)"],[0,"xlink","href","#arrow","transform","translate(-92 48)"],[0,"xlink","href","#arrow","transform","translate(94 48)"],["transform","rotate(-30)"],[0,"xlink","href","#arrow","transform","translate(-105 -70)"],["transform","rotate(30)"],[0,"xlink","href","#arrow","transform","translate(105 -70)"],[0,"xlink","href","#arrow","transform","translate(105 75)"],[0,"xlink","href","#arrow","transform","translate(-105 75)"],[1,"medBubble"],[1,"bub",3,"click","mouseleave"],[0,"xlink","href","#leftCommaXL"],["y","-6"],[0,"xlink","href","#rightCommaXL"],["class","right duo","x","0","y","19",4,"ngIf"],["class","right duo roman","x","0","y","19",4,"ngIf"],["class","smallBubble","transform","translate(-85 0)",4,"ngIf"],["class","smallBubble","transform","translate(90 0)",4,"ngIf"],["class","smallBubble outer","transform","translate(-130 45)",3,"display",4,"ngIf"],["class","smallBubble outer","transform","translate(130 45)",3,"display",4,"ngIf"],["x","0","y","19",1,"right","duo"],["x","0","y","19",1,"right","duo","roman"],["transform","translate(-85 0)",1,"smallBubble"],[0,"xlink","href","#leftCommaSM"],["x","-20","y","-4"],[0,"xlink","href","#rightCommaSM"],["x","-5","y","16"],["transform","translate(90 0)",1,"smallBubble"],["y","-4"],["x","0","y","16"],["transform","translate(-130 45)",1,"smallBubble","outer"],[0,"xlink","href","#leftCommaSM",1,"comma"],["x","-22","y","-4"],[0,"xlink","href","#rightCommaSM",1,"comma"],["y","14"],["transform","translate(130 45)",1,"smallBubble","outer"],["y","13"],[0,"xlink","href","#circleBlues",4,"ngIf"],[0,"xlink","href","#circleBlues"],[1,"tona"],[0,"xlink","href","#rectVBlues","transform","translate(0 45)",3,"display",4,"ngIf"],[0,"xlink","href","#rectHrightBlues","transform","translate(50 0)",4,"ngIf"],[0,"xlink","href","#rectHleftBlues","transform","translate(-50 0)",4,"ngIf"],[0,"xlink","href","#rectVBlues","transform","translate(0 45)"],[0,"xlink","href","#rectHrightBlues","transform","translate(50 0)"],[0,"xlink","href","#rectHleftBlues","transform","translate(-50 0)"],[0,"xlink","href","#arrowRBlues","transform","translate(45 0)"],[0,"xlink","href","#arrowLBlues","transform","translate(-50 0)"],[0,"xlink","href","#arrowBlues","transform","translate(0 45)"],[0,"xlink","href","#arrowBlues","transform","translate(-92 48)"],[0,"xlink","href","#arrowBlues","transform","translate(94 48)"],[0,"xlink","href","#arrowBlues","transform","translate(-105 -70)"],[0,"xlink","href","#arrowBlues","transform","translate(105 -70)"],[0,"xlink","href","#arrowBlues","transform","translate(105 75)"],[0,"xlink","href","#arrowBlues","transform","translate(-105 75)"],[0,"xlink","href","#centerCommaXLBlues"],["x","2","y","-12"],[0,"xlink","href","#rightCommaXLBlues"],["class","right","x","8","y","10",4,"ngIf"],[0,"xlink","href","#leftCommaXLBlues"],["y","18"],["class","smallBubble","transform","translate(-90 0)",4,"ngIf"],["class","smallBubble","transform","translate(95 0)",4,"ngIf"],["class","smallBubble outer","transform","translate(135 45)",3,"display",4,"ngIf"],["x","8","y","10",1,"right"],["transform","translate(-90 0)",1,"smallBubble"],[0,"xlink","href","#leftCommaSMBlues"],["y","-2"],[0,"xlink","href","#rightCommaSMBlues"],["transform","translate(95 0)",1,"smallBubble"],["x","-19","y","-2"],["x","0","y","14"],[0,"xlink","href","#leftCommaSMBlues",1,"comma"],[0,"xlink","href","#rightCommaSMBlues",1,"comma"],["x","-3","y","14"],["transform","translate(135 45)",1,"smallBubble","outer"],[0,"xlink","href","#circleN1",4,"ngIf"],[0,"xlink","href","#circleN1"],["transform","translate(0 -26.4)",4,"ngIf"],[1,"token","ctrU",3,"click"],[0,"xlink","href","#center_left"],["y","-96.826027"],[1,"token","ctrD",3,"click"],[0,"xlink","href","#center_right"],["class","right duo braid-chords big","x","78.733383","y","-87.5",4,"ngIf"],["class","right duo roman braid-chords big","x","78.733383","y","-87.5",4,"ngIf"],[1,"token","fifLU",3,"click"],[0,"xlink","href","#fifth_left_up"],["y","-83.503036"],[1,"token","fifLD",3,"click"],[0,"xlink","href","#fifth_left_down"],["y","-77.906845"],[1,"token","fifRU",3,"click"],[0,"xlink","href","#fifth_right_up"],["y","-83.109123"],[1,"token","fifRD",3,"click"],[0,"xlink","href","#fifth_right_down"],["y","-77.450386"],["transform","translate(0 -26.4)"],[1,"token","sidLU",3,"click"],[0,"xlink","href","#left_up"],["y","-69.878464"],["class","token sidLD",3,"click",4,"ngIf"],[1,"token","sidLD",3,"click"],[0,"xlink","href","#left_down"],["x","48.9","y","-63.159477"],[1,"token","sidRU",3,"click"],[0,"xlink","href","#right_up"],["y","-70.189491"],["class","token sidRD",3,"click",4,"ngIf"],[1,"token","sidRD",3,"click"],[0,"xlink","href","#right_down"],["x","102.6119","y","-63.179623"],["x","78.733383","y","-87.5",1,"right","duo","braid-chords","big"],["x","78.733383","y","-87.5",1,"right","duo","roman","braid-chords","big"],[0,"xlink","href","#big-arrow_R"],[0,"xlink","href","#arrow_R0"],[0,"xlink","href","#arrow_R1"],[0,"xlink","href","#big-arrow_L"],[0,"xlink","href","#arrow_L1"],[0,"xlink","href","#arrow_L0"],[0,"xlink","href","#arrow_FR"],[0,"xlink","href","#arrow_FL"],[0,"xlink","href","#arrow_C"],[1,"token","middle",3,"click"],[0,"xlink","href","#center_leftN2"],["y","-104.1017"],[0,"xlink","href","#center_rightN2"],["class","right duo braid-chords big","x","76","y","-99.076569",4,"ngIf"],["class","right duo roman braid-chords big","x","76","y","-99.076569",4,"ngIf"],["transform","translate(0 -21.25)",4,"ngIf"],["x","76","y","-99.076569",1,"right","duo","braid-chords","big"],["x","76","y","-99.076569",1,"right","duo","roman","braid-chords","big"],[1,"token","fifth",3,"click"],[0,"xlink","href","#fifth_right_upN2"],["y","-83.471275"],[0,"xlink","href","#fifth_right_downN2"],["y","-78.988449"],[0,"xlink","href","#fifth_left_upN2"],["y","-83.163498"],[0,"xlink","href","#fifth_left_downN2"],["y","-77.714493"],["transform","translate(0 -21.25)"],[1,"token","side",3,"click"],[0,"xlink","href","#right_upN2"],["y","-71.930176"],[0,"xlink","href","#right_downN2"],["y","-67.454323"],[0,"xlink","href","#left_upN2"],["y","-71.780281"],[0,"xlink","href","#left_downN2"],["x","56.5","y","-66.784576"],[0,"xlink","href","#skull_CLU"],[0,"xlink","href","#skull_CRU"],[0,"xlink","href","#skull_CLU","transform","translate(-19 -10.25)"],[0,"xlink","href","#skull_CRU","transform","translate(18.85 -10.25)"],[0,"xlink","href","#skull_CRU","transform","translate(-37 0)"],[0,"xlink","href","#skull_CLU","transform","translate(37 0)"],[0,"xlink","href","#skull_CRU","transform","translate(-18 -10.5)",4,"ngIf"],[0,"xlink","href","#skull_CLU","transform","translate(18 -10.5)",4,"ngIf"],[0,"xlink","href","#skull_CD","transform","translate(-37.5 0)",4,"ngIf"],[0,"xlink","href","#skull_CD","transform","translate(37 0)",4,"ngIf"],[0,"xlink","href","#skull_CD","transform","translate(-0.2 0)"],[0,"xlink","href","#skull_CD","transform","translate(-19 10.5)"],[0,"xlink","href","#skull_CD","transform","translate(18 10.5)"],[0,"xlink","href","#skull_CRU","transform","translate(-18 -10.5)"],[0,"xlink","href","#skull_CLU","transform","translate(18 -10.5)"],[0,"xlink","href","#skull_CD","transform","translate(-37.5 0)"],[0,"xlink","href","#skull_CD","transform","translate(37 0)"],[0,"xlink","href","#circleN2",4,"ngIf"],[0,"xlink","href","#circleN2"]],template:function(n,e){n&1&&(p(0,"section",0)(1,"div",1),ft(),p(2,"svg",2),J("load",function(){return e.svg_loaded()}),p(3,"defs")(4,"linearGradient",3),ie(5,"stop",4)(6,"stop",5),m(),p(7,"radialGradient",6),ie(8,"stop",7)(9,"stop",8),m(),p(10,"radialGradient",9),ie(11,"stop",10)(12,"stop",11),m(),p(13,"radialGradient",12),ie(14,"stop",13)(15,"stop",14),m(),p(16,"radialGradient",15),ie(17,"stop",16)(18,"stop",17),m(),p(19,"radialGradient",18),ie(20,"stop",19)(21,"stop",20),m(),p(22,"radialGradient",21),ie(23,"stop",22)(24,"stop",23),m(),p(25,"radialGradient",24),ie(26,"stop",25)(27,"stop",26),m(),p(28,"radialGradient",27),ie(29,"stop",28)(30,"stop",29),m(),p(31,"radialGradient",30),ie(32,"stop",31)(33,"stop",32),m(),p(34,"radialGradient",33),ie(35,"stop",34)(36,"stop",35),m(),p(37,"radialGradient",36),ie(38,"stop",37)(39,"stop",38),m(),p(40,"radialGradient",39),ie(41,"stop",40)(42,"stop",41),m(),p(43,"linearGradient",42),ie(44,"stop",43)(45,"stop",44),m(),p(46,"filter",45),ie(47,"feGaussianBlur",46),m(),p(48,"filter",47),ie(49,"feGaussianBlur",48),p(50,"feSpecularLighting",49),ie(51,"fePointLight",50),m(),ie(52,"feComposite",51)(53,"feComposite",52),m(),p(54,"g",53),ie(55,"path",54),m(),p(56,"g",55),ie(57,"path",56),m(),p(58,"g",57),ie(59,"path",58)(60,"path",59)(61,"path",60)(62,"path",61),m(),p(63,"g",62),ie(64,"path",54),m(),p(65,"g",63),ie(66,"path",56),m(),p(67,"g",64),ie(68,"path",58)(69,"path",59)(70,"path",60)(71,"path",61),m(),p(72,"g",65),ie(73,"path",66),m(),p(74,"g",67),ie(75,"path",68),m(),p(76,"g",69),ie(77,"path",68),m(),p(78,"g",70),ie(79,"path",71),m(),p(80,"g",72),ie(81,"path",73),m(),p(82,"g",74),ie(83,"path",73),m(),p(84,"g",75),ie(85,"path",73),m()(),p(86,"g",76),Wt(87,Sie,2,6,"g",77)(88,Vie,13,16,"g",78)(89,qie,14,19,"g",78),m()()()(),Ho(),p(90,"section",79)(91,"div",1),ft(),p(92,"svg",80),J("load",function(){return e.svg_loaded()}),p(93,"defs")(94,"linearGradient",81),ie(95,"stop",4)(96,"stop",5),m(),p(97,"radialGradient",82),ie(98,"stop",7)(99,"stop",8),m(),p(100,"radialGradient",83),ie(101,"stop",10)(102,"stop",11),m(),p(103,"radialGradient",84),ie(104,"stop",13)(105,"stop",14),m(),p(106,"radialGradient",85),ie(107,"stop",16)(108,"stop",17),m(),p(109,"radialGradient",86),ie(110,"stop",19)(111,"stop",20),m(),p(112,"radialGradient",87),ie(113,"stop",22)(114,"stop",23),m(),p(115,"radialGradient",88),ie(116,"stop",25)(117,"stop",26),m(),p(118,"radialGradient",89),ie(119,"stop",28)(120,"stop",29),m(),p(121,"radialGradient",90),ie(122,"stop",31)(123,"stop",32),m(),p(124,"radialGradient",91),ie(125,"stop",34)(126,"stop",35),m(),p(127,"radialGradient",92),ie(128,"stop",37)(129,"stop",38),m(),p(130,"radialGradient",93),ie(131,"stop",40)(132,"stop",41),m(),p(133,"linearGradient",94),ie(134,"stop",43)(135,"stop",44),m(),p(136,"filter",95),ie(137,"feGaussianBlur",46),m(),p(138,"filter",96),ie(139,"feGaussianBlur",48),p(140,"feSpecularLighting",49),ie(141,"fePointLight",50),m(),ie(142,"feComposite",51)(143,"feComposite",52),m(),p(144,"g",97),ie(145,"path",98),m(),p(146,"g",99),ie(147,"path",100),m(),p(148,"g",101),ie(149,"path",102),m(),p(150,"g",103),ie(151,"path",58)(152,"path",59)(153,"path",60)(154,"path",61),m(),p(155,"g",104),ie(156,"path",54),m(),p(157,"g",105),ie(158,"path",56),m(),p(159,"g",106),ie(160,"path",58)(161,"path",59)(162,"path",60)(163,"path",61),m(),p(164,"g",107),ie(165,"path",66),m(),p(166,"g",108),ie(167,"path",68),m(),p(168,"g",109),ie(169,"path",68),m(),p(170,"g",110),ie(171,"path",71),m(),p(172,"g",111),ie(173,"path",73),m(),p(174,"g",112),ie(175,"path",73),m(),p(176,"g",113),ie(177,"path",73),m()(),p(178,"g",76),Wt(179,Yie,2,5,"g",77)(180,sre,13,15,"g",114)(181,pre,18,23,"g",78),m()()()(),Ho(),p(182,"section",115)(183,"div",116),ft(),p(184,"svg",117)(185,"defs")(186,"filter",118),ie(187,"feGaussianBlur",119)(188,"feGaussianBlur",120),p(189,"feMerge",121),ie(190,"feMergeNode",122),m(),ie(191,"feColorMatrix",123),p(192,"feMerge"),ie(193,"feMergeNode",124)(194,"feMergeNode",125)(195,"feMergeNode",126),m()(),p(196,"g",127),ie(197,"path",128),m(),p(198,"g",129),ie(199,"path",130),m(),p(200,"g",131),ie(201,"path",132),m(),p(202,"g",133),ie(203,"path",134),m(),p(204,"g",135),ie(205,"path",136),m(),p(206,"g",137),ie(207,"path",138),m(),p(208,"g",139),ie(209,"path",140),m(),p(210,"g",141),ie(211,"path",142),m(),p(212,"g",143),ie(213,"path",144),m(),p(214,"g",145),ie(215,"path",146),m(),p(216,"g",147),ie(217,"path",148)(218,"path",149)(219,"path",150),m(),p(220,"g",151),ie(221,"path",152),m(),p(222,"g",153),ie(223,"path",154),m(),p(224,"g",155),ie(225,"path",156)(226,"path",157)(227,"path",158),m(),p(228,"g",159),ie(229,"path",160),m(),p(230,"g",161),ie(231,"path",162),m(),p(232,"g",163),ie(233,"path",164),m(),p(234,"g",165),ie(235,"path",166),m(),p(236,"g",167),ie(237,"path",168),m(),p(238,"g",169),ie(239,"ellipse",170),m()(),Wt(240,mre,2,3,"g",171)(241,Mre,13,15,"g",172)(242,Ire,8,8,"g",172),m()()(),Ho(),p(243,"section",173)(244,"div",1),ft(),p(245,"svg",117)(246,"defs")(247,"filter",174),ie(248,"feMorphology",175)(249,"feGaussianBlur",176),p(250,"feSpecularLighting",177),ie(251,"fePointLight",178),m(),ie(252,"feComposite",179)(253,"feComposite",180),p(254,"feComponentTransfer",181),ie(255,"feFuncR",182)(256,"feFuncG",183)(257,"feFuncB",184),m(),p(258,"feMerge"),ie(259,"feMergeNode",185)(260,"feMergeNode",186),m()(),p(261,"g",187),ie(262,"path",188),m(),p(263,"g",189),ie(264,"path",190),m(),p(265,"g",191),ie(266,"path",192),m(),p(267,"g",193),ie(268,"path",194),m(),p(269,"g",195),ie(270,"path",196),m(),p(271,"g",197),ie(272,"path",198),m(),p(273,"g",199),ie(274,"path",200),m(),p(275,"g",201),ie(276,"path",202),m(),p(277,"g",203),ie(278,"path",204),m(),p(279,"g",205),ie(280,"path",206),m(),p(281,"g",207),ie(282,"path",208),m(),p(283,"g",209),ie(284,"path",210),m(),p(285,"g",211),ie(286,"path",212),m(),p(287,"g",213),ie(288,"path",214),m(),p(289,"g",215),ie(290,"path",216),m(),p(291,"g",217),ie(292,"ellipse",218),m()(),Wt(293,Nre,11,13,"g",172)(294,Ure,7,7,"g",172)(295,Kre,8,8,"g",172)(296,eoe,2,3,"g",171),m(),Ho(),p(297,"div",219),ie(298,"span",220),m()()()),n&2&&(E("hidden",e.braidType!="tonal"),y(87),E("ngForOf",e.center_left),y(),E("ngForOf",e.center_left),y(),E("ngForOf",e.center_left),y(),E("hidden",e.braidType!="blues"),y(89),E("ngForOf",e.center_up),y(),E("ngForOf",e.center_up),y(),E("ngForOf",e.center_up),y(),E("hidden",e.braidType!="new1"),y(58),E("ngForOf",e.center_left),y(),E("ngForOf",e.center_left),y(),E("ngForOf",e.center_left),y(),E("hidden",e.braidType!="new2"),y(50),E("ngForOf",e.center_left),y(),E("ngForOf",e.center_left),y(),E("ngForOf",e.center_left),y(),E("ngForOf",e.center_left))},dependencies:[gi,vr],styles:['@font-face{font-family:nvxChord;src:url("./media/nvxFont.otf")}.braid-svg[_ngcontent-%COMP%]:focus{outline:none}section#braid-tonal[_ngcontent-%COMP%]   .greenCircle[_ngcontent-%COMP%]{opacity:.5;vector-effect:none;fill:none;fill-opacity:1;stroke:#769987;stroke-width:22.09639931;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;transition:all .25s ease}section#braid-tonal[_ngcontent-%COMP%]   .greenCircle.active[_ngcontent-%COMP%]{stroke:var(--green_nvx)!important;filter:url(#f2) saturate(2.5) drop-shadow(2px 4px 6px black)}section#braid-tonal[_ngcontent-%COMP%]   .largeCircle[_ngcontent-%COMP%]{fill:none;stroke-miterlimit:5.9;stroke-width:.15;stroke:#000}section#braid-tonal[_ngcontent-%COMP%]   .rect-arrow[_ngcontent-%COMP%]{fill:url(#greyGradient);stroke-width:.15px}section#braid-tonal[_ngcontent-%COMP%]   .rect-arrow.erase[_ngcontent-%COMP%]{fill:#343a40;stroke:#000;animation:_ngcontent-%COMP%_transitionClassic .25s forwards}@keyframes _ngcontent-%COMP%_transitionClassic{0%{fill:url(#greyGradient)}8%{fill:url(#greyGradient0)}16%{fill:url(#greyGradient1)}24%{fill:url(#greyGradient2)}32%{fill:url(#greyGradient3)}40%{fill:url(#greyGradient4)}48%{fill:url(#greyGradient5)}56%{fill:url(#greyGradient6)}64%{fill:url(#greyGradient7)}72%{fill:url(#greyGradient8)}80%{fill:url(#greyGradient9)}88%{fill:url(#eraseGradient)}96%{fill:url(#eraseGradient)}to{fill:url(#eraseGradient);stroke:#000}}section#braid-tonal[_ngcontent-%COMP%]   .smallBubble[_ngcontent-%COMP%]{fill:url(#greyGradient)}section#braid-tonal[_ngcontent-%COMP%]   .smallBubble[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{font-family:nvxChord;fill:#000;font-size:.7em;text-anchor:left}section#braid-tonal[_ngcontent-%COMP%]   .smallBubble[_ngcontent-%COMP%]   text.duo[_ngcontent-%COMP%]{font-size:.85em}section#braid-tonal[_ngcontent-%COMP%]   .smallBubble[_ngcontent-%COMP%]   text.duo.roman[_ngcontent-%COMP%]{font-size:.7em}section#braid-tonal[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]{fill:url(#greyGradient);transition:all .25s ease}section#braid-tonal[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:red;paint-order:markers fill stroke;stroke-linecap:round;stroke-width:2;stroke:#fb6161}section#braid-tonal[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.right[_ngcontent-%COMP%]{text-anchor:start;fill:#000;font-family:nvxChord;font-size:.9em;word-spacing:0px}section#braid-tonal[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.left[_ngcontent-%COMP%]{text-anchor:end;fill:#000;font-family:nvxChord;font-size:.9em;word-spacing:0px}section#braid-tonal[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.center[_ngcontent-%COMP%]{text-anchor:end;fill:#000;font-family:nvxChord;font-size:.9em;word-spacing:0px}section#braid-tonal[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.left.roman[_ngcontent-%COMP%], section#braid-tonal[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.center.roman[_ngcontent-%COMP%]{font-size:.7em}section#braid-tonal[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.right.duo[_ngcontent-%COMP%]{font-size:1.4em}section#braid-tonal[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.left.duo[_ngcontent-%COMP%]{font-size:1.4em}section#braid-tonal[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.left.duo.roman[_ngcontent-%COMP%]{font-size:1em}section#braid-tonal[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.right.duo.roman[_ngcontent-%COMP%]{font-size:1.2em}section#braid-tonal[_ngcontent-%COMP%]   .medBubble.active[_ngcontent-%COMP%]{fill:var(--lightblue_nvx)!important;filter:url(#f2) drop-shadow(4.5px 3px 3.5px var(--lightblue_nvx)) drop-shadow(-4.5px -3px 3.5px var(--lightblue_nvx))!important}section#braid-tonal[_ngcontent-%COMP%]   .medBubble.midi_active[_ngcontent-%COMP%]{fill:var(--yellow_nvx)!important;filter:url(#f2) drop-shadow(4.5px 3px 3.5px var(--yellow_nvx)) drop-shadow(-4.5px -3px 3.5px var(--yellow_nvx))!important}section#braid-tonal[_ngcontent-%COMP%]   .medBubble.midi_active_green[_ngcontent-%COMP%]{fill:var(--yellow_nvx)!important;filter:url(#f2) drop-shadow(4.5px 3px 3.5px var(--green_nvx)) drop-shadow(-4.5px -3px 3.5px var(--green_nvx))!important}section#braid-tonal[_ngcontent-%COMP%]   .medBubble.erase[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_transitionClassic .25s forwards}@keyframes _ngcontent-%COMP%_transitionClassic{0%{fill:url(#greyGradient)}8%{fill:url(#greyGradient0)}16%{fill:url(#greyGradient1)}24%{fill:url(#greyGradient2)}32%{fill:url(#greyGradient3)}40%{fill:url(#greyGradient4)}48%{fill:url(#greyGradient5)}56%{fill:url(#greyGradient6)}64%{fill:url(#greyGradient7)}72%{fill:url(#greyGradient8)}80%{fill:url(#greyGradient9)}88%{fill:url(#eraseGradient)}96%{fill:url(#eraseGradient)}to{fill:url(#eraseGradient);stroke:#000}}section#braid-tonal[_ngcontent-%COMP%]   .medBubble.erasenot[_ngcontent-%COMP%]{filter:drop-shadow(3px 4px 6px black) drop-shadow(-3px 4px 6px black)}section#braid-tonal[_ngcontent-%COMP%]   .arrows-2[_ngcontent-%COMP%]{fill:#3f4683;stroke-width:.15px;transition:all .25s ease}section#braid-tonal[_ngcontent-%COMP%]   .arrows-2.erase[_ngcontent-%COMP%]{fill:#343a40;stroke:#000}section#braid-tonal[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .arrows-2[_ngcontent-%COMP%]{fill:#1f27ff;filter:drop-shadow(0px 2px 4px #fff)}section#braid-tonal[_ngcontent-%COMP%]   .midi_active[_ngcontent-%COMP%]   .arrows-2[_ngcontent-%COMP%]{fill:#f8f8b9;filter:drop-shadow(0px 2px 4px #fff)}section#braid-tonal[_ngcontent-%COMP%]   .midi_active_green[_ngcontent-%COMP%]   .arrows-2[_ngcontent-%COMP%]{fill:#1f27ff;filter:drop-shadow(0px 2px 4px #fff)}section#braid-tonal[_ngcontent-%COMP%]   .simpleShape[_ngcontent-%COMP%]{fill:none;stroke-miterlimit:5.9;stroke-width:.15;stroke:#000}section#braid-tonal[_ngcontent-%COMP%]   .tona.erase[_ngcontent-%COMP%]   .greenCircle[_ngcontent-%COMP%]{stroke:#424a52}section#braid-blues[_ngcontent-%COMP%]   .greenCircle[_ngcontent-%COMP%]{opacity:.5;vector-effect:none;fill:none;fill-opacity:1;stroke:#769987;stroke-width:22.09639931;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;transition:all .25s ease}section#braid-blues[_ngcontent-%COMP%]   .greenCircle.active[_ngcontent-%COMP%]{stroke:var(--green_nvx)!important;filter:url(#f2Blues) saturate(2.5) drop-shadow(2px 4px 6px black)}section#braid-blues[_ngcontent-%COMP%]   .largeCircle[_ngcontent-%COMP%]{fill:none;stroke-miterlimit:5.9;stroke-width:.15;stroke:#000}section#braid-blues[_ngcontent-%COMP%]   .rect-arrow[_ngcontent-%COMP%]{fill:url(#greyGradientBlues);stroke-width:.15px}section#braid-blues[_ngcontent-%COMP%]   .rect-arrow.erase[_ngcontent-%COMP%]{fill:#343a40;stroke:#000;animation:_ngcontent-%COMP%_transitionBlues .25s forwards}@keyframes _ngcontent-%COMP%_transitionBlues{0%{fill:url(#greyGradientBlues)}8%{fill:url(#greyGradient0Blues)}16%{fill:url(#greyGradient1Blues)}24%{fill:url(#greyGradient2Blues)}32%{fill:url(#greyGradient3Blues)}40%{fill:url(#greyGradient4Blues)}48%{fill:url(#greyGradient5Blues)}56%{fill:url(#greyGradient6Blues)}64%{fill:url(#greyGradient7Blues)}72%{fill:url(#greyGradient8Blues)}80%{fill:url(#greyGradient9Blues)}88%{fill:url(#eraseGradientBlues)}96%{fill:url(#eraseGradientBlues)}to{fill:url(#eraseGradientBlues);stroke:#000}}section#braid-blues[_ngcontent-%COMP%]   .smallBubble[_ngcontent-%COMP%]{fill:url(#greenGradient)}section#braid-blues[_ngcontent-%COMP%]   .smallBubble[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{font-family:nvxChord;fill:#000;font-size:.7em;text-anchor:left}section#braid-blues[_ngcontent-%COMP%]   .smallBubble[_ngcontent-%COMP%]   text.duo[_ngcontent-%COMP%]{font-size:.85em}section#braid-blues[_ngcontent-%COMP%]   .smallBubble[_ngcontent-%COMP%]   text.duo.roman[_ngcontent-%COMP%]{font-size:.7em}section#braid-blues[_ngcontent-%COMP%]   .smallBubble[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{fill:var(--yellow_nvx);filter:url(#f2Blues) drop-shadow(0px 0 3px #fff)}section#braid-blues[_ngcontent-%COMP%]   .smallBubble.outer[_ngcontent-%COMP%]{fill:url(#greenGradientBlues)}section#braid-blues[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]{fill:url(#greyGradientBlues);transition:all .25s ease}section#braid-blues[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:red;paint-order:markers fill stroke;stroke-linecap:round;stroke-width:2;stroke:#fb6161}section#braid-blues[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.right[_ngcontent-%COMP%]{text-anchor:start;fill:#000;font-family:nvxChord;font-size:.9em;word-spacing:0px}section#braid-blues[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.left[_ngcontent-%COMP%]{text-anchor:end;fill:#000;font-family:nvxChord;font-size:.9em;word-spacing:0px}section#braid-blues[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.center[_ngcontent-%COMP%]{text-anchor:end;fill:#000;font-family:nvxChord;font-size:.9em;word-spacing:0px}section#braid-blues[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.left.roman[_ngcontent-%COMP%], section#braid-blues[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.center.roman[_ngcontent-%COMP%]{font-size:.7em}section#braid-blues[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.right.duo[_ngcontent-%COMP%]{font-size:1.4em}section#braid-blues[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.left.duo[_ngcontent-%COMP%]{font-size:1.4em}section#braid-blues[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.left.duo.roman[_ngcontent-%COMP%]{font-size:1em}section#braid-blues[_ngcontent-%COMP%]   .medBubble[_ngcontent-%COMP%]   text.right.duo.roman[_ngcontent-%COMP%]{font-size:1.2em}section#braid-blues[_ngcontent-%COMP%]   .medBubble.active[_ngcontent-%COMP%]{fill:var(--lightblue_nvx)!important;filter:url(#f2Blues) drop-shadow(4.5px 3px 3.5px var(--lightblue_nvx)) drop-shadow(-4.5px -3px 3.5px var(--lightblue_nvx))!important}section#braid-blues[_ngcontent-%COMP%]   .medBubble.midi_active[_ngcontent-%COMP%]{fill:var(--yellow_nvx)!important;filter:url(#f2Blues) drop-shadow(4.5px 3px 3.5px var(--yellow_nvx)) drop-shadow(-4.5px -3px 3.5px var(--yellow_nvx))!important}section#braid-blues[_ngcontent-%COMP%]   .medBubble.midi_active_green[_ngcontent-%COMP%]{fill:var(--yellow_nvx)!important;filter:url(#f2Blues) drop-shadow(4.5px 3px 3.5px var(--green_nvx)) drop-shadow(-4.5px -3px 3.5px var(--green_nvx))!important}section#braid-blues[_ngcontent-%COMP%]   .medBubble.erase[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_transitionBlues .25s forwards}@keyframes _ngcontent-%COMP%_transitionBlues{0%{fill:url(#greyGradientBlues)}8%{fill:url(#greyGradient0Blues)}16%{fill:url(#greyGradient1Blues)}24%{fill:url(#greyGradient2Blues)}32%{fill:url(#greyGradient3Blues)}40%{fill:url(#greyGradient4Blues)}48%{fill:url(#greyGradient5Blues)}56%{fill:url(#greyGradient6Blues)}64%{fill:url(#greyGradient7Blues)}72%{fill:url(#greyGradient8Blues)}80%{fill:url(#greyGradient9Blues)}88%{fill:url(#eraseGradientBlues)}96%{fill:url(#eraseGradientBlues)}to{fill:url(#eraseGradientBlues);stroke:#000}}section#braid-blues[_ngcontent-%COMP%]   .medBubble.erasenot[_ngcontent-%COMP%]{filter:drop-shadow(3px 4px 6px black) drop-shadow(-3px 4px 6px black)}section#braid-blues[_ngcontent-%COMP%]   .arrows-2[_ngcontent-%COMP%]{fill:#3f4683;transition:all .25s ease;stroke-width:.15px}section#braid-blues[_ngcontent-%COMP%]   .arrows-2.erase[_ngcontent-%COMP%]{fill:#343a40;stroke:#000}section#braid-blues[_ngcontent-%COMP%]   .simpleShape[_ngcontent-%COMP%]{fill:none;stroke-miterlimit:5.9;stroke-width:.15;stroke:#000}section#braid-blues[_ngcontent-%COMP%]   .tona.erase[_ngcontent-%COMP%]   .greenCircle[_ngcontent-%COMP%]{stroke:#424a52}section#braid-blues[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .arrows-2[_ngcontent-%COMP%]{fill:#1f27ff;filter:drop-shadow(0px 2px 4px #fff)}section#braid-blues[_ngcontent-%COMP%]   .midi_active[_ngcontent-%COMP%]   .arrows-2[_ngcontent-%COMP%]{fill:#f8f8b9;filter:drop-shadow(0px 2px 4px #fff)}section#braid-blues[_ngcontent-%COMP%]   .midi_active_green[_ngcontent-%COMP%]   .arrows-2[_ngcontent-%COMP%]{fill:#1f27ff;filter:drop-shadow(0px 2px 4px #fff)}section#braid1[_ngcontent-%COMP%]   .braid-chords[_ngcontent-%COMP%]{font-size:4.93888855px;line-height:1.25;font-family:nvxChord;writing-mode:lr-tb;display:inline;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:.34711847;stroke-opacity:1}section#braid1[_ngcontent-%COMP%]   .braid-chords.roman[_ngcontent-%COMP%]{font-size:3.93888855px}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]{display:inline;opacity:1;vector-effect:none;fill-opacity:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke;transition:all .25s ease}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .fifths[_ngcontent-%COMP%]{fill:#457da6;stroke:#2e508e;stroke-width:.26458332;transition:all .25s ease}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .fifths.erase[_ngcontent-%COMP%]{fill:#343a40;stroke:#575864;opacity:.8}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .fifths.erasenot[_ngcontent-%COMP%]{filter:drop-shadow(1px 2px 1px black) drop-shadow(-1px -2px 1px black)}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .fifths.midi_active[_ngcontent-%COMP%]{fill:var(--yellow_nvx)!important;stroke:#ff0!important;filter:url(#darkGlowN1)!important}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .fifths.midi_active_green[_ngcontent-%COMP%]{fill:var(--yellow_nvx)!important;stroke:#ff0!important;filter:url(#darkGlowN1)!important}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .fifths.active[_ngcontent-%COMP%]{fill:var(--lightblue_nvx)!important;stroke:#0020ff!important;filter:url(#darkGlowN1)!important}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{fill:#2e388e;stroke:#272085;stroke-width:1.32291663;transition:all .25s ease}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .center.erase[_ngcontent-%COMP%]{fill:#343a40;stroke:#575864;opacity:.8}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .center.erasenot[_ngcontent-%COMP%]{filter:drop-shadow(1px 2px 1px black) drop-shadow(-1px -2px 1px black)}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .center.midi_active[_ngcontent-%COMP%]{fill:var(--yellow_nvx)!important;stroke:#ff0!important;filter:url(#darkGlowN1)!important}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .center.midi_active_green[_ngcontent-%COMP%]{fill:var(--yellow_nvx)!important;stroke:#ff0!important;filter:url(#darkGlowN1)!important}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .center.active[_ngcontent-%COMP%]{fill:var(--lightblue_nvx)!important;stroke:#0020ff!important;filter:url(#darkGlowN1)!important}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .sides[_ngcontent-%COMP%]{fill:#2e508e;stroke:#2e388e;stroke-width:.66145831;transition:all .25s ease}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .sides.erase[_ngcontent-%COMP%]{fill:#343a40;stroke:#575864;opacity:.8}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .sides.erasenot[_ngcontent-%COMP%]{filter:drop-shadow(1px 2px 1px black) drop-shadow(-1px -2px 1px black)}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .sides.midi_active[_ngcontent-%COMP%]{fill:var(--yellow_nvx)!important;stroke:#ff0!important;filter:url(#darkGlowN1)!important}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .sides.midi_active_green[_ngcontent-%COMP%]{fill:var(--yellow_nvx)!important;stroke:#ff0!important;filter:url(#darkGlowN1)!important}section#braid1[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .sides.active[_ngcontent-%COMP%]{fill:var(--lightblue_nvx)!important;stroke:#0020ff!important;filter:url(#darkGlowN1)!important}section#braid1[_ngcontent-%COMP%]   .braid-chords.big[_ngcontent-%COMP%]{font-size:10.58333302px;stroke-width:.26458332}section#braid1[_ngcontent-%COMP%]   .braid-chords.big.roman[_ngcontent-%COMP%]{font-size:8.58333302px}section#braid1[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{display:inline;opacity:1;fill:#2b388b;fill-opacity:1;stroke:#08a050;stroke-width:.21166667px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;transition:all .25s ease}section#braid1[_ngcontent-%COMP%]   .arrow.erase[_ngcontent-%COMP%]{fill:#343a40;stroke:#575864}section#braid1[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{stroke:#ff7979;fill:#02f;filter:drop-shadow(0px 0px 1px #ff7979)}section#braid1[_ngcontent-%COMP%]   .midi_active[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{stroke:#ff7979;fill:var(--yellow_nvx);filter:drop-shadow(0px 0px 1px #ff7979)}section#braid1[_ngcontent-%COMP%]   .midi_active_green[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{stroke:#ff7979;fill:#02f;filter:drop-shadow(0px 0px 1px #ff7979)}section#braid1[_ngcontent-%COMP%]   .tona[_ngcontent-%COMP%]   .greenCircle[_ngcontent-%COMP%]{opacity:.5;vector-effect:none;fill:#23555e;fill-opacity:1;stroke:#23555e;stroke-width:3.70115948;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:normal;transition:all .25s ease}section#braid1[_ngcontent-%COMP%]   .tona[_ngcontent-%COMP%]   .greenCircle.active[_ngcontent-%COMP%]{fill:#00ff3a!important;stroke:#00ff3a!important;stroke-width:3.68902826}section#braid1[_ngcontent-%COMP%]   .tona.erase[_ngcontent-%COMP%]   .greenCircle[_ngcontent-%COMP%]{fill:#424a52;stroke:#424a52}section#braid2[_ngcontent-%COMP%]   .green-skull[_ngcontent-%COMP%]{fill:none;stroke:#a6a6a6;stroke-width:.8px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:.8,.8;stroke-dashoffset:0;stroke-opacity:1;transition:all .25s ease}section#braid2[_ngcontent-%COMP%]   .green-skull.erase[_ngcontent-%COMP%]{stroke:#575864;opacity:.8}section#braid2[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .green-skull[_ngcontent-%COMP%]{stroke:#0ff}section#braid2[_ngcontent-%COMP%]   .midi_active[_ngcontent-%COMP%]   .green-skull[_ngcontent-%COMP%]{stroke:#e8ff00}section#braid2[_ngcontent-%COMP%]   .midi_active_green[_ngcontent-%COMP%]   .green-skull[_ngcontent-%COMP%]{stroke:#e8ff00}section#braid2[_ngcontent-%COMP%]   .black-skull[_ngcontent-%COMP%]{fill:none;fill-opacity:1;stroke:#000;stroke-width:1px;stroke-linejoin:miter;stroke-opacity:1;transition:all .25s ease}section#braid2[_ngcontent-%COMP%]   .black-skull.erase[_ngcontent-%COMP%]{stroke:#575864;opacity:.8}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .fifths[_ngcontent-%COMP%]{opacity:1;vector-effect:none;fill-opacity:1;stroke:transparent;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:normal;stroke-width:.1px;transition:all .25s ease}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .fifths.down[_ngcontent-%COMP%]{fill:#717bc0}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .fifths.up[_ngcontent-%COMP%]{fill:#717bc0}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .fifths.erase[_ngcontent-%COMP%]{fill:#343a40;stroke:#575864;fill-opacity:0}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .fifths.erasenot[_ngcontent-%COMP%]{filter:drop-shadow(1px 2px 1px black) drop-shadow(-1px -2px 1px black)}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .fifths.midi_active[_ngcontent-%COMP%]{filter:url(#darkGlowN2)!important;fill:#ff686845!important;fill-opacity:1!important}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .fifths.midi_active_green[_ngcontent-%COMP%]{filter:url(#darkGlowN2) drop-shadow(2px 2px 1.5px var(--green_nvx)) drop-shadow(-2px -2px 2.5px var(--green_nvx))!important;fill:#ff686845!important;fill-opacity:1!important}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .fifths.active[_ngcontent-%COMP%]{filter:url(#darkGlowN2)!important;fill:#0020ff33!important;fill-opacity:1!important}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{opacity:1;vector-effect:none;fill-opacity:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:normal;stroke:#343a40;stroke-width:.2px;transition:all .25s ease}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .center.down[_ngcontent-%COMP%]{fill:#394bba}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .center.up[_ngcontent-%COMP%]{fill:#394bba}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .center.erase[_ngcontent-%COMP%]{fill:#343a40;stroke:#575864;fill-opacity:0}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .center.erasenot[_ngcontent-%COMP%]{filter:drop-shadow(1px 2px 1px black) drop-shadow(-1px -2px 1px black)}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .center.midi_active[_ngcontent-%COMP%]{filter:url(#darkGlowN2)!important;fill:#ff686845!important;fill-opacity:1!important}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .center.midi_active_green[_ngcontent-%COMP%]{filter:url(#darkGlowN2) drop-shadow(2px 2px 1.5px var(--green_nvx)) drop-shadow(-2px -2px 2.5px var(--green_nvx))!important;fill:#ff686845!important;fill-opacity:1!important}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .center.active[_ngcontent-%COMP%]{filter:url(#darkGlowN2)!important;fill:#0020ff33!important;fill-opacity:1!important}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .sides[_ngcontent-%COMP%]{opacity:1;vector-effect:none;fill-opacity:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:normal;stroke:transparent;stroke-width:.1px;transition:all .25s ease}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .sides.down[_ngcontent-%COMP%]{fill:#515dac}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .sides.up[_ngcontent-%COMP%]{fill:#515dac}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .sides.erase[_ngcontent-%COMP%]{fill:#343a40;stroke:#575864;fill-opacity:0}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .sides.erasenot[_ngcontent-%COMP%]{filter:drop-shadow(1px 2px 1px black) drop-shadow(-1px -2px 1px black)}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .sides.midi_active[_ngcontent-%COMP%]{filter:url(#darkGlowN2)!important;fill:#ff686845!important;fill-opacity:1!important}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .sides.midi_active_green[_ngcontent-%COMP%]{filter:url(#darkGlowN2) drop-shadow(2px 2px 1.5px var(--green_nvx)) drop-shadow(-2px -2px 2.5px var(--green_nvx))!important;fill:#ff686845!important;fill-opacity:1!important}section#braid2[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]   .sides.active[_ngcontent-%COMP%]{filter:url(#darkGlowN2)!important;fill:#0020ff33!important;fill-opacity:1!important}section#braid2[_ngcontent-%COMP%]   text.braid-chords[_ngcontent-%COMP%]{font-size:5.5px;font-family:nvxChord;text-align:start;writing-mode:lr-tb;text-anchor:start;display:inline;fill:#000}section#braid2[_ngcontent-%COMP%]   text.braid-chords.small[_ngcontent-%COMP%]{font-size:2px}section#braid2[_ngcontent-%COMP%]   text.braid-chords.big[_ngcontent-%COMP%]{font-size:6.5px;stroke-width:.2px;stroke:#000}section#braid2[_ngcontent-%COMP%]   text.braid-chords.big.roman[_ngcontent-%COMP%]{font-size:5px}section#braid2[_ngcontent-%COMP%]   text.braid-chords.roman[_ngcontent-%COMP%]{font-size:4.2px}section#braid2[_ngcontent-%COMP%]   .token.middle[_ngcontent-%COMP%]{transform:translateY(21.5px)}section#braid2[_ngcontent-%COMP%]   .greenCircle[_ngcontent-%COMP%]{fill:transparent;stroke:#92a4ff;stroke-width:5px;filter:blur(1.8px) drop-shadow(1px 3px 1px black);opacity:.5;display:none}section#braid2[_ngcontent-%COMP%]   .greenCircle.active[_ngcontent-%COMP%]{display:block}']})}}return BraidComponent})();function noe(t,n){if(t&1&&(p(0,"option",2),P(1),m()),t&2){let e=n.$implicit,i=ge();E("value",e.value.name)("selected",e.value.name===i.selected_midi),y(),Yt(e.value.name)}}var n8=(()=>{class t{constructor(e,i,r){this.midi=e,this.zone=i,this.cm=r,this.midi_is_ready=!1,this.midi_ports=[],this.selected_midi="",this.hasChanged=new Rn,this.plugged_inputs$=this.midi.plugged_inputs$.subscribe(s=>{this.midi_ports=s}),this.midi_available$=this.midi.MIDI_AVAILABLE$.subscribe(s=>{s!=!1&&(this.midi_is_ready=!0,this.rebind_midi())}),this.chosen_input$=this.midi.chosen_input_control$.subscribe(s=>{s.length&&this.zone.run(()=>{this.cm.setControlInputSelected(s[0].value.name),this.selected_midi=s[0].value.name})})}ngOnDestroy(){this.chosen_input$.unsubscribe(),this.midi_available$.unsubscribe(),this.plugged_inputs$.unsubscribe()}rebind_midi(){if(this.cm.getControlInputSelected()!=""){let e=this.cm.is_midi_guitar();this.midi.bindControlInput(this.cm.getControlInputSelected())}}change_midi_port(e){let i=this.cm.is_midi_guitar();this.midi.bindControlInput(e.target.value),this.hasChanged.emit("changed")}static{this.\u0275fac=function(i){return new(i||t)(Le(hi),Le(on),Le(Ci))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-control-selector"]],outputs:{hasChanged:"hasChanged"},standalone:!1,decls:2,vars:1,consts:[["name","midi_ports","id","midi_ports",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"]],template:function(i,r){i&1&&(p(0,"select",0),J("change",function(a){return r.change_midi_port(a)}),Wt(1,noe,2,3,"option",1),m()),i&2&&(y(),E("ngForOf",r.midi_ports))},dependencies:[gi,bo,xo],encapsulation:2})}}return t})();var roe=t=>({show:t}),i8=t=>({selected:t});function ooe(t,n){if(t&1&&ie(0,"img"),t&2){let e=ge().index,i=ge().index,r=ge();ae("src","assets/img/chordEditor/"+r.measures_basses[i][e]+".png",Hr)}}function soe(t,n){if(t&1){let e=mn();p(0,"h1",8),J("click",function(){let r=pe(e).index,s=ge().$implicit,a=ge();return fe(a.select(s,r))}),P(1),Wt(2,ooe,1,1,"img",9),m()}if(t&2){let e=n.$implicit,i=n.index,r=ge().$implicit,s=ge();E("ngClass",Ae(4,i8,s.selected_measure==r.getId()&&s.selected_beat==i)),y(),Tn("",e[0],"",s.Translate[e[1]]," "),y(),E("ngIf",e[0]!="")}}function aoe(t,n){if(t&1&&(p(0,"div",4)(1,"h1",5),P(2),m(),p(3,"div",6),Wt(4,soe,3,6,"h1",7),m()()),t&2){let e=n.$implicit,i=n.index,r=ge();E("ngClass",Ae(5,i8,r.selected_measure==e.getId())),ae("id","chordstrip_"+i),y(2),Yt(i+1),y(),ae("id","chordstripname_"+i),y(),E("ngForOf",r.chordsNameType[i])}}var r8=(()=>{class t{set cur_chord(e){this.change_displayed_chord(e)}set display(e){this.visible=e,setTimeout(()=>{let i=$("#global-stripform").find("#chordstripname_"+this.selected_measure);this.checkInView(i)},50)}onMousewheel(e){e.preventDefault(),this.scroll_increment=$("#global-stripform")[0].scrollLeft,$("#global-stripform").scrollLeft(this.scroll_increment+=e.deltaY),this.scroll_increment=this.scroll_increment<0?0:this.scroll_increment,this.scroll_increment=this.scroll_increment>$("#global-stripform")[0].scrollWidth?$("#global-stripform")[0].scrollWidth-100:this.scroll_increment}constructor(e,i,r,s,a,l,d,u){this.sm=e,this.dm=i,this.zone=r,this.transport=s,this.sel=a,this.ap=l,this.yt=d,this.cm=u,this.scroll_increment=1,this.visible=!1,this.chordstrip_hidden=!0,this.displayed_chord="",this.measures_list=[],this.measures_chords=[],this.measures_basses=[],this.measures_analysis=[],this.chordsNameType=[],this.Translate=Y1,this.selected_measure=2,this.selected_beat=1,this.displayNotesMode_SUBJ_update$=this.cm.displayNotesMode_SUBJ_update$.subscribe(h=>{h=="letters"?this.chordsNameType=this.measures_analysis:this.chordsNameType=this.measures_chords}),this.beatChangeSub$=this.transport.beatChange.subscribe(h=>{this.selected_measure=h.measure,this.selected_beat=h.beat,console.log("this.selected_measure =>",this.selected_measure),console.log("this.selected_beat =>",this.selected_beat);let _=$("#global-stripform").find("#chordstripname_"+this.selected_measure);_.addClass("selected"),this.checkInView(_)})}ngAfterViewInit(){this.set_chord_line(),this.abcString$=this.dm.abcString$.subscribe(e=>{this.zone.run(()=>{this.measures_list=[],this.measures_chords=[],this.measures_basses=[],this.measures_analysis=[],this.set_chord_line()})})}ngOnDestroy(){this.abcString$.unsubscribe()}set_chord_line(){var e=/([A-G][b#]{0,2})(.*)/,i=/([b#]{0,2}[I|V|i|v]{0,3})(.*)/;for(let r=0;r<this.sm.getParts().length;r++){let s=this.sm.getPart(r);for(let a=0;a<s.getMeasures().length;a++){let l=s.getMeasure(a);this.measures_list.push(l);let d=[],u=[],h=[],_=l.getBeats();for(let b of _){let w=b.getChord().split("/")[1];w!=null?w=w.replace("/",""):w="R";let L=b.getChord().split("/")[0].match(e),R,z;L==null?(R="",z=""):(R=L[1],z=L[2]),d.push([R,z]),w!="R"&&(w=Ni.distance(R,w)),u.push([w])}for(let b of _){let L=b.getAnalysis().split("/")[0].match(i);if(L==null)continue;let R=L[1],z=L[2];h.push([R,z])}this.measures_chords.push(d),this.measures_basses.push(u),this.measures_analysis.push(h)}}this.chordsNameType=this.measures_chords}select(e,i=0){this.sel.setSelection([e],i);let r=e.getBeat(i).getAudioRegion().start;r||(r=e.getAudioRegion().start),this.ap.setCurrentTime(r),this.yt.seekTo(r),this.transport.setMeasure(e.getIdx()),this.transport.setBeat(Number(i))}checkInView(e){var i=$("#global-stripform");if(e.length){var r=$(e).offset().left,s=i.offset().left,a=screen.width,l=r>0&&r<a-a*.5;console.log("isIn =>",l),!l&&e[0].scrollIntoView({behavior:"instant",block:"start",inline:"start"})}}change_displayed_chord(e){if(!e.chords.length||e.full_chord.empty){this.displayed_chord=" ";return}this.displayed_chord=e.chords[0]}changeChordName(e){e.preventDefault(),!this.cm.get_letters_Numbers_sync()&&(this.chordsNameType==this.measures_chords?this.chordsNameType=this.measures_analysis:this.chordsNameType=this.measures_chords,console.log("this.chordsNameType =>",this.chordsNameType))}static{this.\u0275fac=function(i){return new(i||t)(Le(Hn),Le(Po),Le(on),Le(yi),Le(nr),Le(Rs),Le(xc),Le(Ci))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-chordstrip"]],hostBindings:function(i,r){i&1&&J("mousewheel",function(a){return r.onMousewheel(a)})},inputs:{cur_chord:"cur_chord",display:"display"},standalone:!1,decls:4,vars:5,consts:[[1,"chordstrip-and-selection-container",3,"ngClass","hidden"],["tabindex","0",1,"chordstrip-container",3,"contextmenu"],["id","global-stripform",1,"stripform-container"],["class","card",3,"ngClass",4,"ngFor","ngForOf"],[1,"card",3,"ngClass"],[1,"strip_measure_nb"],[1,"card-body"],["style","min-width: 1em;",3,"ngClass","click",4,"ngFor","ngForOf"],[2,"min-width","1em",3,"click","ngClass"],[4,"ngIf"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"div",1),J("contextmenu",function(a){return r.changeChordName(a)}),p(2,"div",2),Wt(3,aoe,5,7,"div",3),m()()()),i&2&&(E("ngClass",Ae(3,roe,r.visible==!0))("hidden",r.visible==!1),y(3),E("ngForOf",r.measures_list))},dependencies:[lr,gi,vr],styles:['@font-face{font-family:nvxChord;src:url("./media/nvxFont.otf")}[_ngcontent-%COMP%]::-webkit-scrollbar{height:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent!important}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,var(--green_nvx),var(--darkgray_nvx))!important}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,var(--green_nvx),var(--darkgray_nvx))!important}.chordstrip-and-selection-container[_ngcontent-%COMP%]{z-index:100;display:block;align-items:center;position:fixed;left:0;width:100%;height:100px;overflow-y:hidden;overflow-x:overlay;bottom:45px}.chordstrip-and-selection-container.show[_ngcontent-%COMP%]{bottom:45px!important}.chordstrip-container[_ngcontent-%COMP%]{flex-direction:column;-webkit-user-select:none;user-select:none;outline:none;background-color:#343a40}.stripform-container[_ngcontent-%COMP%]{height:105px;position:relative;left:0;width:100%;overflow:auto;display:flex;flex-direction:row}.stripform-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:row;min-width:unset;background-color:var(--darkgray_nvx);height:90%}.stripform-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:3px 1.25rem;flex-direction:row;display:flex;border:3px solid white;border-radius:15px;height:100%;height:-moz-available;height:-webkit-stretch;height:-webkit-fill-available;height:stretch}.stripform-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body.selected[_ngcontent-%COMP%]{background-color:#372dc7e0}.stripform-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;line-height:1;font-family:nvxChord;font-size:2rem;padding:0 35px;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:5px;margin-bottom:5px}.stripform-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h1.selected[_ngcontent-%COMP%]{border-radius:10px;box-shadow:inset 0 0 0 5px #343a40;background-color:#343a40}.stripform-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.selection-container[_ngcontent-%COMP%]{width:100px;height:100px;color:red;background:red;z-index:10000;opacity:.5;position:absolute;border-radius:10%}.strip_measure_nb[_ngcontent-%COMP%]{position:absolute;left:10px;top:0;color:#fff;font-size:1.5em}']})}}return t})();var coe=["app-midi-chord-detect-simple",""],doe=t=>({color:t}),X1=(()=>{class t{set midi_chord(e){e.chords.length==0?this.chord_name="":this.chord_name=e.chords[0]}constructor(e){this.zone=e,this.divHidden=!1,this.chord_name="",this.color="black"}ngOnDestroy(){}static{this.\u0275fac=function(i){return new(i||t)(Le(on))}}static{this.\u0275cmp=zt({type:t,selectors:[["","app-midi-chord-detect-simple",""]],inputs:{color:"color",midi_chord:"midi_chord"},standalone:!1,attrs:coe,decls:2,vars:4,consts:[[1,"midi-chords",3,"ngStyle"]],template:function(i,r){i&1&&(p(0,"div",0),P(1),m()),i&2&&(E("ngStyle",Ae(2,doe,r.color?r.color:"#000")),y(),en(" ",r.chord_name," "))},dependencies:[X2],styles:['.chord[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:100%}.dom[_ngcontent-%COMP%]{color:red}.normal[_ngcontent-%COMP%]{color:#000}.rootName[_ngcontent-%COMP%]{font-size:700%;font-size:200%;font-family:music-font}.extentionName[_ngcontent-%COMP%]{margin-left:13%}@font-face{font-family:music-font;src:url("./media/main_comma.otf") format("opentype")}.font-test[_ngcontent-%COMP%]{font-family:music-font}.midi-chords[_ngcontent-%COMP%]{font-size:30px;display:inline-block;min-height:38px}']})}}return t})();var hM=hr(Ko());var uM=(()=>{class t{set abc_obj(e){this.conditionalRender(e)}constructor(e,i,r){this.zone=e,this.cm=i,this.curTonality=r,this.tonality="C",this.color="black",this.transpose=0}ngOnInit(){this.curTonality$=this.curTonality.current_tonality$.subscribe(i=>{this.change_tonality(i)});let e={l:"",r:""};this.conditionalRender(e)}change_tonality(e){console.log(e);let i=e.scale_tona||e.part_tona||e.score_tona,r=i==e.scale_tona?e.scale_mode:i==e.part_tona?e.part_mode:e.score_mode;this.conditionalRender({l:"",r:""})}conditionalRender(e){this.cm.is_midi_guitar()?this.renderStringsGuitar(e.l,e.r):this.renderStrings(e.l,e.r)}ngOnDestroy(){}renderStrings(e,i){let r="";r+=`%%musicspace 50
`,r+=`%%sysstaffsep 80
`,r+=`%%staffsep 100
`,r+=`%%staves {(PianoRightHand) (PianoLeftHand)}
`,r+=`V:PianoRightHand clef=treble down
`,r+=`V:PianoLeftHand clef=bass
`,r+=`K:C
`,r+="K:"+this.tonality+`
`,e=`[V: PianoLeftHand] ||
[`+e+`]2 x
`,i=`[V: PianoRightHand] ||
[`+i+`]2 x
`,hM.default.renderAbc("midi-chord-detect-abc",r+e+i,{paddingtop:50,viewportVertical:!0,staffwidth:100,scale:1.4,foregroundColor:this.color,visualTranspose:this.transpose})}renderStringsGuitar(e,i){let r="";r+=`%%musicspace 50
`,r+=`%%sysstaffsep 50
`,r+=`%%staffsep 100
`,r+=`V:PianoRightHand clef=treble down
`,r+=`K:C
`,r+="K:"+this.tonality+`
`,i=`[V: PianoRightHand] ||
[`+i+e+`]2 x
`,hM.default.renderAbc("midi-chord-detect-abc",r+i,{paddingtop:50,staffwidth:100,scale:1.4,foregroundColor:this.color,visualTranspose:this.transpose})}static{this.\u0275fac=function(i){return new(i||t)(Le(on),Le(Ci),Le($a))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-midi-chord-detect-abc"]],inputs:{tonality:"tonality",color:"color",transpose:"transpose",abc_obj:"abc_obj"},standalone:!1,decls:3,vars:1,consts:[["id","midi-chord-detect-abc-style"],[3,"ngClass"],["id","midi-chord-detect-abc",2,"min-height","900px"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"div",1),ie(2,"div",2),m()()),i&2&&(y(),E("ngClass",r.cm.is_midi_guitar()?"simpleStave":"doubleStaves"))},dependencies:[lr],styles:["midi-chord-detect-abc{overflow:hidden!important;min-height:900px}#midi-chord-detect-abc-style[_ngcontent-%COMP%]{bottom:104px;min-height:900px;overflow:hidden;padding-top:40px}#abcChord[_ngcontent-%COMP%]{height:30vh;top:-278px;position:initial!important}#abcChord[_ngcontent-%COMP%]     svg{width:105px}.mask[_ngcontent-%COMP%]{width:143px;height:52vh;overflow:hidden;margin-top:-112px}.doubleStaves[_ngcontent-%COMP%]{top:-489px;position:absolute}.simpleStave[_ngcontent-%COMP%]{top:-230px;position:absolute}"]})}}return t})();var s8=(()=>{class t{set display(e){this.visible=e}set midi_chord(e){this.cur_midi_chord=e}set midi_abc(e){this.cur_midi_abc=e}constructor(e){this.cm=e,this.visibleState=new Rn,this.visible=!1,this.cur_midi_abc=null}ngAfterViewInit(){$("#midi-chord-display").draggable({handle:"#nvxMidi-chord-display"})}ngOnInit(){}close(){this.visible=!1,this.visibleState.emit(!1)}outputVisible(e){this.visibleState.emit(e)}static{this.\u0275fac=function(i){return new(i||t)(Le(Ci))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-midi-chord-display"]],inputs:{display:"display",midi_chord:"midi_chord",midi_abc:"midi_abc"},outputs:{visibleState:"visibleState"},standalone:!1,decls:9,vars:6,consts:[["id","midi-chord-display","tabindex","-1","role","dialog",1,"modal","nofly",3,"contextmenu","hidden"],[1,"rightbuttons"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"contextmenu","click"],["aria-hidden","true",1,"fa","fa-times"],["id","nvxMidi-chord-display","role","document",1,"modal-dialog"],["id","midi_chord_schema"],[3,"abc_obj","color","transpose"],[1,"fifths_infos"],["id","midi_chord_name","app-midi-chord-detect-simple","",3,"midi_chord","color"]],template:function(i,r){i&1&&(p(0,"section",0),J("contextmenu",function(a){return r.close(),a.preventDefault()}),p(1,"div",1)(2,"button",2),J("contextmenu",function(a){return r.close(),a.preventDefault()})("click",function(){return r.close()}),ie(3,"span",3),m()(),ie(4,"div",4),p(5,"div",5),ie(6,"app-midi-chord-detect-abc",6),m(),p(7,"div",7),ie(8,"div",8),m()()),i&2&&(E("hidden",r.visible==!1),y(6),E("abc_obj",r.cur_midi_abc)("color","white")("transpose",r.cm.is_midi_guitar()?12:0),y(2),E("midi_chord",r.cur_midi_chord)("color","white"))},dependencies:[X1,uM],styles:["app-midi-chord-detect-abc[_ngcontent-%COMP%]{display:block}section#midi-chord-display[_ngcontent-%COMP%]{background-color:#49525be3;bottom:0;left:0;right:0;margin:0;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:30px}section#midi-chord-display[_ngcontent-%COMP%]   .bg-text[_ngcontent-%COMP%]{fill:#000;font-family:sans-serif;font-feature-settings:normal;font-size:5.1816px;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;letter-spacing:0px;line-height:125%;opacity:.392;stroke-width:.29897px;word-spacing:0px}section#midi-chord-display[_ngcontent-%COMP%]   .bg-text[_ngcontent-%COMP%]   tspan[_ngcontent-%COMP%]{stroke-width:.29897px}section#midi-chord-display.modal[_ngcontent-%COMP%]{width:220px;height:455px;overflow:hidden;bottom:auto;right:auto}section#midi-chord-display[_ngcontent-%COMP%]   div#nvxMidi-chord-display.modal-dialog[_ngcontent-%COMP%]{max-width:unset;pointer-events:all;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;margin:0;z-index:100;position:absolute}section#midi-chord-display.modal.ui-draggable-dragging[_ngcontent-%COMP%]{-moz-transition:none;-o-transition:none;-webkit-transition:none;transition:none}section#midi-chord-display.modal.nofly[_ngcontent-%COMP%]{top:18%;left:79%;-webkit-transition:opacity .3s linear;-moz-transition:opacity .3s linear;-o-transition:opacity .3s linear;transition:opacity .3s linear}.fifths_infos[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;margin-top:8%}#midi_chord_schema[_ngcontent-%COMP%]{width:100%;height:auto;display:inline-block;padding-left:20%}#midi_chord_name[_ngcontent-%COMP%]{position:absolute;top:10px}.rightbuttons[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end;width:100%}.close[_ngcontent-%COMP%]{color:var(--light_prim);position:absolute;right:30px;z-index:9999}.rightbuttons[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end;width:10px;position:absolute;right:40px;top:10px}.close[_ngcontent-%COMP%], .close[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]:focus-visible{outline:none}.close[_ngcontent-%COMP%]{color:var(--light_prim);position:absolute;top:10px;right:-10px;width:10px;height:10px;z-index:9999}"]})}}return t})();var poe=(t,n)=>({editor_visible:t,active:n}),foe=(t,n)=>({metro_visible:t,active:n}),moe=(t,n)=>({circle_visible:t,active:n}),goe=(t,n)=>({dico_visible:t,active:n}),_oe=(t,n)=>({options_visible:t,active:n}),yoe=t=>({editor_visible:t}),voe=t=>({metro_visible:t}),boe=t=>({circle_visible:t}),a8=t=>({disabled:t}),xoe=t=>({dico_visible:t}),Coe=t=>({options_visible:t}),l8=t=>({midi_in_active:t}),J1=t=>({show:t}),c8=t=>({active:t});function woe(t,n){if(t&1&&(p(0,"option"),P(1),m()),t&2){let e=n.$implicit;y(),Yt(e)}}function Moe(t,n){if(t&1&&(p(0,"option"),P(1),m()),t&2){let e=n.$implicit;y(),Yt(e)}}function Soe(t,n){if(t&1){let e=mn();p(0,"div",141)(1,"span",142),P(2),m(),p(3,"span",143),P(4),m(),p(5,"span",144),P(6),m(),p(7,"span",145),J("click",function(){let r=pe(e),s=r.$implicit,a=r.index,l=ge(2);return fe(l.removeShortcut(s.number,a))}),m()()}if(t&2){let e=n.$implicit;y(2),Yt(e.number),y(2),Yt(e.control_name),y(2),Yt(e.control_action)}}function Poe(t,n){if(t&1&&(p(0,"div"),Wt(1,Soe,8,3,"div",140),m()),t&2){let e=n.$implicit;y(),E("ngForOf",e)}}var cf=(()=>{class SongComponent{constructor(route,sm,si,sel,cm,transport,dm,ap,yt,miniRender,keys,midi_detect_chord,curTonaModel,zone,midi){this.route=route,this.sm=sm,this.si=si,this.sel=sel,this.cm=cm,this.transport=transport,this.dm=dm,this.ap=ap,this.yt=yt,this.miniRender=miniRender,this.keys=keys,this.midi_detect_chord=midi_detect_chord,this.curTonaModel=curTonaModel,this.zone=zone,this.midi=midi,this.braidModel="tonal",this.cur_midi_chord={chords:[]},this.cur_midi_notes_guitar=[],this.cur_midi_notes_piano=[],this.cur_midi_abc={l:"",r:""},this.cur_chord=[],this.modalInfos=!0,this.modalImport=!1,this.modalExport=!1,this.imported_controls="",this.exported_controls="",this.braid_focus_tona="",this.midi_ctrl_note_selected="60",this.midi_ctrl_fct_selected="COF_set_roman_mode",this.midi_ctrl_opt_selected="C",this.midi_ctrl_functions=IO,this.midi_ctrl_options=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B","Db","Eb","Gb","Ab","Bb"],this.show_video=!1,this.nb_measures_per_line=[],this.emphasisMode="major",this.emphasisScale="c",this.emphasisScaleMode={mode:"major",scale:"c"},this.oneTonaMode=2,this.isBefore=!1,this.isAfter=!1,this.zoomVal=1,this.display_Y=!1,this.display_Y_strip=!1,this.display_note_mode=!1,this.displayChange=new Rn,this.stateObj={},this.stateObj.isVideoSide=null,this.stateObj.fretboardWasOn=null,this.stateObj.pianoWasOn=null,this.cur_midi_chord$=this.midi_detect_chord.cur_midi_chord.subscribe(t=>{this.cur_midi_chord=t}),this.cur_midi_abc$=this.midi_detect_chord.cur_abc_notes.subscribe(t=>{this.zone.run(()=>{this.cur_midi_abc=t})}),this.cur_midi_notes_guitar$=this.midi_detect_chord.cur_guit_notes.subscribe(t=>{this.cur_midi_notes_guitar=[...t]}),this.cur_midi_notes_piano$=this.midi_detect_chord.cur_piano_notes.subscribe(t=>{this.cur_midi_notes_piano=[...t]}),this.midiControlUpdate$=this.midi.controlTabSubject.subscribe(data=>{let ctrl=this.cm.getAssignedControls(!1),o=ctrl[""+data],number,control_name,control_action;if(this.zone.run(()=>{this.cur_midi_ctrl=data,setTimeout(()=>{this.cur_midi_ctrl=null},200)}),o&&o.length)for(let obj of o)number=obj.number,control_name=obj.control_name,control_action=obj.control_action,this.zone.run(()=>{eval("this."+control_name)&&eval("this."+control_name+'("'+control_action+'")')});else return}),this.midi_ctrl_midi_notes_tab=[];for(let t=0;t<127;t++)this.midi_ctrl_midi_notes_tab.push(t)}ngOnInit(){this.measure=new yn,this.measure.next(1),this.modalInfos=!this.cm.is_tutorial_skipped(),this.refreshMidiCtrlTab(),this.route.data.subscribe(t=>{console.log("SongComponent: Route data received",t),setTimeout(()=>{this.dm.renderFromModel()},100)}),this.abcString$=this.dm.abcString$.subscribe(t=>{this.abcString=t,this.renderAbcWithOptions()}),this.init_bindings(),this.beat_selectionUpdate$=this.transport.beatChange.subscribe(t=>{this.disLight_all();let n=this.sm.getMeasures_hash(),e=this.sel.getSelection();for(let i=0;i<e.length;i++)e[i].getType()!="part"&&(this.highlightBeat(t),this.cur_chord=[e[0].getBeats()[t.beat].getChord()])}),this.selectionUpdate$=this.sel.selected_Update$.subscribe(t=>{})}savePrefs(){this.cm.saveInCookie()}ngOnDestroy(){this.savePrefs(),this.abcString$.unsubscribe(),this.binding$.unsubscribe(),this.selectionUpdate$.unsubscribe(),this.beat_selectionUpdate$.unsubscribe(),this.cur_midi_chord$.unsubscribe(),this.cur_midi_abc$.unsubscribe(),this.cur_midi_notes_guitar$.unsubscribe(),this.cur_midi_notes_piano$.unsubscribe(),this.midiControlUpdate$.unsubscribe()}ngAfterViewInit(){this.paper=document.querySelector("#abcCanvas"),setTimeout(()=>{this.transport.setBeat(0,!0),this.highlightBeat({beat:0,silent:!0,measure:0})},100)}getMeasureLine(t){console.log("get measure line m => ",t);for(var n=0;n<this.nb_measures_per_line.length;n++){if(t>=this.nb_measures_per_line[n]){t-=this.nb_measures_per_line[n];continue}if(t<=this.nb_measures_per_line[n])return{measure:t,line:n}}return{measure:0,line:0}}measureClicked(t,n,e,i,r,s){console.log("%c============","font-size:4em;color:red"),console.log("measureClicked");let a=Number(e.match(/abcjs-m([0-9]+)/)[1]),l=Number(e.match(/abcjs-l([0-9]+)/)[1]),d=Number(e.match(/abcjs-n([0-9]+)/)[1]),u=Number(e.match(/abcjs-mm([0-9]+)/)[1]);console.log("l =>",l),console.log("m =>",a),console.log("b =>",d),console.log("mm =>",u);let h=this.sm.getMeasures_hash(),_=0,b=this.sm.getMeasureByIdx(u);this.sel.setSelection([b],d);let w=b.getBeat(d).getAudioRegion().start;w||(w=b.getAudioRegion().start),this.ap.setCurrentTime(w),this.yt.seekTo(w),this.transport.setMeasure(u),this.transport.setBeat(Number(d))}disLight_all(){this.paper=document.querySelector("#abcCanvas");let t;t=document.querySelectorAll(".abcjsNoteSelected, .abcjsMeasureSelected");for(let n of t)n.classList.remove("abcjsNoteSelected"),n.classList.remove("abcjsMeasureSelected")}highlightMeasure(t,n){let e=this.paper.querySelectorAll(".abcjs-chord.abcjs-m"+t+".abcjs-l"+n+",.abcjs-annotation.abcjs-m"+t+".abcjs-l"+n);if(!e.length){console.warn("songComponent: highLightMeasure => Nothing to select : returning.");return}for(let i of e)i.classList.add("abcjsNoteSelected");if(this.cm.isAutoScroll()){let i=this.paper.querySelectorAll(".abcjs-clef.abcjs-l"+n);if(!i.length){console.warn("error : song component highlightMeasure() => no elements to scroll to.");return}this.checkInView(i)}}highlightBeat(t){let n=this.paper.querySelectorAll(".abcjs-mm"+t.measure+".abcjs-n"+t.beat),e=this.paper.querySelectorAll(".abcjs-mm"+t.measure);if(!n.length){console.warn("songComponent: highLightMeasure => Nothing to select : returning.");return}for(let i of e)i.classList.add("abcjsMeasureSelected");for(let i of n)i.querySelector(".abcjs-chord").classList.add("abcjsNoteSelected");if(this.cm.isAutoScroll()){if(!e.length){console.warn("error : song component highlightMeasure() => no elements to scroll to.");return}this.checkInView(e)}}checkInView(t){var n=$(".song"),e=n.height(),i=n.scrollTop(),r=i+e,s=$(t).offset().top-n.offset().top,a=s+$(t).height(),l=s<=screen.height-screen.height*.4&&s>100;if(l)return;let d=this.ap.getState()?"instant":"smooth";t[0].scrollIntoView({behavior:"instant",block:"center"})}onResize(){this.renderAbcWithOptions()}renderAbcWithOptions(){if(this.cm.minimalRendering){this.miniRender.render("abcCanvas");let t=document.getElementById("abcCanvas");t.style.overflow="hidden",t.style.height=""}else setTimeout(()=>{let t=window.innerWidth>900?window.innerWidth*.6:window.innerWidth*.9;d8.default.renderAbc("abcCanvas",this.abcString,{visualTranspose:this.sm.getTranspose(),staffwidth:t,add_classes:!0,clickListener:this.measureClicked.bind(this),responsive:"resize",format:{partsbox:!0}})},10)}init_bindings(){this.binding$=this.keys.match([Si.ESCAPE,Si.E],[]).subscribe(()=>{let t=event;if(!(t.path[0].tagName=="INPUT"||!($(document.activeElement).parents(".song").length||$(document.activeElement).hasClass("song"))))switch(t.stopPropagation(),t.preventDefault(),t.keyCode){case Si.ESCAPE:this.cm.setEditor_visible(!1),this.cm.setMetro_visible(!1),this.cm.setCircle_visible(!1),this.cm.setDico_visible(!1),this.cm.setOptions_visible(!1);break;case Si.E:if(t.path[0].tagName=="INPUT")return;this.cm.setEditor_visible(!0);break}})}close_tutoModal(t){if(t)this.cm.tutorial_skipped=!0,this.cm.saveInCookie();else{var n=$("#tuto-modal-iframe").attr("src");$("#tuto-modal-iframe").attr("src",n),this.modalInfos=!1}}refresh_tonality(){this.curTonaModel.refreshTonality()}refreshMidiCtrlTab(){this.midi_ctrl_tab=this.cm.getAssignedControls()}addShortcut(){this.cm.addAssignedControl(Number(this.midi_ctrl_note_selected),this.midi_ctrl_fct_selected,this.midi_ctrl_opt_selected),this.refreshMidiCtrlTab(),this.cm.saveInCookie()}removeShortcut(t,n){console.log(" remove shortcut: ",n),this.cm.removeAssignedControl(t,n),this.refreshMidiCtrlTab(),this.cm.saveInCookie()}update_chords_in_score(){this.chords_from_dico=Object.keys(this.sm.getChordsInScore())}change_piano_display(t){this.cm.set_piano_visible(t),this.cm.saveInCookie()}change_fretboard_display(t){this.cm.set_fretboard_visible(t),this.cm.saveInCookie()}export_control_bindings(){this.exported_controls=JSON.stringify(this.cm.getAssignedControls(),void 0,4)}import_control_bindings(){this.zone.run(()=>{this.cm.import_controls(JSON.parse(this.imported_controls)),this.refreshMidiCtrlTab()})}toggle_video_card(t=""){let n=t=="off"?!1:t=="on"?!0:void 0;this.zone.run(()=>{typeof n>"u"?this.show_video==!1?this.flip_card("flipCardVideo"):this.flip_card("flipCardVideoBack"):n?this.flip_card("flipCardVideo"):this.flip_card("flipCardVideoBack")})}flip_card(t){event.preventDefault(),console.log("flip_card");let e="rotateY("+(t=="flipCardVideo"?"180":"0")+"deg)";$(".flip-card-video .flip-card-inner").css("transform",e),t=="flipCardVideoBack"?this.show_video=!1:(this.show_video=!0,setTimeout(()=>{this.yt.checkAndCreatePlayer()},100))}updateOneTona(){this.isBefore&&!this.isAfter?this.oneTonaMode=1:!this.isBefore&&!this.isAfter?this.oneTonaMode=2:!this.isBefore&&this.isAfter?this.oneTonaMode=3:this.isBefore&&this.isAfter&&(this.oneTonaMode=4)}updateZoom(t){this.zoomVal=t}toggle_one_tona_before_braid(){this.isBefore=!this.isBefore,this.updateOneTona()}toggle_one_tona_after_braid(){this.isAfter=!this.isAfter,this.updateOneTona()}toggle_roman_display_braid(){this.si.braid_param_roman=!this.si.braid_param_roman}toggle_fretboard(t=""){let n=t=="off"?!1:t=="on"?!0:void 0;typeof n>"u"?this.cm.display_fretboard=!this.cm.display_fretboard:this.cm.display_fretboard=n}toggle_midi_chord(t=!1){this.cm.display_midi_chord=!this.cm.display_midi_chord}toggle_piano(t=""){let n=t=="off"?!1:t=="on"?!0:void 0;typeof n>"u"?this.cm.display_piano=!this.cm.display_piano:this.cm.display_piano=n}manage_yt_tab(){this.cm.is_chordstrip_visible()?this.cm.set_chordstrip_visible(!this.cm.is_chordstrip_visible()):this.display_Y=!1,this.cm.set_audio_visible(!this.cm.is_audio_visible())}manage_strip_tab(){this.cm.is_audio_visible()?this.cm.set_audio_visible(!this.cm.is_audio_visible()):this.display_Y=!1,this.cm.set_chordstrip_visible(!this.cm.is_chordstrip_visible())}change_novaxe_notation(){this.cm.toggleNovaxeNotation()}debug(){console.log(this.midi),console.log(this.sm)}change_novaxe_numbers_sync(){this.cm.set_letters_Numbers_sync(!this.cm.get_letters_Numbers_sync()),this.cm.sendDisplayNoteMode()}change_novaxe_numbers_display_note_mode(){this.cm.get_letters_Numbers_sync()&&(this.display_note_mode==!1?this.cm.setDisplayNoteMode("letters"):this.cm.setDisplayNoteMode("numbers"),this.display_note_mode=!this.display_note_mode,this.cm.sendDisplayNoteMode())}global_toggle_letters_numbers(){this.change_novaxe_numbers_display_note_mode()}change_novaxe_toggle_show_score_chords(){this.cm.setGlobalShowScoreChords(!this.cm.getGlobalShowScoreChords()),this.cm.sendGlobalShowScoreChords()}global_toggle_show_score_chords(){this.change_novaxe_toggle_show_score_chords()}control_enter(t){t.stopPropagation(),t.preventDefault(),this.stateObj.isVideoSide!==!0&&(this.stateObj={},this.stateObj.isVideoSide=null,this.stateObj.fretboardWasOn=null,this.stateObj.pianoWasOn=null,this.stateObj.fretboardWasOn=this.cm.display_fretboard,this.stateObj.pianoWasOn=this.cm.display_piano,this.stateObj.isVideoSide=!0,this.toggle_fretboard("off"),this.toggle_piano("off"),this.toggle_video_card("on"))}control_shift_enter(t){t.stopPropagation(),t.preventDefault(),this.stateObj.isVideoSide=!1,this.stateObj.fretboardWasOn&&this.toggle_fretboard("on"),this.stateObj.pianoWasOn&&this.toggle_piano("on"),this.toggle_video_card("off")}changeMidiChordDisplayVisibleState(t){this.cm.set_midi_chord_display_visible(t)}static{this.\u0275fac=function(n){return new(n||SongComponent)(Le(Qi),Le(Hn),Le(Sa),Le(nr),Le(Ci),Le(yi),Le(Po),Le(Rs),Le(xc),Le(W7),Le(Pd),Le(Cc),Le($a),Le(on),Le(hi))}}static{this.\u0275cmp=zt({type:SongComponent,selectors:[["app-song"]],outputs:{displayChange:"displayChange"},standalone:!1,decls:307,vars:138,consts:[["braidRange",""],["id","song",3,"keyup.control.enter","keyup.control.shift.enter"],["autofocus","","tabindex","0",1,"song",3,"resize"],[1,"flip-card-video"],["id","flipCardVideo",1,"flip-card-inner"],[1,"flip-card-front"],["id","abcCanvas",1,"",3,"contextmenu"],["id","flipCardVideoBack",1,"flip-card-back",3,"contextmenu"],[1,"flip-card-back-wrapper"],[1,"youtube-video-container"],["id","player",1,"yt_player",2,"width","100%","height","80%"],[1,"editor_tab",3,"contextmenu","click","ngClass"],["width","100%","src","assets/img/icons/edit_icon.svg"],[1,"metro_tab",3,"contextmenu","click","ngClass"],["width","100%","src","assets/img/metronome_ico.svg"],[1,"circle_tab",3,"contextmenu","click","ngClass"],[1,"fas","fa-circle",2,"font-size","1.3rem"],[1,"dico_tab",3,"contextmenu","click","ngClass"],["width","100%","src","assets/img/icons/dico_icon.svg"],[1,"options_tab",3,"contextmenu","click","ngClass"],[1,"fa","fa-cog",2,"font-size","1.3rem"],[1,"editor_menu",3,"ngClass"],[2,"z-index","3"],[1,"metro_menu",3,"ngClass"],[3,"hidden","metro_volume"],[1,"circle_menu",3,"ngClass"],[1,"d-flex","w-100","top-menu"],[1,"img-icon",3,"click"],["src","assets/img/icons/fifths_icon.png",3,"ngClass"],["data-tooltip","Fifths circle","data-tooltip-position","bottom"],["src","assets/img/icons/braid_icon.png",3,"ngClass"],["data-tooltip","Braid","data-tooltip-position","bottom"],[1,"braid-range",3,"hidden"],["type","range","min","0.4","max","2","step","0.1","value","1",1,"form-range",3,"change"],["id","braid_display",1,"braid-options",3,"hidden"],["data-toggle","collapse","href","#collapseBraidDisplay","role","button","aria-expanded","false","aria-controls","collapseBraidDisplay",1,"collapsible"],["title","Braid options",1,"fas","fa-cog","p-2"],["id","collapseBraidDisplay",1,"collapse"],[2,"margin-top","1.5rem"],["name","braids","id","braid-select","title","Braid skin",1,"braid-selector",3,"click","ngModelChange","ngModel","hidden"],["value","tonal"],["value","blues"],["value","new1"],["value","new2"],[1,"d-flex","apply-btns"],[1,"switch-titled",3,"hidden","ngClass"],[1,"title"],["title","Roman numerals/Chord symbols",1,"switch",3,"hidden"],["type","checkbox",3,"ngModelChange","disabled","ngModel"],[1,"slider","round"],[1,"number"],[1,"letter"],[1,"switch-titled",3,"hidden"],["title","Off/On",1,"switch"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"slider","classic","round"],[1,"d-flex","apply-btns","emphasis"],["type","checkbox",3,"change","ngModelChange","ngModel"],[1,"row-emph"],[1,"switch-titled","position","options_menu",3,"hidden"],["for","isBefore",1,"title"],["id","isBefore","type","checkbox",3,"change","ngModelChange","ngModel"],["for","isAfter",1,"title"],["id","isAfter","type","checkbox",3,"change","ngModelChange","ngModel"],[1,"fifths_submenu",3,"hidden"],[3,"midi_chord","score_chord","hidden"],[1,"braid_submenu",3,"hidden"],[3,"askChordsInScore","braidModel","cur_chord","is_roman","chordsInScore","one_tona_mode","zoom_val"],[1,"dico_menu",3,"ngClass"],[3,"hidden"],["id","options",1,"options_menu",3,"ngClass"],[1,"d-flex","m-3"],["for","isMinimalRendering",1,"p-3"],["id","isMinimalRendering","type","checkbox",2,"vertical-align","text-bottom",3,"ngModelChange","change","ngModel"],["for","midiSelector",1,"p-3"],["id","midiSelector",3,"hasChanged","is_guitar"],[1,"midi_indicator",3,"ngClass"],["for","controlSelector",1,"p-3"],["id","controlSelector",3,"hasChanged"],["for","isMidiGuitar",1,"p-3"],["id","idMidiGuitar","type","checkbox",2,"vertical-align","text-bottom",3,"ngModelChange","change","ngModel"],[1,"shortcuts","ml-3","mb-4"],["data-toggle","collapse","href","#collapseShortcuts","role","button","aria-expanded","false","aria-controls","collapseShortcuts",1,"collapsible"],[1,"fas","collapsible","fa-angle-double-down"],["id","collapseShortcuts",1,"collapse","pl-3"],[1,"m-2",2,"display","flex","flex-direction","row-reverse"],[1,"btn","btn-primary","mr-2","btn-sm",3,"click"],[1,"shortcuts-selection"],[3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],["type","text",3,"ngModelChange","ngModel"],[1,"fa","fa-plus",3,"click"],[1,"apply-btns",2,"margin-left","20px","display","flex","flex-direction","column"],["for","isTonalityButtonOpen",1,"p-3"],["id","isTonalityButtonOpen","type","checkbox",2,"vertical-align","text-bottom",3,"change","ngModelChange","ngModel"],[1,"switch-titled"],[1,"p-3"],[1,"switch"],["type","checkbox",3,"ngModelChange","change","click","ngModel"],[1,"switch-titled",3,"ngClass"],["type","checkbox",3,"change","ngModelChange","click","disabled","ngModel"],[1,"bottom-tabs",3,"ngClass"],["id","yt-tab",1,"bottom-tab",3,"contextmenu","click","ngClass"],["src","assets/img/wave.png","role","button",1,"p-2",2,"width","auto","height","50px"],["id","chordstrip-tab",1,"bottom-tab",3,"contextmenu","click","ngClass"],["src","assets/img/chordstrip.png","role","button",1,"p-2",2,"width","auto","height","35px"],["id","piano-tab",1,"bottom-tab",3,"contextmenu","click","ngClass"],["src","assets/img/piano.png"],["id","fretboard-tab",1,"bottom-tab",3,"contextmenu","click","ngClass"],["src","assets/img/fretboard/fretboard_logo.png"],["id","midi-chord-tab",1,"bottom-tab",3,"contextmenu","click","ngClass"],["src","assets/img/icons/G-clef.svg",2,"width","auto","height","30px","fill","white"],[3,"visibleState","display","midi_abc","midi_chord"],[3,"displayChange","display","cur_chord"],[3,"showVideoCard","display","cur_chord"],[3,"display","cur_chord"],["id","saved_ok_mark",1,"save-sign"],[1,"fas","fa-check",2,"color","green"],["id","saved_pb_mark",1,"save-sign"],[1,"fas","fa-times",2,"color","red"],["id","saved_pb_owner",1,"save-string"],["id","saved_pb_title",1,"save-string"],[2,"position","fixed","bottom","0px","right","25px","overflow","visible","z-index","1000",3,"is_opened","cur_chord_midi_chord"],["id","tuto-modal","tabindex","-1","role","dialog","aria-labelledby","tuto-modal-label","aria-hidden","true",1,"fakebook-modal","modal",3,"hidden"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","tuto-modal-label",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","tuto-modal-iframe","width","560","height","315","src",S0`https://www.youtube-nocookie.com/embed/e4d8H49v8ko?modestbranding=1&enablejsapi=1`,"title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen",""],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["for","skip_tutorial"],["label","skip_tutorial","type","checkbox",3,"ngModelChange","click","ngModel"],["id","import-modal","tabindex","-1","role","dialog","aria-labelledby","import-modal-label","aria-hidden","true",1,"fakebook-modal","modal",3,"hidden"],["id","import-modal-label",1,"modal-title"],["id","export-modal","tabindex","-1","role","dialog","aria-labelledby","export-modal-label","aria-hidden","true",1,"fakebook-modal","modal",3,"hidden"],["id","export-modal-label",1,"modal-title"],["class","list",4,"ngFor","ngForOf"],[1,"list"],[1,"param1"],[1,"param2"],[1,"param3"],[1,"fa","fa-times","param4",3,"click"]],template:function(n,e){if(n&1){let i=mn();p(0,"section",1),J("keyup.control.enter",function(s){return pe(i),fe(e.control_enter(s))})("keyup.control.shift.enter",function(s){return pe(i),fe(e.control_shift_enter(s))}),p(1,"div",2),J("resize",function(){return pe(i),fe(e.onResize())},P0),p(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),J("contextmenu",function(){return pe(i),fe(e.flip_card("flipCardVideo"))}),m()(),p(6,"div",7),J("contextmenu",function(){return pe(i),fe(e.flip_card("flipCardVideoBack"))}),p(7,"div",8)(8,"div",9),ie(9,"div",10),m()()()()(),p(10,"div",11),J("contextmenu",function(s){return pe(i),e.cm.toggleEditor_visible(),fe(s.preventDefault())})("click",function(){return pe(i),e.cm.toggleEditor_visible(),e.cm.setMetro_visible(!1),e.cm.setCircle_visible(!1),e.cm.setDico_visible(!1),fe(e.cm.setOptions_visible(!1))}),ie(11,"img",12),m(),p(12,"div",13),J("contextmenu",function(s){return pe(i),e.cm.toggleMetro_visible(),fe(s.preventDefault())})("click",function(){return pe(i),e.cm.setEditor_visible(!1),e.cm.toggleMetro_visible(),e.cm.setCircle_visible(!1),e.cm.setDico_visible(!1),fe(e.cm.setOptions_visible(!1))}),ie(13,"img",14),m(),p(14,"div",15),J("contextmenu",function(s){return pe(i),e.cm.toggleCircle_visible(),fe(s.preventDefault())})("click",function(){return pe(i),e.cm.setEditor_visible(!1),e.cm.setMetro_visible(!1),e.cm.toggleCircle_visible(),e.cm.setDico_visible(!1),fe(e.cm.setOptions_visible(!1))}),ie(15,"div",16),m(),p(16,"div",17),J("contextmenu",function(s){return pe(i),e.cm.toggleDico_visible(),fe(s.preventDefault())})("click",function(){return pe(i),e.cm.setEditor_visible(!1),e.cm.setMetro_visible(!1),e.cm.setCircle_visible(!1),e.cm.toggleDico_visible(),fe(e.cm.setOptions_visible(!1))}),ie(17,"img",18),m(),p(18,"div",19),J("contextmenu",function(s){return pe(i),e.cm.toggleOptions_visible(),fe(s.preventDefault())})("click",function(){return pe(i),e.cm.setEditor_visible(!1),e.cm.setMetro_visible(!1),e.cm.setCircle_visible(!1),e.cm.setDico_visible(!1),fe(e.cm.toggleOptions_visible())}),ie(19,"div",20),m(),p(20,"div",21),ie(21,"app-editor",22),m(),p(22,"div",23),ie(23,"app-metro",24),m(),p(24,"div",25)(25,"div",26)(26,"div",27),J("click",function(){return pe(i),e.cm.setBraid_visible(!1),fe(e.cm.setFifths_visible(!0))}),ie(27,"img",28)(28,"span",29),m(),p(29,"div",27),J("click",function(){return pe(i),e.cm.setBraid_visible(!0),fe(e.cm.setFifths_visible(!1))}),ie(30,"img",30)(31,"span",31),m(),p(32,"div",32)(33,"input",33,0),J("change",function(){pe(i);let s=rd(34);return fe(e.updateZoom(s.value))}),m()(),p(35,"div",34)(36,"a",35),ie(37,"i",36),m(),p(38,"div",37)(39,"div")(40,"h6",38),P(41,"Skin"),m(),p(42,"select",39),J("click",function(){return pe(i),fe(e.refresh_tonality())}),Fe("ngModelChange",function(s){return pe(i),Be(e.braidModel,s)||(e.braidModel=s),fe(s)}),p(43,"option",40),P(44,"Classic"),m(),p(45,"option",41),P(46,"Classic Blues"),m(),p(47,"option",42),P(48,"Beacon"),m(),p(49,"option",43),P(50,"Hive"),m()()(),p(51,"div",44)(52,"h6"),P(53,"Display"),m(),p(54,"div",45)(55,"span",46),P(56,"Roman display"),m(),p(57,"label",47)(58,"input",48),Fe("ngModelChange",function(s){return pe(i),Be(e.si.braid_param_roman,s)||(e.si.braid_param_roman=s),fe(s)}),m(),p(59,"span",49)(60,"span",50),P(61,"I"),m(),p(62,"span",51),P(63,"A"),m()()()(),p(64,"div",52)(65,"span",46),P(66,"Show midi"),m(),p(67,"label",53)(68,"input",54),Fe("ngModelChange",function(s){return pe(i),Be(e.si.braid_param_show_midi,s)||(e.si.braid_param_show_midi=s),fe(s)}),m(),p(69,"span",55)(70,"span",50),P(71,"I"),m(),p(72,"span",51),P(73,"O"),m()()()(),p(74,"div",52)(75,"span",46),P(76,"Show score chords"),m(),p(77,"label",53)(78,"input",54),Fe("ngModelChange",function(s){return pe(i),Be(e.si.braid_param_show_score_chords,s)||(e.si.braid_param_show_score_chords=s),fe(s)}),m(),p(79,"span",55)(80,"span",50),P(81,"I"),m(),p(82,"span",51),P(83,"O"),m()()()(),p(84,"div",52)(85,"span",46),P(86,"Simplified braid"),m(),p(87,"label",53)(88,"input",54),Fe("ngModelChange",function(s){return pe(i),Be(e.si.braid_param_simplified_braid,s)||(e.si.braid_param_simplified_braid=s),fe(s)}),m(),p(89,"span",55)(90,"span",50),P(91,"I"),m(),p(92,"span",51),P(93,"O"),m()()()()(),p(94,"div",56)(95,"h6"),P(96,"Emphasis"),m(),p(97,"div",52)(98,"span",46),P(99,"Score chords"),m(),p(100,"label",53)(101,"input",57),J("change",function(){return pe(i),fe(e.update_chords_in_score())}),Fe("ngModelChange",function(s){return pe(i),Be(e.si.braid_param_emph_score_chords,s)||(e.si.braid_param_emph_score_chords=s),fe(s)}),m(),p(102,"span",55)(103,"span",50),P(104,"I"),m(),p(105,"span",51),P(106,"O"),m()()()(),p(107,"div",58)(108,"div",52)(109,"span",46),P(110,"Diatonic scale"),m(),p(111,"label",53)(112,"input",54),Fe("ngModelChange",function(s){return pe(i),Be(e.si.braid_param_emph_diatonic_scale,s)||(e.si.braid_param_emph_diatonic_scale=s),fe(s)}),m(),p(113,"span",55)(114,"span",50),P(115,"I"),m(),p(116,"span",51),P(117,"O"),m()()()()(),p(118,"div",58)(119,"div",52)(120,"span",46),P(121,"One tona"),m(),p(122,"label",53)(123,"input",54),Fe("ngModelChange",function(s){return pe(i),Be(e.si.braid_param_emph_one_tona,s)||(e.si.braid_param_emph_one_tona=s),fe(s)}),m(),p(124,"span",55)(125,"span",50),P(126,"I"),m(),p(127,"span",51),P(128,"O"),m()()()(),p(129,"div",59)(130,"span",60),P(131,"Before"),m(),p(132,"input",61),J("change",function(){return pe(i),fe(e.updateOneTona())}),Fe("ngModelChange",function(s){return pe(i),Be(e.isBefore,s)||(e.isBefore=s),fe(s)}),m(),p(133,"span",62),P(134,"After"),m(),p(135,"input",63),J("change",function(){return pe(i),fe(e.updateOneTona())}),Fe("ngModelChange",function(s){return pe(i),Be(e.isAfter,s)||(e.isAfter=s),fe(s)}),m()()()()()()(),p(136,"div",64),ie(137,"app-fifth-circle",65),m(),p(138,"div",66)(139,"app-braid",67),J("askChordsInScore",function(){return pe(i),fe(e.update_chords_in_score())}),m()()(),p(140,"div",68),ie(141,"app-dico",69),m(),p(142,"div",70)(143,"div",71)(144,"h6"),P(145,"RENDERING"),m(),p(146,"span")(147,"label",72),P(148,"Minimal rendering"),m(),p(149,"input",73),Fe("ngModelChange",function(s){return pe(i),Be(e.cm.minimalRendering,s)||(e.cm.minimalRendering=s),fe(s)}),J("change",function(){return pe(i),fe(e.dm.renderFromModel())}),m()()(),p(150,"div",71)(151,"h6"),P(152,"MIDI"),m(),p(153,"span")(154,"label",74),P(155,"Midi input source "),m(),p(156,"app-midi-selector",75),J("hasChanged",function(){return pe(i),e.cm.saveInCookie(),fe(e.cur_midi_abc={l:"",r:""})}),m(),ie(157,"span",76),m(),p(158,"span")(159,"label",77),P(160,"Control input source "),m(),p(161,"app-control-selector",78),J("hasChanged",function(){return pe(i),fe(e.cm.saveInCookie())}),m(),ie(162,"span",76),m(),p(163,"span")(164,"label",79),P(165,"Is midi guitar "),m(),p(166,"input",80),Fe("ngModelChange",function(s){return pe(i),Be(e.cm.midi_is_guitar,s)||(e.cm.midi_is_guitar=s),fe(s)}),J("change",function(){return pe(i),fe(e.cm.saveInCookie())}),m()(),p(167,"div",81)(168,"a",82),ie(169,"i",83),P(170,"Shortcuts "),m(),p(171,"div",84)(172,"div",85)(173,"button",86),J("click",function(){return pe(i),fe(e.modalImport=!0)}),P(174,"Import"),m(),p(175,"button",86),J("click",function(){return pe(i),e.export_control_bindings(),fe(e.modalExport=!0)}),P(176,"Export"),m()(),p(177,"div",87)(178,"select",88),Fe("ngModelChange",function(s){return pe(i),Be(e.midi_ctrl_note_selected,s)||(e.midi_ctrl_note_selected=s),fe(s)}),Wt(179,woe,2,1,"option",89),m(),p(180,"select",88),Fe("ngModelChange",function(s){return pe(i),Be(e.midi_ctrl_fct_selected,s)||(e.midi_ctrl_fct_selected=s),fe(s)}),Wt(181,Moe,2,1,"option",89),m(),p(182,"input",90),Fe("ngModelChange",function(s){return pe(i),Be(e.midi_ctrl_opt_selected,s)||(e.midi_ctrl_opt_selected=s),fe(s)}),m(),p(183,"i",91),J("click",function(){return pe(i),fe(e.addShortcut())}),m()(),Wt(184,Poe,2,1,"div",89),m()()(),p(185,"div",92)(186,"h6"),P(187,"DISPLAY"),m(),p(188,"span")(189,"label",93),P(190,"Leave Tonality Button open"),m(),p(191,"input",94),J("change",function(){return pe(i),fe(e.cm.saveInCookie())}),Fe("ngModelChange",function(s){return pe(i),Be(e.cm.tonality_button_always_open,s)||(e.cm.tonality_button_always_open=s),fe(s)}),m()(),p(192,"div",95)(193,"span",96),P(194,"Chords Notation"),m(),p(195,"label",97)(196,"input",98),Fe("ngModelChange",function(s){return pe(i),Be(e.cm.novaxe_notation_on,s)||(e.cm.novaxe_notation_on=s),fe(s)}),J("change",function(){return pe(i),fe(e.cm.saveInCookie())})("click",function(){return pe(i),fe(e.change_novaxe_notation())}),m(),p(197,"span",55)(198,"span",50),P(199,"Novaxe"),m(),p(200,"span",51),P(201,"Classic"),m()()()(),p(202,"div",95)(203,"span",96),P(204,"Letters/Number system "),p(205,"b"),P(206,"sync"),m()(),p(207,"label",97)(208,"input",98),Fe("ngModelChange",function(s){return pe(i),Be(e.cm.letters_Numbers_sync,s)||(e.cm.letters_Numbers_sync=s),fe(s)}),J("change",function(){return pe(i),fe(e.cm.saveInCookie())})("click",function(){return pe(i),fe(e.change_novaxe_numbers_sync())}),m(),p(209,"span",55)(210,"span",51),P(211,"Free"),m(),p(212,"span",50),P(213,"Sync"),m()()()(),p(214,"div",99)(215,"span",96),P(216,"Letters/Number system "),m(),p(217,"label",97)(218,"input",100),J("change",function(){return pe(i),fe(e.cm.saveInCookie())}),Fe("ngModelChange",function(s){return pe(i),Be(e.display_note_mode,s)||(e.display_note_mode=s),fe(s)}),J("click",function(){return pe(i),fe(e.change_novaxe_numbers_display_note_mode())}),m(),p(219,"span",55)(220,"span",50),P(221,"Num"),m(),p(222,"span",51),P(223,"Let"),m()()()(),p(224,"div",95)(225,"span",96),P(226,"Global show Score chords"),m(),p(227,"label",97)(228,"input",98),Fe("ngModelChange",function(s){return pe(i),Be(e.cm.global_show_score_chords,s)||(e.cm.global_show_score_chords=s),fe(s)}),J("change",function(){return pe(i),fe(e.cm.saveInCookie())})("click",function(){return pe(i),fe(e.change_novaxe_toggle_show_score_chords())}),m(),p(229,"span",55)(230,"span",51),P(231,"Show"),m(),p(232,"span",50),P(233,"Hide"),m()()()()()(),p(234,"div",101)(235,"div",102),J("contextmenu",function(s){return pe(i),e.cm.set_audio_visible(!e.cm.is_audio_visible()),fe(s.preventDefault())})("click",function(){return pe(i),fe(e.manage_yt_tab())}),ie(236,"img",103),m(),p(237,"div",104),J("contextmenu",function(s){return pe(i),e.cm.set_chordstrip_visible(!e.cm.is_chordstrip_visible()),fe(s.preventDefault())})("click",function(){return pe(i),fe(e.manage_strip_tab())}),ie(238,"img",105),m(),p(239,"div",106),J("contextmenu",function(s){return pe(i),e.toggle_piano("on"),fe(s.preventDefault())})("click",function(){return pe(i),e.toggle_piano("on"),fe(e.savePrefs())}),ie(240,"img",107),m(),p(241,"div",108),J("contextmenu",function(s){return pe(i),e.toggle_fretboard("on"),fe(s.preventDefault())})("click",function(){return pe(i),e.toggle_fretboard("on"),fe(e.savePrefs())}),ie(242,"img",109),m(),p(243,"div",110),J("contextmenu",function(s){return pe(i),e.toggle_midi_chord(!0),fe(s.preventDefault())})("click",function(){return pe(i),fe(e.toggle_midi_chord(!0))}),ie(244,"img",111),m()(),p(245,"app-midi-chord-display",112),J("visibleState",function(s){return pe(i),fe(e.changeMidiChordDisplayVisibleState(s))}),m(),p(246,"app-piano",113),J("displayChange",function(s){return pe(i),fe(e.change_piano_display(s))}),m(),p(247,"app-fretboard",113),J("displayChange",function(s){return pe(i),fe(e.change_fretboard_display(s))}),m(),p(248,"app-youtube-audio",114),J("showVideoCard",function(){return pe(i),fe(e.toggle_video_card("on"))}),m(),ie(249,"app-chordstrip",115),m(),p(250,"div",116),ie(251,"i",117),m(),p(252,"div",118),ie(253,"i",119),m(),p(254,"div",120)(255,"p"),P(256,"Score can only be modified by its owner"),m()(),p(257,"div",121)(258,"p"),P(259,"Please enter a score title"),m()(),ie(260,"app-tonality-button",122),p(261,"div",123)(262,"div",124)(263,"div",125)(264,"div",126)(265,"h5",127),P(266,"How to use Novaxe ?"),m(),p(267,"button",128),J("click",function(){return pe(i),fe(e.close_tutoModal(!1))}),p(268,"span",129),P(269,"\xD7"),m()()(),p(270,"div",130),ie(271,"iframe",131),m(),p(272,"div",132)(273,"button",133),J("click",function(){return pe(i),fe(e.close_tutoModal(!1))}),P(274,"Got it !"),m(),p(275,"label",134),P(276,"Skip this window next time"),m(),p(277,"input",135),Fe("ngModelChange",function(s){return pe(i),Be(e.cm.tutorial_skipped,s)||(e.cm.tutorial_skipped=s),fe(s)}),J("click",function(){return pe(i),fe(e.close_tutoModal(!0))}),m()()()()(),p(278,"div",136)(279,"div",124)(280,"div",125)(281,"div",126)(282,"h5",137),P(283,"Import controls"),m(),p(284,"button",128),J("click",function(){return pe(i),fe(e.modalImport=!1)}),p(285,"span",129),P(286,"\xD7"),m()()(),p(287,"div",130)(288,"textarea",88),Fe("ngModelChange",function(s){return pe(i),Be(e.imported_controls,s)||(e.imported_controls=s),fe(s)}),m()(),p(289,"div",132)(290,"button",133),J("click",function(){return pe(i),e.modalImport=!1,fe(e.import_control_bindings())}),P(291,"Import"),m()()()()(),p(292,"div",138)(293,"div",124)(294,"div",125)(295,"div",126)(296,"h5",139),P(297,"Export controls"),m(),p(298,"button",128),J("click",function(){return pe(i),fe(e.modalExport=!1)}),p(299,"span",129),P(300,"\xD7"),m()()(),p(301,"div",130)(302,"pre"),P(303),m()(),p(304,"div",132)(305,"button",133),J("click",function(){return pe(i),fe(e.modalExport=!1)}),P(306,"Export"),m()()()()()()}n&2&&(y(10),E("ngClass",mr(93,poe,e.cm.isEditor_visible()||e.cm.isMetro_visible()||e.cm.isCircle_visible()||e.cm.isDico_visible()||e.cm.isOptions_visible(),e.cm.isEditor_visible())),y(2),E("ngClass",mr(96,foe,e.cm.isEditor_visible()||e.cm.isMetro_visible()||e.cm.isCircle_visible()||e.cm.isDico_visible()||e.cm.isOptions_visible(),e.cm.isMetro_visible())),y(2),E("ngClass",mr(99,moe,e.cm.isEditor_visible()||e.cm.isMetro_visible()||e.cm.isCircle_visible()||e.cm.isDico_visible()||e.cm.isOptions_visible(),e.cm.isCircle_visible())),y(2),E("ngClass",mr(102,goe,e.cm.isEditor_visible()||e.cm.isMetro_visible()||e.cm.isCircle_visible()||e.cm.isDico_visible()||e.cm.isOptions_visible(),e.cm.isDico_visible())),y(2),E("ngClass",mr(105,_oe,e.cm.isEditor_visible()||e.cm.isMetro_visible()||e.cm.isCircle_visible()||e.cm.isDico_visible()||e.cm.isOptions_visible(),e.cm.isOptions_visible())),y(2),E("ngClass",Ae(108,yoe,e.cm.isEditor_visible())),y(2),E("ngClass",Ae(110,voe,e.cm.isMetro_visible())),y(),E("hidden",!e.cm.isMetro_visible())("metro_volume",e.cm.metroVolume),y(),E("ngClass",Ae(112,boe,e.cm.isCircle_visible())),y(3),E("ngClass",e.cm.isBraid_visible()?"icon dark":"icon"),y(3),E("ngClass",e.cm.isFifths_visible()?"icon dark":"icon"),y(2),E("hidden",!e.cm.isBraid_visible()),y(3),E("hidden",!e.cm.isBraid_visible()),y(7),Oe("ngModel",e.braidModel),E("hidden",!e.cm.isBraid_visible()),y(12),E("hidden",!e.cm.isBraid_visible())("ngClass",Ae(114,a8,e.cm.letters_Numbers_sync)),y(3),E("hidden",!e.cm.isBraid_visible()),y(),E("disabled",e.cm.letters_Numbers_sync),Oe("ngModel",e.si.braid_param_roman),y(6),E("hidden",!e.cm.isBraid_visible()),y(4),Oe("ngModel",e.si.braid_param_show_midi),y(6),E("hidden",!e.cm.isBraid_visible()),y(4),Oe("ngModel",e.si.braid_param_show_score_chords),y(6),E("hidden",!e.cm.isBraid_visible()),y(4),Oe("ngModel",e.si.braid_param_simplified_braid),y(9),E("hidden",!e.cm.isBraid_visible()),y(4),Oe("ngModel",e.si.braid_param_emph_score_chords),y(7),E("hidden",!e.cm.isBraid_visible()),y(4),Oe("ngModel",e.si.braid_param_emph_diatonic_scale),y(7),E("hidden",!e.cm.isBraid_visible()),y(4),Oe("ngModel",e.si.braid_param_emph_one_tona),y(6),E("hidden",!e.cm.isBraid_visible()),y(3),Oe("ngModel",e.isBefore),y(3),Oe("ngModel",e.isAfter),y(),E("hidden",!e.cm.isFifths_visible()),y(),E("midi_chord",e.cur_midi_chord)("score_chord",e.cur_chord)("hidden",!e.cm.isCircle_visible()),y(),E("hidden",!e.cm.isBraid_visible()),y(),E("braidModel",e.braidModel)("cur_chord",e.cur_midi_chord)("is_roman",e.si.braid_param_roman)("chordsInScore",e.chords_from_dico)("one_tona_mode",e.oneTonaMode)("zoom_val",e.zoomVal),y(),E("ngClass",Ae(116,xoe,e.cm.isDico_visible())),y(),E("hidden",!e.cm.isDico_visible()),y(),E("ngClass",Ae(118,Coe,e.cm.isOptions_visible())),y(7),Oe("ngModel",e.cm.minimalRendering),y(7),E("is_guitar",e.cm.is_midi_guitar()),y(),E("ngClass",Ae(120,l8,e.cur_midi_chord.full_chord.full_notes.length)),y(5),E("ngClass",Ae(122,l8,e.cur_midi_ctrl)),y(4),Oe("ngModel",e.cm.midi_is_guitar),y(12),Oe("ngModel",e.midi_ctrl_note_selected),y(),E("ngForOf",e.midi_ctrl_midi_notes_tab),y(),Oe("ngModel",e.midi_ctrl_fct_selected),y(),E("ngForOf",e.midi_ctrl_functions),y(),Oe("ngModel",e.midi_ctrl_opt_selected),y(2),E("ngForOf",e.midi_ctrl_tab),y(7),Oe("ngModel",e.cm.tonality_button_always_open),y(5),Oe("ngModel",e.cm.novaxe_notation_on),y(12),Oe("ngModel",e.cm.letters_Numbers_sync),y(6),E("ngClass",Ae(124,a8,!e.cm.letters_Numbers_sync)),y(4),E("disabled",!e.cm.letters_Numbers_sync),Oe("ngModel",e.display_note_mode),y(10),Oe("ngModel",e.cm.global_show_score_chords),y(6),E("ngClass",Ae(126,J1,(e.cm.display_audio==!0||e.cm.display_chordstrip==!0)&&e.display_Y==!1)),y(),E("ngClass",Ae(128,c8,e.cm.is_audio_visible())),y(2),E("ngClass",Ae(130,c8,e.cm.is_chordstrip_visible())),y(2),E("ngClass",Ae(132,J1,e.cm.display_piano==!0)),y(2),E("ngClass",Ae(134,J1,e.cm.display_fretboard==!0)),y(2),E("ngClass",Ae(136,J1,e.cm.display_midi_chord==!0)),y(2),E("display",e.cm.is_midi_chord_display_visible())("midi_abc",e.cur_midi_abc)("midi_chord",e.cur_midi_chord),y(),E("display",e.cm.display_piano)("cur_chord",e.cur_midi_chord),y(),E("display",e.cm.display_fretboard)("cur_chord",e.cur_midi_chord),y(),E("display",e.cm.is_audio_visible())("cur_chord",e.cur_midi_chord),y(),E("display",e.cm.is_chordstrip_visible())("cur_chord",e.cur_midi_chord),y(11),E("is_opened",e.cm.tonality_button_always_open)("cur_chord_midi_chord",e.cur_midi_chord),y(),E("hidden",e.modalInfos==!1),y(16),Oe("ngModel",e.cm.tutorial_skipped),y(),E("hidden",e.modalImport==!1),y(10),Oe("ngModel",e.imported_controls),y(4),E("hidden",e.modalExport==!1),y(11),Yt(e.exported_controls))},dependencies:[lr,gi,bo,xo,Gi,ro,Jo,Ti,Mi,Ld,Nd,U9,H9,X9,Su,Q9,H1,e8,t8,n8,r8,s8],styles:['@font-face{font-family:Comic Neue;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/comicneue/v8/4UaErEJDsxBrF37olUeD_xHM8pxULg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.chordsBrowse_tab[_ngcontent-%COMP%]{height:1em;width:3em;position:fixed;bottom:45px;left:138px;border:1px solid black;border-bottom:none;background-color:#343a40!important;border-radius:12px 12px 0 0/12px 12px 0px 0px;color:#fff;display:flex;justify-content:center;align-items:center;font-size:1.3em}.chordsBrowse_tab.chordsBrowse_visible[_ngcontent-%COMP%]{bottom:145px}.chordsBrowse_menu[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex-direction:column;justify-content:center;align-items:center;outline:none;background-color:#343a40;position:fixed;width:100%;left:0;height:100px;bottom:45px}.editor_tab[_ngcontent-%COMP%]{width:30px;height:140px;position:fixed;right:0;top:100px;border:1px solid black;border-radius:12px 0 0 12px/12px 0px 0px 12px;background-color:#2a2f34;color:#fff;display:flex;justify-content:center;align-items:center;font-size:.9em}.editor_tab.editor_visible[_ngcontent-%COMP%]{right:36vw}.editor_tab.active[_ngcontent-%COMP%]{border-right:none;z-index:9;background-color:#343a40}@media (max-width: 750px){.editor_tab.editor_visible[_ngcontent-%COMP%], .dico_tab.dico_visible[_ngcontent-%COMP%], .options_tab.options_visible[_ngcontent-%COMP%], .circle_tab.circle_visible[_ngcontent-%COMP%], .metro_tab.metro_visible[_ngcontent-%COMP%]{right:271px!important}}.editor_menu[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;background-color:#343a40!important;position:fixed;width:36vw;height:100%;right:100%;top:0;color:#fff;min-width:271px;padding-top:10vh}.editor_menu.editor_visible[_ngcontent-%COMP%]{right:0vw}.metro_tab[_ngcontent-%COMP%]{width:30px;height:140px;position:fixed;right:0;top:205px;border:1px solid black;border-radius:12px 0 0 12px/12px 0px 0px 12px;background-color:#2a2f34;color:#fff;display:flex;justify-content:center;align-items:center;font-size:.9em}.metro_tab.metro_visible[_ngcontent-%COMP%]{right:36vw}.metro_tab.active[_ngcontent-%COMP%]{border-right:none;z-index:9;background-color:#343a40}.metro_menu[_ngcontent-%COMP%]{background-color:#343a40!important;position:fixed;height:100%;right:100%;top:0;color:#fff;padding-top:75px;width:36vw;min-width:271px;justify-content:center;display:flex}.metro_menu.metro_visible[_ngcontent-%COMP%]{right:0vw}app-metro[_ngcontent-%COMP%]{position:absolute;height:90%;width:100%}.circle_tab[_ngcontent-%COMP%]{width:30px;height:140px;position:fixed;right:0;top:310px;border:1px solid black;border-radius:12px 0 0 12px/12px 0px 0px 12px;background-color:#2a2f34;color:#fff;display:flex;justify-content:center;align-items:center;font-size:.9em}.circle_tab.circle_visible[_ngcontent-%COMP%]{right:36vw}.circle_tab.active[_ngcontent-%COMP%]{border-right:none;z-index:9;background-color:#343a40}.circle_menu[_ngcontent-%COMP%]{background-color:#343a40!important;padding-top:75px;position:fixed;height:100%;right:100%;top:0;color:#fff;width:36vw;min-width:271px;justify-content:flex-start;flex-direction:column;display:flex}.circle_menu.circle_visible[_ngcontent-%COMP%]{right:0}.dico_tab[_ngcontent-%COMP%]{width:30px;height:140px;position:fixed;right:0;top:415px;border:1px solid black;border-radius:12px 0 0 12px/12px 0px 0px 12px;background-color:#2a2f34;color:#fff;display:flex;justify-content:center;align-items:center;font-size:.9em}.dico_tab.dico_visible[_ngcontent-%COMP%]{right:36vw}.dico_tab.active[_ngcontent-%COMP%]{border-right:none;z-index:9;background-color:#343a40}.dico_menu[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;background-color:#343a40!important;position:fixed;width:36vw;height:100%;right:100%;top:0;color:#fff;min-width:271px;padding-top:75px}.dico_menu.dico_visible[_ngcontent-%COMP%]{right:0vw}.options_tab[_ngcontent-%COMP%]{width:30px;height:140px;position:fixed;right:0;top:520px;border:1px solid black;border-radius:12px 0 0 12px/12px 0px 0px 12px;background-color:#2a2f34;color:#fff;display:flex;justify-content:center;align-items:center;font-size:.9em}.options_tab.options_visible[_ngcontent-%COMP%]{right:36vw}.options_tab.active[_ngcontent-%COMP%]{border-right:none;z-index:9;background-color:#343a40}.options_menu[_ngcontent-%COMP%]{background-color:#343a40!important;position:fixed;height:100%;right:100%;width:36vw;min-width:271px;top:0;color:#fff;padding-top:75px;display:flex;flex-direction:column}.options_menu.options_visible[_ngcontent-%COMP%]{right:0}.options_menu[_ngcontent-%COMP%]   .p-3[_ngcontent-%COMP%]{padding:.5rem 1rem!important}.options_menu[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{color:var(--light_prim)}.options_menu[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:after{width:20px;height:20px;inset:-5px 0 0 -5px;position:relative;background-color:var(--light_prim);content:"";display:block;visibility:visible;padding:0;border:2px solid var(--light_prim);border-radius:3px}.options_menu[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:after{width:20px;height:20px;inset:-5px 0 0 -5px;position:relative;background-color:var(--green_nvx);content:"";display:block;visibility:visible;border:2px solid var(--light_prim);border-radius:3px}.options_menu[_ngcontent-%COMP%]   .switch-titled[_ngcontent-%COMP%]{width:100%;justify-content:left}.options_menu[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{width:84px;height:16px}.options_menu[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.options_menu[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{-webkit-transform:translateX(42px);-ms-transform:translateX(42px);transform:translate(42px)}.options_menu[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{height:16px;width:43px;left:0;top:0;border-radius:34px}.options_menu[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider.classic[_ngcontent-%COMP%]   .letter[_ngcontent-%COMP%]{left:45px}.options_menu[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider.round[_ngcontent-%COMP%]{width:84px}.options_menu[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:.25rem;background:#fff}.options_menu[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{outline:none}.options_menu[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{width:34vw;flex-direction:column}app-midi-selector[_ngcontent-%COMP%], app-control-selector[_ngcontent-%COMP%]{font-family:Staatliches;font-size:24px;font-weight:500}#collapseShortcuts[_ngcontent-%COMP%]{max-height:300px;overflow:scroll}.shortcuts[_ngcontent-%COMP%]{border-bottom:1px #fff solid}.shortcuts[_ngcontent-%COMP%]   .collapsible[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.shortcuts[_ngcontent-%COMP%]   .collapsible[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{border-bottom:none;padding-right:5px}.shortcuts[_ngcontent-%COMP%]   .shortcuts-selection[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;height:auto;justify-content:space-between;margin-bottom:10px}.shortcuts[_ngcontent-%COMP%]   .shortcuts-selection[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:.25rem;border:none;margin-right:5px}.shortcuts[_ngcontent-%COMP%]   .shortcuts-selection[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}.shortcuts[_ngcontent-%COMP%]   .shortcuts-selection[_ngcontent-%COMP%]   .fa-plus[_ngcontent-%COMP%]{color:var(--green_nvx);font-size:1.5rem}.shortcuts[_ngcontent-%COMP%]   .shortcuts-selection[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-right:5px}.shortcuts[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin:0 5px}.shortcuts[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .param1[_ngcontent-%COMP%]{display:block;width:18%}.shortcuts[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .param2[_ngcontent-%COMP%]{display:block;width:42%}.shortcuts[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .param3[_ngcontent-%COMP%]{display:block;width:24%}.shortcuts[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .param4[_ngcontent-%COMP%]{display:block;width:15%;text-align:right;color:var(--red_nvx)}.song[_ngcontent-%COMP%]{display:flex;padding-top:7vh;height:100vh;cursor:default;-webkit-user-select:none;user-select:none;position:relative}.song[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.song[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.song[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#ff8a00,#e52e71)}.song[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.no-margins[_ngcontent-%COMP%]{margin:0}.title-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}#abcCanvas[_ngcontent-%COMP%]{overflow:hidden;margin-bottom:16em}.fifths_submenu[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;display:flex;align-items:center}.fifths_submenu[_ngcontent-%COMP%]   app-fifth-circle[_ngcontent-%COMP%]{width:75%;top:0;fill:#fff;overflow:hidden}.fifths_submenu[_ngcontent-%COMP%]   .fifths_infos[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;margin-top:8%}.braid_submenu[_ngcontent-%COMP%]{height:80vh;overflow:auto}app-youtube-audio[_ngcontent-%COMP%]{z-index:20}  .abcjsMeasureSelected{fill:#00f;color:#00f}  .abcjsMeasureSelected.abcjsNoteSelected{font-size:1.3em!important;fill:red!important;color:red!important}  .abcjs-part{transform:translate(-60px)}.fakebook-modal[_ngcontent-%COMP%]{position:fixed;left:0;z-index:1050;display:flex;width:100%;height:100%;overflow:hidden;outline:0;min-width:600px;justify-content:center;align-items:center;background:#0000005c}.fakebook-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{background:#2b399061}.fakebook-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{overflow-x:scroll}.fakebook-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{min-width:600px;width:100%;height:auto}.top-menu[_ngcontent-%COMP%]{margin:10px;position:relative;justify-content:right;align-items:center}.top-menu[_ngcontent-%COMP%]   .braid-options[_ngcontent-%COMP%]{padding:10px 30px 10px 12px;width:100%}.top-menu[_ngcontent-%COMP%]   .braid-options[_ngcontent-%COMP%]   .collapsible[_ngcontent-%COMP%]{color:#fff;cursor:pointer;outline:none;height:1.5em;display:flex;justify-content:right;align-items:center}.top-menu[_ngcontent-%COMP%]   .braid-options[_ngcontent-%COMP%]   a.collapsible[_ngcontent-%COMP%]:hover{text-decoration:none}.top-menu[_ngcontent-%COMP%]   .braid-options[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%], .top-menu[_ngcontent-%COMP%]   .braid-options[_ngcontent-%COMP%]   .collapsible[_ngcontent-%COMP%]:hover{background-color:transparent}.top-menu[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;box-shadow:-3px 7px 10px #00000040;border-radius:20px;border:1px solid var(--darkgray_nvx);height:10px;width:100%;margin-top:17px}.top-menu[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track{-webkit-appearance:none}.top-menu[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{width:20px;height:20px;border-radius:20px;-webkit-appearance:none;cursor:ew-resize;background:linear-gradient(180deg,var(--gray_prim),var(--gray_nvx))!important;box-shadow:-20px 0 0 80px linear-gradient(180deg,var(--gray_prim),var(--gray_nvx))!important}.top-menu[_ngcontent-%COMP%]   .braid-range[_ngcontent-%COMP%]{position:absolute;left:0;right:20px;top:0;width:50%;margin:auto}.score_infos[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.score_infos[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:70%;margin-bottom:0;margin-right:5px}.img-icon[_ngcontent-%COMP%]{object-fit:contain;position:absolute;left:0;top:7px}.img-icon[_ngcontent-%COMP%]:nth-child(1){margin-left:10px}.img-icon[_ngcontent-%COMP%]:nth-child(2){margin-left:30px}.icon.dark[_ngcontent-%COMP%]{filter:brightness(.5)}.circle_menu[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{text-transform:uppercase}.apply-btns[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin-bottom:15px}.apply-btns[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:25px;height:14.8px;margin-bottom:0}.apply-btns[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:var(--blue_nvx);-webkit-transition:.4s;transition:.4s}.apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before, .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   .eighth[_ngcontent-%COMP%]   .apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   .sixteenth[_ngcontent-%COMP%]{position:absolute;content:"";height:13px;width:13px;left:.5px;top:.5px;background-color:#fff;-webkit-transition:.4s;transition:.4s}.apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:none;font-size:12px;position:absolute;top:0;color:#fff;z-index:0;font-family:nvxChord;line-height:1.4em}.apply-btns[_ngcontent-%COMP%]   .slider.classic[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;font-family:Roboto;font-size:11px}.apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{left:3px}.apply-btns[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   .letter[_ngcontent-%COMP%]{left:13.5px}.apply-btns[_ngcontent-%COMP%]   .slider.classic[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{left:4px}.apply-btns[_ngcontent-%COMP%]   .slider.classic[_ngcontent-%COMP%]   .letter[_ngcontent-%COMP%]{left:14px}.apply-btns[_ngcontent-%COMP%]   .switch-titled[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:3px;width:65%}.apply-btns[_ngcontent-%COMP%]   .switch-titled.position[_ngcontent-%COMP%]{justify-content:center}.apply-btns[_ngcontent-%COMP%]   .switch-titled.position.options_menu[_ngcontent-%COMP%]{background-color:#343a40!important;position:unset;height:100%;right:100%;width:auto;min-width:0;color:#fff;padding-top:0}.apply-btns[_ngcontent-%COMP%]   .switch-titled.position.options_menu[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{vertical-align:text-bottom;margin-left:5px}.apply-btns[_ngcontent-%COMP%]   .switch-titled.position.options_menu[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:after{width:15px;height:15px;top:-1px;left:0}.apply-btns[_ngcontent-%COMP%]   .switch-titled[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:10px;margin-right:2px;margin-left:1rem}.apply-btns[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:var(--green_nvx)}.apply-btns[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px var(--green_nvx)}.apply-btns[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{-webkit-transform:translateX(10px);-ms-transform:translateX(10px);transform:translate(10px)}.apply-btns[_ngcontent-%COMP%]   .slider.round[_ngcontent-%COMP%]{border-radius:34px;font-size:.5em}.apply-btns[_ngcontent-%COMP%]   .slider.round[_ngcontent-%COMP%]:before{border-radius:50%;z-index:1}.apply-btns.emphasis[_ngcontent-%COMP%]   .row-emph[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin:0}.apply-btns.emphasis[_ngcontent-%COMP%]   .row-emph[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:nth-child(1){margin-right:15px}.apply-btns.emphasis[_ngcontent-%COMP%]   .row-emph[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:3px;margin-left:15px}.apply-btns.emphasis[_ngcontent-%COMP%]   .row-emph[_ngcontent-%COMP%]{width:100%;display:flex}.braid-selector[_ngcontent-%COMP%]{border-radius:10px;font-size:12px;background:#343a40;color:#fff;border:1px solid #fff;margin-right:35px;margin-bottom:15px;height:fit-content;margin-left:1rem}.braid-selector[_ngcontent-%COMP%]:focus-visible{outline:none}.midi_indicator[_ngcontent-%COMP%]{width:20px;height:20px;background-color:red;margin-left:6px;border-radius:10px;display:inline-block}.midi_indicator.midi_in_active[_ngcontent-%COMP%]{background-color:green}.save-string[_ngcontent-%COMP%]{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);font-size:2em;color:var(--green_nvx);z-index:9999;filter:drop-shadow(black 1px 1px 1px)}.save-sign[_ngcontent-%COMP%]{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);font-size:15em}section#song[_ngcontent-%COMP%]   .flip-card-video[_ngcontent-%COMP%]{background-color:transparent;width:64vw;height:100%;perspective:1000px}section#song[_ngcontent-%COMP%]   .flip-card-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;text-align:center;transition:transform .6s;transform-style:preserve-3d}section#song[_ngcontent-%COMP%]   .flip-card-front[_ngcontent-%COMP%], .flip-card-back[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden}section#song[_ngcontent-%COMP%]   .flip-card-front[_ngcontent-%COMP%]{color:#000;overflow:auto}section#song[_ngcontent-%COMP%]   .flip-card-front[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}section#song[_ngcontent-%COMP%]   .flip-card-front[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}section#song[_ngcontent-%COMP%]   .flip-card-front[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#ff8a00,#e52e71)}section#song[_ngcontent-%COMP%]   .flip-card-front[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}section#song[_ngcontent-%COMP%]   .flip-card-back[_ngcontent-%COMP%]{transform:rotateY(180deg);overflow:hidden;background-color:#000}section#song[_ngcontent-%COMP%]   .flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]{height:100%;width:100%;overflow-y:scroll}section#song[_ngcontent-%COMP%]   .flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;right:100px;border-radius:10px}section#song[_ngcontent-%COMP%]   .flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;margin-right:10px;border-radius:10px}section#song[_ngcontent-%COMP%]   .flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}section#song[_ngcontent-%COMP%]   .flip-card-back[_ngcontent-%COMP%]   .flip-card-back-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555;border-radius:10px}section#song[_ngcontent-%COMP%]   .flip-card-video[_ngcontent-%COMP%]   .youtube-video-container[_ngcontent-%COMP%]{align-items:center;min-width:100%;max-width:100%;min-height:100%;max-height:100%;width:100%;height:100%}section#song[_ngcontent-%COMP%]   .flip-card-back[_ngcontent-%COMP%]:after{width:100%;content:"";position:absolute;top:0;background-color:transparent;height:100%;display:block}[data-tooltip][_ngcontent-%COMP%]{display:inline-block;position:absolute;cursor:help;padding:15px 7px;margin-left:-15px}[data-tooltip][_ngcontent-%COMP%]:before{content:attr(data-tooltip);display:none;position:absolute;background:#000;color:#fff;padding:4px 8px;font-size:14px;line-height:1.4;min-width:100px;text-align:center;border-radius:4px}[data-tooltip-position=top][_ngcontent-%COMP%]:before, [data-tooltip-position=bottom][_ngcontent-%COMP%]:before{left:50%;-ms-transform:translateX(-50%);-moz-transform:translateX(-50%);-webkit-transform:translateX(-50%);transform:translate(-50%)}[data-tooltip-position=right][_ngcontent-%COMP%]:before, [data-tooltip-position=left][_ngcontent-%COMP%]:before{top:50%;-ms-transform:translateY(-50%);-moz-transform:translateY(-50%);-webkit-transform:translateY(-50%);transform:translateY(-50%)}[data-tooltip-position=top][_ngcontent-%COMP%]:before{bottom:100%;margin-bottom:6px}[data-tooltip-position=right][_ngcontent-%COMP%]:before{left:100%;margin-left:6px}[data-tooltip-position=bottom][_ngcontent-%COMP%]:before{top:100%;margin-top:6px}[data-tooltip-position=left][_ngcontent-%COMP%]:before{right:100%;margin-right:6px}[data-tooltip][_ngcontent-%COMP%]:after{content:"";display:none;position:absolute;width:0;height:0;border-color:transparent;border-style:solid}[data-tooltip-position=top][_ngcontent-%COMP%]:after, [data-tooltip-position=bottom][_ngcontent-%COMP%]:after{left:50%;margin-left:-6px}[data-tooltip-position=right][_ngcontent-%COMP%]:after, [data-tooltip-position=left][_ngcontent-%COMP%]:after{top:50%;margin-top:-6px}[data-tooltip-position=top][_ngcontent-%COMP%]:after{bottom:100%;border-width:6px 6px 0;border-top-color:#000}[data-tooltip-position=right][_ngcontent-%COMP%]:after{left:100%;border-width:6px 6px 6px 0;border-right-color:#000}[data-tooltip-position=bottom][_ngcontent-%COMP%]:after{top:100%;border-width:0 6px 6px;border-bottom-color:#000}[data-tooltip-position=left][_ngcontent-%COMP%]:after{right:100%;border-width:6px 0 6px 6px;border-left-color:#000}[data-tooltip][_ngcontent-%COMP%]:hover:before, [data-tooltip][_ngcontent-%COMP%]:hover:after{display:block;z-index:50}#fretboard-tab[_ngcontent-%COMP%]{left:500px}#midi-chord-tab[_ngcontent-%COMP%]{left:650px}#piano-tab[_ngcontent-%COMP%]{left:350px}#yt-tab[_ngcontent-%COMP%]{left:50px}#chordstrip-tab[_ngcontent-%COMP%]{left:200px}.bottom-tab[_ngcontent-%COMP%]{width:140px;height:30px;position:fixed;border:1px solid black;border-left:none;background-color:#2a2f34;border-radius:12px 12px 0 0/12px 12px 0px 0px;display:flex;justify-content:center;align-items:center}.bottom-tab.active[_ngcontent-%COMP%]{background-color:#343a40;border-bottom:none}.bottom-tabs[_ngcontent-%COMP%]{font-size:1.1em;width:auto;height:30px;position:fixed;bottom:45px}.bottom-tabs[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.bottom-tabs.show[_ngcontent-%COMP%]{bottom:145px}.disabled[_ngcontent-%COMP%]{opacity:.3}app-chordstrip[_ngcontent-%COMP%]{z-index:10}']})}}return SongComponent})();var koe=t=>({pair:t}),uo=t=>[t];function Eoe(t,n){if(t&1){let e=mn();p(0,"tr",31),J("click",function(r){return pe(e),fe(r.stopPropagation())}),p(1,"td",32),J("click",function(r){return pe(e),fe(r.stopPropagation())}),ie(2,"img",33),m(),p(3,"td")(4,"a",34),J("click",function(r){return pe(e),fe(r.stopPropagation())}),P(5),m()(),p(6,"td")(7,"a",32),J("click",function(r){return pe(e),fe(r.stopPropagation())}),P(8),m()(),p(9,"td")(10,"a",32),J("click",function(r){return pe(e),fe(r.stopPropagation())}),P(11),m()(),p(12,"td")(13,"a",32),J("click",function(r){return pe(e),fe(r.stopPropagation())}),P(14),m()(),p(15,"td")(16,"a",32),J("click",function(r){return pe(e),fe(r.stopPropagation())}),P(17),m()(),p(18,"td")(19,"a",32),J("click",function(r){return pe(e),fe(r.stopPropagation())}),P(20),m()(),p(21,"td",35)(22,"a",32),J("click",function(r){return pe(e),fe(r.stopPropagation())}),ie(23,"i",36),m(),p(24,"a",37),J("click",function(){let r=pe(e).index,s=ge();return fe(s.openDeleteModal(r))}),ie(25,"i",38),m()(),ie(26,"td"),m()}if(t&2){let e=n.$implicit,i=n.index,r=ge();E("hidden",!r.isList)("ngClass",Ae(20,koe,i%2==0))("routerLink",Ae(22,uo,"/score/"+e.id)),y(),E("routerLink",Ae(24,uo,"/score/"+e.id)),y(),E("src",As(e.img),Hr),y(2),E("routerLink",Ae(26,uo,"/score/"+e.id)),y(),Yt(e.title),y(2),E("routerLink",Ae(28,uo,"/artist/"+e.artist)),y(),Yt(e.artist),y(2),E("routerLink",Ae(30,uo,"/album/"+e.album)),y(),Yt(e.album),y(2),E("routerLink",Ae(32,uo,"/style/"+e.style)),y(),Yt(e.style),y(2),E("routerLink",Ae(34,uo,"/author/"+e.author)),y(),Yt(e.author),y(2),E("routerLink",Ae(36,uo,"/key/"+e.tonality)),y(),Yt(e.tonality),y(2),E("routerLink",Ae(38,uo,"/stats/"+e.id)),y(2),E("hidden",e.author!=r.user.get_nick())}}function Toe(t,n){if(t&1){let e=mn();p(0,"a",51),J("click",function(r){return pe(e),fe(r.stopPropagation())}),p(1,"button",52),P(2,"See score"),m()()}if(t&2){let e=ge().$implicit;E("routerLink",Ae(3,uo,"/score/"+e.id)),y(),Xn("lock",e.price>0)}}function Aoe(t,n){if(t&1){let e=mn();p(0,"a",53),J("click",function(r){return pe(e),fe(r.stopPropagation())}),p(1,"button",52),P(2,"Buy score"),m()()}}function Doe(t,n){if(t&1){let e=mn();us(0,39),p(1,"div",40)(2,"div",41)(3,"a",32),J("click",function(r){return pe(e),fe(r.stopPropagation())}),ie(4,"img",42),m(),p(5,"div",43)(6,"h5",44),J("click",function(r){return pe(e),fe(r.stopPropagation())}),P(7),m(),p(8,"p",32),J("click",function(r){return pe(e),fe(r.stopPropagation())}),P(9),m(),p(10,"p",32),J("click",function(r){return pe(e),fe(r.stopPropagation())}),P(11),m(),p(12,"p",32),J("click",function(r){return pe(e),fe(r.stopPropagation())}),P(13),m(),p(14,"p",45),J("click",function(r){return pe(e),fe(r.stopPropagation())}),p(15,"i"),P(16),m()()(),p(17,"td",35)(18,"a",46),ie(19,"i",47),m(),p(20,"a",32),J("click",function(r){return pe(e),fe(r.stopPropagation())}),ie(21,"i",36),m(),p(22,"a",37),J("click",function(){let r=pe(e).index,s=ge();return fe(s.openDeleteModal(r))}),ie(23,"i",38),m()(),p(24,"div",48),Wt(25,Toe,3,5,"a",49)(26,Aoe,3,0,"a",50),m()()(),ps()}if(t&2){let e=n.$implicit,i=ge();y(3),E("routerLink",Ae(18,uo,"/score/"+e.id)),y(),E("src",As(e.img),Hr),y(2),E("routerLink",Ae(20,uo,"/score/"+e.id)),y(),Yt(e.title),y(),E("routerLink",Ae(22,uo,"/artist/"+e.artist)),y(),en("Artist: ",e.artist),y(),E("routerLink",Ae(24,uo,"/album/"+e.album)),y(),en("Album: ",e.album),y(),E("routerLink",Ae(26,uo,"/key/"+e.tonality)),y(),en("Tonality : ",e.tonality),y(),E("routerLink",Ae(28,uo,"/author/"+e.author)),y(2),en("Transcription by ",e.author),y(2),E("hidden",e.price<=0),y(2),E("routerLink",Ae(30,uo,"/stats/"+e.id)),y(2),E("hidden",e.author!=i.user.get_nick()),y(3),E("ngIf",e.price<=0),y(),E("ngIf",e.price>0)}}var tl=(()=>{class t{constructor(e,i,r,s){this._http=e,this.user=i,this.cm=r,this.sm=s,this.list=[],this.analysisPatrn="",this.modalInfos={},this.searchPattrn={}}ngOnInit(){this.cleanSearch(),this.setPageInputs(),this.modalInfos.hide=!0,this.isList=this.cm.browse_dislplay_list,setTimeout(()=>{this.refreshScores()},100)}refreshScores(){let e=new Un({"Content-Type":"application/json"});this._http.get(ai.apiList,{responseType:"text",headers:e}).subscribe(i=>{try{this.list=JSON.parse(i)}catch(r){console.log("Error parsing response:",r),this.list=[]}},i=>{console.log("HTTP Error:",i),this.list=[]},()=>{console.log("Refresh Complete")})}deleteScore(){let e=this.modalInfos.id,i=new Un({"Content-Type":"application/json"}),r={id:e,user:this.user.get_user()};this._http.post(ai.apiDeleteSong,r,{responseType:"text",headers:i}).subscribe(s=>{this.refreshScores(),this.modalInfos.hide=!0},s=>{console.log(s),this.refreshScores(),this.modalInfos.hide=!0},()=>{console.log("delete Complete")})}search(){if(this.searchPattrn.title==""&&this.searchPattrn.artist==""&&this.searchPattrn.author==""&&this.searchPattrn.album==""&&this.searchPattrn.style==""&&this.searchPattrn.chords==""&&this.searchPattrn.analysis==""&&this.searchPattrn.tonality==""){this.refreshScores();return}let e={pattrnTitle:this.searchPattrn.title,pattrnArtist:this.searchPattrn.artist,pattrnAlbum:this.searchPattrn.album,pattrnAuthor:this.searchPattrn.author,pattrnKey:this.searchPattrn.tonality,pattrnStyle:this.searchPattrn.style,pattrnChords:this.searchPattrn.chords};console.log("obj => ",e);let i=new Un({"Content-Type":"application/json"});this._http.post(ai.apiSearchAnalysis,e,{responseType:"text",headers:i}).subscribe(r=>{try{this.list=JSON.parse(r),console.log("this.list => ",this.list),this.listStyles()}catch(s){console.log(s),console.log("res => "),console.log(r)}},r=>console.log(r),()=>{console.log("Search Complete")})}openDeleteModal(e){event.stopPropagation(),this.modalInfos.id=this.list[e].id,this.modalInfos.title=this.list[e].title,this.modalInfos.hide=!1}cleanSearch(){this.searchPattrn.title="",this.searchPattrn.artist="",this.searchPattrn.author="",this.searchPattrn.album="",this.searchPattrn.style="",this.searchPattrn.chords="",this.searchPattrn.analysis="",this.searchPattrn.tonality="",this.refreshScores()}setPageInputs(){if(this.page!="home"){switch(this.page){case"title":this.searchPattrn.title=this.param;break;case"artist":this.searchPattrn.artist=this.param;break;case"author":this.searchPattrn.author=this.param;break;case"album":this.searchPattrn.album=this.param;break;case"style":this.searchPattrn.style=this.param;break;case"key":this.searchPattrn.tonality=this.param;break;default:break}this.search()}else this.refreshScores()}listStyles(){var e=[];for(let s=0;s<this.list.length;s++){var i=this.list[s].style.replaceAll(/\/| - /g," ");i=i.trim(),i=i.split(" ");for(let a=0;a<i.length;a++)e.push(i[a])}let r=[...new Set(e)];r=r.filter(s=>s!=="unknown"),r=r.filter(s=>s!==""),this.sm.setListStyles(r)}static{this.\u0275fac=function(i){return new(i||t)(Le(Xi),Le(es),Le(Ci),Le(Hn))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-browse"]],inputs:{page:"page",param:"param"},standalone:!1,decls:59,vars:23,consts:[["id","browse"],[2,"width","100%","max-height","300px","max-height","75vh","overflow-y","auto"],[1,"clickable-row","list-icons"],[3,"click"],["aria-hidden","true",1,"fa","fa-list"],["aria-hidden","true",1,"fa","fa-table"],["id","title_input","type","text","placeholder","Search Title",3,"ngModelChange","ngModel","disabled"],["id","artist_input","type","text","placeholder","Search Artist",3,"ngModelChange","ngModel","disabled"],["id","album_input","type","text","placeholder","Search Album",3,"ngModelChange","ngModel","disabled"],["id","style_input","type","text","placeholder","Search Style",3,"ngModelChange","ngModel","disabled"],["id","author_input","type","text","placeholder","Search Author",3,"ngModelChange","ngModel","disabled"],["id","tonality_input","type","text","placeholder","Search Key",3,"ngModelChange","ngModel","disabled"],["id","chords_input","type","text","placeholder","Search Chords",3,"ngModelChange","ngModel"],[1,"cross"],["aria-hidden","true",1,"fa","fa-times"],[3,"hidden"],["class","song clickable-row",3,"hidden","ngClass","routerLink","click",4,"ngFor","ngForOf"],[1,"container-fluid","blocks-list",3,"hidden"],[1,"row","justify-content-center"],["class","col-md-6 col-lg-4 col-12",4,"ngFor","ngForOf"],["tabindex","-1","role","dialog","aria-hidden","true",1,"fakebook-modal","modal",3,"hidden"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"song","clickable-row",3,"click","hidden","ngClass","routerLink"],[1,"clickable-row",3,"click","routerLink"],["onerror","this.src='../../assets/img/empty_score.png'","alt","Album image",1,"song-img",3,"src"],["tabindex","1",1,"clickable-row",3,"click","routerLink"],[1,"icons"],["aria-hidden","true",1,"fa","fa-chart-bar"],[1,"clickable-row",3,"click","hidden"],["aria-hidden","true",1,"fa","fa-trash"],[1,"col-md-6","col-lg-4","col-12"],[1,"card-deck"],[1,"card","mb-4"],["onerror","this.src='../assets/img/empty_score.png'","alt","Album image",1,"card-img-top","img-fluid",3,"src"],[1,"card-body"],[1,"card-title","clickable-row",3,"click","routerLink"],[1,"clickable-row",2,"margin-bottom","0",3,"click","routerLink"],[1,"clickable-row",3,"hidden"],["aria-hidden","true",1,"fa","fa-lock",2,"color","var(--red_nvx)"],[1,"card-footer","score-button"],["class","card-link clickable-row",3,"routerLink","click",4,"ngIf"],["href","#","class","card-link clickable-row",3,"click",4,"ngIf"],[1,"card-link","clickable-row",3,"click","routerLink"],[1,"btn","btn-success"],["href","#",1,"card-link","clickable-row",3,"click"]],template:function(i,r){i&1&&(p(0,"section",0)(1,"table",1)(2,"tr")(3,"td",2)(4,"a",3),J("click",function(){return r.isList=!0,r.cm.set_browse_dislplay_list(!0)}),ie(5,"i",4),m(),p(6,"a",3),J("click",function(){return r.isList=!1,r.cm.set_browse_dislplay_list(!1)}),ie(7,"i",5),m()(),p(8,"td")(9,"input",6),Fe("ngModelChange",function(a){return Be(r.searchPattrn.title,a)||(r.searchPattrn.title=a),a}),J("ngModelChange",function(){return r.search()}),m()(),p(10,"td")(11,"input",7),Fe("ngModelChange",function(a){return Be(r.searchPattrn.artist,a)||(r.searchPattrn.artist=a),a}),J("ngModelChange",function(){return r.search()}),m()(),p(12,"td")(13,"input",8),Fe("ngModelChange",function(a){return Be(r.searchPattrn.album,a)||(r.searchPattrn.album=a),a}),J("ngModelChange",function(){return r.search()}),m()(),p(14,"td")(15,"input",9),Fe("ngModelChange",function(a){return Be(r.searchPattrn.style,a)||(r.searchPattrn.style=a),a}),J("ngModelChange",function(){return r.search()}),m()(),p(16,"td")(17,"input",10),Fe("ngModelChange",function(a){return Be(r.searchPattrn.author,a)||(r.searchPattrn.author=a),a}),J("ngModelChange",function(){return r.search()}),m()(),p(18,"td")(19,"input",11),Fe("ngModelChange",function(a){return Be(r.searchPattrn.tonality,a)||(r.searchPattrn.tonality=a),a}),J("ngModelChange",function(){return r.search()}),m()(),p(20,"td")(21,"input",12),Fe("ngModelChange",function(a){return Be(r.searchPattrn.chords,a)||(r.searchPattrn.chords=a),a}),J("ngModelChange",function(){return r.search()}),m()(),p(22,"td",13)(23,"a",3),J("click",function(){return r.cleanSearch()}),ie(24,"i",14),m()()(),p(25,"tr",15),ie(26,"th"),p(27,"th"),P(28,"Title"),m(),p(29,"th"),P(30,"Artist"),m(),p(31,"th"),P(32,"Album"),m(),p(33,"th"),P(34,"Style"),m(),p(35,"th"),P(36,"Author"),m(),p(37,"th"),P(38,"Key"),m()(),Wt(39,Eoe,27,40,"tr",16),m(),p(40,"div",17)(41,"div",18),Wt(42,Doe,27,32,"ng-container",19),m()(),p(43,"div",20)(44,"div",21)(45,"div",22)(46,"div",23)(47,"h5",24),P(48,"Delete score"),m(),p(49,"button",25),J("click",function(){return r.modalInfos.hide=!0}),p(50,"span",26),P(51,"\xD7"),m()()(),p(52,"div",27),P(53),m(),p(54,"div",28)(55,"button",29),J("click",function(){return r.modalInfos.hide=!0}),P(56,"Cancel"),m(),p(57,"button",30),J("click",function(){return r.deleteScore()}),P(58,"Ok"),m()()()()()()),i&2&&(y(2),Xn("menu-list",r.isList)("menu-card",!r.isList),y(7),Oe("ngModel",r.searchPattrn.title),E("disabled",r.page=="title"),y(2),Oe("ngModel",r.searchPattrn.artist),E("disabled",r.page=="artist"),y(2),Oe("ngModel",r.searchPattrn.album),E("disabled",r.page=="album"),y(2),Oe("ngModel",r.searchPattrn.style),E("disabled",r.page=="style"),y(2),Oe("ngModel",r.searchPattrn.author),E("disabled",r.page=="author"),y(2),Oe("ngModel",r.searchPattrn.tonality),E("disabled",r.page=="key"),y(2),Oe("ngModel",r.searchPattrn.chords),y(4),E("hidden",!r.isList),y(14),E("ngForOf",r.list),y(),E("hidden",r.isList),y(2),E("ngForOf",r.list),y(),E("hidden",r.modalInfos.hide),y(10),en(" Are you sure you want to delete the score : ",r.modalInfos.title," ? "))},dependencies:[lr,gi,vr,Ns,Gi,Ti,Mi],styles:["section#browse[_ngcontent-%COMP%]{width:100%;min-height:150px;max-height:105vh;overflow:auto;padding:0 5%;font-size:.7em}section#browse[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}section#browse[_ngcontent-%COMP%]   .song[_ngcontent-%COMP%]{background-color:var(--light_prim)}section#browse[_ngcontent-%COMP%]   .song.pair[_ngcontent-%COMP%]{background-color:var(--gray_prim)}section#browse[_ngcontent-%COMP%]   .song[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;opacity:1!important;font-size:1.2em}section#browse[_ngcontent-%COMP%]   .song[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--green_nvx)}section#browse[_ngcontent-%COMP%]   .song[_ngcontent-%COMP%]:hover{filter:drop-shadow(2px 2px 3px black)}section#browse[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-left:10px;font-size:1.5em;font-variant:all-petite-caps}section#browse[_ngcontent-%COMP%]   td.list-icons[_ngcontent-%COMP%]:first-child{display:flex}section#browse[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:10px;border-bottom-left-radius:10px}section#browse[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:10px;border-top-right-radius:10px}section#browse[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px}section#browse[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], section#browse[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{border:none;border-bottom:1px solid black;outline:none}section#browse[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::selection{background-color:var(--blue_nvx)!important;color:#fff}section#browse[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-selection{background-color:var(--blue_nvx)!important;color:#fff}section#browse[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-o-selection{background-color:var(--blue_nvx)!important;color:#fff}section#browse[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-selection{background-color:var(--blue_nvx)!important;color:#fff}section#browse[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-selection{background-color:var(--blue_nvx)!important;color:#fff}section#browse[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--dark_prim)}section#browse[_ngcontent-%COMP%]   .fakebook-modal[_ngcontent-%COMP%]{position:fixed;left:0;z-index:1050;display:flex;width:100%;height:100%;overflow:hidden;outline:0;justify-content:center;align-items:center;background:#0000005c}section#browse[_ngcontent-%COMP%]   .fakebook-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{width:100%;height:auto}section#browse[_ngcontent-%COMP%]   .fakebook-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{background:#ed1c243b}section#browse[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%], section#browse[_ngcontent-%COMP%]   .fa-list[_ngcontent-%COMP%], section#browse[_ngcontent-%COMP%]   .fa-table[_ngcontent-%COMP%]{font-size:1.5em;cursor:pointer}section#browse[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-times[_ngcontent-%COMP%]:hover, section#browse[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-list[_ngcontent-%COMP%]:hover, section#browse[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-table[_ngcontent-%COMP%]:hover{color:var(--green_nvx)}section#browse[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%]{vertical-align:middle}section#browse[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-trash[_ngcontent-%COMP%]:hover{color:var(--red_nvx)}section#browse[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-chart-bar[_ngcontent-%COMP%]:hover{color:var(--blue_nvx)}section#browse[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-trash[_ngcontent-%COMP%], section#browse[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-chart-bar[_ngcontent-%COMP%], section#browse[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-lock[_ngcontent-%COMP%]{padding:15px 0}section#browse[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}section#browse[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:nth-last-child(1){margin-left:10px}section#browse[_ngcontent-%COMP%]   .song-img[_ngcontent-%COMP%]{cursor:pointer;width:50px;height:50px;object-fit:cover}section#browse[_ngcontent-%COMP%]   .display-style[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}section#browse[_ngcontent-%COMP%]   .fa-list[_ngcontent-%COMP%]{padding-right:10px}section#browse[_ngcontent-%COMP%]   .clickable-row[_ngcontent-%COMP%]{cursor:pointer}section#browse[_ngcontent-%COMP%]   .blocks-list[_ngcontent-%COMP%]{margin-top:5vh}section#browse[_ngcontent-%COMP%]   .blocks-list[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{justify-content:space-evenly}section#browse[_ngcontent-%COMP%]   .blocks-list[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0}section#browse[_ngcontent-%COMP%]   .blocks-list[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:var(--green_nvx);font-size:1.2rem;padding-right:15px}section#browse[_ngcontent-%COMP%]   .blocks-list[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .fa-trash[_ngcontent-%COMP%]:hover{color:var(--red_nvx)}section#browse[_ngcontent-%COMP%]   .blocks-list[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .fa-chart-bar[_ngcontent-%COMP%]:hover{color:var(--blue_nvx)}section#browse[_ngcontent-%COMP%]   .blocks-list[_ngcontent-%COMP%]   .score-button[_ngcontent-%COMP%]{display:flex;justify-content:center}section#browse[_ngcontent-%COMP%]   .blocks-list[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{background:var(--green_nvx);color:#fff;border:2px solid var(--green_nvx);padding:10px 28px;margin-right:4px;margin-bottom:4px;font-family:Open Sans,Arial,sans-serif;font-size:12px;letter-spacing:2px;text-transform:uppercase;font-weight:700;transition:.5s;border-radius:4px;cursor:pointer}section#browse[_ngcontent-%COMP%]   .blocks-list[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]:hover{background:#45c46f;border-color:#45c46f}section#browse[_ngcontent-%COMP%]   .blocks-list[_ngcontent-%COMP%]   .btn-success.lock[_ngcontent-%COMP%]{background:#a5a5a5;color:#c9c9c9;border:2px solid #a5a5a5}section#browse[_ngcontent-%COMP%]   .blocks-list[_ngcontent-%COMP%]   .btn-success.lock[_ngcontent-%COMP%]:hover{background:#a5a5a5;border-color:#a5a5a5}section#browse[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-width:250px;margin:0 30px}section#browse[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-top:15px}section#browse[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0px 1.25rem}section#browse[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{border-top:none}section#browse[_ngcontent-%COMP%]   .card-img-top[_ngcontent-%COMP%]{width:250px;height:250px;max-height:250px;max-width:250px;object-fit:cover}section#browse[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.05rem}section#browse[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]{position:sticky;background:#fff;top:0;z-index:0;width:100%}section#browse[_ngcontent-%COMP%]   .menu-card[_ngcontent-%COMP%]{position:sticky;z-index:0;background:#fff;width:100%;display:flex;margin:auto;justify-content:center}"]})}}return t})();var h8=(()=>{class t{constructor(){}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=zt({type:t,selectors:[["app-home"]],standalone:!1,decls:1,vars:1,consts:[[3,"page"]],template:function(i,r){i&1&&ie(0,"app-browse",0),i&2&&E("page","home")},dependencies:[tl],styles:["app-browse[_ngcontent-%COMP%]{width:100%;top:7.5%;height:94%;display:flex;padding-bottom:2vh;position:absolute}.widget_links[_ngcontent-%COMP%]{margin:10px}"]})}}return t})();var u8=(()=>{class t{constructor(e){this.transport=e}ngOnInit(){this.transport.stop(1,!0)}ngOnDestroy(){this.transport.stop(1,!0)}play_pause(){}stop(){}onKeydown(e){}static{this.\u0275fac=function(i){return new(i||t)(Le(yi))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-transport"]],standalone:!1,decls:6,vars:2,consts:[[2,"padding","10px","text-align","center"],["type","button",1,"btn","btn-success",3,"mousedown"],[1,"fa","fa-play",3,"hidden"],[1,"fa","fa-pause",3,"hidden"],["type","button",1,"btn","btn-danger",3,"mousedown"],[1,"fa","fa-stop"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"button",1),J("mousedown",function(){return r.transport.play_pause()}),ie(2,"i",2)(3,"i",3),m(),p(4,"button",4),J("mousedown",function(){return r.transport.stop()}),ie(5,"i",5),m()()),i&2&&(y(2),E("hidden",r.transport.state=="playing"),y(),E("hidden",r.transport.state!="playing"))},encapsulation:2})}}return t})();var p8=(()=>{class t{constructor(){}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=zt({type:t,selectors:[["app-metro-page"]],standalone:!1,decls:5,vars:0,consts:[[2,"padding-top","100px","width","100%","position","absolute","display","flex","flex-direction","row","justify-content","center","align-items","center"],[1,"metro",2,"position","relative","width","74vh","height","74vh"],[2,"top","90px","position","absolute","width","100px"],["aria-label","Right click in the middle of the screen to see the metronome options",1,"metro-infos"],[1,"fas","fa-question"]],template:function(i,r){i&1&&(p(0,"div",0),ie(1,"app-metro",1),m(),ie(2,"app-transport",2),p(3,"span",3),ie(4,"i",4),m())},dependencies:[u8,Ld],styles:['@charset "UTF-8";.metro-infos[_ngcontent-%COMP%]{top:90px;position:relative;margin-left:100px}.metro-infos[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{margin:16px 0;font-size:25px}.metro-infos[_ngcontent-%COMP%]:hover:after, .metro-infos[_ngcontent-%COMP%]:focus:after{content:attr(aria-label);position:absolute;top:-2.4em;left:50%;transform:translate(-20%);z-index:1;white-space:nowrap}']})}}return t})();var hf=(()=>{class t{constructor(){this._reponse=[],this._nb_hidden=1,this._max_hidden=1,this._fourths=["C","F","Bb","Eb","Ab","Db","F#","B","E","A","D","G"],this._cards=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],this.win=void 0,this.verified=0,this.curProg=0,this.progressions=[[{fourths:-2,quality:"m7b9"},{fourths:-1,quality:"7b913"},{fourths:0,quality:"7n9"}]],this.start()}get_rand_between(e=0,i=11){return e+Math.floor(Math.random()*i)}get_progressions(){return this.progressions}remove_chord_in_progression(e,i){this.progressions[e].splice(i,1)}add_chord_in_progression(e,i){this.progressions[e].push(i),console.log(this.progressions)}add_progression(){this.progressions.push([])}remove_progression(e){this.progressions.splice(e,1)}get_solution(){this.curProg=this.get_rand_between(0,this.progressions.length);let e=this.progressions[this.curProg],i=this.get_rand_between(),r=[];for(let s=0;s<e.length;s++)r.push(this._fourths[(i+e[s].fourths).mod(12)]);this._solution=r,console.log("solution => ",r)}get_question(){this._nb_hidden=this.get_rand_between(1,this._max_hidden);let e=[];for(let r=0;r<this._solution.length;r++)e.push(r);let i=[];for(let r=0;r<this._nb_hidden;r++){let s=this.get_rand_between(0,e.length);i.push(e.splice(s,1)[0])}this._question=JSON.parse(JSON.stringify(this._solution));for(let r=0;r<i.length;r++)this._question[i[r]]="_";console.log("this._question => ",this._question)}arraysMatch(e,i){if(e.length!==i.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==i[r])return!1;return!0}verify(){if(this._reponse.length!=this._nb_hidden)return;let e=this._question;for(let i=0;i<this._reponse.length;i++)e[e.indexOf("_")]=this._reponse[i];this.arraysMatch(e,this._solution)?this.win=!0:(this.win=!1,this._question=this._solution)}verifyNext(e){let i=!1,r=this._solution[this.verified],s=this.progressions[this.curProg][this.verified];return e.rootName==r&&e.name==s.quality&&(i=!0,this.verified+=1,this.verified==this._solution.length&&(this.win=!0)),i}start(){this.win=void 0,this._reponse=[],this.verified=0,this.get_solution(),this.get_question()}answer(e){return this._reponse.push(e),this.verify(),this.win}shuffle(e){for(var i=e.length,r,s;i!==0;)s=Math.floor(Math.random()*i),i-=1,r=e[i],e[i]=e[s],e[s]=r;return e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac})}}return t})();var Ooe=(t,n,e,i,r)=>({correct:t,green:n,incorrect:e,default:i,tona:r});function Foe(t,n){if(t&1&&(p(0,"div",6),P(1),m()),t&2){let e=n.$implicit,i=n.index,r=ge();E("id","question_"+i)("ngClass",T2(3,Ooe,r.exowin==!0,i<r.exo.verified,r.exo.win==!1,r.exo.win==null,i==r.exo._question.length-1)),y(),en(" ",e," ")}}function Boe(t,n){if(t&1){let e=mn();p(0,"button",7),J("click",function(){let r=pe(e).$implicit,s=ge();return fe(s.verifyCard(r))}),P(1),m()}if(t&2){let e=n.$implicit;y(),en(" ",e," ")}}var m8=(()=>{class t{constructor(e,i){this.el=e,this.exo=i,this.lock=!0,this.win=void 0}ngOnInit(){}verifyCard(e){if(this.win=this.exo.answer(e),this.win)for(let i=0;i<this.exo._question.length;i++)this.el.nativeElement.querySelector("#question_"+i).style.color="green";else for(let i=0;i<this.exo._question.length;i++)this.el.nativeElement.querySelector("#question_"+i).style.color="red";setTimeout(()=>{this.win=void 0,this.exo.start()},500)}verifyMidi(e){let i=[];for(let r=0;r<this.exo._question.length;r++)i.push(this.el.nativeElement.querySelector("#question_"+r));e.rootName=="Gb"&&(e.rootName="F#"),console.log("e.rootName+e.name => ",e.rootName+e.name),this.exo.verifyNext(e)&&(this.exo._question[this.exo.verified-1]=e.rootName,this.exo.win==!0&&window.setTimeout(()=>{this.exo.start()},100))}static{this.\u0275fac=function(i){return new(i||t)(Le(fr),Le(hf))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-learn-fifths"]],standalone:!1,decls:6,vars:2,consts:[[1,"row","question"],["class","correct col-3 ",3,"id","ngClass",4,"ngFor","ngForOf"],[1,"row","card-container"],["class","col-1 answer-card",3,"click",4,"ngFor","ngForOf"],["height","150px","width","400px"],["transform","scale(1.5)","anchor","middle",1,"cObj","centerText",2,"transform","opacity:1"],[1,"correct","col-3",3,"id","ngClass"],[1,"col-1","answer-card",3,"click"]],template:function(i,r){i&1&&(p(0,"div",0),Wt(1,Foe,2,9,"div",1),m(),p(2,"div",2),Wt(3,Boe,2,1,"button",3),m(),ft(),p(4,"svg",4),ie(5,"g",5),m()),i&2&&(y(),E("ngForOf",r.exo._question),y(2),E("ngForOf",r.exo._cards))},dependencies:[lr,gi],styles:[".question[_ngcontent-%COMP%]{font-size:12vmax;margin:0;justify-content:center}.answer-card[_ngcontent-%COMP%]{min-width:100px;min-height:100px;border:1px solid black;border-radius:15px;margin:20px;justify-content:center;display:flex;align-items:center;font-size:55px;background-color:#435353;color:#fff}.card-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;margin:0}.correct[_ngcontent-%COMP%]{color:green}.incorrect[_ngcontent-%COMP%]{color:red}.default[_ngcontent-%COMP%]{color:#000;justify-content:center;align-items:center;display:flex}.tona[_ngcontent-%COMP%]{color:red}.green[_ngcontent-%COMP%]{color:green}"]})}}return t})();var y8=hr(Ko());var ko=(()=>{class t{constructor(){this.reset()}reset(){this.results_chords=[],this.results_notes=[],this.results_rhythm=[],this.computed_chords={},this.computed_notes={},this.computed_rhythm={},this.exo={}}getResults_chords(){return this.results_chords}getResults_notes(){return this.results_notes}getResults_rhythm(){return this.results_rhythm}compute(){this.compute_chords(),this.compute_notes(),this.compute_rhythm(),this.exo.TEMPLATE=="LEVEL_1"}compute_chords(){let e=0,i=0,r=0,s=0;for(var a=0;a<this.results_chords.length;a++)e+=this.results_chords[a].ans.time,r+=this.results_chords[a].note_is_good?1:0,i+=this.results_chords[a].type_is_good?1:0,s+=this.results_chords[a].note_is_good&&this.results_chords[a].type_is_good?1:0;e/=a,s/=a,r/=a,i/=a,e=Math.trunc(e),this.computed_chords.mean_time=e,this.computed_chords.note_accuracy=r,this.computed_chords.type_accuracy=i,this.computed_chords.total_accuracy=r}compute_notes(){let e=0,i=0,r=0,s=0;for(var a=0;a<this.results_notes.length;a++)e+=this.results_notes[a].ans.time,s+=this.results_notes[a].hasWon?1:0;e/=a,s/=a,r/=a,i/=a,e=Math.trunc(e),this.computed_notes.mean_time=e,this.computed_notes.total_accuracy=s}compute_rhythm(){console.log("compute_rhythm");let e=0;for(let i=0;i<this.results_rhythm.length;i++)e+=this.results_rhythm[i].note_is_good?1:0;e=e/this.results_rhythm.length,this.computed_rhythm.mean_time=2,this.computed_rhythm.total_accuracy=e}addNotesAnswer(e,i){let r=!1,s,a;try{if(s=nn.get(nn.enharmonic(e.note)),a=nn.get(nn.enharmonic(i.notes_string[0].replace("^",""))),r=s.chroma===a.chroma,!r&&i.debug)debugger;return console.log("hasWon => ",r),this.results_notes.push({ans:e,data:i,hasWon:r}),r}catch{console.log("n => ",nn),console.log("hasWon => ",r);debugger}}add_timed_midiAnswer(e,i){let r=!0;for(let a=0;a<i.midiPitches.length;a++)e.indexOf(i.midiPitches[a].pitch)==-1&&(r=!1);let s={ans:e,data:i,note_is_good:r};return this.results_rhythm.push(s),r}addChordAnswer(e,i){console.log(`
---------------
	RESULTS
`),i=JSON.parse(i),console.log("data => ",i),console.log("answer => ",e);let r=/([ABCDEFG])([#b]*)(.*)/g,s=[...e.note.matchAll(r)][0],a=[...i.chord_name.matchAll(r)][0],l=!1,d=!1;s[1]==a[1]&&s[2]==a[2]&&(l=!0),console.log("note_is_good => ",l);let u=e.type,h=a[3];if(d=u==h,console.log("data_type => ",h),console.log("ans_type => ",u),console.log("type_is_good => ",d),!(l&&d)&&i.debug)debugger;let _={ans:e,data:i,ans_type:u,data_type:h,note_is_good:l,type_is_good:d};return this.results_chords.push(_),l&&d}addMidiAnswer(e,i,r=null){console.log(`
---------------
	RESULTS
`),console.log("data => ",i),console.log("answer => ",e);let s=[];s=e.midiNotes;try{let a=nn,l=JSON.stringify(s),d;i.hasOwnProperty("notes_array")?d=JSON.stringify(i.notes_array.map(nn.midi)):i.hasOwnProperty("notes_string")&&(d=JSON.stringify([i.notes_names].map(nn.midi)));let u=l==d,h=nn,_=qn,b=_.detect(s.map(h.fromMidi)),w=_.get(b[0]);console.log("detected_chord => ",w);let S=w.type==i.c_type;if(!u&&i.debug)debugger;let L={ans:e,data:i,ans_type:null,data_type:null,note_is_good:u,type_is_good:S};return console.log("note_is_good => ",u),this.results_chords.push(L),u}catch(a){console.log("erreur => ",a);debugger}}addMidiAnswer2(e,i,r=null){let s=!0,a=!0;if(i.midiPitches.length==e.midiNotes.length)for(let d=0;d<i.midiPitches.length;d++)i.midiPitches[d].pitch!=e.midiNotes[d]&&(s=!1);else s=!1;console.log("note_is_good => ",s);let l={ans:e,data:i,ans_type:null,data_type:null,note_is_good:s,type_is_good:a};return this.results_chords.push(l),s}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var _8=hr(Ko());var g8=_8.default,Vl=(()=>{class t{constructor(){this.synthControl=new g8.synth.SynthController,this.synth=new g8.synth.CreateSynth}set_sound(e){this.audioParams.voicesOff=!e,this.synth.init({visualObj:this.visualObj,millisecondsPerMeasure:500,options:void 0}).then(()=>{this.synthControl.setTune(this.visualObj,!1,this.audioParams).then(()=>{this.callback()}).catch(function(r){console.warn("Audio problem:",r)})}).catch(function(r){console.warn("Audio problem:",r)})}init(e,i,r){this.audioParams=i,this.visualObj=e,this.callback=r,this.synth.init({visualObj:e}).then(()=>{this.synthControl.setTune(e,!0,i).then(()=>{r()}).catch(function(s){console.warn("Audio problem:",s)})}).catch(function(s){console.warn("Audio problem:",s)})}load(e,i,r){this.synthControl.load(e,i,r)}play(){this.synthControl.play()}stop(){this.synthControl.pause()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Rd=(()=>{class t{constructor(e,i,r,s,a){this.transport=e,this.midi=i,this.resService=r,this.synthService=s,this.zone=a,this.tonality="C",this.tempo="90",this.cur_chord="C4",this.header=`%%staves {(PianoRightHand) (PianoLeftHand)}
V:PianoRightHand clef=treble down
V:PianoLeftHand clef=bass
M:4/4
Q:120
K:C `,this.right_hand_string='[V: PianoRightHand] | "C" c_BG_GF_E C2 | "F" C_EF_G=G_Bc2| "C" c_BG_GF_E C2 | "F" C_EF_G=G_Bc2|',this.left_hand_string="[V: PianoLeftHand] |C,4_B,,4|F,,4_B,,4|C,4_B,,4|F,,4_B,,4|",this.transpose=0,this.has_started=!1,this.debug_mode=!1,this.askNext=new Rn,this.sound=!0,this.chordsOff=!0,this.prevMidiNotes=[],this.cursor_lh=0,this.cursor_rh=0,new URLSearchParams(window.location.search).get("debug")&&(this.debug_mode=!0),this.cursor_lh=0,this.cursor_rh=0}ngOnInit(){this.loadFromJson()}ngAfterViewInit(){this.midi.notesTab=[],this.update_score(),this.parsedData!=null&&(this.parsedData.HIDE_CHORD&&this.changeCss(".abcjs-chord","opacity:0"),this.parsedData.HIDE_FUNCTION&&this.changeCss(".abcjs-annotation","opacity:0"))}changeCss(e,i){var r=$("#css-modifier-container");if(r.length==0){var r=$('<div id="css-modifier-container"></div>');r.hide(),r.appendTo($("body"))}let s=r.find('div[data-class="'+e+'"]');s.length==0&&(s=$('<div data-class="'+e+'"></div>'),s.appendTo(r)),s.html("<style>"+e+" {"+i+"}</style>")}ngOnDestroy(){this.synthService.stop()}initSynthController(){let e={beatSubdivisions:this.transport.getNb_subbeat_per_beat(),extraMeasuresAtBeginning:1,onStart:()=>{this.fillNotesBlack(),this.has_started=!0},onFinished:()=>{console.log("The tune has stopped playing."),this.has_started=!1,setTimeout(()=>{this.askNext.emit(!0)},1e3)},onEvent:l=>{this.onEvent(l)}},i={displayLoop:!1,displayRestart:!0,displayPlay:!0,displayStop:!0,displayProgress:!1,displayWarp:!1},r={drum:"dddd 76 77 77 77 60 30 30 30",drumIntro:1,chordsOff:this.chordsOff,voicesOff:!this.sound,soundFontVolumeMultiplier:1,options:{}};this.synthService.load("#synthControl",e,i);let a=()=>{$(".abcjs-midi-start.abcjs-btn").focus(),this.synthService.play()};this.debug_mode&&(a=()=>{}),this.parsedData&&this.parsedData.template_type=="reading_untimed"&&(a=()=>{this.midiNotesTab$=this.midi.notesTabSubject.subscribe(l=>{if(l.length)this.prevMidiNotes=[...this.prevMidiNotes,...l],this.prevMidiNotes=this.prevMidiNotes.filter((d,u)=>this.prevMidiNotes.indexOf(d)===u).sort();else{if(!this.prevMidiNotes.length)return;let d=[],u=[];for(let h in this.prevMidiNotes)this.prevMidiNotes[h]<60&&d.push(this.prevMidiNotes[h]),this.prevMidiNotes[h]>=60&&u.push(this.prevMidiNotes[h]);this.check_midi_answer_no_time(d,u),this.prevMidiNotes=[]}}),this.get_midi_pitches(),this.scoreCurNotes={},this.scoreCurNotes.left=this.scoreNotes_leftHand.shift(),this.scoreCurNotes.right=this.scoreNotes_rightHand.shift()}),this.synthService.init(this.visualObj,r,a)}get_midi_pitches(){this.scoreNotes_leftHand=[],this.scoreNotes_rightHand=[];for(let e=0;e<this.visualObj.lines[0].staff.length;e++){let i=this.visualObj.lines[0].staff[e];if(i.clef.type=="treble")for(let r=0;r<i.voices[0].length;r++){let s=i.voices[0][r];s.el_type=="note"&&!s.hasOwnProperty("rest")&&this.scoreNotes_rightHand.push(s)}if(i.clef.type=="bass")for(let r=0;r<i.voices[0].length;r++){let s=i.voices[0][r];s.el_type=="note"&&!s.hasOwnProperty("rest")&&this.scoreNotes_leftHand.push(s)}}}fill_note_color(e="black",i=null){for(let r=0;r<i.elements.length;r++)$(i.elements[r]).css("fill",e)}fillNotesBlack(){$(".abcjs-note").css("fill","black")}fill_chord_with_color(e="black",i=null){let r=$(i.elements[0]).filter(".abcjs-chord");for(let s of r){if(s.textContent=="")continue;let a=s.textContent.replace("\u266D","b").replace("\u266F","#");a=a.replace("F#","Gb").replace("Gbm","F#m"),a=a.replace("C#","Db").replace("Dbm","C#m"),this.cur_chord=a}}light_next_note(e="black",i="r"){i=="r"?$(this.scoreCurNotes.right.abselem.elemset).css("fill",e):i=="l"&&$(this.scoreCurNotes.left.abselem.elemset).css("fill",e)}update_header(){this.parsedData.header?this.header=this.parsedData.header:this.header=`%%staves {(PianoRightHand) (PianoLeftHand)}
V:PianoRightHand clef=treble down
V:PianoLeftHand clef=bass
M:4/4
Q:`+this.tempo+`
K:C`}update_score(){this.debug_mode&&this.update_header(),this.renderStrings(this.header,this.left_hand_string,this.right_hand_string),setTimeout(()=>{let e=$(".abcjs-l0.abcjs-m1.abcjs-v0.abcjs-chord").text().replace("\u266D","b").replace("\u266F","#");e=e.replace("F#","Gb").replace("Gbm","F#m"),e=e.replace("C#","Db").replace("Dbm","C#m"),this.cur_chord=e,this.initSynthController()},100)}renderStrings(e,i,r){setTimeout(()=>{let s=e;i!=""&&(s+=`
`+i),r!=""&&(s+=`
`+r),console.log(`abcString => 
`,s),console.log("window.innerWidth*0.90 => ",window.innerWidth*.9);let a=window.innerWidth*.9;a<1440&&(a=1440),this.visualObj=y8.default.renderAbc("abcjs-paper",s,{add_classes:!0,clickListener:()=>{console.log("measure clicked")},visualTranspose:this.transpose,staffwidth:a,scale:2})[0]},10)}loadFromJson(){this.receivedData!=null&&(this.parsedData=this.receivedData,this.tempo=this.parsedData.tempo,this.sound=this.parsedData.sound,this.transpose=this.receivedData.tona.transpo,this.header=this.receivedData.header,this.right_hand_string=this.receivedData.right_hand,this.left_hand_string=this.receivedData.left_hand,this.debug_mode=this.receivedData.debug)}set_mute(){this.synthService.set_sound(this.sound)}change_tempo(){this.update_score()}check_midi_answer_no_time(e,i){let r={midiNotes:e,time:0},s={midiNotes:i,time:0},a=!0;e.length&&this.scoreCurNotes.left&&(a=this.resService.addMidiAnswer2(r,this.scoreCurNotes.left),a?this.light_next_note("green","l"):this.light_next_note("red","l"),this.scoreCurNotes.left=this.scoreNotes_leftHand.shift());let l=!0;i.length&&this.scoreCurNotes.right&&(l=this.resService.addMidiAnswer2(s,this.scoreCurNotes.right),l?this.light_next_note("green","r"):this.light_next_note("red","r"),this.scoreCurNotes.right=this.scoreNotes_rightHand.shift());let d=l&&a;(!this.scoreCurNotes.right||!this.parsedData.voice_G)&&(!this.scoreCurNotes.left||!this.parsedData.voice_F)&&this.quit(d)}onEvent(e){e.measureStart&&this.fill_chord_with_color("green",e);let i=e.millisecondsPerMeasure/10;setTimeout(()=>{this.resService.add_timed_midiAnswer(this.midi.notesTab,e)?this.fill_note_color("green",e):this.fill_note_color("red",e)},i),this.fill_note_color("green",e)}onBeat(e,i,r){let s=Number((1/this.transport.getNb_subbeat_per_beat()).toPrecision(4));e!=0&&e%s<.1&&this.transport.incSubBeat(1)}quit(e){this.zone.run(()=>{this.midiNotesTab$.unsubscribe(),this.askNext.emit(e)})}debug_fct(e,i){let r=e.concat(i);this.midi.notesTabSubject.next(r),this.midi.notesTabSubject.next([])}static{this.\u0275fac=function(i){return new(i||t)(Le(yi),Le(hi),Le(ko),Le(Vl),Le(on))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-abc-checker"]],outputs:{askNext:"askNext"},standalone:!1,decls:23,vars:8,consts:[["id","exercice-rythm"],["type","checkbox","name","sound",3,"ngModelChange","change","ngModel"],["for","sound"],["for","#input_right"],["id","input_right","type","text",1,"text_input",3,"ngModelChange","input","change","ngModel"],["for","#input_left"],["id","input_left","type","text",1,"text_input",3,"ngModelChange","input","change","ngModel"],["for","#input_transpose"],["id","input_transpose","type","number","min","-6","max","6",3,"ngModelChange","change","ngModel"],["for","#input_tempo"],["id","input_tempo","type","number","min","50","max","160",3,"ngModelChange","change","ngModel"],["id","abcjs-wrapper"],["id","abcjs-paper","width","50vw"],["id","synthControl",3,"hidden"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"div"),us(2),p(3,"input",1),Fe("ngModelChange",function(a){return Be(r.sound,a)||(r.sound=a),a}),J("change",function(){return r.set_mute()}),m(),p(4,"label",2),P(5,"Sound"),m(),p(6,"div")(7,"label",3),P(8,"Right hand"),m(),p(9,"input",4),Fe("ngModelChange",function(a){return Be(r.right_hand_string,a)||(r.right_hand_string=a),a}),J("input",function(){return r.update_score()})("change",function(){return r.update_score()}),m()(),p(10,"div")(11,"label",5),P(12,"Left hand"),m(),p(13,"input",6),Fe("ngModelChange",function(a){return Be(r.left_hand_string,a)||(r.left_hand_string=a),a}),J("input",function(){return r.update_score()})("change",function(){return r.update_score()}),m()(),p(14,"label",7),P(15,"Transpose "),m(),p(16,"input",8),Fe("ngModelChange",function(a){return Be(r.transpose,a)||(r.transpose=a),a}),J("change",function(){return r.update_score()}),m(),p(17,"label",9),P(18,"Tempo "),m(),p(19,"input",10),Fe("ngModelChange",function(a){return Be(r.tempo,a)||(r.tempo=a),a}),J("change",function(){return r.change_tempo()}),m(),ps(),m(),p(20,"div",11),ie(21,"div",12),m(),ie(22,"div",13),m()),i&2&&(y(),Xn("hidden",!r.debug_mode),y(2),Oe("ngModel",r.sound),y(6),Oe("ngModel",r.right_hand_string),y(4),Oe("ngModel",r.left_hand_string),y(3),Oe("ngModel",r.transpose),y(3),Oe("ngModel",r.tempo),y(3),E("hidden",!r.debug_mode))},dependencies:[Gi,Vr,ro,Ti,Lo,ms,Mi],styles:["#exercice-rythm[_ngcontent-%COMP%]{padding-top:150px}  .abcjs-inline-audio{background-color:transparent!important}  .abcjs-inline-audio .abcjs-btn{width:50px;height:50px}  .abcjs-btn g{fill:green!important}  label{margin-bottom:unset!important}.metronome[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;height:272px;width:272px;margin:7px}.fifth_circle[_ngcontent-%COMP%]{position:absolute;right:274px;bottom:0;width:auto;height:272px}.text_input[_ngcontent-%COMP%]{font-family:monospace;font-size:x-large;border:none;width:max-content;max-width:100%;width:-webkit-fill-available}#synthControl[_ngcontent-%COMP%]{min-height:100px;margin-top:-55px;z-index:1;position:fixed;bottom:-30px}.hidden[_ngcontent-%COMP%]{display:none}"]})}}return t})();var b8=hr(Ko());var v8=b8.default,$1=(()=>{class t{constructor(e,i,r,s,a){this.transport=e,this.midi=i,this.resService=r,this.synthService=s,this.zone=a,this.cur_chord="C4",this.has_started=!1,this.debug_mode=!1,this.MIDI_OFF=!0,this.askNext=new Rn,this.transpose=0,this.abc_string="",this.sound=!0,this.prevMidiNotes=[],this.cursor_lh=0,this.cursor_rh=0,this.cursor_line=0,this.current_tune=0,this.random_song=!1,this.mute_chords=!1,new URLSearchParams(window.location.search).get("debug")&&(this.debug_mode=!0),this.cursor_lh=0,this.cursor_rh=0,this.cursor_line=0}ngOnInit(){}ngAfterViewInit(){console.log("ngAfterViewInit");let e="rag";this.receivedData&&(e=this.receivedData.abc_file);var i=new XMLHttpRequest;i.open("GET","assets/full-scores/"+e),i.onreadystatechange=()=>{this.abc_string=i.responseText;let r=this.abc_string.match(/virtual transpose:(-?[0-6])/);r&&(this.transpose=Number(r[1])),this.update_score(),this.receivedData!=null&&(this.receivedData.hide_chord&&this.changeCss(".abcjs-chord","opacity:0"),this.receivedData.hide_function&&this.changeCss(".abcjs-annotation","opacity:0"))},i.send()}changeCss(e,i){var r=$("#css-modifier-container");if(r.length==0){var r=$('<div id="css-modifier-container"></div>');r.hide(),r.appendTo($("body"))}let s=r.find('div[data-class="'+e+'"]');s.length==0&&(s=$('<div data-class="'+e+'"></div>'),s.appendTo(r)),s.html("<style>"+e+" {"+i+"}</style>")}ngOnDestroy(){this.synthService.stop()}initSynthController(){console.log("initSynthController");let e={beatSubdivisions:this.transport.getNb_subbeat_per_beat(),extraMeasuresAtBeginning:1,onStart:()=>{this.fillNotesBlack(),this.has_started=!0},onFinished:()=>{console.log("The tune has stopped playing."),this.has_started=!1,setTimeout(()=>{this.askNext.emit(!0)},1e3)},onEvent:w=>{this.onEvent(w)},onLineEnd:w=>{this.onLineEnd(w)}},i={displayLoop:!0,displayRestart:!0,displayPlay:!0,displayStop:!0,displayProgress:!0,displayWarp:!0},r=this.visualObj.getMeter().value[0].num,s="",a="",l="",d="";for(var u=0;u<r;++u)u==0?(a+="76 ",l+="60 "):(a+="77 ",l+="30 "),s+="d";l=l.slice(0,l.length-1),d=s+" "+a+l,console.log("drum => ",d);let h={drum:d,drumIntro:1,chordsOff:this.mute_chords,voicesOff:!this.sound,soundFontVolumeMultiplier:1,millisecondsPerMeasure:1e3,qpm:90,defaultQpm:90,options:{voicesOff:!0}};this.synthService.load("#synthControl",e,i);let b=()=>{$(".abcjs-midi-start.abcjs-btn").focus(),this.synthService.play()};this.debug_mode&&(b=()=>{}),this.receivedData&&!this.receivedData.timed&&(b=()=>{this.midiNotesTab$=this.midi.notesTabSubject.subscribe(w=>{if(!this.MIDI_OFF)if(w.length)this.prevMidiNotes=[...this.prevMidiNotes,...w],this.prevMidiNotes=this.prevMidiNotes.filter((S,L)=>this.prevMidiNotes.indexOf(S)===L).sort();else{if(!this.prevMidiNotes.length)return;let S=[],L=[];for(let R in this.prevMidiNotes)this.prevMidiNotes[R]<60&&S.push(this.prevMidiNotes[R]),this.prevMidiNotes[R]>=60&&L.push(this.prevMidiNotes[R]);this.check_midi_answer_no_time(S,L),this.prevMidiNotes=[]}}),this.get_midi_pitches(),this.scoreCurNotes={},this.scoreCurNotes.left=this.scoreNotes_leftHand.shift(),this.scoreCurNotes.right=this.scoreNotes_rightHand.shift()}),this.synthService.init(this.visualObj,h,b)}get_midi_pitches(){this.scoreNotes_leftHand=[],this.scoreNotes_rightHand=[];for(let e=0;e<this.visualObj.lines[0].staff.length;e++){let i=this.visualObj.lines[0].staff[e];if(i.clef.type=="treble")for(let r=0;r<i.voices[0].length;r++){let s=i.voices[0][r];s.el_type=="note"&&!s.hasOwnProperty("rest")&&this.scoreNotes_rightHand.push(s)}if(i.clef.type=="bass")for(let r=0;r<i.voices[0].length;r++){let s=i.voices[0][r];s.el_type=="note"&&!s.hasOwnProperty("rest")&&this.scoreNotes_leftHand.push(s)}}}fill_note_color(e="black",i=null){for(let r=0;r<i.elements.length;r++)$(i.elements[r]).css("fill",e)}fillNotesBlack(){$(".abcjs-note").css("fill","black")}fill_chord_with_color(e="black",i=null){let r=$(i.elements[0]).filter(".abcjs-chord");for(let s of r){if(s.textContent=="")continue;let a=s.textContent.replace("\u266D","b").replace("\u266F","#");a=a.replace("F#","Gb").replace("Gbm","F#m"),a=a.replace("C#","Db").replace("Dbm","C#m"),this.cur_chord=a}}light_next_note(e="black",i="r"){i=="r"?$(this.scoreCurNotes.right.abselem.elemset).css("fill",e):i=="l"&&$(this.scoreCurNotes.left.abselem.elemset).css("fill",e)}update_score(){console.log("update_score");var e=new v8.TuneBook(this.abc_string);let i=0;this.random_song?i=Math.round(Math.random()*(e.tunes.length-1)):i=this.current_tune,this.renderString(e.tunes[i].abc),setTimeout(()=>{let r=$(".abcjs-l0.abcjs-m1.abcjs-v0.abcjs-chord").text().replace("\u266D","b").replace("\u266F","#");r=r.replace("F#","Gb").replace("Gbm","F#m"),r=r.replace("C#","Db").replace("Dbm","C#m"),console.log("c => ",r),this.cur_chord=r,this.initSynthController()},100)}renderString(e){setTimeout(()=>{console.log(`abcString => 
`,e),this.visualObj=v8.renderAbc(["abcjs-paper-1","abcjs-paper-2"],e,{canvas_id:"abcjs-paper",add_classes:!0,clickListener:()=>{console.log("measure clicked")},visualTranspose:this.transpose,staffwidth:window.innerWidth*.6,viewPortVertical:!0,viewPortHorizontal:!0,responsive:"resize"})[0]},10)}set_mute(){this.synthService.set_sound(this.sound)}change_tempo(){this.update_score()}check_midi_answer_no_time(e,i){console.log("check_midi_answer_no_time============"),console.log("midi_lh => ",e),console.log("midi_rh => ",i);let r={midiNotes:e,time:0},s={midiNotes:i,time:0},a=!0;e.length&&this.scoreCurNotes.left&&(a=this.resService.addMidiAnswer2(r,this.scoreCurNotes.left),console.log("hasWon_lh => ",a),a?this.light_next_note("green","l"):this.light_next_note("red","l"),this.scoreCurNotes.left=this.scoreNotes_leftHand.shift());let l=!0;i.length&&this.scoreCurNotes.right&&(l=this.resService.addMidiAnswer2(s,this.scoreCurNotes.right),console.log("hasWon_rh => ",l),l?this.light_next_note("green","r"):this.light_next_note("red","r"),this.scoreCurNotes.right=this.scoreNotes_rightHand.shift());let d=l&&a;!this.scoreCurNotes.right&&!this.scoreCurNotes.left&&this.quit(d),console.log("has_won => ",d)}onEvent(e){e.measureStart&&this.fill_chord_with_color("green",e);let i=e.millisecondsPerMeasure/10;setTimeout(()=>{this.resService.add_timed_midiAnswer(this.midi.notesTab,e)?this.fill_note_color("green",e):this.fill_note_color("red",e)},i),this.fill_note_color("green",e)}onBeat(e,i,r){let s=Number((1/this.transport.getNb_subbeat_per_beat()).toPrecision(4));e!=0&&e%s<.1&&this.transport.incSubBeat(1)}onLineEnd(e){console.log("this.cursor_line => ",this.cursor_line),this.cursor_line+=1}quit(e){this.zone.run(()=>{this.midiNotesTab$.unsubscribe(),this.askNext.emit(e)})}static{this.\u0275fac=function(i){return new(i||t)(Le(yi),Le(hi),Le(ko),Le(Vl),Le(on))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-abc-checker-full-score"]],outputs:{askNext:"askNext"},standalone:!1,decls:33,vars:7,consts:[["id","exercice-rythm"],["type","checkbox","name","sound",3,"ngModelChange","change","ngModel"],["for","sound"],["for","#input_right"],["id","input_right",2,"white-space","pre-wrap","overflow-wrap","break-word","width","80%",3,"ngModelChange","input","change","ngModel"],[1,"p-2"],["for","#input_transpose"],["id","input_transpose","type","number","min","-6","max","6",3,"ngModelChange","change","ngModel"],["for","midi_off"],["type","checkbox","id","midi_off",3,"ngModelChange","ngModel"],["for","random"],["type","checkbox","id","random",3,"ngModelChange","ngModel"],["for","#song_number"],["id","song_number","type","number","min","0",3,"ngModelChange","change","ngModel"],["for","#mute_chords"],["id","mute_chords","type","checkbox",3,"ngModelChange","change","ngModel"],["id","synthControl"],["id","abcjs-wrapper",2,"overflow-y","scroll","height","75vh","width","100%","display","flex","flex-direction","row","justify-content","center"],["id","abcjs-paper-1",2,"width","800px","max-width","1200px"]],template:function(i,r){i&1&&(p(0,"div",0),us(1),p(2,"input",1),Fe("ngModelChange",function(a){return Be(r.sound,a)||(r.sound=a),a}),J("change",function(){return r.set_mute()}),m(),p(3,"label",2),P(4,"Sound"),m(),p(5,"div")(6,"label",3),P(7,"Score : "),m(),p(8,"textarea",4),Fe("ngModelChange",function(a){return Be(r.abc_string,a)||(r.abc_string=a),a}),J("input",function(){return r.update_score()})("change",function(){return r.update_score()}),P(9,"      "),m()(),ps(),p(10,"span",5)(11,"label",6),P(12,"Transpose "),m(),p(13,"input",7),Fe("ngModelChange",function(a){return Be(r.transpose,a)||(r.transpose=a),a}),J("change",function(){return r.update_score()}),m()(),p(14,"span",5)(15,"label",8),P(16,"Midi off "),m(),p(17,"input",9),Fe("ngModelChange",function(a){return Be(r.MIDI_OFF,a)||(r.MIDI_OFF=a),a}),m()(),p(18,"span",5)(19,"label",10),P(20,"Random song in book "),m(),p(21,"input",11),Fe("ngModelChange",function(a){return Be(r.random_song,a)||(r.random_song=a),a}),m()(),p(22,"span",5)(23,"label",12),P(24,"Song number "),m(),p(25,"input",13),Fe("ngModelChange",function(a){return Be(r.current_tune,a)||(r.current_tune=a),a}),J("change",function(){return r.update_score()}),m()(),p(26,"span",5)(27,"label",14),P(28,"Mute chords "),m(),p(29,"input",15),Fe("ngModelChange",function(a){return Be(r.mute_chords,a)||(r.mute_chords=a),a}),J("change",function(){return r.update_score()}),m()(),ie(30,"div",16),p(31,"div",17),ie(32,"div",18),m()()),i&2&&(y(2),Oe("ngModel",r.sound),y(6),Oe("ngModel",r.abc_string),y(5),Oe("ngModel",r.transpose),y(4),Oe("ngModel",r.MIDI_OFF),y(4),Oe("ngModel",r.random_song),y(4),Oe("ngModel",r.current_tune),y(4),Oe("ngModel",r.mute_chords))},dependencies:[Gi,Vr,ro,Ti,Lo,ms,Mi],styles:["#exercice-rythm[_ngcontent-%COMP%]{padding-top:11em}  .abcjs-btn{width:28px;height:45px;margin-right:2px;padding:3px 4px;background:none;border:1px solid transparent;box-sizing:border-box;display:flex;flex-direction:column}  label{margin-bottom:unset!important}.metronome[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;height:272px;width:272px;margin:7px}.fifth_circle[_ngcontent-%COMP%]{position:absolute;right:274px;bottom:0;width:auto;height:272px}.text_input[_ngcontent-%COMP%]{font-family:monospace;font-size:x-large;border:none;width:max-content;max-width:100%;width:-webkit-fill-available}#synthControl[_ngcontent-%COMP%]{min-height:20px}textarea[_ngcontent-%COMP%]::-webkit-scrollbar{width:34px}textarea[_ngcontent-%COMP%]{min-height:70px;overflow-y:scroll}"]})}}return t})();var C8=hr(Ko());function Loe(t,n){if(t&1){let e=mn();us(0),p(1,"div")(2,"label",8),P(3,"Right hand"),m(),p(4,"input",9),Fe("ngModelChange",function(r){pe(e);let s=ge();return Be(s.right_hand_string,r)||(s.right_hand_string=r),fe(r)}),J("input",function(){pe(e);let r=ge();return fe(r.update_score())})("change",function(){pe(e);let r=ge();return fe(r.update_score())}),m()(),p(5,"div")(6,"label",10),P(7,"Left hand"),m(),p(8,"input",11),Fe("ngModelChange",function(r){pe(e);let s=ge();return Be(s.left_hand_string,r)||(s.left_hand_string=r),fe(r)}),J("input",function(){pe(e);let r=ge();return fe(r.update_score())})("change",function(){pe(e);let r=ge();return fe(r.update_score())}),m()(),p(9,"label",12),P(10,"Transpose "),m(),p(11,"input",13),Fe("ngModelChange",function(r){pe(e);let s=ge();return Be(s.transpose,r)||(s.transpose=r),fe(r)}),J("change",function(){pe(e);let r=ge();return fe(r.update_score())}),m(),ps()}if(t&2){let e=ge();y(4),Oe("ngModel",e.right_hand_string),y(4),Oe("ngModel",e.left_hand_string),y(3),Oe("ngModel",e.transpose)}}var x8=C8.default,K1=(()=>{class t{constructor(e,i,r,s,a){this.transport=e,this.midi=i,this.resService=r,this.synthService=s,this.zone=a,this.tonality="C",this.tempo="90",this.cur_chord="C4",this.header=`%%staves {(PianoRightHand) (PianoLeftHand)}
V:PianoRightHand clef=treble down
V:PianoLeftHand clef=bass
M:4/4
Q:120
K:C `,this.right_hand_string="[V: PianoRightHand] | c2d2e2f2 |",this.left_hand_string="",this.transpose=0,this.has_started=!1,this.debug_mode=!1,this.askNext=new Rn,this.sound=!0,this.chordsOff=!0,this.prevMidiNotes=[],this.cursor_lh=0,this.cursor_rh=0,this.MIDI_OPEN=!1,this.DELAY_BETWEEN_NOTES=10,new URLSearchParams(window.location.search).get("debug")&&(this.debug_mode=!0),this.cursor_lh=0,this.cursor_rh=0}ngOnInit(){this.loadFromJson()}ngAfterViewInit(){console.log("ngAfterViewInit"),this.update_score()}ngOnDestroy(){this.synthService.stop()}initSynthController(){console.log("initSynthController");let e={beatSubdivisions:this.transport.getNb_subbeat_per_beat(),extraMeasuresAtBeginning:1,onStart:()=>{},onFinished:()=>{console.log("The tune has stopped playing."),setTimeout(()=>{this.quit(!0)},1e3)},onEvent:l=>{this.onEvent(l)}},i={displayLoop:!0,displayRestart:!0,displayPlay:!0,displayStop:!0,displayProgress:!0,displayWarp:!0},r={chordsOff:this.chordsOff,voicesOff:!0,soundFontVolumeMultiplier:1};this.synthService.load("#synthControl",e,i);let a;this.debug_mode?a=()=>{this.fill_notes_color("blue"),this.synthService.play()}:a=()=>{this.synthService.play()},this.synthService.init(this.visualObj,r,a)}fill_note_color(e="black",i=null){if(i.measureStart)for(let r=0;r<i.elements.length;r++)$(i.elements[r]).css("fill",e);else for(let r=0;r<i.elements.length;r++)$(i.elements[r]).css("fill",e)}fill_notes_color(e){for(let i=0;i<this.visualObj.lines.length;i++)for(let r=0;r<this.visualObj.lines[i].staff.length;r++)for(let s=0;s<this.visualObj.lines[i].staff[r].voices.length;s++)for(let a=0;a<this.visualObj.lines[i].staff[r].voices[s].length;a++)this.visualObj.lines[i].staff[r].voices[s][a].el_type=="note"&&$(this.visualObj.lines[i].staff[r].voices[s][a].abselem.elemset).css("fill",e)}fill_chord_with_color(e="black",i=null){console.log("Measure 1rst beat coloration");let r=$(i.elements[0]).filter(".abcjs-chord");for(let s of r){if(s.textContent=="")continue;let a=s.textContent.replace("\u266D","b").replace("\u266F","#");a=a.replace("F#","Gb").replace("Gbm","F#m"),a=a.replace("C#","Db").replace("Dbm","C#m"),this.cur_chord=a,console.log("this.cur_chord ==============> ",this.cur_chord)}}update_header(){this.header=`V:PianoRightHand clef=treble down
V:PianoLeftHand clef=bass
M:4/4
Q:`+this.tempo+`
K:C`}update_score(){console.log("update_score"),this.debug_mode&&this.update_header(),this.renderStrings(this.header,this.left_hand_string,this.right_hand_string),setTimeout(()=>{let e=$(".abcjs-l0.abcjs-m1.abcjs-v0.abcjs-chord").text().replace("\u266D","b").replace("\u266F","#");e=e.replace("F#","Gb").replace("Gbm","F#m"),e=e.replace("C#","Db").replace("Dbm","C#m"),this.cur_chord=e,this.initSynthController()},10)}renderStrings(e,i,r){setTimeout(()=>{let s=e;i!=""&&(s+=`
`+i),r!=""&&(s+=`
`+r),console.log(`abcString => 
`,s),this.visualObj=x8.renderAbc("abcjs-paper",s,{canvas_id:"abcjs-paper",add_classes:!0,clickListener:()=>{console.log("measure clicked")},visualTranspose:this.transpose,staffwidth:window.innerWidth*.6,scale:2,responsive:"resize"})[0],this.fill_notes_color("transparent")},10)}loadFromJson(){this.receivedData!=null&&(this.parsedData=this.receivedData,this.tempo=this.parsedData.tempo,this.sound=this.parsedData.sound,this.transpose=this.receivedData.tona.transpo,this.header=this.receivedData.header,this.right_hand_string=this.receivedData.right_hand,this.left_hand_string=this.receivedData.left_hand)}check_midi_answer_no_time(e,i){console.log("check_midi_answer_no_time============"),console.log("midi_lh => ",e),console.log("midi_rh => ",i),console.log("this.currentEventToCheck => ",this.currentEventToCheck);let r={midiNotes:e,time:0},s={midiNotes:i,time:0},a=!0,l=this.resService.add_timed_midiAnswer(e.concat(i),this.currentEventToCheck);console.log("hasWon => ",l),l?this.fill_note_color("green",this.currentEventToCheck):this.fill_note_color("red",this.currentEventToCheck),this.synthService.play()}play_next_note(){x8.synth.playEvent(this.currentEventToCheck.midiPitches,[],this.synthService.synth.millisecondsPerMeasure).then(e=>{console.log("played ! => ",e)}).catch(function(e){console.log("error playing note",e)})}onEvent(e){this.synthService.stop(),this.currentEventToCheck=e,this.subscribe_MIDI(),this.play_next_note()}subscribe_MIDI(){this.midiNotesTab$=this.midi.notesTabSubject.subscribe(e=>{if(console.log("DATA RECEIEVED : "+e),e.length)this.prevMidiNotes=[...this.prevMidiNotes,...e],this.prevMidiNotes=this.prevMidiNotes.filter((i,r)=>this.prevMidiNotes.indexOf(i)===r).sort();else{if(!this.prevMidiNotes.length)return;console.log("this.prevMidiNotes => ",this.prevMidiNotes);let i=[],r=[];for(let s in this.prevMidiNotes)this.prevMidiNotes[s]<60&&i.push(this.prevMidiNotes[s]),this.prevMidiNotes[s]>=60&&r.push(this.prevMidiNotes[s]);this.check_midi_answer_no_time(i,r),this.prevMidiNotes=[],this.midiNotesTab$.unsubscribe(),this.synthService.play()}})}onBeat(e,i,r){let s=Number((1/this.transport.getNb_subbeat_per_beat()).toPrecision(4));e!=0&&e%s<.1&&this.transport.incSubBeat(1)}quit(e){console.log("quit"),this.zone.run(()=>{this.midiNotesTab$.unsubscribe(),this.askNext.emit(e)})}debug_fct(e,i){let r=e.concat(i);this.midi.notesTabSubject.next(r),this.midi.notesTabSubject.next([])}static{this.\u0275fac=function(i){return new(i||t)(Le(yi),Le(hi),Le(ko),Le(Vl),Le(on))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-abc-hearing"]],outputs:{askNext:"askNext"},standalone:!1,decls:9,vars:3,consts:[["id","exercice-rythm"],[4,"ngIf"],["id","abcjs-wrapper"],["id","abcjs-paper","width","200px"],["id","synthControl",3,"hidden"],[1,"metronome"],[1,"fifth_circle",3,"score_chord"],[3,"click"],["for","#input_right"],["id","input_right","type","text",1,"text_input",3,"ngModelChange","input","change","ngModel"],["for","#input_left"],["id","input_left","type","text",1,"text_input",3,"ngModelChange","input","change","ngModel"],["for","#input_transpose"],["id","input_transpose","type","number","min","-6","max","6",3,"ngModelChange","change","ngModel"]],template:function(i,r){i&1&&(p(0,"div",0),Wt(1,Loe,12,3,"ng-container",1),p(2,"div",2),ie(3,"div",3),m(),ie(4,"div",4)(5,"app-metro",5)(6,"app-fifth-circle",6),p(7,"button",7),J("click",function(){return r.debug_fct([58],[60])}),P(8," debug "),m()()),i&2&&(y(),E("ngIf",r.debug_mode),y(3),E("hidden",!r.debug_mode),y(2),E("score_chord",r.cur_chord))},dependencies:[vr,Gi,Vr,Ti,Lo,ms,Mi,Ld,Nd],styles:["#exercice-rythm[_ngcontent-%COMP%]{padding-top:150px}  .abcjs-btn{width:28px;height:45px;margin-right:2px;padding:3px 4px;background:none;border:1px solid transparent;box-sizing:border-box;display:flex;flex-direction:column}  label{margin-bottom:unset!important}.metronome[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;height:272px;width:272px;margin:7px}.fifth_circle[_ngcontent-%COMP%]{position:absolute;right:274px;bottom:0;width:auto;height:272px}.text_input[_ngcontent-%COMP%]{font-family:monospace;font-size:x-large;border:none;width:max-content;max-width:100%;width:-webkit-fill-available}#synthControl[_ngcontent-%COMP%]{min-height:100px}"]})}}return t})();var w8=hr(Ko());var Noe=w8.default,M8=(()=>{class t{constructor(){this.transpose=0,this.abcString=`T: Music Draft
V:PianoRightHand clef=treble down
V:PianoLeftHand clef=bass
M:4/4
L: 1/8
Q:90
K:C
[V: PianoRightHand]
|EBBA B2 EB|B2 AB defg|afe^c dBAF|DEFD E2E2:|
[V: PianoLeftHand]  
|C,8|C,8|C,8|C,8:|`}ngOnInit(){}ngAfterViewInit(){this.abc_editor=new Noe.Editor("abcPaper",{canvas_id:"scoreDiv"}),this.renderAbcInEditorWithOptions()}onResize(e){this.renderAbcInEditorWithOptions()}renderAbcInEditorWithOptions(){let e=window.innerWidth*.6;setTimeout(()=>{this.abc_editor.paramChanged({visualTranspose:this.transpose,canvas_id:"scoreDiv",add_classes:!0,staffwidth:e,responsive:"resize"})},10)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=zt({type:t,selectors:[["app-draft"]],standalone:!1,decls:10,vars:2,consts:[[2,"padding-top","100px"],[1,"moncontainer","boder"],[1,"boder","score"],["id","scoreDiv",3,"resize"],[1,"boder","editeur"],["id","abcPaper","rows","4","cols","50",3,"ngModelChange","ngModel"],["for","transpose"],["name","transpose","type","number","min","-12","max","12",3,"ngModelChange","change","ngModel"]],template:function(i,r){i&1&&(p(0,"div",0),ie(1,"p"),p(2,"div",1)(3,"div",2)(4,"div",3),J("resize",function(a){return r.onResize(a)},P0),m()(),p(5,"div",4)(6,"textarea",5),Fe("ngModelChange",function(a){return Be(r.abcString,a)||(r.abcString=a),a}),P(7," "),m()()(),ie(8,"label",6),p(9,"input",7),Fe("ngModelChange",function(a){return Be(r.transpose,a)||(r.transpose=a),a}),J("change",function(){return r.renderAbcInEditorWithOptions()}),m()()),i&2&&(y(6),Oe("ngModel",r.abcString),y(3),Oe("ngModel",r.transpose))},dependencies:[Gi,Vr,Ti,Lo,ms,Mi],styles:[".moncontainer[_ngcontent-%COMP%]{width:100%;height:750px;display:flex;flex-direction:row}.editeur[_ngcontent-%COMP%]{border:5px solid;height:100%;width:60%;max-width:50%}.editeur[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100%}.score[_ngcontent-%COMP%]{border:5px solid;height:100%;width:inherit;max-width:65%}.score[_ngcontent-%COMP%]   #scoreDiv[_ngcontent-%COMP%]{width:100%;height:100%}.bordered[_ngcontent-%COMP%]{border:1px solid black}"]})}}return t})();var S8=(()=>{class t{constructor(){}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=zt({type:t,selectors:[["app-page-fifth-circle"]],standalone:!1,decls:2,vars:0,consts:[[2,"display","flex","height","90vh","width","100vw","justify-content","center","align-items","center"],[2,"width","70vh"]],template:function(i,r){i&1&&(p(0,"div",0),ie(1,"app-fifth-circle",1),m())},dependencies:[Nd],encapsulation:2})}}return t})();var P8=(()=>{class t{constructor(){this.askNext=new Rn,this.num=3}ngOnInit(){this.receivedData=this.receivedData,this.num=this.receivedData.count}ngAfterViewInit(){setInterval(()=>{this.num-=1,this.num==0&&this.askNext.emit(!0)},1e3)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=zt({type:t,selectors:[["app-countdown"]],outputs:{askNext:"askNext"},standalone:!1,decls:2,vars:1,consts:[["id","count"]],template:function(i,r){i&1&&(p(0,"div",0),P(1),m()),i&2&&(y(),en(`
`,r.num,`
`))},styles:["#count[_ngcontent-%COMP%]{font-size:25em}"]})}}return t})();var k8=(()=>{class t{constructor(e,i){this.midi=e,this.zone=i,this.askNext=new Rn}ngOnInit(){this.midiNotesTab$=this.midi.notesTabSubject.subscribe(e=>{e.length&&this.zone.run(()=>{this.start()})})}ngAfterViewInit(){setTimeout(()=>{$("#start_button").focus()},10),$(".preload").attr("src",function(e,i){$(this).attr("src","").removeClass("preload").attr("src",i)})}start(){this.askNext.emit(!0)}static{this.\u0275fac=function(i){return new(i||t)(Le(hi),Le(on))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-instr-lvl1"]],outputs:{askNext:"askNext"},standalone:!1,decls:32,vars:0,consts:[[1,"font1","app-page",2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],[2,"border-radius","10px","border","2px solid black"],["height","220px","src","/assets/exercises/instructions/notes2.gif",1,"preload"],["height","220px","src","/assets/exercises/instructions/piano.gif",1,"preload"],["id","start_button",1,"btn","btn-primary","green",3,"click"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"h1"),P(2,"Level one"),m(),p(3,"div")(4,"h2"),P(5,"Instructions :"),m(),p(6,"ul")(7,"li")(8,"h4"),P(9,"First lets be assured that your keyboard is plugged correctly. "),ie(10,"br"),P(11," If you see it in the menu here select it : "),ie(12,"app-midi-selector")(13,"br"),P(14," Otherwise you can try to plug it and refresh the page. "),m()(),p(15,"li")(16,"h4"),P(17,"Now you are going to be shown several series of notes on the score. "),ie(18,"br"),P(19,"Try to play them right on your keyboard ! "),ie(20,"br"),m()(),p(21,"li")(22,"h4"),P(23,"Timings are not measured in this exercise. So focus only on pitches."),ie(24,"br"),m()()()(),p(25,"div",1),ie(26,"img",2)(27,"img",3),m(),p(28,"h2"),P(29,"Good luck :)"),m(),p(30,"button",4),J("click",function(){return r.start()}),P(31,"Start"),m()())},dependencies:[Su],styles:[".app-page[_ngcontent-%COMP%]{padding-top:100px;max-height:100vh}"]})}}return t})();var Z1=class{constructor(){this.HIDE_CHORD=!0,this.HIDE_FUNCTION=!0,this.DEBUG_MODE=!0,this.json_generated={templates:[]},this.TEMPLATE="DEFAULT",this.rhythm_params={right_hand:[{name:"whole",duration:3840,proba:50},{name:"half half",duration:3840,proba:50},{name:"quarter quarter quarter quarter",duration:3840,proba:0},{name:"quarter quarter half",duration:3840,proba:0},{name:"quarter half quarter",duration:3840,proba:0},{name:"half quarter quarter",duration:3840,proba:0},{name:"quarter d_half",duration:3840,proba:0},{name:"d_half quarter",duration:3840,proba:0},{name:"half",duration:1920,proba:0},{name:"quarter quarter",duration:1920,proba:0},{name:"eights eights eights eights",duration:1920,proba:0},{name:"eights eights quarter",duration:1920,proba:0},{name:"eights quarter eights",duration:1920,proba:0},{name:"quarter eights eights",duration:1920,proba:0},{name:"eights d_quarter",duration:1920,proba:0},{name:"d_quarter eights",duration:1920,proba:0},{name:"quarter",duration:960,proba:0},{name:"eights eights",duration:960,proba:0},{name:"sixteenth sixteenth sixteenth sixteenth",duration:960,proba:0},{name:"sixteenth sixteenth eights",duration:960,proba:0},{name:"sixteenth eights sixteenth",duration:960,proba:0},{name:"eights sixteenth sixteenth",duration:960,proba:0},{name:"sixteenth d_eights",duration:960,proba:0},{name:"d_eights sixteenth",duration:960,proba:0}],left_hand:[{name:"whole",duration:3840,proba:30},{name:"half half",duration:3840,proba:30},{name:"quarter quarter quarter quarter",duration:3840,proba:0},{name:"quarter quarter half",duration:3840,proba:0},{name:"quarter half quarter",duration:3840,proba:0},{name:"half quarter quarter",duration:3840,proba:0},{name:"quarter d_half",duration:3840,proba:0},{name:"d_half quarter",duration:3840,proba:0},{name:"half",duration:1920,proba:30},{name:"quarter quarter",duration:1920,proba:0},{name:"eights eights eights eights",duration:1920,proba:0},{name:"eights eights quarter",duration:1920,proba:0},{name:"eights quarter eights",duration:1920,proba:0},{name:"quarter eights eights",duration:1920,proba:0},{name:"eights d_quarter",duration:1920,proba:0},{name:"d_quarter eights",duration:1920,proba:0},{name:"quarter",duration:960,proba:0},{name:"eights eights",duration:960,proba:0},{name:"sixteenth sixteenth sixteenth sixteenth",duration:960,proba:0},{name:"sixteenth sixteenth eights",duration:960,proba:0},{name:"sixteenth eights sixteenth",duration:960,proba:0},{name:"eights sixteenth sixteenth",duration:960,proba:0},{name:"sixteenth d_eights",duration:960,proba:0},{name:"d_eights sixteenth",duration:960,proba:0}]},this.exercise_types_selected={reading_untimed:!0,reading_timed:!1,hearing:!1},this.measure_types_selected={simple_notes_right_hand:!1,simple_notes_left_hand:!1,simple_notes_both_hands:!0,chords_first_beat_lh_and_notes_rh:!1,intervals:!1},this.global_gen_params={duration:1,measures:3,meter:"4/4",clef_G:!0,clef_F:!0,clef_OR:!1,tempo:90,sound:!0,timed:!0},this.tonalities_selected={C:!0,D:!1,E:!1,F:!1,G:!1,Bb:!1},this.modes_selected={major:!0,h_minor:!1,n_minor:!1,m_minor:!1},this.chords_gen_params={inversions:{_one:!0,_two:!1,_three:!1,_four:!1},chord_types_major:{major:!0,minor:!0,dominant:!1,minor7:!1,maj7:!1,dim:!1,hdim:!1},chord_types_h_minor:{major:!1,minor:!1,dominant:!1,minor7:!1,maj7:!1,dim:!1,dim7:!0,hdim:!1,aug:!1,mMaj7:!1,augMaj7:!1},chord_types_n_minor:{major:!1,minor7:!1,dominant:!1,minor:!0,maj7:!1,dim:!1},chord_types_m_minor:{dim:!1,major:!1,minor:!1,aug:!0,mMaj7:!1,minor7:!1,augMaj7:!1,dominant:!1,hdim:!1}},this.notes_gen_params={arpeggios:!1,one_by_one:!1}}};var ku=(()=>{class t{constructor(){}get_rand_in_rhythm_motives(e){let i=0;for(let d in e)i+=e[d].proba;let r=Math.random(),s=[0],a=0,l;for(let d in e)if(s.push(e[d].proba/i+a),a+=e[d].proba/i,r>s[s.length-2]&&r<a){l=e[d];break}return l}generate_measure_rythm7(e,i=3840){let r={whole:"8",half:"4",quarter:"2",eights:"",sixteenth:"/2",d_whole:"12",d_half:"6",d_quarter:"3",d_eights:"3/2",d_sixteenth:"3/4"};var s={d_whole:5760,whole:3840,d_half:2880,half:1920,d_quarter:1440,quarter:960,d_eights:720,eights:480,d_sixteenth:360,sixteenth:240};let a="",l=JSON.parse(JSON.stringify(e)),d=[],u=0;for(;i>0;){let h=[];for(let w=0;w<l.length;w++)l[w].duration<=i&&l[w].proba>0&&h.push(l[w]);l=h;let _=this.get_rand_in_rhythm_motives(h);_||(console.warn("no rythmic motive provided, picking default 'whole'."),_={duration:3840,name:"whole",proba:100}),a+=_.name+" ";let b=_.name.split(" ");for(let w=0;w<b.length;w++){let S=!1;u%1920==0&&(S=!0);let L={duration_name:b[w],duration:s[b[w]],abc_string:r[b[w]],position:u,is_rest:!1,is_strong:S};u+=L.duration,d.push(L)}i-=_.duration}return d}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Mc=nn;var Eu=Ni,E8=(()=>{class t{constructor(e){this.rhythmService=e}generate(e={}){}get_rand_in_array(e,i=!0){return i?e[Math.floor(Math.random()*e.length)]:e.splice(Math.floor(Math.random()*e.length),1)}get_rand_in_obj(e){let i=[];for(let s of Object.keys(e))e[s]==!0&&i.push(s);let r=Math.floor(Math.random()*i.length);return i[r]}generate_contrepoint_lines(e,i,r,s,a="4/4",l=null){for(let K of e)console.log("p.abc_string => ",K.abc_string);let d=[],u=e,h=a.match(/([0-9]+)\/([0-9]+)/),_=h[1],b=h[2],w=[];for(let K=0;K<u.length;K++)w.push(JSON.parse(JSON.stringify(u[K].notes_array.map(ue=>ue.match(/([ABCDEFG][#b]?)/)[1]))));for(let K=0;K<w.length;K++)w[K].length==3&&(e[K].inv=="_one"?w[K].push(w[K][0]):e[K].inv=="_two"?w[K].push(w[K][1]):e[K].inv=="_three"&&w[K].push(w[K][0]));for(let K=0;K<w.length;K++)if(K==0)for(let ue=0;ue<w[0].length;ue++)ue==0?w[K][ue]=this.get_rand_in_tessiture("bass",w[K][ue]):ue==1?w[K][ue]=this.get_rand_in_tessiture("tenor",w[K][ue]):ue==2?w[K][ue]=this.get_rand_in_tessiture("alto",w[K][ue]):ue==3&&(w[K][ue]=this.get_rand_in_tessiture("soprano",w[K][ue]));else{w[K][0]=this.get_rand_in_tessiture("bass",w[K][0]);let ue=w[K-1],be=w[K];ue=["A3","E3","G4","C5"],be=["G3","B","D","G"],be=this.check_same_voice(ue,be),console.log("cur  => ",be),w[K]=JSON.parse(JSON.stringify(be))}debugger;let S=this.rhythmService.generate_measure_rythm7(i,s),L={_one:1,_two:2,_three:3,_four:4},R,z,ne,Q,q=[],T=[],se=[],_e=[],Me=0,me=0;for(let K=0;K<2;K++)for(let ue=0;ue<S.length;ue++){let be=e[me],Z=L[this.get_rand_in_obj(l.inversions)]-1;if(S[ue].is_strong){let oe=qn.get(be.chord_name);console.log("cur_chord => ",be.notes_array);let Ee=JSON.parse(JSON.stringify(oe.notes));Ee.rotate(Z),Me==0?R=this.get_rand_in_tessiture("bass",oe.notes[0]):R=this.get_rand_in_tessiture("bass",Ee[0]),q.push(R)}Me+=S[ue].duration,Me>=be.duration&&(me++,Me=0)}console.log("b_t => ",q),Me=0,me=0;for(let K=0;K<q.length;K++){let ue=e[me],be=qn.get(ue.chord_name),Z=JSON.parse(JSON.stringify(be.notes));Z.splice(Z.indexOf(q[K].match(/([ABCDEFG][#b]?)/)[1]),1);let oe=this.get_rand_in_array(Z,!1);oe=this.get_rand_in_tessiture("tenor",oe),nn.midi(q[K])>nn.midi(oe)&&(oe=oe.match(/([ABCDEFG][#b]?)([0-9])/)[1]+(Number(oe.match(/([ABCDEFG][#b]?)([0-9])/)[2])+1),nn.midi(oe)>nn.midi("E4"));debugger}return e}get_rand_in_tessiture(e=null,i=null){let r="E2",s="E4",a=3;switch(e){case"bass":r="E2",s="E4",a=this.get_rand_in_array([2,3,4]);break;case"tenor":r="D3",s="F4",a=this.get_rand_in_array([3,4]);break;case"alto":r="A3",s="C5",a=this.get_rand_in_array([3,4,5]);break;case"soprano":r="D4",s="G5",a=this.get_rand_in_array([4,5]);break;default:console.error("invalid tessiture :",e);break}return nn.midi(i+a)>nn.midi(s)?a--:nn.midi(i+a)<nn.midi(r)&&a++,i+a}get_dist_matrix(e,i){if(i.length!=e.length)throw"Error in get_dist_matrix : inputs are not the same size.";let r=new Array(i.length),s=new Array(i.length),a=new Array(i.length),l=new Array(i.length);for(var d=0;d<i.length;++d){let b=new Array(e.length),w=new Array(e.length),S=new Array(e.length),L=new Array(e.length);r[d]=b,s[d]=w,a[d]=S,l[d]=L}for(var d=0;d<r.length;++d)for(var u=0;u<r[d].length;++u)s[u][d]=Ni.distance(i[d],e[u]),r[u][d]=Ni.distance(e[u],i[d]),a[u][d]=Ni.semitones(r[u][d]),l[u][d]=Ni.semitones(s[u][d]);return{asc:r,desc:s,asc_n:a,desc_n:l};for(var d;d<e.length;++d)h+=i[d]+"	";for(var d;d<r.length;++d){for(var _="",u=0;u<r[d].length;++u)_+=r[d][u]+"	";console.log(e[d]+"	"+_+`
`)}for(var d;d<e.length;++d)h+=i[d]+"	";for(var d;d<s.length;++d){for(var _="",u=0;u<s[d].length;++u)_+=s[d][u]+"	";console.log(e[d]+"	"+_+`
`)}}check_closest_move(e,i){let r=nn.get(e),s=[];for(var a=0;a<i.length;++a){if(i[a]==""){s.push(null);continue}let l=nn.get(i[a]),d=Ni.semitones(Ni.distance(r,l)),u=Ni.semitones(Ni.distance(l,r)),h=Math.abs(d)<Math.abs(u)?"-"+Ni.distance(r,l):Ni.distance(l,r);s.push(h)}return s}check_same_voice(e,i){if(console.clear(),e.length!=i.length)throw"Error lead_voices() => Chords are note the same length.";let r=JSON.parse(JSON.stringify(e)),s=JSON.parse(JSON.stringify(i));console.log("%c dept => ","background-color:green",e),console.log("%c dest => ","background-color:red",i);let a=Array(e.length).fill("");a[0]=i[0],r[0]="",s[0]="";let l=this.check_common_tones(r,s);a=[a[0]].concat(l),console.log("out => ",a);let d=0;if(a.map(u=>{u==""&&d++}),d==1){console.log("theres only one voice left to go"),console.log("cur => ",s),console.log("out => ",a),this.make_last_voice(e,s,a);debugger}else if(d==2){console.log("2 voices to go"),this.make_conjoint_moves(r,s,a),console.log("out => ",a);let u=s.filter(h=>{if(h!="")return h});u.length==1?this.make_last_voice(e,s,a):u.length==2&&this.make_disjoint_moves(r,s,a,e)}else if(d==3){console.log("3 voices to go"),this.make_conjoint_moves(r,s,a),console.log("out => ",a);let u=s.filter(h=>{if(h!="")return h});if(u.length==1)this.make_last_voice(e,s,a);else if(u.length==2)this.make_disjoint_moves(r,s,a,e),a.filter(_=>{if(_!="")return _}).length==1&&this.make_last_voice(e,s,a);else{console.warn("Still 3 voices to go ?");debugger}}this.check_forbidden_move(e,a),console.log("%c from => ","background-color:red",e),console.log("%c out => ","background-color:green",a);debugger;return a}make_last_voice(e,i,r){let s=i.filter(h=>{if(h!="")return h});if(s.length>1)throw"Error in make_last_voice() => more than one note to get in last voice : "+JSON.stringify(s);s=s[0];let a=r.indexOf(""),l=e[a],d;Ni.semitones(Ni.distance(l,s))<=Ni.semitones(Ni.distance(s,l))?d=Ni.distance(l,s):d="-"+Ni.distance(s,l);let u=nn.transpose(l,d);r.indexOf(u)!=-1&&console.warn("NOTE DOUBLED : ",u),r[a]=u,console.warn("Setting last note => ",u,r)}make_conjoint_moves(e,i,r){let s=e.slice(1).filter(_=>{if(_!="")return _}),a=i.slice(1).filter(_=>{if(_!="")return _}),l=this.get_dist_matrix(s,a),d=[];for(var u=0;u<l.asc_n.length;++u)for(var h=0;h<l.asc_n[u].length;++h)if(Math.abs(l.asc_n[u][h])<=1){let _=Mc.transpose(s[u],l.asc[u][h]);d.push({from:s[u],to:_}),console.warn("conjoint move up => ",s[u]," to: ",_)}else if(l.desc_n[u][h]<=1){let _=Mc.transpose(s[u],"-"+l.desc[u][h]);d.push({from:s[u],to:_}),console.warn("conjoint move down => ",s[u]," to: ",_)}for(var u=0;u<d.length;++u){let b=e.indexOf(d[u].from);r[b]=d[u].to;let w=i.indexOf(d[0].to.match(/([ABCDEFG][#b]?)/)[1]);e[b]="",i[w]=""}}make_disjoint_moves(e,i,r,s){let a=[],l=e.filter(S=>{if(S!="")return S}),d=i.filter(S=>{if(S!="")return S}),u=this.get_dist_matrix(l,d),h=lap(u.asc_n.length,u.asc_n),_=lap(u.desc_n.length,u.desc_n);if(h.cost<_.cost)for(var b=0;b<h.col.length;++b){let S=h.col[b],L=u.asc[b][S],R=u.desc[b][S];Eu.get(R).semitones<Eu.get(L).semitones?a.push("-"+R):a.push(L)}else for(var b=0;b<_.col.length;++b){let L=_.col[b],R=u.desc[b][L],z=u.asc[b][L];Eu.get(z).semitones<Eu.get(R).semitones?a.push(z):a.push("-"+R)}let w=0;r=r.map((S,L,R)=>{if(S==""){let z=a[w];R[L]=Mc.transpose(e[w],z),S=Mc.transpose(e[w],z),console.warn("Disjoint move : ",e[w],"=>",a[w],"=>",S),e[w]="",i[w]="",w++}return S})}check_common_tones(e,i){let r=e.slice(1),s=i.slice(1);if(r.length!=s.length)throw"Error : check_common_tones => array length is different.";let a=Array(r.length).fill("");for(let d=0;d<r.length;d++)for(var l=0;l<s.length;++l)if(nn.pitchClass(r[d])==nn.pitchClass(s[l])){a[d]=r[d],i[l+1]="",e[d+1]="",console.warn("Common tone found:",r[d]);continue}return a}check_forbidden_move(e,i){let r=[];for(var s=0;s<e.length;++s)for(var a=s;a<e.length;++a){if(s==a)continue;let l=Mc.get(e[s]),d=Mc.get(e[a]),u=Mc.get(i[s]),h=Mc.get(i[a]),_=Eu.distance(l.letter,d.letter),b=Eu.distance(u.letter,h.letter);if(_=="5P"&&b=="5P"){let w=l.midi<d.midi&&u.midi<h.midi,S=l.midi>d.midi&&u.midi>h.midi,L=l.midi==d.midi&&u.midi==h.midi;if(w||S||L){let R="asc";S?R="desc":L&&(R="stab"),console.warn("Parallel",R,"fifth detected : ",e[s],e[a],"=>",i[s],i[a]),r.push({type:"5P",direction:R,idx_1:s,idx_2:a})}}else if(_=="1P"&&b=="1P"){console.warn("Parallel octave detected : ",e[s],e[a],"=>",i[s],i[a]);let w=l.midi<d.midi&&u.midi<h.midi,S=l.midi>d.midi&&u.midi>h.midi,L=l.midi==d.midi&&u.midi==h.midi;if(w||S||L){let R="asc";S?R="desc":L&&(R="stab"),console.warn("Parallel",R,"octave detected : ",e[s],e[a],"=>",i[s],i[a]),r.push({type:"1P",direction:R,idx_1:s,idx_2:a})}}}return r}static{this.\u0275fac=function(i){return new(i||t)(ht(ku))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Roe=qn;var ey=(()=>{class t{constructor(){}get_rand_in_obj(e){let i=[];for(let s of Object.keys(e))e[s]==!0&&i.push(s);let r=Math.floor(Math.random()*i.length);return i[r]}get_random_chord(e,i,r="G",s){let a=this.get_rand_in_obj(s.inversions),l;switch(i){case"major":l=s.chord_types_major;break;case"h_minor":l=s.chord_types_h_minor;break;case"n_minor":l=s.chord_types_n_minor;break;case"m_minor":l=s.chord_types_m_minor;break;default:l=s.chord_types_major}let d=this.get_rand_in_obj(l),u,h,_,b;if(i=="major")switch(u=xi.majorKey(e),h=u.chords,d){case"major":_=[u.scale[0],u.scale[3],u.scale[4]],b=["I","IV","V"];break;case"minor":_=[u.scale[1]+"m",u.scale[2]+"m",u.scale[5]+"m"],b=["ii","iii","vi"];break;case"dominant":_=[h[4],u.secondaryDominants[1],u.secondaryDominants[2],u.secondaryDominants[3],u.secondaryDominants[4],u.secondaryDominants[5]],b=["V7 of I","V7 of ii","V7 of iii","V7 of IV","V7 of V","V7 of vi"];break;case"minor7":_=[h[1],h[2],h[5]],b=["ii","iii","vi"];break;case"maj7":_=[h[0],h[3]],b=["I","IV"];break;case"dim":_=[u.scale[6]+"o"],b=["VII"];break;case"dim7":_=[];break;case"hdim":_=[u.scale[6]+"m7b5"],b=["VII"];break;case"aug":_=[];break;default:_=[u.scale[0],u.scale[3],u.scale[4]],b=["I","IV","V"];break}else if(i=="h_minor"){u=xi.minorKey(e);let T=xi.majorKey(e);switch(h=u.harmonic.chords,d){case"major":_=[h[4].replace("7",""),h[5].replace("maj7","")],b=["V","VI"];break;case"minor":_=[h[0].replace("Maj7",""),h[3].replace("7","")],b=["i","iv"];break;case"dominant":_=[h[4],T.secondaryDominants[1],T.secondaryDominants[2],T.secondaryDominants[3],T.secondaryDominants[4],T.secondaryDominants[5]],b=["V7 of I","V7 of ii","V7 of iii","V7 of IV","V7 of V","V7 of vi"];break;case"minor7":_=[h[3]],b=["ivm7"];break;case"maj7":_=[h[5]],b=["VI"];break;case"dim":_=[h[1].replace("m7b5","o"),h[6].replace("o7","o")],b=["iio","viio"];break;case"dim7":_=[h[6]],b=["viio7"];break;case"hdim":_=[h[1]],b=["iim7b5"];break;case"aug":_=[h[2].replace("maj7","")],b=["III+"];break;case"mMaj7":_=[h[0]],b=["ImMaj7"];break;case"augMaj7":_=[h[2]],b=["III+Maj7"];break;default:_=[h[4].replace("7",""),h[5].replace("maj7","")],b=["V","VI"];break}}else if(i=="n_minor"){u=xi.minorKey(e);let T=xi.majorKey(e);switch(h=u.natural.chords,d){case"major":_=[h[2].replace("maj7",""),h[5].replace("maj7",""),h[6].replace("7","")],b=["III","VI","VII"];break;case"minor":_=[h[0].replace("7",""),h[3].replace("7",""),h[4].replace("7","")],b=["i","iv","v"];break;case"dominant":_=[h[4],T.secondaryDominants[1],T.secondaryDominants[2],T.secondaryDominants[3],T.secondaryDominants[4],T.secondaryDominants[5]],b=["V7 of I","V7 of ii","V7 of iii","V7 of IV","V7 of V","V7 of vi"];break;case"minor7":_=[h[0],h[3],h[4]],b=["i","iv","v"];break;case"maj7":_=[h[2].replace("maj7",""),h[5].replace("maj7","")],b=["III","VI"];break;case"dim":_=[h[1].replace("m7b5","dim")],b=["iio"];break;case"dim7":break;case"hdim":_=[h[1]],b=["iim7b5"];break;case"aug":break;case"mMaj7":break;case"augMaj7":_=[h[2]],b=["III+Maj7"];break;default:_=[h[2].replace("maj7",""),h[5].replace("maj7",""),h[6].replace("7","")],b=["III","VI","VII"];break}}else if(i=="m_minor"){u=xi.minorKey(e);let T=xi.majorKey(e);switch(h=u.melodic.chords,d){case"major":_=[h[3].replace("7",""),h[4].replace("7","")],b=["IV","V"];break;case"minor":_=[h[0].replace("6",""),h[1].replace("7","")],b=["im","iim"];break;case"dominant":_=[h[4],T.secondaryDominants[1],T.secondaryDominants[2],T.secondaryDominants[3],T.secondaryDominants[4],T.secondaryDominants[5]],b=["V7 of I","V7 of ii","V7 of iii","V7 of IV","V7 of V","V7 of vi"];break;case"minor7":_=[h[0],h[1]],b=["im7","iim7"];break;case"maj7":_=[h[5]],b=["VI"];break;case"dim":_=[h[5].replace("m7b5","o"),h[6].replace("m7b5","o")],b=["vio","viio"];break;case"dim7":_=[h[6]],b=["viio7"];break;case"hdim":_=[h[5],h[6]],b=["vim7b5","viiom7b5"];break;case"aug":_=[h[2].replace("maj7","")],b=["III+"];break;case"mMaj7":_=[h[0]],b=["ImMaj7"];break;case"augMaj7":_=[h[2]],b=["III+Maj7"];break;default:_=[h[3].replace("7",""),h[4].replace("7","")],b=["IV","V"];break}}let w=Math.floor(Math.random()*_.length),S=_[w],L=b[w],R=qn.get(S),z="";switch(a){case"_one":z=R.notes[0];break;case"_two":z=R.notes[1];break;case"_three":z=R.notes[2];break;case"_four":R.notes.length>3?z=R.notes[3]:z=R.notes[0];break;default:z=R.notes[0];break}r=="G"?R=qn.getChord(R.aliases[0],R.tonic+"4",z+"4"):r=="F"&&(R=qn.getChord(R.aliases[0],R.tonic+"2",z+"2"));let ne="",Q=[];for(let T of R.notes){let se=Ro.scientificToAbcNotation(T),_e=T.match(/([ABCDEFG][#b]?)/g),Me;u.hasOwnProperty("harmonic")?Me=u.natural.scale:Me=u.scale,Me.indexOf(_e[0])>=0?se=se.replace("^","").replace("_",""):Me.indexOf(_e[0])==-1&&(Me.indexOf(_e[0][0]+"b")>-1||Me.indexOf(_e[0][0]+"#")>-1)&&(se="="+se),Q.push(T),ne+=se}return{entity_type:"chord",tonality:e,inv:a,mode:i,c_type:d,notes_array:Q,chord_name:S,chord_degree:L}}get_chord(e,i=null,r="C",s="major",a="G",l){i||(i=this.get_rand_in_obj(l.inversions));let d=Roe.get(e),u="";switch(i){case"_one":u=d.notes[0];break;case"_two":u=d.notes[1];break;case"_three":u=d.notes[2];break;case"_four":d.notes.length>3?u=d.notes[3]:u=d.notes[0];break;default:u=d.notes[0];break}a=="G"?d=qn.getChord(d.aliases[0],d.tonic+"4",u+"4"):a=="F"&&(d=qn.getChord(d.aliases[0],d.tonic+"2",u+"2"));let h;if(s=="major")h=xi.majorKey(r);else if(s=="m_minor"){h=xi.minorKey(r).melodic;let S=xi.majorKey(r)}else if(s=="n_minor"){h=xi.minorKey(r).natural;let S=xi.majorKey(r)}else if(s=="h_minor"){h=xi.minorKey(r).harmonic;let S=xi.majorKey(r)}let _="",b=[];for(let S of d.notes){let L=Ro.scientificToAbcNotation(S),R=S.match(/([ABCDEFG][#b]*)/g),z;h.hasOwnProperty("harmonic")?z=h.natural.scale:z=h.scale,z.indexOf(R[0])>=0?L=L.replace("^","").replace("_",""):z.indexOf(R[0])==-1&&(z.indexOf(R[0][0]+"b")>-1||z.indexOf(R[0][0]+"#")>-1)&&(L="="+L),b.push(S),_+=L}return{entity_type:"chord",tonality:r,inv:i,mode:s,c_type:d.type,notes_array:b,chord_name:d.symbol}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var joe=nn;var A8=xi;var D8=(()=>{class t{constructor(e){this.chord=e}generate_progression(e="C",i="major",r,s=1,a){if(!r||r.length==0)throw"generate_progression() : no possible chord given !";let l=this.generate_progression2(e,i,r,s,a),d=[];for(var u=0;u<l.prog.length;++u){let h=this.chord.get_chord(l.prog[u],null,e,i,"F",a);if(h.duration=3840,h.chord_name=h.chord_name.replace(/M$/,""),h.chord_degree=l.degrees[u],h.chord_degree==null)debugger;d.push(h)}return d}generate_progression2(e="C",i="major",r,s=1,a){let l=[],d=.5,u=.5;var h=["I","IV","VII","III","VI","II","V"];let _;if(i=="major"?_=A8.majorKey(e):_=A8.minorKey(e).harmonic,s==1)l.push("C");else if(s==2)l.push("G"),l.push("C");else if(s==3){l.push("C"),l.push("G");let S=Math.floor(Math.random()*6);l.push(_.scale[S]),l.reverse()}else{l.push("C"),l.push("G");let S=Math.floor(Math.random()*6);l.push(_.scale[S]);for(let L=0;L<s-3;L++){let R=_.grades[_.scale.indexOf(l[l.length-1])],ne=(h.indexOf(R)-1)%7;ne==-1&&(ne=6);let Q=_.scale[_.grades.indexOf(h[ne])];l.push(Q)}l.reverse()}let b=[];for(var w=0;w<l.length;++w){let S;if(w==l.length-1)S=_.grades[_.scale.indexOf(l[w])];else{let L=joe.transpose(l[w],"-5P");S="V of "+_.grades[_.scale.indexOf(L)]}if(b.push(S),Math.random()>u&&w!=l.length-1?(b[b.length-1]=_.grades[_.scale.indexOf(l[w])],l[w]=_.chords[_.scale.indexOf(l[w])],b[b.length-1]=="V"&&(b[b.length-1]="V7 of I")):Math.random()>d&&w!=l.length-1&&(w==l.length-3?(b[b.length-1]="V7 of V",l[w]="D7"):(b[b.length-1]="V7 of "+_.grades[_.scale.indexOf(l[w+1])],l[w]+="7")),l[w]==null)debugger}return{prog:l,degrees:b}}static{this.\u0275fac=function(i){return new(i||t)(ht(ey))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Us=nn;var qs=Ni;var I8=(()=>{class t{constructor(e){this.rhythmService=e}get_random_note(e,i,r="G",s=null,a=null){let l,d;switch(i){case"major":d=xi.majorKey("C");break;case"h_minor":d=xi.minorKey("C").harmonic;break;case"n_minor":d=xi.minorKey("C").natural;break;case"m_minor":d=xi.minorKey("C").melodic;break}let u="",h;if(s?h=s.notes_array.get_rand_in_array():h=d.scale.get_rand_in_array(),h==null)debugger;h=/([ABCDEFG][#b]?)[0-9]?/.exec(h)[1];let _="E2",b="E4",w=3;if(a){switch(a){case"bass":_="E2",b="E4",w=[2,3,4].get_rand_in_array();break;case"tenor":_="D3",b="F4",w=[3,4].get_rand_in_array();break;case"alto":_="A3",b="C5",w=[3,4,5].get_rand_in_array();break;case"soprano":_="D4",b="G5",w=[4,5].get_rand_in_array();break;default:console.error("invalid tessiture :",a);break}nn.midi(h+w)>nn.midi(b)?w--:nn.midi(h+w)<nn.midi(_)&&w++}else r=="G"?(w=[3,4,5].get_rand_in_array(),nn.midi(h+w)>nn.midi("E6")?w--:nn.midi(h+w)<nn.midi("A3")&&w++):r=="F"&&(w=[2,3].get_rand_in_array(),nn.midi(h+w)>nn.midi("E4")?w--:nn.midi(h+w)<nn.midi("E2")&&w++);h+=w;let S=Ro.scientificToAbcNotation(h);switch(i){case"major":d=xi.majorKey(e);break;case"h_minor":d=xi.minorKey(e).harmonic;break;case"n_minor":d=xi.minorKey(e).natural;break;case"m_minor":d=xi.minorKey(e).melodic;break}let L;L=d.scale;let R=h.match(/([ABCDEFG][#b]?)/)[0];return L.indexOf(R)>=0||L.indexOf(R)==-1&&(L.indexOf(R[0]+"b")>-1||L.indexOf(R[0]+"#")>-1)&&(S="="+S),u+=h,{entity_type:"note",tonality:e,mode:i,notes_names:u}}generate_voice_from_rhythm(e,i=1,r=null,s=null){let a=6;for(var l=0;l<e.left.length;++l){let d=e.left[l],u=this.get_random_note_2(d,"F");if(d.note=u.copy(),l==0)continue;let h=e.left[l-1].note,_=d.note,b;h.entity_type=="chord"?(h=h.notes_array[0],b=h.match(/([A-G][#b]?)([0-9]+)/)):b=h.notes_names.match(/([A-G][#b]?)([0-9]+)/);let w=b[1],S=b[2],L=qs.semitones(qs.distance(w+S,_.notes_names));L>a?(console.warn("correcting in voice F: ",_.notes_names,"to : ",Us.transpose(_.notes_names,"-8P")),_.notes_names=Us.transpose(_.notes_names,"-8P")):L<-a&&(console.warn("correcting in voice F: ",_.notes_names,"to : ",Us.transpose(_.notes_names,"8P")),_.notes_names=Us.transpose(_.notes_names,"8P"))}for(var l=0;l<e.right.length;++l){let u=e.right[l],h=this.get_random_note_2(u,"G");if(u.note=h.copy(),l==0)continue;let _=e.right[l-1].note,b=u.note,w=_.notes_names.match(/([A-G][#b]?)([0-9]+)/);if(w==null)debugger;let S=w[1],L=w[2],R=qs.semitones(qs.distance(_.notes_names,b.notes_names));if(R>a){let z=qs.fromSemitones(-12);console.warn("correcting dist > ",a," in voice G: ",_.notes_names," & ",b.notes_names," of ",z,"to : ",Us.transpose(b.notes_names,z)),b.notes_names=Us.transpose(b.notes_names,z)}else if(R<-a){let z=qs.fromSemitones(12);console.warn("correcting dist < ",a," in voice G: ",_.notes_names," & ",b.notes_names," of ",z,"to : ",Us.transpose(b.notes_names,z)),b.notes_names=Us.transpose(b.notes_names,z)}if(R=qs.semitones(qs.distance(_.notes_names,b.notes_names)),R==0){let z=1;Math.random()>.5&&(z=-1);let ne=u.harmony.notes_array,Q;z==-1?Q=ne.map(T=>qs.semitones(qs.distance(S,T))):Q=ne.map(T=>qs.semitones(qs.distance(T,S)));let q=1e3;if(Q.map(T=>{T<q&&T!=0&&(q=T)}),q=Q.indexOf(q),ne[q]==null)debugger;b.notes_names=ne[q].match(/[A-G][#b]?/)[0]+_.notes_names.match(/\d$/)[0],console.warn("correcting dist 0 in voice G: ",_.notes_names,"to : ",b.notes_names),console.log("scale => ",ne)}S=="F"?(console.warn("Resolving => F to: ",Us.transpose(S+L,"-2m")),b.notes_names=Us.transpose(S+L,"-2m")):S=="B"&&(console.warn("Resolving => B to: ",Us.transpose(S+L,"2m")),b.notes_names=Us.transpose(S+L,"2m"))}return e}get_random_note_2(e,i="G"){let r;return e.is_strong?r=this.get_random_note(e.harmony.tonality,e.harmony.mode,i,e.harmony):r=this.get_random_note(e.harmony.tonality,e.harmony.mode,i),r}static{this.\u0275fac=function(i){return new(i||t)(ht(ku))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var O8=(()=>{class t{constructor(){this.abc_value={whole:"8",half:"4",quarter:"2",eights:"",sixteenth:"/2",d_whole:"12",d_half:"6",d_quarter:"3",d_eights:"3/2",d_sixteenth:"3/4"},this.value_num={d_whole:5760,whole:3840,d_half:2880,half:1920,d_quarter:1440,quarter:960,d_eights:720,eights:480,d_sixteenth:360,sixteenth:240},this.num_value={5760:"d_whole",3840:"whole",2880:"d_half",1920:"half",1440:"d_quarter",960:"quarter",720:"d_eights",480:"eights",360:"d_sixteenth",240:"sixteenth"}}split_measures(e,i=3840,r){let s=[],a=0,l=0,d=[];for(let u=0;u<e.length;u++)if(l+=e[u].duration,l==i)d.push(e[u]),l=0,e[u].measure_idx=a,e[u].harmony=r[a],a++;else if(l>i){let h=l-i,_=e[u].copy();e[u].is_tie="start",_.is_tie="end",e[u].duration=e[u].duration-h,e[u].duration_name=this.num_value[e[u].duration],_.duration=h,_.duration_name=this.num_value[h],_.position=0,e[u].measure_idx=a,e[u].harmony=r[a],a++,_.measure_idx=a,_.harmony=r[a],d.push(e[u]),d.push(_.copy()),l=h}else d.push(e[u]),e[u].measure_idx=a,e[u].harmony=r[a];return d}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var fM=Ro;var Sc=(()=>{class t{constructor(e,i,r,s,a,l,d){this._http=e,this.contrepoint=i,this.rhythmService=r,this.chord=s,this.progressionService=a,this.melodyService=l,this.measureSplitService=d,this.json_generated={templates:[],exo_parameters:{}},this.loaded_exo_params=new Z1,this.load_parameters_from_template()}load_parameters_from_template(e="DEFAULT",i=null){let r;if(e==this.loaded_exo_params.template&&i){i();return}let s=e,a=new Un({"Content-Type":"application/json"});this._http.get("/assets/exercises/levels/"+s+".json",{responseType:"text",headers:a}).pipe(fn(l=>{console.log("%c loaded params from template : "+e,"background-color:green"),this.loaded_exo_params=JSON.parse(l),i?.()})).subscribe(l=>{},l=>console.log(l),()=>{})}generate(e={}){this.json_generated={templates:[],exo_parameters:this.loaded_exo_params};for(let r=0;r<this.loaded_exo_params.global_gen_params.duration;r++){var i=this.loaded_exo_params.exercise_types_selected.get_rand_in_obj();this.loaded_exo_params.TEMPLATE=="FULL_SCORE"&&(i="full_score_template");let s;if(i=="full_score_template")s={template_type:"full_score",abc_file:this.loaded_exo_params.FILE,abc_string:"abc"};else if(i=="reading_untimed"||i=="reading_timed"||i=="hearing")s=this.generate_music_template2(i);else debugger;this.json_generated.templates.push(s)}return this.loaded_exo_params.TEMPLATE.match(/LEVEL_*/)&&!this.loaded_exo_params.DEBUG_MODE&&!(e.hasOwnProperty("add_instructions")&&e.add_instructions==!1)&&this.json_generated.templates.unshift({template_type:"template_instr_lvl1",version:"timed"}),this.json_generated}get_rand_clef(){var e=this.loaded_exo_params.global_gen_params.clef_G,i=this.loaded_exo_params.global_gen_params.clef_F;if(this.loaded_exo_params.global_gen_params.clef_OR){var r={clef_G:!0,clef_F:!0}.get_rand_in_obj();r=="clef_G"?(e=!0,i=!1):(e=!1,i=!0)}return{voice_G:e,voice_F:i}}generate_music_template2(e){let i={},r=[],s=[];var a=this.loaded_exo_params.global_gen_params.meter.split("/"),l=this.loaded_exo_params.global_gen_params.measures,d=this.loaded_exo_params.tonalities_selected.get_rand_in_obj(),u=this.loaded_exo_params.modes_selected.get_rand_in_obj(),h=this.get_rand_clef(),_=this.json_generated.exo_parameters.rhythm_params.left_hand,b=this.json_generated.exo_parameters.rhythm_params.right_hand;let w=this.json_generated.exo_parameters.chords_gen_params["chord_types_"+u].get_all_true_in_obj(),S=this.progressionService.generate_progression("C",u,w,l,this.loaded_exo_params.chords_gen_params);console.log("progression => ",S);let L=this.rhythmService.generate_measure_rythm7(b,3840*l),R=this.rhythmService.generate_measure_rythm7(_,3840*l);L=this.measureSplitService.split_measures(L,3840,S),R=this.measureSplitService.split_measures(R,3840,S);let z={left:R,right:L},ne=this.melodyService.generate_voice_from_rhythm(z,l,S,this.loaded_exo_params.voices_params),Q=ne.right[ne.right.length-1].measure_idx;for(var q=ne.right.length-1;q>0;q--)if(ne.right[q].measure_idx-Q){Q=q+1;break}ne.right=ne.right.splice(0,Q+1),ne.right[ne.right.length-1].duration=3840,ne.right[ne.right.length-1].duration_name="whole",ne.right[ne.right.length-1].notes_names="C3",Q=ne.left[ne.left.length-1].measure_idx;for(var q=ne.left.length-1;q>0;q--)if(ne.left[q].measure_idx-Q){Q=q+1;break}ne.left=ne.left.splice(0,Q+1),ne.left[ne.left.length-1].duration=3840,ne.left[ne.left.length-1].duration_name="whole",ne.left[ne.left.length-1].notes_names="C3";var T=this.loaded_exo_params.measure_types_selected.get_rand_in_obj();if(T=="simple_notes_right_hand")for(let ue=0;ue<ne.left.length;ue++)ne.left[ue].is_rest=!0,ne.left[ue].is_drew=!1;else if(T=="simple_notes_left_hand")for(let ue=0;ue<ne.right.length;ue++)ne.right.is_rest=!0,ne.right.is_drew=!1;else if(T=="chords_first_beat_lh_and_notes_rh")throw"Error : chords_first_beat_lh_and_notes_rh is not done yet ;)";console.log("%c rhythm_PARAMS => ","background-color:red;",z);let se="";se=`%%stretchlast .7
`,h.voice_G&&h.voice_F?(se+=`V:PianoRightHand clef=treble down
`,se+=`V:PianoLeftHand clef=bass
`):h.voice_G?(se+=`%%staves {(PianoRightHand) }
`,se+=`V:PianoRightHand clef=treble down
`):h.voice_F&&(se+=`%%staves {(PianoLeftHand)}
`,se+=`V:PianoLeftHand clef=bass
`),se+="M:"+this.loaded_exo_params.global_gen_params.meter+`
`,se+="Q:"+this.loaded_exo_params.global_gen_params.tempo+`
`;let _e=u=="n_minor"||u=="h_minor"||u=="m_minor"?"m":"";se+="K:C"+_e;let Me=this.get_abc_voice(z.right,"G"),me=this.get_abc_voice(z.left,"F");me="[V: PianoLeftHand]  "+me,Me="[V: PianoRightHand] "+Me;let K=["Ab","A","Bb","B","C","Db","D","Eb","E","F","F#","G"].indexOf(d)-4;return i={header:se,right_hand:Me,left_hand:me,template_type:e,timed:this.loaded_exo_params.global_gen_params.timed,one_by_one:this.loaded_exo_params.notes_gen_params.one_by_one,hide_function:this.loaded_exo_params.HIDE_FUNCTION,hide_chord:this.loaded_exo_params.HIDE_CHORD,voice_G:h.voice_G,voice_F:h.voice_F,tempo:this.loaded_exo_params.global_gen_params.tempo,sound:this.loaded_exo_params.global_gen_params.sound,tona:{transpo:K,tonality:d},transpo:K,debug:this.loaded_exo_params.DEBUG_MODE},i}get_abc_voice(e,i="G"){let r={whole:"8",half:"4",quarter:"2",eights:"",sixteenth:"/2",d_whole:"12",d_half:"6",d_quarter:"3",d_eights:"3/2",d_sixteenth:"3/4"},s=960,a=1,l=0,d="|";for(let u=0;u<e.length;u++){let h=e[u],_=e[u].note,b=l%3840==0;if(b&&u<e.length&&!this.loaded_exo_params.HIDE_CHORD&&(i=="F"?d+='"_'+e[u].harmony.chord_degree+'"':d+='"'+e[u].harmony.chord_name+'"'),b==!0&&i=="F"){let w="",S=[];for(let R of h.harmony.notes_array){let z=Ro.scientificToAbcNotation(R),ne=R.match(/([ABCDEFG][#b]*)/g);S.push(R),w+=z}let L=r[h.duration_name];h.is_rest?h.is_drew?d+="z"+L:d+="x"+L:d+="["+w+"]"+L,l+=h.duration,l>=(a+1)*s&&(d+=" ",a=l/960),l%3840==0&&(d+="|")}else _.entity_type=="note"&&this.loaded_exo_params.global_gen_params.clef_G&&(h.is_rest?h.is_drew?d+="z"+h.abc_string:d+="x"+h.abc_string:h.hasOwnProperty("is_tie")&&h.is_tie=="start"?(d+="(",d+=fM.scientificToAbcNotation(_.notes_names)+r[h.duration_name]):h.hasOwnProperty("is_tie")&&h.is_tie=="end"?(d+=fM.scientificToAbcNotation(e[u-1].note.notes_names)+r[h.duration_name],d+=")"):d+=fM.scientificToAbcNotation(_.notes_names)+r[h.duration_name],l+=h.duration,l>=(a+1)*s&&(d+=" ",a=l/960),l%3840==0&&(d+="|"))}return d}static{this.\u0275fac=function(i){return new(i||t)(ht(Xi),ht(E8),ht(ku),ht(ey),ht(D8),ht(I8),ht(O8))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Uoe=["viewContainer"],F8=(()=>{class t{constructor(e,i,r,s){this.resolver=e,this.gen=i,this.res=r,this.router=s,this.template_number=0,console.log("Constructor")}ngOnInit(){console.log("init")}ngAfterViewInit(){this.res.reset(),this.res.exo=this.gen.json_generated.exo_parameters,console.log("this.gen.json_generated => ",this.gen.json_generated),this.next_template()}next_template(){if(console.log("SOMEONE'S ASKING FOR next_template============="),this.template_number>this.gen.json_generated.templates.length-1){console.log("NO MORE TEMPLATES TO SHOW : ROUTING TO RESULTS ======================"),this.router.navigate(["results"],{skipLocationChange:!0});return}switch(this.viewContainer.clear(),this.gen.json_generated.templates[this.template_number].template_type){case"template_instr_lvl1":this.componentFactory=this.resolver.resolveComponentFactory(k8);break;case"template_countdown":this.componentFactory=this.resolver.resolveComponentFactory(P8);break;case"reading_timed":this.componentFactory=this.resolver.resolveComponentFactory(Rd);break;case"reading_untimed":this.componentFactory=this.resolver.resolveComponentFactory(Rd);break;case"full_score":this.componentFactory=this.resolver.resolveComponentFactory($1);break;case"hearing":this.componentFactory=this.resolver.resolveComponentFactory(K1);break;default:debugger;break}this.componentRef=this.viewContainer.createComponent(this.componentFactory),this.componentRef.instance.receivedData=this.gen.json_generated.templates[this.template_number],this.componentRef.changeDetectorRef.detectChanges(),this.componentRef.instance.askNext.subscribe(this.animate_before_next.bind(this))}animate_before_next(e){console.log("asked for next template with event => ",e),this.componentRef.instance.askNext.unsubscribe(),e?($("#templateContainer").css("border-top-color","green"),$("#templateContainer").css("border-bottom-color","green"),$("#templateContainer").animate({opacity:.25,height:"toggle"},200,()=>{this.template_number++,this.next_template(),console.log("animate green"),$("#templateContainer").css("opacity","1"),$("#templateContainer").css("height","content"),$("#templateContainer").css("border-top-color","black"),$("#templateContainer").css("border-bottom-color","black"),$("#templateContainer").animate({height:"toggle"},100,()=>{$("#templateContainer").css("display","block")})})):($("#templateContainer").css("border-top-color","red"),$("#templateContainer").css("border-bottom-color","red"),$("#templateContainer").animate({opacity:.25,height:"toggle"},1e3,()=>{this.template_number++,this.next_template(),console.log("animate red"),$("#templateContainer").css("opacity","1"),$("#templateContainer").css("height","content"),$("#templateContainer").css("border-top-color","black"),$("#templateContainer").css("border-bottom-color","black"),$("#templateContainer").animate({height:"toggle"},100,()=>{$("#templateContainer").css("display","block")})}))}debug(e,i){this.componentRef.instance.debug_fct(e,i)}static{this.\u0275fac=function(i){return new(i||t)(Le(vl),Le(Sc),Le(ko),Le(wr))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-template-viewer"]],viewQuery:function(i,r){if(i&1&&xl(Uoe,5,hs),i&2){let s;Na(s=Va())&&(r.viewContainer=s.first)}},standalone:!1,decls:11,vars:3,consts:[["viewContainer",""],[2,"display","flex","flex-direction","column","justify-content","center","height","100vh","background-color","#343a40"],["id","templateContainer",2,"border-top","5px black solid","border-bottom","5px black solid","background-color","white"],[1,"row"],[3,"click","hidden"]],template:function(i,r){if(i&1){let s=mn();p(0,"div",1)(1,"div",2),Eh(2,null,0),m(),p(4,"div",3)(5,"button",4),J("click",function(){return pe(s),fe(r.debug([53],[60,64,67]))}),P(6," DEBUG"),m(),p(7,"button",4),J("click",function(){return pe(s),fe(r.debug([53],[]))}),P(8," DEBUG_L"),m(),p(9,"button",4),J("click",function(){return pe(s),fe(r.debug([],[60]))}),P(10," DEBUG_R"),m()()()}i&2&&(y(5),E("hidden",!r.gen.loaded_exo_params.DEBUG_MODE),y(2),E("hidden",!r.gen.loaded_exo_params.DEBUG_MODE),y(2),E("hidden",!r.gen.loaded_exo_params.DEBUG_MODE))},encapsulation:2})}}return t})();var B8=hr(gM()),_M=hr($w());var L8=(()=>{class t{constructor(e,i,r,s,a,l){this.results=e,this.router=i,this.gen=r,this.midi=s,this.zone=a,this.user=l,this.result=0,this.counter=0}ngOnInit(){console.log("this.results.getResults_chords().length => ",this.results.getResults_chords().length),console.log("this.results.getResults_notes().length => ",this.results.getResults_notes().length),!this.results.getResults_chords().length&&!this.results.getResults_notes().length&&!this.results.getResults_rhythm().length?this.result=Math.round(Math.random()*100):(this.results.compute(),this.results.getResults_rhythm().length&&(this.result=Math.round(this.results.computed_rhythm.total_accuracy*100)),this.results.getResults_chords().length&&(this.result=Math.round(this.results.computed_chords.total_accuracy*100)),this.midiNotesTab$=this.midi.notesTabSubject.subscribe(e=>{e.length&&this.zone.run(()=>{this.restart()})}))}renderChart(e){let i="computed_rhythm";this.results.getResults_chords().length&&(i="computed_chords");let r=[];for(let a of e){let l=Object.keys(a)[0];r.push({x:new Date(Date.parse(l)),y:a[l]})}console.log("data => ",r),this.create_chart(r,this.gen.loaded_exo_params.TEMPLATE).render()}ngAfterViewInit(){this.result!=0&&this.animateValue(0,this.result,1e3),this.autoFocusRestart();let e=this.gen.loaded_exo_params.TEMPLATE,i=this.user.addResults(e,this.result);console.log("results => ",i),this.renderChart(i[e])}clearResults(){let e=this.gen.loaded_exo_params.TEMPLATE;this.user.clearResults(e);let i=this.user.addResults(e,this.result);this.renderChart(i[e])}autoFocusRestart(){this.results.computed_rhythm.total_accuracy*100<90||this.results.computed_chords.total_accuracy*100<90?(0,_M.default)("#restart_button").focus():(0,_M.default)("#ok_button").focus()}ngOnDestroy(){this.midiNotesTab$.unsubscribe()}navigate(e){console.log("ROUTING FROM RESULTS========================"),this.router.navigate([e]),window.cancelAnimationFrame(this.animationFrameAnim)}restart(){this.gen.generate(),setTimeout(()=>this.router.navigate(["exo"],{skipLocationChange:!0}),100)}animateValue(e,i,r){let s=null,a=l=>{s||(s=l);let d=Math.min((l-s)/r,1);this.counter=Math.floor(d*(i-e)+e),d<1&&(this.animationFrameAnim=window.requestAnimationFrame(a))};this.animationFrameAnim=window.requestAnimationFrame(a)}create_chart(e=[],i="DEFAULT"){var r=new B8.Chart("chartContainer_computed_rhythm",{animationEnabled:!0,theme:"light2",title:{text:"Your progression at "+i.toLowerCase()},axisX:{valueFormatString:"DD MMM",crosshair:{enabled:!0,snapToDataPoint:!0}},axisY:{title:"Score",includeZero:!0,crosshair:{enabled:!0}},toolTip:{shared:!0},legend:{cursor:"pointer",verticalAlign:"bottom",horizontalAlign:"left",dockInsidePlotArea:!0},data:[{type:"line",showInLegend:!1,name:"Score",xValueFormatString:"DD MMM, YYYY",color:"#F08080",dataPoints:e}]});return r}static{this.\u0275fac=function(i){return new(i||t)(Le(ko),Le(wr),Le(Sc),Le(hi),Le(on),Le(es))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-results"]],standalone:!1,decls:12,vars:1,consts:[["id","results-page",2,"background-color","#343a40","height","100%","height","100vh","display","flex","flex-direction","column","justify-content","center"],[2,"background-color","white","border","2px solid black","display","flex","flex-direction","column","align-items","center","padding","20px","overflow-y","scroll","overflow-x","hidden","padding-top","130px"],["id","scoreBoard",1,"neon"],[2,"display","flex","flex-direction","row","z-index","100"],["id","restart_button","type","button",1,"btn","btn-primary","btn-gif","red",2,"margin","5px",3,"click"],["id","ok_button","type","button",1,"btn","btn-primary","green",2,"margin","5px",3,"click"],["id","chartContainer_computed_rhythm",2,"min-height","570px","height","570px","width","570px"],[1,"btn","btn-primary",3,"click"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"div",1)(2,"h1",2),P(3),m(),p(4,"div",3)(5,"button",4),J("click",function(){return r.restart()}),P(6," Restart "),m(),p(7,"button",5),J("click",function(){return r.navigate("select-exercise")}),P(8," Menu "),m()(),ie(9,"div",6),p(10,"button",7),J("click",function(){return r.clearResults()}),P(11,"Clear results"),m()()()),i&2&&(y(3),en(" ",r.counter,"% "))},styles:['@font-face{font-family:"Exo 2";font-style:italic;font-weight:200;src:url(https://fonts.gstatic.com/s/exo2/v25/7cH3v4okm5zmbtYtMeA0FKq0Jjg2drH0feCwhp_rpQ.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:"Exo 2";font-style:italic;font-weight:200;src:url(https://fonts.gstatic.com/s/exo2/v25/7cH3v4okm5zmbtYtMeA0FKq0Jjg2drH0feC5hp_rpQ.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:"Exo 2";font-style:italic;font-weight:200;src:url(https://fonts.gstatic.com/s/exo2/v25/7cH3v4okm5zmbtYtMeA0FKq0Jjg2drH0feCyhp_rpQ.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:"Exo 2";font-style:italic;font-weight:200;src:url(https://fonts.gstatic.com/s/exo2/v25/7cH3v4okm5zmbtYtMeA0FKq0Jjg2drH0feCzhp_rpQ.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:"Exo 2";font-style:italic;font-weight:200;src:url(https://fonts.gstatic.com/s/exo2/v25/7cH3v4okm5zmbtYtMeA0FKq0Jjg2drH0feC9hp8.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}#chartContainer_computed_chords[_ngcontent-%COMP%], #chartContainer_computed_notes[_ngcontent-%COMP%]{display:none}#scoreBoard[_ngcontent-%COMP%]{min-width:4em}#results-page[_ngcontent-%COMP%]{--neon-text-color: #f40;--neon-border-color: #08f}.neon[_ngcontent-%COMP%]{font-size:10px;font-family:"Exo 2",sans-serif;display:flex;justify-content:center;align-items:center;background:#000;background-color:#000;font-size:13rem;font-weight:200;font-style:italic;color:#fff;padding:4rem 6rem 5.5rem;border:.4rem solid #fff;border-radius:2rem;text-transform:uppercase;animation:_ngcontent-%COMP%_flicker 1.5s infinite alternate}.neon[_ngcontent-%COMP%]::-moz-selection{background-color:var(--neon-border-color);color:var(--neon-text-color)}.neon[_ngcontent-%COMP%]::selection{background-color:var(--neon-border-color);color:var(--neon-text-color)}.neon[_ngcontent-%COMP%]:focus{outline:none}@keyframes _ngcontent-%COMP%_flicker{0%,19%,21%,23%,25%,54%,56%,to{text-shadow:-.2rem -.2rem 1rem #fff,.2rem .2rem 1rem #fff,0 0 2rem var(--neon-text-color),0 0 4rem var(--neon-text-color),0 0 6rem var(--neon-text-color),0 0 8rem var(--neon-text-color),0 0 10rem var(--neon-text-color);box-shadow:0 0 .5rem #fff,inset 0 0 .5rem #fff,0 0 2rem var(--neon-border-color),inset 0 0 2rem var(--neon-border-color),0 0 4rem var(--neon-border-color),inset 0 0 4rem var(--neon-border-color)}20%,24%,55%{text-shadow:none;box-shadow:none}}']})}}return t})();var qoe=["viewContainer"];function Hoe(t,n){if(t&1&&(p(0,"option",184),P(1),m()),t&2){let e=n.$implicit;E("value",e),y(),Yt(e)}}var N8=(()=>{class t{constructor(e,i,r,s){this.gen=e,this.router=i,this.route=r,this.resolver=s,this.config={},this.tonalities=[],this.rhythm_section_to_show="rh",this.debug_mode=!1,this.template_selected="DEFAULT",this.template_options=["DEFAULT","lvl_1_0","lvl_1_1","lvl_1_2","lvl_1_3","lvl_1_4","lvl_1_5","lvl_1_6","lvl_1_7","lvl_1_8","lvl_1_9","DEBUG"],this.display_preview=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{let i=()=>{if(this.setParamsFromUrl(e),Object.keys(e).length>0){if(this.debug_mode)this.preview();else var r=this.gen.generate();e.hasOwnProperty("fastload")&&e.fastload=="true"&&this.router.navigate(["exo"],{skipLocationChange:!0})}};if(e.hasOwnProperty("debug")){this.template_selected="DEBUG",this.debug_mode=!0,this.gen.load_parameters_from_template("DEBUG",i);return}if(e.hasOwnProperty("level")){this.gen.load_parameters_from_template(e.level,i);return}else{this.gen.load_parameters_from_template("DEFAULT",i);return}})}setParamsFromUrl(e){if(e.hasOwnProperty("tempo")&&(this.gen.loaded_exo_params.global_gen_params.tempo=Number(e.tempo)),e.hasOwnProperty("level")&&e.level=="FULL_SCORE"&&(e.hasOwnProperty("score")?this.gen.loaded_exo_params.FILE=e.score:(this.gen.loaded_exo_params.FILE="rag",console.warn("No score provided !"))),e.hasOwnProperty("ex_type")){let i=e.ex_type.toString().split("").map(r=>!!Number(r));i.length==3&&(this.gen.loaded_exo_params.exercise_types_selected.reading_untimed=i[0],this.gen.loaded_exo_params.exercise_types_selected.reading_timed=i[1],this.gen.loaded_exo_params.exercise_types_selected.hearing=i[2])}if(e.hasOwnProperty("meas_type")){let i=e.meas_type.toString().split("").map(r=>!!Number(r));i.length==5&&(this.gen.loaded_exo_params.measure_types_selected.simple_notes_right_hand=i[0],this.gen.loaded_exo_params.measure_types_selected.simple_notes_left_hand=i[1],this.gen.loaded_exo_params.measure_types_selected.simple_notes_both_hands=i[2],this.gen.loaded_exo_params.measure_types_selected.chords_first_beat_lh_and_notes_rh=i[3],this.gen.loaded_exo_params.measure_types_selected.intervals=i[4])}}ngAfterViewInit(){$("#start_button").focus()}start(){let e=this.gen.generate();console.log("json generated exercise => ",e),this.router.navigate(["exo"],{skipLocationChange:!0})}preview(){this.display_preview=!0;let e=this.gen.generate({add_instructions:!1});this.display_in_same_window()}load_template(e){console.log("loading template => ",e),this.gen.load_parameters_from_template(e)}log_template(){console.clear(),console.log(`====================================
`),console.log(JSON.stringify(this.gen.loaded_exo_params)),console.log(`
====================================`)}display_in_same_window(){this.viewContainer.clear(),this.gen.json_generated.templates[0].template_type;let e=this.resolver.resolveComponentFactory(Rd),i=this.viewContainer.createComponent(e);i.instance.receivedData=this.gen.json_generated.templates[0],i.changeDetectorRef.detectChanges(),setTimeout(()=>{$("#templateContainer").scrollTop($("#abcjs-wrapper").get(0).offsetTop+67)},200)}static{this.\u0275fac=function(i){return new(i||t)(Le(Sc),Le(wr),Le(Qi),Le(vl))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-page-generator"]],viewQuery:function(i,r){if(i&1&&xl(qoe,5,hs),i&2){let s;Na(s=Va())&&(r.viewContainer=s.first)}},standalone:!1,decls:612,vars:122,consts:[["viewContainer",""],[1,"app-page"],["id","templateContainer",2,"width","100%","overflow-x","hidden",3,"hidden"],[1,"fa","fa-times",2,"position","fixed","right","30px","font-size","3em","z-index","100","cursor","pointer",3,"click"],["width","100%",2,"height","655px"],["id","start_preview_row"],["id","start_button","autofocus","",1,"btn","btn-primary","mx-3",3,"click"],["id","preview_button","autofocus","",1,"btn","btn-primary","mx-3",3,"click"],[1,"row"],[1,"p-2","card","col-6"],["for","midi_selector"],["id","midi_selector"],["for","template_selector"],["id","template_selector",2,"width","186px",3,"change","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-primary","mb-1","mx-3",3,"click"],["for","debug_mode"],["type","checkbox","id","debug_mode",1,"big-checkbox",3,"ngModelChange","ngModel"],["for","hidechord"],["type","checkbox","id","hidechord","name","hidechord",1,"big-checkbox",3,"ngModelChange","ngModel"],["for","hidefunc"],["type","checkbox","id","hidefunc","name","hidefunc",1,"big-checkbox",3,"ngModelChange","ngModel"],["for","sound"],["type","checkbox","id","sound","name","sound",1,"big-checkbox",3,"ngModelChange","ngModel"],[1,"col-6","card"],[1,"h5"],["for","duration"],["type","number","min","1","max","10","value","1","id","duration",3,"ngModelChange","ngModel"],["for","measures"],["type","number","min","1","max","10","value","1","id","measures",3,"ngModelChange","ngModel"],["for","tempo"],["type","number","min","50","max","160","value","90","id","tempo",3,"ngModelChange","ngModel"],["for","meter"],["id","meter","disabled","disabled",3,"ngModelChange","ngModel"],["for","timed"],["type","checkbox","id","timed",1,"big-checkbox",3,"ngModelChange","ngModel"],[1,"row","d-flex"],[1,"tonalities","p-2"],["type","checkbox","name","tona_Bb","id","tona_Bb",3,"ngModelChange","ngModel"],["for","tona_Bb"],["type","checkbox","name","tona_F","id","tona_F",3,"ngModelChange","ngModel"],["for","tona_F"],["type","checkbox","name","tona_C","id","tona_C",3,"ngModelChange","ngModel"],["for","tona_C"],["type","checkbox","name","tona_G","id","tona_G",3,"ngModelChange","ngModel"],["for","tona_G"],["type","checkbox","name","tona_D","id","tona_D",3,"ngModelChange","ngModel"],["for","tona_D"],["type","checkbox","name","tona_E","id","tona_E",3,"ngModelChange","ngModel"],["for","tona_E"],["for","tona_major"],["type","checkbox","id","tona_major",1,"big-checkbox",3,"ngModelChange","ngModel"],["for","tona_h_minor"],["type","checkbox","id","tona_h_minor",1,"big-checkbox",3,"ngModelChange","ngModel"],["for","tona_n_minor"],["type","checkbox","id","tona_n_minor",1,"big-checkbox",3,"ngModelChange","ngModel"],["for","tona_m_minor"],["type","checkbox","id","tona_m_minor",1,"big-checkbox",3,"ngModelChange","ngModel"],["type","checkbox","id","sp_n_l",1,"big-checkbox",3,"ngModelChange","ngModel"],["for","sp_n_l",1,"p-2"],["type","checkbox","id","sp_n_r",1,"big-checkbox",3,"ngModelChange","ngModel"],["for","sp_n_r",1,"p-2"],["type","checkbox","id","b_hds",1,"big-checkbox",3,"ngModelChange","ngModel"],["for","b_hds",1,"p-2"],["type","checkbox","id","chrds_lh_rh",1,"big-checkbox",3,"ngModelChange","ngModel"],["for","chrds_lh_rh",1,"p-2"],["type","checkbox","id","intervals",1,"big-checkbox"],["for","intervals",1,"p-2"],[1,"card","col-6"],["for","chords",1,"p-2"],["type","checkbox","id","chords",1,"big-checkbox",3,"ngModelChange","ngModel"],[1,"col-12","card"],[1,"col-6","card",3,"click"],[1,"row","border-top-0","card",3,"hidden"],[1,"slidecontainer"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-01.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-09.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-17.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-02.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-10.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-18.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-03.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-11.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-19.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-04.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-12.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-20.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-05.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-13.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-21.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-06.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-14.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-22.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-07.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-15.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-23.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-08.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-16.png')",3,"ngModelChange","ngModel"],["type","range","min","0","max","100","id","myRange",1,"slider",2,"background-image","url('../../../../assets/img/rythms/Rhythm-4-1-24.png')",3,"ngModelChange","ngModel"],[1,"row","card"],[1,"h5","col-12"],[1,"col-12"],[1,"p-2"],["type","checkbox","name","inversion_1",3,"ngModelChange","ngModel"],["for","#inversion_1",1,"px-2"],["type","checkbox","name","inversion_2",3,"ngModelChange","ngModel"],["for","#inversion_2",1,"px-2"],["type","checkbox","name","inversion_3",3,"ngModelChange","ngModel"],["for","#inversion_3",1,"px-2"],["type","checkbox","name","inversion_4",3,"ngModelChange","ngModel"],["for","#inversion_4",1,"px-2"],[1,"card","col-3"],["for","maj_c_type_maj",1,"px-2"],["type","checkbox","id","maj_c_type_maj",3,"ngModelChange","ngModel"],["for","maj_c_type_min",1,"px-2"],["type","checkbox","id","maj_c_type_min",3,"ngModelChange","ngModel"],["for","maj_c_type_dom",1,"px-2"],["type","checkbox","id","maj_c_type_dom",3,"ngModelChange","ngModel"],["for","maj_c_type_7",1,"px-2"],["type","checkbox","id","maj_c_type_7",3,"ngModelChange","ngModel"],["for","maj_c_type_Maj7",1,"px-2"],["type","checkbox","id","maj_c_type_Maj7",3,"ngModelChange","ngModel"],["for","maj_c_type_dim",1,"px-2"],["type","checkbox","id","maj_c_type_dim",3,"ngModelChange","ngModel"],["for","maj_c_type_hdim",1,"px-2"],["type","checkbox","id","maj_c_type_hdim",3,"ngModelChange","ngModel"],["for","harm_c_type_maj",1,"px-2"],["type","checkbox","id","harm_c_type_maj",3,"ngModelChange","ngModel"],["for","harm_c_type_min",1,"px-2"],["type","checkbox","id","harm_c_type_min",3,"ngModelChange","ngModel"],["for","harm_c_type_dom",1,"px-2"],["type","checkbox","id","harm_c_type_dom",3,"ngModelChange","ngModel"],["for","harm_c_type_7",1,"px-2"],["type","checkbox","id","harm_c_type_7",3,"ngModelChange","ngModel"],["for","harm_c_type_Maj7",1,"px-2"],["type","checkbox","id","harm_c_type_Maj7",3,"ngModelChange","ngModel"],["for","harm_c_type_dim",1,"px-2"],["type","checkbox","id","harm_c_type_dim",3,"ngModelChange","ngModel"],["for","harm_c_type_dim7",1,"px-2"],["type","checkbox","id","harm_c_type_dim7",3,"ngModelChange","ngModel"],["for","harm_c_type_hdim",1,"px-2"],["type","checkbox","id","harm_c_type_hdim",3,"ngModelChange","ngModel"],["for","harm_c_type_aug",1,"px-2"],["type","checkbox","id","harm_c_type_aug",3,"ngModelChange","ngModel"],["for","harm_c_type_minmaj7",1,"px-2"],["type","checkbox","id","harm_c_type_minmaj7",3,"ngModelChange","ngModel"],["for","harm_c_type_augmaj7",1,"px-2"],["type","checkbox","id","harm_c_type_augmaj7",3,"ngModelChange","ngModel"],["for","nat_c_type_maj",1,"px-2"],["type","checkbox","id","nat_c_type_maj",3,"ngModelChange","ngModel"],["for","nat_c_type_min",1,"px-2"],["type","checkbox","id","nat_c_type_min",3,"ngModelChange","ngModel"],["for","nat_c_type_dom",1,"px-2"],["type","checkbox","id","nat_c_type_dom",3,"ngModelChange","ngModel"],["for","nat_c_type_7",1,"px-2"],["type","checkbox","id","nat_c_type_7",3,"ngModelChange","ngModel"],["for","nat_c_type_Maj7",1,"px-2"],["type","checkbox","id","nat_c_type_Maj7",3,"ngModelChange","ngModel"],["for","nat_c_type_dim",1,"px-2"],["type","checkbox","id","nat_c_type_dim",3,"ngModelChange","ngModel"],[1,"card","d-inline-flex","col-3"],["type","checkbox","id","mel_c_type_maj",3,"ngModelChange","ngModel"],["for","mel_c_type_maj",1,"px-2"],["type","checkbox","id","mel_c_type_min",3,"ngModelChange","ngModel"],["for","mel_c_type_min",1,"px-2"],["type","checkbox","id","mel_c_type_dom",3,"ngModelChange","ngModel"],["for","mel_c_type_dom",1,"px-2"],["type","checkbox","id","mel_c_type_7",3,"ngModelChange","ngModel"],["for","mel_c_type_7",1,"px-2"],["type","checkbox","id","mel_c_type_dim",3,"ngModelChange","ngModel"],["for","mel_c_type_dim",1,"px-2"],["type","checkbox","id","mel_c_type_hdim",3,"ngModelChange","ngModel"],["for","mel_c_type_hdim",1,"px-2"],["type","checkbox","id","mel_c_type_aug",3,"ngModelChange","ngModel"],["for","mel_c_type_aug",1,"px-2"],["type","checkbox","id","mel_c_type_minmaj7",3,"ngModelChange","ngModel"],["for","mel_c_type_minmaj7",1,"px-2"],["type","checkbox","id","mel_c_type_augmaj7",3,"ngModelChange","ngModel"],["for","mel_c_type_augmaj7",1,"px-2"],[1,"exercise_type"],["for","arpeggios",1,"p-2"],["type","checkbox","name","arpeggios",1,"big-checkbox",3,"ngModelChange","ngModel"],["for","one_by_one",1,"p-2"],["type","checkbox","name","one_by_one",1,"big-checkbox",3,"ngModelChange","ngModel"],[3,"value"]],template:function(i,r){if(i&1){let s=mn();p(0,"div",1)(1,"div",2)(2,"i",3),J("click",function(){return pe(s),fe(r.display_preview=!1)}),m(),p(3,"div",4),Eh(4,null,0),m()(),p(6,"div",5)(7,"button",6),J("click",function(){return pe(s),fe(r.start())}),P(8,"Start"),m(),p(9,"button",7),J("click",function(){return pe(s),fe(r.preview())}),P(10,"Preview"),m()(),ie(11,"br"),p(12,"div",8)(13,"div",9)(14,"table")(15,"tr")(16,"td")(17,"label",10),P(18,"MIDI input"),m()(),p(19,"td"),ie(20,"app-midi-selector",11),m()(),p(21,"tr")(22,"td")(23,"label",12),P(24,"Load template"),m()(),p(25,"td")(26,"select",13),J("change",function(){return pe(s),fe(r.load_template(r.template_selected))}),Fe("ngModelChange",function(l){return pe(s),Be(r.template_selected,l)||(r.template_selected=l),fe(l)}),Wt(27,Hoe,2,2,"option",14),m(),p(28,"button",15),J("click",function(){return pe(s),fe(r.log_template())}),P(29,"LOG"),m()()(),p(30,"tr")(31,"td")(32,"label",16),P(33,"Debug mode"),m()(),p(34,"td")(35,"input",17),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.DEBUG_MODE,l)||(r.gen.loaded_exo_params.DEBUG_MODE=l),fe(l)}),m()()(),p(36,"tr")(37,"td")(38,"label",18),P(39,"Hide chords"),m()(),p(40,"td")(41,"input",19),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.HIDE_CHORD,l)||(r.gen.loaded_exo_params.HIDE_CHORD=l),fe(l)}),m()()(),p(42,"tr")(43,"td")(44,"label",20),P(45,"Hide functions"),m()(),p(46,"td")(47,"input",21),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.HIDE_FUNCTION,l)||(r.gen.loaded_exo_params.HIDE_FUNCTION=l),fe(l)}),m()()(),p(48,"tr")(49,"td")(50,"label",22),P(51,"Sound"),m()(),p(52,"td")(53,"input",23),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.global_gen_params.sound,l)||(r.gen.loaded_exo_params.global_gen_params.sound=l),fe(l)}),m()()()()(),p(54,"div",24)(55,"p",25),P(56,"Duration"),m(),p(57,"table")(58,"tr")(59,"td")(60,"label",26),P(61,"Number of slides"),m()(),p(62,"td")(63,"input",27),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.global_gen_params.duration,l)||(r.gen.loaded_exo_params.global_gen_params.duration=l),fe(l)}),m()()(),p(64,"tr")(65,"td")(66,"label",28),P(67,"Measures per slides"),m()(),p(68,"td")(69,"input",29),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.global_gen_params.measures,l)||(r.gen.loaded_exo_params.global_gen_params.measures=l),fe(l)}),m()()(),p(70,"tr")(71,"td")(72,"label",30),P(73,"Tempo"),m()(),p(74,"td")(75,"input",31),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.global_gen_params.tempo,l)||(r.gen.loaded_exo_params.global_gen_params.tempo=l),fe(l)}),m()()(),p(76,"tr")(77,"td")(78,"label",32),P(79,"Meter"),m()(),p(80,"td")(81,"input",33),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.global_gen_params.meter,l)||(r.gen.loaded_exo_params.global_gen_params.meter=l),fe(l)}),m()()(),p(82,"tr")(83,"td")(84,"label",34),P(85,"Timed"),m()(),p(86,"td")(87,"input",35),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.global_gen_params.timed,l)||(r.gen.loaded_exo_params.global_gen_params.timed=l),fe(l)}),m()()()()()(),p(88,"div",36)(89,"div",24)(90,"p",25),P(91,"Tonalities"),m(),p(92,"div",37)(93,"input",38),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.tonalities_selected.Bb,l)||(r.gen.loaded_exo_params.tonalities_selected.Bb=l),fe(l)}),m(),p(94,"label",39),P(95,"Bb"),m(),p(96,"input",40),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.tonalities_selected.F,l)||(r.gen.loaded_exo_params.tonalities_selected.F=l),fe(l)}),m(),p(97,"label",41),P(98,"F"),m(),p(99,"input",42),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.tonalities_selected.C,l)||(r.gen.loaded_exo_params.tonalities_selected.C=l),fe(l)}),m(),p(100,"label",43),P(101,"C"),m(),p(102,"input",44),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.tonalities_selected.G,l)||(r.gen.loaded_exo_params.tonalities_selected.G=l),fe(l)}),m(),p(103,"label",45),P(104,"G"),m(),p(105,"input",46),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.tonalities_selected.D,l)||(r.gen.loaded_exo_params.tonalities_selected.D=l),fe(l)}),m(),p(106,"label",47),P(107,"D"),m(),p(108,"input",48),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.tonalities_selected.E,l)||(r.gen.loaded_exo_params.tonalities_selected.E=l),fe(l)}),m(),p(109,"label",49),P(110,"E"),m()()(),p(111,"div",24)(112,"p",25),P(113,"Modes"),m(),p(114,"table")(115,"tr")(116,"td")(117,"label",50),P(118,"Major"),m()(),p(119,"td")(120,"input",51),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.modes_selected.major,l)||(r.gen.loaded_exo_params.modes_selected.major=l),fe(l)}),m()()(),p(121,"tr")(122,"td")(123,"label",52),P(124,"Harmonic minor"),m()(),p(125,"td")(126,"input",53),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.modes_selected.h_minor,l)||(r.gen.loaded_exo_params.modes_selected.h_minor=l),fe(l)}),m()()(),p(127,"tr")(128,"td")(129,"label",54),P(130,"Natural minor"),m()(),p(131,"td")(132,"input",55),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.modes_selected.n_minor,l)||(r.gen.loaded_exo_params.modes_selected.n_minor=l),fe(l)}),m()()(),p(133,"tr")(134,"td")(135,"label",56),P(136,"Melodic minor"),m()(),p(137,"td")(138,"input",57),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.modes_selected.m_minor,l)||(r.gen.loaded_exo_params.modes_selected.m_minor=l),fe(l)}),m()()()()()(),ie(139,"div"),p(140,"div",8)(141,"div",24)(142,"p",25),P(143,"Measure types"),m(),p(144,"table")(145,"tr")(146,"td")(147,"input",58),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.measure_types_selected.simple_notes_left_hand,l)||(r.gen.loaded_exo_params.measure_types_selected.simple_notes_left_hand=l),fe(l)}),m()(),p(148,"td")(149,"label",59),P(150,"Simple notes left hand"),m()()(),p(151,"tr")(152,"td")(153,"input",60),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.measure_types_selected.simple_notes_right_hand,l)||(r.gen.loaded_exo_params.measure_types_selected.simple_notes_right_hand=l),fe(l)}),m()(),p(154,"td")(155,"label",61),P(156,"Simple notes right hand"),m()()(),p(157,"tr")(158,"td")(159,"input",62),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.measure_types_selected.simple_notes_both_hands,l)||(r.gen.loaded_exo_params.measure_types_selected.simple_notes_both_hands=l),fe(l)}),m()(),p(160,"td")(161,"label",63),P(162,"Simple both hands"),m()()(),p(163,"tr")(164,"td")(165,"input",64),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.measure_types_selected.chords_first_beat_lh_and_notes_rh,l)||(r.gen.loaded_exo_params.measure_types_selected.chords_first_beat_lh_and_notes_rh=l),fe(l)}),m()(),p(166,"td")(167,"label",65),P(168,"Chords on first beat left hand with arpeggio"),m()()(),p(169,"tr")(170,"td"),ie(171,"input",66),m(),p(172,"td")(173,"label",67),P(174,"Intervals"),m()()()()(),p(175,"div",68)(176,"p",25),P(177,"Exercice type"),m(),p(178,"table")(179,"tr")(180,"td")(181,"label",69),P(182,"Reading untimed"),m()(),p(183,"td")(184,"input",70),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.exercise_types_selected.reading_untimed,l)||(r.gen.loaded_exo_params.exercise_types_selected.reading_untimed=l),fe(l)}),m()()(),p(185,"tr")(186,"td")(187,"label",69),P(188,"Reading timed"),m()(),p(189,"td")(190,"input",70),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.exercise_types_selected.reading_timed,l)||(r.gen.loaded_exo_params.exercise_types_selected.reading_timed=l),fe(l)}),m()()(),p(191,"tr")(192,"td")(193,"label",69),P(194,"Hearing"),m()(),p(195,"td")(196,"input",70),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.exercise_types_selected.hearing,l)||(r.gen.loaded_exo_params.exercise_types_selected.hearing=l),fe(l)}),m()()()()()(),p(197,"div",71)(198,"p",25),P(199,"Rhythm types"),m(),p(200,"div",8)(201,"div",72),J("click",function(){return pe(s),fe(r.rhythm_section_to_show="lh")}),P(202,"Left Hand"),m(),p(203,"div",72),J("click",function(){return pe(s),fe(r.rhythm_section_to_show="rh")}),P(204,"Right Hand"),m()(),p(205,"div",73)(206,"table")(207,"tr")(208,"td")(209,"div",74)(210,"input",75),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[0].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[0].proba=l),fe(l)}),m()()(),p(211,"td")(212,"div",74)(213,"input",76),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[8].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[8].proba=l),fe(l)}),m()()(),p(214,"td")(215,"div",74)(216,"input",77),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[16].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[16].proba=l),fe(l)}),m()()()(),p(217,"tr")(218,"td")(219,"div",74)(220,"input",78),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[1].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[1].proba=l),fe(l)}),m()()(),p(221,"td")(222,"div",74)(223,"input",79),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[9].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[9].proba=l),fe(l)}),m()()(),p(224,"td")(225,"div",74)(226,"input",80),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[17].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[17].proba=l),fe(l)}),m()()()(),p(227,"tr")(228,"td")(229,"div",74)(230,"input",81),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[2].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[2].proba=l),fe(l)}),m()()(),p(231,"td")(232,"div",74)(233,"input",82),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[10].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[10].proba=l),fe(l)}),m()()(),p(234,"td")(235,"div",74)(236,"input",83),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[18].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[18].proba=l),fe(l)}),m()()()(),p(237,"tr")(238,"td")(239,"div",74)(240,"input",84),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[3].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[3].proba=l),fe(l)}),m()()(),p(241,"td")(242,"div",74)(243,"input",85),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[11].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[11].proba=l),fe(l)}),m()()(),p(244,"td")(245,"div",74)(246,"input",86),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[19].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[19].proba=l),fe(l)}),m()()()(),p(247,"tr")(248,"td")(249,"div",74)(250,"input",87),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[4].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[4].proba=l),fe(l)}),m()()(),p(251,"td")(252,"div",74)(253,"input",88),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[12].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[12].proba=l),fe(l)}),m()()(),p(254,"td")(255,"div",74)(256,"input",89),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[20].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[20].proba=l),fe(l)}),m()()()(),p(257,"tr")(258,"td")(259,"div",74)(260,"input",90),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[5].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[5].proba=l),fe(l)}),m()()(),p(261,"td")(262,"div",74)(263,"input",91),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[13].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[13].proba=l),fe(l)}),m()()(),p(264,"td")(265,"div",74)(266,"input",92),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[21].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[21].proba=l),fe(l)}),m()()()(),p(267,"tr")(268,"td")(269,"div",74)(270,"input",93),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[6].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[6].proba=l),fe(l)}),m()()(),p(271,"td")(272,"div",74)(273,"input",94),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[14].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[14].proba=l),fe(l)}),m()()(),p(274,"td")(275,"div",74)(276,"input",95),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[22].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[22].proba=l),fe(l)}),m()()()(),p(277,"tr")(278,"td")(279,"div",74)(280,"input",96),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[7].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[7].proba=l),fe(l)}),m()()(),p(281,"td")(282,"div",74)(283,"input",97),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[15].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[15].proba=l),fe(l)}),m()()(),p(284,"td")(285,"div",74)(286,"input",98),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.right_hand[23].proba,l)||(r.gen.loaded_exo_params.rhythm_params.right_hand[23].proba=l),fe(l)}),m()()()()()(),p(287,"div",73)(288,"table")(289,"tr")(290,"td")(291,"div",74)(292,"input",75),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[0].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[0].proba=l),fe(l)}),m()()(),p(293,"td")(294,"div",74)(295,"input",76),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[8].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[8].proba=l),fe(l)}),m()()(),p(296,"td")(297,"div",74)(298,"input",77),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[16].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[16].proba=l),fe(l)}),m()()()(),p(299,"tr")(300,"td")(301,"div",74)(302,"input",78),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[1].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[1].proba=l),fe(l)}),m()()(),p(303,"td")(304,"div",74)(305,"input",79),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[9].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[9].proba=l),fe(l)}),m()()(),p(306,"td")(307,"div",74)(308,"input",80),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[17].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[17].proba=l),fe(l)}),m()()()(),p(309,"tr")(310,"td")(311,"div",74)(312,"input",81),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[2].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[2].proba=l),fe(l)}),m()()(),p(313,"td")(314,"div",74)(315,"input",82),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[10].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[10].proba=l),fe(l)}),m()()(),p(316,"td")(317,"div",74)(318,"input",83),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[18].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[18].proba=l),fe(l)}),m()()()(),p(319,"tr")(320,"td")(321,"div",74)(322,"input",84),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[3].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[3].proba=l),fe(l)}),m()()(),p(323,"td")(324,"div",74)(325,"input",85),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[11].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[11].proba=l),fe(l)}),m()()(),p(326,"td")(327,"div",74)(328,"input",86),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[19].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[19].proba=l),fe(l)}),m()()()(),p(329,"tr")(330,"td")(331,"div",74)(332,"input",87),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[4].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[4].proba=l),fe(l)}),m()()(),p(333,"td")(334,"div",74)(335,"input",88),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[12].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[12].proba=l),fe(l)}),m()()(),p(336,"td")(337,"div",74)(338,"input",89),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[20].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[20].proba=l),fe(l)}),m()()()(),p(339,"tr")(340,"td")(341,"div",74)(342,"input",90),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[5].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[5].proba=l),fe(l)}),m()()(),p(343,"td")(344,"div",74)(345,"input",91),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[13].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[13].proba=l),fe(l)}),m()()(),p(346,"td")(347,"div",74)(348,"input",92),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[21].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[21].proba=l),fe(l)}),m()()()(),p(349,"tr")(350,"td")(351,"div",74)(352,"input",93),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[6].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[6].proba=l),fe(l)}),m()()(),p(353,"td")(354,"div",74)(355,"input",94),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[14].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[14].proba=l),fe(l)}),m()()(),p(356,"td")(357,"div",74)(358,"input",95),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[22].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[22].proba=l),fe(l)}),m()()()(),p(359,"tr")(360,"td")(361,"div",74)(362,"input",96),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[7].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[7].proba=l),fe(l)}),m()()(),p(363,"td")(364,"div",74)(365,"input",97),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[15].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[15].proba=l),fe(l)}),m()()(),p(366,"td")(367,"div",74)(368,"input",98),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.rhythm_params.left_hand[23].proba,l)||(r.gen.loaded_exo_params.rhythm_params.left_hand[23].proba=l),fe(l)}),m()()()()()()(),p(369,"div",99)(370,"p",100),P(371,"Chords parameters"),m(),p(372,"div",101)(373,"span",102),P(374,"Inversions:"),m(),p(375,"span")(376,"input",103),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.inversions._one,l)||(r.gen.loaded_exo_params.chords_gen_params.inversions._one=l),fe(l)}),m(),p(377,"label",104),P(378,"1"),m(),p(379,"input",105),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.inversions._two,l)||(r.gen.loaded_exo_params.chords_gen_params.inversions._two=l),fe(l)}),m(),p(380,"label",106),P(381,"2"),m(),p(382,"input",107),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.inversions._three,l)||(r.gen.loaded_exo_params.chords_gen_params.inversions._three=l),fe(l)}),m(),p(383,"label",108),P(384,"3"),m(),p(385,"input",109),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.inversions._four,l)||(r.gen.loaded_exo_params.chords_gen_params.inversions._four=l),fe(l)}),m(),p(386,"label",110),P(387,"4"),m()()(),p(388,"div",8)(389,"div",111)(390,"span",102),P(391,"Major types:"),m(),p(392,"table")(393,"tr")(394,"td")(395,"label",112),P(396,"Major"),m()(),p(397,"td")(398,"input",113),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_major.major,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_major.major=l),fe(l)}),m()()(),p(399,"tr")(400,"td")(401,"label",114),P(402,"Minor"),m()(),p(403,"td")(404,"input",115),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_major.minor,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_major.minor=l),fe(l)}),m()()(),p(405,"tr")(406,"td")(407,"label",116),P(408,"Dominant"),m()(),p(409,"td")(410,"input",117),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_major.dominant,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_major.dominant=l),fe(l)}),m()()(),p(411,"tr")(412,"td")(413,"label",118),P(414,"Minor 7"),m()(),p(415,"td")(416,"input",119),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_major.minor7,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_major.minor7=l),fe(l)}),m()()(),p(417,"tr")(418,"td")(419,"label",120),P(420,"Maj7"),m()(),p(421,"td")(422,"input",121),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_major.maj7,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_major.maj7=l),fe(l)}),m()()(),p(423,"tr")(424,"td")(425,"label",122),P(426,"Diminished"),m()(),p(427,"td")(428,"input",123),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_major.dim,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_major.dim=l),fe(l)}),m()()(),p(429,"tr")(430,"td")(431,"label",124),P(432,"Half diminished"),m()(),p(433,"td")(434,"input",125),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_major.hdim,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_major.hdim=l),fe(l)}),m()()()()(),p(435,"div",111)(436,"span",102),P(437,"Harmonic minor types:"),m(),p(438,"table")(439,"tr")(440,"td")(441,"label",126),P(442,"Major"),m()(),p(443,"td")(444,"input",127),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.major,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.major=l),fe(l)}),m()()(),p(445,"tr")(446,"td")(447,"label",128),P(448,"Minor"),m()(),p(449,"td")(450,"input",129),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.minor,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.minor=l),fe(l)}),m()()(),p(451,"tr")(452,"td")(453,"label",130),P(454,"Dominant"),m()(),p(455,"td")(456,"input",131),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.dominant,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.dominant=l),fe(l)}),m()()(),p(457,"tr")(458,"td")(459,"label",132),P(460,"Minor 7"),m()(),p(461,"td")(462,"input",133),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.minor7,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.minor7=l),fe(l)}),m()()(),p(463,"tr")(464,"td")(465,"label",134),P(466,"Maj7"),m()(),p(467,"td")(468,"input",135),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.maj7,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.maj7=l),fe(l)}),m()()(),p(469,"tr")(470,"td")(471,"label",136),P(472,"Diminished"),m()(),p(473,"td")(474,"input",137),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.dim,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.dim=l),fe(l)}),m()()(),p(475,"tr")(476,"td")(477,"label",138),P(478,"Diminished seventh"),m()(),p(479,"td")(480,"input",139),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.dim7,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.dim7=l),fe(l)}),m()()(),p(481,"tr")(482,"td")(483,"label",140),P(484,"Half diminished"),m()(),p(485,"td")(486,"input",141),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.hdim,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.hdim=l),fe(l)}),m()()(),p(487,"tr")(488,"td")(489,"label",142),P(490,"Augmented"),m()(),p(491,"td")(492,"input",143),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.aug,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.aug=l),fe(l)}),m()()(),p(493,"tr")(494,"td")(495,"label",144),P(496,"Minor major 7"),m()(),p(497,"td")(498,"input",145),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.mMaj7,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.mMaj7=l),fe(l)}),m()()(),p(499,"tr")(500,"td")(501,"label",146),P(502,"Augmented major 7"),m()(),p(503,"td")(504,"input",147),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.augMaj7,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.augMaj7=l),fe(l)}),m()()()()(),p(505,"div",111)(506,"span",102),P(507,"Natural minor types:"),m(),p(508,"table")(509,"tr")(510,"td")(511,"label",148),P(512,"Major"),m()(),p(513,"td")(514,"input",149),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.major,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.major=l),fe(l)}),m()()(),p(515,"tr")(516,"td")(517,"label",150),P(518,"Minor"),m()(),p(519,"td")(520,"input",151),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.minor,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.minor=l),fe(l)}),m()()(),p(521,"tr")(522,"td")(523,"label",152),P(524,"Dominant"),m()(),p(525,"td")(526,"input",153),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.dominant,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.dominant=l),fe(l)}),m()()(),p(527,"tr")(528,"td")(529,"label",154),P(530,"Minor 7"),m()(),p(531,"td")(532,"input",155),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.minor7,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.minor7=l),fe(l)}),m()()(),p(533,"tr")(534,"td")(535,"label",156),P(536,"Maj7"),m()(),p(537,"td")(538,"input",157),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.maj7,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.maj7=l),fe(l)}),m()()(),p(539,"tr")(540,"td")(541,"label",158),P(542,"Diminished"),m()(),p(543,"td")(544,"input",159),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.dim,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.dim=l),fe(l)}),m()()()()(),p(545,"div",160)(546,"span",102),P(547,"Melodic minor types:"),m(),p(548,"table")(549,"tr")(550,"td")(551,"input",161),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.major,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.major=l),fe(l)}),m()(),p(552,"td")(553,"label",162),P(554,"Major"),m()()(),p(555,"tr")(556,"td")(557,"input",163),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.minor,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.minor=l),fe(l)}),m()(),p(558,"td")(559,"label",164),P(560,"Minor"),m()()(),p(561,"tr")(562,"td")(563,"input",165),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.dominant,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.dominant=l),fe(l)}),m()(),p(564,"td")(565,"label",166),P(566,"Dominant"),m()()(),p(567,"tr")(568,"td")(569,"input",167),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.minor7,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.minor7=l),fe(l)}),m()(),p(570,"td")(571,"label",168),P(572,"Minor 7"),m()()(),p(573,"tr")(574,"td")(575,"input",169),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.dim,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.dim=l),fe(l)}),m()(),p(576,"td")(577,"label",170),P(578,"Diminished"),m()()(),p(579,"tr")(580,"td")(581,"input",171),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.hdim,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.hdim=l),fe(l)}),m()(),p(582,"td")(583,"label",172),P(584,"Half diminished"),m()()(),p(585,"tr")(586,"td")(587,"input",173),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.aug,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.aug=l),fe(l)}),m()(),p(588,"td")(589,"label",174),P(590,"Augmented"),m()()(),p(591,"tr")(592,"td")(593,"input",175),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.mMaj7,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.mMaj7=l),fe(l)}),m()(),p(594,"td")(595,"label",176),P(596,"Minor major 7"),m()()(),p(597,"tr")(598,"td")(599,"input",177),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.augMaj7,l)||(r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.augMaj7=l),fe(l)}),m()(),p(600,"td")(601,"label",178),P(602,"Augmented major 7"),m()()()()()()(),p(603,"div",179)(604,"div")(605,"label",180),P(606,"Arpeggios : "),m(),p(607,"input",181),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.notes_gen_params.arpeggios,l)||(r.gen.loaded_exo_params.notes_gen_params.arpeggios=l),fe(l)}),m(),p(608,"label",182),P(609,"One by one notes : "),m(),p(610,"input",183),Fe("ngModelChange",function(l){return pe(s),Be(r.gen.loaded_exo_params.notes_gen_params.one_by_one,l)||(r.gen.loaded_exo_params.notes_gen_params.one_by_one=l),fe(l)}),m()()(),ie(611,"div",179),m()}i&2&&(y(),E("hidden",!r.display_preview),y(25),Oe("ngModel",r.template_selected),y(),E("ngForOf",r.template_options),y(8),Oe("ngModel",r.gen.loaded_exo_params.DEBUG_MODE),y(6),Oe("ngModel",r.gen.loaded_exo_params.HIDE_CHORD),y(6),Oe("ngModel",r.gen.loaded_exo_params.HIDE_FUNCTION),y(6),Oe("ngModel",r.gen.loaded_exo_params.global_gen_params.sound),y(10),Oe("ngModel",r.gen.loaded_exo_params.global_gen_params.duration),y(6),Oe("ngModel",r.gen.loaded_exo_params.global_gen_params.measures),y(6),Oe("ngModel",r.gen.loaded_exo_params.global_gen_params.tempo),y(6),Oe("ngModel",r.gen.loaded_exo_params.global_gen_params.meter),y(6),Oe("ngModel",r.gen.loaded_exo_params.global_gen_params.timed),y(6),Oe("ngModel",r.gen.loaded_exo_params.tonalities_selected.Bb),y(3),Oe("ngModel",r.gen.loaded_exo_params.tonalities_selected.F),y(3),Oe("ngModel",r.gen.loaded_exo_params.tonalities_selected.C),y(3),Oe("ngModel",r.gen.loaded_exo_params.tonalities_selected.G),y(3),Oe("ngModel",r.gen.loaded_exo_params.tonalities_selected.D),y(3),Oe("ngModel",r.gen.loaded_exo_params.tonalities_selected.E),y(12),Oe("ngModel",r.gen.loaded_exo_params.modes_selected.major),y(6),Oe("ngModel",r.gen.loaded_exo_params.modes_selected.h_minor),y(6),Oe("ngModel",r.gen.loaded_exo_params.modes_selected.n_minor),y(6),Oe("ngModel",r.gen.loaded_exo_params.modes_selected.m_minor),y(9),Oe("ngModel",r.gen.loaded_exo_params.measure_types_selected.simple_notes_left_hand),y(6),Oe("ngModel",r.gen.loaded_exo_params.measure_types_selected.simple_notes_right_hand),y(6),Oe("ngModel",r.gen.loaded_exo_params.measure_types_selected.simple_notes_both_hands),y(6),Oe("ngModel",r.gen.loaded_exo_params.measure_types_selected.chords_first_beat_lh_and_notes_rh),y(19),Oe("ngModel",r.gen.loaded_exo_params.exercise_types_selected.reading_untimed),y(6),Oe("ngModel",r.gen.loaded_exo_params.exercise_types_selected.reading_timed),y(6),Oe("ngModel",r.gen.loaded_exo_params.exercise_types_selected.hearing),y(5),Xn("active",r.rhythm_section_to_show==="lh"),y(2),Xn("active",r.rhythm_section_to_show==="rh"),y(2),E("hidden",r.rhythm_section_to_show=="lh"),y(5),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[0].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[8].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[16].proba),y(4),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[1].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[9].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[17].proba),y(4),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[2].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[10].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[18].proba),y(4),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[3].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[11].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[19].proba),y(4),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[4].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[12].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[20].proba),y(4),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[5].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[13].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[21].proba),y(4),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[6].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[14].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[22].proba),y(4),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[7].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[15].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.right_hand[23].proba),y(),E("hidden",r.rhythm_section_to_show=="rh"),y(5),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[0].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[8].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[16].proba),y(4),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[1].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[9].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[17].proba),y(4),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[2].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[10].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[18].proba),y(4),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[3].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[11].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[19].proba),y(4),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[4].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[12].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[20].proba),y(4),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[5].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[13].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[21].proba),y(4),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[6].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[14].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[22].proba),y(4),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[7].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[15].proba),y(3),Oe("ngModel",r.gen.loaded_exo_params.rhythm_params.left_hand[23].proba),y(8),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.inversions._one),y(3),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.inversions._two),y(3),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.inversions._three),y(3),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.inversions._four),y(13),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_major.major),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_major.minor),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_major.dominant),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_major.minor7),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_major.maj7),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_major.dim),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_major.hdim),y(10),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.major),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.minor),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.dominant),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.minor7),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.maj7),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.dim),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.dim7),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.hdim),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.aug),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.mMaj7),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_h_minor.augMaj7),y(10),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.major),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.minor),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.dominant),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.minor7),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.maj7),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_n_minor.dim),y(7),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.major),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.minor),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.dominant),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.minor7),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.dim),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.hdim),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.aug),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.mMaj7),y(6),Oe("ngModel",r.gen.loaded_exo_params.chords_gen_params.chord_types_m_minor.augMaj7),y(8),Oe("ngModel",r.gen.loaded_exo_params.notes_gen_params.arpeggios),y(3),Oe("ngModel",r.gen.loaded_exo_params.notes_gen_params.one_by_one))},dependencies:[gi,bo,xo,Gi,Vr,ld,ro,Jo,Ti,Lo,ms,Mi,Su],styles:[".app-page[_ngcontent-%COMP%]{padding:100px 30px 550px;overflow:auto;height:100vh;width:100vw}.exercise_type[_ngcontent-%COMP%]{margin-left:20px}.tonalities[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:10px}.big-checkbox[_ngcontent-%COMP%]{width:30px;height:30px}.active[_ngcontent-%COMP%]{background-color:var(--dark_prim)!important;color:#fff;border-bottom:3px solid var(--light_prim)!important}.slidecontainer[_ngcontent-%COMP%]{width:100%}.slider[_ngcontent-%COMP%]{height:100px;width:auto;-webkit-appearance:none;-moz-appearance:none;appearance:none;width:100%;outline:none;transition:opacity .2s;border:1px solid;background-repeat:no-repeat;background-position:center -7px;background-size:356px 94px;background-color:transparent}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:100px;background:#4caf50;cursor:pointer;opacity:.6}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:25px;height:25px;background:#4caf50;cursor:pointer}.card[_ngcontent-%COMP%]{background-color:transparent}#templateContainer[_ngcontent-%COMP%]{border-top:5px black solid;border-bottom:5px black solid;position:fixed;height:400px;width:100%;bottom:0;left:0;background-color:#fff;overflow:scroll;zoom:.5;z-index:1}#start_preview_row[_ngcontent-%COMP%]{position:fixed;top:75px;z-index:1}"]})}}return t})();var Oi=()=>["/create-exercise"],Yoe=t=>({level:"lvl_1_0",ex_type:"100",tempo:t,fastload:"true"}),Xoe=()=>({level:"lvl_1_1",fastload:"true"}),Joe=()=>({level:"lvl_1_2",fastload:"true"}),Qoe=()=>({level:"lvl_1_3",fastload:"true"}),$oe=()=>({level:"lvl_1_4",fastload:"true"}),Koe=()=>({level:"lvl_1_5",fastload:"true"}),Zoe=()=>({level:"lvl_1_6",fastload:"true"}),ese=()=>({level:"lvl_1_7",fastload:"true"}),tse=()=>({level:"lvl_1_8",fastload:"true"}),nse=()=>({level:"lvl_1_9",fastload:"true"}),ise=()=>({level:"FULL_SCORE",fastload:"true",score:"scores_easy"}),rse=()=>({level:"lvl_2_0",fastload:"true"}),ose=()=>({level:"lvl_2_1",fastload:"true"}),sse=()=>({level:"lvl_2_2",fastload:"true"}),ase=()=>({level:"lvl_2_3",fastload:"true"}),lse=()=>({level:"lvl_2_4",fastload:"true"}),cse=()=>({level:"lvl_2_5",fastload:"true"}),dse=()=>({level:"lvl_2_6",fastload:"true"}),hse=()=>({level:"lvl_2_7",fastload:"true"}),use=()=>({level:"lvl_2_8",fastload:"true"}),pse=()=>({level:"lvl_2_9",fastload:"true"}),fse=()=>({level:"lvl_3_1",fastload:"true"}),mse=()=>({level:"lvl_3_2",fastload:"true"}),gse=()=>({level:"lvl_3_3",fastload:"true"}),V8=()=>({level:"lvl_4_1",fastload:"true"}),_se=()=>({level:"HEARING",fastload:"true"}),yM=()=>({level:"LEVEL_1",fastload:"true"}),R8=(()=>{class t{constructor(e){this.user=e,this.results=this.user.getResults()}ngOnInit(){}get_score(e){if(this.results[e]){var i=this.results[e][this.results[e].length-1][Object.keys(this.results[e][this.results[e].length-1])[0]]||0;return Math.round(i)}return 0}get_color(e,i=null){let r=this.get_score(e);return r<10?($(i).addClass("glow_red"),"red"):r<50?($(i).addClass("glow_yellow"),"yellow"):r<90?($(i).addClass("glow_orange"),"orange"):($(i).addClass("glow_green"),"#00ff00")}static{this.\u0275fac=function(i){return new(i||t)(Le(es))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-page-exercise-selection"]],standalone:!1,decls:193,vars:192,consts:[["refEl",""],["refEl_2",""],["refEl_3",""],[1,"app-page"],[1,"bandeau","p-4"],["href","#",3,"routerLink"],[1,"bandeau"],[1,"category","card","d-inline-flex","col-4"],[1,"subtitle"],[2,"display","flex"],[1,"category-col","col-6"],[1,"my-2"],["tooltip","G clef only, free tempo","href","#",3,"routerLink","queryParams"],[1,"results","d-inline","p-2"],["tooltip","G clef only, slow tempo tempo","href","#",3,"routerLink","queryParams"],["tooltip","G clef, slow tempo.","href","#",3,"routerLink","queryParams"],["tooltip","G clef, medium tempo.","href","#",3,"routerLink","queryParams"],["tooltip","G clef, fast tempo.","href","#",3,"routerLink","queryParams"],["tooltip","G clef only, with simple rhythmic motives.","href","#",3,"routerLink","queryParams"],["tooltip","G clef only, with simple rhythmic motives, low tempo.","href","#",3,"routerLink","queryParams"],["tooltip","G clef only, with medium rhythmic motives, medium tempo.","href","#",3,"routerLink","queryParams"],["tooltip","G clef only, with medium rhythmic motives, fast tempo.","href","#",3,"routerLink","queryParams"],["tooltip","First score !","href","#",3,"routerLink","queryParams"],["tooltip","F clef only, free tempo.","href","#",3,"routerLink","queryParams"],["tooltip","F clef, slow tempo.","href","#",3,"routerLink","queryParams"],["tooltip","F clef, medium tempo.","href","#",3,"routerLink","queryParams"],["tooltip","F clef, fast tempo.","href","#",3,"routerLink","queryParams"],["tooltip","F clef only, with simple rhythmic motives, low tempo.","href","#",3,"routerLink","queryParams"],["tooltip","F clef only, with simple rhythmic motives, medium tempo.","href","#",3,"routerLink","queryParams"],["tooltip","F clef only, with medium rhythmic motives, fast tempo.","href","#",3,"routerLink","queryParams"],[1,"d-flex"],["tooltip","Clef of G or F at a medium tempo.","href","#",3,"routerLink","queryParams"],["tooltip","Clef of G or F at a fast tempo.","href","#",3,"routerLink","queryParams"],["tooltip","Clef of G or F at a very fast tempo.","href","#",3,"routerLink","queryParams"],["tooltip","G and F clefs, free tempo","href","#",3,"routerLink","queryParams"],["href","#",3,"routerLink","queryParams"],["tooltip","Ear training ","href","#",3,"routerLink","queryParams"]],template:function(i,r){if(i&1&&(p(0,"div",3)(1,"div",4)(2,"h1")(3,"a",5),P(4,"Create your own"),m()()(),p(5,"div",4)(6,"h1"),P(7,"Exercises"),m()(),p(8,"div",6)(9,"div",7)(10,"h2"),P(11," Separates hands"),m(),p(12,"h4",8),P(13," G clef"),m(),p(14,"div",9)(15,"ul",10)(16,"li",11)(17,"a",12),P(18,"Level 1.0"),m(),p(19,"div",13,0),P(21),m()(),p(22,"li",11)(23,"a",14),P(24,"Level 1.1"),m(),p(25,"div",13,0),P(27),m()(),p(28,"li",11)(29,"a",12),P(30,"Level 1.2"),m(),p(31,"div",13,0),P(33),m()(),p(34,"li",11)(35,"a",15),P(36,"Level 1.3"),m(),p(37,"div",13,0),P(39),m()(),p(40,"li",11)(41,"a",16),P(42,"Level 1.4"),m(),p(43,"div",13,0),P(45),m()()(),p(46,"ul",10)(47,"li",11)(48,"a",17),P(49,"Level 1.5"),m(),p(50,"div",13,1),P(52),m()(),p(53,"li",11)(54,"a",18),P(55,"Level 1.6"),m(),p(56,"div",13,2),P(58),m()(),p(59,"li",11)(60,"a",19),P(61,"Level 1.7"),m(),p(62,"div",13,0),P(64),m()(),p(65,"li",11)(66,"a",20),P(67,"Level 1.8"),m(),p(68,"div",13,0),P(70),m()(),p(71,"li",11)(72,"a",21),P(73,"Level 1.9"),m(),p(74,"div",13,0),P(76),m()(),p(77,"li",11)(78,"a",22),P(79,"Full score !"),m()()()(),p(80,"h4",8),P(81," F clef"),m(),p(82,"div",9)(83,"ul",10)(84,"li",11)(85,"a",23),P(86,"Level 2.0"),m(),p(87,"div",13,0),P(89),m()(),p(90,"li",11)(91,"a",23),P(92,"Level 2.1"),m(),p(93,"div",13,0),P(95),m()(),p(96,"li",11)(97,"a",23),P(98,"Level 2.2"),m(),p(99,"div",13,0),P(101),m()(),p(102,"li",11)(103,"a",24),P(104,"Level 2.3"),m(),p(105,"div",13,0),P(107),m()(),p(108,"li",11)(109,"a",25),P(110,"Level 2.4"),m(),p(111,"div",13,0),P(113),m()()(),p(114,"ul",10)(115,"li",11)(116,"a",26),P(117,"Level 2.5"),m(),p(118,"div",13,0),P(120),m()(),p(121,"li",11)(122,"a",27),P(123,"Level 2.6"),m(),p(124,"div",13,0),P(126),m()(),p(127,"li",11)(128,"a",28),P(129,"Level 2.7"),m(),p(130,"div",13,0),P(132),m()(),p(133,"li",11)(134,"a",29),P(135,"Level 2.8"),m(),p(136,"div",13,0),P(138),m()(),p(139,"li",11)(140,"a",26),P(141,"Level 2.9"),m(),p(142,"div",13,0),P(144),m()()()(),p(145,"h4",8),P(146," Exam "),m(),p(147,"div",30)(148,"ul",10)(149,"li",11)(150,"a",31),P(151,"Level 3.1"),m(),p(152,"div",13,0),P(154),m()(),p(155,"li",11)(156,"a",32),P(157,"Level 3.2"),m(),p(158,"div",13,0),P(160),m()(),p(161,"li",11)(162,"a",33),P(163,"Level 3.3"),m(),p(164,"div",13,0),P(166),m()()()()(),p(167,"div",7)(168,"h2"),P(169," Both hands "),m(),p(170,"ul")(171,"li",11)(172,"a",34),P(173,"Level 4"),m()(),p(174,"li",11)(175,"a",35),P(176,"Level 5"),m()(),p(177,"li",11)(178,"a",36),P(179,"Level 6"),m()()()(),p(180,"div",7)(181,"h2"),P(182," Hard "),m(),p(183,"ul")(184,"li",11)(185,"a",35),P(186,"Level 7"),m()(),p(187,"li",11)(188,"a",35),P(189,"Level 8"),m()(),p(190,"li",11)(191,"a",35),P(192,"Level 9"),m()()()()()()),i&2){let s=rd(20),a=rd(51),l=rd(57);y(3),E("routerLink",dn(130,Oi)),y(14),E("routerLink",dn(131,Oi))("queryParams",Ae(132,Yoe,-1)),y(2),cn("color",r.get_color("LEVEL_1_0",s)),y(2),en(" ",r.get_score("LEVEL_1_0"),"% "),y(2),E("routerLink",dn(134,Oi))("queryParams",dn(135,Xoe)),y(2),cn("color",r.get_color("LEVEL_1_1",s)),y(2),en(" ",r.get_score("LEVEL_1_1"),"% "),y(2),E("routerLink",dn(136,Oi))("queryParams",dn(137,Joe)),y(2),cn("color",r.get_color("LEVEL_1_2",s)),y(2),en(" ",r.get_score("LEVEL_1_2"),"% "),y(2),E("routerLink",dn(138,Oi))("queryParams",dn(139,Qoe)),y(2),cn("color",r.get_color("LEVEL_1_3",s)),y(2),en(" ",r.get_score("LEVEL_1_3"),"% "),y(2),E("routerLink",dn(140,Oi))("queryParams",dn(141,$oe)),y(2),cn("color",r.get_color("LEVEL_1_4",s)),y(2),en(" ",r.get_score("LEVEL_1_4"),"% "),y(3),E("routerLink",dn(142,Oi))("queryParams",dn(143,Koe)),y(2),cn("color",r.get_color("LEVEL_1_5",a)),y(2),en(" ",r.get_score("LEVEL_1_5"),"% "),y(2),E("routerLink",dn(144,Oi))("queryParams",dn(145,Zoe)),y(2),cn("color",r.get_color("LEVEL_1_6",l)),y(2),en(" ",r.get_score("LEVEL_1_6"),"% "),y(2),E("routerLink",dn(146,Oi))("queryParams",dn(147,ese)),y(2),cn("color",r.get_color("LEVEL_1_7",s)),y(2),en(" ",r.get_score("LEVEL_1_7"),"% "),y(2),E("routerLink",dn(148,Oi))("queryParams",dn(149,tse)),y(2),cn("color",r.get_color("LEVEL_1_8",s)),y(2),en(" ",r.get_score("LEVEL_1_8"),"% "),y(2),E("routerLink",dn(150,Oi))("queryParams",dn(151,nse)),y(2),cn("color",r.get_color("LEVEL_1_9",s)),y(2),en(" ",r.get_score("LEVEL_1_9"),"% "),y(2),E("routerLink",dn(152,Oi))("queryParams",dn(153,ise)),y(7),E("routerLink",dn(154,Oi))("queryParams",dn(155,rse)),y(2),cn("color",r.get_color("LEVEL_2_0",s)),y(2),en(" ",r.get_score("LEVEL_2_0"),"% "),y(2),E("routerLink",dn(156,Oi))("queryParams",dn(157,ose)),y(2),cn("color",r.get_color("LEVEL_2_1",s)),y(2),en(" ",r.get_score("LEVEL_2_1"),"% "),y(2),E("routerLink",dn(158,Oi))("queryParams",dn(159,sse)),y(2),cn("color",r.get_color("LEVEL_2_2",s)),y(2),en(" ",r.get_score("LEVEL_2_2"),"% "),y(2),E("routerLink",dn(160,Oi))("queryParams",dn(161,ase)),y(2),cn("color",r.get_color("LEVEL_2_3",s)),y(2),en(" ",r.get_score("LEVEL_2_3"),"% "),y(2),E("routerLink",dn(162,Oi))("queryParams",dn(163,lse)),y(2),cn("color",r.get_color("LEVEL_2_4",s)),y(2),en(" ",r.get_score("LEVEL_2_4"),"% "),y(3),E("routerLink",dn(164,Oi))("queryParams",dn(165,cse)),y(2),cn("color",r.get_color("LEVEL_2_5",s)),y(2),en(" ",r.get_score("LEVEL_2_5"),"% "),y(2),E("routerLink",dn(166,Oi))("queryParams",dn(167,dse)),y(2),cn("color",r.get_color("LEVEL_2_6",s)),y(2),en(" ",r.get_score("LEVEL_2_6"),"% "),y(2),E("routerLink",dn(168,Oi))("queryParams",dn(169,hse)),y(2),cn("color",r.get_color("LEVEL_2_7",s)),y(2),en(" ",r.get_score("LEVEL_2_7"),"% "),y(2),E("routerLink",dn(170,Oi))("queryParams",dn(171,use)),y(2),cn("color",r.get_color("LEVEL_2_8",s)),y(2),en(" ",r.get_score("LEVEL_2_8"),"% "),y(2),E("routerLink",dn(172,Oi))("queryParams",dn(173,pse)),y(2),cn("color",r.get_color("LEVEL_2_9",s)),y(2),en(" ",r.get_score("LEVEL_2_9"),"% "),y(6),E("routerLink",dn(174,Oi))("queryParams",dn(175,fse)),y(2),cn("color",r.get_color("LEVEL_3_1",s)),y(2),en(" ",r.get_score("LEVEL_3_1"),"% "),y(2),E("routerLink",dn(176,Oi))("queryParams",dn(177,mse)),y(2),cn("color",r.get_color("LEVEL_3_2",s)),y(2),en(" ",r.get_score("LEVEL_3_2"),"% "),y(2),E("routerLink",dn(178,Oi))("queryParams",dn(179,gse)),y(2),cn("color",r.get_color("LEVEL_3_3",s)),y(2),en(" ",r.get_score("LEVEL_3_3"),"% "),y(6),E("routerLink",dn(180,Oi))("queryParams",dn(181,V8)),y(3),E("routerLink",dn(182,Oi))("queryParams",dn(183,V8)),y(3),E("routerLink",dn(184,Oi))("queryParams",dn(185,_se)),y(7),E("routerLink",dn(186,Oi))("queryParams",dn(187,yM)),y(3),E("routerLink",dn(188,Oi))("queryParams",dn(189,yM)),y(3),E("routerLink",dn(190,Oi))("queryParams",dn(191,yM))}},dependencies:[Ns],styles:[".app-page[_ngcontent-%COMP%]{padding-top:100px;max-height:100vh;overflow-y:scroll}.bandeau[_ngcontent-%COMP%]{width:100%;justify-content:center;display:flex}.subtitle[_ngcontent-%COMP%]{padding-left:10px}.category-col[_ngcontent-%COMP%]{max-width:50%}"]})}}return t})();function yse(t,n){if(t&1&&(p(0,"span"),P(1),m()),t&2){let e=n.$implicit;y(),en("",e," ")}}function vse(t,n){if(t&1&&(p(0,"tr")(1,"td"),P(2),m(),p(3,"td"),ie(4,"img",16),m(),p(5,"td"),P(6),m(),p(7,"td"),P(8),m(),p(9,"td"),P(10),m()()),t&2){let e=n.$implicit,i=n.index;y(2),Yt(i+1),y(2),E("src",As(e.img),Hr),y(2),Yt(e.title),y(2),Yt(e.album),y(2),Yt(e.duration)}}var j8=(()=>{class t{constructor(e,i,r,s){this.route=e,this._http=i,this.sm=r,this.spot=s,this.artist="",this.loaded=!1,this.topTracks=[]}ngOnInit(){this.route.paramMap.subscribe(e=>{this.artist=e.get("artist"),this.loaded=!0}),this.callWikiApiInfos(),this.callWikiApiText(),this.getSongItems()}ngOnDestroy(){this.loaded=!1}callWikiApiInfos(){var e="https://en.wikipedia.org/w/rest.php/v1/search/page?q="+this.artist+"_(band)&limit=1";let i=new Un({"Content-Type":"application/json"});this._http.get(e,{responseType:"text",headers:i}).subscribe(r=>{var s=JSON.parse(r);if(s.pages[0].key.toLowerCase()!=(this.artist.replace(" ","_")+"_(band)").toLowerCase()){e=e.replace("_(band)&limit=1","&limit=1"),this._http.get(e,{responseType:"text",headers:i}).subscribe(a=>{var l=JSON.parse(a);this.desc=l.pages[0].description,this.img=l.pages[0].thumbnail.url,this.img_w=l.pages[0].thumbnail.width,this.img_h=l.pages[0].thumbnail.height,$(".desc").html(this.desc)},a=>console.log(a),()=>{console.log("Infos OK")});return}this.desc=s.pages[0].description,this.img=s.pages[0].thumbnail.url,this.img_w=s.pages[0].thumbnail.width,this.img_h=s.pages[0].thumbnail.height,$(".desc").html(this.desc)},r=>console.log(r),()=>{console.log("Infos OK")})}callWikiApiText(){var e="https://en.wikipedia.org/w/api.php?format=json&action=query&origin=*&prop=extracts&exintro&explaintext&redirects=1&titles="+this.artist+"_(band)";let i=new Un({"Content-Type":"application/json"});this._http.get(e,{responseType:"text",headers:i}).subscribe(r=>{var s=JSON.parse(r);if(Object.keys(s.query.pages)[0]=="-1"){e=e.replace("_(band)",""),this._http.get(e,{responseType:"text",headers:i}).subscribe(a=>{var l=JSON.parse(a);for(let d in l.query.pages)this.extract=l.query.pages[d].extract,this.artist_id=l.query.pages[d].pageid;$(".extract").html("<p>"+this.extract.split(`
`).join("</p><p>")+"</p>")},a=>console.log(a),()=>{console.log("Extract OK")});return}for(let a in s.query.pages)this.extract=s.query.pages[a].extract,this.artist_id=s.query.pages[a].pageid;$(".extract").html("<p>"+this.extract.split(`
`).join("</p><p>")+"</p>")},r=>console.log(r),()=>{console.log("Extract OK")})}getSongItems(){var e="",i="",r=this.artist,s="p-artist";this.spot.getItems({title:e,artist:r,album:i,comp:s}).subscribe(a=>{this.artistId=a.artists.items[0].id,this.getTopTracks()})}getTopTracks(){this.spot.getTop({id:this.artistId}).subscribe(e=>{for(let r in e.tracks){var i={title:e.tracks[r].name,album:e.tracks[r].album.name,img:e.tracks[r].album.images[0].url,duration:this.msToTime(e.tracks[r].duration_ms)};this.topTracks.push(i)}})}msToTime(e){var i=Math.floor(e/6e4),r=(e%6e4/1e3).toFixed(0);return i+":"+(r<10?"0":"")+r}static{this.\u0275fac=function(i){return new(i||t)(Le(Qi),Le(Xi),Le(Hn),Le(wc))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-page-artist"]],standalone:!1,decls:35,vars:12,consts:[["id","page-artist",1,"d-flex","flex-row"],[1,"page","page-artist","col-sm-5"],[1,"d-flex","row","w-100","align-items-center","justify-content-center"],[3,"src","width","height"],[1,"d-flex","flex-column","p-5"],[1,"title"],[1,"desc"],[3,"hidden"],[4,"ngFor","ngForOf"],[1,"extract"],[1,"btn","btn-success","btn-outline"],["target","_blank",3,"href"],[1,"d-flex","flex-column","w-100","col-sm-7"],[3,"page","param","hidden"],[1,"top-tracks"],[2,"text-transform","capitalize"],["onerror","this.src='../../assets/img/empty_score.png'","alt","Album image",2,"width","50px","height","50px","object-fit","cover",3,"src"]],template:function(i,r){i&1&&(p(0,"section",0)(1,"div",1)(2,"div",2),ie(3,"img",3),p(4,"div",4)(5,"h2",5)(6,"strong"),P(7),m()(),ie(8,"h5",6),p(9,"h6",7)(10,"i"),P(11,"Genre : "),Wt(12,yse,2,1,"span",8),m()()()(),ie(13,"div",9),p(14,"button",10)(15,"a",11),P(16,"SEE FULL WIKIPEDIA PAGE"),m()()(),p(17,"div",12),ie(18,"app-browse",13),p(19,"div",14)(20,"h5")(21,"span",15),P(22),m(),P(23,"top tracks"),m(),p(24,"table")(25,"tr"),ie(26,"th")(27,"th"),p(28,"th"),P(29,"Title"),m(),p(30,"th"),P(31,"Album"),m(),p(32,"th"),P(33,"Duration"),m()(),Wt(34,vse,11,6,"tr",8),m()()()()),i&2&&(y(3),E("src",r.img,Hr)("width",r.img_w)("height",r.img_h),y(4),Yt(r.artist),y(2),E("hidden",r.sm.getListStyles().length==0),y(3),E("ngForOf",r.sm.getListStyles()),y(3),E("href","https://en.wikipedia.org/?curid="+r.artist_id,Hr),y(3),E("page","artist")("param",r.artist)("hidden",r.loaded==!1),y(4),en("",r.artist," "),y(12),E("ngForOf",r.topTracks))},dependencies:[gi,tl],styles:["section#page-artist[_ngcontent-%COMP%]{padding-top:8vh;background-color:#fff;height:100vh;display:flex;flex-direction:column;justify-content:center}section#page-artist[_ngcontent-%COMP%]   .page[_ngcontent-%COMP%]{background-color:#fff;display:flex;flex-direction:column;align-items:center;padding:40px;overflow-y:auto;overflow-x:hidden}section#page-artist[_ngcontent-%COMP%]   .page-artist[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-transform:capitalize}section#page-artist[_ngcontent-%COMP%]   .page-artist[_ngcontent-%COMP%]   .extract[_ngcontent-%COMP%]{margin-top:20px}  section#page-artist app-browse .cross{display:none!important}  section#page-artist app-browse section#browse{max-height:50vh;overflow:auto}section#page-artist[_ngcontent-%COMP%]   .page-artist[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:var(--blue_nvx);border-color:var(--blue_nvx);padding:10px 0}section#page-artist[_ngcontent-%COMP%]   .page-artist[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#3b4ec5;border-color:#3b4ec5}section#page-artist[_ngcontent-%COMP%]   .page-artist[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;cursor:pointer;font-family:Open Sans,Arial,sans-serif;font-size:12px;padding:18px 36px;letter-spacing:2px}section#page-artist[_ngcontent-%COMP%]   .page-artist[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}section#page-artist[_ngcontent-%COMP%]   .top-tracks[_ngcontent-%COMP%]{padding:5%;overflow:auto}section#page-artist[_ngcontent-%COMP%]   .top-tracks[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-left:10px;font-variant:all-petite-caps}section#page-artist[_ngcontent-%COMP%]   .top-tracks[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:var(--light_prim);color:#000;opacity:1!important;font-size:1.2em}section#page-artist[_ngcontent-%COMP%]   .top-tracks[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;font-size:16px}"]})}}return t})();var G8=(()=>{class t{constructor(e){this.route=e,this.album=""}ngOnInit(){this.route.paramMap.subscribe(e=>{this.album=e.get("album")})}static{this.\u0275fac=function(i){return new(i||t)(Le(Qi))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-page-album"]],standalone:!1,decls:4,vars:3,consts:[[1,"page","page-album"],[2,"margin-top","100px"],[3,"page","param"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"p",1),P(2),m(),ie(3,"app-browse",2),m()),i&2&&(y(2),en("Welcome to page ",r.album),y(),E("page","album")("param",r.album))},dependencies:[tl],encapsulation:2})}}return t})();var W8=(()=>{class t{constructor(e){this.route=e,this.style=""}ngOnInit(){this.route.paramMap.subscribe(e=>{this.style=e.get("style")})}static{this.\u0275fac=function(i){return new(i||t)(Le(Qi))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-page-style"]],standalone:!1,decls:4,vars:3,consts:[[1,"page","page-style"],[2,"margin-top","100px"],[3,"page","param"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"p",1),P(2),m(),ie(3,"app-browse",2),m()),i&2&&(y(2),en("Welcome to page ",r.style),y(),E("page","style")("param",r.style))},dependencies:[tl],encapsulation:2})}}return t})();var z8=(()=>{class t{constructor(e){this.route=e,this.author=""}ngOnInit(){this.route.paramMap.subscribe(e=>{this.author=e.get("author")})}static{this.\u0275fac=function(i){return new(i||t)(Le(Qi))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-page-author"]],standalone:!1,decls:3,vars:1,consts:[[1,"page","page-author"],[2,"margin-top","200px"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"p",1),P(2),m()()),i&2&&(y(2),en("Welcome ",r.author,"! This is your personal page."))},encapsulation:2})}}return t})();var U8=(()=>{class t{constructor(e){this.route=e,this.key=""}ngOnInit(){this.route.paramMap.subscribe(e=>{this.key=e.get("key")})}static{this.\u0275fac=function(i){return new(i||t)(Le(Qi))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-page-key"]],standalone:!1,decls:4,vars:3,consts:[[1,"page","page-key"],[2,"margin-top","100px"],[3,"page","param"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"p",1),P(2),m(),ie(3,"app-browse",2),m()),i&2&&(y(2),en("Welcome to page ",r.key),y(),E("page","key")("param",r.key))},dependencies:[tl],encapsulation:2})}}return t})();var q8=(()=>{class t{constructor(e,i,r){this.route=e,this.user=i,this.router=r,this.key="",this.reset="",this.valid_link=!1,this.show_pass=!1,this.show_infos=!1,this.route.queryParamMap.subscribe(s=>{this.key=s.get("key"),this.reset=s.get("reset"),this.get_user()})}ngOnInit(){}ngOnDestroy(){this.updateRes$.unsubscribe(),this.getusrRes$.unsubscribe()}change_pass(){this.passverif==this.user_pass&&this.valid_link==!0&&(this.updateRes$=this.user.update_user_pass(this.user_pass).subscribe(e=>{e=="Updated"?($("#rst_infos").text("Password updated successfully"),$("#rst_infos").css("color","var(--green_nvx)")):$("#rst_infos").text("A problem occurred while updating password. Please try again later."),this.show_infos=!0},e=>console.log(e),()=>{setTimeout(()=>{this.router.navigate(["home"])},3e3)}))}get_user(){this.getusrRes$=this.user.get_user_infos(this.key,this.reset).subscribe(e=>{e=="link error"?($("#rst_infos").text("This link is no longer available."),this.show_infos=!0):e=="get infos ok"?(this.user_nick=this.user.get_nick(),this.user_email=this.user.get_user_email(),this.valid_link=!0):($("#rst_infos").text("A problem occurred while resetting password. Please try again later."),this.show_infos=!0)})}showPass(){this.show_pass=!this.show_pass}static{this.\u0275fac=function(i){return new(i||t)(Le(Qi),Le(es),Le(wr))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-reset-password"]],standalone:!1,decls:22,vars:8,consts:[["id","reset"],["ngNativeValidate","","id","reset-form","role","form",1,"",3,"ngSubmit"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["name","reset_psw","id","reset_psw","placeholder","new password","pattern","(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}","title","Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters","required","",3,"ngModelChange","type","ngModel"],["name","reset_psw2","id","reset_psw2","placeholder","new password again","pattern","(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}","title","Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters","required","",3,"ngModelChange","type","ngModel"],[1,"chkpass"],["type","checkbox",1,"toggle_pass",3,"click"],[2,"color","red",3,"hidden"],["id","rst_infos",2,"color","red",3,"hidden"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary"]],template:function(i,r){i&1&&(p(0,"section",0)(1,"form",1),J("ngSubmit",function(){return r.change_pass()}),p(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),P(6),ie(7,"br"),P(8),m()(),p(9,"div",6)(10,"input",7),Fe("ngModelChange",function(a){return Be(r.user_pass,a)||(r.user_pass=a),a}),m(),p(11,"input",8),Fe("ngModelChange",function(a){return Be(r.passverif,a)||(r.passverif=a),a}),m(),p(12,"div",9)(13,"input",10),J("click",function(){return r.showPass()}),m(),p(14,"span"),P(15,"Show Passwords"),m(),p(16,"span",11),P(17,"Passwords are differents"),m()(),ie(18,"h6",12),m(),p(19,"div",13)(20,"button",14),P(21,"Done"),m()()()()()()),i&2&&(y(6),en("Welcome ",r.user_nick),y(2),en("Please reset your password for ",r.user_email),y(2),E("type",r.show_pass?"text":"password"),Oe("ngModel",r.user_pass),y(),E("type",r.show_pass?"text":"password"),Oe("ngModel",r.passverif),y(5),E("hidden",r.passverif==r.user_pass),y(2),E("hidden",!r.show_infos))},dependencies:[Gi,Ti,Xg,ip,rp,Mi,np],styles:['section#reset[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:50vh}section#reset[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column}section#reset[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{max-width:inherit}section#reset[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:5px 0;border-top:0;border-left:0;border-right:0;border-width:.5px}section#reset[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:var(--blue_nvx) auto 1px}section#reset[_ngcontent-%COMP%]   .chkpass[_ngcontent-%COMP%]{font-size:12px;display:flex;align-items:center}section#reset[_ngcontent-%COMP%]   .chkpass[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:5px}section#reset[_ngcontent-%COMP%]   .chkpass[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{color:var(--light_prim)}section#reset[_ngcontent-%COMP%]   .chkpass[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:after{width:15px;height:15px;inset:-1px 0 0 -1px;position:relative;content:"";display:block;visibility:visible;padding:0;border-radius:4px}section#reset[_ngcontent-%COMP%]   .chkpass[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:after{width:15px;height:15px;inset:-1px 0 0 -1px;position:relative;background-color:var(--green_nvx);content:"";display:block;visibility:visible;border:2px solid var(--light_prim);border-radius:4px}']})}}return t})();var Hs=hr(gM());var Tu=(()=>{class t{constructor(){this.chordsCounting={},this.analysisPerMeasure={},this.simpleAnalysisPerMeasure={},this.totalChordsInParts={},this.partTonalities=[]}compute(e){this.sm=e,this.chordsInScore=Object.keys(this.sm.getChordsInScore()),this.parts=Object.values(this.sm.getParts()),this.getPartTonalities(),this.nbChordsInScore(),this.computeAnalysis()}reset(){this.parts={},this.chordsCounting={},this.analysisPerMeasure={},this.simpleAnalysisPerMeasure={},this.totalChordsInParts={},this.chordsInScore=[],this.partTonalities=[]}nbChordsInScore(){for(var e=0;e<this.chordsInScore.length;e++)this.chordsCounting[this.chordsInScore[e]]=0;for(let a=0;a<this.parts.length;a++){var i=this.parts[a].measures;for(let l=0;l<i.length;l++){var r=i[l].chords,s=r.split(" ");for(let d=0;d<s.length;d++)this.chordsCounting.hasOwnProperty(s[d])&&(this.chordsCounting[s[d]]+=1)}}}getPartTonalities(){for(let i=0;i<this.parts.length;i++){var e=this.parts[i].tonality;this.partTonalities.push(e)}return this.partTonalities}computeAnalysis(){for(let l=0;l<this.parts.length;l++){this.analysisPerMeasure[l]=[],this.totalChordsInParts[l]=[];var e=this.parts[l].measures;for(let d=0;d<e.length;d++){var i=e[d].analysis,r=i.split(" "),s=e[d].chords,a=s.split(" ");a=a.filter(u=>u!="");for(let u=0;u<a.length;u++){let h={};h.c=a[u],h.a=r[u],h.nb=0,this.analysisPerMeasure[l].push(h)}}this.totalChordsInParts[l]=this.analysisPerMeasure[l].length}this.setSimpifiedAnalysis()}setSimpifiedAnalysis(){for(let i=0;i<this.parts.length;i++)for(let r=0;r<this.analysisPerMeasure[i].length;r++)this.analysisPerMeasure[i][r].c==null&&this.analysisPerMeasure[i][r].a==""&&delete this.analysisPerMeasure[i][r];for(let i=0;i<this.parts.length;i++){this.analysisPerMeasure[i]=this.analysisPerMeasure[i].filter(s=>s!=null);var e={};let r={};this.analysisPerMeasure[i].length!=0?(e[i]=this.analysisPerMeasure[i].filter(s=>!r[s.c]&&(r[s.c]=!0)),this.analysisPerMeasure[i].forEach((s,a)=>{for(let l=0;l<e[i].length;l++)if(s.c==e[i][l].c){e[i][l].nb+=1;break}})):e[i]=[],this.analysisPerMeasure[i]=e[i]}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac})}}return t})();var bse=t=>[t];function xse(t,n){if(t&1&&ie(0,"div",34),t&2){let e=n.index,i=ge();E("hidden",i.analysis[e].length==0),ae("id","chartContainer_parts"+e)}}function Cse(t,n){if(t&1&&(p(0,"tr",35)(1,"td"),ie(2,"img",36),m(),p(3,"td")(4,"strong"),P(5),m(),ie(6,"br"),P(7),m(),p(8,"td",9),P(9),ie(10,"br"),P(11),m(),p(12,"td",9),P(13),m(),p(14,"td",9),P(15),m(),p(16,"td"),P(17),m()()),t&2){let e=n.$implicit,i=ge();y(2),E("src",As(e.image),Hr),y(3),Yt(e.artist),y(2),Yt(e.title),y(2),Yt(i.pitchClass[e.key]),y(2),Yt(e.mode==1?"Major":"Minor"),y(2),Yt(e.tempo),y(2),Yt(e.duration),y(2),Yt(e.album)}}var Y8=(()=>{class t{constructor(e,i,r){this.sm=e,this.stm=i,this.spot=r,this.selected_score_chord=null,this.analysis={},this.pitchClass=["C","C#/Db","D","D#/Eb","E","F","F#/Gb","G","G#/Ab","A","A#/Bb","B"],this.matchingKeys=!0,this.matchingSignatures=!0,this.songsRecomended=[],this.partsTonas=this.stm.partTonalities,this.analysis=this.stm.analysisPerMeasure,this.parts=this.sm.getParts(),this.songId=this.sm.getInfos().getSongId()}ngOnInit(){this.getSongItems()}ngAfterViewInit(){this.nbChordsChart(),this.partsCharts()}nbChordsChart(){var e=this.chordsCount(),i=this.analysisCount(e),r=[];r.push({type:"column",dataPoints:e});for(let a=0;a<i.length;a++)r.push({type:"column",dataPoints:i[a]});new Hs.Chart("chartContainer_nbChords",{animationEnabled:!0,exportEnabled:!0,zoomEnabled:!0,data:r,axisX:{interval:1,labelFontSize:16,labelTextAlign:"left"},axisY:{suffix:"%",labelFontSize:16,titleFontSize:16,gridColor:"#e2e2e2"},toolTip:{content:"{name}: {y} %"}}).render()}partsCharts(){for(let u=0;u<this.partsTonas.length;u++){var e=[],i=[],r=[],s=[],a=getComputedStyle(document.documentElement).getPropertyValue("--blue_nvx"),l="#5160be",d="#bababa";for(let _=0;_<this.analysis[u].length;_++){let b=this.analysis[u][_].nb/this.stm.totalChordsInParts[u]*100,w=this.analysis[u][_].c,S=d,L=" ",R="Unknown analysis for "+this.analysis[u][_].c;this.analysis[u][_].a!=""&&this.analysis[u][_].a!=null&&(L=this.analysis[u][_].a,S=l,R=this.analysis[u][_].a),e.push({y:b,label:w,name:w,color:a}),i.push({y:b,color:S,label:L,name:R})}s.push({type:"column",dataPoints:e,axisXIndex:0,yValueFormatString:"###.00",showInLegend:!0,legendText:"Chords in "+this.partsTonas[u]+" part",legendMarkerColor:a}),s.push({type:"column",dataPoints:i,axisXIndex:1,yValueFormatString:"###.00",showInLegend:!0,legendText:"Analysis of "+this.partsTonas[u]+" part",legendMarkerColor:l}),new Hs.Chart("chartContainer_parts"+u,{animationEnabled:!0,exportEnabled:!1,zoomEnabled:!0,legend:{horizontalAlign:"center",verticalAlign:"bottom",fontSize:15},title:{text:this.sm.getInfos().getTitle()+" - "+this.parts[u].title+" in "+this.partsTonas[u],fontSize:20},data:s,axisX:[{lineColor:a,interval:1,labelFontSize:16},{lineColor:l,interval:1,labelFontSize:16}],axisY:{suffix:"%",gridColor:"#e2e2e2"},toolTip:{content:"{name}: {y} %"}}).render()}}chordsCount(){let e=[];var i=0;for(let r=0;r<this.parts.length;r++)i+=this.stm.totalChordsInParts[r];for(let r=0;r<this.stm.chordsInScore.length;r++){let s=this.stm.chordsCounting[this.stm.chordsInScore[r]]/i*100,a=this.stm.chordsInScore[r],l=getComputedStyle(document.documentElement).getPropertyValue("--blue_nvx");e.push({y:s,label:a,x:r,color:l,name:a,yValueFormatString:"###.00"})}return e}analysisCount(e){var i=[],r=0;for(let s=0;s<this.parts.length;s++)r+=this.stm.totalChordsInParts[s];for(let s=0;s<this.partsTonas.length;s++)if(i[s]=[],this.partsTonas[s].length!=0)for(let a=0;a<this.analysis[s].length;a++){let l=this.analysis[s][a].nb/r*100,d=this.analysis[s][a].c,u=getComputedStyle(document.documentElement).getPropertyValue("--yellow_nvx");if(this.analysis[s][a].a!=""&&this.analysis[s][a].a!=null){d=this.analysis[s][a].a;let _=/(III|II|IV|VII|VI|V|I)(.*)/mi.exec(d);_[1]=="I"&&(u="#70E57D"),_[1]=="II"&&(u="#5BD16B"),_[1]=="III"&&(u="#28A745"),_[1]=="IV"&&(u="#008627"),_[1]=="V"&&(u="#006703"),_[1]=="VI"&&(u="#004800"),_[1]=="VII"&&(u="#002D00");let b=e.find(w=>w.label==this.analysis[s][a].c);b!=""&&b!=null&&i[s].push({y:l,yValueFormatString:"###.00",name:this.analysis[s][a].c+" as "+d,color:u,x:b.x,indexLabelPlacement:"outside",indexLabel:d,indexLabelFontSize:14,indexLabelOrientation:"vertical",indexLabelFontWeight:"bold"})}else for(let h=0;h<this.stm.chordsInScore.length;h++){let _=e.find(b=>b.label==this.analysis[s][a].c);_!=""&&_!=null&&i[s].push({y:this.stm.chordsCounting[this.analysis[s][a].c]/r*100,yValueFormatString:"###.00",name:"Unknown analysis for "+this.analysis[s][a].c,color:"#bababa",x:_.x})}}for(let s=0;s<i.length;s++)i[s].length==0&&delete i[s];return i=i.filter(s=>s!==null&&typeof s<"u"),this.removeDoubles(i)}removeDoubles(e){var i=[],r=[];for(let a=0;a<e.length;a++)for(let l=0;l<e[a].length;l++)i.push(e[a][l]);var s=i.reduce((a,l)=>{var d=a.find(u=>u.name===l.name&&u.x===l.x);return d?(l.name.includes("Unknown analysis")||(d.y+=l.y),a):a.concat([l])},[]);for(let a=0;a<e.length;a++){r[a]=[];for(let l=0;l<s.length;l++)e[a].includes(s[l])&&r[a].push(s[l])}return r}analyse(){console.log("analyse"),this.sm.analyse_part(),this.sm.analyseScore(),this.partsTonas=this.stm.partTonalities,this.stm.chordsInScore=Object.keys(this.sm.getChordsInScore()),this.stm.nbChordsInScore(),this.stm.computeAnalysis(),this.analysis=this.stm.analysisPerMeasure,this.parts=this.sm.getParts(),console.log("partsTonas :",this.partsTonas),console.log("analysis :",this.analysis),console.log("parts :",this.parts),this.nbChordsChart(),this.partsCharts()}getSongItems(){var e=this.sm.getInfos().getTitle(),i=this.sm.getInfos().getArtist(),r=this.sm.getInfos().getAlbum(),s="stats";this.spot.getItems({title:e,artist:i,album:r,comp:s}).subscribe(a=>{this.songInfo=a,this.idAnalysis=a.tracks.items[0].id,this.getSongInfos()})}getSongFeatures(){this.spot.getFeatures({id:this.idAnalysis}).subscribe(e=>{this.songFeatures=e,this.tempo=Math.round(this.songFeatures.tempo),this.duration=this.msToTime(this.songFeatures.duration_ms),this.mode=this.songFeatures.mode,this.key=this.songFeatures.key,this.signature=this.songFeatures.time_signature,this.compareKeys(),this.compareSignatures(),this.analyseChart(),this.getSongReco()})}getSongInfos(){this.spot.getInfos({id:this.idAnalysis}).subscribe(e=>{this.songContents=e,this.popularity=this.songContents.popularity,this.release_date=this.songContents.album.release_date,this.album_name=this.songContents.album.name,this.explicit=this.songContents.explicit,this.getSongFeatures()})}getSongReco(){this.spot.getReco({key:this.key,mode:this.mode,bpm:this.tempo,id:this.idAnalysis}).subscribe(e=>{this.songReco=e;for(let u=0;u<this.songReco.tracks.length;u++){let h=this.songReco.tracks[u].name.toLowerCase(),_=this.songReco.tracks[u].artists[0].name.toLowerCase();if(!h.includes(this.sm.getInfos().getTitle().toLowerCase())&&!_.includes(this.sm.getInfos().getArtist().toLowerCase())){var i=this.songReco.tracks[u].name,r=this.songReco.tracks[u].artists[0].name,s=this.songReco.tracks[u].album.name,a=this.songReco.tracks[u].album.images[0].url,l=this.songReco.tracks[u].id,d={title:i,artist:r,album:s,image:a};this.songsRecomended.push(d),this.spot.getFeatures({id:l}).subscribe(b=>{this.songsRecomended[u].key=b.key,this.songsRecomended[u].mode=b.mode,this.songsRecomended[u].tempo=Math.round(b.tempo),this.songsRecomended[u].duration=this.msToTime(b.duration_ms)})}}})}msToTime(e){var i=Math.floor(e/6e4),r=(e%6e4/1e3).toFixed(0);return i+":"+(r<10?"0":"")+r}compareKeys(){var e=this.sm.getInfos().getTonality(),i=this.pitchClass[this.songFeatures.key],r=/([A-G][b#]{0,2})(.*)/;let a=e.split("/")[0].match(r),l=a[1],d=a[2];this.editorKey=l,d==""?this.editorMode="Major":this.editorMode="Minor",(!i.includes(l)||i.includes(l+"#")||i.includes(l+"b")||this.songFeatures.mode==1&&d!="")&&(this.matchingKeys=!1)}compareSignatures(){var e=this.sm.getInfos().getSignature().charAt(0);Number(e)!=this.songFeatures.time_signature&&(this.matchingSignatures=!1)}analyseChart(){var e=new Hs.Chart("chartContainer_pop",{exportEnabled:!1,animationEnabled:!0,title:{text:this.popularity==0?"0":this.popularity,fontSize:20,verticalAlign:"center",padding:{top:7}},toolTip:{enabled:!1,animationEnabled:!1},data:[{type:"doughnut",startAngle:270,dataPoints:[{y:this.popularity,color:"#28A745"},{y:100-this.popularity,color:"#ffffff"}]}]});e.render();var e=new Hs.Chart("chartContainer_dance",{exportEnabled:!1,animationEnabled:!0,title:{text:Math.round(this.songFeatures.danceability*100)==0?"0":Math.round(this.songFeatures.danceability*100),fontSize:20,verticalAlign:"center",padding:{top:7}},toolTip:{enabled:!1,animationEnabled:!1},data:[{type:"doughnut",startAngle:270,dataPoints:[{y:this.songFeatures.danceability*100,color:"#28A745"},{y:100-this.songFeatures.danceability*100,color:"#ffffff"}]}]});e.render();var e=new Hs.Chart("chartContainer_energy",{exportEnabled:!1,animationEnabled:!0,title:{text:Math.round(this.songFeatures.energy*100)==0?"0":Math.round(this.songFeatures.energy*100),fontSize:20,verticalAlign:"center",padding:{top:7}},toolTip:{enabled:!1,animationEnabled:!1},data:[{type:"doughnut",startAngle:270,dataPoints:[{y:this.songFeatures.energy*100,color:"#28A745"},{y:100-this.songFeatures.energy*100,color:"#ffffff"}]}]});e.render();var e=new Hs.Chart("chartContainer_loud",{exportEnabled:!1,animationEnabled:!0,title:{text:Math.round(this.songFeatures.loudness)==0?"0":Math.round(this.songFeatures.loudness)+"dB",fontSize:20,verticalAlign:"center",padding:{top:7}},toolTip:{enabled:!1,animationEnabled:!1},data:[{type:"doughnut",startAngle:270,dataPoints:[{y:this.songFeatures.loudness,color:"#28A745"},{y:-66-this.songFeatures.loudness,color:"#ffffff"}]}]});e.render();var e=new Hs.Chart("chartContainer_speech",{exportEnabled:!1,animationEnabled:!0,title:{text:Math.round(this.songFeatures.speechiness*100)==0?"0":Math.round(this.songFeatures.speechiness*100),fontSize:20,verticalAlign:"center",padding:{top:7}},toolTip:{enabled:!1,animationEnabled:!1},data:[{type:"doughnut",startAngle:270,dataPoints:[{y:this.songFeatures.speechiness*100,color:"#28A745"},{y:100-this.songFeatures.speechiness*100,color:"#ffffff"}]}]});e.render();var e=new Hs.Chart("chartContainer_acoustic",{exportEnabled:!1,animationEnabled:!0,title:{text:Math.round(this.songFeatures.acousticness*100)==0?"0":Math.round(this.songFeatures.acousticness*100),fontSize:20,verticalAlign:"center",padding:{top:7}},toolTip:{enabled:!1,animationEnabled:!1},data:[{type:"doughnut",startAngle:270,dataPoints:[{y:this.songFeatures.acousticness*100,color:"#28A745"},{y:100-this.songFeatures.acousticness*100,color:"#ffffff"}]}]});e.render();var e=new Hs.Chart("chartContainer_instru",{exportEnabled:!1,animationEnabled:!0,title:{text:Math.round(this.songFeatures.instrumentalness*100)==0?"0":Math.round(this.songFeatures.instrumentalness*100),fontSize:20,verticalAlign:"center",padding:{top:7}},toolTip:{enabled:!1,animationEnabled:!1},data:[{type:"doughnut",startAngle:270,dataPoints:[{y:this.songFeatures.instrumentalness*100,color:"#28A745"},{y:100-this.songFeatures.instrumentalness*100,color:"#ffffff"}]}]});e.render();var e=new Hs.Chart("chartContainer_live",{exportEnabled:!1,animationEnabled:!0,title:{text:Math.round(this.songFeatures.liveness*100)==0?"0":Math.round(this.songFeatures.liveness*100),fontSize:20,verticalAlign:"center",padding:{top:7}},toolTip:{enabled:!1,animationEnabled:!1},data:[{type:"doughnut",startAngle:270,dataPoints:[{y:this.songFeatures.liveness*100,color:"#28A745"},{y:100-this.songFeatures.liveness*100,color:"#ffffff"}]}]});e.render();var e=new Hs.Chart("chartContainer_valence",{exportEnabled:!1,animationEnabled:!0,title:{text:Math.round(this.songFeatures.valence*100)==0?"0":Math.round(this.songFeatures.valence*100),fontSize:20,verticalAlign:"center",padding:{top:7}},toolTip:{enabled:!1,animationEnabled:!1},data:[{type:"doughnut",startAngle:270,dataPoints:[{y:this.songFeatures.valence*100,color:"#28A745"},{y:100-this.songFeatures.valence*100,color:"#ffffff"}]}]});e.render()}capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}static{this.\u0275fac=function(i){return new(i||t)(Le(Hn),Le(Tu),Le(wc))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-stats"]],standalone:!1,decls:107,vars:27,consts:[["id","stats-page"],[1,"wrapper"],[1,"btns"],["type","button",1,"btn","btn-md","btn-outline-success","my-2","my-sm-2",3,"click","hidden"],["type","button",1,"btn","btn-md","btn-outline-success","my-2","my-sm-2",3,"click","routerLink","hidden"],[1,"d-flex","row","w-100","p-5","base","align-items-center"],[1,"col-md-4"],[2,"width","inherit",3,"src"],[1,"col-md-8"],[1,"text-center"],[1,"row","justify-content-center"],[1,"text-center","px-5","pt-5","pb-2","infos"],[1,"d-flex","flex-column"],[1,"text-center","px-5","pt-5","pb-2"],[1,"text-center","editorsInfos",3,"hidden"],["aria-hidden","true",1,"fa","fa-exclamation-triangle"],["id","chartContainer_analysis",1,"row","pb-5"],["id","chartContainer_pop","title","The popularity of the artist. The value will be between 0 and 100, with 100 being the most popular. The artist's popularity is calculated from the popularity of all the artist's tracks.",1,"col-sm-1","col-xs-2","doughnut"],["id","chartContainer_dance","title","Danceability describes how suitable a track is for dancing based on a combination of musical elements including tempo, rhythm stability, beat strength, and overall regularity. A value of 0 is least danceable and 100 is most danceable.",1,"col-sm-1","col-xs-2","doughnut"],["id","chartContainer_energy","title","Energy is a measure from 0 to 100 and represents a perceptual measure of intensity and activity. Typically, energetic tracks feel fast, loud, and noisy. For example, death metal has high energy, while a Bach prelude scores low on the scale. Perceptual features contributing to this attribute include dynamic range, perceived loudness, timbre, onset rate, and general entropy.",1,"col-sm-1","col-xs-2","doughnut"],["id","chartContainer_loud","title","The overall loudness of a track in decibels (dB). Loudness values are averaged across the entire track and are useful for comparing relative loudness of tracks. Loudness is the quality of a sound that is the primary psychological correlate of physical strength (amplitude). Values typically range between -60 and 0 db.",1,"col-sm-1","col-xs-2","doughnut"],["id","chartContainer_speech","title","Speechiness detects the presence of spoken words in a track. The more exclusively speech-like the recording (e.g. talk show, audio book, poetry), the closer to 100 the attribute value. Values above 66 describe tracks that are probably made entirely of spoken words. Values between 33 and 66 describe tracks that may contain both music and speech, either in sections or layered, including such cases as rap music. Values below 33 most likely represent music and other non-speech-like tracks.",1,"col-sm-1","col-xs-2","doughnut"],["id","chartContainer_acoustic","title","A confidence measure from 0 to 100 of whether the track is acoustic. 100 represents high confidence the track is acoustic.",1,"col-sm-1","col-xs-2","doughnut"],["id","chartContainer_instru","title","Predicts whether a track contains no vocals. 'Ooh' and 'aah'sounds are treated as instrumental in this context. Rap or spoken word tracks are clearly 'vocal'. The closer the instrumentalness value is to 100, the greater likelihood the track contains no vocal content. Values above 50 are intended to represent instrumental tracks, but confidence is higher as the value approaches 100.",1,"col-sm-1","col-xs-2","doughnut"],["id","chartContainer_live","title","Detects the presence of an audience in the recording. Higher liveness values represent an increased probability that the track was performed live. A value above 80 provides strong likelihood that the track is live.",1,"col-sm-1","col-xs-2","doughnut"],["id","chartContainer_valence","title","A measure from 0 to 100 describing the musical positiveness conveyed by a track. Tracks with high valence sound more positive (e.g. happy, cheerful, euphoric), while tracks with low valence sound more negative (e.g. sad, depressed, angry).",1,"col-sm-1","col-xs-2","doughnut"],[1,"pt-5","px-5","w-100","text-left"],[1,"mb-3"],["id","chartContainer_nbChords",1,"general-chart",3,"hidden"],["id","empty_stats",1,"empty",3,"hidden"],[1,"pchart-wrapper"],["class","part-chart",3,"hidden",4,"ngFor","ngForOf"],[2,"width","100%","max-height","300px","max-height","75vh","overflow-y","auto","margin","20px 0"],["class","reco",4,"ngFor","ngForOf"],[1,"part-chart",3,"hidden"],[1,"reco"],["onerror","this.src='../../assets/img/empty_score.png'","alt","Album image",2,"width","100px","height","100px","object-fit","cover",3,"src"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),J("click",function(){return r.analyse()}),P(4,"Analyse"),m(),p(5,"button",4),J("click",function(a){return a.stopPropagation()}),P(6,"View score"),m()(),p(7,"div",5)(8,"div",6),ie(9,"img",7),m(),p(10,"div",8)(11,"h5",9),P(12),m(),p(13,"h2",9)(14,"strong"),P(15),m()(),p(16,"div",10)(17,"span",11),P(18,"Release Date: "),p(19,"strong"),P(20),m(),ie(21,"br"),m(),p(22,"span",11),P(23,"Album: "),p(24,"strong"),P(25),m(),ie(26,"br"),m(),p(27,"span",11),P(28,"Explicit: "),p(29,"strong"),P(30),m(),ie(31,"br"),m()(),p(32,"div",10)(33,"span",12)(34,"span",13)(35,"strong"),P(36),m(),ie(37,"br"),P(38,"KEY"),m(),p(39,"span",14),ie(40,"i",15),p(41,"strong"),P(42),m(),ie(43,"br"),P(44,"EDITOR'S KEY "),m()(),p(45,"span",13)(46,"strong"),P(47),m(),ie(48,"br"),P(49,"TEMPO"),m(),p(50,"span",13)(51,"strong"),P(52),m(),ie(53,"br"),P(54,"DURATION"),m(),p(55,"span",12)(56,"span",13)(57,"strong"),P(58),m(),ie(59,"br"),P(60,"SIGNATURE"),m(),p(61,"span",14),ie(62,"i",15),p(63,"strong"),P(64),m(),ie(65,"br"),P(66,"EDITOR' SIGNATURE "),m()()()()(),p(67,"div",16),ie(68,"div",17)(69,"div",18)(70,"div",19)(71,"div",20)(72,"div",21)(73,"div",22)(74,"div",23)(75,"div",24)(76,"div",25),m(),p(77,"div",26)(78,"h2")(79,"strong"),P(80,"Statistics"),m()(),p(81,"h5",27),P(82),m(),ie(83,"div",28),p(84,"div",29),P(85,"There are no statistics for this song."),m(),p(86,"div",30),Wt(87,xse,1,2,"div",31),m()(),p(88,"div",26)(89,"h2")(90,"strong"),P(91,"Recommended songs"),m()(),p(92,"h5"),P(93),m(),p(94,"table",32)(95,"tr"),ie(96,"th")(97,"th"),p(98,"th",9),P(99,"Key"),m(),p(100,"th",9),P(101,"BPM"),m(),p(102,"th",9),P(103,"Duration"),m(),p(104,"th"),P(105,"Album"),m()(),Wt(106,Cse,18,9,"tr",33),m()()()()),i&2&&(y(3),E("hidden",r.parts.length==0),y(2),E("routerLink",Ae(25,bse,"/score/"+r.songId))("hidden",r.parts.length==0),y(4),E("src",r.sm.getInfos().getImage(),Hr),y(3),Yt(r.sm.getInfos().getArtist()),y(3),Yt(r.sm.getInfos().getTitle()),y(5),Yt(r.release_date),y(5),Yt(r.album_name),y(5),Yt(r.explicit==!1?"No":"Yes"),y(6),Yt(r.mode==1?r.pitchClass[r.key]+" Major":r.pitchClass[r.key]+" Minor"),y(3),E("hidden",r.matchingKeys),y(3),Yt(r.editorKey+" "+r.editorMode),y(5),en("",r.tempo," BPM"),y(5),Yt(r.duration),y(6),en("",r.signature,"/4"),y(3),E("hidden",r.matchingSignatures),y(3),Yt(r.sm.getInfos().getSignature()),y(18),Tn("Chords played in '",r.sm.getInfos().getTitle(),"' by ",r.sm.getInfos().getArtist()),y(),E("hidden",r.parts.length==0),y(),E("hidden",r.parts.length!=0),y(3),E("ngForOf",r.partsTonas),y(6),Tn("The following tracks are close to ",r.sm.getInfos().getArtist()," - '",r.sm.getInfos().getTitle(),"' because they have similar tempos and keys."),y(13),E("ngForOf",r.songsRecomended))},dependencies:[gi,Ns],styles:['.canvasjs-chart-credit{color:transparent!important}#stats-page[_ngcontent-%COMP%]{padding-top:8vh;background-color:#fff;height:100vh;display:flex;flex-direction:column;justify-content:center}#stats-page[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{background-color:#fff;display:flex;flex-direction:column;align-items:center;padding:20px;overflow-y:scroll;overflow-x:hidden}#stats-page[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;align-items:center}#stats-page[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}#stats-page[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .general-chart[_ngcontent-%COMP%]{min-height:570px;width:100%}#stats-page[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .pchart-wrapper[_ngcontent-%COMP%]{display:block;width:100%}#stats-page[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .pchart-wrapper[_ngcontent-%COMP%]   .part-chart[_ngcontent-%COMP%]{min-height:370px;width:45%;margin:2.5%;display:inline-block}#stats-page[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{width:100%;height:auto;margin:5%}#chartContainer_analysis[_ngcontent-%COMP%]{width:100%;justify-content:space-around}#chartContainer_pop[_ngcontent-%COMP%]:after{content:"Popularity";position:absolute;left:15px;bottom:-10px;background-color:#fff;width:100%;text-align:center}#chartContainer_dance[_ngcontent-%COMP%]:after{content:"Danceability";position:absolute;left:15px;bottom:-10px;background-color:#fff;width:100%;text-align:center}#chartContainer_energy[_ngcontent-%COMP%]:after{content:"Energy ";position:absolute;left:15px;bottom:-10px;background-color:#fff;width:100%;text-align:center}#chartContainer_loud[_ngcontent-%COMP%]:after{content:"Loudness";position:absolute;left:15px;bottom:-10px;background-color:#fff;width:100%;text-align:center}#chartContainer_speech[_ngcontent-%COMP%]:after{content:"Speechiness";position:absolute;left:15px;bottom:-10px;background-color:#fff;width:100%;text-align:center}#chartContainer_acoustic[_ngcontent-%COMP%]:after{content:"Acousticness";position:absolute;left:15px;bottom:-10px;background-color:#fff;width:100%;text-align:center}#chartContainer_instru[_ngcontent-%COMP%]:after{content:"Instrumentalness";position:absolute;left:15px;bottom:-10px;background-color:#fff;width:100%;text-align:center}#chartContainer_live[_ngcontent-%COMP%]:after{content:"Liveness";position:absolute;left:15px;bottom:-10px;background-color:#fff;width:100%;text-align:center}#chartContainer_valence[_ngcontent-%COMP%]:after{content:"Valence";position:absolute;left:15px;bottom:-10px;background-color:#fff;width:100%;text-align:center}#stats-page[_ngcontent-%COMP%]   .doughnut[_ngcontent-%COMP%]{height:100px;width:100%}#stats-page[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--blue_nvx)}#stats-page[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:25px;color:#000}#stats-page[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%]   span.infos[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:16px;font-weight:400}#stats-page[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%]   span.editorsInfos[_ngcontent-%COMP%]{color:var(--red_nvx);font-size:11px}#stats-page[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%]   span.editorsInfos[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;color:var(--red_nvx)}#stats-page[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%]   span.editorsInfos[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;padding-right:5px}#stats-page[_ngcontent-%COMP%]   .reco[_ngcontent-%COMP%]{background-color:var(--light_prim);color:#000;opacity:1!important;font-size:1.2em}#stats-page[_ngcontent-%COMP%]   .reco.pair[_ngcontent-%COMP%]{background-color:var(--gray_prim)}#stats-page[_ngcontent-%COMP%]   .reco[_ngcontent-%COMP%]:hover{filter:drop-shadow(2px 2px 3px black)}#stats-page[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-left:10px;font-size:1.5em;font-variant:all-petite-caps}#stats-page[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:10px;border-bottom-left-radius:10px}#stats-page[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:10px;border-top-right-radius:10px}#stats-page[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px}']})}}return t})();function wse(t,n){if(t&1&&(p(0,"div",6)(1,"div",7),ie(2,"img",8),p(3,"div",9)(4,"h5",10),P(5),m(),p(6,"p",11),P(7),m(),p(8,"p",11),P(9),m(),p(10,"p",11)(11,"small",12),P(12),m()()(),p(13,"ul",13)(14,"li",14),P(15),m()(),p(16,"div",9)(17,"a",15),P(18,"Buy score"),m()()()()),t&2){let e=ge().$implicit;y(2),E("src",As(e.img),Hr),y(3),Yt(e.title),y(2),Yt(e.artist),y(2),Yt(e.album),y(3),en("Transcription by ",e.author),y(3),en("Price : ",e.price," CAD")}}function Mse(t,n){if(t&1&&(us(0,4),Wt(1,wse,19,7,"div",5),ps()),t&2){let e=n.$implicit;y(),E("ngIf",e.price>0)}}var X8=(()=>{class t{counter(e){return new Array(e)}constructor(e){this._http=e,this.list=[]}ngOnInit(){this.refreshScores()}refreshScores(){let e=new Un({"Content-Type":"application/json"});this._http.get(ai.apiList,{responseType:"text",headers:e}).pipe(fn(i=>{this.list=JSON.parse(i)})).subscribe(i=>console.log("data  : "+i),i=>console.log(i),()=>{console.log("Refresh Complete")})}static{this.\u0275fac=function(i){return new(i||t)(Le(Xi))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-store"]],standalone:!1,decls:4,vars:1,consts:[["id","store"],[1,"container"],[1,"row"],["class","col-md-6 col-lg-4 col-12",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-4","col-12"],["class","card-deck",4,"ngIf"],[1,"card-deck"],[1,"card","mb-4"],["onerror","this.src='../assets/img/music-placeholder-image.jpg'","alt","Card image cap",1,"card-img-top","img-fluid",2,"max-width","350px","max-height","350px",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"text-muted"],[1,"list-group","list-group-flush"],[1,"list-group-item"],["href","#",1,"card-link"]],template:function(i,r){i&1&&(p(0,"section",0)(1,"div",1)(2,"div",2),Wt(3,Mse,2,1,"ng-container",3),m()()()),i&2&&(y(3),E("ngForOf",r.list))},dependencies:[gi,vr],styles:["section#store[_ngcontent-%COMP%]{padding-top:10vh;height:100vh;overflow-y:auto}section#store[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%], section#store[_ngcontent-%COMP%]   .card-deck[_ngcontent-%COMP%], section#store[_ngcontent-%COMP%]   .card-deck[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}"]})}}return t})();var vM=(()=>{class t{constructor(e){this.sm2=e}resolve(e,i){return console.log("route.params.score_id => ",e.params.score_id),!e.params.score_id||e.params.score_id==null?(this.sm2.reset(),this.sm2):this.sm2.fetch(e.params.score_id)}static{this.\u0275fac=function(i){return new(i||t)(ht(Hn))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac})}}return t})(),J8=(()=>{class t{constructor(e,i){this.stm=e,this.sm2=i}resolve(e,i){return this.sm2.fetch(e.params.score_id).toPromise().then(()=>{this.stm.reset(),this.stm.compute(this.sm2)})}static{this.\u0275fac=function(i){return new(i||t)(ht(Tu),ht(Hn))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac})}}return t})(),Sse=[{path:"home",component:h8},{path:"metronome",component:p8,pathMatch:"prefix"},{path:"fifths",component:S8,pathMatch:"prefix"},{path:"chord-detect",component:X1,pathMatch:"prefix"},{path:"learn-fifths",component:m8,pathMatch:"prefix"},{path:"learn-rythm",component:Rd,pathMatch:"prefix"},{path:"full-score",component:$1,pathMatch:"prefix"},{path:"hearing",component:K1,pathMatch:"prefix"},{path:"select-exercise",component:R8,pathMatch:"prefix"},{path:"create-exercise",component:N8},{path:"score/new_score",component:cf,pathMatch:"prefix",resolve:{sm2:vM}},{path:"score/:score_id",component:cf,pathMatch:"prefix",resolve:{sm2:vM}},{path:"stats/:score_id",component:Y8,pathMatch:"prefix",resolve:{stm:J8}},{path:"store",component:X8},{path:"search",component:cf},{path:"draft",component:M8},{path:"browse",component:cf},{path:"exo",component:F8},{path:"results",component:L8},{path:"artist/:artist",component:j8,pathMatch:"prefix"},{path:"album/:album",component:G8,pathMatch:"prefix"},{path:"style/:style",component:W8,pathMatch:"prefix"},{path:"author/:author",component:z8,pathMatch:"prefix"},{path:"key/:key",component:U8,pathMatch:"prefix"},{path:"reset-password",component:q8,pathMatch:"prefix"},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"**",redirectTo:"/home",pathMatch:"full"}],Q8=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=yr({type:t})}static{this.\u0275inj=pr({providers:[vM,J8],imports:[n1.forRoot(Sse),n1]})}}return t})();var Au=(()=>{class t{constructor(){this.windows=new Map,this.maxZIndex=1e3}createWindow(e,i={}){let r=Et({id:e,isVisible:!1,isMinimized:!1,position:{x:100,y:100},size:{width:800,height:600},zIndex:this.maxZIndex++},i),s=new mi(r);return this.windows.set(e,s),s}getWindow(e){return this.windows.get(e)}showWindow(e){let i=this.windows.get(e);if(i){let r=i.value;i.next(_n(Et({},r),{isVisible:!0,zIndex:this.maxZIndex++}))}}hideWindow(e){let i=this.windows.get(e);if(i){let r=i.value;i.next(_n(Et({},r),{isVisible:!1}))}}toggleWindow(e){let i=this.windows.get(e);i&&(i.value.isVisible?this.hideWindow(e):this.showWindow(e))}minimizeWindow(e){let i=this.windows.get(e);if(i){let r=i.value;i.next(_n(Et({},r),{isMinimized:!r.isMinimized}))}}updateWindowPosition(e,i){let r=this.windows.get(e);if(r){let s=r.value;r.next(_n(Et({},s),{position:i}))}}updateWindowSize(e,i){let r=this.windows.get(e);if(r){let s=r.value;r.next(_n(Et({},s),{size:i}))}}bringToFront(e){let i=this.windows.get(e);if(i){let r=i.value;i.next(_n(Et({},r),{zIndex:this.maxZIndex++}))}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var K8=(()=>{class t{constructor(e){this._http=e,this.modalPayment={hide:!0,loading:!0},this.modalPaymentSuccess={hide:!0},this.amount_symbol={pick:5,strings:10,metronome:20,ukulele:50,pedal:100,other:"?"},this.amount=0,this.client_token="",this.transaction_number=null}ngOnInit(){}show_payment_modal(e="other"){if(console.log("payment initiated => "+e),Object.keys(this.amount_symbol).indexOf(e)!=-1)switch(this.amount=this.amount_symbol[e],e){case"pick":this.symbol="Buy me guitar picks!";break;case"strings":this.symbol="Buy me guitar strings!";break;case"metronome":this.symbol="Buy me a metronome!";break;case"ukulele":this.symbol="Buy me a ukulele!";break;case"pedal":this.symbol="Buy me a guitar pedal!";break;case"other":this.symbol="Buy me anything you want!";break;default:break}else this.amount=null,this.symbol=null;this.getToken_paypal(),this.modalPayment.hide=!1}getToken_paypal(){let e=new Un({"Content-Type":"application/json"});this._http.get(ai.apiGetPaymentToken,{responseType:"text",headers:e}).subscribe(i=>{this.modalPayment.loading=!1;let r=JSON.parse(i);console.log(r),this.client_token=r.client_token,console.log("this.client_token =>",this.client_token),this.loadExternalScript().then(()=>{this.loadButtons()})})}loadExternalScript(){return new Promise((e,i)=>{let r=document.createElement("script");r.src="https://www.paypal.com/sdk/js?client-id="+ai.clientId_prod,r["data-client-token"]=this.client_token,r.onload=e,document.body.appendChild(r)})}loadButtons(){paypal.Buttons({createOrder:(e,i)=>i.order.create({purchase_units:[{amount:{value:this.amount}}]}),onApprove:(e,i)=>i.order.capture().then(function(r){console.log("Capture result",r,JSON.stringify(r,null,2));let s=r.purchase_units[0].payments.captures[0],a=document.getElementById("paymentModal-body");a.innerHTML="<div><h3>Thank you !</h3></div><div> Transaction status: "+s.status+"</div><div>Transaction Id : "+s.id+"</div><div>Transaction amount : "+s.amount.value+"</div>"})}).render("#paypal-button-container")}static{this.\u0275fac=function(i){return new(i||t)(Le(Xi))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-donate"]],standalone:!1,decls:60,vars:8,consts:[["id","donate"],[1,"txt"],[1,"btns"],["name","don-pick","id","don-pick","value","5",3,"click"],["src","assets/img/donate/pic.svg","title","Buy me guitar picks! (5$)"],["name","don-strings","id","don-strings","value","10",3,"click"],["src","assets/img/donate/str.svg","title","Buy me guitar strings! (10$)"],["name","don-metronome","id","don-metronome","value","20",3,"click"],["src","assets/img/donate/met.svg","title","Buy me a metronome! (20$)"],["name","don-ukulele","id","don-ukulele","value","50",3,"click"],["src","assets/img/donate/uku.svg","title","Buy me a ukulele! (50$)"],["name","don-pedal","id","don-pedal","value","100",3,"click"],["src","assets/img/donate/ped.svg","title","Buy me a guitar pedal! (100$)"],["name","don-other","id","don-other","value","0",3,"click"],["src","assets/img/donate/dot.svg","title","Buy me anything you want! (other amount)"],["id","paymentModal","tabindex","-1","role","dialog","aria-labelledby","paymentModalLabel","aria-hidden","true",1,"fakebook-modal","modal",3,"hidden"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","paymentModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["id","paymentModal-body",1,"modal-body"],[1,"spinner3",3,"hidden"],[1,"double-bounce1"],["src","assets/img/music-placeholder-glow.png"],[1,"double-bounce2"],[3,"hidden"],["type","number","id","amount_box",3,"ngModelChange","ngModel"],["id","paypal-button-container",2,"overflow","auto","max-height","600px"],["id","paymentSuccessModal","tabindex","-1","role","dialog","aria-labelledby","paymentModalSuccessLabel","aria-hidden","true",1,"fakebook-modal","modal",3,"hidden"],["id","paymentSuccessModalLabel",1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["id","mySubmit",1,"btn","btn-primary",3,"click"]],template:function(i,r){i&1&&(p(0,"section",0)(1,"div",1)(2,"p")(3,"b"),P(4,"DONATE :"),m(),P(5," Support us with the site development"),m()(),p(6,"div",2)(7,"button",3),J("click",function(){return r.show_payment_modal("pick")}),ie(8,"img",4),m(),p(9,"button",5),J("click",function(){return r.show_payment_modal("strings")}),ie(10,"img",6),m(),p(11,"button",7),J("click",function(){return r.show_payment_modal("metronome")}),ie(12,"img",8),m(),p(13,"button",9),J("click",function(){return r.show_payment_modal("ukulele")}),ie(14,"img",10),m(),p(15,"button",11),J("click",function(){return r.show_payment_modal("pedal")}),ie(16,"img",12),m(),p(17,"button",13),J("click",function(){return r.show_payment_modal("other")}),ie(18,"img",14),m()(),p(19,"div",15)(20,"div",16)(21,"div",17)(22,"div",18)(23,"h5",19),P(24,"DONATE: "),p(25,"span"),P(26),m()(),p(27,"button",20),J("click",function(){return r.modalPayment.hide=!0}),p(28,"span",21),P(29,"\xD7"),m()()(),p(30,"div",22)(31,"div",23)(32,"div",24),ie(33,"img",25),m(),p(34,"div",26),ie(35,"img",25),m()(),p(36,"div",27)(37,"div"),P(38," Amount : "),p(39,"input",28),Fe("ngModelChange",function(a){return Be(r.amount,a)||(r.amount=a),a}),m()(),ie(40,"div",29),m()()()()(),p(41,"div",30)(42,"div",16)(43,"div",17)(44,"div",18)(45,"h5",31),P(46,"Success"),m(),p(47,"button",20),J("click",function(){return r.modalPaymentSuccess.hide=!0}),p(48,"span",21),P(49,"\xD7"),m()()(),p(50,"div",32)(51,"div"),P(52," Thank you for your help :) "),m(),p(53,"div"),P(54),m(),p(55,"div"),P(56),m()(),p(57,"div",33)(58,"button",34),J("click",function(){return r.modalPaymentSuccess.hide=!0}),P(59,"Done"),m()()()()()()),i&2&&(y(19),E("hidden",r.modalPayment.hide),y(7),Yt(r.symbol),y(5),E("hidden",!r.modalPayment.loading),y(5),E("hidden",r.modalPayment.loading),y(3),Oe("ngModel",r.amount),y(2),E("hidden",r.modalPaymentSuccess.hide),y(13),en(" Paid : ",r.amount," "),y(2),en(" Your transaction number : ",r.transaction_number," "))},dependencies:[Gi,Vr,Ti,Mi],styles:["section#donate[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{text-align:right;font-size:12px}section#donate[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-size:15px}section#donate[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0rem;margin-right:5px}section#donate[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{display:flex;flex-direction:row}section#donate[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:transparent}section#donate[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px}section#donate[_ngcontent-%COMP%]   .fakebook-modal[_ngcontent-%COMP%]{position:fixed;left:0;z-index:1050;display:flex;width:100%;height:100%;overflow:hidden;outline:0;color:#000;justify-content:center;align-items:center;background:#0000005c}section#donate[_ngcontent-%COMP%]   .fakebook-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{width:100%;height:auto}section#donate[_ngcontent-%COMP%]   .fakebook-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{background:#28a74569}.braintree-input-class[_ngcontent-%COMP%]{color:#000}.braintree-valid-class[_ngcontent-%COMP%]{color:green}.braintree-invalid-class[_ngcontent-%COMP%]{color:red}.spinner3[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.spinner3[_ngcontent-%COMP%]{width:70px;height:70px;position:relative}.double-bounce1[_ngcontent-%COMP%], .double-bounce2[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;background-color:transparent;opacity:.6;position:absolute;top:0;left:0;-webkit-animation:_ngcontent-%COMP%_sk-bounce 2s infinite ease-in-out;animation:_ngcontent-%COMP%_sk-bounce 2s infinite ease-in-out}.double-bounce2[_ngcontent-%COMP%]{-webkit-animation-delay:-1s;animation-delay:-1s}@-webkit-keyframes _ngcontent-%COMP%_sk-bounce{0%,to{-webkit-transform:scale(0)}50%{-webkit-transform:scale(1)}}@keyframes _ngcontent-%COMP%_sk-bounce{0%,to{transform:scale(0);-webkit-transform:scale(0)}50%{transform:scale(1);-webkit-transform:scale(1)}}"]})}}return t})();var Z8=()=>["/home"],Pc=t=>[t],kse=()=>["/metronome"],Ese=()=>["/fifths"],Tse=()=>["/draft"],Ase=()=>["/select-exercise"];function Dse(t,n){if(t&1){let e=mn();p(0,"li",9)(1,"a",51),J("click",function(){pe(e);let r=ge();return fe(r.show_pass=!1)}),P(2,"Login"),m()()}}function Ise(t,n){if(t&1){let e=mn();p(0,"li",9)(1,"a",52),J("click",function(){pe(e);let r=ge();return fe(r.show_pass=!1)}),P(2,"Sign up"),m()()}}function Ose(t,n){if(t&1&&(p(0,"li",9)(1,"a",53),P(2),m()()),t&2){let e=ge();y(2),en("Welcome ",e.user.user_nick)}}function Fse(t,n){if(t&1&&(p(0,"li",9)(1,"a",12),P(2,"New score"),m()()),t&2){let e=ge();y(),E("routerLink",Ae(1,Pc,"/"+e.newScoreLink))}}function Bse(t,n){if(t&1){let e=mn();p(0,"dd")(1,"a",54),J("click",function(){let r=pe(e).$implicit,s=ge();return fe(s.redirect("/score/"+r.id))}),P(2),m()()}if(t&2){let e=n.$implicit;y(2),Yt(e.name)}}function Lse(t,n){if(t&1){let e=mn();p(0,"dd")(1,"a",55),J("click",function(){pe(e);let r=ge();return fe(r.searchPattrn="")}),P(2),m()()}if(t&2){let e=n.$implicit;y(),E("routerLink",Ae(2,Pc,"/artist/"+e.name)),y(),Yt(e.name)}}function Nse(t,n){if(t&1){let e=mn();p(0,"dd")(1,"a",55),J("click",function(){pe(e);let r=ge();return fe(r.searchPattrn="")}),P(2),m()()}if(t&2){let e=n.$implicit;y(),E("routerLink",Ae(2,Pc,"/album/"+e.name)),y(),Yt(e.name)}}function Vse(t,n){if(t&1){let e=mn();p(0,"dd")(1,"a",55),J("click",function(){pe(e);let r=ge();return fe(r.searchPattrn="")}),P(2),m()()}if(t&2){let e=n.$implicit;y(),E("routerLink",Ae(2,Pc,"/author/"+e.name)),y(),Yt(e.name)}}function Rse(t,n){if(t&1){let e=mn();p(0,"dd")(1,"a",55),J("click",function(){pe(e);let r=ge();return fe(r.searchPattrn="")}),P(2),m()()}if(t&2){let e=n.$implicit;y(),E("routerLink",Ae(2,Pc,"/score/"+e.id)),y(),Yt(e.name)}}function jse(t,n){if(t&1){let e=mn();p(0,"dd")(1,"a",55),J("click",function(){pe(e);let r=ge();return fe(r.searchPattrn="")}),P(2),m()()}if(t&2){let e=n.$implicit;y(),E("routerLink",Ae(2,Pc,"/style/"+e.name)),y(),Yt(e.name)}}function Gse(t,n){if(t&1){let e=mn();p(0,"dd")(1,"a",55),J("click",function(){pe(e);let r=ge();return fe(r.searchPattrn="")}),P(2),m()()}if(t&2){let e=n.$implicit;y(),E("routerLink",Ae(2,Pc,"/score/"+e.id)),y(),Yt(e.name)}}var eF=(()=>{class t{constructor(e,i,r,s){this.user=e,this.router=i,this._http=r,this.windowManager=s,this.show_pass=!1,this.show_resetInfos=!1,this.show_signupInfos=!1,this.searchPattrn="",this.searchResults1=[],this.searchResults2=[],this.searchResults3=[],this.searchResults4=[],this.searchResults5=[],this.searchResults6=[],this.searchResults7=[]}ngOnInit(){this.newScoreLink=ai.newScore,this.storeLink=ai.store,this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.router.onSameUrlNavigation="reload"}ngAfterViewInit(){$(document).ready(function(){window.location.href.indexOf("#sign-up-modal")!=-1&&$("#sign-up-modal").modal("show")})}ngOnDestroy(){this.loginRes$&&this.loginRes$.unsubscribe(),this.resetRes$&&this.resetRes$.unsubscribe(),this.signupRes$&&this.signupRes$.unsubscribe()}login(){this.user.set_user_email(this.user_email),this.loginRes$=this.user.login(this.user_pass).subscribe(e=>{switch(console.log("data  : "+e),e){case"wrong email":$("#li_email").css("border-color","red"),$("#li_psw").css("border-color","black");break;case"wrong pass":$("#li_email").css("border-color","black"),$("#li_psw").css("border-color","red");break;case"empty infos":$("#li_psw").css("border-color","red"),$("#li_email").css("border-color","red");break;case"login ok":this.closeModal();break;default:$("#li_psw").css("border-color","black"),$("#li_email").css("border-color","black")}},e=>console.log(e),()=>{console.log("Login Complete")})}logout(){this.user.logout()}closeModal(){$("#li_psw").css("border-color","black"),$("#li_email").css("border-color","black"),$("#li_psw").val(""),$("#li_email").val(""),$("#su_psw").css("border-color","black"),$("#su_email").css("border-color","black"),$("#su_psw2").css("border-color","black"),$("#su_nick").css("border-color","black"),$("#su_psw").val(""),$("#su_email").val(""),$("#su_psw2").val(""),$("#su_nick").val(""),$("#su_infos").css("color","var(--red_nvx)"),$(".modal").modal("hide"),$(".toggle_pass").prop("checked",!1),$("#fp_email").css("border-color","black"),$("#fp_infos").text(""),this.show_resetInfos=!1,this.show_signupInfos=!1}signUp(){this.passverif==this.user_pass&&(this.signupRes$=this.user.sign_up(this.user_pass,this.user_email,this.user_nick).subscribe(e=>{switch(console.log("data  : "+e),e){case"email error":$("#su_email").css("border-color","red"),$("#su_nick").css("border-color","black"),$("#su_infos").text("This email is already used."),this.show_signupInfos=!0;break;case"nick error":$("#su_email").css("border-color","black"),$("#su_nick").css("border-color","red"),$("#su_infos").text("This nickname is already used."),this.show_signupInfos=!0;break;case"signup complete":this.user.set_user_email(this.user_email),this.user.set_user_nick(this.user_nick),$("#su_nick").css("border-color","black"),$("#su_email").css("border-color","black"),$("#su_infos").text("Account created successfully !"),$("#su_infos").css("color","var(--green_nvx)"),this.show_signupInfos=!0,setTimeout(()=>{this.closeModal()},3e3);break;default:$("#su_nick").css("border-color","black"),$("#su_email").css("border-color","black")}},e=>console.log(e),()=>{console.log("Sign Up Complete")}))}showPass(){this.show_pass=!this.show_pass}resetPass(){this.user.set_user_email(this.user_email),this.resetRes$=this.user.reset_password().subscribe(e=>{switch(console.log("data  : "+e),e){case"Error while sending email.":$("#fp_infos").text("An error occured. We are unable to reset your password at the moment. Please try again later."),$("#fp_infos").css("color","var(--red_nvx)"),this.show_resetInfos=!0;break;case"Unknown email adress.":$("#fp_email").css("border-color","red"),$("#fp_infos").text("Unknown email adress. Please enter a valid email."),$("#fp_infos").css("color","var(--red_nvx)"),this.show_resetInfos=!0;break;case"Thank you for sending e-mail.":$("#fp_infos").text("Email sent! Don't forget to check your spams :)"),$("#fp_infos").css("color","var(--green_nvx)"),this.show_resetInfos=!0,setTimeout(()=>{this.closeModal()},3e3);break;default:$("#fp_infos").text("An error occured. We are unable to reset your password at the moment. Please try again later."),$("#fp_infos").css("color","var(--red_nvx)"),this.show_resetInfos=!0}},e=>console.log(e),()=>{console.log("Reset Complete")})}search(){this.clearSearch(),this.searchPattrn!=""&&(this.searchWithObject(this.getSearchObj("title",this.searchPattrn),this.searchResults1,"title"),this.searchWithObject(this.getSearchObj("artist",this.searchPattrn),this.searchResults2,"artist"),this.searchWithObject(this.getSearchObj("album",this.searchPattrn),this.searchResults3,"album"),this.searchWithObject(this.getSearchObj("author",this.searchPattrn),this.searchResults4,"author"),this.searchWithObject(this.getSearchObj("key",this.searchPattrn),this.searchResults5,"key"),this.searchWithObject(this.getSearchObj("style",this.searchPattrn),this.searchResults6,"style"),this.searchWithObject(this.getSearchObj("chords",this.searchPattrn),this.searchResults7,"chords"))}clearSearch(){this.searchResults1=[],this.searchResults2=[],this.searchResults3=[],this.searchResults4=[],this.searchResults5=[],this.searchResults6=[],this.searchResults7=[]}getSearchObj(e,i){let r={pattrnTitle:"",pattrnArtist:"",pattrnAlbum:"",pattrnAuthor:"",pattrnKey:"",pattrnStyle:"",pattrnChords:""};switch(e){case"title":r.pattrnTitle=i;break;case"artist":r.pattrnArtist=i;break;case"album":r.pattrnAlbum=i;break;case"author":r.pattrnAuthor=i;break;case"key":r.pattrnKey=i;break;case"style":r.pattrnStyle=i;break;case"chords":r.pattrnChords=i;break}return r}searchWithObject(e,i,r){let s=new Un({"Content-Type":"application/json"});this._http.post(ai.apiSearchAnalysis,e,{responseType:"text",headers:s}).subscribe(a=>{try{console.log("category =>",r);var l=JSON.parse(a);for(let d of l)if(i.filter(u=>u.name===d[r]).length==0&&i.filter(u=>u.name===d.title).length==0){let u={},h=d[r=="key"||r=="chords"?"title":r];u.name=h,u.id=d[0],i.push(u)}console.log("resultObj =>",i)}catch{}},a=>{},()=>{})}redirect(e){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate([e])),this.searchPattrn=""}toggleMagic18(){this.windowManager.toggleWindow("magic18")}static{this.\u0275fac=function(i){return new(i||t)(Le(es),Le(wr),Le(Xi),Le(Au))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-navbar"]],standalone:!1,decls:124,vars:51,consts:[["id","nvx-nav"],[1,"navbar","navbar-expand-lg","fixed-top","navbar-dark","bg-dark"],[1,"navbar-brand","logo",3,"routerLink"],["src","assets/img/music-placeholder-glowtitled.png"],["type","button","data-toggle","collapse","data-target","#navbarTogglerDemo03","aria-controls","navbarTogglerDemo03","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarTogglerDemo03",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto","mt-2","mt-lg-0"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["href","#",1,"nav-link",3,"click"],[1,"nav-item",2,"display","none"],["href","#",1,"nav-link",3,"routerLink"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["href","#",1,"dropdown-item",3,"routerLink"],[1,"dropdown-divider"],[1,"dropdown-divider",3,"hidden"],["href","#",1,"dropdown-item",3,"click","hidden","routerLink"],[1,"form-inline","my-2","my-lg-0","global-search"],["type","search","autocomplete","off","placeholder","Search","name","searchBar","aria-label","Search",1,"form-control","mr-sm-2",3,"ngModelChange","ngModel"],[1,"search-results",3,"hidden"],[3,"hidden"],[4,"ngFor","ngForOf"],[2,"color","white"],["ngNativeValidate","","id","login-modal","data-backdrop","static","role","form",1,"modal","fade",3,"ngSubmit"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],[1,"modal-body"],["id","li_email","name","li_email","type","email","placeholder","email","title","Must contain @","required","","pattern","[^ @]*@[^ @]*",3,"ngModelChange","ngModel"],["id","li_psw","name","li_psw","placeholder","password","required","",3,"ngModelChange","type","ngModel"],[1,"chkpass"],["type","checkbox",1,"toggle_pass",3,"click"],["href","#","data-toggle","modal","data-target","#forgot-modal",2,"padding-left","50px",3,"click"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary"],["ngNativeValidate","","id","sign-up-modal","data-backdrop","static","role","form",1,"modal","fade",3,"ngSubmit"],["name","su_email","id","su_email","type","email","placeholder","email","title","Must contain @","required","","pattern","[^ @]*@[^ @]*",3,"ngModelChange","ngModel"],["name","su_psw","id","su_psw","placeholder","password","pattern","(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}","title","Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters","required","",3,"ngModelChange","type","ngModel"],["name","su_psw2","id","su_psw2","placeholder","password again","pattern","(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}","title","Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters","required","",3,"ngModelChange","type","ngModel"],[2,"color","red",3,"hidden"],["name","su_nick","id","su_nick","type","text","placeholder","nickname","required","",3,"ngModelChange","ngModel"],["id","su_infos",2,"color","red",3,"hidden"],["ngNativeValidate","","id","forgot-modal","data-backdrop","static","role","form",1,"modal",3,"ngSubmit"],[2,"color","var(--darkgray_nvx)"],["id","fp_email","name","fp_email","type","email","placeholder","email","title","Must contain @","required","","pattern","[^ @]*@[^ @]*",3,"ngModelChange","ngModel"],["id","fp_infos",2,"color","red",3,"hidden"],["href","#","data-toggle","modal","data-target","#login-modal",1,"nav-link",3,"click"],["href","#","data-toggle","modal","data-target","#sign-up-modal",1,"nav-link",3,"click"],["href","#",1,"nav-link","disabled"],[1,"fake-link",3,"click"],[3,"click","routerLink"]],template:function(i,r){i&1&&(p(0,"section",0)(1,"nav",1)(2,"a",2),ie(3,"img",3),m(),p(4,"button",4),ie(5,"span",5),m(),p(6,"div",6)(7,"ul",7),Wt(8,Dse,3,0,"li",8)(9,Ise,3,0,"li",8)(10,Ose,3,1,"li",8)(11,Fse,3,3,"li",8),p(12,"li",9)(13,"a",10),J("click",function(){return r.toggleMagic18()}),P(14,"\u2728 Magic 18"),m()(),p(15,"li",11)(16,"a",12),P(17,"Store"),m()(),p(18,"li",13)(19,"a",14),P(20," Tools "),m(),p(21,"div",15)(22,"a",16),P(23,"Metronome"),m(),p(24,"a",16),P(25,"Fifths circle"),m(),p(26,"a",16),P(27,"Draft"),m(),ie(28,"div",17),p(29,"a",16),P(30,"Exercises"),m(),ie(31,"div",18),p(32,"a",19),J("click",function(){return r.logout()}),P(33,"Logout"),m()()()(),p(34,"form",20)(35,"div")(36,"input",21),Fe("ngModelChange",function(a){return Be(r.searchPattrn,a)||(r.searchPattrn=a),a}),J("ngModelChange",function(){return r.search()}),m(),p(37,"div",22)(38,"dl")(39,"dt",23),P(40," No results have been found "),m(),p(41,"dt",23),P(42,"Title"),m(),Wt(43,Bse,3,1,"dd",24),p(44,"dt",23),P(45,"Artist"),m(),Wt(46,Lse,3,4,"dd",24),p(47,"dt",23),P(48,"Album"),m(),Wt(49,Nse,3,4,"dd",24),p(50,"dt",23),P(51,"Author"),m(),Wt(52,Vse,3,4,"dd",24),p(53,"dt",23),P(54,"Key"),m(),Wt(55,Rse,3,4,"dd",24),p(56,"dt",23),P(57,"Style"),m(),Wt(58,jse,3,4,"dd",24),p(59,"dt",23),P(60,"Chords"),m(),Wt(61,Gse,3,4,"dd",24),m()()()(),ie(62,"app-donate",25),m()(),p(63,"form",26),J("ngSubmit",function(){return r.login()}),p(64,"div",27)(65,"div",28)(66,"div",29)(67,"h5",30),P(68,"Log in"),m(),p(69,"button",31),J("click",function(){return r.closeModal()}),P(70,"\xD7"),m()(),p(71,"div",32)(72,"input",33),Fe("ngModelChange",function(a){return Be(r.user_email,a)||(r.user_email=a),a}),m(),p(73,"input",34),Fe("ngModelChange",function(a){return Be(r.user_pass,a)||(r.user_pass=a),a}),m(),p(74,"div",35)(75,"input",36),J("click",function(){return r.showPass()}),m(),p(76,"span"),P(77,"Show Password"),m(),p(78,"a",37),J("click",function(){return r.closeModal()}),P(79,"Forgot password"),m()()(),p(80,"div",38)(81,"button",39),P(82,"Login"),m()()()()(),p(83,"form",40),J("ngSubmit",function(){return r.signUp()}),p(84,"div",27)(85,"div",28)(86,"div",29)(87,"h5",30),P(88,"Sign up !"),m(),p(89,"button",31),J("click",function(){return r.closeModal()}),P(90,"\xD7"),m()(),p(91,"div",32)(92,"input",41),Fe("ngModelChange",function(a){return Be(r.user_email,a)||(r.user_email=a),a}),m(),p(93,"input",42),Fe("ngModelChange",function(a){return Be(r.user_pass,a)||(r.user_pass=a),a}),m(),p(94,"input",43),Fe("ngModelChange",function(a){return Be(r.passverif,a)||(r.passverif=a),a}),m(),p(95,"div",35)(96,"input",36),J("click",function(){return r.showPass()}),m(),p(97,"span"),P(98,"Show Passwords"),m(),p(99,"span",44),P(100,"Passwords are differents"),m()(),p(101,"input",45),Fe("ngModelChange",function(a){return Be(r.user_nick,a)||(r.user_nick=a),a}),m()(),p(102,"div",38),ie(103,"h6",46),p(104,"button",39),P(105,"Sign up"),m()()()()(),p(106,"form",47),J("ngSubmit",function(){return r.resetPass()}),p(107,"div",27)(108,"div",28)(109,"div",29)(110,"h5",30),P(111,"Forgot password ?"),m(),p(112,"button",31),J("click",function(){return r.closeModal()}),P(113,"\xD7"),m()(),p(114,"div",32)(115,"h6",48),P(116,"Please enter the email used for Novaxe."),ie(117,"br"),P(118,"We will send you a link to reset your password."),m(),p(119,"input",49),Fe("ngModelChange",function(a){return Be(r.user_email,a)||(r.user_email=a),a}),m(),ie(120,"h6",50),m(),p(121,"div",38)(122,"button",39),P(123,"Send"),m()()()()()()),i&2&&(y(2),E("routerLink",dn(43,Z8)),y(6),E("ngIf",!r.user.user_is_logged.value),y(),E("ngIf",!r.user.user_is_logged.value),y(),E("ngIf",r.user.user_is_logged.value),y(),E("ngIf",r.user.user_is_logged.value),y(5),E("routerLink",Ae(44,Pc,"/"+r.storeLink)),y(6),E("routerLink",dn(46,kse)),y(2),E("routerLink",dn(47,Ese)),y(2),E("routerLink",dn(48,Tse)),y(3),E("routerLink",dn(49,Ase)),y(2),E("hidden",!r.user.is_logged().value),y(),E("hidden",!r.user.is_logged().value)("routerLink",dn(50,Z8)),y(4),Oe("ngModel",r.searchPattrn),y(),E("hidden",r.searchPattrn==""),y(2),E("hidden",r.searchResults1.length!=0||r.searchResults2.length!=0||r.searchResults3.length!=0||r.searchResults4.length!=0||r.searchResults5.length!=0||r.searchResults6.length!=0||r.searchResults7.length!=0),y(2),E("hidden",r.searchResults1.length==0),y(2),E("ngForOf",r.searchResults1),y(),E("hidden",r.searchResults2.length==0),y(2),E("ngForOf",r.searchResults2),y(),E("hidden",r.searchResults3.length==0),y(2),E("ngForOf",r.searchResults3),y(),E("hidden",r.searchResults4.length==0),y(2),E("ngForOf",r.searchResults4),y(),E("hidden",r.searchResults5.length==0),y(2),E("ngForOf",r.searchResults5),y(),E("hidden",r.searchResults6.length==0),y(2),E("ngForOf",r.searchResults6),y(),E("hidden",r.searchResults7.length==0),y(2),E("ngForOf",r.searchResults7),y(11),Oe("ngModel",r.user_email),y(),E("type",r.show_pass?"text":"password"),Oe("ngModel",r.user_pass),y(19),Oe("ngModel",r.user_email),y(),E("type",r.show_pass?"text":"password"),Oe("ngModel",r.user_pass),y(),E("type",r.show_pass?"text":"password"),Oe("ngModel",r.passverif),y(5),E("hidden",r.passverif==r.user_pass),y(2),Oe("ngModel",r.user_nick),y(2),E("hidden",!r.show_signupInfos),y(16),Oe("ngModel",r.user_email),y(),E("hidden",!r.show_resetInfos))},dependencies:[gi,vr,Ns,d5,Gi,Ti,Xg,ip,rp,Mi,np,K8],styles:['section#nvx-nav[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;background-color:var(--dark_prim);padding:0rem 2rem}section#nvx-nav[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{width:5%;padding:0;margin:0;max-height:75px}section#nvx-nav[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;max-height:65px;margin:5px 0}section#nvx-nav[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--light_prim);font-weight:700;position:absolute}section#nvx-nav[_ngcontent-%COMP%]   .navbar-collapse[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:3.5rem}section#nvx-nav[_ngcontent-%COMP%]   .navbar-collapse[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:var(--light_prim)}section#nvx-nav[_ngcontent-%COMP%]   .navbar-collapse[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .nav-link.disabled[_ngcontent-%COMP%]{color:var(--gray_sec)}section#nvx-nav[_ngcontent-%COMP%]   .global-search[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{max-width:290px}section#nvx-nav[_ngcontent-%COMP%]   .global-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:transparent;outline:0;box-shadow:none}section#nvx-nav[_ngcontent-%COMP%]   .global-search[_ngcontent-%COMP%]   a.btn[_ngcontent-%COMP%]{color:var(--light_prim);border:2px solid var(--green_nvx)}section#nvx-nav[_ngcontent-%COMP%]   .global-search[_ngcontent-%COMP%]   a.btn[_ngcontent-%COMP%]:hover{background-color:#28a74570;color:#fff}section#nvx-nav[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]{background:#fff;position:absolute;padding:0 10px;border:1px solid #dcdcdc;border-radius:5px;min-width:233px;overflow-y:scroll;max-height:400px}section#nvx-nav[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{text-transform:uppercase;font-size:12px;background:#8e9cff66;border-radius:5px;padding:0 5px}section#nvx-nav[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{font-size:12px;padding-left:.5rem}section#nvx-nav[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:5px 0;border-top:0;border-left:0;border-right:0;border-width:.5px}section#nvx-nav[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:var(--blue_nvx) auto 1px}section#nvx-nav[_ngcontent-%COMP%]   .chkpass[_ngcontent-%COMP%]{font-size:12px;display:flex;align-items:center}section#nvx-nav[_ngcontent-%COMP%]   .chkpass[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:5px}section#nvx-nav[_ngcontent-%COMP%]   .chkpass[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{color:var(--light_prim)}section#nvx-nav[_ngcontent-%COMP%]   .chkpass[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:after{width:15px;height:15px;inset:-1px 0 0 -1px;position:relative;content:"";display:block;visibility:visible;padding:0;border-radius:4px}section#nvx-nav[_ngcontent-%COMP%]   .chkpass[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:after{width:15px;height:15px;inset:-1px 0 0 -1px;position:relative;background-color:var(--green_nvx);content:"";display:block;visibility:visible;border:2px solid var(--light_prim);border-radius:4px}section#nvx-nav[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{position:fixed;left:0;z-index:1050;width:100%;height:100%;overflow:hidden;outline:0;justify-content:center;align-items:center;background:#0000005c}section#nvx-nav[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{width:100%;height:auto}section#nvx-nav[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{background:#28a74569}section#nvx-nav[_ngcontent-%COMP%]   #sign-up-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}section#nvx-nav[_ngcontent-%COMP%]   #sign-up-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto}.fake-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.fake-link[_ngcontent-%COMP%]{color:#007bff;cursor:pointer}']})}}return t})();var zse=["fretboard"];function Use(t,n){if(t&1){let e=mn();p(0,"div",49)(1,"h3"),P(2,"Interactive Magic 18 Chart"),m(),p(3,"div",50),ie(4,"object",51),p(5,"div",52),J("click",function(){pe(e);let r=ge(2);return fe(r.testClick())}),m(),p(6,"div",53),J("click",function(){pe(e);let r=ge(2);return fe(r.selectChord("I"))}),m(),p(7,"div",54),J("click",function(){pe(e);let r=ge(2);return fe(r.selectChord("ii"))}),m(),p(8,"div",55),J("click",function(){pe(e);let r=ge(2);return fe(r.selectChord("iii"))}),m(),p(9,"div",56),J("click",function(){pe(e);let r=ge(2);return fe(r.selectChord("IV"))}),m(),p(10,"div",57),J("click",function(){pe(e);let r=ge(2);return fe(r.selectChord("V"))}),m(),p(11,"div",58),J("click",function(){pe(e);let r=ge(2);return fe(r.handleNoteClick("C"))}),m(),p(12,"div",59),J("click",function(){pe(e);let r=ge(2);return fe(r.handleNoteClick("D"))}),m(),p(13,"div",60),J("click",function(){pe(e);let r=ge(2);return fe(r.handleNoteClick("E"))}),m(),p(14,"div",61),J("click",function(){pe(e);let r=ge(2);return fe(r.handlePentatonicClick("C-Pent-1"))}),m(),p(15,"div",62),J("click",function(){pe(e);let r=ge(2);return fe(r.handlePentatonicClick("C-Pent-2"))}),m()()()}}function qse(t,n){if(t&1){let e=mn();p(0,"button",63),J("click",function(){pe(e);let r=ge(2);return fe(r.playChordAudio(r.activeChord))}),P(1," \u25B6 Play C "),m()}}function Hse(t,n){if(t&1){let e=mn();p(0,"div",2),J("mousedown",function(){pe(e);let r=ge();return fe(r.onWindowClick())}),p(1,"div",3)(2,"div",4)(3,"span",5),P(4,"\u2665"),m(),p(5,"span"),P(6,"Magic 18 Chord Chart"),m()(),p(7,"div",6),P(8," Interactive guitar chord learning system - Starting with chord I (C major) "),m(),p(9,"div",7)(10,"button",8),J("click",function(){pe(e);let r=ge();return fe(r.onMinimize())}),P(11,"\u2212"),m(),p(12,"button",9),J("click",function(){pe(e);let r=ge();return fe(r.onClose())}),P(13,"\xD7"),m()()(),p(14,"div",10)(15,"button",11),J("click",function(){pe(e);let r=ge();return fe(r.close())}),P(16,"Hide Magic 18 Chart"),m()(),p(17,"div",12)(18,"div",13)(19,"span",14),P(20,"Key:"),m(),p(21,"button",15),J("click",function(){pe(e);let r=ge();return fe(r.changeKey("C"))}),P(22,"C Major"),m(),p(23,"button",16),P(24,"Open Fretboard"),m()(),p(25,"div",17)(26,"div",18)(27,"div",19),J("click",function(){pe(e);let r=ge();return fe(r.selectChord("I"))}),p(28,"div",20),P(29,"I"),m(),p(30,"div",21),P(31,"C"),m(),p(32,"div",22),P(33,"Major"),m()(),p(34,"div",23),J("click",function(){pe(e);let r=ge();return fe(r.selectChord("ii"))}),p(35,"div",20),P(36,"ii"),m(),p(37,"div",21),P(38,"Dm"),m(),p(39,"div",22),P(40,"Minor"),m()(),p(41,"div",23),J("click",function(){pe(e);let r=ge();return fe(r.selectChord("iii"))}),p(42,"div",20),P(43,"iii"),m(),p(44,"div",21),P(45,"Em"),m(),p(46,"div",22),P(47,"Minor"),m()(),p(48,"div",19),J("click",function(){pe(e);let r=ge();return fe(r.selectChord("IV"))}),p(49,"div",20),P(50,"IV"),m(),p(51,"div",21),P(52,"F"),m(),p(53,"div",22),P(54,"Major"),m()(),p(55,"div",19),J("click",function(){pe(e);let r=ge();return fe(r.selectChord("V"))}),p(56,"div",20),P(57,"V"),m(),p(58,"div",21),P(59,"G"),m(),p(60,"div",22),P(61,"Major"),m()(),p(62,"div",23),J("click",function(){pe(e);let r=ge();return fe(r.selectChord("vi"))}),p(63,"div",20),P(64,"vi"),m(),p(65,"div",21),P(66,"Am"),m(),p(67,"div",22),P(68,"Minor"),m()(),p(69,"div",24),J("click",function(){pe(e);let r=ge();return fe(r.selectChord("vii\xB0"))}),p(70,"div",20),P(71,"vii\xB0"),m(),p(72,"div",21),P(73,"B\xB0"),m(),p(74,"div",22),P(75,"Diminished"),m()()(),p(76,"div",25)(77,"div",26),J("click",function(){pe(e);let r=ge();return fe(r.selectChord("\u22077"))}),p(78,"div",20),P(79,"\u22077"),m(),p(80,"div",21),P(81,"C7"),m(),p(82,"div",22),P(83,"Dominant7"),m()(),p(84,"div",27),J("click",function(){pe(e);let r=ge();return fe(r.selectChord("\u2207ii7"))}),p(85,"div",20),P(86,"\u2207ii7"),m(),p(87,"div",21),P(88,"Am7"),m(),p(89,"div",22),P(90,"Minor7"),m()()()(),p(91,"div",28)(92,"div",29),P(93),m(),p(94,"div",30),P(95,"C major - open position"),m()(),Wt(96,Use,16,0,"div",31),p(97,"div",32)(98,"button",33),P(99,"View Fretboard"),m(),p(100,"button",34),P(101,"View Intervals"),m()(),p(102,"div",35),Wt(103,qse,2,0,"button",36),p(104,"button",37),P(105,"Strum Chord"),m()(),p(106,"div",38)(107,"div",39),ie(108,"span",40),p(109,"span",41),P(110,"Root (Green)"),m()(),p(111,"div",39),ie(112,"span",42),p(113,"span",41),P(114,"Third (Red)"),m()(),p(115,"div",39),ie(116,"span",43),p(117,"span",41),P(118,"Fifth (Blue)"),m()(),p(119,"div",39),ie(120,"span",44),p(121,"span",41),P(122,"Seventh (Grey)"),m()()(),p(123,"div",45),ie(124,"app-fretboard",null,0),m(),p(126,"div",46)(127,"div",47)(128,"span",48),P(129,"\u2713"),m(),p(130,"span"),P(131,"Real audio playback with strumming simulation"),m()(),p(132,"div",47)(133,"span",48),P(134,"\u2713"),m(),p(135,"span"),P(136,"PC mapping chord codes"),m()(),p(137,"div",47)(138,"span",48),P(139,"\u2713"),m(),p(140,"span"),P(141,"Advanced fingering patterns"),m()(),p(142,"div",47)(143,"span",48),P(144,"\u2713"),m(),p(145,"span"),P(146,"Major key chords"),m()()()()()}if(t&2){let e=n.ngIf,i=ge();cn("display",e.isVisible?"block":"none")("left",e.position.x,"px")("top",e.position.y,"px")("width",e.size.width,"px")("height",e.size.height,"px")("z-index",e.zIndex),y(21),Xn("active",i.currentKey==="C"),y(6),Xn("active",i.activeRoman==="I"),y(7),Xn("active",i.activeRoman==="ii"),y(7),Xn("active",i.activeRoman==="iii"),y(7),Xn("active",i.activeRoman==="IV"),y(7),Xn("active",i.activeRoman==="V"),y(7),Xn("active",i.activeRoman==="vi"),y(7),Xn("active",i.activeRoman==="vii\xB0"),y(8),Xn("active",i.activeRoman==="\u22077"),y(7),Xn("active",i.activeRoman==="\u2207ii7"),y(9),Yt(i.activeRoman?i.activeRoman+" - "+(i.activeChord==null?null:i.activeChord.chords[0]):"Select a chord..."),y(3),E("ngIf",i.currentKey==="C"),y(7),E("ngIf",i.activeChord),y(21),cn("width","300px")("height","180px")("transform","scale(0.6)")("transform-origin","top left")}}var tF=(()=>{class t{constructor(e,i,r){this.windowManager=e,this.soundfontService=i,this.cdr=r,this.isVisible=!1,this.destroy$=new yn,this.currentKey="C",this.currentMode="major",this.activeChord=null,this.activeRoman="",this.majorKeyChords=[{roman:"I",symbol:"C",quality:"Major",color:"#E74C3C",intervals:["1","3","5"]},{roman:"ii",symbol:"Dm",quality:"Minor",color:"#3498DB",intervals:["1","b3","5"]},{roman:"iii",symbol:"Em",quality:"Minor",color:"#3498DB",intervals:["1","b3","5"]},{roman:"IV",symbol:"F",quality:"Major",color:"#E74C3C",intervals:["1","3","5"]},{roman:"V",symbol:"G",quality:"Major",color:"#E74C3C",intervals:["1","3","5"]},{roman:"vi",symbol:"Am",quality:"Minor",color:"#3498DB",intervals:["1","b3","5"]},{roman:"vii\xB0",symbol:"B\xB0",quality:"Diminished",color:"#9B59B6",intervals:["1","b3","b5"]},{roman:"\u22077",symbol:"C7",quality:"Dominant7",color:"#F39C12",intervals:["1","3","5","b7"]},{roman:"\u2207ii7",symbol:"Am7",quality:"Minor7",color:"#27AE60",intervals:["1","b3","5","b7"]}],this.minorKeyChords=[],this.windowState$=this.windowManager.createWindow("magic18",{position:{x:50,y:50},size:{width:900,height:650},isVisible:!1})}ngOnInit(){setTimeout(()=>{this.majorKeyChords.length>0&&this.selectChord("I")},100)}selectChord(e){let i=this.majorKeyChords.find(l=>l.roman===e);if(!i)return;let r=this.getChordSymbolForKey(i,this.currentKey),s=qn.get(r),a={chords:[r],chord:{symbol:r,root:s.root||this.currentKey,quality:i.quality,intervals:s.intervals||i.intervals}};this.fretboard&&this.fretboard.light_chord&&this.fretboard.light_chord(a),this.activeChord=a,this.activeRoman=e,this.playChordAudio(a),this.cdr.markForCheck(),console.log("\u2705 Chord selected and played:",e,r)}getChordSymbolForKey(e,i){if(["C","D","E","F","G","A","B"].indexOf(i)===-1)return e.symbol;let a=["I","ii","iii","IV","V","vi","vii\xB0"].indexOf(e.roman);return a===-1?e.symbol:{C:["C","Dm","Em","F","G","Am","B\xB0"],D:["D","Em","F#m","G","A","Bm","C#\xB0"],E:["E","F#m","G#m","A","B","C#m","D#\xB0"],F:["F","Gm","Am","Bb","C","Dm","E\xB0"],G:["G","Am","Bm","C","D","Em","F#\xB0"],A:["A","Bm","C#m","D","E","F#m","G#\xB0"],B:["B","C#m","D#m","E","F#","G#m","A#\xB0"]}[i]?.[a]||e.symbol}chordToMidi(e){let i=qn.get(e),r=[];return i.notes.forEach(s=>{let a=nn.midi(s+"4");a&&r.push(a)}),r}playChordAudio(e){if(!e||!this.soundfontService.piano){console.log("\u26A0\uFE0F Piano not ready or no chord provided");return}console.log("\u{1F3B5} Playing chord:",e.chords?.[0]||e);try{let i=e.chords?.[0]||e.symbol||e,s=qn.get(i).notes;if(s.length>0)s.forEach((a,l)=>{setTimeout(()=>{this.soundfontService.playNote(a+"4")},l*80)}),console.log("\u{1F3BC} Played chord notes:",s);else{let a=i.charAt(0);this.soundfontService.playNote(a+"4"),console.log("\u{1F3BC} Played root note:",a)}}catch(i){console.error("\u274C Error playing chord:",i),["C","E","G"].forEach((r,s)=>{setTimeout(()=>{this.soundfontService.playNote(r+"4")},s*80)})}}changeKey(e){this.currentKey=e,this.activeRoman&&this.selectChord(this.activeRoman)}toggleMode(){this.currentMode=this.currentMode==="major"?"minor":"major"}close(){this.windowManager.hideWindow("magic18")}onWindowClick(){this.windowManager.bringToFront("magic18")}onMinimize(){this.windowManager.minimizeWindow("magic18")}onClose(){this.windowManager.hideWindow("magic18")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}testClick(){console.log("\u{1F3AF} Test click detected!"),this.soundfontService.piano&&this.soundfontService.playNote("C4"),alert("Click zone working!")}handleNoteClick(e){console.log("\u{1F3B5} Note clicked:",e),this.soundfontService.piano&&this.soundfontService.playNote(e+"4"),this.cdr.markForCheck()}handlePentatonicClick(e){console.log("\u{1F3B8} Pentatonic note clicked:",e);let i=e.split("-")[0];this.getPentatonicScale(i).forEach((s,a)=>{setTimeout(()=>{this.soundfontService.piano&&this.soundfontService.playNote(s+"4")},a*150)}),this.cdr.markForCheck()}getPentatonicScale(e){let i=[0,2,4,7,9],r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],s=r.indexOf(e);return s===-1?["C","D","E","G","A"]:i.map(a=>{let l=(s+a)%12;return r[l]})}static{this.\u0275fac=function(i){return new(i||t)(Le(Au),Le(Vd),Le(sa))}}static{this.\u0275cmp=zt({type:t,selectors:[["app-magic18-chord-chart"]],viewQuery:function(i,r){if(i&1&&xl(zse,5),i&2){let s;Na(s=Va())&&(r.fretboard=s.first)}},inputs:{isVisible:"isVisible"},standalone:!1,decls:2,vars:3,consts:[["fretboard",""],["class","magic18-window",3,"display","left","top","width","height","z-index","mousedown",4,"ngIf"],[1,"magic18-window",3,"mousedown"],[1,"window-header"],[1,"window-title"],[1,"heart"],[1,"window-subtitle"],[1,"window-controls"],["title","Minimize",1,"control-btn","minimize",3,"click"],["title","Close",1,"control-btn","close",3,"click"],[1,"hide-chart-container"],[1,"hide-magic18-btn",3,"click"],[1,"magic18-main-container"],[1,"key-controls"],[1,"key-label"],[1,"key-btn",3,"click"],[1,"open-fretboard-btn"],[1,"chord-grid"],[1,"chord-row"],[1,"chord-card","major",3,"click"],[1,"roman-numeral"],[1,"chord-symbol"],[1,"chord-quality"],[1,"chord-card","minor",3,"click"],[1,"chord-card","diminished",3,"click"],[1,"chord-row","bottom-row"],[1,"chord-card","dominant7",3,"click"],[1,"chord-card","minor7",3,"click"],[1,"current-chord-display"],[1,"chord-name"],[1,"chord-position"],["class","magic18-svg-section",4,"ngIf"],[1,"action-buttons"],["title","View on Fretboard",1,"fretboard-btn"],["title","View Intervals",1,"intervals-btn"],[1,"play-controls"],["class","play-btn",3,"click",4,"ngIf"],["title","Strum Chord",1,"strum-btn"],[1,"color-legend"],[1,"legend-item"],[1,"color-dot","root"],[1,"label"],[1,"color-dot","third"],[1,"color-dot","fifth"],[1,"color-dot","seventh"],[1,"compact-fretboard-container"],[1,"feature-list"],[1,"feature-item"],[1,"checkmark"],[1,"magic18-svg-section"],[1,"svg-clickable-wrapper"],["data",S0`assets/magic18-charts/Charts Magic18 SVG_C Left.svg`,"type","image/svg+xml",1,"magic18-chart-svg"],["title","Test Click Zone",1,"click-zone","test-zone",2,"position","absolute","top","5%","left","5%","width","15%","height","10%",3,"click"],["title","I - C Major",1,"click-zone","chord-zone",2,"position","absolute","top","20%","left","10%","width","12%","height","8%",3,"click"],["title","ii - D minor",1,"click-zone","chord-zone",2,"position","absolute","top","20%","left","25%","width","12%","height","8%",3,"click"],["title","iii - E minor",1,"click-zone","chord-zone",2,"position","absolute","top","20%","left","40%","width","12%","height","8%",3,"click"],["title","IV - F Major",1,"click-zone","chord-zone",2,"position","absolute","top","20%","left","55%","width","12%","height","8%",3,"click"],["title","V - G Major",1,"click-zone","chord-zone",2,"position","absolute","top","20%","left","70%","width","12%","height","8%",3,"click"],["title","C Note",1,"click-zone","note-zone",2,"position","absolute","top","40%","left","15%","width","8%","height","8%",3,"click"],["title","D Note",1,"click-zone","note-zone",2,"position","absolute","top","40%","left","30%","width","8%","height","8%",3,"click"],["title","E Note",1,"click-zone","note-zone",2,"position","absolute","top","40%","left","45%","width","8%","height","8%",3,"click"],["title","C Pentatonic Position 1",1,"click-zone","pent-zone",2,"position","absolute","top","60%","left","20%","width","10%","height","8%",3,"click"],["title","C Pentatonic Position 2",1,"click-zone","pent-zone",2,"position","absolute","top","60%","left","35%","width","10%","height","8%",3,"click"],[1,"play-btn",3,"click"]],template:function(i,r){i&1&&(Wt(0,Hse,147,43,"div",1),O0(1,"async")),i&2&&E("ngIf",F0(1,1,r.windowState$))},dependencies:[vr,H1,J2],styles:[".magic18-window[_ngcontent-%COMP%]{position:fixed;top:100px;left:100px;width:900px;height:650px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:15px;box-shadow:0 20px 40px #0000004d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);z-index:1000;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;overflow:hidden;cursor:move}.window-header[_ngcontent-%COMP%]{background:linear-gradient(90deg,#fff3,#ffffff1a);padding:15px 20px;border-bottom:1px solid rgba(255,255,255,.1);display:flex;justify-content:space-between;align-items:center;position:relative}.window-title[_ngcontent-%COMP%]{color:#fff;font-size:18px;font-weight:600;display:flex;align-items:center;gap:10px}.window-subtitle[_ngcontent-%COMP%]{color:#fffc;font-size:12px;margin-top:3px}.window-controls[_ngcontent-%COMP%]{display:flex;gap:8px}.control-btn[_ngcontent-%COMP%]{width:30px;height:30px;border:none;border-radius:50%;font-size:18px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.control-btn.minimize[_ngcontent-%COMP%]{background:#f1c40f;color:#2c3e50}.control-btn.minimize[_ngcontent-%COMP%]:hover{background:#f39c12;transform:scale(1.1)}.control-btn.close[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.control-btn.close[_ngcontent-%COMP%]:hover{background:#c0392b;transform:scale(1.1)}.window-header[_ngcontent-%COMP%]{background:#0003;padding:12px 20px;position:relative;border-bottom:1px solid rgba(255,255,255,.1)}.window-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:18px;font-weight:600;margin-bottom:4px}.heart[_ngcontent-%COMP%]{color:#e74c3c;font-size:16px}.window-subtitle[_ngcontent-%COMP%]{font-size:13px;color:#fffc;font-weight:300}.window-close-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:15px;background:none;border:none;color:#fff;font-size:24px;cursor:pointer;padding:5px 10px;border-radius:4px;transition:background .2s}.window-close-btn[_ngcontent-%COMP%]:hover{background:#fff3}.hide-chart-container[_ngcontent-%COMP%]{text-align:center;padding:15px 0 10px}.hide-magic18-btn[_ngcontent-%COMP%]{background:#3498db;color:#fff;border:none;padding:8px 20px;border-radius:20px;font-size:14px;cursor:pointer;transition:all .3s}.hide-magic18-btn[_ngcontent-%COMP%]:hover{background:#2980b9;transform:translateY(-1px)}.magic18-main-container[_ngcontent-%COMP%]{padding:20px}.key-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px;justify-content:center}.key-label[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.key-btn[_ngcontent-%COMP%], .open-fretboard-btn[_ngcontent-%COMP%]{background:#34495e;color:#fff;border:none;padding:8px 16px;border-radius:6px;font-size:13px;cursor:pointer;transition:all .3s}.key-btn.active[_ngcontent-%COMP%], .key-btn[_ngcontent-%COMP%]:hover, .open-fretboard-btn.active[_ngcontent-%COMP%], .open-fretboard-btn[_ngcontent-%COMP%]:hover{background:#2c3e50;transform:translateY(-1px)}.chord-grid[_ngcontent-%COMP%]{background:#0003;border-radius:12px;padding:20px;margin-bottom:20px}.chord-row[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px;justify-content:center}.chord-row.bottom-row[_ngcontent-%COMP%]{margin-bottom:0;justify-content:flex-start;margin-left:20px}.chord-card[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all .3s;position:relative;border:2px solid transparent}.chord-card.major[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b)}.chord-card.minor[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9)}.chord-card.diminished[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b59b6,#8e44ad)}.chord-card.dominant7[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f39c12,#d68910)}.chord-card.minor7[_ngcontent-%COMP%]{background:linear-gradient(135deg,#27ae60,#229954)}.chord-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px) scale(1.05);box-shadow:0 8px 25px #0000004d}.chord-card.active[_ngcontent-%COMP%]{border-color:#fff;box-shadow:0 0 20px #ffffff80;transform:translateY(-2px)}.roman-numeral[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin-bottom:2px}.chord-symbol[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin-bottom:1px}.chord-quality[_ngcontent-%COMP%]{font-size:10px;opacity:.9}.current-chord-display[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.chord-name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#fff;margin-bottom:5px}.chord-position[_ngcontent-%COMP%]{font-size:14px;color:#fffc}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:center;margin-bottom:20px}.fretboard-btn[_ngcontent-%COMP%], .intervals-btn[_ngcontent-%COMP%]{background:#2c3e50;color:#fff;border:none;padding:10px 20px;border-radius:6px;font-size:13px;cursor:pointer;transition:all .3s}.fretboard-btn[_ngcontent-%COMP%]:hover, .intervals-btn[_ngcontent-%COMP%]:hover{background:#34495e;transform:translateY(-1px)}.play-controls[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:center;margin-bottom:20px}.play-btn[_ngcontent-%COMP%], .strum-btn[_ngcontent-%COMP%]{background:#27ae60;color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s}.play-btn[_ngcontent-%COMP%]:hover, .strum-btn[_ngcontent-%COMP%]:hover{background:#219a52;transform:translateY(-2px);box-shadow:0 5px 15px #27ae604d}.color-legend[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;margin-bottom:20px;flex-wrap:wrap}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;font-size:12px}.color-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.color-dot.root[_ngcontent-%COMP%]{background:#27ae60}.color-dot.third[_ngcontent-%COMP%]{background:#e74c3c}.color-dot.fifth[_ngcontent-%COMP%]{background:#3498db}.color-dot.seventh[_ngcontent-%COMP%]{background:#95a5a6}.compact-fretboard-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px;overflow:hidden;height:120px;position:relative}.compact-fretboard-container[_ngcontent-%COMP%]   app-fretboard[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.feature-list[_ngcontent-%COMP%]{background:#0003;border-radius:8px;padding:15px;margin-top:10px}.feature-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:12px;margin-bottom:5px;color:#ffffffe6}.feature-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.checkmark[_ngcontent-%COMP%]{color:#27ae60;font-weight:700}@media (max-width: 800px){.magic18-window[_ngcontent-%COMP%]{width:95vw;left:2.5vw;top:20px}.chord-row[_ngcontent-%COMP%]{flex-wrap:wrap}.chord-card[_ngcontent-%COMP%]{width:70px;height:70px}}.magic18-svg-section[_ngcontent-%COMP%]{margin-top:20px;padding:15px;background:#ffffff1a;border-radius:10px;border:1px solid rgba(255,255,255,.2)}.magic18-svg-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-bottom:15px;font-size:16px;font-weight:600}.svg-clickable-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;max-width:800px;margin:0 auto;border:2px solid rgba(255,255,255,.3);border-radius:8px;overflow:hidden;background:#0003}.magic18-chart-svg[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.click-zone[_ngcontent-%COMP%]{cursor:pointer;transition:all .2s ease;border-radius:4px;opacity:0}.click-zone[_ngcontent-%COMP%]:hover{opacity:.3;transform:scale(1.05)}.test-zone[_ngcontent-%COMP%]:hover{background-color:#ff6b6b}.chord-zone[_ngcontent-%COMP%]:hover{background-color:#4ecdc4}.note-zone[_ngcontent-%COMP%]:hover{background-color:#45b7d1}.pent-zone[_ngcontent-%COMP%]:hover{background-color:#96ceb4}.click-zone.active[_ngcontent-%COMP%]{opacity:.4;border:2px solid #FFD93D;box-shadow:0 0 10px #ffd93d80}"],changeDetection:0})}}return t})();var nF=(()=>{class t{constructor(){this.title="mysongs"}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=zt({type:t,selectors:[["app-root"]],standalone:!1,decls:3,vars:0,template:function(i,r){i&1&&ie(0,"app-navbar")(1,"router-outlet")(2,"app-magic18-chord-chart")},dependencies:[Hp,eF,tF],styles:['@font-face{font-family:music-font;src:url("./media/Chord_Grid_v2.otf") format("opentype")}.chord-font[_ngcontent-%COMP%]{font-family:music-font}']})}}return t})();var Du=class{constructor(n,e){this.p=n,this.level=e,this.value="",this.leaf=!0,this.width=0,this.offset=0,this.child_width=0,this.subscript="",this.children=[]}};var iF=hr(Ko());var nl=iF.default,ny=(()=>{class t{constructor(e){this._http=e,this.yChords=new yn,this.hAnalysis=new yn,String.prototype.charAtIsUpper=function(i){var r=this.charAt(i);return/[A-Z]|[\u0080-\u024F]/.test(r)&&r===r.toUpperCase()}}simplified_to_abc(e,i,r,s,a,l){return e[0]=="*"?e.slice(1):'"'+e+'"'}simplified_to_analysis(e,i,r,s,a,l){return e[0]=="_"?e.slice(1):""}replace_between_quotes(e,i,r,s,a,l){return e.substring(1,e.length-1)}addStarToNotes(e,i,r,s,a,l){return" *"+e.slice(1)}abcToSimpleParse2(e){let i=nl.parseOnly(e),r=nl.extractMeasures(e)[0],s=nl.parseOnly(r.header)[0],a,l="",d="",u="",h=s.metaText.hasOwnProperty("title"),_=s.metaText.hasOwnProperty("author"),b=s.metaText.hasOwnProperty("transcription"),w="";h&&(w=s.metaText.title);let S="";_&&(S=s.metaText.author);let L="";b&&(L=s.metaText.transcription);let R=0,z=[],ne=0;for(var Q=i[0].lines,q=0;q<Q.length;q++){R=0,a=Q[q].staff[0].voices[0];for(var T=0;T<a.length;T++)if(a[T].hasOwnProperty("chord"))for(let se of a[T].chord)se.position=="default"?(l+=se.name+"  ",u+=se.name+"  "):se.position=="below"&&(l+="_"+se.name+"  ",d+=se.name);else if(a[T].hasOwnProperty("type")){let se="";a[T].type=="bar_left_repeat"?(se="||:",R+=1):a[T].type=="bar_right_repeat"?(se=":||",R+=1):a[T].type=="bar_thin"&&(se="|",R+=1),l+=se,d+=se,u+=se}else if(a[T].hasOwnProperty("el_type")&&a[T].el_type=="part"){let se="P: "+a[T].title+`
`;l+=se,d+=se,u+=se}l+=`
`,d+=`
`,u+=`
`,z.push(R-1),ne+=R-1}return{artist:S,title:w,chords:u,total_number_of_measures:ne,analysis:d,nb_measures_per_line:z}}abcToSimpleParse(e){let i="",r="",s="",a=[],l=nl.extractMeasures(e)[0].measures.length,d,u,h,_=e.split(`
`);for(var b of _)if(b.match(/^[A-Z][:][ ]*[\w*][ ]*/gm))i+=b+`
`,b.match(/^[T][:][ ]*[\w*][ ]*/gm)?d=b.split("T:")[1]:b.match(/^[A][:][ ]*[\w*][ ]*/gm)?u=b.split("A:")[1]:b.match(/^[Z][:][ ]*[\w*][ ]*/gm)&&(h=b.split("Z:")[1]);else if(!b.match(/%%[\w*]/gm)){if(!b.match(/^[\s]*[!$]{1}[\s]+$/gm)){if(s="",s=b.replace(/%(.*?)(\n|$)/g,""),s=s.replace(/[ ]([^" x|]+)[ ]/g,this.addStarToNotes),s=s.replace(/(["'])(?:(?=(\\?))\2.)*?\1/g,this.replace_between_quotes),s=s.replace(/x/g,""),i+=s,i+=`
`,s=s.replace(/([*_ABCDEFGIVxz"][^ |]*)/gm,this.simplified_to_analysis),!s)continue;r+=s+`
`;let R=nl.extractMeasures(b)[0].measures.length;R!=0&&a.push(R)}}let w=i,S=r;return{artist:u,title:d,author:h,chords:w,total_number_of_measures:l,analysis:r,nb_measures_per_line:a}}simpleToAbc(e){console.log("simpleToAbc");let i=e.split(`
`),r="",s="",a="",l="",d=[];for(var u of i)if(!u.match(/^\s*$/g))if(u.match(/^[A-Za-z]:.*/gm))r+=u+`
`,console.log("l => ",u);else{if(a="",a=u.replace(/([*_ABCDEFG][^ |]*)/gm,this.simplified_to_abc),a=a.replace(/([ ]{2})/g," x "),r+=a,r+=`
`,a=u.replace(/([*_ABCDEFGIV][^ |]*)/gm,this.simplified_to_analysis),!a)continue;s+=a+`
`;let w=nl.extractMeasures(u);d.push(w[0].measures.length)}let h=`%%stretchlast .7
%%staffsep       70
`+r,_=nl.extractMeasures(h)[0].measures.length,b=s;return{abc:h,total_number_of_measures:_,analysis:s,nb_measures_per_line:d}}_getPercentWordsStartingWithUpper(e){for(var i=[],r=[],s=[],a=[],l,d=0;d<e.length;d++){var u=0,h=0,_=!1;l=e[d].split(" ").filter(function(w){return w});for(var b=0;b<l.length;b++)(l[b].charAtIsUpper(0)||l[b][0]==="|")&&(u+=1),l[b].indexOf("[Verse")>-1&&(_=!0),l[b].indexOf("|")>-1&&(_=!1),h+=l[b].length;a.push(_),h/=l.length,s.push(h),r.push(u/l.length||0)}return{percent:r,wordLength:s,containsForbidenChar:a}}parseTab(e){for(var i=e.split(`
`),r=[],s=[],a=this._getPercentWordsStartingWithUpper(i),l=0;l<a.percent.length;l++){var d=a.percent[l]>.8&&!a.containsForbidenChar[l]&&a.wordLength[l]<5;d?s.push(i[l]):!a.containsForbidenChar[l]&&i[l]!=""&&(r.push(i[l]),i[l].match(/.*[\[].*[\]]/gm)&&s.push(i[l]))}for(var u=[],l=0;l<s.length;l++){var h=s[l].split(" ");u.push([]);for(var _=0,b=0;b<h.length;b++)h[b]!=""&&(h[b].match(/.*[\[].*[\]]/gm)?u[l].push({part:h[b]}):u[l].push({accord:h[b],pos:b}));for(var b=0;b<u[l].length-1;b++)u[l][b].duration=u[l][b+1].pos-u[l][b].pos-1;for(var b=0;b<u[l].length-1;b++)u[l][b+1].pos=0}return{chords:u,chordLines:s,lyricLines:r}}parsedTab_to_abc(e){console.log("parsedTab_to_abc");var i="",r="";let s=!1;for(let d of e.chords){r="";for(let u of d)u.hasOwnProperty("part")?(r+="P:"+u.part.split("[")[1].split("]")[0],s=!0):(r+=u.accord+"  ",s=!1);s?i+=r+`
`:i+="|"+r+`|
`}let a="";for(var l of e.lyricLines)a+="W:"+l+`
`;return i+`
`+a}searchYoutube(e){console.log("searchYoutube() =>"+e);let i={link:e},r=new Un({"Content-Type":"application/json"});this._http.post(ai.apiGetChordsFromYoutube,i,{responseType:"text",headers:r}).pipe(fn(s=>{console.log(`Received : 
`+s),this.yChords.next(s.replace(/[:]/g,"").replace(/min/g,"m"))})).subscribe(s=>console.log("data  : "+s),s=>console.log(s),()=>{console.log("Saving Complete")})}analyseWithHarmtrace(e){console.log("s => ",e);let i=nl.parseOnly(e),r=nl.extractMeasures(e)[0],s=nl.parseOnly(r.header)[0],a=i[0].lines[0].staff[0].key;if(a.root=="none")throw"parsing service : analyseWithHarmtrace() => no key found.";if(!a.root.match(/[ABCDEFG]/))throw"parsing service : analyseWithHarmtrace() => bad key found : "+a;let l=a.mode==""?"maj":"min",d=a.root+a.acc+l,u,h="",_="",b=0,w=[],S=0;for(var L=i[0].lines,R=0;R<L.length;R++){b=0,u=L[R].staff[0].voices[0];for(var z=0;z<u.length;z++)if(u[z].hasOwnProperty("chord"))for(let Q of u[z].chord)Q.position=="default"&&(h+=Q.name+";1 ",_+=Q.name+";1 ");else if(u[z].hasOwnProperty("type")){let Q="";(u[z].type=="bar_left_repeat"||u[z].type=="bar_right_repeat"||u[z].type=="bar_thin")&&(Q="",b+=1),h+=Q,_+=Q}else if(u[z].hasOwnProperty("el_type")&&u[z].el_type=="part"){let Q="P: "+u[z].title+`
`;h+=Q,_+=Q}}_=_.replace(/[♯]/g,"#").replace(/[♭]/g,"b"),_=_.replace(/[m](?!(aj|in))/g,"min"),console.log("chords => ",_),_=_.replace(/[ABCDEFG][#b]+(?!;)/g,this.addPoints),_=_.replace(/::/g,":"),console.log("chords => ",_);let ne=d+" "+_;this.sendHarmtrace(ne)}addPoints(e,i,r,s,a,l){return e+":"}sendHarmtrace(e){console.log(`sendHarmtrace  => 
`+e);let i={string:e};console.log("s => ",e);let r=new Un({"Content-Type":"application/json"});this._http.post(ai.apiGetHarmtraceAnalysis,i,{responseType:"text",headers:r}).pipe(fn(s=>{let a=s.split(`
`),l=a[a.length-2],d=this.parseSyntaxTree(l),u=this.mix_analysis_with_abc(d.analysis,e);this.hAnalysis.next(u)})).subscribe(s=>console.log("data  : "+s),s=>console.log(s),()=>{console.log("Saving Complete")})}back(e){return e.length===0?-1:e[e.length-1]}getChildren(e){let i=[];for(let r=0;r!=this.nodes.length;++r)this.nodes[r].p===e&&i.push(r);return i}getParent(e){return this.nodes[e.p]}parseSyntaxTree(e){let i={IDLE:0,LABEL:1,VALUE:2,APPENDING:3,SUBSCRIPT:4,QUOTES:5},r=i.IDLE,s=0,a=[];this.nodes=[];for(let h of e)switch(h){case"[":this.nodes.push(new Du(this.back(a),a.length)),a.push(s++),r=i.LABEL;break;case"]":r=i.VALUE,a.pop();break;case"_":r=i.SUBSCRIPT;break;case'"':r==i.LABEL?r=i.QUOTES:r==i.QUOTES&&(r=i.LABEL);break;case" ":if(r!=i.APPENDING&&r!=i.QUOTES){r=i.APPENDING,this.nodes.push(new Du(this.back(a),a.length)),++s;break}default:r===i.VALUE&&(r=i.APPENDING,this.nodes.push(new Du(this.back(a),a.length)),++s),r===i.SUBSCRIPT?this.back(this.nodes).subscript+=h:this.back(this.nodes).value+=h;break}for(var l=1;l<this.nodes.length;l++)this.nodes[this.nodes[l].p].children.push(this.nodes[l]);let d=JSON.parse(JSON.stringify(this.nodes[0])),u=[];for(var l=1;l<this.nodes.length;l++)if(this.nodes[l].children.length==0){let _;this.nodes[l].level>=5?_=this.getParent(this.getParent(this.nodes[l])):_=this.getParent(this.nodes[l]),u.push({degree:_.value,chord:this.nodes[l].value})}return{nodes:this.nodes,tree:d,analysis:u}}mix_analysis_with_abc(e,i){let r=e,s="";for(let a=0;a<r.length;a++)s+=r[a].chord+"  "+r[a].degree+" |";return s}static{this.\u0275fac=function(i){return new(i||t)(ht(Xi))}}static{this.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var mTe=nM();function oF(t){return new Vt(3e3,!1)}function Jse(){return new Vt(3100,!1)}function Qse(){return new Vt(3101,!1)}function $se(t){return new Vt(3001,!1)}function Kse(t){return new Vt(3003,!1)}function Zse(t){return new Vt(3004,!1)}function aF(t,n){return new Vt(3005,!1)}function lF(){return new Vt(3006,!1)}function cF(){return new Vt(3007,!1)}function dF(t,n){return new Vt(3008,!1)}function hF(t){return new Vt(3002,!1)}function uF(t,n,e,i,r){return new Vt(3010,!1)}function pF(){return new Vt(3011,!1)}function fF(){return new Vt(3012,!1)}function mF(){return new Vt(3200,!1)}function gF(){return new Vt(3202,!1)}function _F(){return new Vt(3013,!1)}function yF(t){return new Vt(3014,!1)}function vF(t){return new Vt(3015,!1)}function bF(t){return new Vt(3016,!1)}function xF(t,n){return new Vt(3404,!1)}function eae(t){return new Vt(3502,!1)}function CF(t){return new Vt(3503,!1)}function wF(){return new Vt(3300,!1)}function MF(t){return new Vt(3504,!1)}function SF(t){return new Vt(3301,!1)}function PF(t,n){return new Vt(3302,!1)}function kF(t){return new Vt(3303,!1)}function EF(t,n){return new Vt(3400,!1)}function TF(t){return new Vt(3401,!1)}function AF(t){return new Vt(3402,!1)}function DF(t,n){return new Vt(3505,!1)}function Rl(t){switch(t.length){case 0:return new Ka;case 1:return t[0];default:return new Fd(t)}}function wM(t,n,e=new Map,i=new Map){let r=[],s=[],a=-1,l=null;if(n.forEach(d=>{let u=d.get("offset"),h=u==a,_=h&&l||new Map;d.forEach((b,w)=>{let S=w,L=b;if(w!=="offset")switch(S=t.normalizePropertyName(S,r),L){case xu:L=e.get(w);break;case js:L=i.get(w);break;default:L=t.normalizeStyleValue(w,S,L,r);break}_.set(S,L)}),h||s.push(_),l=_,a=u}),r.length)throw eae(r);return s}function iy(t,n,e,i){switch(n){case"start":t.onStart(()=>i(e&&bM(e,"start",t)));break;case"done":t.onDone(()=>i(e&&bM(e,"done",t)));break;case"destroy":t.onDestroy(()=>i(e&&bM(e,"destroy",t)));break}}function bM(t,n,e){let i=e.totalTime,r=!!e.disabled,s=ry(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,i??t.totalTime,r),a=t._data;return a!=null&&(s._data=a),s}function ry(t,n,e,i,r="",s=0,a){return{element:t,triggerName:n,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!a}}function ts(t,n,e){let i=t.get(n);return i||t.set(n,i=e),i}function MM(t){let n=t.indexOf(":"),e=t.substring(1,n),i=t.slice(n+1);return[e,i]}var tae=typeof document>"u"?null:document.documentElement;function oy(t){let n=t.parentNode||t.host||null;return n===tae?null:n}function nae(t){return t.substring(1,6)=="ebkit"}var jd=null,sF=!1;function IF(t){jd||(jd=iae()||{},sF=jd.style?"WebkitAppearance"in jd.style:!1);let n=!0;return jd.style&&!nae(t)&&(n=t in jd.style,!n&&sF&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in jd.style)),n}function iae(){return typeof document<"u"?document.body:null}function SM(t,n){for(;n;){if(n===t)return!0;n=oy(n)}return!1}function PM(t,n,e){if(e)return Array.from(t.querySelectorAll(n));let i=t.querySelector(n);return i?[i]:[]}var rae=1e3,kM="{{",oae="}}",EM="ng-enter",sy="ng-leave",uf="ng-trigger",pf=".ng-trigger",TM="ng-animating",ay=".ng-animating";function il(t){if(typeof t=="number")return t;let n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:xM(parseFloat(n[1]),n[2])}function xM(t,n){switch(n){case"s":return t*rae;default:return t}}function ff(t,n,e){return t.hasOwnProperty("duration")?t:sae(t,n,e)}function sae(t,n,e){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,s=0,a="";if(typeof t=="string"){let l=t.match(i);if(l===null)return n.push(oF(t)),{duration:0,delay:0,easing:""};r=xM(parseFloat(l[1]),l[2]);let d=l[3];d!=null&&(s=xM(parseFloat(d),l[4]));let u=l[5];u&&(a=u)}else r=t;if(!e){let l=!1,d=n.length;r<0&&(n.push(Jse()),l=!0),s<0&&(n.push(Qse()),l=!0),l&&n.splice(d,0,oF(t))}return{duration:r,delay:s,easing:a}}function OF(t){return t.length?t[0]instanceof Map?t:t.map(n=>new Map(Object.entries(n))):[]}function ka(t,n,e){n.forEach((i,r)=>{let s=ly(r);e&&!e.has(r)&&e.set(r,t.style[s]),t.style[s]=i})}function kc(t,n){n.forEach((e,i)=>{let r=ly(i);t.style[r]=""})}function Iu(t){return Array.isArray(t)?t.length==1?t[0]:U7(t):t}function FF(t,n,e){let i=n.params||{},r=AM(t);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push($se(s))})}var CM=new RegExp(`${kM}\\s*(.+?)\\s*${oae}`,"g");function AM(t){let n=[];if(typeof t=="string"){let e;for(;e=CM.exec(t);)n.push(e[1]);CM.lastIndex=0}return n}function Ou(t,n,e){let i=`${t}`,r=i.replace(CM,(s,a)=>{let l=n[a];return l==null&&(e.push(Kse(a)),l=""),l.toString()});return r==i?t:r}var aae=/-+([a-z0-9])/g;function ly(t){return t.replace(aae,(...n)=>n[1].toUpperCase())}function BF(t,n){return t===0||n===0}function LF(t,n,e){if(e.size&&n.length){let i=n[0],r=[];if(e.forEach((s,a)=>{i.has(a)||r.push(a),i.set(a,s)}),r.length)for(let s=1;s<n.length;s++){let a=n[s];r.forEach(l=>a.set(l,cy(t,l)))}}return n}function ns(t,n,e){switch(n.type){case Jn.Trigger:return t.visitTrigger(n,e);case Jn.State:return t.visitState(n,e);case Jn.Transition:return t.visitTransition(n,e);case Jn.Sequence:return t.visitSequence(n,e);case Jn.Group:return t.visitGroup(n,e);case Jn.Animate:return t.visitAnimate(n,e);case Jn.Keyframes:return t.visitKeyframes(n,e);case Jn.Style:return t.visitStyle(n,e);case Jn.Reference:return t.visitReference(n,e);case Jn.AnimateChild:return t.visitAnimateChild(n,e);case Jn.AnimateRef:return t.visitAnimateRef(n,e);case Jn.Query:return t.visitQuery(n,e);case Jn.Stagger:return t.visitStagger(n,e);default:throw Zse(n.type)}}function cy(t,n){return window.getComputedStyle(t)[n]}var YM=(()=>{class t{validateStyleProperty(e){return IF(e)}containsElement(e,i){return SM(e,i)}getParentElement(e){return oy(e)}query(e,i,r){return PM(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,a,l=[],d){return new Ka(r,s)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})(),Wd=class{static NOOP=new YM},zd=class{};var lae=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),fy=class extends zd{normalizePropertyName(n,e){return ly(n)}normalizeStyleValue(n,e,i,r){let s="",a=i.toString().trim();if(lae.has(e)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let l=i.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&l[1].length==0&&r.push(aF(n,i))}return a+s}};var my="*";function cae(t,n){let e=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(i=>dae(i,e,n)):e.push(t),e}function dae(t,n,e){if(t[0]==":"){let d=hae(t,e);if(typeof d=="function"){n.push(d);return}t=d}let i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return e.push(vF(t)),n;let r=i[1],s=i[2],a=i[3];n.push(NF(r,a));let l=r==my&&a==my;s[0]=="<"&&!l&&n.push(NF(a,r))}function hae(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return n.push(bF(t)),"* => *"}}var dy=new Set(["true","1"]),hy=new Set(["false","0"]);function NF(t,n){let e=dy.has(t)||hy.has(t),i=dy.has(n)||hy.has(n);return(r,s)=>{let a=t==my||t==r,l=n==my||n==s;return!a&&e&&typeof r=="boolean"&&(a=r?dy.has(t):hy.has(t)),!l&&i&&typeof s=="boolean"&&(l=s?dy.has(n):hy.has(n)),a&&l}}var YF=":self",uae=new RegExp(`s*${YF}s*,?`,"g");function XF(t,n,e,i){return new LM(t).build(n,e,i)}var VF="",LM=class{_driver;constructor(n){this._driver=n}build(n,e,i){let r=new NM(e);return this._resetContextStyleTimingState(r),ns(this,Iu(n),r)}_resetContextStyleTimingState(n){n.currentQuerySelector=VF,n.collectedStyles=new Map,n.collectedStyles.set(VF,new Map),n.currentTime=0}visitTrigger(n,e){let i=e.queryCount=0,r=e.depCount=0,s=[],a=[];return n.name.charAt(0)=="@"&&e.errors.push(lF()),n.definitions.forEach(l=>{if(this._resetContextStyleTimingState(e),l.type==Jn.State){let d=l,u=d.name;u.toString().split(/\s*,\s*/).forEach(h=>{d.name=h,s.push(this.visitState(d,e))}),d.name=u}else if(l.type==Jn.Transition){let d=this.visitTransition(l,e);i+=d.queryCount,r+=d.depCount,a.push(d)}else e.errors.push(cF())}),{type:Jn.Trigger,name:n.name,states:s,transitions:a,queryCount:i,depCount:r,options:null}}visitState(n,e){let i=this.visitStyle(n.styles,e),r=n.options&&n.options.params||null;if(i.containsDynamicStyles){let s=new Set,a=r||{};i.styles.forEach(l=>{l instanceof Map&&l.forEach(d=>{AM(d).forEach(u=>{a.hasOwnProperty(u)||s.add(u)})})}),s.size&&e.errors.push(dF(n.name,[...s.values()]))}return{type:Jn.State,name:n.name,style:i,options:r?{params:r}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;let i=ns(this,Iu(n.animation),e),r=cae(n.expr,e.errors);return{type:Jn.Transition,matchers:r,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Gd(n.options)}}visitSequence(n,e){return{type:Jn.Sequence,steps:n.steps.map(i=>ns(this,i,e)),options:Gd(n.options)}}visitGroup(n,e){let i=e.currentTime,r=0,s=n.steps.map(a=>{e.currentTime=i;let l=ns(this,a,e);return r=Math.max(r,e.currentTime),l});return e.currentTime=r,{type:Jn.Group,steps:s,options:Gd(n.options)}}visitAnimate(n,e){let i=gae(n.timings,e.errors);e.currentAnimateTimings=i;let r,s=n.styles?n.styles:Bd({});if(s.type==Jn.Keyframes)r=this.visitKeyframes(s,e);else{let a=n.styles,l=!1;if(!a){l=!0;let u={};i.easing&&(u.easing=i.easing),a=Bd(u)}e.currentTime+=i.duration+i.delay;let d=this.visitStyle(a,e);d.isEmptyStep=l,r=d}return e.currentAnimateTimings=null,{type:Jn.Animate,timings:i,style:r,options:null}}visitStyle(n,e){let i=this._makeStyleAst(n,e);return this._validateStyleAst(i,e),i}_makeStyleAst(n,e){let i=[],r=Array.isArray(n.styles)?n.styles:[n.styles];for(let l of r)typeof l=="string"?l===js?i.push(l):e.errors.push(hF(l)):i.push(new Map(Object.entries(l)));let s=!1,a=null;return i.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(a=l.get("easing"),l.delete("easing")),!s)){for(let d of l.values())if(d.toString().indexOf(kM)>=0){s=!0;break}}}),{type:Jn.Style,styles:i,easing:a,offset:n.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(n,e){let i=e.currentAnimateTimings,r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),n.styles.forEach(a=>{typeof a!="string"&&a.forEach((l,d)=>{let u=e.collectedStyles.get(e.currentQuerySelector),h=u.get(d),_=!0;h&&(s!=r&&s>=h.startTime&&r<=h.endTime&&(e.errors.push(uF(d,h.startTime,h.endTime,s,r)),_=!1),s=h.startTime),_&&u.set(d,{startTime:s,endTime:r}),e.options&&FF(l,e.options,e.errors)})})}visitKeyframes(n,e){let i={type:Jn.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(pF()),i;let r=1,s=0,a=[],l=!1,d=!1,u=0,h=n.steps.map(z=>{let ne=this._makeStyleAst(z,e),Q=ne.offset!=null?ne.offset:mae(ne.styles),q=0;return Q!=null&&(s++,q=ne.offset=Q),d=d||q<0||q>1,l=l||q<u,u=q,a.push(q),ne});d&&e.errors.push(fF()),l&&e.errors.push(mF());let _=n.steps.length,b=0;s>0&&s<_?e.errors.push(gF()):s==0&&(b=r/(_-1));let w=_-1,S=e.currentTime,L=e.currentAnimateTimings,R=L.duration;return h.forEach((z,ne)=>{let Q=b>0?ne==w?1:b*ne:a[ne],q=Q*R;e.currentTime=S+L.delay+q,L.duration=q,this._validateStyleAst(z,e),z.offset=Q,i.styles.push(z)}),i}visitReference(n,e){return{type:Jn.Reference,animation:ns(this,Iu(n.animation),e),options:Gd(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:Jn.AnimateChild,options:Gd(n.options)}}visitAnimateRef(n,e){return{type:Jn.AnimateRef,animation:this.visitReference(n.animation,e),options:Gd(n.options)}}visitQuery(n,e){let i=e.currentQuerySelector,r=n.options||{};e.queryCount++,e.currentQuery=n;let[s,a]=pae(n.selector);e.currentQuerySelector=i.length?i+" "+s:s,ts(e.collectedStyles,e.currentQuerySelector,new Map);let l=ns(this,Iu(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:Jn.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:l,originalSelector:n.selector,options:Gd(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(_F());let i=n.timings==="full"?{duration:0,delay:0,easing:"full"}:ff(n.timings,e.errors,!0);return{type:Jn.Stagger,animation:ns(this,Iu(n.animation),e),timings:i,options:null}}};function pae(t){let n=!!t.split(/\s*,\s*/).find(e=>e==YF);return n&&(t=t.replace(uae,"")),t=t.replace(/@\*/g,pf).replace(/@\w+/g,e=>pf+"-"+e.slice(1)).replace(/:animating/g,ay),[t,n]}function fae(t){return t?Et({},t):null}var NM=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(n){this.errors=n}};function mae(t){if(typeof t=="string")return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){let i=e;n=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}function gae(t,n){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let s=ff(t,n).duration;return DM(s,0,"")}let e=t;if(e.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=DM(0,0,"");return s.dynamic=!0,s.strValue=e,s}let r=ff(e,n);return DM(r.duration,r.delay,r.easing)}function Gd(t){return t?(t=Et({},t),t.params&&(t.params=fae(t.params))):t={},t}function DM(t,n,e){return{duration:t,delay:n,easing:e}}function XM(t,n,e,i,r,s,a=null,l=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:a,subTimeline:l}}var gf=class{_map=new Map;get(n){return this._map.get(n)||[]}append(n,e){let i=this._map.get(n);i||this._map.set(n,i=[]),i.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}},_ae=1,yae=":enter",vae=new RegExp(yae,"g"),bae=":leave",xae=new RegExp(bae,"g");function JF(t,n,e,i,r,s=new Map,a=new Map,l,d,u=[]){return new VM().buildKeyframes(t,n,e,i,r,s,a,l,d,u)}var VM=class{buildKeyframes(n,e,i,r,s,a,l,d,u,h=[]){u=u||new gf;let _=new RM(n,e,u,r,s,h,[]);_.options=d;let b=d.delay?il(d.delay):0;_.currentTimeline.delayNextStep(b),_.currentTimeline.setStyles([a],null,_.errors,d),ns(this,i,_);let w=_.timelines.filter(S=>S.containsAnimation());if(w.length&&l.size){let S;for(let L=w.length-1;L>=0;L--){let R=w[L];if(R.element===e){S=R;break}}S&&!S.allowOnlyTimelineStyles()&&S.setStyles([l],null,_.errors,d)}return w.length?w.map(S=>S.buildKeyframes()):[XM(e,[],[],[],0,b,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){let i=e.subInstructions.get(e.element);if(i){let r=e.createSubContext(n.options),s=e.currentTimeline.currentTime,a=this._visitSubInstructions(i,r,r.options);s!=a&&e.transformIntoNewTimeline(a)}e.previousNode=n}visitAnimateRef(n,e){let i=e.createSubContext(n.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,i),this.visitReference(n.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,i){for(let r of n){let s=r?.delay;if(s){let a=typeof s=="number"?s:il(Ou(s,r?.params??{},e.errors));i.delayNextStep(a)}}}_visitSubInstructions(n,e,i){let s=e.currentTimeline.currentTime,a=i.duration!=null?il(i.duration):null,l=i.delay!=null?il(i.delay):null;return a!==0&&n.forEach(d=>{let u=e.appendInstructionToTimeline(d,a,l);s=Math.max(s,u.duration+u.delay)}),s}visitReference(n,e){e.updateOptions(n.options,!0),ns(this,n.animation,e),e.previousNode=n}visitSequence(n,e){let i=e.subContextCount,r=e,s=n.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==Jn.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=gy);let a=il(s.delay);r.delayNextStep(a)}n.steps.length&&(n.steps.forEach(a=>ns(this,a,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){let i=[],r=e.currentTimeline.currentTime,s=n.options&&n.options.delay?il(n.options.delay):0;n.steps.forEach(a=>{let l=e.createSubContext(n.options);s&&l.delayNextStep(s),ns(this,a,l),r=Math.max(r,l.currentTimeline.currentTime),i.push(l.currentTimeline)}),i.forEach(a=>e.currentTimeline.mergeTimelineCollectedStyles(a)),e.transformIntoNewTimeline(r),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){let i=n.strValue,r=e.params?Ou(i,e.params,e.errors):i;return ff(r,e.errors)}else return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){let i=e.currentAnimateTimings=this._visitTiming(n.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());let s=n.style;s.type==Jn.Keyframes?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){let i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=r&&r.easing||n.easing;n.isEmptyStep?i.applyEmptyStep(s):i.setStyles(n.styles,s,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){let i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,l=e.createSubContext().currentTimeline;l.easing=i.easing,n.styles.forEach(d=>{let u=d.offset||0;l.forwardTime(u*s),l.setStyles(d.styles,d.easing,e.errors,e.options),l.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(l),e.transformIntoNewTimeline(r+s),e.previousNode=n}visitQuery(n,e){let i=e.currentTimeline.currentTime,r=n.options||{},s=r.delay?il(r.delay):0;s&&(e.previousNode.type===Jn.Style||i==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=gy);let a=i,l=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=l.length;let d=null;l.forEach((u,h)=>{e.currentQueryIndex=h;let _=e.createSubContext(n.options,u);s&&_.delayNextStep(s),u===e.element&&(d=_.currentTimeline),ns(this,n.animation,_),_.currentTimeline.applyStylesToKeyframe();let b=_.currentTimeline.currentTime;a=Math.max(a,b)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),d&&(e.currentTimeline.mergeTimelineCollectedStyles(d),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){let i=e.parentContext,r=e.currentTimeline,s=n.timings,a=Math.abs(s.duration),l=a*(e.currentQueryTotal-1),d=a*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":d=l-d;break;case"full":d=i.currentStaggerTime;break}let h=e.currentTimeline;d&&h.delayNextStep(d);let _=h.currentTime;ns(this,n.animation,e),e.previousNode=n,i.currentStaggerTime=r.currentTime-_+(r.startTime-i.currentTimeline.startTime)}},gy={},RM=class t{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=gy;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(n,e,i,r,s,a,l,d){this._driver=n,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=a,this.timelines=l,this.currentTimeline=d||new _y(this._driver,e,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;let i=n,r=this.options;i.duration!=null&&(r.duration=il(i.duration)),i.delay!=null&&(r.delay=il(i.delay));let s=i.params;if(s){let a=r.params;a||(a=this.options.params={}),Object.keys(s).forEach(l=>{(!e||!a.hasOwnProperty(l))&&(a[l]=Ou(s[l],a,this.errors))})}}_copyOptions(){let n={};if(this.options){let e=this.options.params;if(e){let i=n.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return n}createSubContext(n=null,e,i){let r=e||this.element,s=new t(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(n),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(n){return this.previousNode=gy,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,i){let r={duration:e??n.duration,delay:this.currentTimeline.currentTime+(i??0)+n.delay,easing:""},s=new jM(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,r,n.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,i,r,s,a){let l=[];if(r&&l.push(this.element),n.length>0){n=n.replace(vae,"."+this._enterClassName),n=n.replace(xae,"."+this._leaveClassName);let d=i!=1,u=this._driver.query(this.element,n,d);i!==0&&(u=i<0?u.slice(u.length+i,u.length):u.slice(0,i)),l.push(...u)}return!s&&l.length==0&&a.push(yF(e)),l}},_y=class t{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(n,e,i,r){this._driver=n,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new t(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=_ae,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||js),this._currentKeyframe.set(e,js);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,i,r){e&&this._previousKeyframe.set("easing",e);let s=r&&r.params||{},a=Cae(n,this._globalTimelineStyles);for(let[l,d]of a){let u=Ou(d,s,i);this._pendingStyles.set(l,u),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??js),this._updateStyle(l,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,i)=>{let r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let n=new Set,e=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((l,d)=>{let u=new Map([...this._backFill,...l]);u.forEach((h,_)=>{h===xu?n.add(_):h===js&&e.add(_)}),i||u.set("offset",d/this.duration),r.push(u)});let s=[...n.values()],a=[...e.values()];if(i){let l=r[0],d=new Map(l);l.set("offset",0),d.set("offset",1),r=[l,d]}return XM(this.element,r,s,a,this.duration,this.startTime,this.easing,!1)}},jM=class extends _y{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(n,e,i,r,s,a,l=!1){super(n,e,a.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=l,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){let s=[],a=i+e,l=e/a,d=new Map(n[0]);d.set("offset",0),s.push(d);let u=new Map(n[0]);u.set("offset",RF(l)),s.push(u);let h=n.length-1;for(let _=1;_<=h;_++){let b=new Map(n[_]),w=b.get("offset"),S=e+w*i;b.set("offset",RF(S/a)),s.push(b)}i=a,e=0,r="",n=s}return XM(this.element,n,this.preStyleProps,this.postStyleProps,i,e,r,!0)}};function RF(t,n=3){let e=Math.pow(10,n-1);return Math.round(t*e)/e}function Cae(t,n){let e=new Map,i;return t.forEach(r=>{if(r==="*"){i??=n.keys();for(let s of i)e.set(s,js)}else for(let[s,a]of r)e.set(s,a)}),e}function jF(t,n,e,i,r,s,a,l,d,u,h,_,b){return{type:0,element:t,triggerName:n,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:a,timelines:l,queriedElements:d,preStyleProps:u,postStyleProps:h,totalTime:_,errors:b}}var IM={},yy=class{_triggerName;ast;_stateStyles;constructor(n,e,i){this._triggerName=n,this.ast=e,this._stateStyles=i}match(n,e,i,r){return wae(this.ast.matchers,n,e,i,r)}buildStyles(n,e,i){let r=this._stateStyles.get("*");return n!==void 0&&(r=this._stateStyles.get(n?.toString())||r),r?r.buildStyles(e,i):new Map}build(n,e,i,r,s,a,l,d,u,h){let _=[],b=this.ast.options&&this.ast.options.params||IM,w=l&&l.params||IM,S=this.buildStyles(i,w,_),L=d&&d.params||IM,R=this.buildStyles(r,L,_),z=new Set,ne=new Map,Q=new Map,q=r==="void",T={params:QF(L,b),delay:this.ast.options?.delay},se=h?[]:JF(n,e,this.ast.animation,s,a,S,R,T,u,_),_e=0;return se.forEach(Me=>{_e=Math.max(Me.duration+Me.delay,_e)}),_.length?jF(e,this._triggerName,i,r,q,S,R,[],[],ne,Q,_e,_):(se.forEach(Me=>{let me=Me.element,K=ts(ne,me,new Set);Me.preStyleProps.forEach(be=>K.add(be));let ue=ts(Q,me,new Set);Me.postStyleProps.forEach(be=>ue.add(be)),me!==e&&z.add(me)}),jF(e,this._triggerName,i,r,q,S,R,se,[...z.values()],ne,Q,_e))}};function wae(t,n,e,i,r){return t.some(s=>s(n,e,i,r))}function QF(t,n){let e=Et({},n);return Object.entries(t).forEach(([i,r])=>{r!=null&&(e[i]=r)}),e}var GM=class{styles;defaultParams;normalizer;constructor(n,e,i){this.styles=n,this.defaultParams=e,this.normalizer=i}buildStyles(n,e){let i=new Map,r=QF(n,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{a&&(a=Ou(a,r,e));let d=this.normalizer.normalizePropertyName(l,e);a=this.normalizer.normalizeStyleValue(l,d,a,e),i.set(l,a)})}),i}};function Mae(t,n,e){return new WM(t,n,e)}var WM=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(n,e,i){this.name=n,this.ast=e,this._normalizer=i,e.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new GM(r.style,s,i))}),GF(this.states,"true","1"),GF(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new yy(n,r,this.states))}),this.fallbackTransition=Sae(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,i,r){return this.transitionFactories.find(a=>a.match(n,e,i,r))||null}matchStyles(n,e,i){return this.fallbackTransition.buildStyles(n,e,i)}};function Sae(t,n,e){let i=[(a,l)=>!0],r={type:Jn.Sequence,steps:[],options:null},s={type:Jn.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new yy(t,s,n)}function GF(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}var Pae=new gf,zM=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i}register(n,e){let i=[],r=[],s=XF(this._driver,e,i,r);if(i.length)throw CF(i);this._animations.set(n,s)}_buildPlayer(n,e,i){let r=n.element,s=wM(this._normalizer,n.keyframes,e,i);return this._driver.animate(r,s,n.duration,n.delay,n.easing,[],!0)}create(n,e,i={}){let r=[],s=this._animations.get(n),a,l=new Map;if(s?(a=JF(this._driver,e,s,EM,sy,new Map,new Map,i,Pae,r),a.forEach(h=>{let _=ts(l,h.element,new Map);h.postStyleProps.forEach(b=>_.set(b,null))})):(r.push(wF()),a=[]),r.length)throw MF(r);l.forEach((h,_)=>{h.forEach((b,w)=>{h.set(w,this._driver.computeStyle(_,w,js))})});let d=a.map(h=>{let _=l.get(h.element);return this._buildPlayer(h,new Map,_)}),u=Rl(d);return this._playersById.set(n,u),u.onDestroy(()=>this.destroy(n)),this.players.push(u),u}destroy(n){let e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);let i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(n){let e=this._playersById.get(n);if(!e)throw SF(n);return e}listen(n,e,i,r){let s=ry(e,"","","");return iy(this._getPlayer(n),i,s,r),()=>{}}command(n,e,i,r){if(i=="register"){this.register(n,r[0]);return}if(i=="create"){let a=r[0]||{};this.create(n,e,a);return}let s=this._getPlayer(n);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(n);break}}},WF="ng-animate-queued",kae=".ng-animate-queued",OM="ng-animate-disabled",Eae=".ng-animate-disabled",Tae="ng-star-inserted",Aae=".ng-star-inserted",Dae=[],$F={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Iae={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ea="__ng_removed",_f=class{namespaceId;value;options;get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;let i=n&&n.hasOwnProperty("value"),r=i?n.value:n;if(this.value=Fae(r),i){let s=n,{value:a}=s,l=Oy(s,["value"]);this.options=l}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){let e=n.params;if(e){let i=this.options.params;Object.keys(e).forEach(r=>{i[r]==null&&(i[r]=e[r])})}}},mf="void",FM=new _f(mf),UM=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(n,e,i){this.id=n,this.hostElement=e,this._engine=i,this._hostClassName="ng-tns-"+n,Ys(e,this._hostClassName)}listen(n,e,i,r){if(!this._triggers.has(e))throw PF(i,e);if(i==null||i.length==0)throw kF(e);if(!Bae(i))throw EF(i,e);let s=ts(this._elementListeners,n,[]),a={name:e,phase:i,callback:r};s.push(a);let l=ts(this._engine.statesByElement,n,new Map);return l.has(e)||(Ys(n,uf),Ys(n,uf+"-"+e),l.set(e,FM)),()=>{this._engine.afterFlush(()=>{let d=s.indexOf(a);d>=0&&s.splice(d,1),this._triggers.has(e)||l.delete(e)})}}register(n,e){return this._triggers.has(n)?!1:(this._triggers.set(n,e),!0)}_getTrigger(n){let e=this._triggers.get(n);if(!e)throw TF(n);return e}trigger(n,e,i,r=!0){let s=this._getTrigger(e),a=new yf(this.id,e,n),l=this._engine.statesByElement.get(n);l||(Ys(n,uf),Ys(n,uf+"-"+e),this._engine.statesByElement.set(n,l=new Map));let d=l.get(e),u=new _f(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&d&&u.absorbOptions(d.options),l.set(e,u),d||(d=FM),!(u.value===mf)&&d.value===u.value){if(!Vae(d.params,u.params)){let L=[],R=s.matchStyles(d.value,d.params,L),z=s.matchStyles(u.value,u.params,L);L.length?this._engine.reportError(L):this._engine.afterFlush(()=>{kc(n,R),ka(n,z)})}return}let b=ts(this._engine.playersByElement,n,[]);b.forEach(L=>{L.namespaceId==this.id&&L.triggerName==e&&L.queued&&L.destroy()});let w=s.matchTransition(d.value,u.value,n,u.params),S=!1;if(!w){if(!r)return;w=s.fallbackTransition,S=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:w,fromState:d,toState:u,player:a,isFallbackTransition:S}),S||(Ys(n,WF),a.onStart(()=>{Fu(n,WF)})),a.onDone(()=>{let L=this.players.indexOf(a);L>=0&&this.players.splice(L,1);let R=this._engine.playersByElement.get(n);if(R){let z=R.indexOf(a);z>=0&&R.splice(z,1)}}),this.players.push(a),b.push(a),a}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);let e=this._engine.playersByElement.get(n);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){let i=this._engine.driver.query(n,pf,!0);i.forEach(r=>{if(r[Ea])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(a=>a.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(n,e,i,r){let s=this._engine.statesByElement.get(n),a=new Map;if(s){let l=[];if(s.forEach((d,u)=>{if(a.set(u,d.value),this._triggers.has(u)){let h=this.trigger(n,u,mf,r);h&&l.push(h)}}),l.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,a),i&&Rl(l).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){let e=this._elementListeners.get(n),i=this._engine.statesByElement.get(n);if(e&&i){let r=new Set;e.forEach(s=>{let a=s.name;if(r.has(a))return;r.add(a);let d=this._triggers.get(a).fallbackTransition,u=i.get(a)||FM,h=new _f(mf),_=new yf(this.id,a,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:a,transition:d,fromState:u,toState:h,player:_,isFallbackTransition:!0})})}}removeNode(n,e){let i=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let r=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(n):[];if(s&&s.length)r=!0;else{let a=n;for(;a=a.parentNode;)if(i.statesByElement.get(a)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(n),r)i.markElementAsRemoved(this.id,n,!1,e);else{let s=n[Ea];(!s||s===$F)&&(i.afterFlush(()=>this.clearElementCache(n)),i.destroyInnerAnimations(n),i._onRemovalComplete(n,e))}}insertNode(n,e){Ys(n,this._hostClassName)}drainQueuedTransitions(n){let e=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let s=i.element,a=this._elementListeners.get(s);a&&a.forEach(l=>{if(l.name==i.triggerName){let d=ry(s,i.triggerName,i.fromState.value,i.toState.value);d._data=n,iy(i.player,l.phase,d,l.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{let s=i.transition.ast.depCount,a=r.transition.ast.depCount;return s==0||a==0?s-a:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}},qM=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(n,e)=>{};_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,i){this.bodyNode=n,this.driver=e,this._normalizer=i}get queuedPlayers(){let n=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&n.push(i)})}),n}createNamespace(n,e){let i=new UM(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[n]=i}_balanceNamespaceList(n,e){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let a=!1,l=this.driver.getParentElement(e);for(;l;){let d=r.get(l);if(d){let u=i.indexOf(d);i.splice(u+1,0,n),a=!0;break}l=this.driver.getParentElement(l)}a||i.unshift(n)}else i.push(n);return r.set(e,n),n}register(n,e){let i=this._namespaceLookup[n];return i||(i=this.createNamespace(n,e)),i}registerTrigger(n,e,i){let r=this._namespaceLookup[n];r&&r.register(e,i)&&this.totalAnimations++}destroy(n,e){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(n);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){let e=new Set,i=this.statesByElement.get(n);if(i){for(let r of i.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}}return e}trigger(n,e,i,r){if(uy(e)){let s=this._fetchNamespace(n);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(n,e,i,r){if(!uy(e))return;let s=e[Ea];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let a=this.collectedLeaveElements.indexOf(e);a>=0&&this.collectedLeaveElements.splice(a,1)}if(n){let a=this._fetchNamespace(n);a&&a.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Ys(n,OM)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),Fu(n,OM))}removeNode(n,e,i){if(uy(e)){let r=n?this._fetchNamespace(n):null;r?r.removeNode(e,i):this.markElementAsRemoved(n,e,!1,i);let s=this.namespacesByHostElement.get(e);s&&s.id!==n&&s.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(n,e,i,r,s){this.collectedLeaveElements.push(e),e[Ea]={namespaceId:n,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(n,e,i,r,s){return uy(e)?this._fetchNamespace(n).listen(e,i,r,s):()=>{}}_buildInstruction(n,e,i,r,s){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,i,r,n.fromState.options,n.toState.options,e,s)}destroyInnerAnimations(n){let e=this.driver.query(n,pf,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(n,ay,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(n){let e=this.playersByElement.get(n);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(n){let e=this.playersByQueriedElement.get(n);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Rl(this.players).onDone(()=>n());n()})}processLeaveNode(n){let e=n[Ea];if(e&&e.setForRemoval){if(n[Ea]=$F,e.namespaceId){this.destroyInnerAnimations(n);let i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(OM)&&this.markElementAsDisabled(n,!1),this.driver.query(n,Eae,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Ys(r,Tae)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{e=this._flushAnimations(i,n)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],e.length?Rl(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(n){throw AF(n)}_flushAnimations(n,e){let i=new gf,r=[],s=new Map,a=[],l=new Map,d=new Map,u=new Map,h=new Set;this.disabledNodes.forEach(Y=>{h.add(Y);let G=this.driver.query(Y,kae,!0);for(let le=0;le<G.length;le++)h.add(G[le])});let _=this.bodyNode,b=Array.from(this.statesByElement.keys()),w=qF(b,this.collectedEnterElements),S=new Map,L=0;w.forEach((Y,G)=>{let le=EM+L++;S.set(G,le),Y.forEach(X=>Ys(X,le))});let R=[],z=new Set,ne=new Set;for(let Y=0;Y<this.collectedLeaveElements.length;Y++){let G=this.collectedLeaveElements[Y],le=G[Ea];le&&le.setForRemoval&&(R.push(G),z.add(G),le.hasAnimation?this.driver.query(G,Aae,!0).forEach(X=>z.add(X)):ne.add(G))}let Q=new Map,q=qF(b,Array.from(z));q.forEach((Y,G)=>{let le=sy+L++;Q.set(G,le),Y.forEach(X=>Ys(X,le))}),n.push(()=>{w.forEach((Y,G)=>{let le=S.get(G);Y.forEach(X=>Fu(X,le))}),q.forEach((Y,G)=>{let le=Q.get(G);Y.forEach(X=>Fu(X,le))}),R.forEach(Y=>{this.processLeaveNode(Y)})});let T=[],se=[];for(let Y=this._namespaceList.length-1;Y>=0;Y--)this._namespaceList[Y].drainQueuedTransitions(e).forEach(le=>{let X=le.player,Ue=le.element;if(T.push(X),this.collectedEnterElements.length){let Je=Ue[Ea];if(Je&&Je.setForMove){if(Je.previousTriggersValues&&Je.previousTriggersValues.has(le.triggerName)){let st=Je.previousTriggersValues.get(le.triggerName),ot=this.statesByElement.get(le.element);if(ot&&ot.has(le.triggerName)){let pn=ot.get(le.triggerName);pn.value=st,ot.set(le.triggerName,pn)}}X.destroy();return}}let Ze=!_||!this.driver.containsElement(_,Ue),De=Q.get(Ue),xe=S.get(Ue),ke=this._buildInstruction(le,i,xe,De,Ze);if(ke.errors&&ke.errors.length){se.push(ke);return}if(Ze){X.onStart(()=>kc(Ue,ke.fromStyles)),X.onDestroy(()=>ka(Ue,ke.toStyles)),r.push(X);return}if(le.isFallbackTransition){X.onStart(()=>kc(Ue,ke.fromStyles)),X.onDestroy(()=>ka(Ue,ke.toStyles)),r.push(X);return}let Ve=[];ke.timelines.forEach(Je=>{Je.stretchStartingKeyframe=!0,this.disabledNodes.has(Je.element)||Ve.push(Je)}),ke.timelines=Ve,i.append(Ue,ke.timelines);let it={instruction:ke,player:X,element:Ue};a.push(it),ke.queriedElements.forEach(Je=>ts(l,Je,[]).push(X)),ke.preStyleProps.forEach((Je,st)=>{if(Je.size){let ot=d.get(st);ot||d.set(st,ot=new Set),Je.forEach((pn,tn)=>ot.add(tn))}}),ke.postStyleProps.forEach((Je,st)=>{let ot=u.get(st);ot||u.set(st,ot=new Set),Je.forEach((pn,tn)=>ot.add(tn))})});if(se.length){let Y=[];se.forEach(G=>{Y.push(DF(G.triggerName,G.errors))}),T.forEach(G=>G.destroy()),this.reportError(Y)}let _e=new Map,Me=new Map;a.forEach(Y=>{let G=Y.element;i.has(G)&&(Me.set(G,G),this._beforeAnimationBuild(Y.player.namespaceId,Y.instruction,_e))}),r.forEach(Y=>{let G=Y.element;this._getPreviousPlayers(G,!1,Y.namespaceId,Y.triggerName,null).forEach(X=>{ts(_e,G,[]).push(X),X.destroy()})});let me=R.filter(Y=>HF(Y,d,u)),K=new Map;UF(K,this.driver,ne,u,js).forEach(Y=>{HF(Y,d,u)&&me.push(Y)});let be=new Map;w.forEach((Y,G)=>{UF(be,this.driver,new Set(Y),d,xu)}),me.forEach(Y=>{let G=K.get(Y),le=be.get(Y);K.set(Y,new Map([...G?.entries()??[],...le?.entries()??[]]))});let Z=[],oe=[],Ee={};a.forEach(Y=>{let{element:G,player:le,instruction:X}=Y;if(i.has(G)){if(h.has(G)){le.onDestroy(()=>ka(G,X.toStyles)),le.disabled=!0,le.overrideTotalTime(X.totalTime),r.push(le);return}let Ue=Ee;if(Me.size>1){let De=G,xe=[];for(;De=De.parentNode;){let ke=Me.get(De);if(ke){Ue=ke;break}xe.push(De)}xe.forEach(ke=>Me.set(ke,Ue))}let Ze=this._buildAnimation(le.namespaceId,X,_e,s,be,K);if(le.setRealPlayer(Ze),Ue===Ee)Z.push(le);else{let De=this.playersByElement.get(Ue);De&&De.length&&(le.parentPlayer=Rl(De)),r.push(le)}}else kc(G,X.fromStyles),le.onDestroy(()=>ka(G,X.toStyles)),oe.push(le),h.has(G)&&r.push(le)}),oe.forEach(Y=>{let G=s.get(Y.element);if(G&&G.length){let le=Rl(G);Y.setRealPlayer(le)}}),r.forEach(Y=>{Y.parentPlayer?Y.syncPlayerEvents(Y.parentPlayer):Y.destroy()});for(let Y=0;Y<R.length;Y++){let G=R[Y],le=G[Ea];if(Fu(G,sy),le&&le.hasAnimation)continue;let X=[];if(l.size){let Ze=l.get(G);Ze&&Ze.length&&X.push(...Ze);let De=this.driver.query(G,ay,!0);for(let xe=0;xe<De.length;xe++){let ke=l.get(De[xe]);ke&&ke.length&&X.push(...ke)}}let Ue=X.filter(Ze=>!Ze.destroyed);Ue.length?Lae(this,G,Ue):this.processLeaveNode(G)}return R.length=0,Z.forEach(Y=>{this.players.push(Y),Y.onDone(()=>{Y.destroy();let G=this.players.indexOf(Y);this.players.splice(G,1)}),Y.play()}),Z}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,i,r,s){let a=[];if(e){let l=this.playersByQueriedElement.get(n);l&&(a=l)}else{let l=this.playersByElement.get(n);if(l){let d=!s||s==mf;l.forEach(u=>{u.queued||!d&&u.triggerName!=r||a.push(u)})}}return(i||r)&&(a=a.filter(l=>!(i&&i!=l.namespaceId||r&&r!=l.triggerName))),a}_beforeAnimationBuild(n,e,i){let r=e.triggerName,s=e.element,a=e.isRemovalTransition?void 0:n,l=e.isRemovalTransition?void 0:r;for(let d of e.timelines){let u=d.element,h=u!==s,_=ts(i,u,[]);this._getPreviousPlayers(u,h,a,l,e.toState).forEach(w=>{let S=w.getRealPlayer();S.beforeDestroy&&S.beforeDestroy(),w.destroy(),_.push(w)})}kc(s,e.fromStyles)}_buildAnimation(n,e,i,r,s,a){let l=e.triggerName,d=e.element,u=[],h=new Set,_=new Set,b=e.timelines.map(S=>{let L=S.element;h.add(L);let R=L[Ea];if(R&&R.removedBeforeQueried)return new Ka(S.duration,S.delay);let z=L!==d,ne=Nae((i.get(L)||Dae).map(_e=>_e.getRealPlayer())).filter(_e=>{let Me=_e;return Me.element?Me.element===L:!1}),Q=s.get(L),q=a.get(L),T=wM(this._normalizer,S.keyframes,Q,q),se=this._buildPlayer(S,T,ne);if(S.subTimeline&&r&&_.add(L),z){let _e=new yf(n,l,L);_e.setRealPlayer(se),u.push(_e)}return se});u.forEach(S=>{ts(this.playersByQueriedElement,S.element,[]).push(S),S.onDone(()=>Oae(this.playersByQueriedElement,S.element,S))}),h.forEach(S=>Ys(S,TM));let w=Rl(b);return w.onDestroy(()=>{h.forEach(S=>Fu(S,TM)),ka(d,e.toStyles)}),_.forEach(S=>{ts(r,S,[]).push(w)}),w}_buildPlayer(n,e,i){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,i):new Ka(n.duration,n.delay)}},yf=class{namespaceId;triggerName;element;_player=new Ka;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(n,e,i){this.namespaceId=n,this.triggerName=e,this.element=i}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>iy(n,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){let e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){ts(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){let e=this._player;e.triggerCallback&&e.triggerCallback(n)}};function Oae(t,n,e){let i=t.get(n);if(i){if(i.length){let r=i.indexOf(e);i.splice(r,1)}i.length==0&&t.delete(n)}return i}function Fae(t){return t??null}function uy(t){return t&&t.nodeType===1}function Bae(t){return t=="start"||t=="done"}function zF(t,n){let e=t.style.display;return t.style.display=n??"none",e}function UF(t,n,e,i,r){let s=[];e.forEach(d=>s.push(zF(d)));let a=[];i.forEach((d,u)=>{let h=new Map;d.forEach(_=>{let b=n.computeStyle(u,_,r);h.set(_,b),(!b||b.length==0)&&(u[Ea]=Iae,a.push(u))}),t.set(u,h)});let l=0;return e.forEach(d=>zF(d,s[l++])),a}function qF(t,n){let e=new Map;if(t.forEach(l=>e.set(l,[])),n.length==0)return e;let i=1,r=new Set(n),s=new Map;function a(l){if(!l)return i;let d=s.get(l);if(d)return d;let u=l.parentNode;return e.has(u)?d=u:r.has(u)?d=i:d=a(u),s.set(l,d),d}return n.forEach(l=>{let d=a(l);d!==i&&e.get(d).push(l)}),e}function Ys(t,n){t.classList?.add(n)}function Fu(t,n){t.classList?.remove(n)}function Lae(t,n,e){Rl(e).onDone(()=>t.processLeaveNode(n))}function Nae(t){let n=[];return KF(t,n),n}function KF(t,n){for(let e=0;e<t.length;e++){let i=t[e];i instanceof Fd?KF(i.players,n):n.push(i)}}function Vae(t,n){let e=Object.keys(t),i=Object.keys(n);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){let s=e[r];if(!n.hasOwnProperty(s)||t[s]!==n[s])return!1}return!0}function HF(t,n,e){let i=e.get(t);if(!i)return!1;let r=n.get(t);return r?i.forEach(s=>r.add(s)):n.set(t,i),e.delete(t),!0}var Bu=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(n,e)=>{};constructor(n,e,i){this._driver=e,this._normalizer=i,this._transitionEngine=new qM(n.body,e,i),this._timelineEngine=new zM(n.body,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(n,e,i,r,s){let a=n+"-"+r,l=this._triggerCache[a];if(!l){let d=[],u=[],h=XF(this._driver,s,d,u);if(d.length)throw xF(r,d);l=Mae(r,h,this._normalizer),this._triggerCache[a]=l}this._transitionEngine.registerTrigger(e,r,l)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,i,r){this._transitionEngine.insertNode(n,e,i,r)}onRemove(n,e,i){this._transitionEngine.removeNode(n,e,i)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,i,r){if(i.charAt(0)=="@"){let[s,a]=MM(i),l=r;this._timelineEngine.command(s,e,a,l)}else this._transitionEngine.trigger(n,e,i,r)}listen(n,e,i,r,s){if(i.charAt(0)=="@"){let[a,l]=MM(i);return this._timelineEngine.listen(a,e,l,s)}return this._transitionEngine.listen(n,e,i,r,s)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}};function Rae(t,n){let e=null,i=null;return Array.isArray(n)&&n.length?(e=BM(n[0]),n.length>1&&(i=BM(n[n.length-1]))):n instanceof Map&&(e=BM(n)),e||i?new jae(t,e,i):null}var jae=(()=>{class t{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r;let s=t.initialStylesByElement.get(e);s||t.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ka(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ka(this._element,this._initialStyles),this._endStyles&&(ka(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(kc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(kc(this._element,this._endStyles),this._endStyles=null),ka(this._element,this._initialStyles),this._state=3)}}return t})();function BM(t){let n=null;return t.forEach((e,i)=>{Gae(i)&&(n=n||new Map,n.set(i,e))}),n}function Gae(t){return t==="display"||t==="position"}var vy=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(n,e,i,r){this.element=n,this.keyframes=e,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){let e=[];return n.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(n,e,i){return n.animate(this._convertKeyframesToObject(e),i)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&n.set(r,this._finished?i:cy(this.element,r))}),this.currentSnapshot=n}triggerCallback(n){let e=n==="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},by=class{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}containsElement(n,e){return SM(n,e)}getParentElement(n){return oy(n)}query(n,e,i){return PM(n,e,i)}computeStyle(n,e,i){return cy(n,e)}animate(n,e,i,r,s,a=[]){let l=r==0?"both":"forwards",d={duration:i,delay:r,fill:l};s&&(d.easing=s);let u=new Map,h=a.filter(w=>w instanceof vy);BF(i,r)&&h.forEach(w=>{w.currentSnapshot.forEach((S,L)=>u.set(L,S))});let _=OF(e).map(w=>new Map(w));_=LF(n,_,u);let b=Rae(n,_);return new vy(n,_,d,b)}};var py="@",ZF="@.disabled",xy=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(n,e,i,r){this.namespaceId=n,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,i,r=!0){this.delegate.insertBefore(n,e,i),this.engine.onInsert(this.namespaceId,e,n,r)}removeChild(n,e,i){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,i,r){this.delegate.setAttribute(n,e,i,r)}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,i,r){this.delegate.setStyle(n,e,i,r)}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i)}setProperty(n,e,i){e.charAt(0)==py&&e==ZF?this.disableAnimations(n,!!i):this.delegate.setProperty(n,e,i)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,i,r){return this.delegate.listen(n,e,i,r)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}},HM=class extends xy{factory;constructor(n,e,i,r,s){super(e,i,r,s),this.factory=n,this.namespaceId=e}setProperty(n,e,i){e.charAt(0)==py?e.charAt(1)=="."&&e==ZF?(i=i===void 0?!0:!!i,this.disableAnimations(n,i)):this.engine.process(this.namespaceId,n,e.slice(1),i):this.delegate.setProperty(n,e,i)}listen(n,e,i,r){if(e.charAt(0)==py){let s=Wae(n),a=e.slice(1),l="";return a.charAt(0)!=py&&([a,l]=zae(a)),this.engine.listen(this.namespaceId,s,a,l,d=>{let u=d._data||-1;this.factory.scheduleListenerCallback(u,i,d)})}return this.delegate.listen(n,e,i,r)}};function Wae(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function zae(t){let n=t.indexOf("."),e=t.substring(0,n),i=t.slice(n+1);return[e,i]}var Cy=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(n,e,i){this.delegate=n,this.engine=e,this._zone=i,e.onRemovalComplete=(r,s)=>{s?.removeChild(null,r)}}createRenderer(n,e){let i="",r=this.delegate.createRenderer(n,e);if(!n||!e?.data?.animation){let u=this._rendererCache,h=u.get(r);if(!h){let _=()=>u.delete(r);h=new xy(i,r,this.engine,_),u.set(r,h)}return h}let s=e.id,a=e.id+"-"+this._currentId;this._currentId++,this.engine.register(a,n);let l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(s,a,n,u.name,u)};return e.data.animation.forEach(l),new HM(this,a,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,e,i){if(n>=0&&n<this._microtaskId){this._zone.run(()=>e(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[a,l]=s;a(l)}),this._animationCallbacksBuffer=[]})}),r.push([e,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(n){this.engine.flush(),this.delegate.componentReplaced?.(n)}};var qae=(()=>{class t extends Bu{constructor(e,i,r){super(e,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||t)(ht(ji),ht(Wd),ht(zd))};static \u0275prov=lt({token:t,factory:t.\u0275fac})}return t})();function Hae(){return new fy}function Yae(t,n,e){return new Cy(t,n,e)}var tB=[{provide:zd,useFactory:Hae},{provide:Bu,useClass:qae},{provide:_l,useFactory:Yae,deps:[U0,Bu,on]}],Xae=[{provide:Wd,useClass:YM},{provide:og,useValue:"NoopAnimations"},...tB],eB=[{provide:Wd,useFactory:()=>new by},{provide:og,useFactory:()=>"BrowserAnimations"},...tB],nB=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?Xae:eB}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=yr({type:t});static \u0275inj=pr({providers:eB,imports:[H0]})}return t})();var Jae=hr(Ko());var Qae=hr(Ko());var $ae=hr(Ko());var Kae=hr(Ko());var iB=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=yr({type:t,bootstrap:[nF]})}static{this.\u0275inj=pr({providers:[Hn,Sa,Tu,E1,Sc,Vl,ko,Po,nr,Ci,yi,ny,hi,wu,es,xc,Rs,Cc,Vd,hf,q1,wc,$a,Pu,Au,ux(px())],imports:[H0,nB,Q8,f5,w7.forRoot()]})}}return t})();ai.production&&void 0;sx().bootstrapModule(iB).catch(t=>console.error(t));
